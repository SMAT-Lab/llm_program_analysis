{
    "type": "module",
    "label": "import hashlib\nimport hmac\nimport logging\n\nimport requests\nfrom fastapi import HTTPException, Request\nfrom strenum import StrEnum\n\nfrom backend.data import integrations\nfrom backend.data.model import Credentials\nfrom backend.integrations.providers import ProviderName\n\nfrom ._base import BaseWebhooksManager\n\nlogger = logging.getLogger(__name__)\n\n\n# --8<-- [start:GithubWebhooksManager]\nclass GithubWebhookType(StrEnum):\n    REPO = \"repo\"\n\n\nclass GithubWebhooksManager(BaseWebhooksManager):\n    PROVIDER_NAME = ProviderName.GITHUB\n\n    WebhookType = GithubWebhookType\n\n    GITHUB_API_URL = \"https://api.github.com\"\n    GITHUB_API_DEFAULT_HEADERS = {\"Accept\": \"application/vnd.github.v3+json\"}\n\n    @classmethod\n    async def validate_payload(\n        cls, webhook: integrations.Webhook, request: Request\n    ) -> tuple[dict, str]:\n        if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type\n\n    async def trigger_ping(\n        self, webhook: integrations.Webhook, credentials: Credentials | None\n    ) -> None:\n        if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        repo, github_hook_id = webhook.resource, webhook.provider_webhook_id\n        ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"\n\n        response = requests.post(ping_url, headers=headers)\n\n        if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")\n\n    async def _register_webhook(\n        self,\n        credentials: Credentials,\n        webhook_type: GithubWebhookType,\n        resource: str,\n        events: list[str],\n        ingress_url: str,\n        secret: str,\n    ) -> tuple[str, dict]:\n        if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")\n\n        # Extract main event, e.g. `pull_request.opened` -> `pull_request`\n        github_events = list({event.split(\".\")[0] for event in events})\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n        webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }\n\n        response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )\n\n        if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")\n\n        webhook_id = response.json()[\"id\"]\n        config = response.json()[\"config\"]\n\n        return str(webhook_id), config\n\n    async def _deregister_webhook(\n        self, webhook: integrations.Webhook, credentials: Credentials\n    ) -> None:\n        webhook_type = self.WebhookType(webhook.webhook_type)\n        if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )\n\n        response = requests.delete(delete_url, headers=headers)\n\n        if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")\n\n        # If we reach here, the webhook was successfully deleted or didn't exist\n\n\n# --8<-- [end:GithubWebhooksManager]\n\n\ndef extract_github_error_msg(response: requests.Response) -> str:\n    error_msgs = []\n    resp = response.json()\n    if resp.get(\"message\"):\n        error_msgs.append(resp[\"message\"])\n    if resp.get(\"errors\"):\n        error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])\n    if resp.get(\"error\"):\n        if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])\n    return \"\\n\".join(error_msgs)\n",
    "start_token": 0,
    "end_token": 957,
    "children": [
        {
            "type": "import_statement",
            "label": "import hashlib",
            "start_token": 0,
            "end_token": 1,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "hashlib",
                    "start_token": 1,
                    "end_token": 1,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "hashlib",
                            "start_token": 1,
                            "end_token": 1,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import hmac",
            "start_token": 3,
            "end_token": 4,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "hmac",
                    "start_token": 4,
                    "end_token": 4,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "hmac",
                            "start_token": 4,
                            "end_token": 4,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import logging",
            "start_token": 6,
            "end_token": 7,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "logging",
                    "start_token": 7,
                    "end_token": 7,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logging",
                            "start_token": 7,
                            "end_token": 7,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import requests",
            "start_token": 10,
            "end_token": 11,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "requests",
                    "start_token": 11,
                    "end_token": 11,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "requests",
                            "start_token": 11,
                            "end_token": 11,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from fastapi import HTTPException, Request",
            "start_token": 13,
            "end_token": 18,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "fastapi",
                    "start_token": 14,
                    "end_token": 14,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "fastapi",
                            "start_token": 14,
                            "end_token": 14,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "HTTPException",
                    "start_token": 16,
                    "end_token": 16,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "HTTPException",
                            "start_token": 16,
                            "end_token": 16,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "Request",
                    "start_token": 18,
                    "end_token": 18,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "Request",
                            "start_token": 18,
                            "end_token": 18,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from strenum import StrEnum",
            "start_token": 20,
            "end_token": 23,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "strenum",
                    "start_token": 21,
                    "end_token": 21,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "strenum",
                            "start_token": 21,
                            "end_token": 21,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "StrEnum",
                    "start_token": 23,
                    "end_token": 23,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "StrEnum",
                            "start_token": 23,
                            "end_token": 23,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from backend.data import integrations",
            "start_token": 26,
            "end_token": 31,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.data",
                    "start_token": 27,
                    "end_token": 29,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 27,
                            "end_token": 27,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "data",
                            "start_token": 29,
                            "end_token": 29,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "integrations",
                    "start_token": 31,
                    "end_token": 31,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "integrations",
                            "start_token": 31,
                            "end_token": 31,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from backend.data.model import Credentials",
            "start_token": 33,
            "end_token": 40,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.data.model",
                    "start_token": 34,
                    "end_token": 38,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 34,
                            "end_token": 34,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "data",
                            "start_token": 36,
                            "end_token": 36,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "model",
                            "start_token": 38,
                            "end_token": 38,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "Credentials",
                    "start_token": 40,
                    "end_token": 40,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "Credentials",
                            "start_token": 40,
                            "end_token": 40,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from backend.integrations.providers import ProviderName",
            "start_token": 42,
            "end_token": 49,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.integrations.providers",
                    "start_token": 43,
                    "end_token": 47,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 43,
                            "end_token": 43,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "integrations",
                            "start_token": 45,
                            "end_token": 45,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "providers",
                            "start_token": 47,
                            "end_token": 47,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "ProviderName",
                    "start_token": 49,
                    "end_token": 49,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "ProviderName",
                            "start_token": 49,
                            "end_token": 49,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from ._base import BaseWebhooksManager",
            "start_token": 52,
            "end_token": 56,
            "children": [
                {
                    "type": "relative_import",
                    "label": "._base",
                    "start_token": 53,
                    "end_token": 54,
                    "children": [
                        {
                            "type": "import_prefix",
                            "label": ".",
                            "start_token": 53,
                            "end_token": 53,
                            "children": []
                        },
                        {
                            "type": "dotted_name",
                            "label": "_base",
                            "start_token": 54,
                            "end_token": 54,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "_base",
                                    "start_token": 54,
                                    "end_token": 54,
                                    "children": []
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "BaseWebhooksManager",
                    "start_token": 56,
                    "end_token": 56,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseWebhooksManager",
                            "start_token": 56,
                            "end_token": 56,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "logger = logging.getLogger(__name__)",
            "start_token": 59,
            "end_token": 66,
            "children": [
                {
                    "type": "assignment",
                    "label": "logger = logging.getLogger(__name__)",
                    "start_token": 59,
                    "end_token": 66,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logger",
                            "start_token": 59,
                            "end_token": 59,
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "logging.getLogger(__name__)",
                            "start_token": 61,
                            "end_token": 66,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "logging.getLogger",
                                    "start_token": 61,
                                    "end_token": 63,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "logging",
                                            "start_token": 61,
                                            "end_token": 61,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "getLogger",
                                            "start_token": 63,
                                            "end_token": 63,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(__name__)",
                                    "start_token": 64,
                                    "end_token": 66,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "__name__",
                                            "start_token": 65,
                                            "end_token": 65,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "# --8<-- [start:GithubWebhooksManager]",
            "start_token": 70,
            "end_token": 81,
            "children": []
        },
        {
            "type": "class_definition",
            "label": "class GithubWebhookType(StrEnum):\n    REPO = \"repo\"",
            "start_token": 83,
            "end_token": 92,
            "children": [
                {
                    "type": "identifier",
                    "label": "GithubWebhookType",
                    "start_token": 84,
                    "end_token": 84,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(StrEnum)",
                    "start_token": 85,
                    "end_token": 87,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "StrEnum",
                            "start_token": 86,
                            "end_token": 86,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "REPO = \"repo\"",
                    "start_token": 90,
                    "end_token": 92,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "REPO = \"repo\"",
                            "start_token": 90,
                            "end_token": 92,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "REPO = \"repo\"",
                                    "start_token": 90,
                                    "end_token": 92,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "REPO",
                                            "start_token": 90,
                                            "end_token": 90,
                                            "children": []
                                        },
                                        {
                                            "type": "string",
                                            "label": "\"repo\"",
                                            "start_token": 92,
                                            "end_token": 92,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 92,
                                                    "end_token": 92,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "repo",
                                                    "start_token": 92,
                                                    "end_token": 92,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 92,
                                                    "end_token": 92,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class GithubWebhooksManager(BaseWebhooksManager):\n    PROVIDER_NAME = ProviderName.GITHUB\n\n    WebhookType = GithubWebhookType\n\n    GITHUB_API_URL = \"https://api.github.com\"\n    GITHUB_API_DEFAULT_HEADERS = {\"Accept\": \"application/vnd.github.v3+json\"}\n\n    @classmethod\n    async def validate_payload(\n        cls, webhook: integrations.Webhook, request: Request\n    ) -> tuple[dict, str]:\n        if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type\n\n    async def trigger_ping(\n        self, webhook: integrations.Webhook, credentials: Credentials | None\n    ) -> None:\n        if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        repo, github_hook_id = webhook.resource, webhook.provider_webhook_id\n        ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"\n\n        response = requests.post(ping_url, headers=headers)\n\n        if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")\n\n    async def _register_webhook(\n        self,\n        credentials: Credentials,\n        webhook_type: GithubWebhookType,\n        resource: str,\n        events: list[str],\n        ingress_url: str,\n        secret: str,\n    ) -> tuple[str, dict]:\n        if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")\n\n        # Extract main event, e.g. `pull_request.opened` -> `pull_request`\n        github_events = list({event.split(\".\")[0] for event in events})\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n        webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }\n\n        response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )\n\n        if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")\n\n        webhook_id = response.json()[\"id\"]\n        config = response.json()[\"config\"]\n\n        return str(webhook_id), config\n\n    async def _deregister_webhook(\n        self, webhook: integrations.Webhook, credentials: Credentials\n    ) -> None:\n        webhook_type = self.WebhookType(webhook.webhook_type)\n        if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )\n\n        response = requests.delete(delete_url, headers=headers)\n\n        if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")\n\n        # If we reach here, the webhook was successfully deleted or didn't exist",
            "start_token": 96,
            "end_token": 928,
            "children": [
                {
                    "type": "identifier",
                    "label": "GithubWebhooksManager",
                    "start_token": 97,
                    "end_token": 97,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(BaseWebhooksManager)",
                    "start_token": 98,
                    "end_token": 100,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseWebhooksManager",
                            "start_token": 99,
                            "end_token": 99,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "PROVIDER_NAME = ProviderName.GITHUB\n\n    WebhookType = GithubWebhookType\n\n    GITHUB_API_URL = \"https://api.github.com\"\n    GITHUB_API_DEFAULT_HEADERS = {\"Accept\": \"application/vnd.github.v3+json\"}\n\n    @classmethod\n    async def validate_payload(\n        cls, webhook: integrations.Webhook, request: Request\n    ) -> tuple[dict, str]:\n        if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type\n\n    async def trigger_ping(\n        self, webhook: integrations.Webhook, credentials: Credentials | None\n    ) -> None:\n        if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        repo, github_hook_id = webhook.resource, webhook.provider_webhook_id\n        ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"\n\n        response = requests.post(ping_url, headers=headers)\n\n        if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")\n\n    async def _register_webhook(\n        self,\n        credentials: Credentials,\n        webhook_type: GithubWebhookType,\n        resource: str,\n        events: list[str],\n        ingress_url: str,\n        secret: str,\n    ) -> tuple[str, dict]:\n        if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")\n\n        # Extract main event, e.g. `pull_request.opened` -> `pull_request`\n        github_events = list({event.split(\".\")[0] for event in events})\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n        webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }\n\n        response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )\n\n        if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")\n\n        webhook_id = response.json()[\"id\"]\n        config = response.json()[\"config\"]\n\n        return str(webhook_id), config\n\n    async def _deregister_webhook(\n        self, webhook: integrations.Webhook, credentials: Credentials\n    ) -> None:\n        webhook_type = self.WebhookType(webhook.webhook_type)\n        if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )\n\n        response = requests.delete(delete_url, headers=headers)\n\n        if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")\n\n        # If we reach here, the webhook was successfully deleted or didn't exist",
                    "start_token": 103,
                    "end_token": 928,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "PROVIDER_NAME = ProviderName.GITHUB",
                            "start_token": 103,
                            "end_token": 107,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "PROVIDER_NAME = ProviderName.GITHUB",
                                    "start_token": 103,
                                    "end_token": 107,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "PROVIDER_NAME",
                                            "start_token": 103,
                                            "end_token": 103,
                                            "children": []
                                        },
                                        {
                                            "type": "attribute",
                                            "label": "ProviderName.GITHUB",
                                            "start_token": 105,
                                            "end_token": 107,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "ProviderName",
                                                    "start_token": 105,
                                                    "end_token": 105,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "GITHUB",
                                                    "start_token": 107,
                                                    "end_token": 107,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "WebhookType = GithubWebhookType",
                            "start_token": 110,
                            "end_token": 112,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "WebhookType = GithubWebhookType",
                                    "start_token": 110,
                                    "end_token": 112,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "WebhookType",
                                            "start_token": 110,
                                            "end_token": 110,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "GithubWebhookType",
                                            "start_token": 112,
                                            "end_token": 112,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "GITHUB_API_URL = \"https://api.github.com\"",
                            "start_token": 115,
                            "end_token": 117,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "GITHUB_API_URL = \"https://api.github.com\"",
                                    "start_token": 115,
                                    "end_token": 117,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "GITHUB_API_URL",
                                            "start_token": 115,
                                            "end_token": 115,
                                            "children": []
                                        },
                                        {
                                            "type": "string",
                                            "label": "\"https://api.github.com\"",
                                            "start_token": 117,
                                            "end_token": 117,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 117,
                                                    "end_token": 117,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "https://api.github.com",
                                                    "start_token": 117,
                                                    "end_token": 117,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 117,
                                                    "end_token": 117,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "GITHUB_API_DEFAULT_HEADERS = {\"Accept\": \"application/vnd.github.v3+json\"}",
                            "start_token": 119,
                            "end_token": 125,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "GITHUB_API_DEFAULT_HEADERS = {\"Accept\": \"application/vnd.github.v3+json\"}",
                                    "start_token": 119,
                                    "end_token": 125,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "GITHUB_API_DEFAULT_HEADERS",
                                            "start_token": 119,
                                            "end_token": 119,
                                            "children": []
                                        },
                                        {
                                            "type": "dictionary",
                                            "label": "{\"Accept\": \"application/vnd.github.v3+json\"}",
                                            "start_token": 121,
                                            "end_token": 125,
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "label": "\"Accept\": \"application/vnd.github.v3+json\"",
                                                    "start_token": 122,
                                                    "end_token": 124,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"Accept\"",
                                                            "start_token": 122,
                                                            "end_token": 122,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 122,
                                                                    "end_token": 122,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "Accept",
                                                                    "start_token": 122,
                                                                    "end_token": 122,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 122,
                                                                    "end_token": 122,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"application/vnd.github.v3+json\"",
                                                            "start_token": 124,
                                                            "end_token": 124,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 124,
                                                                    "end_token": 124,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "application/vnd.github.v3+json",
                                                                    "start_token": 124,
                                                                    "end_token": 124,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 124,
                                                                    "end_token": 124,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "decorated_definition",
                            "label": "@classmethod\n    async def validate_payload(\n        cls, webhook: integrations.Webhook, request: Request\n    ) -> tuple[dict, str]:\n        if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type",
                            "start_token": 128,
                            "end_token": 329,
                            "children": [
                                {
                                    "type": "decorator",
                                    "label": "@classmethod",
                                    "start_token": 128,
                                    "end_token": 129,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "classmethod",
                                            "start_token": 129,
                                            "end_token": 129,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "function_definition",
                                    "label": "async def validate_payload(\n        cls, webhook: integrations.Webhook, request: Request\n    ) -> tuple[dict, str]:\n        if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type",
                                    "start_token": 131,
                                    "end_token": 329,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "validate_payload",
                                            "start_token": 133,
                                            "end_token": 133,
                                            "children": []
                                        },
                                        {
                                            "type": "parameters",
                                            "label": "(\n        cls, webhook: integrations.Webhook, request: Request\n    )",
                                            "start_token": 134,
                                            "end_token": 148,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "cls",
                                                    "start_token": 136,
                                                    "end_token": 136,
                                                    "children": []
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "label": "webhook: integrations.Webhook",
                                                    "start_token": 138,
                                                    "end_token": 142,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "webhook",
                                                            "start_token": 138,
                                                            "end_token": 138,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "integrations.Webhook",
                                                            "start_token": 140,
                                                            "end_token": 142,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "integrations.Webhook",
                                                                    "start_token": 140,
                                                                    "end_token": 142,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "integrations",
                                                                            "start_token": 140,
                                                                            "end_token": 140,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Webhook",
                                                                            "start_token": 142,
                                                                            "end_token": 142,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "typed_parameter",
                                                    "label": "request: Request",
                                                    "start_token": 144,
                                                    "end_token": 146,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "request",
                                                            "start_token": 144,
                                                            "end_token": 144,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "Request",
                                                            "start_token": 146,
                                                            "end_token": 146,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Request",
                                                                    "start_token": 146,
                                                                    "end_token": 146,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "type",
                                            "label": "tuple[dict, str]",
                                            "start_token": 151,
                                            "end_token": 156,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "tuple[dict, str]",
                                                    "start_token": 151,
                                                    "end_token": 156,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "tuple",
                                                            "start_token": 151,
                                                            "end_token": 151,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[dict, str]",
                                                            "start_token": 152,
                                                            "end_token": 156,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "dict",
                                                                    "start_token": 153,
                                                                    "end_token": 153,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "dict",
                                                                            "start_token": 153,
                                                                            "end_token": 153,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "type",
                                                                    "label": "str",
                                                                    "start_token": 155,
                                                                    "end_token": 155,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "str",
                                                                            "start_token": 155,
                                                                            "end_token": 155,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )\n\n        if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )\n\n        payload_body = await request.body()\n        hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )\n        expected_signature = \"sha256=\" + hash_object.hexdigest()\n\n        if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )\n\n        payload = await request.json()\n        if action := payload.get(\"action\"):\n            event_type += f\".{action}\"\n\n        return payload, event_type",
                                            "start_token": 159,
                                            "end_token": 329,
                                            "children": [
                                                {
                                                    "type": "if_statement",
                                                    "label": "if not (event_type := request.headers.get(\"X-GitHub-Event\")):\n            raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )",
                                                    "start_token": 159,
                                                    "end_token": 188,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "label": "not (event_type := request.headers.get(\"X-GitHub-Event\"))",
                                                            "start_token": 160,
                                                            "end_token": 173,
                                                            "children": [
                                                                {
                                                                    "type": "parenthesized_expression",
                                                                    "label": "(event_type := request.headers.get(\"X-GitHub-Event\"))",
                                                                    "start_token": 161,
                                                                    "end_token": 173,
                                                                    "children": [
                                                                        {
                                                                            "type": "named_expression",
                                                                            "label": "event_type := request.headers.get(\"X-GitHub-Event\")",
                                                                            "start_token": 162,
                                                                            "end_token": 172,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "event_type",
                                                                                    "start_token": 162,
                                                                                    "end_token": 162,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "request.headers.get(\"X-GitHub-Event\")",
                                                                                    "start_token": 165,
                                                                                    "end_token": 172,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "request.headers.get",
                                                                                            "start_token": 165,
                                                                                            "end_token": 169,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "request.headers",
                                                                                                    "start_token": 165,
                                                                                                    "end_token": 167,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "request",
                                                                                                            "start_token": 165,
                                                                                                            "end_token": 165,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "headers",
                                                                                                            "start_token": 167,
                                                                                                            "end_token": 167,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "get",
                                                                                                    "start_token": 169,
                                                                                                    "end_token": 169,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(\"X-GitHub-Event\")",
                                                                                            "start_token": 170,
                                                                                            "end_token": 172,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"X-GitHub-Event\"",
                                                                                                    "start_token": 171,
                                                                                                    "end_token": 171,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 171,
                                                                                                            "end_token": 171,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "X-GitHub-Event",
                                                                                                            "start_token": 171,
                                                                                                            "end_token": 171,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 171,
                                                                                                            "end_token": 171,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )",
                                                            "start_token": 176,
                                                            "end_token": 188,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )",
                                                                    "start_token": 176,
                                                                    "end_token": 188,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "HTTPException(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )",
                                                                            "start_token": 177,
                                                                            "end_token": 188,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "HTTPException",
                                                                                    "start_token": 177,
                                                                                    "end_token": 177,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                status_code=400, detail=\"X-GitHub-Event header is missing!\"\n            )",
                                                                                    "start_token": 178,
                                                                                    "end_token": 188,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status_code=400",
                                                                                            "start_token": 180,
                                                                                            "end_token": 182,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status_code",
                                                                                                    "start_token": 180,
                                                                                                    "end_token": 180,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "label": "400",
                                                                                                    "start_token": 182,
                                                                                                    "end_token": 182,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "detail=\"X-GitHub-Event header is missing!\"",
                                                                                            "start_token": 184,
                                                                                            "end_token": 186,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "detail",
                                                                                                    "start_token": 184,
                                                                                                    "end_token": 184,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"X-GitHub-Event header is missing!\"",
                                                                                                    "start_token": 186,
                                                                                                    "end_token": 186,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 186,
                                                                                                            "end_token": 186,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "X-GitHub-Event header is missing!",
                                                                                                            "start_token": 186,
                                                                                                            "end_token": 186,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 186,
                                                                                                            "end_token": 186,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if not (signature_header := request.headers.get(\"X-Hub-Signature-256\")):\n            raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )",
                                                    "start_token": 191,
                                                    "end_token": 220,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "label": "not (signature_header := request.headers.get(\"X-Hub-Signature-256\"))",
                                                            "start_token": 192,
                                                            "end_token": 205,
                                                            "children": [
                                                                {
                                                                    "type": "parenthesized_expression",
                                                                    "label": "(signature_header := request.headers.get(\"X-Hub-Signature-256\"))",
                                                                    "start_token": 193,
                                                                    "end_token": 205,
                                                                    "children": [
                                                                        {
                                                                            "type": "named_expression",
                                                                            "label": "signature_header := request.headers.get(\"X-Hub-Signature-256\")",
                                                                            "start_token": 194,
                                                                            "end_token": 204,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "signature_header",
                                                                                    "start_token": 194,
                                                                                    "end_token": 194,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "request.headers.get(\"X-Hub-Signature-256\")",
                                                                                    "start_token": 197,
                                                                                    "end_token": 204,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "request.headers.get",
                                                                                            "start_token": 197,
                                                                                            "end_token": 201,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "request.headers",
                                                                                                    "start_token": 197,
                                                                                                    "end_token": 199,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "request",
                                                                                                            "start_token": 197,
                                                                                                            "end_token": 197,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "headers",
                                                                                                            "start_token": 199,
                                                                                                            "end_token": 199,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "get",
                                                                                                    "start_token": 201,
                                                                                                    "end_token": 201,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(\"X-Hub-Signature-256\")",
                                                                                            "start_token": 202,
                                                                                            "end_token": 204,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"X-Hub-Signature-256\"",
                                                                                                    "start_token": 203,
                                                                                                    "end_token": 203,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 203,
                                                                                                            "end_token": 203,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "X-Hub-Signature-256",
                                                                                                            "start_token": 203,
                                                                                                            "end_token": 203,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 203,
                                                                                                            "end_token": 203,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )",
                                                            "start_token": 208,
                                                            "end_token": 220,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )",
                                                                    "start_token": 208,
                                                                    "end_token": 220,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "HTTPException(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )",
                                                                            "start_token": 209,
                                                                            "end_token": 220,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "HTTPException",
                                                                                    "start_token": 209,
                                                                                    "end_token": 209,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                status_code=403, detail=\"X-Hub-Signature-256 header is missing!\"\n            )",
                                                                                    "start_token": 210,
                                                                                    "end_token": 220,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status_code=403",
                                                                                            "start_token": 212,
                                                                                            "end_token": 214,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status_code",
                                                                                                    "start_token": 212,
                                                                                                    "end_token": 212,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "label": "403",
                                                                                                    "start_token": 214,
                                                                                                    "end_token": 214,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "detail=\"X-Hub-Signature-256 header is missing!\"",
                                                                                            "start_token": 216,
                                                                                            "end_token": 218,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "detail",
                                                                                                    "start_token": 216,
                                                                                                    "end_token": 216,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"X-Hub-Signature-256 header is missing!\"",
                                                                                                    "start_token": 218,
                                                                                                    "end_token": 218,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 218,
                                                                                                            "end_token": 218,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "X-Hub-Signature-256 header is missing!",
                                                                                                            "start_token": 218,
                                                                                                            "end_token": 218,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 218,
                                                                                                            "end_token": 218,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "payload_body = await request.body()",
                                                    "start_token": 223,
                                                    "end_token": 230,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "payload_body = await request.body()",
                                                            "start_token": 223,
                                                            "end_token": 230,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "payload_body",
                                                                    "start_token": 223,
                                                                    "end_token": 223,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await request.body()",
                                                                    "start_token": 225,
                                                                    "end_token": 230,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "request.body()",
                                                                            "start_token": 226,
                                                                            "end_token": 230,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "request.body",
                                                                                    "start_token": 226,
                                                                                    "end_token": 228,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "request",
                                                                                            "start_token": 226,
                                                                                            "end_token": 226,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "body",
                                                                                            "start_token": 228,
                                                                                            "end_token": 228,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 229,
                                                                                    "end_token": 230,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )",
                                                    "start_token": 232,
                                                    "end_token": 258,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "hash_object = hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )",
                                                            "start_token": 232,
                                                            "end_token": 258,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "hash_object",
                                                                    "start_token": 232,
                                                                    "end_token": 232,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "hmac.new(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )",
                                                                    "start_token": 234,
                                                                    "end_token": 258,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "hmac.new",
                                                                            "start_token": 234,
                                                                            "end_token": 236,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "hmac",
                                                                                    "start_token": 234,
                                                                                    "end_token": 234,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "new",
                                                                                    "start_token": 236,
                                                                                    "end_token": 236,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            webhook.secret.encode(\"utf-8\"), msg=payload_body, digestmod=hashlib.sha256\n        )",
                                                                            "start_token": 237,
                                                                            "end_token": 258,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "webhook.secret.encode(\"utf-8\")",
                                                                                    "start_token": 239,
                                                                                    "end_token": 246,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "webhook.secret.encode",
                                                                                            "start_token": 239,
                                                                                            "end_token": 243,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "webhook.secret",
                                                                                                    "start_token": 239,
                                                                                                    "end_token": 241,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "webhook",
                                                                                                            "start_token": 239,
                                                                                                            "end_token": 239,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "secret",
                                                                                                            "start_token": 241,
                                                                                                            "end_token": 241,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "encode",
                                                                                                    "start_token": 243,
                                                                                                    "end_token": 243,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(\"utf-8\")",
                                                                                            "start_token": 244,
                                                                                            "end_token": 246,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"utf-8\"",
                                                                                                    "start_token": 245,
                                                                                                    "end_token": 245,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 245,
                                                                                                            "end_token": 245,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "utf-8",
                                                                                                            "start_token": 245,
                                                                                                            "end_token": 245,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 245,
                                                                                                            "end_token": 245,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "msg=payload_body",
                                                                                    "start_token": 248,
                                                                                    "end_token": 250,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "msg",
                                                                                            "start_token": 248,
                                                                                            "end_token": 248,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "payload_body",
                                                                                            "start_token": 250,
                                                                                            "end_token": 250,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "digestmod=hashlib.sha256",
                                                                                    "start_token": 252,
                                                                                    "end_token": 256,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "digestmod",
                                                                                            "start_token": 252,
                                                                                            "end_token": 252,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "hashlib.sha256",
                                                                                            "start_token": 254,
                                                                                            "end_token": 256,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "hashlib",
                                                                                                    "start_token": 254,
                                                                                                    "end_token": 254,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sha256",
                                                                                                    "start_token": 256,
                                                                                                    "end_token": 256,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "expected_signature = \"sha256=\" + hash_object.hexdigest()",
                                                    "start_token": 260,
                                                    "end_token": 268,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "expected_signature = \"sha256=\" + hash_object.hexdigest()",
                                                            "start_token": 260,
                                                            "end_token": 268,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "expected_signature",
                                                                    "start_token": 260,
                                                                    "end_token": 260,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "binary_operator",
                                                                    "label": "\"sha256=\" + hash_object.hexdigest()",
                                                                    "start_token": 262,
                                                                    "end_token": 268,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"sha256=\"",
                                                                            "start_token": 262,
                                                                            "end_token": 262,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 262,
                                                                                    "end_token": 262,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "sha256=",
                                                                                    "start_token": 262,
                                                                                    "end_token": 262,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 262,
                                                                                    "end_token": 262,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "hash_object.hexdigest()",
                                                                            "start_token": 264,
                                                                            "end_token": 268,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "hash_object.hexdigest",
                                                                                    "start_token": 264,
                                                                                    "end_token": 266,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "hash_object",
                                                                                            "start_token": 264,
                                                                                            "end_token": 264,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "hexdigest",
                                                                                            "start_token": 266,
                                                                                            "end_token": 266,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 267,
                                                                                    "end_token": 268,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if not hmac.compare_digest(expected_signature, signature_header):\n            raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )",
                                                    "start_token": 271,
                                                    "end_token": 295,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "label": "not hmac.compare_digest(expected_signature, signature_header)",
                                                            "start_token": 272,
                                                            "end_token": 280,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "hmac.compare_digest(expected_signature, signature_header)",
                                                                    "start_token": 273,
                                                                    "end_token": 280,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "hmac.compare_digest",
                                                                            "start_token": 273,
                                                                            "end_token": 275,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "hmac",
                                                                                    "start_token": 273,
                                                                                    "end_token": 273,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "compare_digest",
                                                                                    "start_token": 275,
                                                                                    "end_token": 275,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(expected_signature, signature_header)",
                                                                            "start_token": 276,
                                                                            "end_token": 280,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "expected_signature",
                                                                                    "start_token": 277,
                                                                                    "end_token": 277,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "signature_header",
                                                                                    "start_token": 279,
                                                                                    "end_token": 279,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )",
                                                            "start_token": 283,
                                                            "end_token": 295,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )",
                                                                    "start_token": 283,
                                                                    "end_token": 295,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "HTTPException(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )",
                                                                            "start_token": 284,
                                                                            "end_token": 295,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "HTTPException",
                                                                                    "start_token": 284,
                                                                                    "end_token": 284,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                status_code=403, detail=\"Request signatures didn't match!\"\n            )",
                                                                                    "start_token": 285,
                                                                                    "end_token": 295,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status_code=403",
                                                                                            "start_token": 287,
                                                                                            "end_token": 289,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status_code",
                                                                                                    "start_token": 287,
                                                                                                    "end_token": 287,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "label": "403",
                                                                                                    "start_token": 289,
                                                                                                    "end_token": 289,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "detail=\"Request signatures didn't match!\"",
                                                                                            "start_token": 291,
                                                                                            "end_token": 293,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "detail",
                                                                                                    "start_token": 291,
                                                                                                    "end_token": 291,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"Request signatures didn't match!\"",
                                                                                                    "start_token": 293,
                                                                                                    "end_token": 293,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 293,
                                                                                                            "end_token": 293,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Request signatures didn't match!",
                                                                                                            "start_token": 293,
                                                                                                            "end_token": 293,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 293,
                                                                                                            "end_token": 293,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "payload = await request.json()",
                                                    "start_token": 298,
                                                    "end_token": 305,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "payload = await request.json()",
                                                            "start_token": 298,
                                                            "end_token": 305,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "payload",
                                                                    "start_token": 298,
                                                                    "end_token": 298,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await request.json()",
                                                                    "start_token": 300,
                                                                    "end_token": 305,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "request.json()",
                                                                            "start_token": 301,
                                                                            "end_token": 305,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "request.json",
                                                                                    "start_token": 301,
                                                                                    "end_token": 303,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "request",
                                                                                            "start_token": 301,
                                                                                            "end_token": 301,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "json",
                                                                                            "start_token": 303,
                                                                                            "end_token": 303,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 304,
                                                                                    "end_token": 305,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if action := payload.get(\"action\"):\n            event_type += f\".{action}\"",
                                                    "start_token": 307,
                                                    "end_token": 323,
                                                    "children": [
                                                        {
                                                            "type": "named_expression",
                                                            "label": "action := payload.get(\"action\")",
                                                            "start_token": 308,
                                                            "end_token": 316,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "action",
                                                                    "start_token": 308,
                                                                    "end_token": 308,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "payload.get(\"action\")",
                                                                    "start_token": 311,
                                                                    "end_token": 316,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "payload.get",
                                                                            "start_token": 311,
                                                                            "end_token": 313,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "payload",
                                                                                    "start_token": 311,
                                                                                    "end_token": 311,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get",
                                                                                    "start_token": 313,
                                                                                    "end_token": 313,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"action\")",
                                                                            "start_token": 314,
                                                                            "end_token": 316,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"action\"",
                                                                                    "start_token": 315,
                                                                                    "end_token": 315,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 315,
                                                                                            "end_token": 315,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "action",
                                                                                            "start_token": 315,
                                                                                            "end_token": 315,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 315,
                                                                                            "end_token": 315,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "event_type += f\".{action}\"",
                                                            "start_token": 319,
                                                            "end_token": 323,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "label": "event_type += f\".{action}\"",
                                                                    "start_token": 319,
                                                                    "end_token": 323,
                                                                    "children": [
                                                                        {
                                                                            "type": "augmented_assignment",
                                                                            "label": "event_type += f\".{action}\"",
                                                                            "start_token": 319,
                                                                            "end_token": 323,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "event_type",
                                                                                    "start_token": 319,
                                                                                    "end_token": 319,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\".{action}\"",
                                                                                    "start_token": 322,
                                                                                    "end_token": 323,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 322,
                                                                                            "end_token": 323,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": ".",
                                                                                            "start_token": 323,
                                                                                            "end_token": 323,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{action}",
                                                                                            "start_token": 323,
                                                                                            "end_token": 323,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "action",
                                                                                                    "start_token": 323,
                                                                                                    "end_token": 323,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 323,
                                                                                            "end_token": 323,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return payload, event_type",
                                                    "start_token": 326,
                                                    "end_token": 329,
                                                    "children": [
                                                        {
                                                            "type": "expression_list",
                                                            "label": "payload, event_type",
                                                            "start_token": 327,
                                                            "end_token": 329,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "payload",
                                                                    "start_token": 327,
                                                                    "end_token": 327,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "event_type",
                                                                    "start_token": 329,
                                                                    "end_token": 329,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "function_definition",
                            "label": "async def trigger_ping(\n        self, webhook: integrations.Webhook, credentials: Credentials | None\n    ) -> None:\n        if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        repo, github_hook_id = webhook.resource, webhook.provider_webhook_id\n        ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"\n\n        response = requests.post(ping_url, headers=headers)\n\n        if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                            "start_token": 332,
                            "end_token": 445,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "trigger_ping",
                                    "start_token": 334,
                                    "end_token": 334,
                                    "children": []
                                },
                                {
                                    "type": "parameters",
                                    "label": "(\n        self, webhook: integrations.Webhook, credentials: Credentials | None\n    )",
                                    "start_token": 335,
                                    "end_token": 351,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "self",
                                            "start_token": 337,
                                            "end_token": 337,
                                            "children": []
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "webhook: integrations.Webhook",
                                            "start_token": 339,
                                            "end_token": 343,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "webhook",
                                                    "start_token": 339,
                                                    "end_token": 339,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "integrations.Webhook",
                                                    "start_token": 341,
                                                    "end_token": 343,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "integrations.Webhook",
                                                            "start_token": 341,
                                                            "end_token": 343,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "integrations",
                                                                    "start_token": 341,
                                                                    "end_token": 341,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Webhook",
                                                                    "start_token": 343,
                                                                    "end_token": 343,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "credentials: Credentials | None",
                                            "start_token": 345,
                                            "end_token": 349,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "credentials",
                                                    "start_token": 345,
                                                    "end_token": 345,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "Credentials | None",
                                                    "start_token": 347,
                                                    "end_token": 349,
                                                    "children": [
                                                        {
                                                            "type": "binary_operator",
                                                            "label": "Credentials | None",
                                                            "start_token": 347,
                                                            "end_token": 349,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Credentials",
                                                                    "start_token": 347,
                                                                    "end_token": 347,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "label": "None",
                                                                    "start_token": 349,
                                                                    "end_token": 349,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "type",
                                    "label": "None",
                                    "start_token": 354,
                                    "end_token": 354,
                                    "children": [
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 354,
                                            "end_token": 354,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        repo, github_hook_id = webhook.resource, webhook.provider_webhook_id\n        ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"\n\n        response = requests.post(ping_url, headers=headers)\n\n        if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                    "start_token": 357,
                                    "end_token": 445,
                                    "children": [
                                        {
                                            "type": "if_statement",
                                            "label": "if not credentials:\n            raise ValueError(\"Credentials are required but were not passed\")",
                                            "start_token": 357,
                                            "end_token": 366,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not credentials",
                                                    "start_token": 358,
                                                    "end_token": 359,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "credentials",
                                                            "start_token": 359,
                                                            "end_token": 359,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise ValueError(\"Credentials are required but were not passed\")",
                                                    "start_token": 362,
                                                    "end_token": 366,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(\"Credentials are required but were not passed\")",
                                                            "start_token": 362,
                                                            "end_token": 366,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(\"Credentials are required but were not passed\")",
                                                                    "start_token": 363,
                                                                    "end_token": 366,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 363,
                                                                            "end_token": 363,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Credentials are required but were not passed\")",
                                                                            "start_token": 364,
                                                                            "end_token": 366,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Credentials are required but were not passed\"",
                                                                                    "start_token": 365,
                                                                                    "end_token": 365,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 365,
                                                                                            "end_token": 365,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Credentials are required but were not passed",
                                                                                            "start_token": 365,
                                                                                            "end_token": 365,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 365,
                                                                                            "end_token": 365,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                            "start_token": 369,
                                            "end_token": 389,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                    "start_token": 369,
                                                    "end_token": 389,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "headers",
                                                            "start_token": 369,
                                                            "end_token": 369,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                            "start_token": 371,
                                                            "end_token": 389,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary_splat",
                                                                    "label": "**self.GITHUB_API_DEFAULT_HEADERS",
                                                                    "start_token": 373,
                                                                    "end_token": 377,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "self.GITHUB_API_DEFAULT_HEADERS",
                                                                            "start_token": 375,
                                                                            "end_token": 377,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "self",
                                                                                    "start_token": 375,
                                                                                    "end_token": 375,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "GITHUB_API_DEFAULT_HEADERS",
                                                                                    "start_token": 377,
                                                                                    "end_token": 377,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"Authorization\": credentials.bearer()",
                                                                    "start_token": 380,
                                                                    "end_token": 386,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"Authorization\"",
                                                                            "start_token": 380,
                                                                            "end_token": 380,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 380,
                                                                                    "end_token": 380,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Authorization",
                                                                                    "start_token": 380,
                                                                                    "end_token": 380,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 380,
                                                                                    "end_token": 380,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "credentials.bearer()",
                                                                            "start_token": 382,
                                                                            "end_token": 386,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "credentials.bearer",
                                                                                    "start_token": 382,
                                                                                    "end_token": 384,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "credentials",
                                                                                            "start_token": 382,
                                                                                            "end_token": 382,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "bearer",
                                                                                            "start_token": 384,
                                                                                            "end_token": 384,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 385,
                                                                                    "end_token": 386,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "repo, github_hook_id = webhook.resource, webhook.provider_webhook_id",
                                            "start_token": 392,
                                            "end_token": 402,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "repo, github_hook_id = webhook.resource, webhook.provider_webhook_id",
                                                    "start_token": 392,
                                                    "end_token": 402,
                                                    "children": [
                                                        {
                                                            "type": "pattern_list",
                                                            "label": "repo, github_hook_id",
                                                            "start_token": 392,
                                                            "end_token": 394,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "repo",
                                                                    "start_token": 392,
                                                                    "end_token": 392,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "github_hook_id",
                                                                    "start_token": 394,
                                                                    "end_token": 394,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "expression_list",
                                                            "label": "webhook.resource, webhook.provider_webhook_id",
                                                            "start_token": 396,
                                                            "end_token": 402,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "webhook.resource",
                                                                    "start_token": 396,
                                                                    "end_token": 398,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "webhook",
                                                                            "start_token": 396,
                                                                            "end_token": 396,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "resource",
                                                                            "start_token": 398,
                                                                            "end_token": 398,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "webhook.provider_webhook_id",
                                                                    "start_token": 400,
                                                                    "end_token": 402,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "webhook",
                                                                            "start_token": 400,
                                                                            "end_token": 400,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "provider_webhook_id",
                                                                            "start_token": 402,
                                                                            "end_token": 402,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"",
                                            "start_token": 404,
                                            "end_token": 407,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "ping_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"",
                                                    "start_token": 404,
                                                    "end_token": 407,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "ping_url",
                                                            "start_token": 404,
                                                            "end_token": 404,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{github_hook_id}/pings\"",
                                                            "start_token": 406,
                                                            "end_token": 407,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "f\"",
                                                                    "start_token": 406,
                                                                    "end_token": 407,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "interpolation",
                                                                    "label": "{self.GITHUB_API_URL}",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "self.GITHUB_API_URL",
                                                                            "start_token": 407,
                                                                            "end_token": 407,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "self",
                                                                                    "start_token": 407,
                                                                                    "end_token": 407,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "GITHUB_API_URL",
                                                                                    "start_token": 407,
                                                                                    "end_token": 407,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "/repos/",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "interpolation",
                                                                    "label": "{repo}",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "repo",
                                                                            "start_token": 407,
                                                                            "end_token": 407,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "/hooks/",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "interpolation",
                                                                    "label": "{github_hook_id}",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "github_hook_id",
                                                                            "start_token": 407,
                                                                            "end_token": 407,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "/pings",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 407,
                                                                    "end_token": 407,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "response = requests.post(ping_url, headers=headers)",
                                            "start_token": 410,
                                            "end_token": 421,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "response = requests.post(ping_url, headers=headers)",
                                                    "start_token": 410,
                                                    "end_token": 421,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "response",
                                                            "start_token": 410,
                                                            "end_token": 410,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "requests.post(ping_url, headers=headers)",
                                                            "start_token": 412,
                                                            "end_token": 421,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "requests.post",
                                                                    "start_token": 412,
                                                                    "end_token": 414,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "requests",
                                                                            "start_token": 412,
                                                                            "end_token": 412,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "post",
                                                                            "start_token": 414,
                                                                            "end_token": 414,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(ping_url, headers=headers)",
                                                                    "start_token": 415,
                                                                    "end_token": 421,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ping_url",
                                                                            "start_token": 416,
                                                                            "end_token": 416,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "headers=headers",
                                                                            "start_token": 418,
                                                                            "end_token": 420,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 418,
                                                                                    "end_token": 418,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 420,
                                                                                    "end_token": 420,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if response.status_code != 204:\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                            "start_token": 424,
                                            "end_token": 445,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "response.status_code != 204",
                                                    "start_token": 425,
                                                    "end_token": 430,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "response.status_code",
                                                            "start_token": 425,
                                                            "end_token": 427,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "response",
                                                                    "start_token": 425,
                                                                    "end_token": 425,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "status_code",
                                                                    "start_token": 427,
                                                                    "end_token": 427,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "label": "204",
                                                            "start_token": 430,
                                                            "end_token": 430,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                                    "start_token": 433,
                                                    "end_token": 445,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "error_msg = extract_github_error_msg(response)",
                                                            "start_token": 433,
                                                            "end_token": 438,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "label": "error_msg = extract_github_error_msg(response)",
                                                                    "start_token": 433,
                                                                    "end_token": 438,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error_msg",
                                                                            "start_token": 433,
                                                                            "end_token": 433,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "extract_github_error_msg(response)",
                                                                            "start_token": 435,
                                                                            "end_token": 438,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "extract_github_error_msg",
                                                                                    "start_token": 435,
                                                                                    "end_token": 435,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(response)",
                                                                                    "start_token": 436,
                                                                                    "end_token": 438,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "response",
                                                                                            "start_token": 437,
                                                                                            "end_token": 437,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                                            "start_token": 440,
                                                            "end_token": 445,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                                                    "start_token": 441,
                                                                    "end_token": 445,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 441,
                                                                            "end_token": 441,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"Failed to ping GitHub webhook: {error_msg}\")",
                                                                            "start_token": 442,
                                                                            "end_token": 445,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"Failed to ping GitHub webhook: {error_msg}\"",
                                                                                    "start_token": 443,
                                                                                    "end_token": 444,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 443,
                                                                                            "end_token": 444,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Failed to ping GitHub webhook: ",
                                                                                            "start_token": 444,
                                                                                            "end_token": 444,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{error_msg}",
                                                                                            "start_token": 444,
                                                                                            "end_token": 444,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "error_msg",
                                                                                                    "start_token": 444,
                                                                                                    "end_token": 444,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 444,
                                                                                            "end_token": 444,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "function_definition",
                            "label": "async def _register_webhook(\n        self,\n        credentials: Credentials,\n        webhook_type: GithubWebhookType,\n        resource: str,\n        events: list[str],\n        ingress_url: str,\n        secret: str,\n    ) -> tuple[str, dict]:\n        if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")\n\n        # Extract main event, e.g. `pull_request.opened` -> `pull_request`\n        github_events = list({event.split(\".\")[0] for event in events})\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n        webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }\n\n        response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )\n\n        if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")\n\n        webhook_id = response.json()[\"id\"]\n        config = response.json()[\"config\"]\n\n        return str(webhook_id), config",
                            "start_token": 448,
                            "end_token": 741,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "_register_webhook",
                                    "start_token": 450,
                                    "end_token": 450,
                                    "children": []
                                },
                                {
                                    "type": "parameters",
                                    "label": "(\n        self,\n        credentials: Credentials,\n        webhook_type: GithubWebhookType,\n        resource: str,\n        events: list[str],\n        ingress_url: str,\n        secret: str,\n    )",
                                    "start_token": 451,
                                    "end_token": 489,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "self",
                                            "start_token": 453,
                                            "end_token": 453,
                                            "children": []
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "credentials: Credentials",
                                            "start_token": 456,
                                            "end_token": 458,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "credentials",
                                                    "start_token": 456,
                                                    "end_token": 456,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "Credentials",
                                                    "start_token": 458,
                                                    "end_token": 458,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Credentials",
                                                            "start_token": 458,
                                                            "end_token": 458,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "webhook_type: GithubWebhookType",
                                            "start_token": 461,
                                            "end_token": 463,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "webhook_type",
                                                    "start_token": 461,
                                                    "end_token": 461,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "GithubWebhookType",
                                                    "start_token": 463,
                                                    "end_token": 463,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "GithubWebhookType",
                                                            "start_token": 463,
                                                            "end_token": 463,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "resource: str",
                                            "start_token": 466,
                                            "end_token": 468,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "resource",
                                                    "start_token": 466,
                                                    "end_token": 466,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "str",
                                                    "start_token": 468,
                                                    "end_token": 468,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 468,
                                                            "end_token": 468,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "events: list[str]",
                                            "start_token": 471,
                                            "end_token": 476,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "events",
                                                    "start_token": 471,
                                                    "end_token": 471,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "list[str]",
                                                    "start_token": 473,
                                                    "end_token": 476,
                                                    "children": [
                                                        {
                                                            "type": "generic_type",
                                                            "label": "list[str]",
                                                            "start_token": 473,
                                                            "end_token": 476,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "list",
                                                                    "start_token": 473,
                                                                    "end_token": 473,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "type_parameter",
                                                                    "label": "[str]",
                                                                    "start_token": 474,
                                                                    "end_token": 476,
                                                                    "children": [
                                                                        {
                                                                            "type": "type",
                                                                            "label": "str",
                                                                            "start_token": 475,
                                                                            "end_token": 475,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "str",
                                                                                    "start_token": 475,
                                                                                    "end_token": 475,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "ingress_url: str",
                                            "start_token": 479,
                                            "end_token": 481,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "ingress_url",
                                                    "start_token": 479,
                                                    "end_token": 479,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "str",
                                                    "start_token": 481,
                                                    "end_token": 481,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 481,
                                                            "end_token": 481,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "secret: str",
                                            "start_token": 484,
                                            "end_token": 486,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "secret",
                                                    "start_token": 484,
                                                    "end_token": 484,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "str",
                                                    "start_token": 486,
                                                    "end_token": 486,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 486,
                                                            "end_token": 486,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "type",
                                    "label": "tuple[str, dict]",
                                    "start_token": 492,
                                    "end_token": 497,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "label": "tuple[str, dict]",
                                            "start_token": 492,
                                            "end_token": 497,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tuple",
                                                    "start_token": 492,
                                                    "end_token": 492,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "label": "[str, dict]",
                                                    "start_token": 493,
                                                    "end_token": 497,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "label": "str",
                                                            "start_token": 494,
                                                            "end_token": 494,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "str",
                                                                    "start_token": 494,
                                                                    "end_token": 494,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "dict",
                                                            "start_token": 496,
                                                            "end_token": 496,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "dict",
                                                                    "start_token": 496,
                                                                    "end_token": 496,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")\n\n        # Extract main event, e.g. `pull_request.opened` -> `pull_request`\n        github_events = list({event.split(\".\")[0] for event in events})\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n        webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }\n\n        response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )\n\n        if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")\n\n        webhook_id = response.json()[\"id\"]\n        config = response.json()[\"config\"]\n\n        return str(webhook_id), config",
                                    "start_token": 500,
                                    "end_token": 741,
                                    "children": [
                                        {
                                            "type": "if_statement",
                                            "label": "if webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1:\n            raise ValueError(\"Invalid repo format: expected 'owner/repo'\")",
                                            "start_token": 500,
                                            "end_token": 524,
                                            "children": [
                                                {
                                                    "type": "boolean_operator",
                                                    "label": "webhook_type == self.WebhookType.REPO and resource.count(\"/\") > 1",
                                                    "start_token": 501,
                                                    "end_token": 517,
                                                    "children": [
                                                        {
                                                            "type": "comparison_operator",
                                                            "label": "webhook_type == self.WebhookType.REPO",
                                                            "start_token": 501,
                                                            "end_token": 508,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "webhook_type",
                                                                    "start_token": 501,
                                                                    "end_token": 501,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "self.WebhookType.REPO",
                                                                    "start_token": 504,
                                                                    "end_token": 508,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "self.WebhookType",
                                                                            "start_token": 504,
                                                                            "end_token": 506,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "self",
                                                                                    "start_token": 504,
                                                                                    "end_token": 504,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "WebhookType",
                                                                                    "start_token": 506,
                                                                                    "end_token": 506,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "REPO",
                                                                            "start_token": 508,
                                                                            "end_token": 508,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "comparison_operator",
                                                            "label": "resource.count(\"/\") > 1",
                                                            "start_token": 510,
                                                            "end_token": 517,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "resource.count(\"/\")",
                                                                    "start_token": 510,
                                                                    "end_token": 515,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "resource.count",
                                                                            "start_token": 510,
                                                                            "end_token": 512,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "resource",
                                                                                    "start_token": 510,
                                                                                    "end_token": 510,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "count",
                                                                                    "start_token": 512,
                                                                                    "end_token": 512,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"/\")",
                                                                            "start_token": 513,
                                                                            "end_token": 515,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"/\"",
                                                                                    "start_token": 514,
                                                                                    "end_token": 514,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 514,
                                                                                            "end_token": 514,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "/",
                                                                                            "start_token": 514,
                                                                                            "end_token": 514,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 514,
                                                                                            "end_token": 514,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "label": "1",
                                                                    "start_token": 517,
                                                                    "end_token": 517,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise ValueError(\"Invalid repo format: expected 'owner/repo'\")",
                                                    "start_token": 520,
                                                    "end_token": 524,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(\"Invalid repo format: expected 'owner/repo'\")",
                                                            "start_token": 520,
                                                            "end_token": 524,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(\"Invalid repo format: expected 'owner/repo'\")",
                                                                    "start_token": 521,
                                                                    "end_token": 524,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 521,
                                                                            "end_token": 521,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Invalid repo format: expected 'owner/repo'\")",
                                                                            "start_token": 522,
                                                                            "end_token": 524,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Invalid repo format: expected 'owner/repo'\"",
                                                                                    "start_token": 523,
                                                                                    "end_token": 523,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 523,
                                                                                            "end_token": 523,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Invalid repo format: expected 'owner/repo'",
                                                                                            "start_token": 523,
                                                                                            "end_token": 523,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 523,
                                                                                            "end_token": 523,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "comment",
                                            "label": "# Extract main event, e.g. `pull_request.opened` -> `pull_request`",
                                            "start_token": 527,
                                            "end_token": 545,
                                            "children": []
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "github_events = list({event.split(\".\")[0] for event in events})",
                                            "start_token": 547,
                                            "end_token": 566,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "github_events = list({event.split(\".\")[0] for event in events})",
                                                    "start_token": 547,
                                                    "end_token": 566,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "github_events",
                                                            "start_token": 547,
                                                            "end_token": 547,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "list({event.split(\".\")[0] for event in events})",
                                                            "start_token": 549,
                                                            "end_token": 566,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "list",
                                                                    "start_token": 549,
                                                                    "end_token": 549,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "({event.split(\".\")[0] for event in events})",
                                                                    "start_token": 550,
                                                                    "end_token": 566,
                                                                    "children": [
                                                                        {
                                                                            "type": "set_comprehension",
                                                                            "label": "{event.split(\".\")[0] for event in events}",
                                                                            "start_token": 551,
                                                                            "end_token": 565,
                                                                            "children": [
                                                                                {
                                                                                    "type": "subscript",
                                                                                    "label": "event.split(\".\")[0]",
                                                                                    "start_token": 552,
                                                                                    "end_token": 560,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "event.split(\".\")",
                                                                                            "start_token": 552,
                                                                                            "end_token": 557,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "event.split",
                                                                                                    "start_token": 552,
                                                                                                    "end_token": 554,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "event",
                                                                                                            "start_token": 552,
                                                                                                            "end_token": 552,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "split",
                                                                                                            "start_token": 554,
                                                                                                            "end_token": 554,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(\".\")",
                                                                                                    "start_token": 555,
                                                                                                    "end_token": 557,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\".\"",
                                                                                                            "start_token": 556,
                                                                                                            "end_token": 556,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 556,
                                                                                                                    "end_token": 556,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": ".",
                                                                                                                    "start_token": 556,
                                                                                                                    "end_token": 556,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 556,
                                                                                                                    "end_token": 556,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "0",
                                                                                            "start_token": 559,
                                                                                            "end_token": 559,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "for_in_clause",
                                                                                    "label": "for event in events",
                                                                                    "start_token": 561,
                                                                                    "end_token": 564,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "event",
                                                                                            "start_token": 562,
                                                                                            "end_token": 562,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "events",
                                                                                            "start_token": 564,
                                                                                            "end_token": 564,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                            "start_token": 569,
                                            "end_token": 589,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                    "start_token": 569,
                                                    "end_token": 589,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "headers",
                                                            "start_token": 569,
                                                            "end_token": 569,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                            "start_token": 571,
                                                            "end_token": 589,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary_splat",
                                                                    "label": "**self.GITHUB_API_DEFAULT_HEADERS",
                                                                    "start_token": 573,
                                                                    "end_token": 577,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "self.GITHUB_API_DEFAULT_HEADERS",
                                                                            "start_token": 575,
                                                                            "end_token": 577,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "self",
                                                                                    "start_token": 575,
                                                                                    "end_token": 575,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "GITHUB_API_DEFAULT_HEADERS",
                                                                                    "start_token": 577,
                                                                                    "end_token": 577,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"Authorization\": credentials.bearer()",
                                                                    "start_token": 580,
                                                                    "end_token": 586,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"Authorization\"",
                                                                            "start_token": 580,
                                                                            "end_token": 580,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 580,
                                                                                    "end_token": 580,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Authorization",
                                                                                    "start_token": 580,
                                                                                    "end_token": 580,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 580,
                                                                                    "end_token": 580,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "credentials.bearer()",
                                                                            "start_token": 582,
                                                                            "end_token": 586,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "credentials.bearer",
                                                                                    "start_token": 582,
                                                                                    "end_token": 584,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "credentials",
                                                                                            "start_token": 582,
                                                                                            "end_token": 582,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "bearer",
                                                                                            "start_token": 584,
                                                                                            "end_token": 584,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 585,
                                                                                    "end_token": 586,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }",
                                            "start_token": 591,
                                            "end_token": 637,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "webhook_data = {\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }",
                                                    "start_token": 591,
                                                    "end_token": 637,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "webhook_data",
                                                            "start_token": 591,
                                                            "end_token": 591,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\n            \"name\": \"web\",\n            \"active\": True,\n            \"events\": github_events,\n            \"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            },\n        }",
                                                            "start_token": 593,
                                                            "end_token": 637,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"name\": \"web\"",
                                                                    "start_token": 595,
                                                                    "end_token": 597,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"name\"",
                                                                            "start_token": 595,
                                                                            "end_token": 595,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 595,
                                                                                    "end_token": 595,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "name",
                                                                                    "start_token": 595,
                                                                                    "end_token": 595,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 595,
                                                                                    "end_token": 595,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"web\"",
                                                                            "start_token": 597,
                                                                            "end_token": 597,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 597,
                                                                                    "end_token": 597,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "web",
                                                                                    "start_token": 597,
                                                                                    "end_token": 597,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 597,
                                                                                    "end_token": 597,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"active\": True",
                                                                    "start_token": 600,
                                                                    "end_token": 602,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"active\"",
                                                                            "start_token": 600,
                                                                            "end_token": 600,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 600,
                                                                                    "end_token": 600,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "active",
                                                                                    "start_token": 600,
                                                                                    "end_token": 600,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 600,
                                                                                    "end_token": 600,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "true",
                                                                            "label": "True",
                                                                            "start_token": 602,
                                                                            "end_token": 602,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"events\": github_events",
                                                                    "start_token": 605,
                                                                    "end_token": 607,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"events\"",
                                                                            "start_token": 605,
                                                                            "end_token": 605,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 605,
                                                                                    "end_token": 605,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "events",
                                                                                    "start_token": 605,
                                                                                    "end_token": 605,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 605,
                                                                                    "end_token": 605,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "github_events",
                                                                            "start_token": 607,
                                                                            "end_token": 607,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"config\": {\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            }",
                                                                    "start_token": 610,
                                                                    "end_token": 634,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"config\"",
                                                                            "start_token": 610,
                                                                            "end_token": 610,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 610,
                                                                                    "end_token": 610,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "config",
                                                                                    "start_token": 610,
                                                                                    "end_token": 610,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 610,
                                                                                    "end_token": 610,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "dictionary",
                                                                            "label": "{\n                \"url\": ingress_url,\n                \"content_type\": \"json\",\n                \"insecure_ssl\": \"0\",\n                \"secret\": secret,\n            }",
                                                                            "start_token": 612,
                                                                            "end_token": 634,
                                                                            "children": [
                                                                                {
                                                                                    "type": "pair",
                                                                                    "label": "\"url\": ingress_url",
                                                                                    "start_token": 614,
                                                                                    "end_token": 616,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"url\"",
                                                                                            "start_token": 614,
                                                                                            "end_token": 614,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 614,
                                                                                                    "end_token": 614,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "url",
                                                                                                    "start_token": 614,
                                                                                                    "end_token": 614,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 614,
                                                                                                    "end_token": 614,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "ingress_url",
                                                                                            "start_token": 616,
                                                                                            "end_token": 616,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "label": "\"content_type\": \"json\"",
                                                                                    "start_token": 619,
                                                                                    "end_token": 621,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"content_type\"",
                                                                                            "start_token": 619,
                                                                                            "end_token": 619,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 619,
                                                                                                    "end_token": 619,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "content_type",
                                                                                                    "start_token": 619,
                                                                                                    "end_token": 619,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 619,
                                                                                                    "end_token": 619,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"json\"",
                                                                                            "start_token": 621,
                                                                                            "end_token": 621,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 621,
                                                                                                    "end_token": 621,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "json",
                                                                                                    "start_token": 621,
                                                                                                    "end_token": 621,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 621,
                                                                                                    "end_token": 621,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "label": "\"insecure_ssl\": \"0\"",
                                                                                    "start_token": 624,
                                                                                    "end_token": 626,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"insecure_ssl\"",
                                                                                            "start_token": 624,
                                                                                            "end_token": 624,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 624,
                                                                                                    "end_token": 624,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "insecure_ssl",
                                                                                                    "start_token": 624,
                                                                                                    "end_token": 624,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 624,
                                                                                                    "end_token": 624,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"0\"",
                                                                                            "start_token": 626,
                                                                                            "end_token": 626,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 626,
                                                                                                    "end_token": 626,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "0",
                                                                                                    "start_token": 626,
                                                                                                    "end_token": 626,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 626,
                                                                                                    "end_token": 626,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "pair",
                                                                                    "label": "\"secret\": secret",
                                                                                    "start_token": 629,
                                                                                    "end_token": 631,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "\"secret\"",
                                                                                            "start_token": 629,
                                                                                            "end_token": 629,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 629,
                                                                                                    "end_token": 629,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "secret",
                                                                                                    "start_token": 629,
                                                                                                    "end_token": 629,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 629,
                                                                                                    "end_token": 629,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "secret",
                                                                                            "start_token": 631,
                                                                                            "end_token": 631,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )",
                                            "start_token": 640,
                                            "end_token": 661,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "response = requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )",
                                                    "start_token": 640,
                                                    "end_token": 661,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "response",
                                                            "start_token": 640,
                                                            "end_token": 640,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "requests.post(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )",
                                                            "start_token": 642,
                                                            "end_token": 661,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "requests.post",
                                                                    "start_token": 642,
                                                                    "end_token": 644,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "requests",
                                                                            "start_token": 642,
                                                                            "end_token": 642,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "post",
                                                                            "start_token": 644,
                                                                            "end_token": 644,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\",\n            headers=headers,\n            json=webhook_data,\n        )",
                                                                    "start_token": 645,
                                                                    "end_token": 661,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"{self.GITHUB_API_URL}/repos/{resource}/hooks\"",
                                                                            "start_token": 647,
                                                                            "end_token": 648,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 647,
                                                                                    "end_token": 648,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{self.GITHUB_API_URL}",
                                                                                    "start_token": 648,
                                                                                    "end_token": 648,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "self.GITHUB_API_URL",
                                                                                            "start_token": 648,
                                                                                            "end_token": 648,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "self",
                                                                                                    "start_token": 648,
                                                                                                    "end_token": 648,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "GITHUB_API_URL",
                                                                                                    "start_token": 648,
                                                                                                    "end_token": 648,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "/repos/",
                                                                                    "start_token": 648,
                                                                                    "end_token": 648,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{resource}",
                                                                                    "start_token": 648,
                                                                                    "end_token": 648,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "resource",
                                                                                            "start_token": 648,
                                                                                            "end_token": 648,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "/hooks",
                                                                                    "start_token": 648,
                                                                                    "end_token": 648,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 648,
                                                                                    "end_token": 648,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "headers=headers",
                                                                            "start_token": 651,
                                                                            "end_token": 653,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 651,
                                                                                    "end_token": 651,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 653,
                                                                                    "end_token": 653,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "json=webhook_data",
                                                                            "start_token": 656,
                                                                            "end_token": 658,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "json",
                                                                                    "start_token": 656,
                                                                                    "end_token": 656,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "webhook_data",
                                                                                    "start_token": 658,
                                                                                    "end_token": 658,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if response.status_code != 201:\n            error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")",
                                            "start_token": 664,
                                            "end_token": 709,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "response.status_code != 201",
                                                    "start_token": 665,
                                                    "end_token": 670,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "response.status_code",
                                                            "start_token": 665,
                                                            "end_token": 667,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "response",
                                                                    "start_token": 665,
                                                                    "end_token": 665,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "status_code",
                                                                    "start_token": 667,
                                                                    "end_token": 667,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "label": "201",
                                                            "start_token": 670,
                                                            "end_token": 670,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "error_msg = extract_github_error_msg(response)\n            if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )\n            raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")",
                                                    "start_token": 673,
                                                    "end_token": 709,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "error_msg = extract_github_error_msg(response)",
                                                            "start_token": 673,
                                                            "end_token": 678,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "label": "error_msg = extract_github_error_msg(response)",
                                                                    "start_token": 673,
                                                                    "end_token": 678,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error_msg",
                                                                            "start_token": 673,
                                                                            "end_token": 673,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "extract_github_error_msg(response)",
                                                                            "start_token": 675,
                                                                            "end_token": 678,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "extract_github_error_msg",
                                                                                    "start_token": 675,
                                                                                    "end_token": 675,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(response)",
                                                                                    "start_token": 676,
                                                                                    "end_token": 678,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "response",
                                                                                            "start_token": 677,
                                                                                            "end_token": 677,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "if_statement",
                                                            "label": "if \"not found\" in error_msg.lower():\n                error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )",
                                                            "start_token": 680,
                                                            "end_token": 702,
                                                            "children": [
                                                                {
                                                                    "type": "comparison_operator",
                                                                    "label": "\"not found\" in error_msg.lower()",
                                                                    "start_token": 681,
                                                                    "end_token": 687,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"not found\"",
                                                                            "start_token": 681,
                                                                            "end_token": 681,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 681,
                                                                                    "end_token": 681,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "not found",
                                                                                    "start_token": 681,
                                                                                    "end_token": 681,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 681,
                                                                                    "end_token": 681,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "error_msg.lower()",
                                                                            "start_token": 683,
                                                                            "end_token": 687,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "error_msg.lower",
                                                                                    "start_token": 683,
                                                                                    "end_token": 685,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "error_msg",
                                                                                            "start_token": 683,
                                                                                            "end_token": 683,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "lower",
                                                                                            "start_token": 685,
                                                                                            "end_token": 685,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 686,
                                                                                    "end_token": 687,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "label": "error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )",
                                                                    "start_token": 690,
                                                                    "end_token": 702,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "label": "error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )",
                                                                            "start_token": 690,
                                                                            "end_token": 702,
                                                                            "children": [
                                                                                {
                                                                                    "type": "assignment",
                                                                                    "label": "error_msg = (\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )",
                                                                                    "start_token": 690,
                                                                                    "end_token": 702,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "error_msg",
                                                                                            "start_token": 690,
                                                                                            "end_token": 690,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "parenthesized_expression",
                                                                                            "label": "(\n                    f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"\n                )",
                                                                                            "start_token": 692,
                                                                                            "end_token": 702,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "concatenated_string",
                                                                                                    "label": "f\"{error_msg} \"\n                    \"(Make sure the GitHub account or API key has 'repo' or \"\n                    f\"webhook create permissions to '{resource}')\"",
                                                                                                    "start_token": 694,
                                                                                                    "end_token": 700,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "f\"{error_msg} \"",
                                                                                                            "start_token": 694,
                                                                                                            "end_token": 695,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "f\"",
                                                                                                                    "start_token": 694,
                                                                                                                    "end_token": 695,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "interpolation",
                                                                                                                    "label": "{error_msg}",
                                                                                                                    "start_token": 695,
                                                                                                                    "end_token": 695,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "error_msg",
                                                                                                                            "start_token": 695,
                                                                                                                            "end_token": 695,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": " ",
                                                                                                                    "start_token": 695,
                                                                                                                    "end_token": 695,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 695,
                                                                                                                    "end_token": 695,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"(Make sure the GitHub account or API key has 'repo' or \"",
                                                                                                            "start_token": 697,
                                                                                                            "end_token": 697,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 697,
                                                                                                                    "end_token": 697,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "(Make sure the GitHub account or API key has 'repo' or ",
                                                                                                                    "start_token": 697,
                                                                                                                    "end_token": 697,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 697,
                                                                                                                    "end_token": 697,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "f\"webhook create permissions to '{resource}')\"",
                                                                                                            "start_token": 699,
                                                                                                            "end_token": 700,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "f\"",
                                                                                                                    "start_token": 699,
                                                                                                                    "end_token": 700,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "webhook create permissions to '",
                                                                                                                    "start_token": 700,
                                                                                                                    "end_token": 700,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "interpolation",
                                                                                                                    "label": "{resource}",
                                                                                                                    "start_token": 700,
                                                                                                                    "end_token": 700,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "resource",
                                                                                                                            "start_token": 700,
                                                                                                                            "end_token": 700,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "')",
                                                                                                                    "start_token": 700,
                                                                                                                    "end_token": 700,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 700,
                                                                                                                    "end_token": 700,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(f\"Failed to create GitHub webhook: {error_msg}\")",
                                                            "start_token": 704,
                                                            "end_token": 709,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(f\"Failed to create GitHub webhook: {error_msg}\")",
                                                                    "start_token": 705,
                                                                    "end_token": 709,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 705,
                                                                            "end_token": 705,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"Failed to create GitHub webhook: {error_msg}\")",
                                                                            "start_token": 706,
                                                                            "end_token": 709,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"Failed to create GitHub webhook: {error_msg}\"",
                                                                                    "start_token": 707,
                                                                                    "end_token": 708,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 707,
                                                                                            "end_token": 708,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Failed to create GitHub webhook: ",
                                                                                            "start_token": 708,
                                                                                            "end_token": 708,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{error_msg}",
                                                                                            "start_token": 708,
                                                                                            "end_token": 708,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "error_msg",
                                                                                                    "start_token": 708,
                                                                                                    "end_token": 708,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 708,
                                                                                            "end_token": 708,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "webhook_id = response.json()[\"id\"]",
                                            "start_token": 712,
                                            "end_token": 721,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "webhook_id = response.json()[\"id\"]",
                                                    "start_token": 712,
                                                    "end_token": 721,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "webhook_id",
                                                            "start_token": 712,
                                                            "end_token": 712,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "subscript",
                                                            "label": "response.json()[\"id\"]",
                                                            "start_token": 714,
                                                            "end_token": 721,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "response.json()",
                                                                    "start_token": 714,
                                                                    "end_token": 718,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "response.json",
                                                                            "start_token": 714,
                                                                            "end_token": 716,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "response",
                                                                                    "start_token": 714,
                                                                                    "end_token": 714,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "json",
                                                                                    "start_token": 716,
                                                                                    "end_token": 716,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 717,
                                                                            "end_token": 718,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "label": "\"id\"",
                                                                    "start_token": 720,
                                                                    "end_token": 720,
                                                                    "children": [
                                                                        {
                                                                            "type": "string_start",
                                                                            "label": "\"",
                                                                            "start_token": 720,
                                                                            "end_token": 720,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": "id",
                                                                            "start_token": 720,
                                                                            "end_token": 720,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_end",
                                                                            "label": "\"",
                                                                            "start_token": 720,
                                                                            "end_token": 720,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "config = response.json()[\"config\"]",
                                            "start_token": 723,
                                            "end_token": 732,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "config = response.json()[\"config\"]",
                                                    "start_token": 723,
                                                    "end_token": 732,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "config",
                                                            "start_token": 723,
                                                            "end_token": 723,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "subscript",
                                                            "label": "response.json()[\"config\"]",
                                                            "start_token": 725,
                                                            "end_token": 732,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "response.json()",
                                                                    "start_token": 725,
                                                                    "end_token": 729,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "response.json",
                                                                            "start_token": 725,
                                                                            "end_token": 727,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "response",
                                                                                    "start_token": 725,
                                                                                    "end_token": 725,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "json",
                                                                                    "start_token": 727,
                                                                                    "end_token": 727,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 728,
                                                                            "end_token": 729,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "label": "\"config\"",
                                                                    "start_token": 731,
                                                                    "end_token": 731,
                                                                    "children": [
                                                                        {
                                                                            "type": "string_start",
                                                                            "label": "\"",
                                                                            "start_token": 731,
                                                                            "end_token": 731,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": "config",
                                                                            "start_token": 731,
                                                                            "end_token": 731,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_end",
                                                                            "label": "\"",
                                                                            "start_token": 731,
                                                                            "end_token": 731,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return str(webhook_id), config",
                                            "start_token": 735,
                                            "end_token": 741,
                                            "children": [
                                                {
                                                    "type": "expression_list",
                                                    "label": "str(webhook_id), config",
                                                    "start_token": 736,
                                                    "end_token": 741,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "str(webhook_id)",
                                                            "start_token": 736,
                                                            "end_token": 739,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "str",
                                                                    "start_token": 736,
                                                                    "end_token": 736,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(webhook_id)",
                                                                    "start_token": 737,
                                                                    "end_token": 739,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "webhook_id",
                                                                            "start_token": 738,
                                                                            "end_token": 738,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "config",
                                                            "start_token": 741,
                                                            "end_token": 741,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "function_definition",
                            "label": "async def _deregister_webhook(\n        self, webhook: integrations.Webhook, credentials: Credentials\n    ) -> None:\n        webhook_type = self.WebhookType(webhook.webhook_type)\n        if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )\n\n        response = requests.delete(delete_url, headers=headers)\n\n        if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")\n\n        # If we reach here, the webhook was successfully deleted or didn't exist",
                            "start_token": 744,
                            "end_token": 928,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "_deregister_webhook",
                                    "start_token": 746,
                                    "end_token": 746,
                                    "children": []
                                },
                                {
                                    "type": "parameters",
                                    "label": "(\n        self, webhook: integrations.Webhook, credentials: Credentials\n    )",
                                    "start_token": 747,
                                    "end_token": 761,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "self",
                                            "start_token": 749,
                                            "end_token": 749,
                                            "children": []
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "webhook: integrations.Webhook",
                                            "start_token": 751,
                                            "end_token": 755,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "webhook",
                                                    "start_token": 751,
                                                    "end_token": 751,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "integrations.Webhook",
                                                    "start_token": 753,
                                                    "end_token": 755,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "integrations.Webhook",
                                                            "start_token": 753,
                                                            "end_token": 755,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "integrations",
                                                                    "start_token": 753,
                                                                    "end_token": 753,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Webhook",
                                                                    "start_token": 755,
                                                                    "end_token": 755,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "typed_parameter",
                                            "label": "credentials: Credentials",
                                            "start_token": 757,
                                            "end_token": 759,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "credentials",
                                                    "start_token": 757,
                                                    "end_token": 757,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type",
                                                    "label": "Credentials",
                                                    "start_token": 759,
                                                    "end_token": 759,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Credentials",
                                                            "start_token": 759,
                                                            "end_token": 759,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "type",
                                    "label": "None",
                                    "start_token": 764,
                                    "end_token": 764,
                                    "children": [
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 764,
                                            "end_token": 764,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "webhook_type = self.WebhookType(webhook.webhook_type)\n        if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )\n\n        headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }\n\n        if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )\n\n        response = requests.delete(delete_url, headers=headers)\n\n        if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")\n\n        # If we reach here, the webhook was successfully deleted or didn't exist",
                                    "start_token": 767,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "webhook_type = self.WebhookType(webhook.webhook_type)",
                                            "start_token": 767,
                                            "end_token": 776,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "webhook_type = self.WebhookType(webhook.webhook_type)",
                                                    "start_token": 767,
                                                    "end_token": 776,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "webhook_type",
                                                            "start_token": 767,
                                                            "end_token": 767,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "self.WebhookType(webhook.webhook_type)",
                                                            "start_token": 769,
                                                            "end_token": 776,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "self.WebhookType",
                                                                    "start_token": 769,
                                                                    "end_token": 771,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "self",
                                                                            "start_token": 769,
                                                                            "end_token": 769,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "WebhookType",
                                                                            "start_token": 771,
                                                                            "end_token": 771,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(webhook.webhook_type)",
                                                                    "start_token": 772,
                                                                    "end_token": 776,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "webhook.webhook_type",
                                                                            "start_token": 773,
                                                                            "end_token": 775,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "webhook",
                                                                                    "start_token": 773,
                                                                                    "end_token": 773,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "webhook_type",
                                                                                    "start_token": 775,
                                                                                    "end_token": 775,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if webhook.credentials_id != credentials.id:\n            raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )",
                                            "start_token": 778,
                                            "end_token": 796,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "webhook.credentials_id != credentials.id",
                                                    "start_token": 779,
                                                    "end_token": 786,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "webhook.credentials_id",
                                                            "start_token": 779,
                                                            "end_token": 781,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "webhook",
                                                                    "start_token": 779,
                                                                    "end_token": 779,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "credentials_id",
                                                                    "start_token": 781,
                                                                    "end_token": 781,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "label": "credentials.id",
                                                            "start_token": 784,
                                                            "end_token": 786,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "credentials",
                                                                    "start_token": 784,
                                                                    "end_token": 784,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "id",
                                                                    "start_token": 786,
                                                                    "end_token": 786,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )",
                                                    "start_token": 789,
                                                    "end_token": 796,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )",
                                                            "start_token": 789,
                                                            "end_token": 796,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )",
                                                                    "start_token": 790,
                                                                    "end_token": 796,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 790,
                                                                            "end_token": 790,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n                f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"\n            )",
                                                                            "start_token": 791,
                                                                            "end_token": 796,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"Webhook #{webhook.id} does not belong to credentials {credentials.id}\"",
                                                                                    "start_token": 793,
                                                                                    "end_token": 794,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 793,
                                                                                            "end_token": 794,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Webhook #",
                                                                                            "start_token": 794,
                                                                                            "end_token": 794,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{webhook.id}",
                                                                                            "start_token": 794,
                                                                                            "end_token": 794,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "webhook.id",
                                                                                                    "start_token": 794,
                                                                                                    "end_token": 794,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "webhook",
                                                                                                            "start_token": 794,
                                                                                                            "end_token": 794,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "id",
                                                                                                            "start_token": 794,
                                                                                                            "end_token": 794,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": " does not belong to credentials ",
                                                                                            "start_token": 794,
                                                                                            "end_token": 794,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{credentials.id}",
                                                                                            "start_token": 794,
                                                                                            "end_token": 794,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "credentials.id",
                                                                                                    "start_token": 794,
                                                                                                    "end_token": 794,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "credentials",
                                                                                                            "start_token": 794,
                                                                                                            "end_token": 794,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "id",
                                                                                                            "start_token": 794,
                                                                                                            "end_token": 794,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 794,
                                                                                            "end_token": 794,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                            "start_token": 799,
                                            "end_token": 819,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "headers = {\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                    "start_token": 799,
                                                    "end_token": 819,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "headers",
                                                            "start_token": 799,
                                                            "end_token": 799,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\n            **self.GITHUB_API_DEFAULT_HEADERS,\n            \"Authorization\": credentials.bearer(),\n        }",
                                                            "start_token": 801,
                                                            "end_token": 819,
                                                            "children": [
                                                                {
                                                                    "type": "dictionary_splat",
                                                                    "label": "**self.GITHUB_API_DEFAULT_HEADERS",
                                                                    "start_token": 803,
                                                                    "end_token": 807,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "self.GITHUB_API_DEFAULT_HEADERS",
                                                                            "start_token": 805,
                                                                            "end_token": 807,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "self",
                                                                                    "start_token": 805,
                                                                                    "end_token": 805,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "GITHUB_API_DEFAULT_HEADERS",
                                                                                    "start_token": 807,
                                                                                    "end_token": 807,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"Authorization\": credentials.bearer()",
                                                                    "start_token": 810,
                                                                    "end_token": 816,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"Authorization\"",
                                                                            "start_token": 810,
                                                                            "end_token": 810,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 810,
                                                                                    "end_token": 810,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Authorization",
                                                                                    "start_token": 810,
                                                                                    "end_token": 810,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 810,
                                                                                    "end_token": 810,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "credentials.bearer()",
                                                                            "start_token": 812,
                                                                            "end_token": 816,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "credentials.bearer",
                                                                                    "start_token": 812,
                                                                                    "end_token": 814,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "credentials",
                                                                                            "start_token": 812,
                                                                                            "end_token": 812,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "bearer",
                                                                                            "start_token": 814,
                                                                                            "end_token": 814,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "()",
                                                                                    "start_token": 815,
                                                                                    "end_token": 816,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if webhook_type == self.WebhookType.REPO:\n            repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa\n        else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                            "start_token": 822,
                                            "end_token": 856,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "webhook_type == self.WebhookType.REPO",
                                                    "start_token": 823,
                                                    "end_token": 830,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "webhook_type",
                                                            "start_token": 823,
                                                            "end_token": 823,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "label": "self.WebhookType.REPO",
                                                            "start_token": 826,
                                                            "end_token": 830,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "self.WebhookType",
                                                                    "start_token": 826,
                                                                    "end_token": 828,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "self",
                                                                            "start_token": 826,
                                                                            "end_token": 826,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "WebhookType",
                                                                            "start_token": 828,
                                                                            "end_token": 828,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "REPO",
                                                                    "start_token": 830,
                                                                    "end_token": 830,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "repo = webhook.resource\n            delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"  # noqa",
                                                    "start_token": 833,
                                                    "end_token": 844,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "repo = webhook.resource",
                                                            "start_token": 833,
                                                            "end_token": 837,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "label": "repo = webhook.resource",
                                                                    "start_token": 833,
                                                                    "end_token": 837,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "repo",
                                                                            "start_token": 833,
                                                                            "end_token": 833,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "webhook.resource",
                                                                            "start_token": 835,
                                                                            "end_token": 837,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "webhook",
                                                                                    "start_token": 835,
                                                                                    "end_token": 835,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "resource",
                                                                                    "start_token": 837,
                                                                                    "end_token": 837,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"",
                                                            "start_token": 839,
                                                            "end_token": 842,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "label": "delete_url = f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"",
                                                                    "start_token": 839,
                                                                    "end_token": 842,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "delete_url",
                                                                            "start_token": 839,
                                                                            "end_token": 839,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"{self.GITHUB_API_URL}/repos/{repo}/hooks/{webhook.provider_webhook_id}\"",
                                                                            "start_token": 841,
                                                                            "end_token": 842,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 841,
                                                                                    "end_token": 842,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{self.GITHUB_API_URL}",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "self.GITHUB_API_URL",
                                                                                            "start_token": 842,
                                                                                            "end_token": 842,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "self",
                                                                                                    "start_token": 842,
                                                                                                    "end_token": 842,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "GITHUB_API_URL",
                                                                                                    "start_token": 842,
                                                                                                    "end_token": 842,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "/repos/",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{repo}",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "repo",
                                                                                            "start_token": 842,
                                                                                            "end_token": 842,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "/hooks/",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{webhook.provider_webhook_id}",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "webhook.provider_webhook_id",
                                                                                            "start_token": 842,
                                                                                            "end_token": 842,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "webhook",
                                                                                                    "start_token": 842,
                                                                                                    "end_token": 842,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "provider_webhook_id",
                                                                                                    "start_token": 842,
                                                                                                    "end_token": 842,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 842,
                                                                                    "end_token": 842,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "comment",
                                                            "label": "# noqa",
                                                            "start_token": 843,
                                                            "end_token": 844,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "else_clause",
                                                    "label": "else:\n            raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                                    "start_token": 846,
                                                    "end_token": 856,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "label": "raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                                            "start_token": 849,
                                                            "end_token": 856,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                                                    "start_token": 849,
                                                                    "end_token": 856,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "NotImplementedError(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                                                            "start_token": 850,
                                                                            "end_token": 856,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "NotImplementedError",
                                                                                    "start_token": 850,
                                                                                    "end_token": 850,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                f\"Unsupported webhook type '{webhook.webhook_type}'\"\n            )",
                                                                                    "start_token": 851,
                                                                                    "end_token": 856,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "f\"Unsupported webhook type '{webhook.webhook_type}'\"",
                                                                                            "start_token": 853,
                                                                                            "end_token": 854,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "f\"",
                                                                                                    "start_token": 853,
                                                                                                    "end_token": 854,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "Unsupported webhook type '",
                                                                                                    "start_token": 854,
                                                                                                    "end_token": 854,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "interpolation",
                                                                                                    "label": "{webhook.webhook_type}",
                                                                                                    "start_token": 854,
                                                                                                    "end_token": 854,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "webhook.webhook_type",
                                                                                                            "start_token": 854,
                                                                                                            "end_token": 854,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "webhook",
                                                                                                                    "start_token": 854,
                                                                                                                    "end_token": 854,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "webhook_type",
                                                                                                                    "start_token": 854,
                                                                                                                    "end_token": 854,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "'",
                                                                                                    "start_token": 854,
                                                                                                    "end_token": 854,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 854,
                                                                                                    "end_token": 854,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "response = requests.delete(delete_url, headers=headers)",
                                            "start_token": 859,
                                            "end_token": 870,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "response = requests.delete(delete_url, headers=headers)",
                                                    "start_token": 859,
                                                    "end_token": 870,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "response",
                                                            "start_token": 859,
                                                            "end_token": 859,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "requests.delete(delete_url, headers=headers)",
                                                            "start_token": 861,
                                                            "end_token": 870,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "requests.delete",
                                                                    "start_token": 861,
                                                                    "end_token": 863,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "requests",
                                                                            "start_token": 861,
                                                                            "end_token": 861,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "delete",
                                                                            "start_token": 863,
                                                                            "end_token": 863,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(delete_url, headers=headers)",
                                                                    "start_token": 864,
                                                                    "end_token": 870,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "delete_url",
                                                                            "start_token": 865,
                                                                            "end_token": 865,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "headers=headers",
                                                                            "start_token": 867,
                                                                            "end_token": 869,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 867,
                                                                                    "end_token": 867,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "headers",
                                                                                    "start_token": 869,
                                                                                    "end_token": 869,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if response.status_code not in [204, 404]:\n            # 204 means successful deletion, 404 means the webhook was already deleted\n            error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")",
                                            "start_token": 873,
                                            "end_token": 912,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "response.status_code not in [204, 404]",
                                                    "start_token": 874,
                                                    "end_token": 883,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "response.status_code",
                                                            "start_token": 874,
                                                            "end_token": 876,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "response",
                                                                    "start_token": 874,
                                                                    "end_token": 874,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "status_code",
                                                                    "start_token": 876,
                                                                    "end_token": 876,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "list",
                                                            "label": "[204, 404]",
                                                            "start_token": 879,
                                                            "end_token": 883,
                                                            "children": [
                                                                {
                                                                    "type": "integer",
                                                                    "label": "204",
                                                                    "start_token": 880,
                                                                    "end_token": 880,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "label": "404",
                                                                    "start_token": 882,
                                                                    "end_token": 882,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# 204 means successful deletion, 404 means the webhook was already deleted",
                                                    "start_token": 886,
                                                    "end_token": 898,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "error_msg = extract_github_error_msg(response)\n            raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")",
                                                    "start_token": 900,
                                                    "end_token": 912,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "error_msg = extract_github_error_msg(response)",
                                                            "start_token": 900,
                                                            "end_token": 905,
                                                            "children": [
                                                                {
                                                                    "type": "assignment",
                                                                    "label": "error_msg = extract_github_error_msg(response)",
                                                                    "start_token": 900,
                                                                    "end_token": 905,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error_msg",
                                                                            "start_token": 900,
                                                                            "end_token": 900,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "call",
                                                                            "label": "extract_github_error_msg(response)",
                                                                            "start_token": 902,
                                                                            "end_token": 905,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "extract_github_error_msg",
                                                                                    "start_token": 902,
                                                                                    "end_token": 902,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(response)",
                                                                                    "start_token": 903,
                                                                                    "end_token": 905,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "response",
                                                                                            "start_token": 904,
                                                                                            "end_token": 904,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")",
                                                            "start_token": 907,
                                                            "end_token": 912,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "ValueError(f\"Failed to delete GitHub webhook: {error_msg}\")",
                                                                    "start_token": 908,
                                                                    "end_token": 912,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "ValueError",
                                                                            "start_token": 908,
                                                                            "end_token": 908,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"Failed to delete GitHub webhook: {error_msg}\")",
                                                                            "start_token": 909,
                                                                            "end_token": 912,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"Failed to delete GitHub webhook: {error_msg}\"",
                                                                                    "start_token": 910,
                                                                                    "end_token": 911,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 910,
                                                                                            "end_token": 911,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Failed to delete GitHub webhook: ",
                                                                                            "start_token": 911,
                                                                                            "end_token": 911,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{error_msg}",
                                                                                            "start_token": 911,
                                                                                            "end_token": 911,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "error_msg",
                                                                                                    "start_token": 911,
                                                                                                    "end_token": 911,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 911,
                                                                                            "end_token": 911,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "comment",
                                            "label": "# If we reach here, the webhook was successfully deleted or didn't exist",
                                            "start_token": 915,
                                            "end_token": 928,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "# --8<-- [end:GithubWebhooksManager]",
            "start_token": 928,
            "end_token": 928,
            "children": []
        },
        {
            "type": "function_definition",
            "label": "def extract_github_error_msg(response: requests.Response) -> str:\n    error_msgs = []\n    resp = response.json()\n    if resp.get(\"message\"):\n        error_msgs.append(resp[\"message\"])\n    if resp.get(\"errors\"):\n        error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])\n    if resp.get(\"error\"):\n        if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])\n    return \"\\n\".join(error_msgs)",
            "start_token": 928,
            "end_token": 956,
            "children": [
                {
                    "type": "identifier",
                    "label": "extract_github_error_msg",
                    "start_token": 928,
                    "end_token": 928,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(response: requests.Response)",
                    "start_token": 928,
                    "end_token": 928,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "response: requests.Response",
                            "start_token": 928,
                            "end_token": 928,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "response",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "requests.Response",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "requests.Response",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "requests",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "Response",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "str",
                    "start_token": 928,
                    "end_token": 928,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "str",
                            "start_token": 928,
                            "end_token": 928,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "error_msgs = []\n    resp = response.json()\n    if resp.get(\"message\"):\n        error_msgs.append(resp[\"message\"])\n    if resp.get(\"errors\"):\n        error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])\n    if resp.get(\"error\"):\n        if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])\n    return \"\\n\".join(error_msgs)",
                    "start_token": 928,
                    "end_token": 956,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "error_msgs = []",
                            "start_token": 928,
                            "end_token": 928,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "error_msgs = []",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "error_msgs",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": []
                                        },
                                        {
                                            "type": "list",
                                            "label": "[]",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "resp = response.json()",
                            "start_token": 928,
                            "end_token": 928,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "resp = response.json()",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "resp",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": []
                                        },
                                        {
                                            "type": "call",
                                            "label": "response.json()",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "response.json",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "response",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "json",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "label": "()",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "if_statement",
                            "label": "if resp.get(\"message\"):\n        error_msgs.append(resp[\"message\"])",
                            "start_token": 928,
                            "end_token": 928,
                            "children": [
                                {
                                    "type": "call",
                                    "label": "resp.get(\"message\")",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "resp.get",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "resp",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "get",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "label": "(\"message\")",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "label": "\"message\"",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": [
                                                        {
                                                            "type": "string_start",
                                                            "label": "\"",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_content",
                                                            "label": "message",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_end",
                                                            "label": "\"",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "error_msgs.append(resp[\"message\"])",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "error_msgs.append(resp[\"message\"])",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "label": "error_msgs.append(resp[\"message\"])",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "error_msgs.append",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "error_msgs",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "append",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "label": "(resp[\"message\"])",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "label": "resp[\"message\"]",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "resp",
                                                                            "start_token": 928,
                                                                            "end_token": 928,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"message\"",
                                                                            "start_token": 928,
                                                                            "end_token": 928,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 928,
                                                                                    "end_token": 928,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "message",
                                                                                    "start_token": 928,
                                                                                    "end_token": 928,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 928,
                                                                                    "end_token": 928,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "if_statement",
                            "label": "if resp.get(\"errors\"):\n        error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])",
                            "start_token": 928,
                            "end_token": 937,
                            "children": [
                                {
                                    "type": "call",
                                    "label": "resp.get(\"errors\")",
                                    "start_token": 928,
                                    "end_token": 928,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "resp.get",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "resp",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "get",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "label": "(\"errors\")",
                                            "start_token": 928,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "label": "\"errors\"",
                                                    "start_token": 928,
                                                    "end_token": 928,
                                                    "children": [
                                                        {
                                                            "type": "string_start",
                                                            "label": "\"",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_content",
                                                            "label": "errors",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_end",
                                                            "label": "\"",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])",
                                    "start_token": 928,
                                    "end_token": 937,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])",
                                            "start_token": 928,
                                            "end_token": 937,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "label": "error_msgs.extend(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])",
                                                    "start_token": 928,
                                                    "end_token": 937,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "error_msgs.extend",
                                                            "start_token": 928,
                                                            "end_token": 928,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "error_msgs",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "extend",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "generator_expression",
                                                            "label": "(f\"* {err.get('message', err)}\" for err in resp[\"errors\"])",
                                                            "start_token": 928,
                                                            "end_token": 937,
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "label": "f\"* {err.get('message', err)}\"",
                                                                    "start_token": 928,
                                                                    "end_token": 935,
                                                                    "children": [
                                                                        {
                                                                            "type": "string_start",
                                                                            "label": "f\"",
                                                                            "start_token": 928,
                                                                            "end_token": 928,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": "* ",
                                                                            "start_token": 928,
                                                                            "end_token": 928,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "interpolation",
                                                                            "label": "{err.get('message', err)}",
                                                                            "start_token": 928,
                                                                            "end_token": 934,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "err.get('message', err)",
                                                                                    "start_token": 928,
                                                                                    "end_token": 933,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "err.get",
                                                                                            "start_token": 928,
                                                                                            "end_token": 928,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "err",
                                                                                                    "start_token": 928,
                                                                                                    "end_token": 928,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "get",
                                                                                                    "start_token": 928,
                                                                                                    "end_token": 928,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "('message', err)",
                                                                                            "start_token": 928,
                                                                                            "end_token": 933,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "'message'",
                                                                                                    "start_token": 928,
                                                                                                    "end_token": 930,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "'",
                                                                                                            "start_token": 928,
                                                                                                            "end_token": 928,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "message",
                                                                                                            "start_token": 929,
                                                                                                            "end_token": 929,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "'",
                                                                                                            "start_token": 930,
                                                                                                            "end_token": 930,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "err",
                                                                                                    "start_token": 932,
                                                                                                    "end_token": 932,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "string_end",
                                                                            "label": "\"",
                                                                            "start_token": 935,
                                                                            "end_token": 935,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "for_in_clause",
                                                                    "label": "for err in resp[\"errors\"]",
                                                                    "start_token": 935,
                                                                    "end_token": 937,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "err",
                                                                            "start_token": 935,
                                                                            "end_token": 935,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "subscript",
                                                                            "label": "resp[\"errors\"]",
                                                                            "start_token": 935,
                                                                            "end_token": 937,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "resp",
                                                                                    "start_token": 935,
                                                                                    "end_token": 935,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"errors\"",
                                                                                    "start_token": 935,
                                                                                    "end_token": 937,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 935,
                                                                                            "end_token": 935,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "errors",
                                                                                            "start_token": 936,
                                                                                            "end_token": 936,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 937,
                                                                                            "end_token": 937,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "if_statement",
                            "label": "if resp.get(\"error\"):\n        if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])",
                            "start_token": 937,
                            "end_token": 949,
                            "children": [
                                {
                                    "type": "call",
                                    "label": "resp.get(\"error\")",
                                    "start_token": 937,
                                    "end_token": 939,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "resp.get",
                                            "start_token": 937,
                                            "end_token": 937,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "resp",
                                                    "start_token": 937,
                                                    "end_token": 937,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "get",
                                                    "start_token": 937,
                                                    "end_token": 937,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "label": "(\"error\")",
                                            "start_token": 937,
                                            "end_token": 939,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "label": "\"error\"",
                                                    "start_token": 937,
                                                    "end_token": 939,
                                                    "children": [
                                                        {
                                                            "type": "string_start",
                                                            "label": "\"",
                                                            "start_token": 937,
                                                            "end_token": 937,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_content",
                                                            "label": "error",
                                                            "start_token": 938,
                                                            "end_token": 938,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_end",
                                                            "label": "\"",
                                                            "start_token": 939,
                                                            "end_token": 939,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "block",
                                    "label": "if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])",
                                    "start_token": 939,
                                    "end_token": 949,
                                    "children": [
                                        {
                                            "type": "if_statement",
                                            "label": "if isinstance(resp[\"error\"], dict):\n            error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))\n        else:\n            error_msgs.append(resp[\"error\"])",
                                            "start_token": 939,
                                            "end_token": 949,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "label": "isinstance(resp[\"error\"], dict)",
                                                    "start_token": 939,
                                                    "end_token": 941,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "isinstance",
                                                            "start_token": 939,
                                                            "end_token": 939,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "label": "(resp[\"error\"], dict)",
                                                            "start_token": 939,
                                                            "end_token": 941,
                                                            "children": [
                                                                {
                                                                    "type": "subscript",
                                                                    "label": "resp[\"error\"]",
                                                                    "start_token": 939,
                                                                    "end_token": 941,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "resp",
                                                                            "start_token": 939,
                                                                            "end_token": 939,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"error\"",
                                                                            "start_token": 939,
                                                                            "end_token": 941,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 939,
                                                                                    "end_token": 939,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "error",
                                                                                    "start_token": 940,
                                                                                    "end_token": 940,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 941,
                                                                                    "end_token": 941,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "dict",
                                                                    "start_token": 941,
                                                                    "end_token": 941,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))",
                                                    "start_token": 941,
                                                    "end_token": 947,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))",
                                                            "start_token": 941,
                                                            "end_token": 947,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "error_msgs.append(resp[\"error\"].get(\"message\", resp[\"error\"]))",
                                                                    "start_token": 941,
                                                                    "end_token": 947,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "error_msgs.append",
                                                                            "start_token": 941,
                                                                            "end_token": 941,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "error_msgs",
                                                                                    "start_token": 941,
                                                                                    "end_token": 941,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "append",
                                                                                    "start_token": 941,
                                                                                    "end_token": 941,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(resp[\"error\"].get(\"message\", resp[\"error\"]))",
                                                                            "start_token": 941,
                                                                            "end_token": 947,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "resp[\"error\"].get(\"message\", resp[\"error\"])",
                                                                                    "start_token": 941,
                                                                                    "end_token": 947,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "resp[\"error\"].get",
                                                                                            "start_token": 941,
                                                                                            "end_token": 943,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "label": "resp[\"error\"]",
                                                                                                    "start_token": 941,
                                                                                                    "end_token": 943,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "resp",
                                                                                                            "start_token": 941,
                                                                                                            "end_token": 941,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"error\"",
                                                                                                            "start_token": 941,
                                                                                                            "end_token": 943,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 941,
                                                                                                                    "end_token": 941,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "error",
                                                                                                                    "start_token": 942,
                                                                                                                    "end_token": 942,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 943,
                                                                                                                    "end_token": 943,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "get",
                                                                                                    "start_token": 943,
                                                                                                    "end_token": 943,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(\"message\", resp[\"error\"])",
                                                                                            "start_token": 943,
                                                                                            "end_token": 947,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"message\"",
                                                                                                    "start_token": 943,
                                                                                                    "end_token": 945,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 943,
                                                                                                            "end_token": 943,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "message",
                                                                                                            "start_token": 944,
                                                                                                            "end_token": 944,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 945,
                                                                                                            "end_token": 945,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "subscript",
                                                                                                    "label": "resp[\"error\"]",
                                                                                                    "start_token": 945,
                                                                                                    "end_token": 947,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "resp",
                                                                                                            "start_token": 945,
                                                                                                            "end_token": 945,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"error\"",
                                                                                                            "start_token": 945,
                                                                                                            "end_token": 947,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 945,
                                                                                                                    "end_token": 945,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "error",
                                                                                                                    "start_token": 946,
                                                                                                                    "end_token": 946,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 947,
                                                                                                                    "end_token": 947,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "else_clause",
                                                    "label": "else:\n            error_msgs.append(resp[\"error\"])",
                                                    "start_token": 947,
                                                    "end_token": 949,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "label": "error_msgs.append(resp[\"error\"])",
                                                            "start_token": 947,
                                                            "end_token": 949,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "label": "error_msgs.append(resp[\"error\"])",
                                                                    "start_token": 947,
                                                                    "end_token": 949,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "error_msgs.append(resp[\"error\"])",
                                                                            "start_token": 947,
                                                                            "end_token": 949,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "error_msgs.append",
                                                                                    "start_token": 947,
                                                                                    "end_token": 947,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "error_msgs",
                                                                                            "start_token": 947,
                                                                                            "end_token": 947,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "append",
                                                                                            "start_token": 947,
                                                                                            "end_token": 947,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(resp[\"error\"])",
                                                                                    "start_token": 947,
                                                                                    "end_token": 949,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "subscript",
                                                                                            "label": "resp[\"error\"]",
                                                                                            "start_token": 947,
                                                                                            "end_token": 949,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "resp",
                                                                                                    "start_token": 947,
                                                                                                    "end_token": 947,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"error\"",
                                                                                                    "start_token": 947,
                                                                                                    "end_token": 949,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 947,
                                                                                                            "end_token": 947,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "error",
                                                                                                            "start_token": 948,
                                                                                                            "end_token": 948,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 949,
                                                                                                            "end_token": 949,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "return_statement",
                            "label": "return \"\\n\".join(error_msgs)",
                            "start_token": 949,
                            "end_token": 956,
                            "children": [
                                {
                                    "type": "call",
                                    "label": "\"\\n\".join(error_msgs)",
                                    "start_token": 949,
                                    "end_token": 956,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "\"\\n\".join",
                                            "start_token": 949,
                                            "end_token": 953,
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "label": "\"\\n\"",
                                                    "start_token": 949,
                                                    "end_token": 951,
                                                    "children": [
                                                        {
                                                            "type": "string_start",
                                                            "label": "\"",
                                                            "start_token": 949,
                                                            "end_token": 949,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string_content",
                                                            "label": "\\n",
                                                            "start_token": 950,
                                                            "end_token": 950,
                                                            "children": [
                                                                {
                                                                    "type": "escape_sequence",
                                                                    "label": "\\n",
                                                                    "start_token": 950,
                                                                    "end_token": 950,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string_end",
                                                            "label": "\"",
                                                            "start_token": 951,
                                                            "end_token": 951,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "join",
                                                    "start_token": 953,
                                                    "end_token": 953,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "label": "(error_msgs)",
                                            "start_token": 954,
                                            "end_token": 956,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "error_msgs",
                                                    "start_token": 955,
                                                    "end_token": 955,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}