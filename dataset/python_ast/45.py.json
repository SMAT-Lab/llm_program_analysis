{
    "type": "module",
    "label": "import logging\nimport uuid\nfrom datetime import datetime, timezone\nfrom typing import List, Optional\n\nfrom autogpt_libs.api_key.key_manager import APIKeyManager\nfrom prisma.enums import APIKeyPermission, APIKeyStatus\nfrom prisma.errors import PrismaError\nfrom prisma.models import APIKey as PrismaAPIKey\nfrom prisma.types import (\n    APIKeyCreateInput,\n    APIKeyUpdateInput,\n    APIKeyWhereInput,\n    APIKeyWhereUniqueInput,\n)\nfrom pydantic import BaseModel\n\nfrom backend.data.db import BaseDbModel\n\nlogger = logging.getLogger(__name__)\n\n\n# Some basic exceptions\nclass APIKeyError(Exception):\n    \"\"\"Base exception for API key operations\"\"\"\n\n    pass\n\n\nclass APIKeyNotFoundError(APIKeyError):\n    \"\"\"Raised when an API key is not found\"\"\"\n\n    pass\n\n\nclass APIKeyPermissionError(APIKeyError):\n    \"\"\"Raised when there are permission issues with API key operations\"\"\"\n\n    pass\n\n\nclass APIKeyValidationError(APIKeyError):\n    \"\"\"Raised when API key validation fails\"\"\"\n\n    pass\n\n\nclass APIKey(BaseDbModel):\n    name: str\n    prefix: str\n    key: str\n    status: APIKeyStatus = APIKeyStatus.ACTIVE\n    permissions: List[APIKeyPermission]\n    postfix: str\n    created_at: datetime\n    last_used_at: Optional[datetime] = None\n    revoked_at: Optional[datetime] = None\n    description: Optional[str] = None\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")\n\n\nclass APIKeyWithoutHash(BaseModel):\n    id: str\n    name: str\n    prefix: str\n    postfix: str\n    status: APIKeyStatus\n    permissions: List[APIKeyPermission]\n    created_at: datetime\n    last_used_at: Optional[datetime]\n    revoked_at: Optional[datetime]\n    description: Optional[str]\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")\n\n\nasync def generate_api_key(\n    name: str,\n    user_id: str,\n    permissions: List[APIKeyPermission],\n    description: Optional[str] = None,\n) -> tuple[APIKeyWithoutHash, str]:\n    \"\"\"\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    \"\"\"\n    try:\n        api_manager = APIKeyManager()\n        key = api_manager.generate_api_key()\n\n        api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )\n\n        api_key_without_hash = APIKeyWithoutHash.from_db(api_key)\n        return api_key_without_hash, key.raw\n    except PrismaError as e:\n        logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")\n\n\nasync def validate_api_key(plain_text_key: str) -> Optional[APIKey]:\n    \"\"\"\n    Validate an API key and return the API key object if valid.\n    \"\"\"\n    try:\n        if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None\n\n        prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]\n        api_manager = APIKeyManager()\n\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )\n\n        if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None\n\n        is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)\n        if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None\n\n        return APIKey.from_db(api_key)\n    except Exception as e:\n        logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")\n\n\nasync def revoke_api_key(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")\n\n\nasync def list_user_api_keys(user_id: str) -> List[APIKeyWithoutHash]:\n    try:\n        where_clause: APIKeyWhereInput = {\"userId\": user_id}\n\n        api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )\n\n        return [APIKeyWithoutHash.from_db(key) for key in api_keys]\n    except PrismaError as e:\n        logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")\n\n\nasync def suspend_api_key(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")\n\n\ndef has_permission(api_key: APIKey, required_permission: APIKeyPermission) -> bool:\n    try:\n        return required_permission in api_key.permissions\n    except Exception as e:\n        logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False\n\n\nasync def get_api_key_by_id(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )\n\n        if not api_key:\n            return None\n\n        return APIKeyWithoutHash.from_db(api_key)\n    except PrismaError as e:\n        logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")\n\n\nasync def update_api_key_permissions(\n    key_id: str, user_id: str, permissions: List[APIKeyPermission]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"\n    Update the permissions of an API key.\n    \"\"\"\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")\n",
    "start_token": 0,
    "end_token": 1822,
    "children": [
        {
            "type": "import_statement",
            "label": "import logging",
            "start_token": 0,
            "end_token": 1,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "logging",
                    "start_token": 1,
                    "end_token": 1,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logging",
                            "start_token": 1,
                            "end_token": 1,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import uuid",
            "start_token": 3,
            "end_token": 4,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "uuid",
                    "start_token": 4,
                    "end_token": 4,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "uuid",
                            "start_token": 4,
                            "end_token": 4,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from datetime import datetime, timezone",
            "start_token": 6,
            "end_token": 11,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "datetime",
                    "start_token": 7,
                    "end_token": 7,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "datetime",
                            "start_token": 7,
                            "end_token": 7,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "datetime",
                    "start_token": 9,
                    "end_token": 9,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "datetime",
                            "start_token": 9,
                            "end_token": 9,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "timezone",
                    "start_token": 11,
                    "end_token": 11,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "timezone",
                            "start_token": 11,
                            "end_token": 11,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from typing import List, Optional",
            "start_token": 13,
            "end_token": 18,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "typing",
                    "start_token": 14,
                    "end_token": 14,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "typing",
                            "start_token": 14,
                            "end_token": 14,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "List",
                    "start_token": 16,
                    "end_token": 16,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "List",
                            "start_token": 16,
                            "end_token": 16,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "Optional",
                    "start_token": 18,
                    "end_token": 18,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "Optional",
                            "start_token": 18,
                            "end_token": 18,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from autogpt_libs.api_key.key_manager import APIKeyManager",
            "start_token": 21,
            "end_token": 28,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "autogpt_libs.api_key.key_manager",
                    "start_token": 22,
                    "end_token": 26,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "autogpt_libs",
                            "start_token": 22,
                            "end_token": 22,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "api_key",
                            "start_token": 24,
                            "end_token": 24,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "key_manager",
                            "start_token": 26,
                            "end_token": 26,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyManager",
                    "start_token": 28,
                    "end_token": 28,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyManager",
                            "start_token": 28,
                            "end_token": 28,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from prisma.enums import APIKeyPermission, APIKeyStatus",
            "start_token": 30,
            "end_token": 37,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "prisma.enums",
                    "start_token": 31,
                    "end_token": 33,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "prisma",
                            "start_token": 31,
                            "end_token": 31,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "enums",
                            "start_token": 33,
                            "end_token": 33,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyPermission",
                    "start_token": 35,
                    "end_token": 35,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyPermission",
                            "start_token": 35,
                            "end_token": 35,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyStatus",
                    "start_token": 37,
                    "end_token": 37,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyStatus",
                            "start_token": 37,
                            "end_token": 37,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from prisma.errors import PrismaError",
            "start_token": 39,
            "end_token": 44,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "prisma.errors",
                    "start_token": 40,
                    "end_token": 42,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "prisma",
                            "start_token": 40,
                            "end_token": 40,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "errors",
                            "start_token": 42,
                            "end_token": 42,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "PrismaError",
                    "start_token": 44,
                    "end_token": 44,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "PrismaError",
                            "start_token": 44,
                            "end_token": 44,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from prisma.models import APIKey as PrismaAPIKey",
            "start_token": 46,
            "end_token": 53,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "prisma.models",
                    "start_token": 47,
                    "end_token": 49,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "prisma",
                            "start_token": 47,
                            "end_token": 47,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "models",
                            "start_token": 49,
                            "end_token": 49,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "aliased_import",
                    "label": "APIKey as PrismaAPIKey",
                    "start_token": 51,
                    "end_token": 53,
                    "children": [
                        {
                            "type": "dotted_name",
                            "label": "APIKey",
                            "start_token": 51,
                            "end_token": 51,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "APIKey",
                                    "start_token": 51,
                                    "end_token": 51,
                                    "children": []
                                }
                            ]
                        },
                        {
                            "type": "identifier",
                            "label": "PrismaAPIKey",
                            "start_token": 53,
                            "end_token": 53,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from prisma.types import (\n    APIKeyCreateInput,\n    APIKeyUpdateInput,\n    APIKeyWhereInput,\n    APIKeyWhereUniqueInput,\n)",
            "start_token": 55,
            "end_token": 74,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "prisma.types",
                    "start_token": 56,
                    "end_token": 58,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "prisma",
                            "start_token": 56,
                            "end_token": 56,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "types",
                            "start_token": 58,
                            "end_token": 58,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyCreateInput",
                    "start_token": 62,
                    "end_token": 62,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyCreateInput",
                            "start_token": 62,
                            "end_token": 62,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyUpdateInput",
                    "start_token": 65,
                    "end_token": 65,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyUpdateInput",
                            "start_token": 65,
                            "end_token": 65,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyWhereInput",
                    "start_token": 68,
                    "end_token": 68,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyWhereInput",
                            "start_token": 68,
                            "end_token": 68,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "APIKeyWhereUniqueInput",
                    "start_token": 71,
                    "end_token": 71,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyWhereUniqueInput",
                            "start_token": 71,
                            "end_token": 71,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from pydantic import BaseModel",
            "start_token": 76,
            "end_token": 79,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "pydantic",
                    "start_token": 77,
                    "end_token": 77,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "pydantic",
                            "start_token": 77,
                            "end_token": 77,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "BaseModel",
                    "start_token": 79,
                    "end_token": 79,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseModel",
                            "start_token": 79,
                            "end_token": 79,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_from_statement",
            "label": "from backend.data.db import BaseDbModel",
            "start_token": 82,
            "end_token": 89,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.data.db",
                    "start_token": 83,
                    "end_token": 87,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 83,
                            "end_token": 83,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "data",
                            "start_token": 85,
                            "end_token": 85,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "db",
                            "start_token": 87,
                            "end_token": 87,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "dotted_name",
                    "label": "BaseDbModel",
                    "start_token": 89,
                    "end_token": 89,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseDbModel",
                            "start_token": 89,
                            "end_token": 89,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "logger = logging.getLogger(__name__)",
            "start_token": 92,
            "end_token": 99,
            "children": [
                {
                    "type": "assignment",
                    "label": "logger = logging.getLogger(__name__)",
                    "start_token": 92,
                    "end_token": 99,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logger",
                            "start_token": 92,
                            "end_token": 92,
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "logging.getLogger(__name__)",
                            "start_token": 94,
                            "end_token": 99,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "logging.getLogger",
                                    "start_token": 94,
                                    "end_token": 96,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "logging",
                                            "start_token": 94,
                                            "end_token": 94,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "getLogger",
                                            "start_token": 96,
                                            "end_token": 96,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(__name__)",
                                    "start_token": 97,
                                    "end_token": 99,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "__name__",
                                            "start_token": 98,
                                            "end_token": 98,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "# Some basic exceptions",
            "start_token": 103,
            "end_token": 106,
            "children": []
        },
        {
            "type": "class_definition",
            "label": "class APIKeyError(Exception):\n    \"\"\"Base exception for API key operations\"\"\"\n\n    pass",
            "start_token": 108,
            "end_token": 120,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKeyError",
                    "start_token": 109,
                    "end_token": 109,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(Exception)",
                    "start_token": 110,
                    "end_token": 112,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "Exception",
                            "start_token": 111,
                            "end_token": 111,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"Base exception for API key operations\"\"\"\n\n    pass",
                    "start_token": 115,
                    "end_token": 120,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"Base exception for API key operations\"\"\"",
                            "start_token": 115,
                            "end_token": 117,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"Base exception for API key operations\"\"\"",
                                    "start_token": 115,
                                    "end_token": 117,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 115,
                                            "end_token": 116,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "Base exception for API key operations",
                                            "start_token": 116,
                                            "end_token": 116,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 116,
                                            "end_token": 117,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "pass_statement",
                            "label": "pass",
                            "start_token": 120,
                            "end_token": 120,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class APIKeyNotFoundError(APIKeyError):\n    \"\"\"Raised when an API key is not found\"\"\"\n\n    pass",
            "start_token": 124,
            "end_token": 136,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKeyNotFoundError",
                    "start_token": 125,
                    "end_token": 125,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(APIKeyError)",
                    "start_token": 126,
                    "end_token": 128,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyError",
                            "start_token": 127,
                            "end_token": 127,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"Raised when an API key is not found\"\"\"\n\n    pass",
                    "start_token": 131,
                    "end_token": 136,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"Raised when an API key is not found\"\"\"",
                            "start_token": 131,
                            "end_token": 133,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"Raised when an API key is not found\"\"\"",
                                    "start_token": 131,
                                    "end_token": 133,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 131,
                                            "end_token": 132,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "Raised when an API key is not found",
                                            "start_token": 132,
                                            "end_token": 132,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 132,
                                            "end_token": 133,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "pass_statement",
                            "label": "pass",
                            "start_token": 136,
                            "end_token": 136,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class APIKeyPermissionError(APIKeyError):\n    \"\"\"Raised when there are permission issues with API key operations\"\"\"\n\n    pass",
            "start_token": 140,
            "end_token": 152,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKeyPermissionError",
                    "start_token": 141,
                    "end_token": 141,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(APIKeyError)",
                    "start_token": 142,
                    "end_token": 144,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyError",
                            "start_token": 143,
                            "end_token": 143,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"Raised when there are permission issues with API key operations\"\"\"\n\n    pass",
                    "start_token": 147,
                    "end_token": 152,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"Raised when there are permission issues with API key operations\"\"\"",
                            "start_token": 147,
                            "end_token": 149,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"Raised when there are permission issues with API key operations\"\"\"",
                                    "start_token": 147,
                                    "end_token": 149,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 147,
                                            "end_token": 148,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "Raised when there are permission issues with API key operations",
                                            "start_token": 148,
                                            "end_token": 148,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 148,
                                            "end_token": 149,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "pass_statement",
                            "label": "pass",
                            "start_token": 152,
                            "end_token": 152,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class APIKeyValidationError(APIKeyError):\n    \"\"\"Raised when API key validation fails\"\"\"\n\n    pass",
            "start_token": 156,
            "end_token": 168,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKeyValidationError",
                    "start_token": 157,
                    "end_token": 157,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(APIKeyError)",
                    "start_token": 158,
                    "end_token": 160,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "APIKeyError",
                            "start_token": 159,
                            "end_token": 159,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"Raised when API key validation fails\"\"\"\n\n    pass",
                    "start_token": 163,
                    "end_token": 168,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"Raised when API key validation fails\"\"\"",
                            "start_token": 163,
                            "end_token": 165,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"Raised when API key validation fails\"\"\"",
                                    "start_token": 163,
                                    "end_token": 165,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 163,
                                            "end_token": 164,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "Raised when API key validation fails",
                                            "start_token": 164,
                                            "end_token": 164,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 164,
                                            "end_token": 165,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "pass_statement",
                            "label": "pass",
                            "start_token": 168,
                            "end_token": 168,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class APIKey(BaseDbModel):\n    name: str\n    prefix: str\n    key: str\n    status: APIKeyStatus = APIKeyStatus.ACTIVE\n    permissions: List[APIKeyPermission]\n    postfix: str\n    created_at: datetime\n    last_used_at: Optional[datetime] = None\n    revoked_at: Optional[datetime] = None\n    description: Optional[str] = None\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
            "start_token": 172,
            "end_token": 382,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKey",
                    "start_token": 173,
                    "end_token": 173,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(BaseDbModel)",
                    "start_token": 174,
                    "end_token": 176,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseDbModel",
                            "start_token": 175,
                            "end_token": 175,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "name: str\n    prefix: str\n    key: str\n    status: APIKeyStatus = APIKeyStatus.ACTIVE\n    permissions: List[APIKeyPermission]\n    postfix: str\n    created_at: datetime\n    last_used_at: Optional[datetime] = None\n    revoked_at: Optional[datetime] = None\n    description: Optional[str] = None\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                    "start_token": 179,
                    "end_token": 382,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "name: str",
                            "start_token": 179,
                            "end_token": 181,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "name: str",
                                    "start_token": 179,
                                    "end_token": 181,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "name",
                                            "start_token": 179,
                                            "end_token": 179,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 181,
                                            "end_token": 181,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 181,
                                                    "end_token": 181,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "prefix: str",
                            "start_token": 183,
                            "end_token": 185,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "prefix: str",
                                    "start_token": 183,
                                    "end_token": 185,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "prefix",
                                            "start_token": 183,
                                            "end_token": 183,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 185,
                                            "end_token": 185,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 185,
                                                    "end_token": 185,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "key: str",
                            "start_token": 187,
                            "end_token": 189,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "key: str",
                                    "start_token": 187,
                                    "end_token": 189,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "key",
                                            "start_token": 187,
                                            "end_token": 187,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 189,
                                            "end_token": 189,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 189,
                                                    "end_token": 189,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "status: APIKeyStatus = APIKeyStatus.ACTIVE",
                            "start_token": 191,
                            "end_token": 197,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "status: APIKeyStatus = APIKeyStatus.ACTIVE",
                                    "start_token": 191,
                                    "end_token": 197,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "status",
                                            "start_token": 191,
                                            "end_token": 191,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "APIKeyStatus",
                                            "start_token": 193,
                                            "end_token": 193,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyStatus",
                                                    "start_token": 193,
                                                    "end_token": 193,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "attribute",
                                            "label": "APIKeyStatus.ACTIVE",
                                            "start_token": 195,
                                            "end_token": 197,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyStatus",
                                                    "start_token": 195,
                                                    "end_token": 195,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "ACTIVE",
                                                    "start_token": 197,
                                                    "end_token": 197,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "permissions: List[APIKeyPermission]",
                            "start_token": 199,
                            "end_token": 204,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "permissions: List[APIKeyPermission]",
                                    "start_token": 199,
                                    "end_token": 204,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "permissions",
                                            "start_token": 199,
                                            "end_token": 199,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "List[APIKeyPermission]",
                                            "start_token": 201,
                                            "end_token": 204,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "List[APIKeyPermission]",
                                                    "start_token": 201,
                                                    "end_token": 204,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "List",
                                                            "start_token": 201,
                                                            "end_token": 201,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[APIKeyPermission]",
                                                            "start_token": 202,
                                                            "end_token": 204,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "APIKeyPermission",
                                                                    "start_token": 203,
                                                                    "end_token": 203,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyPermission",
                                                                            "start_token": 203,
                                                                            "end_token": 203,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "postfix: str",
                            "start_token": 206,
                            "end_token": 208,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "postfix: str",
                                    "start_token": 206,
                                    "end_token": 208,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "postfix",
                                            "start_token": 206,
                                            "end_token": 206,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 208,
                                            "end_token": 208,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 208,
                                                    "end_token": 208,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "created_at: datetime",
                            "start_token": 210,
                            "end_token": 212,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "created_at: datetime",
                                    "start_token": 210,
                                    "end_token": 212,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "created_at",
                                            "start_token": 210,
                                            "end_token": 210,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "datetime",
                                            "start_token": 212,
                                            "end_token": 212,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "datetime",
                                                    "start_token": 212,
                                                    "end_token": 212,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "last_used_at: Optional[datetime] = None",
                            "start_token": 214,
                            "end_token": 221,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "last_used_at: Optional[datetime] = None",
                                    "start_token": 214,
                                    "end_token": 221,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "last_used_at",
                                            "start_token": 214,
                                            "end_token": 214,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[datetime]",
                                            "start_token": 216,
                                            "end_token": 219,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[datetime]",
                                                    "start_token": 216,
                                                    "end_token": 219,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 216,
                                                            "end_token": 216,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[datetime]",
                                                            "start_token": 217,
                                                            "end_token": 219,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "datetime",
                                                                    "start_token": 218,
                                                                    "end_token": 218,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "datetime",
                                                                            "start_token": 218,
                                                                            "end_token": 218,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 221,
                                            "end_token": 221,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "revoked_at: Optional[datetime] = None",
                            "start_token": 223,
                            "end_token": 230,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "revoked_at: Optional[datetime] = None",
                                    "start_token": 223,
                                    "end_token": 230,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "revoked_at",
                                            "start_token": 223,
                                            "end_token": 223,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[datetime]",
                                            "start_token": 225,
                                            "end_token": 228,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[datetime]",
                                                    "start_token": 225,
                                                    "end_token": 228,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 225,
                                                            "end_token": 225,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[datetime]",
                                                            "start_token": 226,
                                                            "end_token": 228,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "datetime",
                                                                    "start_token": 227,
                                                                    "end_token": 227,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "datetime",
                                                                            "start_token": 227,
                                                                            "end_token": 227,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 230,
                                            "end_token": 230,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "description: Optional[str] = None",
                            "start_token": 232,
                            "end_token": 239,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "description: Optional[str] = None",
                                    "start_token": 232,
                                    "end_token": 239,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "description",
                                            "start_token": 232,
                                            "end_token": 232,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[str]",
                                            "start_token": 234,
                                            "end_token": 237,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[str]",
                                                    "start_token": 234,
                                                    "end_token": 237,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 234,
                                                            "end_token": 234,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[str]",
                                                            "start_token": 235,
                                                            "end_token": 237,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "str",
                                                                    "start_token": 236,
                                                                    "end_token": 236,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "str",
                                                                            "start_token": 236,
                                                                            "end_token": 236,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 239,
                                            "end_token": 239,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "user_id: str",
                            "start_token": 241,
                            "end_token": 243,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "user_id: str",
                                    "start_token": 241,
                                    "end_token": 243,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 241,
                                            "end_token": 241,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 243,
                                            "end_token": 243,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 243,
                                                    "end_token": 243,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "decorated_definition",
                            "label": "@staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                            "start_token": 246,
                            "end_token": 382,
                            "children": [
                                {
                                    "type": "decorator",
                                    "label": "@staticmethod",
                                    "start_token": 246,
                                    "end_token": 247,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "staticmethod",
                                            "start_token": 247,
                                            "end_token": 247,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "function_definition",
                                    "label": "def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                    "start_token": 249,
                                    "end_token": 382,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "from_db",
                                            "start_token": 250,
                                            "end_token": 250,
                                            "children": []
                                        },
                                        {
                                            "type": "parameters",
                                            "label": "(api_key: PrismaAPIKey)",
                                            "start_token": 251,
                                            "end_token": 255,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "label": "api_key: PrismaAPIKey",
                                                    "start_token": 252,
                                                    "end_token": 254,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 252,
                                                            "end_token": 252,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "PrismaAPIKey",
                                                            "start_token": 254,
                                                            "end_token": 254,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "PrismaAPIKey",
                                                                    "start_token": 254,
                                                                    "end_token": 254,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                            "start_token": 258,
                                            "end_token": 382,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "label": "try:\n            return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                    "start_token": 258,
                                                    "end_token": 382,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "label": "return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                            "start_token": 261,
                                                            "end_token": 361,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "label": "return APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                    "start_token": 261,
                                                                    "end_token": 361,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "APIKey(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                            "start_token": 262,
                                                                            "end_token": 361,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKey",
                                                                                    "start_token": 262,
                                                                                    "end_token": 262,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                key=api_key.key,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                                    "start_token": 263,
                                                                                    "end_token": 361,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "id=api_key.id",
                                                                                            "start_token": 265,
                                                                                            "end_token": 269,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "id",
                                                                                                    "start_token": 265,
                                                                                                    "end_token": 265,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.id",
                                                                                                    "start_token": 267,
                                                                                                    "end_token": 269,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 267,
                                                                                                            "end_token": 267,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "id",
                                                                                                            "start_token": 269,
                                                                                                            "end_token": 269,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "name=api_key.name",
                                                                                            "start_token": 272,
                                                                                            "end_token": 276,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "name",
                                                                                                    "start_token": 272,
                                                                                                    "end_token": 272,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.name",
                                                                                                    "start_token": 274,
                                                                                                    "end_token": 276,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 274,
                                                                                                            "end_token": 274,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "name",
                                                                                                            "start_token": 276,
                                                                                                            "end_token": 276,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "prefix=api_key.prefix",
                                                                                            "start_token": 279,
                                                                                            "end_token": 283,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prefix",
                                                                                                    "start_token": 279,
                                                                                                    "end_token": 279,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.prefix",
                                                                                                    "start_token": 281,
                                                                                                    "end_token": 283,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 281,
                                                                                                            "end_token": 281,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "prefix",
                                                                                                            "start_token": 283,
                                                                                                            "end_token": 283,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "postfix=api_key.postfix",
                                                                                            "start_token": 286,
                                                                                            "end_token": 290,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "postfix",
                                                                                                    "start_token": 286,
                                                                                                    "end_token": 286,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.postfix",
                                                                                                    "start_token": 288,
                                                                                                    "end_token": 290,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 288,
                                                                                                            "end_token": 288,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "postfix",
                                                                                                            "start_token": 290,
                                                                                                            "end_token": 290,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "key=api_key.key",
                                                                                            "start_token": 293,
                                                                                            "end_token": 297,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "key",
                                                                                                    "start_token": 293,
                                                                                                    "end_token": 293,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.key",
                                                                                                    "start_token": 295,
                                                                                                    "end_token": 297,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 295,
                                                                                                            "end_token": 295,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "key",
                                                                                                            "start_token": 297,
                                                                                                            "end_token": 297,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status=APIKeyStatus(api_key.status)",
                                                                                            "start_token": 300,
                                                                                            "end_token": 307,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status",
                                                                                                    "start_token": 300,
                                                                                                    "end_token": 300,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "label": "APIKeyStatus(api_key.status)",
                                                                                                    "start_token": 302,
                                                                                                    "end_token": 307,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "APIKeyStatus",
                                                                                                            "start_token": 302,
                                                                                                            "end_token": 302,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "label": "(api_key.status)",
                                                                                                            "start_token": 303,
                                                                                                            "end_token": 307,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "api_key.status",
                                                                                                                    "start_token": 304,
                                                                                                                    "end_token": 306,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "api_key",
                                                                                                                            "start_token": 304,
                                                                                                                            "end_token": 304,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "status",
                                                                                                                            "start_token": 306,
                                                                                                                            "end_token": 306,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "permissions=[APIKeyPermission(p) for p in api_key.permissions]",
                                                                                            "start_token": 310,
                                                                                            "end_token": 323,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "permissions",
                                                                                                    "start_token": 310,
                                                                                                    "end_token": 310,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "list_comprehension",
                                                                                                    "label": "[APIKeyPermission(p) for p in api_key.permissions]",
                                                                                                    "start_token": 312,
                                                                                                    "end_token": 323,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "label": "APIKeyPermission(p)",
                                                                                                            "start_token": 313,
                                                                                                            "end_token": 316,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "APIKeyPermission",
                                                                                                                    "start_token": 313,
                                                                                                                    "end_token": 313,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "label": "(p)",
                                                                                                                    "start_token": 314,
                                                                                                                    "end_token": 316,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "p",
                                                                                                                            "start_token": 315,
                                                                                                                            "end_token": 315,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "for_in_clause",
                                                                                                            "label": "for p in api_key.permissions",
                                                                                                            "start_token": 317,
                                                                                                            "end_token": 322,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "p",
                                                                                                                    "start_token": 318,
                                                                                                                    "end_token": 318,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "api_key.permissions",
                                                                                                                    "start_token": 320,
                                                                                                                    "end_token": 322,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "api_key",
                                                                                                                            "start_token": 320,
                                                                                                                            "end_token": 320,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "permissions",
                                                                                                                            "start_token": 322,
                                                                                                                            "end_token": 322,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "created_at=api_key.createdAt",
                                                                                            "start_token": 326,
                                                                                            "end_token": 330,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "created_at",
                                                                                                    "start_token": 326,
                                                                                                    "end_token": 326,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.createdAt",
                                                                                                    "start_token": 328,
                                                                                                    "end_token": 330,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 328,
                                                                                                            "end_token": 328,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "createdAt",
                                                                                                            "start_token": 330,
                                                                                                            "end_token": 330,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "last_used_at=api_key.lastUsedAt",
                                                                                            "start_token": 333,
                                                                                            "end_token": 337,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "last_used_at",
                                                                                                    "start_token": 333,
                                                                                                    "end_token": 333,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.lastUsedAt",
                                                                                                    "start_token": 335,
                                                                                                    "end_token": 337,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 335,
                                                                                                            "end_token": 335,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "lastUsedAt",
                                                                                                            "start_token": 337,
                                                                                                            "end_token": 337,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "revoked_at=api_key.revokedAt",
                                                                                            "start_token": 340,
                                                                                            "end_token": 344,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "revoked_at",
                                                                                                    "start_token": 340,
                                                                                                    "end_token": 340,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.revokedAt",
                                                                                                    "start_token": 342,
                                                                                                    "end_token": 344,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 342,
                                                                                                            "end_token": 342,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "revokedAt",
                                                                                                            "start_token": 344,
                                                                                                            "end_token": 344,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "description=api_key.description",
                                                                                            "start_token": 347,
                                                                                            "end_token": 351,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "description",
                                                                                                    "start_token": 347,
                                                                                                    "end_token": 347,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.description",
                                                                                                    "start_token": 349,
                                                                                                    "end_token": 351,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 349,
                                                                                                            "end_token": 349,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "description",
                                                                                                            "start_token": 351,
                                                                                                            "end_token": 351,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=api_key.userId",
                                                                                            "start_token": 354,
                                                                                            "end_token": 358,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 354,
                                                                                                    "end_token": 354,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.userId",
                                                                                                    "start_token": 356,
                                                                                                    "end_token": 358,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 356,
                                                                                                            "end_token": 356,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "userId",
                                                                                                            "start_token": 358,
                                                                                                            "end_token": 358,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "label": "except Exception as e:\n            logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                            "start_token": 363,
                                                            "end_token": 382,
                                                            "children": [
                                                                {
                                                                    "type": "as_pattern",
                                                                    "label": "Exception as e",
                                                                    "start_token": 364,
                                                                    "end_token": 366,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Exception",
                                                                            "start_token": 364,
                                                                            "end_token": 364,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "as_pattern_target",
                                                                            "label": "e",
                                                                            "start_token": 366,
                                                                            "end_token": 366,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "e",
                                                                                    "start_token": 366,
                                                                                    "end_token": 366,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "label": "logger.error(f\"Error creating APIKey from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                    "start_token": 369,
                                                                    "end_token": 382,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "label": "logger.error(f\"Error creating APIKey from db: {str(e)}\")",
                                                                            "start_token": 369,
                                                                            "end_token": 375,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "logger.error(f\"Error creating APIKey from db: {str(e)}\")",
                                                                                    "start_token": 369,
                                                                                    "end_token": 375,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "logger.error",
                                                                                            "start_token": 369,
                                                                                            "end_token": 371,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "logger",
                                                                                                    "start_token": 369,
                                                                                                    "end_token": 369,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "error",
                                                                                                    "start_token": 371,
                                                                                                    "end_token": 371,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(f\"Error creating APIKey from db: {str(e)}\")",
                                                                                            "start_token": 372,
                                                                                            "end_token": 375,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Error creating APIKey from db: {str(e)}\"",
                                                                                                    "start_token": 373,
                                                                                                    "end_token": 374,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "start_token": 373,
                                                                                                            "end_token": 374,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Error creating APIKey from db: ",
                                                                                                            "start_token": 374,
                                                                                                            "end_token": 374,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{str(e)}",
                                                                                                            "start_token": 374,
                                                                                                            "end_token": 374,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "str(e)",
                                                                                                                    "start_token": 374,
                                                                                                                    "end_token": 374,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "str",
                                                                                                                            "start_token": 374,
                                                                                                                            "end_token": 374,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(e)",
                                                                                                                            "start_token": 374,
                                                                                                                            "end_token": 374,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "e",
                                                                                                                                    "start_token": 374,
                                                                                                                                    "end_token": 374,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 374,
                                                                                                            "end_token": 374,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "label": "raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                            "start_token": 377,
                                                                            "end_token": 382,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                                    "start_token": 378,
                                                                                    "end_token": 382,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "APIKeyError",
                                                                                            "start_token": 378,
                                                                                            "end_token": 378,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(f\"Failed to create API key object: {str(e)}\")",
                                                                                            "start_token": 379,
                                                                                            "end_token": 382,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Failed to create API key object: {str(e)}\"",
                                                                                                    "start_token": 380,
                                                                                                    "end_token": 381,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "start_token": 380,
                                                                                                            "end_token": 381,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Failed to create API key object: ",
                                                                                                            "start_token": 381,
                                                                                                            "end_token": 381,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{str(e)}",
                                                                                                            "start_token": 381,
                                                                                                            "end_token": 381,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "str(e)",
                                                                                                                    "start_token": 381,
                                                                                                                    "end_token": 381,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "str",
                                                                                                                            "start_token": 381,
                                                                                                                            "end_token": 381,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(e)",
                                                                                                                            "start_token": 381,
                                                                                                                            "end_token": 381,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "e",
                                                                                                                                    "start_token": 381,
                                                                                                                                    "end_token": 381,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 381,
                                                                                                            "end_token": 381,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "class_definition",
            "label": "class APIKeyWithoutHash(BaseModel):\n    id: str\n    name: str\n    prefix: str\n    postfix: str\n    status: APIKeyStatus\n    permissions: List[APIKeyPermission]\n    created_at: datetime\n    last_used_at: Optional[datetime]\n    revoked_at: Optional[datetime]\n    description: Optional[str]\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
            "start_token": 386,
            "end_token": 579,
            "children": [
                {
                    "type": "identifier",
                    "label": "APIKeyWithoutHash",
                    "start_token": 387,
                    "end_token": 387,
                    "children": []
                },
                {
                    "type": "argument_list",
                    "label": "(BaseModel)",
                    "start_token": 388,
                    "end_token": 390,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "BaseModel",
                            "start_token": 389,
                            "end_token": 389,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "id: str\n    name: str\n    prefix: str\n    postfix: str\n    status: APIKeyStatus\n    permissions: List[APIKeyPermission]\n    created_at: datetime\n    last_used_at: Optional[datetime]\n    revoked_at: Optional[datetime]\n    description: Optional[str]\n    user_id: str\n\n    @staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                    "start_token": 393,
                    "end_token": 579,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "id: str",
                            "start_token": 393,
                            "end_token": 395,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "id: str",
                                    "start_token": 393,
                                    "end_token": 395,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "id",
                                            "start_token": 393,
                                            "end_token": 393,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 395,
                                            "end_token": 395,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 395,
                                                    "end_token": 395,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "name: str",
                            "start_token": 397,
                            "end_token": 399,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "name: str",
                                    "start_token": 397,
                                    "end_token": 399,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "name",
                                            "start_token": 397,
                                            "end_token": 397,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 399,
                                            "end_token": 399,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 399,
                                                    "end_token": 399,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "prefix: str",
                            "start_token": 401,
                            "end_token": 403,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "prefix: str",
                                    "start_token": 401,
                                    "end_token": 403,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "prefix",
                                            "start_token": 401,
                                            "end_token": 401,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 403,
                                            "end_token": 403,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 403,
                                                    "end_token": 403,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "postfix: str",
                            "start_token": 405,
                            "end_token": 407,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "postfix: str",
                                    "start_token": 405,
                                    "end_token": 407,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "postfix",
                                            "start_token": 405,
                                            "end_token": 405,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 407,
                                            "end_token": 407,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 407,
                                                    "end_token": 407,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "status: APIKeyStatus",
                            "start_token": 409,
                            "end_token": 411,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "status: APIKeyStatus",
                                    "start_token": 409,
                                    "end_token": 411,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "status",
                                            "start_token": 409,
                                            "end_token": 409,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "APIKeyStatus",
                                            "start_token": 411,
                                            "end_token": 411,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyStatus",
                                                    "start_token": 411,
                                                    "end_token": 411,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "permissions: List[APIKeyPermission]",
                            "start_token": 413,
                            "end_token": 418,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "permissions: List[APIKeyPermission]",
                                    "start_token": 413,
                                    "end_token": 418,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "permissions",
                                            "start_token": 413,
                                            "end_token": 413,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "List[APIKeyPermission]",
                                            "start_token": 415,
                                            "end_token": 418,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "List[APIKeyPermission]",
                                                    "start_token": 415,
                                                    "end_token": 418,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "List",
                                                            "start_token": 415,
                                                            "end_token": 415,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[APIKeyPermission]",
                                                            "start_token": 416,
                                                            "end_token": 418,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "APIKeyPermission",
                                                                    "start_token": 417,
                                                                    "end_token": 417,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyPermission",
                                                                            "start_token": 417,
                                                                            "end_token": 417,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "created_at: datetime",
                            "start_token": 420,
                            "end_token": 422,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "created_at: datetime",
                                    "start_token": 420,
                                    "end_token": 422,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "created_at",
                                            "start_token": 420,
                                            "end_token": 420,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "datetime",
                                            "start_token": 422,
                                            "end_token": 422,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "datetime",
                                                    "start_token": 422,
                                                    "end_token": 422,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "last_used_at: Optional[datetime]",
                            "start_token": 424,
                            "end_token": 429,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "last_used_at: Optional[datetime]",
                                    "start_token": 424,
                                    "end_token": 429,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "last_used_at",
                                            "start_token": 424,
                                            "end_token": 424,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[datetime]",
                                            "start_token": 426,
                                            "end_token": 429,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[datetime]",
                                                    "start_token": 426,
                                                    "end_token": 429,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 426,
                                                            "end_token": 426,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[datetime]",
                                                            "start_token": 427,
                                                            "end_token": 429,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "datetime",
                                                                    "start_token": 428,
                                                                    "end_token": 428,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "datetime",
                                                                            "start_token": 428,
                                                                            "end_token": 428,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "revoked_at: Optional[datetime]",
                            "start_token": 431,
                            "end_token": 436,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "revoked_at: Optional[datetime]",
                                    "start_token": 431,
                                    "end_token": 436,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "revoked_at",
                                            "start_token": 431,
                                            "end_token": 431,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[datetime]",
                                            "start_token": 433,
                                            "end_token": 436,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[datetime]",
                                                    "start_token": 433,
                                                    "end_token": 436,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 433,
                                                            "end_token": 433,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[datetime]",
                                                            "start_token": 434,
                                                            "end_token": 436,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "datetime",
                                                                    "start_token": 435,
                                                                    "end_token": 435,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "datetime",
                                                                            "start_token": 435,
                                                                            "end_token": 435,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "description: Optional[str]",
                            "start_token": 438,
                            "end_token": 443,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "description: Optional[str]",
                                    "start_token": 438,
                                    "end_token": 443,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "description",
                                            "start_token": 438,
                                            "end_token": 438,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "Optional[str]",
                                            "start_token": 440,
                                            "end_token": 443,
                                            "children": [
                                                {
                                                    "type": "generic_type",
                                                    "label": "Optional[str]",
                                                    "start_token": 440,
                                                    "end_token": 443,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "Optional",
                                                            "start_token": 440,
                                                            "end_token": 440,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type_parameter",
                                                            "label": "[str]",
                                                            "start_token": 441,
                                                            "end_token": 443,
                                                            "children": [
                                                                {
                                                                    "type": "type",
                                                                    "label": "str",
                                                                    "start_token": 442,
                                                                    "end_token": 442,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "str",
                                                                            "start_token": 442,
                                                                            "end_token": 442,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "expression_statement",
                            "label": "user_id: str",
                            "start_token": 445,
                            "end_token": 447,
                            "children": [
                                {
                                    "type": "assignment",
                                    "label": "user_id: str",
                                    "start_token": 445,
                                    "end_token": 447,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 445,
                                            "end_token": 445,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 447,
                                            "end_token": 447,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 447,
                                                    "end_token": 447,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "decorated_definition",
                            "label": "@staticmethod\n    def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                            "start_token": 450,
                            "end_token": 579,
                            "children": [
                                {
                                    "type": "decorator",
                                    "label": "@staticmethod",
                                    "start_token": 450,
                                    "end_token": 451,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "staticmethod",
                                            "start_token": 451,
                                            "end_token": 451,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "function_definition",
                                    "label": "def from_db(api_key: PrismaAPIKey):\n        try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                    "start_token": 453,
                                    "end_token": 579,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "from_db",
                                            "start_token": 454,
                                            "end_token": 454,
                                            "children": []
                                        },
                                        {
                                            "type": "parameters",
                                            "label": "(api_key: PrismaAPIKey)",
                                            "start_token": 455,
                                            "end_token": 459,
                                            "children": [
                                                {
                                                    "type": "typed_parameter",
                                                    "label": "api_key: PrismaAPIKey",
                                                    "start_token": 456,
                                                    "end_token": 458,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 456,
                                                            "end_token": 456,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "PrismaAPIKey",
                                                            "start_token": 458,
                                                            "end_token": 458,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "PrismaAPIKey",
                                                                    "start_token": 458,
                                                                    "end_token": 458,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                            "start_token": 462,
                                            "end_token": 579,
                                            "children": [
                                                {
                                                    "type": "try_statement",
                                                    "label": "try:\n            return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )\n        except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                    "start_token": 462,
                                                    "end_token": 579,
                                                    "children": [
                                                        {
                                                            "type": "block",
                                                            "label": "return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                            "start_token": 465,
                                                            "end_token": 558,
                                                            "children": [
                                                                {
                                                                    "type": "return_statement",
                                                                    "label": "return APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                    "start_token": 465,
                                                                    "end_token": 558,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "APIKeyWithoutHash(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                            "start_token": 466,
                                                                            "end_token": 558,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyWithoutHash",
                                                                                    "start_token": 466,
                                                                                    "end_token": 466,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                id=api_key.id,\n                name=api_key.name,\n                prefix=api_key.prefix,\n                postfix=api_key.postfix,\n                status=APIKeyStatus(api_key.status),\n                permissions=[APIKeyPermission(p) for p in api_key.permissions],\n                created_at=api_key.createdAt,\n                last_used_at=api_key.lastUsedAt,\n                revoked_at=api_key.revokedAt,\n                description=api_key.description,\n                user_id=api_key.userId,\n            )",
                                                                                    "start_token": 467,
                                                                                    "end_token": 558,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "id=api_key.id",
                                                                                            "start_token": 469,
                                                                                            "end_token": 473,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "id",
                                                                                                    "start_token": 469,
                                                                                                    "end_token": 469,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.id",
                                                                                                    "start_token": 471,
                                                                                                    "end_token": 473,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 471,
                                                                                                            "end_token": 471,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "id",
                                                                                                            "start_token": 473,
                                                                                                            "end_token": 473,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "name=api_key.name",
                                                                                            "start_token": 476,
                                                                                            "end_token": 480,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "name",
                                                                                                    "start_token": 476,
                                                                                                    "end_token": 476,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.name",
                                                                                                    "start_token": 478,
                                                                                                    "end_token": 480,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 478,
                                                                                                            "end_token": 478,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "name",
                                                                                                            "start_token": 480,
                                                                                                            "end_token": 480,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "prefix=api_key.prefix",
                                                                                            "start_token": 483,
                                                                                            "end_token": 487,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prefix",
                                                                                                    "start_token": 483,
                                                                                                    "end_token": 483,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.prefix",
                                                                                                    "start_token": 485,
                                                                                                    "end_token": 487,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 485,
                                                                                                            "end_token": 485,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "prefix",
                                                                                                            "start_token": 487,
                                                                                                            "end_token": 487,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "postfix=api_key.postfix",
                                                                                            "start_token": 490,
                                                                                            "end_token": 494,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "postfix",
                                                                                                    "start_token": 490,
                                                                                                    "end_token": 490,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.postfix",
                                                                                                    "start_token": 492,
                                                                                                    "end_token": 494,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 492,
                                                                                                            "end_token": 492,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "postfix",
                                                                                                            "start_token": 494,
                                                                                                            "end_token": 494,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status=APIKeyStatus(api_key.status)",
                                                                                            "start_token": 497,
                                                                                            "end_token": 504,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status",
                                                                                                    "start_token": 497,
                                                                                                    "end_token": 497,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "label": "APIKeyStatus(api_key.status)",
                                                                                                    "start_token": 499,
                                                                                                    "end_token": 504,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "APIKeyStatus",
                                                                                                            "start_token": 499,
                                                                                                            "end_token": 499,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "label": "(api_key.status)",
                                                                                                            "start_token": 500,
                                                                                                            "end_token": 504,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "api_key.status",
                                                                                                                    "start_token": 501,
                                                                                                                    "end_token": 503,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "api_key",
                                                                                                                            "start_token": 501,
                                                                                                                            "end_token": 501,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "status",
                                                                                                                            "start_token": 503,
                                                                                                                            "end_token": 503,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "permissions=[APIKeyPermission(p) for p in api_key.permissions]",
                                                                                            "start_token": 507,
                                                                                            "end_token": 520,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "permissions",
                                                                                                    "start_token": 507,
                                                                                                    "end_token": 507,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "list_comprehension",
                                                                                                    "label": "[APIKeyPermission(p) for p in api_key.permissions]",
                                                                                                    "start_token": 509,
                                                                                                    "end_token": 520,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "call",
                                                                                                            "label": "APIKeyPermission(p)",
                                                                                                            "start_token": 510,
                                                                                                            "end_token": 513,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "APIKeyPermission",
                                                                                                                    "start_token": 510,
                                                                                                                    "end_token": 510,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "argument_list",
                                                                                                                    "label": "(p)",
                                                                                                                    "start_token": 511,
                                                                                                                    "end_token": 513,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "p",
                                                                                                                            "start_token": 512,
                                                                                                                            "end_token": 512,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "for_in_clause",
                                                                                                            "label": "for p in api_key.permissions",
                                                                                                            "start_token": 514,
                                                                                                            "end_token": 519,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "p",
                                                                                                                    "start_token": 515,
                                                                                                                    "end_token": 515,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "api_key.permissions",
                                                                                                                    "start_token": 517,
                                                                                                                    "end_token": 519,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "api_key",
                                                                                                                            "start_token": 517,
                                                                                                                            "end_token": 517,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "permissions",
                                                                                                                            "start_token": 519,
                                                                                                                            "end_token": 519,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "created_at=api_key.createdAt",
                                                                                            "start_token": 523,
                                                                                            "end_token": 527,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "created_at",
                                                                                                    "start_token": 523,
                                                                                                    "end_token": 523,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.createdAt",
                                                                                                    "start_token": 525,
                                                                                                    "end_token": 527,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 525,
                                                                                                            "end_token": 525,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "createdAt",
                                                                                                            "start_token": 527,
                                                                                                            "end_token": 527,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "last_used_at=api_key.lastUsedAt",
                                                                                            "start_token": 530,
                                                                                            "end_token": 534,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "last_used_at",
                                                                                                    "start_token": 530,
                                                                                                    "end_token": 530,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.lastUsedAt",
                                                                                                    "start_token": 532,
                                                                                                    "end_token": 534,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 532,
                                                                                                            "end_token": 532,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "lastUsedAt",
                                                                                                            "start_token": 534,
                                                                                                            "end_token": 534,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "revoked_at=api_key.revokedAt",
                                                                                            "start_token": 537,
                                                                                            "end_token": 541,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "revoked_at",
                                                                                                    "start_token": 537,
                                                                                                    "end_token": 537,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.revokedAt",
                                                                                                    "start_token": 539,
                                                                                                    "end_token": 541,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 539,
                                                                                                            "end_token": 539,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "revokedAt",
                                                                                                            "start_token": 541,
                                                                                                            "end_token": 541,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "description=api_key.description",
                                                                                            "start_token": 544,
                                                                                            "end_token": 548,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "description",
                                                                                                    "start_token": 544,
                                                                                                    "end_token": 544,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.description",
                                                                                                    "start_token": 546,
                                                                                                    "end_token": 548,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 546,
                                                                                                            "end_token": 546,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "description",
                                                                                                            "start_token": 548,
                                                                                                            "end_token": 548,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=api_key.userId",
                                                                                            "start_token": 551,
                                                                                            "end_token": 555,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 551,
                                                                                                    "end_token": 551,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "api_key.userId",
                                                                                                    "start_token": 553,
                                                                                                    "end_token": 555,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "api_key",
                                                                                                            "start_token": 553,
                                                                                                            "end_token": 553,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "userId",
                                                                                                            "start_token": 555,
                                                                                                            "end_token": 555,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "except_clause",
                                                            "label": "except Exception as e:\n            logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                            "start_token": 560,
                                                            "end_token": 579,
                                                            "children": [
                                                                {
                                                                    "type": "as_pattern",
                                                                    "label": "Exception as e",
                                                                    "start_token": 561,
                                                                    "end_token": 563,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Exception",
                                                                            "start_token": 561,
                                                                            "end_token": 561,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "as_pattern_target",
                                                                            "label": "e",
                                                                            "start_token": 563,
                                                                            "end_token": 563,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "e",
                                                                                    "start_token": 563,
                                                                                    "end_token": 563,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "block",
                                                                    "label": "logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")\n            raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                    "start_token": 566,
                                                                    "end_token": 579,
                                                                    "children": [
                                                                        {
                                                                            "type": "expression_statement",
                                                                            "label": "logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")",
                                                                            "start_token": 566,
                                                                            "end_token": 572,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "logger.error(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")",
                                                                                    "start_token": 566,
                                                                                    "end_token": 572,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "logger.error",
                                                                                            "start_token": 566,
                                                                                            "end_token": 568,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "logger",
                                                                                                    "start_token": 566,
                                                                                                    "end_token": 566,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "error",
                                                                                                    "start_token": 568,
                                                                                                    "end_token": 568,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(f\"Error creating APIKeyWithoutHash from db: {str(e)}\")",
                                                                                            "start_token": 569,
                                                                                            "end_token": 572,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Error creating APIKeyWithoutHash from db: {str(e)}\"",
                                                                                                    "start_token": 570,
                                                                                                    "end_token": 571,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "start_token": 570,
                                                                                                            "end_token": 571,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Error creating APIKeyWithoutHash from db: ",
                                                                                                            "start_token": 571,
                                                                                                            "end_token": 571,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{str(e)}",
                                                                                                            "start_token": 571,
                                                                                                            "end_token": 571,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "str(e)",
                                                                                                                    "start_token": 571,
                                                                                                                    "end_token": 571,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "str",
                                                                                                                            "start_token": 571,
                                                                                                                            "end_token": 571,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(e)",
                                                                                                                            "start_token": 571,
                                                                                                                            "end_token": 571,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "e",
                                                                                                                                    "start_token": 571,
                                                                                                                                    "end_token": 571,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 571,
                                                                                                            "end_token": 571,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "raise_statement",
                                                                            "label": "raise APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                            "start_token": 574,
                                                                            "end_token": 579,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "APIKeyError(f\"Failed to create API key object: {str(e)}\")",
                                                                                    "start_token": 575,
                                                                                    "end_token": 579,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "APIKeyError",
                                                                                            "start_token": 575,
                                                                                            "end_token": 575,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(f\"Failed to create API key object: {str(e)}\")",
                                                                                            "start_token": 576,
                                                                                            "end_token": 579,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Failed to create API key object: {str(e)}\"",
                                                                                                    "start_token": 577,
                                                                                                    "end_token": 578,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "start_token": 577,
                                                                                                            "end_token": 578,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Failed to create API key object: ",
                                                                                                            "start_token": 578,
                                                                                                            "end_token": 578,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{str(e)}",
                                                                                                            "start_token": 578,
                                                                                                            "end_token": 578,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "str(e)",
                                                                                                                    "start_token": 578,
                                                                                                                    "end_token": 578,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "str",
                                                                                                                            "start_token": 578,
                                                                                                                            "end_token": 578,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(e)",
                                                                                                                            "start_token": 578,
                                                                                                                            "end_token": 578,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "e",
                                                                                                                                    "start_token": 578,
                                                                                                                                    "end_token": 578,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 578,
                                                                                                            "end_token": 578,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def generate_api_key(\n    name: str,\n    user_id: str,\n    permissions: List[APIKeyPermission],\n    description: Optional[str] = None,\n) -> tuple[APIKeyWithoutHash, str]:\n    \"\"\"\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    \"\"\"\n    try:\n        api_manager = APIKeyManager()\n        key = api_manager.generate_api_key()\n\n        api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )\n\n        api_key_without_hash = APIKeyWithoutHash.from_db(api_key)\n        return api_key_without_hash, key.raw\n    except PrismaError as e:\n        logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
            "start_token": 583,
            "end_token": 786,
            "children": [
                {
                    "type": "identifier",
                    "label": "generate_api_key",
                    "start_token": 585,
                    "end_token": 585,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(\n    name: str,\n    user_id: str,\n    permissions: List[APIKeyPermission],\n    description: Optional[str] = None,\n)",
                    "start_token": 586,
                    "end_token": 616,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "name: str",
                            "start_token": 588,
                            "end_token": 590,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "name",
                                    "start_token": 588,
                                    "end_token": 588,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 590,
                                    "end_token": 590,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 590,
                                            "end_token": 590,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 593,
                            "end_token": 595,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 593,
                                    "end_token": 593,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 595,
                                    "end_token": 595,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 595,
                                            "end_token": 595,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "permissions: List[APIKeyPermission]",
                            "start_token": 598,
                            "end_token": 603,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "permissions",
                                    "start_token": 598,
                                    "end_token": 598,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "List[APIKeyPermission]",
                                    "start_token": 600,
                                    "end_token": 603,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "label": "List[APIKeyPermission]",
                                            "start_token": 600,
                                            "end_token": 603,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "List",
                                                    "start_token": 600,
                                                    "end_token": 600,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "label": "[APIKeyPermission]",
                                                    "start_token": 601,
                                                    "end_token": 603,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyPermission",
                                                            "start_token": 602,
                                                            "end_token": 602,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyPermission",
                                                                    "start_token": 602,
                                                                    "end_token": 602,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_default_parameter",
                            "label": "description: Optional[str] = None",
                            "start_token": 606,
                            "end_token": 613,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "description",
                                    "start_token": 606,
                                    "end_token": 606,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "Optional[str]",
                                    "start_token": 608,
                                    "end_token": 611,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "label": "Optional[str]",
                                            "start_token": 608,
                                            "end_token": 611,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Optional",
                                                    "start_token": 608,
                                                    "end_token": 608,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "label": "[str]",
                                                    "start_token": 609,
                                                    "end_token": 611,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "label": "str",
                                                            "start_token": 610,
                                                            "end_token": 610,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "str",
                                                                    "start_token": 610,
                                                                    "end_token": 610,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "none",
                                    "label": "None",
                                    "start_token": 613,
                                    "end_token": 613,
                                    "children": []
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "tuple[APIKeyWithoutHash, str]",
                    "start_token": 619,
                    "end_token": 624,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "tuple[APIKeyWithoutHash, str]",
                            "start_token": 619,
                            "end_token": 624,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "tuple",
                                    "start_token": 619,
                                    "end_token": 619,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash, str]",
                                    "start_token": 620,
                                    "end_token": 624,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 621,
                                            "end_token": 621,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 621,
                                                    "end_token": 621,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 623,
                                            "end_token": 623,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 623,
                                                    "end_token": 623,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    \"\"\"\n    try:\n        api_manager = APIKeyManager()\n        key = api_manager.generate_api_key()\n\n        api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )\n\n        api_key_without_hash = APIKeyWithoutHash.from_db(api_key)\n        return api_key_without_hash, key.raw\n    except PrismaError as e:\n        logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                    "start_token": 627,
                    "end_token": 786,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    \"\"\"",
                            "start_token": 627,
                            "end_token": 629,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    \"\"\"",
                                    "start_token": 627,
                                    "end_token": 629,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 627,
                                            "end_token": 628,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "\n    Generate a new API key and store it in the database.\n    Returns the API key object (without hash) and the plain text key.\n    ",
                                            "start_token": 628,
                                            "end_token": 628,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 628,
                                            "end_token": 629,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "try_statement",
                            "label": "try:\n        api_manager = APIKeyManager()\n        key = api_manager.generate_api_key()\n\n        api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )\n\n        api_key_without_hash = APIKeyWithoutHash.from_db(api_key)\n        return api_key_without_hash, key.raw\n    except PrismaError as e:\n        logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                            "start_token": 631,
                            "end_token": 786,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "api_manager = APIKeyManager()\n        key = api_manager.generate_api_key()\n\n        api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )\n\n        api_key_without_hash = APIKeyWithoutHash.from_db(api_key)\n        return api_key_without_hash, key.raw",
                                    "start_token": 634,
                                    "end_token": 744,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "api_manager = APIKeyManager()",
                                            "start_token": 634,
                                            "end_token": 638,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_manager = APIKeyManager()",
                                                    "start_token": 634,
                                                    "end_token": 638,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_manager",
                                                            "start_token": 634,
                                                            "end_token": 634,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyManager()",
                                                            "start_token": 636,
                                                            "end_token": 638,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyManager",
                                                                    "start_token": 636,
                                                                    "end_token": 636,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "()",
                                                                    "start_token": 637,
                                                                    "end_token": 638,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "key = api_manager.generate_api_key()",
                                            "start_token": 640,
                                            "end_token": 646,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "key = api_manager.generate_api_key()",
                                                    "start_token": 640,
                                                    "end_token": 646,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "key",
                                                            "start_token": 640,
                                                            "end_token": 640,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "api_manager.generate_api_key()",
                                                            "start_token": 642,
                                                            "end_token": 646,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "api_manager.generate_api_key",
                                                                    "start_token": 642,
                                                                    "end_token": 644,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "api_manager",
                                                                            "start_token": 642,
                                                                            "end_token": 642,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "generate_api_key",
                                                                            "start_token": 644,
                                                                            "end_token": 644,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "()",
                                                                    "start_token": 645,
                                                                    "end_token": 646,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )",
                                            "start_token": 649,
                                            "end_token": 727,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )",
                                                    "start_token": 649,
                                                    "end_token": 727,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 649,
                                                            "end_token": 649,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )",
                                                            "start_token": 651,
                                                            "end_token": 727,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().create(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )",
                                                                    "start_token": 652,
                                                                    "end_token": 727,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().create",
                                                                            "start_token": 652,
                                                                            "end_token": 658,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 652,
                                                                                    "end_token": 656,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 652,
                                                                                            "end_token": 654,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 652,
                                                                                                    "end_token": 652,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 654,
                                                                                                    "end_token": 654,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 655,
                                                                                            "end_token": 656,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "create",
                                                                                    "start_token": 658,
                                                                                    "end_token": 658,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )\n        )",
                                                                            "start_token": 659,
                                                                            "end_token": 727,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "data=APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )",
                                                                                    "start_token": 661,
                                                                                    "end_token": 725,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "data",
                                                                                            "start_token": 661,
                                                                                            "end_token": 661,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyCreateInput(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )",
                                                                                            "start_token": 663,
                                                                                            "end_token": 725,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyCreateInput",
                                                                                                    "start_token": 663,
                                                                                                    "end_token": 663,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(\n                id=str(uuid.uuid4()),\n                name=name,\n                prefix=key.prefix,\n                postfix=key.postfix,\n                key=key.hash,\n                permissions=[p for p in permissions],\n                description=description,\n                userId=user_id,\n            )",
                                                                                                    "start_token": 664,
                                                                                                    "end_token": 725,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "id=str(uuid.uuid4())",
                                                                                                            "start_token": 666,
                                                                                                            "end_token": 675,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "id",
                                                                                                                    "start_token": 666,
                                                                                                                    "end_token": 666,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "str(uuid.uuid4())",
                                                                                                                    "start_token": 668,
                                                                                                                    "end_token": 675,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "str",
                                                                                                                            "start_token": 668,
                                                                                                                            "end_token": 668,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(uuid.uuid4())",
                                                                                                                            "start_token": 669,
                                                                                                                            "end_token": 675,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "call",
                                                                                                                                    "label": "uuid.uuid4()",
                                                                                                                                    "start_token": 670,
                                                                                                                                    "end_token": 674,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "attribute",
                                                                                                                                            "label": "uuid.uuid4",
                                                                                                                                            "start_token": 670,
                                                                                                                                            "end_token": 672,
                                                                                                                                            "children": [
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "label": "uuid",
                                                                                                                                                    "start_token": 670,
                                                                                                                                                    "end_token": 670,
                                                                                                                                                    "children": []
                                                                                                                                                },
                                                                                                                                                {
                                                                                                                                                    "type": "identifier",
                                                                                                                                                    "label": "uuid4",
                                                                                                                                                    "start_token": 672,
                                                                                                                                                    "end_token": 672,
                                                                                                                                                    "children": []
                                                                                                                                                }
                                                                                                                                            ]
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "argument_list",
                                                                                                                                            "label": "()",
                                                                                                                                            "start_token": 673,
                                                                                                                                            "end_token": 674,
                                                                                                                                            "children": []
                                                                                                                                        }
                                                                                                                                    ]
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "name=name",
                                                                                                            "start_token": 678,
                                                                                                            "end_token": 680,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "name",
                                                                                                                    "start_token": 678,
                                                                                                                    "end_token": 678,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "name",
                                                                                                                    "start_token": 680,
                                                                                                                    "end_token": 680,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "prefix=key.prefix",
                                                                                                            "start_token": 683,
                                                                                                            "end_token": 687,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "prefix",
                                                                                                                    "start_token": 683,
                                                                                                                    "end_token": 683,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "key.prefix",
                                                                                                                    "start_token": 685,
                                                                                                                    "end_token": 687,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "key",
                                                                                                                            "start_token": 685,
                                                                                                                            "end_token": 685,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "prefix",
                                                                                                                            "start_token": 687,
                                                                                                                            "end_token": 687,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "postfix=key.postfix",
                                                                                                            "start_token": 690,
                                                                                                            "end_token": 694,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "postfix",
                                                                                                                    "start_token": 690,
                                                                                                                    "end_token": 690,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "key.postfix",
                                                                                                                    "start_token": 692,
                                                                                                                    "end_token": 694,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "key",
                                                                                                                            "start_token": 692,
                                                                                                                            "end_token": 692,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "postfix",
                                                                                                                            "start_token": 694,
                                                                                                                            "end_token": 694,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "key=key.hash",
                                                                                                            "start_token": 697,
                                                                                                            "end_token": 701,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "key",
                                                                                                                    "start_token": 697,
                                                                                                                    "end_token": 697,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "key.hash",
                                                                                                                    "start_token": 699,
                                                                                                                    "end_token": 701,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "key",
                                                                                                                            "start_token": 699,
                                                                                                                            "end_token": 699,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "hash",
                                                                                                                            "start_token": 701,
                                                                                                                            "end_token": 701,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "permissions=[p for p in permissions]",
                                                                                                            "start_token": 704,
                                                                                                            "end_token": 712,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "permissions",
                                                                                                                    "start_token": 704,
                                                                                                                    "end_token": 704,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "list_comprehension",
                                                                                                                    "label": "[p for p in permissions]",
                                                                                                                    "start_token": 706,
                                                                                                                    "end_token": 712,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "p",
                                                                                                                            "start_token": 707,
                                                                                                                            "end_token": 707,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "for_in_clause",
                                                                                                                            "label": "for p in permissions",
                                                                                                                            "start_token": 708,
                                                                                                                            "end_token": 711,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "p",
                                                                                                                                    "start_token": 709,
                                                                                                                                    "end_token": 709,
                                                                                                                                    "children": []
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "permissions",
                                                                                                                                    "start_token": 711,
                                                                                                                                    "end_token": 711,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "description=description",
                                                                                                            "start_token": 715,
                                                                                                            "end_token": 717,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "description",
                                                                                                                    "start_token": 715,
                                                                                                                    "end_token": 715,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "description",
                                                                                                                    "start_token": 717,
                                                                                                                    "end_token": 717,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "userId=user_id",
                                                                                                            "start_token": 720,
                                                                                                            "end_token": 722,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "userId",
                                                                                                                    "start_token": 720,
                                                                                                                    "end_token": 720,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "user_id",
                                                                                                                    "start_token": 722,
                                                                                                                    "end_token": 722,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key_without_hash = APIKeyWithoutHash.from_db(api_key)",
                                            "start_token": 730,
                                            "end_token": 737,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key_without_hash = APIKeyWithoutHash.from_db(api_key)",
                                                    "start_token": 730,
                                                    "end_token": 737,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key_without_hash",
                                                            "start_token": 730,
                                                            "end_token": 730,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyWithoutHash.from_db(api_key)",
                                                            "start_token": 732,
                                                            "end_token": 737,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "APIKeyWithoutHash.from_db",
                                                                    "start_token": 732,
                                                                    "end_token": 734,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyWithoutHash",
                                                                            "start_token": 732,
                                                                            "end_token": 732,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "from_db",
                                                                            "start_token": 734,
                                                                            "end_token": 734,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(api_key)",
                                                                    "start_token": 735,
                                                                    "end_token": 737,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "api_key",
                                                                            "start_token": 736,
                                                                            "end_token": 736,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return api_key_without_hash, key.raw",
                                            "start_token": 739,
                                            "end_token": 744,
                                            "children": [
                                                {
                                                    "type": "expression_list",
                                                    "label": "api_key_without_hash, key.raw",
                                                    "start_token": 740,
                                                    "end_token": 744,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key_without_hash",
                                                            "start_token": 740,
                                                            "end_token": 740,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "label": "key.raw",
                                                            "start_token": 742,
                                                            "end_token": 744,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "key",
                                                                    "start_token": 742,
                                                                    "end_token": 742,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "raw",
                                                                    "start_token": 744,
                                                                    "end_token": 744,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                    "start_token": 746,
                                    "end_token": 765,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 747,
                                            "end_token": 749,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 747,
                                                    "end_token": 747,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 749,
                                                    "end_token": 749,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 749,
                                                            "end_token": 749,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                            "start_token": 752,
                                            "end_token": 765,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while generating API key: {str(e)}\")",
                                                    "start_token": 752,
                                                    "end_token": 758,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while generating API key: {str(e)}\")",
                                                            "start_token": 752,
                                                            "end_token": 758,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 752,
                                                                    "end_token": 754,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 752,
                                                                            "end_token": 752,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 754,
                                                                            "end_token": 754,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while generating API key: {str(e)}\")",
                                                                    "start_token": 755,
                                                                    "end_token": 758,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while generating API key: {str(e)}\"",
                                                                            "start_token": 756,
                                                                            "end_token": 757,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 756,
                                                                                    "end_token": 757,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while generating API key: ",
                                                                                    "start_token": 757,
                                                                                    "end_token": 757,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 757,
                                                                                    "end_token": 757,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 757,
                                                                                            "end_token": 757,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 757,
                                                                                                    "end_token": 757,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 757,
                                                                                                    "end_token": 757,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 757,
                                                                                                            "end_token": 757,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 757,
                                                                                    "end_token": 757,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                                    "start_token": 760,
                                                    "end_token": 765,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                                            "start_token": 761,
                                                            "end_token": 765,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 761,
                                                                    "end_token": 761,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to generate API key: {str(e)}\")",
                                                                    "start_token": 762,
                                                                    "end_token": 765,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to generate API key: {str(e)}\"",
                                                                            "start_token": 763,
                                                                            "end_token": 764,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 763,
                                                                                    "end_token": 764,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to generate API key: ",
                                                                                    "start_token": 764,
                                                                                    "end_token": 764,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 764,
                                                                                    "end_token": 764,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 764,
                                                                                            "end_token": 764,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 764,
                                                                                                    "end_token": 764,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 764,
                                                                                                    "end_token": 764,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 764,
                                                                                                            "end_token": 764,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 764,
                                                                                    "end_token": 764,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                    "start_token": 767,
                                    "end_token": 786,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 768,
                                            "end_token": 770,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 768,
                                                    "end_token": 768,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 770,
                                                    "end_token": 770,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 770,
                                                            "end_token": 770,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while generating API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                            "start_token": 773,
                                            "end_token": 786,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while generating API key: {str(e)}\")",
                                                    "start_token": 773,
                                                    "end_token": 779,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while generating API key: {str(e)}\")",
                                                            "start_token": 773,
                                                            "end_token": 779,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 773,
                                                                    "end_token": 775,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 773,
                                                                            "end_token": 773,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 775,
                                                                            "end_token": 775,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while generating API key: {str(e)}\")",
                                                                    "start_token": 776,
                                                                    "end_token": 779,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while generating API key: {str(e)}\"",
                                                                            "start_token": 777,
                                                                            "end_token": 778,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 777,
                                                                                    "end_token": 778,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while generating API key: ",
                                                                                    "start_token": 778,
                                                                                    "end_token": 778,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 778,
                                                                                    "end_token": 778,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 778,
                                                                                            "end_token": 778,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 778,
                                                                                                    "end_token": 778,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 778,
                                                                                                    "end_token": 778,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 778,
                                                                                                            "end_token": 778,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 778,
                                                                                    "end_token": 778,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                                    "start_token": 781,
                                                    "end_token": 786,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to generate API key: {str(e)}\")",
                                                            "start_token": 782,
                                                            "end_token": 786,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 782,
                                                                    "end_token": 782,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to generate API key: {str(e)}\")",
                                                                    "start_token": 783,
                                                                    "end_token": 786,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to generate API key: {str(e)}\"",
                                                                            "start_token": 784,
                                                                            "end_token": 785,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 784,
                                                                                    "end_token": 785,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to generate API key: ",
                                                                                    "start_token": 785,
                                                                                    "end_token": 785,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 785,
                                                                                    "end_token": 785,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 785,
                                                                                            "end_token": 785,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 785,
                                                                                                    "end_token": 785,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 785,
                                                                                                    "end_token": 785,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 785,
                                                                                                            "end_token": 785,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 785,
                                                                                    "end_token": 785,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def validate_api_key(plain_text_key: str) -> Optional[APIKey]:\n    \"\"\"\n    Validate an API key and return the API key object if valid.\n    \"\"\"\n    try:\n        if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None\n\n        prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]\n        api_manager = APIKeyManager()\n\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )\n\n        if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None\n\n        is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)\n        if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None\n\n        return APIKey.from_db(api_key)\n    except Exception as e:\n        logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
            "start_token": 790,
            "end_token": 958,
            "children": [
                {
                    "type": "identifier",
                    "label": "validate_api_key",
                    "start_token": 792,
                    "end_token": 792,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(plain_text_key: str)",
                    "start_token": 793,
                    "end_token": 797,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "plain_text_key: str",
                            "start_token": 794,
                            "end_token": 796,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "plain_text_key",
                                    "start_token": 794,
                                    "end_token": 794,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 796,
                                    "end_token": 796,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 796,
                                            "end_token": 796,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "Optional[APIKey]",
                    "start_token": 800,
                    "end_token": 803,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "Optional[APIKey]",
                            "start_token": 800,
                            "end_token": 803,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "Optional",
                                    "start_token": 800,
                                    "end_token": 800,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKey]",
                                    "start_token": 801,
                                    "end_token": 803,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKey",
                                            "start_token": 802,
                                            "end_token": 802,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKey",
                                                    "start_token": 802,
                                                    "end_token": 802,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"\n    Validate an API key and return the API key object if valid.\n    \"\"\"\n    try:\n        if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None\n\n        prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]\n        api_manager = APIKeyManager()\n\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )\n\n        if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None\n\n        is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)\n        if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None\n\n        return APIKey.from_db(api_key)\n    except Exception as e:\n        logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                    "start_token": 806,
                    "end_token": 958,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"\n    Validate an API key and return the API key object if valid.\n    \"\"\"",
                            "start_token": 806,
                            "end_token": 808,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"\n    Validate an API key and return the API key object if valid.\n    \"\"\"",
                                    "start_token": 806,
                                    "end_token": 808,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 806,
                                            "end_token": 807,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "\n    Validate an API key and return the API key object if valid.\n    ",
                                            "start_token": 807,
                                            "end_token": 807,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 807,
                                            "end_token": 808,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "try_statement",
                            "label": "try:\n        if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None\n\n        prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]\n        api_manager = APIKeyManager()\n\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )\n\n        if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None\n\n        is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)\n        if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None\n\n        return APIKey.from_db(api_key)\n    except Exception as e:\n        logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                            "start_token": 810,
                            "end_token": 958,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None\n\n        prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]\n        api_manager = APIKeyManager()\n\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )\n\n        if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None\n\n        is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)\n        if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None\n\n        return APIKey.from_db(api_key)",
                                    "start_token": 813,
                                    "end_token": 937,
                                    "children": [
                                        {
                                            "type": "if_statement",
                                            "label": "if not plain_text_key.startswith(APIKeyManager.PREFIX):\n            logger.warning(\"Invalid API key format\")\n            return None",
                                            "start_token": 813,
                                            "end_token": 833,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not plain_text_key.startswith(APIKeyManager.PREFIX)",
                                                    "start_token": 814,
                                                    "end_token": 822,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "plain_text_key.startswith(APIKeyManager.PREFIX)",
                                                            "start_token": 815,
                                                            "end_token": 822,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "plain_text_key.startswith",
                                                                    "start_token": 815,
                                                                    "end_token": 817,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "plain_text_key",
                                                                            "start_token": 815,
                                                                            "end_token": 815,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "startswith",
                                                                            "start_token": 817,
                                                                            "end_token": 817,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(APIKeyManager.PREFIX)",
                                                                    "start_token": 818,
                                                                    "end_token": 822,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "APIKeyManager.PREFIX",
                                                                            "start_token": 819,
                                                                            "end_token": 821,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyManager",
                                                                                    "start_token": 819,
                                                                                    "end_token": 819,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "PREFIX",
                                                                                    "start_token": 821,
                                                                                    "end_token": 821,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.warning(\"Invalid API key format\")\n            return None",
                                                    "start_token": 825,
                                                    "end_token": 833,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.warning(\"Invalid API key format\")",
                                                            "start_token": 825,
                                                            "end_token": 830,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.warning(\"Invalid API key format\")",
                                                                    "start_token": 825,
                                                                    "end_token": 830,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.warning",
                                                                            "start_token": 825,
                                                                            "end_token": 827,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 825,
                                                                                    "end_token": 825,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "warning",
                                                                                    "start_token": 827,
                                                                                    "end_token": 827,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Invalid API key format\")",
                                                                            "start_token": 828,
                                                                            "end_token": 830,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Invalid API key format\"",
                                                                                    "start_token": 829,
                                                                                    "end_token": 829,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 829,
                                                                                            "end_token": 829,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Invalid API key format",
                                                                                            "start_token": 829,
                                                                                            "end_token": 829,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 829,
                                                                                            "end_token": 829,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return None",
                                                            "start_token": 832,
                                                            "end_token": 833,
                                                            "children": [
                                                                {
                                                                    "type": "none",
                                                                    "label": "None",
                                                                    "start_token": 833,
                                                                    "end_token": 833,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]",
                                            "start_token": 836,
                                            "end_token": 844,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "prefix = plain_text_key[: APIKeyManager.PREFIX_LENGTH]",
                                                    "start_token": 836,
                                                    "end_token": 844,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "prefix",
                                                            "start_token": 836,
                                                            "end_token": 836,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "subscript",
                                                            "label": "plain_text_key[: APIKeyManager.PREFIX_LENGTH]",
                                                            "start_token": 838,
                                                            "end_token": 844,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "plain_text_key",
                                                                    "start_token": 838,
                                                                    "end_token": 838,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "slice",
                                                                    "label": ": APIKeyManager.PREFIX_LENGTH",
                                                                    "start_token": 840,
                                                                    "end_token": 843,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "APIKeyManager.PREFIX_LENGTH",
                                                                            "start_token": 841,
                                                                            "end_token": 843,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyManager",
                                                                                    "start_token": 841,
                                                                                    "end_token": 841,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "PREFIX_LENGTH",
                                                                                    "start_token": 843,
                                                                                    "end_token": 843,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "api_manager = APIKeyManager()",
                                            "start_token": 846,
                                            "end_token": 850,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_manager = APIKeyManager()",
                                                    "start_token": 846,
                                                    "end_token": 850,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_manager",
                                                            "start_token": 846,
                                                            "end_token": 846,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyManager()",
                                                            "start_token": 848,
                                                            "end_token": 850,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyManager",
                                                                    "start_token": 848,
                                                                    "end_token": 848,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "()",
                                                                    "start_token": 849,
                                                                    "end_token": 850,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )",
                                            "start_token": 853,
                                            "end_token": 882,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )",
                                                    "start_token": 853,
                                                    "end_token": 882,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 853,
                                                            "end_token": 853,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )",
                                                            "start_token": 855,
                                                            "end_token": 882,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )",
                                                                    "start_token": 856,
                                                                    "end_token": 882,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_first",
                                                                            "start_token": 856,
                                                                            "end_token": 862,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 856,
                                                                                    "end_token": 860,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 856,
                                                                                            "end_token": 858,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 856,
                                                                                                    "end_token": 856,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 858,
                                                                                                    "end_token": 858,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 859,
                                                                                            "end_token": 860,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_first",
                                                                                    "start_token": 862,
                                                                                    "end_token": 862,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))\n        )",
                                                                            "start_token": 863,
                                                                            "end_token": 882,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))",
                                                                                    "start_token": 865,
                                                                                    "end_token": 880,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 865,
                                                                                            "end_token": 865,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyWhereInput(prefix=prefix, status=(APIKeyStatus.ACTIVE))",
                                                                                            "start_token": 867,
                                                                                            "end_token": 880,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyWhereInput",
                                                                                                    "start_token": 867,
                                                                                                    "end_token": 867,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(prefix=prefix, status=(APIKeyStatus.ACTIVE))",
                                                                                                    "start_token": 868,
                                                                                                    "end_token": 880,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "prefix=prefix",
                                                                                                            "start_token": 869,
                                                                                                            "end_token": 871,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "prefix",
                                                                                                                    "start_token": 869,
                                                                                                                    "end_token": 869,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "prefix",
                                                                                                                    "start_token": 871,
                                                                                                                    "end_token": 871,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "status=(APIKeyStatus.ACTIVE)",
                                                                                                            "start_token": 873,
                                                                                                            "end_token": 879,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "status",
                                                                                                                    "start_token": 873,
                                                                                                                    "end_token": 873,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "parenthesized_expression",
                                                                                                                    "label": "(APIKeyStatus.ACTIVE)",
                                                                                                                    "start_token": 875,
                                                                                                                    "end_token": 879,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "label": "APIKeyStatus.ACTIVE",
                                                                                                                            "start_token": 876,
                                                                                                                            "end_token": 878,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "APIKeyStatus",
                                                                                                                                    "start_token": 876,
                                                                                                                                    "end_token": 876,
                                                                                                                                    "children": []
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "ACTIVE",
                                                                                                                                    "start_token": 878,
                                                                                                                                    "end_token": 878,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if not api_key:\n            logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None",
                                            "start_token": 885,
                                            "end_token": 899,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not api_key",
                                                    "start_token": 886,
                                                    "end_token": 887,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 887,
                                                            "end_token": 887,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.warning(f\"No active API key found with prefix {prefix}\")\n            return None",
                                                    "start_token": 890,
                                                    "end_token": 899,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.warning(f\"No active API key found with prefix {prefix}\")",
                                                            "start_token": 890,
                                                            "end_token": 896,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.warning(f\"No active API key found with prefix {prefix}\")",
                                                                    "start_token": 890,
                                                                    "end_token": 896,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.warning",
                                                                            "start_token": 890,
                                                                            "end_token": 892,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 890,
                                                                                    "end_token": 890,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "warning",
                                                                                    "start_token": 892,
                                                                                    "end_token": 892,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"No active API key found with prefix {prefix}\")",
                                                                            "start_token": 893,
                                                                            "end_token": 896,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"No active API key found with prefix {prefix}\"",
                                                                                    "start_token": 894,
                                                                                    "end_token": 895,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 894,
                                                                                            "end_token": 895,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "No active API key found with prefix ",
                                                                                            "start_token": 895,
                                                                                            "end_token": 895,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{prefix}",
                                                                                            "start_token": 895,
                                                                                            "end_token": 895,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prefix",
                                                                                                    "start_token": 895,
                                                                                                    "end_token": 895,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 895,
                                                                                            "end_token": 895,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return None",
                                                            "start_token": 898,
                                                            "end_token": 899,
                                                            "children": [
                                                                {
                                                                    "type": "none",
                                                                    "label": "None",
                                                                    "start_token": 899,
                                                                    "end_token": 899,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)",
                                            "start_token": 902,
                                            "end_token": 913,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "is_valid = api_manager.verify_api_key(plain_text_key, api_key.key)",
                                                    "start_token": 902,
                                                    "end_token": 913,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "is_valid",
                                                            "start_token": 902,
                                                            "end_token": 902,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "api_manager.verify_api_key(plain_text_key, api_key.key)",
                                                            "start_token": 904,
                                                            "end_token": 913,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "api_manager.verify_api_key",
                                                                    "start_token": 904,
                                                                    "end_token": 906,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "api_manager",
                                                                            "start_token": 904,
                                                                            "end_token": 904,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "verify_api_key",
                                                                            "start_token": 906,
                                                                            "end_token": 906,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(plain_text_key, api_key.key)",
                                                                    "start_token": 907,
                                                                    "end_token": 913,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "plain_text_key",
                                                                            "start_token": 908,
                                                                            "end_token": 908,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "api_key.key",
                                                                            "start_token": 910,
                                                                            "end_token": 912,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "api_key",
                                                                                    "start_token": 910,
                                                                                    "end_token": 910,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "key",
                                                                                    "start_token": 912,
                                                                                    "end_token": 912,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if not is_valid:\n            logger.warning(\"API key verification failed\")\n            return None",
                                            "start_token": 915,
                                            "end_token": 928,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not is_valid",
                                                    "start_token": 916,
                                                    "end_token": 917,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "is_valid",
                                                            "start_token": 917,
                                                            "end_token": 917,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.warning(\"API key verification failed\")\n            return None",
                                                    "start_token": 920,
                                                    "end_token": 928,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.warning(\"API key verification failed\")",
                                                            "start_token": 920,
                                                            "end_token": 925,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.warning(\"API key verification failed\")",
                                                                    "start_token": 920,
                                                                    "end_token": 925,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.warning",
                                                                            "start_token": 920,
                                                                            "end_token": 922,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 920,
                                                                                    "end_token": 920,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "warning",
                                                                                    "start_token": 922,
                                                                                    "end_token": 922,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"API key verification failed\")",
                                                                            "start_token": 923,
                                                                            "end_token": 925,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"API key verification failed\"",
                                                                                    "start_token": 924,
                                                                                    "end_token": 924,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 924,
                                                                                            "end_token": 924,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "API key verification failed",
                                                                                            "start_token": 924,
                                                                                            "end_token": 924,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 924,
                                                                                            "end_token": 924,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return None",
                                                            "start_token": 927,
                                                            "end_token": 928,
                                                            "children": [
                                                                {
                                                                    "type": "none",
                                                                    "label": "None",
                                                                    "start_token": 928,
                                                                    "end_token": 928,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return APIKey.from_db(api_key)",
                                            "start_token": 931,
                                            "end_token": 937,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "label": "APIKey.from_db(api_key)",
                                                    "start_token": 932,
                                                    "end_token": 937,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "APIKey.from_db",
                                                            "start_token": 932,
                                                            "end_token": 934,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKey",
                                                                    "start_token": 932,
                                                                    "end_token": 932,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "from_db",
                                                                    "start_token": 934,
                                                                    "end_token": 934,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "label": "(api_key)",
                                                            "start_token": 935,
                                                            "end_token": 937,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 936,
                                                                    "end_token": 936,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                                    "start_token": 939,
                                    "end_token": 958,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 940,
                                            "end_token": 942,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 940,
                                                    "end_token": 940,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 942,
                                                    "end_token": 942,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 942,
                                                            "end_token": 942,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Error validating API key: {str(e)}\")\n        raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                                            "start_token": 945,
                                            "end_token": 958,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Error validating API key: {str(e)}\")",
                                                    "start_token": 945,
                                                    "end_token": 951,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Error validating API key: {str(e)}\")",
                                                            "start_token": 945,
                                                            "end_token": 951,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 945,
                                                                    "end_token": 947,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 945,
                                                                            "end_token": 945,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 947,
                                                                            "end_token": 947,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Error validating API key: {str(e)}\")",
                                                                    "start_token": 948,
                                                                    "end_token": 951,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Error validating API key: {str(e)}\"",
                                                                            "start_token": 949,
                                                                            "end_token": 950,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 949,
                                                                                    "end_token": 950,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Error validating API key: ",
                                                                                    "start_token": 950,
                                                                                    "end_token": 950,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 950,
                                                                                    "end_token": 950,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 950,
                                                                                            "end_token": 950,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 950,
                                                                                                    "end_token": 950,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 950,
                                                                                                    "end_token": 950,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 950,
                                                                                                            "end_token": 950,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 950,
                                                                                    "end_token": 950,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                                                    "start_token": 953,
                                                    "end_token": 958,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyValidationError(f\"Failed to validate API key: {str(e)}\")",
                                                            "start_token": 954,
                                                            "end_token": 958,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyValidationError",
                                                                    "start_token": 954,
                                                                    "end_token": 954,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to validate API key: {str(e)}\")",
                                                                    "start_token": 955,
                                                                    "end_token": 958,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to validate API key: {str(e)}\"",
                                                                            "start_token": 956,
                                                                            "end_token": 957,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 956,
                                                                                    "end_token": 957,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to validate API key: ",
                                                                                    "start_token": 957,
                                                                                    "end_token": 957,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 957,
                                                                                    "end_token": 957,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 957,
                                                                                            "end_token": 957,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 957,
                                                                                                    "end_token": 957,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 957,
                                                                                                    "end_token": 957,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 957,
                                                                                                            "end_token": 957,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 957,
                                                                                    "end_token": 957,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def revoke_api_key(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
            "start_token": 962,
            "end_token": 1160,
            "children": [
                {
                    "type": "identifier",
                    "label": "revoke_api_key",
                    "start_token": 964,
                    "end_token": 964,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(key_id: str, user_id: str)",
                    "start_token": 965,
                    "end_token": 973,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "key_id: str",
                            "start_token": 966,
                            "end_token": 968,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "key_id",
                                    "start_token": 966,
                                    "end_token": 966,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 968,
                                    "end_token": 968,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 968,
                                            "end_token": 968,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 970,
                            "end_token": 972,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 970,
                                    "end_token": 970,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 972,
                                    "end_token": 972,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 972,
                                            "end_token": 972,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "Optional[APIKeyWithoutHash]",
                    "start_token": 976,
                    "end_token": 979,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "Optional[APIKeyWithoutHash]",
                            "start_token": 976,
                            "end_token": 979,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "Optional",
                                    "start_token": 976,
                                    "end_token": 976,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash]",
                                    "start_token": 977,
                                    "end_token": 979,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 978,
                                            "end_token": 978,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 978,
                                                    "end_token": 978,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                    "start_token": 982,
                    "end_token": 1160,
                    "children": [
                        {
                            "type": "try_statement",
                            "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                            "start_token": 982,
                            "end_token": 1160,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None",
                                    "start_token": 985,
                                    "end_token": 1105,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                            "start_token": 985,
                                            "end_token": 1003,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                    "start_token": 985,
                                                    "end_token": 1003,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 985,
                                                            "end_token": 985,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                            "start_token": 987,
                                                            "end_token": 1003,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                                    "start_token": 988,
                                                                    "end_token": 1003,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_unique",
                                                                            "start_token": 988,
                                                                            "end_token": 994,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 988,
                                                                                    "end_token": 992,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 988,
                                                                                            "end_token": 990,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 988,
                                                                                                    "end_token": 988,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 990,
                                                                                                    "end_token": 990,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 991,
                                                                                            "end_token": 992,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_unique",
                                                                                    "start_token": 994,
                                                                                    "end_token": 994,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(where={\"id\": key_id})",
                                                                            "start_token": 995,
                                                                            "end_token": 1003,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where={\"id\": key_id}",
                                                                                    "start_token": 996,
                                                                                    "end_token": 1002,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 996,
                                                                                            "end_token": 996,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"id\": key_id}",
                                                                                            "start_token": 998,
                                                                                            "end_token": 1002,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"id\": key_id",
                                                                                                    "start_token": 999,
                                                                                                    "end_token": 1001,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"id\"",
                                                                                                            "start_token": 999,
                                                                                                            "end_token": 999,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 999,
                                                                                                                    "end_token": 999,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "id",
                                                                                                                    "start_token": 999,
                                                                                                                    "end_token": 999,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 999,
                                                                                                                    "end_token": 999,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "key_id",
                                                                                                            "start_token": 1001,
                                                                                                            "end_token": 1001,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                            "start_token": 1006,
                                            "end_token": 1016,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not api_key",
                                                    "start_token": 1007,
                                                    "end_token": 1008,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1008,
                                                            "end_token": 1008,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                    "start_token": 1011,
                                                    "end_token": 1016,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                            "start_token": 1011,
                                                            "end_token": 1016,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                                    "start_token": 1012,
                                                                    "end_token": 1016,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyNotFoundError",
                                                                            "start_token": 1012,
                                                                            "end_token": 1012,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"API key with id {key_id} not found\")",
                                                                            "start_token": 1013,
                                                                            "end_token": 1016,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"API key with id {key_id} not found\"",
                                                                                    "start_token": 1014,
                                                                                    "end_token": 1015,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 1014,
                                                                                            "end_token": 1015,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "API key with id ",
                                                                                            "start_token": 1015,
                                                                                            "end_token": 1015,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{key_id}",
                                                                                            "start_token": 1015,
                                                                                            "end_token": 1015,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "key_id",
                                                                                                    "start_token": 1015,
                                                                                                    "end_token": 1015,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": " not found",
                                                                                            "start_token": 1015,
                                                                                            "end_token": 1015,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1015,
                                                                                            "end_token": 1015,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )",
                                            "start_token": 1019,
                                            "end_token": 1034,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "api_key.userId != user_id",
                                                    "start_token": 1020,
                                                    "end_token": 1025,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "api_key.userId",
                                                            "start_token": 1020,
                                                            "end_token": 1022,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 1020,
                                                                    "end_token": 1020,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "userId",
                                                                    "start_token": 1022,
                                                                    "end_token": 1022,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "user_id",
                                                            "start_token": 1025,
                                                            "end_token": 1025,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )",
                                                    "start_token": 1028,
                                                    "end_token": 1034,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )",
                                                            "start_token": 1028,
                                                            "end_token": 1034,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyPermissionError(\n                \"You do not have permission to revoke this API key.\"\n            )",
                                                                    "start_token": 1029,
                                                                    "end_token": 1034,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyPermissionError",
                                                                            "start_token": 1029,
                                                                            "end_token": 1029,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n                \"You do not have permission to revoke this API key.\"\n            )",
                                                                            "start_token": 1030,
                                                                            "end_token": 1034,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"You do not have permission to revoke this API key.\"",
                                                                                    "start_token": 1032,
                                                                                    "end_token": 1032,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1032,
                                                                                            "end_token": 1032,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "You do not have permission to revoke this API key.",
                                                                                            "start_token": 1032,
                                                                                            "end_token": 1032,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1032,
                                                                                            "end_token": 1032,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                            "start_token": 1037,
                                            "end_token": 1045,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                                    "start_token": 1037,
                                                    "end_token": 1045,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "where_clause",
                                                            "start_token": 1037,
                                                            "end_token": 1037,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyWhereUniqueInput",
                                                            "start_token": 1039,
                                                            "end_token": 1039,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyWhereUniqueInput",
                                                                    "start_token": 1039,
                                                                    "end_token": 1039,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\"id\": key_id}",
                                                            "start_token": 1041,
                                                            "end_token": 1045,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"id\": key_id",
                                                                    "start_token": 1042,
                                                                    "end_token": 1044,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"id\"",
                                                                            "start_token": 1042,
                                                                            "end_token": 1042,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 1042,
                                                                                    "end_token": 1042,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "id",
                                                                                    "start_token": 1042,
                                                                                    "end_token": 1042,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1042,
                                                                                    "end_token": 1042,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "key_id",
                                                                            "start_token": 1044,
                                                                            "end_token": 1044,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )",
                                            "start_token": 1047,
                                            "end_token": 1089,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )",
                                                    "start_token": 1047,
                                                    "end_token": 1089,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "updated_api_key",
                                                            "start_token": 1047,
                                                            "end_token": 1047,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )",
                                                            "start_token": 1049,
                                                            "end_token": 1089,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )",
                                                                    "start_token": 1050,
                                                                    "end_token": 1089,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().update",
                                                                            "start_token": 1050,
                                                                            "end_token": 1056,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1050,
                                                                                    "end_token": 1054,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1050,
                                                                                            "end_token": 1052,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1050,
                                                                                                    "end_token": 1050,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1052,
                                                                                                    "end_token": 1052,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1053,
                                                                                            "end_token": 1054,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "update",
                                                                                    "start_token": 1056,
                                                                                    "end_token": 1056,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=where_clause,\n            data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            ),\n        )",
                                                                            "start_token": 1057,
                                                                            "end_token": 1089,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=where_clause",
                                                                                    "start_token": 1059,
                                                                                    "end_token": 1061,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1059,
                                                                                            "end_token": 1059,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where_clause",
                                                                                            "start_token": 1061,
                                                                                            "end_token": 1061,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "data=APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            )",
                                                                                    "start_token": 1064,
                                                                                    "end_token": 1086,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "data",
                                                                                            "start_token": 1064,
                                                                                            "end_token": 1064,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyUpdateInput(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            )",
                                                                                            "start_token": 1066,
                                                                                            "end_token": 1086,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyUpdateInput",
                                                                                                    "start_token": 1066,
                                                                                                    "end_token": 1066,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(\n                status=APIKeyStatus.REVOKED, revokedAt=datetime.now(timezone.utc)\n            )",
                                                                                                    "start_token": 1067,
                                                                                                    "end_token": 1086,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "status=APIKeyStatus.REVOKED",
                                                                                                            "start_token": 1069,
                                                                                                            "end_token": 1073,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "status",
                                                                                                                    "start_token": 1069,
                                                                                                                    "end_token": 1069,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "APIKeyStatus.REVOKED",
                                                                                                                    "start_token": 1071,
                                                                                                                    "end_token": 1073,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "APIKeyStatus",
                                                                                                                            "start_token": 1071,
                                                                                                                            "end_token": 1071,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "REVOKED",
                                                                                                                            "start_token": 1073,
                                                                                                                            "end_token": 1073,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "revokedAt=datetime.now(timezone.utc)",
                                                                                                            "start_token": 1075,
                                                                                                            "end_token": 1084,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "revokedAt",
                                                                                                                    "start_token": 1075,
                                                                                                                    "end_token": 1075,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "call",
                                                                                                                    "label": "datetime.now(timezone.utc)",
                                                                                                                    "start_token": 1077,
                                                                                                                    "end_token": 1084,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "attribute",
                                                                                                                            "label": "datetime.now",
                                                                                                                            "start_token": 1077,
                                                                                                                            "end_token": 1079,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "datetime",
                                                                                                                                    "start_token": 1077,
                                                                                                                                    "end_token": 1077,
                                                                                                                                    "children": []
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type": "identifier",
                                                                                                                                    "label": "now",
                                                                                                                                    "start_token": 1079,
                                                                                                                                    "end_token": 1079,
                                                                                                                                    "children": []
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "argument_list",
                                                                                                                            "label": "(timezone.utc)",
                                                                                                                            "start_token": 1080,
                                                                                                                            "end_token": 1084,
                                                                                                                            "children": [
                                                                                                                                {
                                                                                                                                    "type": "attribute",
                                                                                                                                    "label": "timezone.utc",
                                                                                                                                    "start_token": 1081,
                                                                                                                                    "end_token": 1083,
                                                                                                                                    "children": [
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "label": "timezone",
                                                                                                                                            "start_token": 1081,
                                                                                                                                            "end_token": 1081,
                                                                                                                                            "children": []
                                                                                                                                        },
                                                                                                                                        {
                                                                                                                                            "type": "identifier",
                                                                                                                                            "label": "utc",
                                                                                                                                            "start_token": 1083,
                                                                                                                                            "end_token": 1083,
                                                                                                                                            "children": []
                                                                                                                                        }
                                                                                                                                    ]
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)",
                                            "start_token": 1092,
                                            "end_token": 1102,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "updated_api_key",
                                                    "start_token": 1093,
                                                    "end_token": 1093,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                    "start_token": 1096,
                                                    "end_token": 1102,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                            "start_token": 1096,
                                                            "end_token": 1102,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyWithoutHash.from_db(updated_api_key)",
                                                                    "start_token": 1097,
                                                                    "end_token": 1102,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "APIKeyWithoutHash.from_db",
                                                                            "start_token": 1097,
                                                                            "end_token": 1099,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyWithoutHash",
                                                                                    "start_token": 1097,
                                                                                    "end_token": 1097,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "from_db",
                                                                                    "start_token": 1099,
                                                                                    "end_token": 1099,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(updated_api_key)",
                                                                            "start_token": 1100,
                                                                            "end_token": 1102,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "updated_api_key",
                                                                                    "start_token": 1101,
                                                                                    "end_token": 1101,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return None",
                                            "start_token": 1104,
                                            "end_token": 1105,
                                            "children": [
                                                {
                                                    "type": "none",
                                                    "label": "None",
                                                    "start_token": 1105,
                                                    "end_token": 1105,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e",
                                    "start_token": 1107,
                                    "end_token": 1118,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "(APIKeyNotFoundError, APIKeyPermissionError) as e",
                                            "start_token": 1108,
                                            "end_token": 1114,
                                            "children": [
                                                {
                                                    "type": "tuple",
                                                    "label": "(APIKeyNotFoundError, APIKeyPermissionError)",
                                                    "start_token": 1108,
                                                    "end_token": 1112,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyNotFoundError",
                                                            "start_token": 1109,
                                                            "end_token": 1109,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyPermissionError",
                                                            "start_token": 1111,
                                                            "end_token": 1111,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1114,
                                                    "end_token": 1114,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1114,
                                                            "end_token": 1114,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise e",
                                            "start_token": 1117,
                                            "end_token": 1118,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise e",
                                                    "start_token": 1117,
                                                    "end_token": 1118,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1118,
                                                            "end_token": 1118,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                    "start_token": 1120,
                                    "end_token": 1139,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 1121,
                                            "end_token": 1123,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 1121,
                                                    "end_token": 1121,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1123,
                                                    "end_token": 1123,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1123,
                                                            "end_token": 1123,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                            "start_token": 1126,
                                            "end_token": 1139,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while revoking API key: {str(e)}\")",
                                                    "start_token": 1126,
                                                    "end_token": 1132,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while revoking API key: {str(e)}\")",
                                                            "start_token": 1126,
                                                            "end_token": 1132,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1126,
                                                                    "end_token": 1128,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1126,
                                                                            "end_token": 1126,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1128,
                                                                            "end_token": 1128,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while revoking API key: {str(e)}\")",
                                                                    "start_token": 1129,
                                                                    "end_token": 1132,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while revoking API key: {str(e)}\"",
                                                                            "start_token": 1130,
                                                                            "end_token": 1131,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1130,
                                                                                    "end_token": 1131,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while revoking API key: ",
                                                                                    "start_token": 1131,
                                                                                    "end_token": 1131,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1131,
                                                                                    "end_token": 1131,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1131,
                                                                                            "end_token": 1131,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1131,
                                                                                                    "end_token": 1131,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1131,
                                                                                                    "end_token": 1131,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1131,
                                                                                                            "end_token": 1131,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1131,
                                                                                    "end_token": 1131,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                                    "start_token": 1134,
                                                    "end_token": 1139,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                                            "start_token": 1135,
                                                            "end_token": 1139,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1135,
                                                                    "end_token": 1135,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to revoke API key: {str(e)}\")",
                                                                    "start_token": 1136,
                                                                    "end_token": 1139,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to revoke API key: {str(e)}\"",
                                                                            "start_token": 1137,
                                                                            "end_token": 1138,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1137,
                                                                                    "end_token": 1138,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to revoke API key: ",
                                                                                    "start_token": 1138,
                                                                                    "end_token": 1138,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1138,
                                                                                    "end_token": 1138,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1138,
                                                                                            "end_token": 1138,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1138,
                                                                                                    "end_token": 1138,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1138,
                                                                                                    "end_token": 1138,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1138,
                                                                                                            "end_token": 1138,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1138,
                                                                                    "end_token": 1138,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                    "start_token": 1141,
                                    "end_token": 1160,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1142,
                                            "end_token": 1144,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1142,
                                                    "end_token": 1142,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1144,
                                                    "end_token": 1144,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1144,
                                                            "end_token": 1144,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while revoking API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                            "start_token": 1147,
                                            "end_token": 1160,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while revoking API key: {str(e)}\")",
                                                    "start_token": 1147,
                                                    "end_token": 1153,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while revoking API key: {str(e)}\")",
                                                            "start_token": 1147,
                                                            "end_token": 1153,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1147,
                                                                    "end_token": 1149,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1147,
                                                                            "end_token": 1147,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1149,
                                                                            "end_token": 1149,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while revoking API key: {str(e)}\")",
                                                                    "start_token": 1150,
                                                                    "end_token": 1153,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while revoking API key: {str(e)}\"",
                                                                            "start_token": 1151,
                                                                            "end_token": 1152,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1151,
                                                                                    "end_token": 1152,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while revoking API key: ",
                                                                                    "start_token": 1152,
                                                                                    "end_token": 1152,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1152,
                                                                                    "end_token": 1152,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1152,
                                                                                            "end_token": 1152,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1152,
                                                                                                    "end_token": 1152,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1152,
                                                                                                    "end_token": 1152,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1152,
                                                                                                            "end_token": 1152,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1152,
                                                                                    "end_token": 1152,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                                    "start_token": 1155,
                                                    "end_token": 1160,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to revoke API key: {str(e)}\")",
                                                            "start_token": 1156,
                                                            "end_token": 1160,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1156,
                                                                    "end_token": 1156,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to revoke API key: {str(e)}\")",
                                                                    "start_token": 1157,
                                                                    "end_token": 1160,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to revoke API key: {str(e)}\"",
                                                                            "start_token": 1158,
                                                                            "end_token": 1159,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1158,
                                                                                    "end_token": 1159,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to revoke API key: ",
                                                                                    "start_token": 1159,
                                                                                    "end_token": 1159,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1159,
                                                                                    "end_token": 1159,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1159,
                                                                                            "end_token": 1159,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1159,
                                                                                                    "end_token": 1159,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1159,
                                                                                                    "end_token": 1159,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1159,
                                                                                                            "end_token": 1159,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1159,
                                                                                    "end_token": 1159,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def list_user_api_keys(user_id: str) -> List[APIKeyWithoutHash]:\n    try:\n        where_clause: APIKeyWhereInput = {\"userId\": user_id}\n\n        api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )\n\n        return [APIKeyWithoutHash.from_db(key) for key in api_keys]\n    except PrismaError as e:\n        logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
            "start_token": 1164,
            "end_token": 1275,
            "children": [
                {
                    "type": "identifier",
                    "label": "list_user_api_keys",
                    "start_token": 1166,
                    "end_token": 1166,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(user_id: str)",
                    "start_token": 1167,
                    "end_token": 1171,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 1168,
                            "end_token": 1170,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 1168,
                                    "end_token": 1168,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1170,
                                    "end_token": 1170,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1170,
                                            "end_token": 1170,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "List[APIKeyWithoutHash]",
                    "start_token": 1174,
                    "end_token": 1177,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "List[APIKeyWithoutHash]",
                            "start_token": 1174,
                            "end_token": 1177,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "List",
                                    "start_token": 1174,
                                    "end_token": 1174,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash]",
                                    "start_token": 1175,
                                    "end_token": 1177,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 1176,
                                            "end_token": 1176,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 1176,
                                                    "end_token": 1176,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "try:\n        where_clause: APIKeyWhereInput = {\"userId\": user_id}\n\n        api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )\n\n        return [APIKeyWithoutHash.from_db(key) for key in api_keys]\n    except PrismaError as e:\n        logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                    "start_token": 1180,
                    "end_token": 1275,
                    "children": [
                        {
                            "type": "try_statement",
                            "label": "try:\n        where_clause: APIKeyWhereInput = {\"userId\": user_id}\n\n        api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )\n\n        return [APIKeyWithoutHash.from_db(key) for key in api_keys]\n    except PrismaError as e:\n        logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                            "start_token": 1180,
                            "end_token": 1275,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "where_clause: APIKeyWhereInput = {\"userId\": user_id}\n\n        api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )\n\n        return [APIKeyWithoutHash.from_db(key) for key in api_keys]",
                                    "start_token": 1183,
                                    "end_token": 1233,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "where_clause: APIKeyWhereInput = {\"userId\": user_id}",
                                            "start_token": 1183,
                                            "end_token": 1191,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "where_clause: APIKeyWhereInput = {\"userId\": user_id}",
                                                    "start_token": 1183,
                                                    "end_token": 1191,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "where_clause",
                                                            "start_token": 1183,
                                                            "end_token": 1183,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyWhereInput",
                                                            "start_token": 1185,
                                                            "end_token": 1185,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyWhereInput",
                                                                    "start_token": 1185,
                                                                    "end_token": 1185,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\"userId\": user_id}",
                                                            "start_token": 1187,
                                                            "end_token": 1191,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"userId\": user_id",
                                                                    "start_token": 1188,
                                                                    "end_token": 1190,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"userId\"",
                                                                            "start_token": 1188,
                                                                            "end_token": 1188,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 1188,
                                                                                    "end_token": 1188,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "userId",
                                                                                    "start_token": 1188,
                                                                                    "end_token": 1188,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1188,
                                                                                    "end_token": 1188,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "user_id",
                                                                            "start_token": 1190,
                                                                            "end_token": 1190,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )",
                                            "start_token": 1194,
                                            "end_token": 1218,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_keys = await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )",
                                                    "start_token": 1194,
                                                    "end_token": 1218,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_keys",
                                                            "start_token": 1194,
                                                            "end_token": 1194,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )",
                                                            "start_token": 1196,
                                                            "end_token": 1218,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_many(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )",
                                                                    "start_token": 1197,
                                                                    "end_token": 1218,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_many",
                                                                            "start_token": 1197,
                                                                            "end_token": 1203,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1197,
                                                                                    "end_token": 1201,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1197,
                                                                                            "end_token": 1199,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1197,
                                                                                                    "end_token": 1197,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1199,
                                                                                                    "end_token": 1199,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1200,
                                                                                            "end_token": 1201,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_many",
                                                                                    "start_token": 1203,
                                                                                    "end_token": 1203,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=where_clause, order={\"createdAt\": \"desc\"}\n        )",
                                                                            "start_token": 1204,
                                                                            "end_token": 1218,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=where_clause",
                                                                                    "start_token": 1206,
                                                                                    "end_token": 1208,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1206,
                                                                                            "end_token": 1206,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where_clause",
                                                                                            "start_token": 1208,
                                                                                            "end_token": 1208,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "order={\"createdAt\": \"desc\"}",
                                                                                    "start_token": 1210,
                                                                                    "end_token": 1216,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "order",
                                                                                            "start_token": 1210,
                                                                                            "end_token": 1210,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"createdAt\": \"desc\"}",
                                                                                            "start_token": 1212,
                                                                                            "end_token": 1216,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"createdAt\": \"desc\"",
                                                                                                    "start_token": 1213,
                                                                                                    "end_token": 1215,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"createdAt\"",
                                                                                                            "start_token": 1213,
                                                                                                            "end_token": 1213,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1213,
                                                                                                                    "end_token": 1213,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "createdAt",
                                                                                                                    "start_token": 1213,
                                                                                                                    "end_token": 1213,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1213,
                                                                                                                    "end_token": 1213,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"desc\"",
                                                                                                            "start_token": 1215,
                                                                                                            "end_token": 1215,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1215,
                                                                                                                    "end_token": 1215,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "desc",
                                                                                                                    "start_token": 1215,
                                                                                                                    "end_token": 1215,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1215,
                                                                                                                    "end_token": 1215,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return [APIKeyWithoutHash.from_db(key) for key in api_keys]",
                                            "start_token": 1221,
                                            "end_token": 1233,
                                            "children": [
                                                {
                                                    "type": "list_comprehension",
                                                    "label": "[APIKeyWithoutHash.from_db(key) for key in api_keys]",
                                                    "start_token": 1222,
                                                    "end_token": 1233,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyWithoutHash.from_db(key)",
                                                            "start_token": 1223,
                                                            "end_token": 1228,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "APIKeyWithoutHash.from_db",
                                                                    "start_token": 1223,
                                                                    "end_token": 1225,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyWithoutHash",
                                                                            "start_token": 1223,
                                                                            "end_token": 1223,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "from_db",
                                                                            "start_token": 1225,
                                                                            "end_token": 1225,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(key)",
                                                                    "start_token": 1226,
                                                                    "end_token": 1228,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "key",
                                                                            "start_token": 1227,
                                                                            "end_token": 1227,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "for_in_clause",
                                                            "label": "for key in api_keys",
                                                            "start_token": 1229,
                                                            "end_token": 1232,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "key",
                                                                    "start_token": 1230,
                                                                    "end_token": 1230,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_keys",
                                                                    "start_token": 1232,
                                                                    "end_token": 1232,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                    "start_token": 1235,
                                    "end_token": 1254,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 1236,
                                            "end_token": 1238,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 1236,
                                                    "end_token": 1236,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1238,
                                                    "end_token": 1238,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1238,
                                                            "end_token": 1238,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                            "start_token": 1241,
                                            "end_token": 1254,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while listing API keys: {str(e)}\")",
                                                    "start_token": 1241,
                                                    "end_token": 1247,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while listing API keys: {str(e)}\")",
                                                            "start_token": 1241,
                                                            "end_token": 1247,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1241,
                                                                    "end_token": 1243,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1241,
                                                                            "end_token": 1241,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1243,
                                                                            "end_token": 1243,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while listing API keys: {str(e)}\")",
                                                                    "start_token": 1244,
                                                                    "end_token": 1247,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while listing API keys: {str(e)}\"",
                                                                            "start_token": 1245,
                                                                            "end_token": 1246,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1245,
                                                                                    "end_token": 1246,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while listing API keys: ",
                                                                                    "start_token": 1246,
                                                                                    "end_token": 1246,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1246,
                                                                                    "end_token": 1246,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1246,
                                                                                            "end_token": 1246,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1246,
                                                                                                    "end_token": 1246,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1246,
                                                                                                    "end_token": 1246,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1246,
                                                                                                            "end_token": 1246,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1246,
                                                                                    "end_token": 1246,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                                    "start_token": 1249,
                                                    "end_token": 1254,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                                            "start_token": 1250,
                                                            "end_token": 1254,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1250,
                                                                    "end_token": 1250,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to list API keys: {str(e)}\")",
                                                                    "start_token": 1251,
                                                                    "end_token": 1254,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to list API keys: {str(e)}\"",
                                                                            "start_token": 1252,
                                                                            "end_token": 1253,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1252,
                                                                                    "end_token": 1253,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to list API keys: ",
                                                                                    "start_token": 1253,
                                                                                    "end_token": 1253,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1253,
                                                                                    "end_token": 1253,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1253,
                                                                                            "end_token": 1253,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1253,
                                                                                                    "end_token": 1253,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1253,
                                                                                                    "end_token": 1253,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1253,
                                                                                                            "end_token": 1253,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1253,
                                                                                    "end_token": 1253,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                    "start_token": 1256,
                                    "end_token": 1275,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1257,
                                            "end_token": 1259,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1257,
                                                    "end_token": 1257,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1259,
                                                    "end_token": 1259,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1259,
                                                            "end_token": 1259,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while listing API keys: {str(e)}\")\n        raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                            "start_token": 1262,
                                            "end_token": 1275,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while listing API keys: {str(e)}\")",
                                                    "start_token": 1262,
                                                    "end_token": 1268,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while listing API keys: {str(e)}\")",
                                                            "start_token": 1262,
                                                            "end_token": 1268,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1262,
                                                                    "end_token": 1264,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1262,
                                                                            "end_token": 1262,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1264,
                                                                            "end_token": 1264,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while listing API keys: {str(e)}\")",
                                                                    "start_token": 1265,
                                                                    "end_token": 1268,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while listing API keys: {str(e)}\"",
                                                                            "start_token": 1266,
                                                                            "end_token": 1267,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1266,
                                                                                    "end_token": 1267,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while listing API keys: ",
                                                                                    "start_token": 1267,
                                                                                    "end_token": 1267,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1267,
                                                                                    "end_token": 1267,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1267,
                                                                                            "end_token": 1267,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1267,
                                                                                                    "end_token": 1267,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1267,
                                                                                                    "end_token": 1267,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1267,
                                                                                                            "end_token": 1267,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1267,
                                                                                    "end_token": 1267,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                                    "start_token": 1270,
                                                    "end_token": 1275,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to list API keys: {str(e)}\")",
                                                            "start_token": 1271,
                                                            "end_token": 1275,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1271,
                                                                    "end_token": 1271,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to list API keys: {str(e)}\")",
                                                                    "start_token": 1272,
                                                                    "end_token": 1275,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to list API keys: {str(e)}\"",
                                                                            "start_token": 1273,
                                                                            "end_token": 1274,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1273,
                                                                                    "end_token": 1274,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to list API keys: ",
                                                                                    "start_token": 1274,
                                                                                    "end_token": 1274,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1274,
                                                                                    "end_token": 1274,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1274,
                                                                                            "end_token": 1274,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1274,
                                                                                                    "end_token": 1274,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1274,
                                                                                                    "end_token": 1274,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1274,
                                                                                                            "end_token": 1274,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1274,
                                                                                    "end_token": 1274,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def suspend_api_key(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
            "start_token": 1279,
            "end_token": 1464,
            "children": [
                {
                    "type": "identifier",
                    "label": "suspend_api_key",
                    "start_token": 1281,
                    "end_token": 1281,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(key_id: str, user_id: str)",
                    "start_token": 1282,
                    "end_token": 1290,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "key_id: str",
                            "start_token": 1283,
                            "end_token": 1285,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "key_id",
                                    "start_token": 1283,
                                    "end_token": 1283,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1285,
                                    "end_token": 1285,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1285,
                                            "end_token": 1285,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 1287,
                            "end_token": 1289,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 1287,
                                    "end_token": 1287,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1289,
                                    "end_token": 1289,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1289,
                                            "end_token": 1289,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "Optional[APIKeyWithoutHash]",
                    "start_token": 1293,
                    "end_token": 1296,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "Optional[APIKeyWithoutHash]",
                            "start_token": 1293,
                            "end_token": 1296,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "Optional",
                                    "start_token": 1293,
                                    "end_token": 1293,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash]",
                                    "start_token": 1294,
                                    "end_token": 1296,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 1295,
                                            "end_token": 1295,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 1295,
                                                    "end_token": 1295,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                    "start_token": 1299,
                    "end_token": 1464,
                    "children": [
                        {
                            "type": "try_statement",
                            "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                            "start_token": 1299,
                            "end_token": 1464,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None",
                                    "start_token": 1302,
                                    "end_token": 1409,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                            "start_token": 1302,
                                            "end_token": 1320,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                    "start_token": 1302,
                                                    "end_token": 1320,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1302,
                                                            "end_token": 1302,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                            "start_token": 1304,
                                                            "end_token": 1320,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                                    "start_token": 1305,
                                                                    "end_token": 1320,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_unique",
                                                                            "start_token": 1305,
                                                                            "end_token": 1311,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1305,
                                                                                    "end_token": 1309,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1305,
                                                                                            "end_token": 1307,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1305,
                                                                                                    "end_token": 1305,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1307,
                                                                                                    "end_token": 1307,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1308,
                                                                                            "end_token": 1309,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_unique",
                                                                                    "start_token": 1311,
                                                                                    "end_token": 1311,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(where={\"id\": key_id})",
                                                                            "start_token": 1312,
                                                                            "end_token": 1320,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where={\"id\": key_id}",
                                                                                    "start_token": 1313,
                                                                                    "end_token": 1319,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1313,
                                                                                            "end_token": 1313,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"id\": key_id}",
                                                                                            "start_token": 1315,
                                                                                            "end_token": 1319,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"id\": key_id",
                                                                                                    "start_token": 1316,
                                                                                                    "end_token": 1318,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"id\"",
                                                                                                            "start_token": 1316,
                                                                                                            "end_token": 1316,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1316,
                                                                                                                    "end_token": 1316,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "id",
                                                                                                                    "start_token": 1316,
                                                                                                                    "end_token": 1316,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1316,
                                                                                                                    "end_token": 1316,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "key_id",
                                                                                                            "start_token": 1318,
                                                                                                            "end_token": 1318,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if not api_key:\n            raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                            "start_token": 1323,
                                            "end_token": 1333,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not api_key",
                                                    "start_token": 1324,
                                                    "end_token": 1325,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1325,
                                                            "end_token": 1325,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                    "start_token": 1328,
                                                    "end_token": 1333,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                            "start_token": 1328,
                                                            "end_token": 1333,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyNotFoundError(f\"API key with id {key_id} not found\")",
                                                                    "start_token": 1329,
                                                                    "end_token": 1333,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyNotFoundError",
                                                                            "start_token": 1329,
                                                                            "end_token": 1329,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(f\"API key with id {key_id} not found\")",
                                                                            "start_token": 1330,
                                                                            "end_token": 1333,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "f\"API key with id {key_id} not found\"",
                                                                                    "start_token": 1331,
                                                                                    "end_token": 1332,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "f\"",
                                                                                            "start_token": 1331,
                                                                                            "end_token": 1332,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "API key with id ",
                                                                                            "start_token": 1332,
                                                                                            "end_token": 1332,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "interpolation",
                                                                                            "label": "{key_id}",
                                                                                            "start_token": 1332,
                                                                                            "end_token": 1332,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "key_id",
                                                                                                    "start_token": 1332,
                                                                                                    "end_token": 1332,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": " not found",
                                                                                            "start_token": 1332,
                                                                                            "end_token": 1332,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1332,
                                                                                            "end_token": 1332,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )",
                                            "start_token": 1336,
                                            "end_token": 1351,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "api_key.userId != user_id",
                                                    "start_token": 1337,
                                                    "end_token": 1342,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "api_key.userId",
                                                            "start_token": 1337,
                                                            "end_token": 1339,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 1337,
                                                                    "end_token": 1337,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "userId",
                                                                    "start_token": 1339,
                                                                    "end_token": 1339,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "user_id",
                                                            "start_token": 1342,
                                                            "end_token": 1342,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )",
                                                    "start_token": 1345,
                                                    "end_token": 1351,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )",
                                                            "start_token": 1345,
                                                            "end_token": 1351,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyPermissionError(\n                \"You do not have permission to suspend this API key.\"\n            )",
                                                                    "start_token": 1346,
                                                                    "end_token": 1351,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyPermissionError",
                                                                            "start_token": 1346,
                                                                            "end_token": 1346,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n                \"You do not have permission to suspend this API key.\"\n            )",
                                                                            "start_token": 1347,
                                                                            "end_token": 1351,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"You do not have permission to suspend this API key.\"",
                                                                                    "start_token": 1349,
                                                                                    "end_token": 1349,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1349,
                                                                                            "end_token": 1349,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "You do not have permission to suspend this API key.",
                                                                                            "start_token": 1349,
                                                                                            "end_token": 1349,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1349,
                                                                                            "end_token": 1349,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                            "start_token": 1354,
                                            "end_token": 1362,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                                    "start_token": 1354,
                                                    "end_token": 1362,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "where_clause",
                                                            "start_token": 1354,
                                                            "end_token": 1354,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyWhereUniqueInput",
                                                            "start_token": 1356,
                                                            "end_token": 1356,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyWhereUniqueInput",
                                                                    "start_token": 1356,
                                                                    "end_token": 1356,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\"id\": key_id}",
                                                            "start_token": 1358,
                                                            "end_token": 1362,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"id\": key_id",
                                                                    "start_token": 1359,
                                                                    "end_token": 1361,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"id\"",
                                                                            "start_token": 1359,
                                                                            "end_token": 1359,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 1359,
                                                                                    "end_token": 1359,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "id",
                                                                                    "start_token": 1359,
                                                                                    "end_token": 1359,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1359,
                                                                                    "end_token": 1359,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "key_id",
                                                                            "start_token": 1361,
                                                                            "end_token": 1361,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )",
                                            "start_token": 1364,
                                            "end_token": 1393,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )",
                                                    "start_token": 1364,
                                                    "end_token": 1393,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "updated_api_key",
                                                            "start_token": 1364,
                                                            "end_token": 1364,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )",
                                                            "start_token": 1366,
                                                            "end_token": 1393,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )",
                                                                    "start_token": 1367,
                                                                    "end_token": 1393,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().update",
                                                                            "start_token": 1367,
                                                                            "end_token": 1373,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1367,
                                                                                    "end_token": 1371,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1367,
                                                                                            "end_token": 1369,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1367,
                                                                                                    "end_token": 1367,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1369,
                                                                                                    "end_token": 1369,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1370,
                                                                                            "end_token": 1371,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "update",
                                                                                    "start_token": 1373,
                                                                                    "end_token": 1373,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=where_clause,\n            data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED),\n        )",
                                                                            "start_token": 1374,
                                                                            "end_token": 1393,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=where_clause",
                                                                                    "start_token": 1376,
                                                                                    "end_token": 1378,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1376,
                                                                                            "end_token": 1376,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where_clause",
                                                                                            "start_token": 1378,
                                                                                            "end_token": 1378,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "data=APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED)",
                                                                                    "start_token": 1381,
                                                                                    "end_token": 1390,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "data",
                                                                                            "start_token": 1381,
                                                                                            "end_token": 1381,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyUpdateInput(status=APIKeyStatus.SUSPENDED)",
                                                                                            "start_token": 1383,
                                                                                            "end_token": 1390,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyUpdateInput",
                                                                                                    "start_token": 1383,
                                                                                                    "end_token": 1383,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(status=APIKeyStatus.SUSPENDED)",
                                                                                                    "start_token": 1384,
                                                                                                    "end_token": 1390,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "status=APIKeyStatus.SUSPENDED",
                                                                                                            "start_token": 1385,
                                                                                                            "end_token": 1389,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "status",
                                                                                                                    "start_token": 1385,
                                                                                                                    "end_token": 1385,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "APIKeyStatus.SUSPENDED",
                                                                                                                    "start_token": 1387,
                                                                                                                    "end_token": 1389,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "APIKeyStatus",
                                                                                                                            "start_token": 1387,
                                                                                                                            "end_token": 1387,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "SUSPENDED",
                                                                                                                            "start_token": 1389,
                                                                                                                            "end_token": 1389,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)",
                                            "start_token": 1396,
                                            "end_token": 1406,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "updated_api_key",
                                                    "start_token": 1397,
                                                    "end_token": 1397,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                    "start_token": 1400,
                                                    "end_token": 1406,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                            "start_token": 1400,
                                                            "end_token": 1406,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyWithoutHash.from_db(updated_api_key)",
                                                                    "start_token": 1401,
                                                                    "end_token": 1406,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "APIKeyWithoutHash.from_db",
                                                                            "start_token": 1401,
                                                                            "end_token": 1403,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyWithoutHash",
                                                                                    "start_token": 1401,
                                                                                    "end_token": 1401,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "from_db",
                                                                                    "start_token": 1403,
                                                                                    "end_token": 1403,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(updated_api_key)",
                                                                            "start_token": 1404,
                                                                            "end_token": 1406,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "updated_api_key",
                                                                                    "start_token": 1405,
                                                                                    "end_token": 1405,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return None",
                                            "start_token": 1408,
                                            "end_token": 1409,
                                            "children": [
                                                {
                                                    "type": "none",
                                                    "label": "None",
                                                    "start_token": 1409,
                                                    "end_token": 1409,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e",
                                    "start_token": 1411,
                                    "end_token": 1422,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "(APIKeyNotFoundError, APIKeyPermissionError) as e",
                                            "start_token": 1412,
                                            "end_token": 1418,
                                            "children": [
                                                {
                                                    "type": "tuple",
                                                    "label": "(APIKeyNotFoundError, APIKeyPermissionError)",
                                                    "start_token": 1412,
                                                    "end_token": 1416,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyNotFoundError",
                                                            "start_token": 1413,
                                                            "end_token": 1413,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyPermissionError",
                                                            "start_token": 1415,
                                                            "end_token": 1415,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1418,
                                                    "end_token": 1418,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1418,
                                                            "end_token": 1418,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise e",
                                            "start_token": 1421,
                                            "end_token": 1422,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise e",
                                                    "start_token": 1421,
                                                    "end_token": 1422,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1422,
                                                            "end_token": 1422,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                    "start_token": 1424,
                                    "end_token": 1443,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 1425,
                                            "end_token": 1427,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 1425,
                                                    "end_token": 1425,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1427,
                                                    "end_token": 1427,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1427,
                                                            "end_token": 1427,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                            "start_token": 1430,
                                            "end_token": 1443,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while suspending API key: {str(e)}\")",
                                                    "start_token": 1430,
                                                    "end_token": 1436,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while suspending API key: {str(e)}\")",
                                                            "start_token": 1430,
                                                            "end_token": 1436,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1430,
                                                                    "end_token": 1432,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1430,
                                                                            "end_token": 1430,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1432,
                                                                            "end_token": 1432,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while suspending API key: {str(e)}\")",
                                                                    "start_token": 1433,
                                                                    "end_token": 1436,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while suspending API key: {str(e)}\"",
                                                                            "start_token": 1434,
                                                                            "end_token": 1435,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1434,
                                                                                    "end_token": 1435,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while suspending API key: ",
                                                                                    "start_token": 1435,
                                                                                    "end_token": 1435,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1435,
                                                                                    "end_token": 1435,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1435,
                                                                                            "end_token": 1435,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1435,
                                                                                                    "end_token": 1435,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1435,
                                                                                                    "end_token": 1435,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1435,
                                                                                                            "end_token": 1435,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1435,
                                                                                    "end_token": 1435,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                                    "start_token": 1438,
                                                    "end_token": 1443,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                                            "start_token": 1439,
                                                            "end_token": 1443,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1439,
                                                                    "end_token": 1439,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to suspend API key: {str(e)}\")",
                                                                    "start_token": 1440,
                                                                    "end_token": 1443,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to suspend API key: {str(e)}\"",
                                                                            "start_token": 1441,
                                                                            "end_token": 1442,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1441,
                                                                                    "end_token": 1442,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to suspend API key: ",
                                                                                    "start_token": 1442,
                                                                                    "end_token": 1442,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1442,
                                                                                    "end_token": 1442,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1442,
                                                                                            "end_token": 1442,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1442,
                                                                                                    "end_token": 1442,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1442,
                                                                                                    "end_token": 1442,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1442,
                                                                                                            "end_token": 1442,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1442,
                                                                                    "end_token": 1442,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                    "start_token": 1445,
                                    "end_token": 1464,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1446,
                                            "end_token": 1448,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1446,
                                                    "end_token": 1446,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1448,
                                                    "end_token": 1448,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1448,
                                                            "end_token": 1448,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while suspending API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                            "start_token": 1451,
                                            "end_token": 1464,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while suspending API key: {str(e)}\")",
                                                    "start_token": 1451,
                                                    "end_token": 1457,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while suspending API key: {str(e)}\")",
                                                            "start_token": 1451,
                                                            "end_token": 1457,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1451,
                                                                    "end_token": 1453,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1451,
                                                                            "end_token": 1451,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1453,
                                                                            "end_token": 1453,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while suspending API key: {str(e)}\")",
                                                                    "start_token": 1454,
                                                                    "end_token": 1457,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while suspending API key: {str(e)}\"",
                                                                            "start_token": 1455,
                                                                            "end_token": 1456,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1455,
                                                                                    "end_token": 1456,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while suspending API key: ",
                                                                                    "start_token": 1456,
                                                                                    "end_token": 1456,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1456,
                                                                                    "end_token": 1456,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1456,
                                                                                            "end_token": 1456,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1456,
                                                                                                    "end_token": 1456,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1456,
                                                                                                    "end_token": 1456,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1456,
                                                                                                            "end_token": 1456,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1456,
                                                                                    "end_token": 1456,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                                    "start_token": 1459,
                                                    "end_token": 1464,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to suspend API key: {str(e)}\")",
                                                            "start_token": 1460,
                                                            "end_token": 1464,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1460,
                                                                    "end_token": 1460,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to suspend API key: {str(e)}\")",
                                                                    "start_token": 1461,
                                                                    "end_token": 1464,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to suspend API key: {str(e)}\"",
                                                                            "start_token": 1462,
                                                                            "end_token": 1463,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1462,
                                                                                    "end_token": 1463,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to suspend API key: ",
                                                                                    "start_token": 1463,
                                                                                    "end_token": 1463,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1463,
                                                                                    "end_token": 1463,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1463,
                                                                                            "end_token": 1463,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1463,
                                                                                                    "end_token": 1463,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1463,
                                                                                                    "end_token": 1463,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1463,
                                                                                                            "end_token": 1463,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1463,
                                                                                    "end_token": 1463,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "def has_permission(api_key: APIKey, required_permission: APIKeyPermission) -> bool:\n    try:\n        return required_permission in api_key.permissions\n    except Exception as e:\n        logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False",
            "start_token": 1468,
            "end_token": 1509,
            "children": [
                {
                    "type": "identifier",
                    "label": "has_permission",
                    "start_token": 1469,
                    "end_token": 1469,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(api_key: APIKey, required_permission: APIKeyPermission)",
                    "start_token": 1470,
                    "end_token": 1478,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "api_key: APIKey",
                            "start_token": 1471,
                            "end_token": 1473,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "api_key",
                                    "start_token": 1471,
                                    "end_token": 1471,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "APIKey",
                                    "start_token": 1473,
                                    "end_token": 1473,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "APIKey",
                                            "start_token": 1473,
                                            "end_token": 1473,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "required_permission: APIKeyPermission",
                            "start_token": 1475,
                            "end_token": 1477,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "required_permission",
                                    "start_token": 1475,
                                    "end_token": 1475,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "APIKeyPermission",
                                    "start_token": 1477,
                                    "end_token": 1477,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "APIKeyPermission",
                                            "start_token": 1477,
                                            "end_token": 1477,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "bool",
                    "start_token": 1481,
                    "end_token": 1481,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "bool",
                            "start_token": 1481,
                            "end_token": 1481,
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "try:\n        return required_permission in api_key.permissions\n    except Exception as e:\n        logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False",
                    "start_token": 1484,
                    "end_token": 1509,
                    "children": [
                        {
                            "type": "try_statement",
                            "label": "try:\n        return required_permission in api_key.permissions\n    except Exception as e:\n        logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False",
                            "start_token": 1484,
                            "end_token": 1509,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "return required_permission in api_key.permissions",
                                    "start_token": 1487,
                                    "end_token": 1492,
                                    "children": [
                                        {
                                            "type": "return_statement",
                                            "label": "return required_permission in api_key.permissions",
                                            "start_token": 1487,
                                            "end_token": 1492,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "required_permission in api_key.permissions",
                                                    "start_token": 1488,
                                                    "end_token": 1492,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "required_permission",
                                                            "start_token": 1488,
                                                            "end_token": 1488,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "attribute",
                                                            "label": "api_key.permissions",
                                                            "start_token": 1490,
                                                            "end_token": 1492,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 1490,
                                                                    "end_token": 1490,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "permissions",
                                                                    "start_token": 1492,
                                                                    "end_token": 1492,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False",
                                    "start_token": 1494,
                                    "end_token": 1509,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1495,
                                            "end_token": 1497,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1495,
                                                    "end_token": 1495,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1497,
                                                    "end_token": 1497,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1497,
                                                            "end_token": 1497,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Error checking API key permissions: {str(e)}\")\n        return False",
                                            "start_token": 1500,
                                            "end_token": 1509,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Error checking API key permissions: {str(e)}\")",
                                                    "start_token": 1500,
                                                    "end_token": 1506,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Error checking API key permissions: {str(e)}\")",
                                                            "start_token": 1500,
                                                            "end_token": 1506,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1500,
                                                                    "end_token": 1502,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1500,
                                                                            "end_token": 1500,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1502,
                                                                            "end_token": 1502,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Error checking API key permissions: {str(e)}\")",
                                                                    "start_token": 1503,
                                                                    "end_token": 1506,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Error checking API key permissions: {str(e)}\"",
                                                                            "start_token": 1504,
                                                                            "end_token": 1505,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1504,
                                                                                    "end_token": 1505,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Error checking API key permissions: ",
                                                                                    "start_token": 1505,
                                                                                    "end_token": 1505,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1505,
                                                                                    "end_token": 1505,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1505,
                                                                                            "end_token": 1505,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1505,
                                                                                                    "end_token": 1505,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1505,
                                                                                                    "end_token": 1505,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1505,
                                                                                                            "end_token": 1505,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1505,
                                                                                    "end_token": 1505,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return False",
                                                    "start_token": 1508,
                                                    "end_token": 1509,
                                                    "children": [
                                                        {
                                                            "type": "false",
                                                            "label": "False",
                                                            "start_token": 1509,
                                                            "end_token": 1509,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def get_api_key_by_id(key_id: str, user_id: str) -> Optional[APIKeyWithoutHash]:\n    try:\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )\n\n        if not api_key:\n            return None\n\n        return APIKeyWithoutHash.from_db(api_key)\n    except PrismaError as e:\n        logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
            "start_token": 1513,
            "end_token": 1621,
            "children": [
                {
                    "type": "identifier",
                    "label": "get_api_key_by_id",
                    "start_token": 1515,
                    "end_token": 1515,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(key_id: str, user_id: str)",
                    "start_token": 1516,
                    "end_token": 1524,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "key_id: str",
                            "start_token": 1517,
                            "end_token": 1519,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "key_id",
                                    "start_token": 1517,
                                    "end_token": 1517,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1519,
                                    "end_token": 1519,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1519,
                                            "end_token": 1519,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 1521,
                            "end_token": 1523,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 1521,
                                    "end_token": 1521,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1523,
                                    "end_token": 1523,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1523,
                                            "end_token": 1523,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "Optional[APIKeyWithoutHash]",
                    "start_token": 1527,
                    "end_token": 1530,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "Optional[APIKeyWithoutHash]",
                            "start_token": 1527,
                            "end_token": 1530,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "Optional",
                                    "start_token": 1527,
                                    "end_token": 1527,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash]",
                                    "start_token": 1528,
                                    "end_token": 1530,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 1529,
                                            "end_token": 1529,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 1529,
                                                    "end_token": 1529,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )\n\n        if not api_key:\n            return None\n\n        return APIKeyWithoutHash.from_db(api_key)\n    except PrismaError as e:\n        logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                    "start_token": 1533,
                    "end_token": 1621,
                    "children": [
                        {
                            "type": "try_statement",
                            "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )\n\n        if not api_key:\n            return None\n\n        return APIKeyWithoutHash.from_db(api_key)\n    except PrismaError as e:\n        logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                            "start_token": 1533,
                            "end_token": 1621,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )\n\n        if not api_key:\n            return None\n\n        return APIKeyWithoutHash.from_db(api_key)",
                                    "start_token": 1536,
                                    "end_token": 1579,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )",
                                            "start_token": 1536,
                                            "end_token": 1561,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )",
                                                    "start_token": 1536,
                                                    "end_token": 1561,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1536,
                                                            "end_token": 1536,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )",
                                                            "start_token": 1538,
                                                            "end_token": 1561,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_first(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )",
                                                                    "start_token": 1539,
                                                                    "end_token": 1561,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_first",
                                                                            "start_token": 1539,
                                                                            "end_token": 1545,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1539,
                                                                                    "end_token": 1543,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1539,
                                                                                            "end_token": 1541,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1539,
                                                                                                    "end_token": 1539,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1541,
                                                                                                    "end_token": 1541,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1542,
                                                                                            "end_token": 1543,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_first",
                                                                                    "start_token": 1545,
                                                                                    "end_token": 1545,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=APIKeyWhereInput(id=key_id, userId=user_id)\n        )",
                                                                            "start_token": 1546,
                                                                            "end_token": 1561,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=APIKeyWhereInput(id=key_id, userId=user_id)",
                                                                                    "start_token": 1548,
                                                                                    "end_token": 1559,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1548,
                                                                                            "end_token": 1548,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyWhereInput(id=key_id, userId=user_id)",
                                                                                            "start_token": 1550,
                                                                                            "end_token": 1559,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyWhereInput",
                                                                                                    "start_token": 1550,
                                                                                                    "end_token": 1550,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(id=key_id, userId=user_id)",
                                                                                                    "start_token": 1551,
                                                                                                    "end_token": 1559,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "id=key_id",
                                                                                                            "start_token": 1552,
                                                                                                            "end_token": 1554,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "id",
                                                                                                                    "start_token": 1552,
                                                                                                                    "end_token": 1552,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "key_id",
                                                                                                                    "start_token": 1554,
                                                                                                                    "end_token": 1554,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "userId=user_id",
                                                                                                            "start_token": 1556,
                                                                                                            "end_token": 1558,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "userId",
                                                                                                                    "start_token": 1556,
                                                                                                                    "end_token": 1556,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "user_id",
                                                                                                                    "start_token": 1558,
                                                                                                                    "end_token": 1558,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if not api_key:\n            return None",
                                            "start_token": 1564,
                                            "end_token": 1570,
                                            "children": [
                                                {
                                                    "type": "not_operator",
                                                    "label": "not api_key",
                                                    "start_token": 1565,
                                                    "end_token": 1566,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1566,
                                                            "end_token": 1566,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "return None",
                                                    "start_token": 1569,
                                                    "end_token": 1570,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return None",
                                                            "start_token": 1569,
                                                            "end_token": 1570,
                                                            "children": [
                                                                {
                                                                    "type": "none",
                                                                    "label": "None",
                                                                    "start_token": 1570,
                                                                    "end_token": 1570,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return APIKeyWithoutHash.from_db(api_key)",
                                            "start_token": 1573,
                                            "end_token": 1579,
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "label": "APIKeyWithoutHash.from_db(api_key)",
                                                    "start_token": 1574,
                                                    "end_token": 1579,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "APIKeyWithoutHash.from_db",
                                                            "start_token": 1574,
                                                            "end_token": 1576,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyWithoutHash",
                                                                    "start_token": 1574,
                                                                    "end_token": 1574,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "from_db",
                                                                    "start_token": 1576,
                                                                    "end_token": 1576,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "label": "(api_key)",
                                                            "start_token": 1577,
                                                            "end_token": 1579,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 1578,
                                                                    "end_token": 1578,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                    "start_token": 1581,
                                    "end_token": 1600,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 1582,
                                            "end_token": 1584,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 1582,
                                                    "end_token": 1582,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1584,
                                                    "end_token": 1584,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1584,
                                                            "end_token": 1584,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                            "start_token": 1587,
                                            "end_token": 1600,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while getting API key: {str(e)}\")",
                                                    "start_token": 1587,
                                                    "end_token": 1593,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while getting API key: {str(e)}\")",
                                                            "start_token": 1587,
                                                            "end_token": 1593,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1587,
                                                                    "end_token": 1589,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1587,
                                                                            "end_token": 1587,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1589,
                                                                            "end_token": 1589,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while getting API key: {str(e)}\")",
                                                                    "start_token": 1590,
                                                                    "end_token": 1593,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while getting API key: {str(e)}\"",
                                                                            "start_token": 1591,
                                                                            "end_token": 1592,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1591,
                                                                                    "end_token": 1592,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while getting API key: ",
                                                                                    "start_token": 1592,
                                                                                    "end_token": 1592,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1592,
                                                                                    "end_token": 1592,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1592,
                                                                                            "end_token": 1592,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1592,
                                                                                                    "end_token": 1592,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1592,
                                                                                                    "end_token": 1592,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1592,
                                                                                                            "end_token": 1592,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1592,
                                                                                    "end_token": 1592,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                                    "start_token": 1595,
                                                    "end_token": 1600,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                                            "start_token": 1596,
                                                            "end_token": 1600,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1596,
                                                                    "end_token": 1596,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to get API key: {str(e)}\")",
                                                                    "start_token": 1597,
                                                                    "end_token": 1600,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to get API key: {str(e)}\"",
                                                                            "start_token": 1598,
                                                                            "end_token": 1599,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1598,
                                                                                    "end_token": 1599,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to get API key: ",
                                                                                    "start_token": 1599,
                                                                                    "end_token": 1599,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1599,
                                                                                    "end_token": 1599,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1599,
                                                                                            "end_token": 1599,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1599,
                                                                                                    "end_token": 1599,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1599,
                                                                                                    "end_token": 1599,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1599,
                                                                                                            "end_token": 1599,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1599,
                                                                                    "end_token": 1599,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                    "start_token": 1602,
                                    "end_token": 1621,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1603,
                                            "end_token": 1605,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1603,
                                                    "end_token": 1603,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1605,
                                                    "end_token": 1605,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1605,
                                                            "end_token": 1605,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while getting API key: {str(e)}\")\n        raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                            "start_token": 1608,
                                            "end_token": 1621,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while getting API key: {str(e)}\")",
                                                    "start_token": 1608,
                                                    "end_token": 1614,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while getting API key: {str(e)}\")",
                                                            "start_token": 1608,
                                                            "end_token": 1614,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1608,
                                                                    "end_token": 1610,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1608,
                                                                            "end_token": 1608,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1610,
                                                                            "end_token": 1610,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while getting API key: {str(e)}\")",
                                                                    "start_token": 1611,
                                                                    "end_token": 1614,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while getting API key: {str(e)}\"",
                                                                            "start_token": 1612,
                                                                            "end_token": 1613,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1612,
                                                                                    "end_token": 1613,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while getting API key: ",
                                                                                    "start_token": 1613,
                                                                                    "end_token": 1613,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1613,
                                                                                    "end_token": 1613,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1613,
                                                                                            "end_token": 1613,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1613,
                                                                                                    "end_token": 1613,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1613,
                                                                                                    "end_token": 1613,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1613,
                                                                                                            "end_token": 1613,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1613,
                                                                                    "end_token": 1613,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                                    "start_token": 1616,
                                                    "end_token": 1621,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to get API key: {str(e)}\")",
                                                            "start_token": 1617,
                                                            "end_token": 1621,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1617,
                                                                    "end_token": 1617,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to get API key: {str(e)}\")",
                                                                    "start_token": 1618,
                                                                    "end_token": 1621,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to get API key: {str(e)}\"",
                                                                            "start_token": 1619,
                                                                            "end_token": 1620,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1619,
                                                                                    "end_token": 1620,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to get API key: ",
                                                                                    "start_token": 1620,
                                                                                    "end_token": 1620,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1620,
                                                                                    "end_token": 1620,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1620,
                                                                                            "end_token": 1620,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1620,
                                                                                                    "end_token": 1620,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1620,
                                                                                                    "end_token": 1620,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1620,
                                                                                                            "end_token": 1620,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1620,
                                                                                    "end_token": 1620,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "label": "async def update_api_key_permissions(\n    key_id: str, user_id: str, permissions: List[APIKeyPermission]\n) -> Optional[APIKeyWithoutHash]:\n    \"\"\"\n    Update the permissions of an API key.\n    \"\"\"\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
            "start_token": 1625,
            "end_token": 1821,
            "children": [
                {
                    "type": "identifier",
                    "label": "update_api_key_permissions",
                    "start_token": 1627,
                    "end_token": 1627,
                    "children": []
                },
                {
                    "type": "parameters",
                    "label": "(\n    key_id: str, user_id: str, permissions: List[APIKeyPermission]\n)",
                    "start_token": 1628,
                    "end_token": 1645,
                    "children": [
                        {
                            "type": "typed_parameter",
                            "label": "key_id: str",
                            "start_token": 1630,
                            "end_token": 1632,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "key_id",
                                    "start_token": 1630,
                                    "end_token": 1630,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1632,
                                    "end_token": 1632,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1632,
                                            "end_token": 1632,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "user_id: str",
                            "start_token": 1634,
                            "end_token": 1636,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "user_id",
                                    "start_token": 1634,
                                    "end_token": 1634,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "str",
                                    "start_token": 1636,
                                    "end_token": 1636,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "str",
                                            "start_token": 1636,
                                            "end_token": 1636,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "typed_parameter",
                            "label": "permissions: List[APIKeyPermission]",
                            "start_token": 1638,
                            "end_token": 1643,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "permissions",
                                    "start_token": 1638,
                                    "end_token": 1638,
                                    "children": []
                                },
                                {
                                    "type": "type",
                                    "label": "List[APIKeyPermission]",
                                    "start_token": 1640,
                                    "end_token": 1643,
                                    "children": [
                                        {
                                            "type": "generic_type",
                                            "label": "List[APIKeyPermission]",
                                            "start_token": 1640,
                                            "end_token": 1643,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "List",
                                                    "start_token": 1640,
                                                    "end_token": 1640,
                                                    "children": []
                                                },
                                                {
                                                    "type": "type_parameter",
                                                    "label": "[APIKeyPermission]",
                                                    "start_token": 1641,
                                                    "end_token": 1643,
                                                    "children": [
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyPermission",
                                                            "start_token": 1642,
                                                            "end_token": 1642,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyPermission",
                                                                    "start_token": 1642,
                                                                    "end_token": 1642,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "type",
                    "label": "Optional[APIKeyWithoutHash]",
                    "start_token": 1648,
                    "end_token": 1651,
                    "children": [
                        {
                            "type": "generic_type",
                            "label": "Optional[APIKeyWithoutHash]",
                            "start_token": 1648,
                            "end_token": 1651,
                            "children": [
                                {
                                    "type": "identifier",
                                    "label": "Optional",
                                    "start_token": 1648,
                                    "end_token": 1648,
                                    "children": []
                                },
                                {
                                    "type": "type_parameter",
                                    "label": "[APIKeyWithoutHash]",
                                    "start_token": 1649,
                                    "end_token": 1651,
                                    "children": [
                                        {
                                            "type": "type",
                                            "label": "APIKeyWithoutHash",
                                            "start_token": 1650,
                                            "end_token": 1650,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "APIKeyWithoutHash",
                                                    "start_token": 1650,
                                                    "end_token": 1650,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "block",
                    "label": "\"\"\"\n    Update the permissions of an API key.\n    \"\"\"\n    try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                    "start_token": 1654,
                    "end_token": 1821,
                    "children": [
                        {
                            "type": "expression_statement",
                            "label": "\"\"\"\n    Update the permissions of an API key.\n    \"\"\"",
                            "start_token": 1654,
                            "end_token": 1656,
                            "children": [
                                {
                                    "type": "string",
                                    "label": "\"\"\"\n    Update the permissions of an API key.\n    \"\"\"",
                                    "start_token": 1654,
                                    "end_token": 1656,
                                    "children": [
                                        {
                                            "type": "string_start",
                                            "label": "\"\"\"",
                                            "start_token": 1654,
                                            "end_token": 1655,
                                            "children": []
                                        },
                                        {
                                            "type": "string_content",
                                            "label": "\n    Update the permissions of an API key.\n    ",
                                            "start_token": 1655,
                                            "end_token": 1655,
                                            "children": []
                                        },
                                        {
                                            "type": "string_end",
                                            "label": "\"\"\"",
                                            "start_token": 1655,
                                            "end_token": 1656,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "try_statement",
                            "label": "try:\n        api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None\n    except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e\n    except PrismaError as e:\n        logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                            "start_token": 1658,
                            "end_token": 1821,
                            "children": [
                                {
                                    "type": "block",
                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})\n\n        if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")\n\n        if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )\n\n        where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}\n        updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )\n\n        if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)\n        return None",
                                    "start_token": 1661,
                                    "end_token": 1766,
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                            "start_token": 1661,
                                            "end_token": 1679,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "api_key = await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                    "start_token": 1661,
                                                    "end_token": 1679,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1661,
                                                            "end_token": 1661,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                            "start_token": 1663,
                                                            "end_token": 1679,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().find_unique(where={\"id\": key_id})",
                                                                    "start_token": 1664,
                                                                    "end_token": 1679,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().find_unique",
                                                                            "start_token": 1664,
                                                                            "end_token": 1670,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1664,
                                                                                    "end_token": 1668,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1664,
                                                                                            "end_token": 1666,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1664,
                                                                                                    "end_token": 1664,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1666,
                                                                                                    "end_token": 1666,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1667,
                                                                                            "end_token": 1668,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "find_unique",
                                                                                    "start_token": 1670,
                                                                                    "end_token": 1670,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(where={\"id\": key_id})",
                                                                            "start_token": 1671,
                                                                            "end_token": 1679,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where={\"id\": key_id}",
                                                                                    "start_token": 1672,
                                                                                    "end_token": 1678,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1672,
                                                                                            "end_token": 1672,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"id\": key_id}",
                                                                                            "start_token": 1674,
                                                                                            "end_token": 1678,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"id\": key_id",
                                                                                                    "start_token": 1675,
                                                                                                    "end_token": 1677,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"id\"",
                                                                                                            "start_token": 1675,
                                                                                                            "end_token": 1675,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1675,
                                                                                                                    "end_token": 1675,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "id",
                                                                                                                    "start_token": 1675,
                                                                                                                    "end_token": 1675,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1675,
                                                                                                                    "end_token": 1675,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "key_id",
                                                                                                            "start_token": 1677,
                                                                                                            "end_token": 1677,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if api_key is None:\n            raise APIKeyNotFoundError(\"No such API key found.\")",
                                            "start_token": 1682,
                                            "end_token": 1692,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "api_key is None",
                                                    "start_token": 1683,
                                                    "end_token": 1685,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "api_key",
                                                            "start_token": 1683,
                                                            "end_token": 1683,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 1685,
                                                            "end_token": 1685,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyNotFoundError(\"No such API key found.\")",
                                                    "start_token": 1688,
                                                    "end_token": 1692,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyNotFoundError(\"No such API key found.\")",
                                                            "start_token": 1688,
                                                            "end_token": 1692,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyNotFoundError(\"No such API key found.\")",
                                                                    "start_token": 1689,
                                                                    "end_token": 1692,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyNotFoundError",
                                                                            "start_token": 1689,
                                                                            "end_token": 1689,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"No such API key found.\")",
                                                                            "start_token": 1690,
                                                                            "end_token": 1692,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"No such API key found.\"",
                                                                                    "start_token": 1691,
                                                                                    "end_token": 1691,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1691,
                                                                                            "end_token": 1691,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "No such API key found.",
                                                                                            "start_token": 1691,
                                                                                            "end_token": 1691,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1691,
                                                                                            "end_token": 1691,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if api_key.userId != user_id:\n            raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )",
                                            "start_token": 1695,
                                            "end_token": 1710,
                                            "children": [
                                                {
                                                    "type": "comparison_operator",
                                                    "label": "api_key.userId != user_id",
                                                    "start_token": 1696,
                                                    "end_token": 1701,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "api_key.userId",
                                                            "start_token": 1696,
                                                            "end_token": 1698,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "api_key",
                                                                    "start_token": 1696,
                                                                    "end_token": 1696,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "userId",
                                                                    "start_token": 1698,
                                                                    "end_token": 1698,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "user_id",
                                                            "start_token": 1701,
                                                            "end_token": 1701,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )",
                                                    "start_token": 1704,
                                                    "end_token": 1710,
                                                    "children": [
                                                        {
                                                            "type": "raise_statement",
                                                            "label": "raise APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )",
                                                            "start_token": 1704,
                                                            "end_token": 1710,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyPermissionError(\n                \"You do not have permission to update this API key.\"\n            )",
                                                                    "start_token": 1705,
                                                                    "end_token": 1710,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "APIKeyPermissionError",
                                                                            "start_token": 1705,
                                                                            "end_token": 1705,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n                \"You do not have permission to update this API key.\"\n            )",
                                                                            "start_token": 1706,
                                                                            "end_token": 1710,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"You do not have permission to update this API key.\"",
                                                                                    "start_token": 1708,
                                                                                    "end_token": 1708,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1708,
                                                                                            "end_token": 1708,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "You do not have permission to update this API key.",
                                                                                            "start_token": 1708,
                                                                                            "end_token": 1708,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1708,
                                                                                            "end_token": 1708,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                            "start_token": 1713,
                                            "end_token": 1721,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "where_clause: APIKeyWhereUniqueInput = {\"id\": key_id}",
                                                    "start_token": 1713,
                                                    "end_token": 1721,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "where_clause",
                                                            "start_token": 1713,
                                                            "end_token": 1713,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "type",
                                                            "label": "APIKeyWhereUniqueInput",
                                                            "start_token": 1715,
                                                            "end_token": 1715,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyWhereUniqueInput",
                                                                    "start_token": 1715,
                                                                    "end_token": 1715,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "dictionary",
                                                            "label": "{\"id\": key_id}",
                                                            "start_token": 1717,
                                                            "end_token": 1721,
                                                            "children": [
                                                                {
                                                                    "type": "pair",
                                                                    "label": "\"id\": key_id",
                                                                    "start_token": 1718,
                                                                    "end_token": 1720,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "\"id\"",
                                                                            "start_token": 1718,
                                                                            "end_token": 1718,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "\"",
                                                                                    "start_token": 1718,
                                                                                    "end_token": 1718,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "id",
                                                                                    "start_token": 1718,
                                                                                    "end_token": 1718,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1718,
                                                                                    "end_token": 1718,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "key_id",
                                                                            "start_token": 1720,
                                                                            "end_token": 1720,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "expression_statement",
                                            "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )",
                                            "start_token": 1723,
                                            "end_token": 1750,
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "label": "updated_api_key = await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )",
                                                    "start_token": 1723,
                                                    "end_token": 1750,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "updated_api_key",
                                                            "start_token": 1723,
                                                            "end_token": 1723,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "await",
                                                            "label": "await PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )",
                                                            "start_token": 1725,
                                                            "end_token": 1750,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "PrismaAPIKey.prisma().update(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )",
                                                                    "start_token": 1726,
                                                                    "end_token": 1750,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "PrismaAPIKey.prisma().update",
                                                                            "start_token": 1726,
                                                                            "end_token": 1732,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "PrismaAPIKey.prisma()",
                                                                                    "start_token": 1726,
                                                                                    "end_token": 1730,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "PrismaAPIKey.prisma",
                                                                                            "start_token": 1726,
                                                                                            "end_token": 1728,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "PrismaAPIKey",
                                                                                                    "start_token": 1726,
                                                                                                    "end_token": 1726,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "prisma",
                                                                                                    "start_token": 1728,
                                                                                                    "end_token": 1728,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "()",
                                                                                            "start_token": 1729,
                                                                                            "end_token": 1730,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "update",
                                                                                    "start_token": 1732,
                                                                                    "end_token": 1732,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            where=where_clause,\n            data=APIKeyUpdateInput(permissions=permissions),\n        )",
                                                                            "start_token": 1733,
                                                                            "end_token": 1750,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "where=where_clause",
                                                                                    "start_token": 1735,
                                                                                    "end_token": 1737,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where",
                                                                                            "start_token": 1735,
                                                                                            "end_token": 1735,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "where_clause",
                                                                                            "start_token": 1737,
                                                                                            "end_token": 1737,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "data=APIKeyUpdateInput(permissions=permissions)",
                                                                                    "start_token": 1740,
                                                                                    "end_token": 1747,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "data",
                                                                                            "start_token": 1740,
                                                                                            "end_token": 1740,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "APIKeyUpdateInput(permissions=permissions)",
                                                                                            "start_token": 1742,
                                                                                            "end_token": 1747,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "APIKeyUpdateInput",
                                                                                                    "start_token": 1742,
                                                                                                    "end_token": 1742,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(permissions=permissions)",
                                                                                                    "start_token": 1743,
                                                                                                    "end_token": 1747,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "keyword_argument",
                                                                                                            "label": "permissions=permissions",
                                                                                                            "start_token": 1744,
                                                                                                            "end_token": 1746,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "permissions",
                                                                                                                    "start_token": 1744,
                                                                                                                    "end_token": 1744,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "permissions",
                                                                                                                    "start_token": 1746,
                                                                                                                    "end_token": 1746,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "if_statement",
                                            "label": "if updated_api_key:\n            return APIKeyWithoutHash.from_db(updated_api_key)",
                                            "start_token": 1753,
                                            "end_token": 1763,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "updated_api_key",
                                                    "start_token": 1754,
                                                    "end_token": 1754,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                    "start_token": 1757,
                                                    "end_token": 1763,
                                                    "children": [
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return APIKeyWithoutHash.from_db(updated_api_key)",
                                                            "start_token": 1757,
                                                            "end_token": 1763,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "APIKeyWithoutHash.from_db(updated_api_key)",
                                                                    "start_token": 1758,
                                                                    "end_token": 1763,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "APIKeyWithoutHash.from_db",
                                                                            "start_token": 1758,
                                                                            "end_token": 1760,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "APIKeyWithoutHash",
                                                                                    "start_token": 1758,
                                                                                    "end_token": 1758,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "from_db",
                                                                                    "start_token": 1760,
                                                                                    "end_token": 1760,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(updated_api_key)",
                                                                            "start_token": 1761,
                                                                            "end_token": 1763,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "updated_api_key",
                                                                                    "start_token": 1762,
                                                                                    "end_token": 1762,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "return_statement",
                                            "label": "return None",
                                            "start_token": 1765,
                                            "end_token": 1766,
                                            "children": [
                                                {
                                                    "type": "none",
                                                    "label": "None",
                                                    "start_token": 1766,
                                                    "end_token": 1766,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except (APIKeyNotFoundError, APIKeyPermissionError) as e:\n        raise e",
                                    "start_token": 1768,
                                    "end_token": 1779,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "(APIKeyNotFoundError, APIKeyPermissionError) as e",
                                            "start_token": 1769,
                                            "end_token": 1775,
                                            "children": [
                                                {
                                                    "type": "tuple",
                                                    "label": "(APIKeyNotFoundError, APIKeyPermissionError)",
                                                    "start_token": 1769,
                                                    "end_token": 1773,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyNotFoundError",
                                                            "start_token": 1770,
                                                            "end_token": 1770,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "APIKeyPermissionError",
                                                            "start_token": 1772,
                                                            "end_token": 1772,
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1775,
                                                    "end_token": 1775,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1775,
                                                            "end_token": 1775,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise e",
                                            "start_token": 1778,
                                            "end_token": 1779,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise e",
                                                    "start_token": 1778,
                                                    "end_token": 1779,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1779,
                                                            "end_token": 1779,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except PrismaError as e:\n        logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                    "start_token": 1781,
                                    "end_token": 1800,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "PrismaError as e",
                                            "start_token": 1782,
                                            "end_token": 1784,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "PrismaError",
                                                    "start_token": 1782,
                                                    "end_token": 1782,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1784,
                                                    "end_token": 1784,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1784,
                                                            "end_token": 1784,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Database error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                            "start_token": 1787,
                                            "end_token": 1800,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Database error while updating API key permissions: {str(e)}\")",
                                                    "start_token": 1787,
                                                    "end_token": 1793,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Database error while updating API key permissions: {str(e)}\")",
                                                            "start_token": 1787,
                                                            "end_token": 1793,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1787,
                                                                    "end_token": 1789,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1787,
                                                                            "end_token": 1787,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1789,
                                                                            "end_token": 1789,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Database error while updating API key permissions: {str(e)}\")",
                                                                    "start_token": 1790,
                                                                    "end_token": 1793,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Database error while updating API key permissions: {str(e)}\"",
                                                                            "start_token": 1791,
                                                                            "end_token": 1792,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1791,
                                                                                    "end_token": 1792,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Database error while updating API key permissions: ",
                                                                                    "start_token": 1792,
                                                                                    "end_token": 1792,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1792,
                                                                                    "end_token": 1792,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1792,
                                                                                            "end_token": 1792,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1792,
                                                                                                    "end_token": 1792,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1792,
                                                                                                    "end_token": 1792,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1792,
                                                                                                            "end_token": 1792,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1792,
                                                                                    "end_token": 1792,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                                    "start_token": 1795,
                                                    "end_token": 1800,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                                            "start_token": 1796,
                                                            "end_token": 1800,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1796,
                                                                    "end_token": 1796,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to update API key permissions: {str(e)}\")",
                                                                    "start_token": 1797,
                                                                    "end_token": 1800,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to update API key permissions: {str(e)}\"",
                                                                            "start_token": 1798,
                                                                            "end_token": 1799,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1798,
                                                                                    "end_token": 1799,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to update API key permissions: ",
                                                                                    "start_token": 1799,
                                                                                    "end_token": 1799,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1799,
                                                                                    "end_token": 1799,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1799,
                                                                                            "end_token": 1799,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1799,
                                                                                                    "end_token": 1799,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1799,
                                                                                                    "end_token": 1799,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1799,
                                                                                                            "end_token": 1799,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1799,
                                                                                    "end_token": 1799,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "label": "except Exception as e:\n        logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                    "start_token": 1802,
                                    "end_token": 1821,
                                    "children": [
                                        {
                                            "type": "as_pattern",
                                            "label": "Exception as e",
                                            "start_token": 1803,
                                            "end_token": 1805,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1803,
                                                    "end_token": 1803,
                                                    "children": []
                                                },
                                                {
                                                    "type": "as_pattern_target",
                                                    "label": "e",
                                                    "start_token": 1805,
                                                    "end_token": 1805,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "e",
                                                            "start_token": 1805,
                                                            "end_token": 1805,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")\n        raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                            "start_token": 1808,
                                            "end_token": 1821,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")",
                                                    "start_token": 1808,
                                                    "end_token": 1814,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "logger.error(f\"Unexpected error while updating API key permissions: {str(e)}\")",
                                                            "start_token": 1808,
                                                            "end_token": 1814,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "logger.error",
                                                                    "start_token": 1808,
                                                                    "end_token": 1810,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "logger",
                                                                            "start_token": 1808,
                                                                            "end_token": 1808,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "error",
                                                                            "start_token": 1810,
                                                                            "end_token": 1810,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Unexpected error while updating API key permissions: {str(e)}\")",
                                                                    "start_token": 1811,
                                                                    "end_token": 1814,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Unexpected error while updating API key permissions: {str(e)}\"",
                                                                            "start_token": 1812,
                                                                            "end_token": 1813,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1812,
                                                                                    "end_token": 1813,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Unexpected error while updating API key permissions: ",
                                                                                    "start_token": 1813,
                                                                                    "end_token": 1813,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1813,
                                                                                    "end_token": 1813,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1813,
                                                                                            "end_token": 1813,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1813,
                                                                                                    "end_token": 1813,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1813,
                                                                                                    "end_token": 1813,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1813,
                                                                                                            "end_token": 1813,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1813,
                                                                                    "end_token": 1813,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                                    "start_token": 1816,
                                                    "end_token": 1821,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "APIKeyError(f\"Failed to update API key permissions: {str(e)}\")",
                                                            "start_token": 1817,
                                                            "end_token": 1821,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "APIKeyError",
                                                                    "start_token": 1817,
                                                                    "end_token": 1817,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(f\"Failed to update API key permissions: {str(e)}\")",
                                                                    "start_token": 1818,
                                                                    "end_token": 1821,
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "label": "f\"Failed to update API key permissions: {str(e)}\"",
                                                                            "start_token": 1819,
                                                                            "end_token": 1820,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string_start",
                                                                                    "label": "f\"",
                                                                                    "start_token": 1819,
                                                                                    "end_token": 1820,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string_content",
                                                                                    "label": "Failed to update API key permissions: ",
                                                                                    "start_token": 1820,
                                                                                    "end_token": 1820,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "interpolation",
                                                                                    "label": "{str(e)}",
                                                                                    "start_token": 1820,
                                                                                    "end_token": 1820,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "call",
                                                                                            "label": "str(e)",
                                                                                            "start_token": 1820,
                                                                                            "end_token": 1820,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "str",
                                                                                                    "start_token": 1820,
                                                                                                    "end_token": 1820,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "argument_list",
                                                                                                    "label": "(e)",
                                                                                                    "start_token": 1820,
                                                                                                    "end_token": 1820,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "e",
                                                                                                            "start_token": 1820,
                                                                                                            "end_token": 1820,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "string_end",
                                                                                    "label": "\"",
                                                                                    "start_token": 1820,
                                                                                    "end_token": 1820,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}