{
    "type": "module",
    "label": "import logging\nimport typing\nimport urllib.parse\n\nimport autogpt_libs.auth.depends\nimport autogpt_libs.auth.middleware\nimport fastapi\nimport fastapi.responses\n\nimport backend.data.graph\nimport backend.server.v2.store.db\nimport backend.server.v2.store.image_gen\nimport backend.server.v2.store.media\nimport backend.server.v2.store.model\n\nlogger = logging.getLogger(__name__)\n\nrouter = fastapi.APIRouter()\n\n\n##############################################\n############### Profile Endpoints ############\n##############################################\n\n\n@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)\nasync def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )\n\n\n@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )\n\n\n##############################################\n############### Agent Endpoints ##############\n##############################################\n\n\n@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)\nasync def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )\n\n\n@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)\nasync def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )\n\n\n@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)\nasync def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )\n\n\n##############################################\n############# Creator Endpoints #############\n##############################################\n\n\n@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)\nasync def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )\n\n\n@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )\n\n\n############################################\n############# Store Submissions ###############\n############################################\n@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)\nasync def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )\n\n\n@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)\nasync def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )\n\n\n@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)\nasync def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )\n\n\n@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)\nasync def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )\n\n\n@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )\n\n\n@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )\n",
    "start_token": 0,
    "end_token": 3173,
    "children": [
        {
            "type": "import_statement",
            "label": "import logging",
            "start_token": 0,
            "end_token": 1,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "logging",
                    "start_token": 1,
                    "end_token": 1,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logging",
                            "start_token": 1,
                            "end_token": 1,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import typing",
            "start_token": 3,
            "end_token": 4,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "typing",
                    "start_token": 4,
                    "end_token": 4,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "typing",
                            "start_token": 4,
                            "end_token": 4,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import urllib.parse",
            "start_token": 6,
            "end_token": 9,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "urllib.parse",
                    "start_token": 7,
                    "end_token": 9,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "urllib",
                            "start_token": 7,
                            "end_token": 7,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "parse",
                            "start_token": 9,
                            "end_token": 9,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import autogpt_libs.auth.depends",
            "start_token": 12,
            "end_token": 17,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "autogpt_libs.auth.depends",
                    "start_token": 13,
                    "end_token": 17,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "autogpt_libs",
                            "start_token": 13,
                            "end_token": 13,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "auth",
                            "start_token": 15,
                            "end_token": 15,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "depends",
                            "start_token": 17,
                            "end_token": 17,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import autogpt_libs.auth.middleware",
            "start_token": 19,
            "end_token": 24,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "autogpt_libs.auth.middleware",
                    "start_token": 20,
                    "end_token": 24,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "autogpt_libs",
                            "start_token": 20,
                            "end_token": 20,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "auth",
                            "start_token": 22,
                            "end_token": 22,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "middleware",
                            "start_token": 24,
                            "end_token": 24,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import fastapi",
            "start_token": 26,
            "end_token": 27,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "fastapi",
                    "start_token": 27,
                    "end_token": 27,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "fastapi",
                            "start_token": 27,
                            "end_token": 27,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import fastapi.responses",
            "start_token": 29,
            "end_token": 32,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "fastapi.responses",
                    "start_token": 30,
                    "end_token": 32,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "fastapi",
                            "start_token": 30,
                            "end_token": 30,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "responses",
                            "start_token": 32,
                            "end_token": 32,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.data.graph",
            "start_token": 35,
            "end_token": 40,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.data.graph",
                    "start_token": 36,
                    "end_token": 40,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 36,
                            "end_token": 36,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "data",
                            "start_token": 38,
                            "end_token": 38,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "graph",
                            "start_token": 40,
                            "end_token": 40,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.db",
            "start_token": 42,
            "end_token": 51,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.db",
                    "start_token": 43,
                    "end_token": 51,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 43,
                            "end_token": 43,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "start_token": 45,
                            "end_token": 45,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "start_token": 47,
                            "end_token": 47,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "start_token": 49,
                            "end_token": 49,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "db",
                            "start_token": 51,
                            "end_token": 51,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.image_gen",
            "start_token": 53,
            "end_token": 62,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.image_gen",
                    "start_token": 54,
                    "end_token": 62,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 54,
                            "end_token": 54,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "start_token": 56,
                            "end_token": 56,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "start_token": 58,
                            "end_token": 58,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "start_token": 60,
                            "end_token": 60,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "image_gen",
                            "start_token": 62,
                            "end_token": 62,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.media",
            "start_token": 64,
            "end_token": 73,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.media",
                    "start_token": 65,
                    "end_token": 73,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 65,
                            "end_token": 65,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "start_token": 67,
                            "end_token": 67,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "start_token": 69,
                            "end_token": 69,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "start_token": 71,
                            "end_token": 71,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "media",
                            "start_token": 73,
                            "end_token": 73,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.model",
            "start_token": 75,
            "end_token": 84,
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.model",
                    "start_token": 76,
                    "end_token": 84,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "start_token": 76,
                            "end_token": 76,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "start_token": 78,
                            "end_token": 78,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "start_token": 80,
                            "end_token": 80,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "start_token": 82,
                            "end_token": 82,
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "model",
                            "start_token": 84,
                            "end_token": 84,
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "logger = logging.getLogger(__name__)",
            "start_token": 87,
            "end_token": 94,
            "children": [
                {
                    "type": "assignment",
                    "label": "logger = logging.getLogger(__name__)",
                    "start_token": 87,
                    "end_token": 94,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logger",
                            "start_token": 87,
                            "end_token": 87,
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "logging.getLogger(__name__)",
                            "start_token": 89,
                            "end_token": 94,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "logging.getLogger",
                                    "start_token": 89,
                                    "end_token": 91,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "logging",
                                            "start_token": 89,
                                            "end_token": 89,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "getLogger",
                                            "start_token": 91,
                                            "end_token": 91,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(__name__)",
                                    "start_token": 92,
                                    "end_token": 94,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "__name__",
                                            "start_token": 93,
                                            "end_token": 93,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "router = fastapi.APIRouter()",
            "start_token": 97,
            "end_token": 103,
            "children": [
                {
                    "type": "assignment",
                    "label": "router = fastapi.APIRouter()",
                    "start_token": 97,
                    "end_token": 103,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "router",
                            "start_token": 97,
                            "end_token": 97,
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "fastapi.APIRouter()",
                            "start_token": 99,
                            "end_token": 103,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "fastapi.APIRouter",
                                    "start_token": 99,
                                    "end_token": 101,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "fastapi",
                                            "start_token": 99,
                                            "end_token": 99,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "APIRouter",
                                            "start_token": 101,
                                            "end_token": 101,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "()",
                                    "start_token": 102,
                                    "end_token": 103,
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 107,
            "end_token": 152,
            "children": []
        },
        {
            "type": "comment",
            "label": "############### Profile Endpoints ############",
            "start_token": 154,
            "end_token": 182,
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 184,
            "end_token": 229,
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)\nasync def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
            "start_token": 233,
            "end_token": 361,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                    "start_token": 233,
                    "end_token": 266,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                            "start_token": 234,
                            "end_token": 266,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 234,
                                    "end_token": 236,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 234,
                                            "end_token": 234,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 236,
                                            "end_token": 236,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                                    "start_token": 237,
                                    "end_token": 266,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/profile\"",
                                            "start_token": 239,
                                            "end_token": 239,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 239,
                                                    "end_token": 239,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/profile",
                                                    "start_token": 239,
                                                    "end_token": 239,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 239,
                                                    "end_token": 239,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 242,
                                            "end_token": 248,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 242,
                                                    "end_token": 242,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 244,
                                                    "end_token": 248,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 245,
                                                            "end_token": 245,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 245,
                                                                    "end_token": 245,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 245,
                                                                    "end_token": 245,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 245,
                                                                    "end_token": 245,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 247,
                                                            "end_token": 247,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 247,
                                                                    "end_token": 247,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 247,
                                                                    "end_token": 247,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 247,
                                                                    "end_token": 247,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.ProfileDetails",
                                            "start_token": 251,
                                            "end_token": 263,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 251,
                                                    "end_token": 251,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.ProfileDetails",
                                                    "start_token": 253,
                                                    "end_token": 263,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 253,
                                                            "end_token": 261,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 253,
                                                                    "end_token": 259,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 253,
                                                                            "end_token": 257,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 253,
                                                                                    "end_token": 255,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 253,
                                                                                            "end_token": 253,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 255,
                                                                                            "end_token": 255,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 257,
                                                                                    "end_token": 257,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 259,
                                                                            "end_token": 259,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 261,
                                                                    "end_token": 261,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "ProfileDetails",
                                                            "start_token": 263,
                                                            "end_token": 263,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                    "start_token": 268,
                    "end_token": 361,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_profile",
                            "start_token": 270,
                            "end_token": 270,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)",
                            "start_token": 271,
                            "end_token": 297,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 273,
                                    "end_token": 295,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 273,
                                            "end_token": 273,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 275,
                                            "end_token": 295,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 275,
                                                    "end_token": 295,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 275,
                                                            "end_token": 277,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 275,
                                                                    "end_token": 275,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 277,
                                                                    "end_token": 277,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 280,
                                                            "end_token": 280,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 282,
                                                            "end_token": 293,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 282,
                                                                    "end_token": 284,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 282,
                                                                            "end_token": 282,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 284,
                                                                            "end_token": 284,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 285,
                                                                    "end_token": 293,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 286,
                                                                            "end_token": 292,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 286,
                                                                                    "end_token": 290,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 286,
                                                                                            "end_token": 288,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 286,
                                                                                                    "end_token": 286,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 288,
                                                                                                    "end_token": 288,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 290,
                                                                                            "end_token": 290,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 292,
                                                                                    "end_token": 292,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                            "start_token": 300,
                            "end_token": 361,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"",
                                    "start_token": 300,
                                    "end_token": 302,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"",
                                            "start_token": 300,
                                            "end_token": 302,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 300,
                                                    "end_token": 301,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get the profile details for the authenticated user.\n    ",
                                                    "start_token": 301,
                                                    "end_token": 301,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 301,
                                                    "end_token": 302,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                    "start_token": 304,
                                    "end_token": 361,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile",
                                            "start_token": 307,
                                            "end_token": 326,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)",
                                                    "start_token": 307,
                                                    "end_token": 323,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)",
                                                            "start_token": 307,
                                                            "end_token": 323,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "profile",
                                                                    "start_token": 307,
                                                                    "end_token": 307,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_user_profile(user_id)",
                                                                    "start_token": 309,
                                                                    "end_token": 323,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_user_profile(user_id)",
                                                                            "start_token": 310,
                                                                            "end_token": 323,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_user_profile",
                                                                                    "start_token": 310,
                                                                                    "end_token": 320,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 310,
                                                                                            "end_token": 318,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 310,
                                                                                                    "end_token": 316,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 310,
                                                                                                            "end_token": 314,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 310,
                                                                                                                    "end_token": 312,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 310,
                                                                                                                            "end_token": 310,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 312,
                                                                                                                            "end_token": 312,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 314,
                                                                                                                    "end_token": 314,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 316,
                                                                                                            "end_token": 316,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 318,
                                                                                                    "end_token": 318,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_user_profile",
                                                                                            "start_token": 320,
                                                                                            "end_token": 320,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(user_id)",
                                                                                    "start_token": 321,
                                                                                    "end_token": 323,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "start_token": 322,
                                                                                            "end_token": 322,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return profile",
                                                    "start_token": 325,
                                                    "end_token": 326,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "profile",
                                                            "start_token": 326,
                                                            "end_token": 326,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                            "start_token": 328,
                                            "end_token": 361,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 329,
                                                    "end_token": 329,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                    "start_token": 332,
                                                    "end_token": 361,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting user profile\")",
                                                            "start_token": 332,
                                                            "end_token": 337,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting user profile\")",
                                                                    "start_token": 332,
                                                                    "end_token": 337,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 332,
                                                                            "end_token": 334,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 332,
                                                                                    "end_token": 332,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 334,
                                                                                    "end_token": 334,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting user profile\")",
                                                                            "start_token": 335,
                                                                            "end_token": 337,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting user profile\"",
                                                                                    "start_token": 336,
                                                                                    "end_token": 336,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 336,
                                                                                            "end_token": 336,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting user profile",
                                                                                            "start_token": 336,
                                                                                            "end_token": 336,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 336,
                                                                                            "end_token": 336,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                            "start_token": 339,
                                                            "end_token": 361,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                                    "start_token": 340,
                                                                    "end_token": 361,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 340,
                                                                            "end_token": 344,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 340,
                                                                                    "end_token": 342,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 340,
                                                                                            "end_token": 340,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 342,
                                                                                            "end_token": 342,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 344,
                                                                                    "end_token": 344,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                                            "start_token": 345,
                                                                            "end_token": 361,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 347,
                                                                                    "end_token": 349,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 347,
                                                                                            "end_token": 347,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 349,
                                                                                            "end_token": 349,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the user profile\"}",
                                                                                    "start_token": 352,
                                                                                    "end_token": 358,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 352,
                                                                                            "end_token": 352,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the user profile\"}",
                                                                                            "start_token": 354,
                                                                                            "end_token": 358,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the user profile\"",
                                                                                                    "start_token": 355,
                                                                                                    "end_token": 357,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 355,
                                                                                                            "end_token": 355,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 355,
                                                                                                                    "end_token": 355,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 355,
                                                                                                                    "end_token": 355,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 355,
                                                                                                                    "end_token": 355,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the user profile\"",
                                                                                                            "start_token": 357,
                                                                                                            "end_token": 357,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 357,
                                                                                                                    "end_token": 357,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the user profile",
                                                                                                                    "start_token": 357,
                                                                                                                    "end_token": 357,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 357,
                                                                                                                    "end_token": 357,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
            "start_token": 365,
            "end_token": 535,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                    "start_token": 365,
                    "end_token": 416,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                            "start_token": 366,
                            "end_token": 416,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "start_token": 366,
                                    "end_token": 368,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 366,
                                            "end_token": 366,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "start_token": 368,
                                            "end_token": 368,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                                    "start_token": 369,
                                    "end_token": 416,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/profile\"",
                                            "start_token": 371,
                                            "end_token": 371,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 371,
                                                    "end_token": 371,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/profile",
                                                    "start_token": 371,
                                                    "end_token": 371,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 371,
                                                    "end_token": 371,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 374,
                                            "end_token": 380,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 374,
                                                    "end_token": 374,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 376,
                                                    "end_token": 380,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 377,
                                                            "end_token": 377,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 377,
                                                                    "end_token": 377,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 377,
                                                                    "end_token": 377,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 377,
                                                                    "end_token": 377,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 379,
                                                            "end_token": 379,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 379,
                                                                    "end_token": 379,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 379,
                                                                    "end_token": 379,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 379,
                                                                    "end_token": 379,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 383,
                                            "end_token": 398,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 383,
                                                    "end_token": 383,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 385,
                                                    "end_token": 398,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 386,
                                                            "end_token": 397,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 386,
                                                                    "end_token": 388,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 386,
                                                                            "end_token": 386,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 388,
                                                                            "end_token": 388,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 389,
                                                                    "end_token": 397,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 390,
                                                                            "end_token": 396,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 390,
                                                                                    "end_token": 394,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 390,
                                                                                            "end_token": 392,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 390,
                                                                                                    "end_token": 390,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 392,
                                                                                                    "end_token": 392,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 394,
                                                                                            "end_token": 394,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 396,
                                                                                    "end_token": 396,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails",
                                            "start_token": 401,
                                            "end_token": 413,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 401,
                                                    "end_token": 401,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorDetails",
                                                    "start_token": 403,
                                                    "end_token": 413,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 403,
                                                            "end_token": 411,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 403,
                                                                    "end_token": 409,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 403,
                                                                            "end_token": 407,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 403,
                                                                                    "end_token": 405,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 403,
                                                                                            "end_token": 403,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 405,
                                                                                            "end_token": 405,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 407,
                                                                                    "end_token": 407,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 409,
                                                                            "end_token": 409,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 411,
                                                                    "end_token": 411,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorDetails",
                                                            "start_token": 413,
                                                            "end_token": 413,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                    "start_token": 418,
                    "end_token": 535,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "update_or_create_profile",
                            "start_token": 420,
                            "end_token": 420,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "start_token": 421,
                            "end_token": 463,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "profile: backend.server.v2.store.model.Profile",
                                    "start_token": 423,
                                    "end_token": 435,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "profile",
                                            "start_token": 423,
                                            "end_token": 423,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.Profile",
                                            "start_token": 425,
                                            "end_token": 435,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.Profile",
                                                    "start_token": 425,
                                                    "end_token": 435,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 425,
                                                            "end_token": 433,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 425,
                                                                    "end_token": 431,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 425,
                                                                            "end_token": 429,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 425,
                                                                                    "end_token": 427,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 425,
                                                                                            "end_token": 425,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 427,
                                                                                            "end_token": 427,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 429,
                                                                                    "end_token": 429,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 431,
                                                                            "end_token": 431,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 433,
                                                                    "end_token": 433,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "Profile",
                                                            "start_token": 435,
                                                            "end_token": 435,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 438,
                                    "end_token": 460,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 438,
                                            "end_token": 438,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 440,
                                            "end_token": 460,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 440,
                                                    "end_token": 460,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 440,
                                                            "end_token": 442,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 440,
                                                                    "end_token": 440,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 442,
                                                                    "end_token": 442,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 445,
                                                            "end_token": 445,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 447,
                                                            "end_token": 458,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 447,
                                                                    "end_token": 449,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 447,
                                                                            "end_token": 447,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 449,
                                                                            "end_token": 449,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 450,
                                                                    "end_token": 458,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 451,
                                                                            "end_token": 457,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 451,
                                                                                    "end_token": 455,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 451,
                                                                                            "end_token": 453,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 451,
                                                                                                    "end_token": 451,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 453,
                                                                                                    "end_token": 453,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 455,
                                                                                            "end_token": 455,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 457,
                                                                                    "end_token": 457,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                            "start_token": 466,
                            "end_token": 535,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"",
                                    "start_token": 466,
                                    "end_token": 468,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"",
                                            "start_token": 466,
                                            "end_token": 468,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 466,
                                                    "end_token": 467,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    ",
                                                    "start_token": 467,
                                                    "end_token": 467,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 467,
                                                    "end_token": 468,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                    "start_token": 470,
                                    "end_token": 535,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile",
                                            "start_token": 473,
                                            "end_token": 500,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                    "start_token": 473,
                                                    "end_token": 497,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                            "start_token": 473,
                                                            "end_token": 497,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "updated_profile",
                                                                    "start_token": 473,
                                                                    "end_token": 473,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                                    "start_token": 475,
                                                                    "end_token": 497,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                                            "start_token": 476,
                                                                            "end_token": 497,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.update_or_create_profile",
                                                                                    "start_token": 476,
                                                                                    "end_token": 486,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 476,
                                                                                            "end_token": 484,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 476,
                                                                                                    "end_token": 482,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 476,
                                                                                                            "end_token": 480,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 476,
                                                                                                                    "end_token": 478,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 476,
                                                                                                                            "end_token": 476,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 478,
                                                                                                                            "end_token": 478,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 480,
                                                                                                                    "end_token": 480,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 482,
                                                                                                            "end_token": 482,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 484,
                                                                                                    "end_token": 484,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "update_or_create_profile",
                                                                                            "start_token": 486,
                                                                                            "end_token": 486,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, profile=profile\n        )",
                                                                                    "start_token": 487,
                                                                                    "end_token": 497,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 489,
                                                                                            "end_token": 491,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 489,
                                                                                                    "end_token": 489,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 491,
                                                                                                    "end_token": 491,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "profile=profile",
                                                                                            "start_token": 493,
                                                                                            "end_token": 495,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "profile",
                                                                                                    "start_token": 493,
                                                                                                    "end_token": 493,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "profile",
                                                                                                    "start_token": 495,
                                                                                                    "end_token": 495,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return updated_profile",
                                                    "start_token": 499,
                                                    "end_token": 500,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "updated_profile",
                                                            "start_token": 500,
                                                            "end_token": 500,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                            "start_token": 502,
                                            "end_token": 535,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 503,
                                                    "end_token": 503,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                    "start_token": 506,
                                                    "end_token": 535,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst updating profile\")",
                                                            "start_token": 506,
                                                            "end_token": 511,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst updating profile\")",
                                                                    "start_token": 506,
                                                                    "end_token": 511,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 506,
                                                                            "end_token": 508,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 506,
                                                                                    "end_token": 506,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 508,
                                                                                    "end_token": 508,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst updating profile\")",
                                                                            "start_token": 509,
                                                                            "end_token": 511,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst updating profile\"",
                                                                                    "start_token": 510,
                                                                                    "end_token": 510,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 510,
                                                                                            "end_token": 510,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst updating profile",
                                                                                            "start_token": 510,
                                                                                            "end_token": 510,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 510,
                                                                                            "end_token": 510,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                            "start_token": 513,
                                                            "end_token": 535,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                                    "start_token": 514,
                                                                    "end_token": 535,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 514,
                                                                            "end_token": 518,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 514,
                                                                                    "end_token": 516,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 514,
                                                                                            "end_token": 514,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 516,
                                                                                            "end_token": 516,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 518,
                                                                                    "end_token": 518,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                                            "start_token": 519,
                                                                            "end_token": 535,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 521,
                                                                                    "end_token": 523,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 521,
                                                                                            "end_token": 521,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 523,
                                                                                            "end_token": 523,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while updating the user profile\"}",
                                                                                    "start_token": 526,
                                                                                    "end_token": 532,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 526,
                                                                                            "end_token": 526,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while updating the user profile\"}",
                                                                                            "start_token": 528,
                                                                                            "end_token": 532,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while updating the user profile\"",
                                                                                                    "start_token": 529,
                                                                                                    "end_token": 531,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 529,
                                                                                                            "end_token": 529,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 529,
                                                                                                                    "end_token": 529,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 529,
                                                                                                                    "end_token": 529,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 529,
                                                                                                                    "end_token": 529,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while updating the user profile\"",
                                                                                                            "start_token": 531,
                                                                                                            "end_token": 531,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 531,
                                                                                                                    "end_token": 531,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while updating the user profile",
                                                                                                                    "start_token": 531,
                                                                                                                    "end_token": 531,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 531,
                                                                                                                    "end_token": 531,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 539,
            "end_token": 584,
            "children": []
        },
        {
            "type": "comment",
            "label": "############### Agent Endpoints ##############",
            "start_token": 586,
            "end_token": 616,
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 618,
            "end_token": 663,
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)\nasync def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
            "start_token": 667,
            "end_token": 913,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                    "start_token": 667,
                    "end_token": 700,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                            "start_token": 668,
                            "end_token": 700,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 668,
                                    "end_token": 670,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 668,
                                            "end_token": 668,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 670,
                                            "end_token": 670,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                                    "start_token": 671,
                                    "end_token": 700,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents\"",
                                            "start_token": 673,
                                            "end_token": 673,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 673,
                                                    "end_token": 673,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents",
                                                    "start_token": 673,
                                                    "end_token": 673,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 673,
                                                    "end_token": 673,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "start_token": 676,
                                            "end_token": 682,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 676,
                                                    "end_token": 676,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "start_token": 678,
                                                    "end_token": 682,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 679,
                                                            "end_token": 679,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 679,
                                                                    "end_token": 679,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 679,
                                                                    "end_token": 679,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 679,
                                                                    "end_token": 679,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "start_token": 681,
                                                            "end_token": 681,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 681,
                                                                    "end_token": 681,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "start_token": 681,
                                                                    "end_token": 681,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 681,
                                                                    "end_token": 681,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentsResponse",
                                            "start_token": 685,
                                            "end_token": 697,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 685,
                                                    "end_token": 685,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreAgentsResponse",
                                                    "start_token": 687,
                                                    "end_token": 697,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 687,
                                                            "end_token": 695,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 687,
                                                                    "end_token": 693,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 687,
                                                                            "end_token": 691,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 687,
                                                                                    "end_token": 689,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 687,
                                                                                            "end_token": 687,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 689,
                                                                                            "end_token": 689,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 691,
                                                                                    "end_token": 691,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 693,
                                                                            "end_token": 693,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 695,
                                                                    "end_token": 695,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreAgentsResponse",
                                                            "start_token": 697,
                                                            "end_token": 697,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                    "start_token": 702,
                    "end_token": 913,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_agents",
                            "start_token": 704,
                            "end_token": 704,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "start_token": 705,
                            "end_token": 764,
                            "children": [
                                {
                                    "type": "typed_default_parameter",
                                    "label": "featured: bool = False",
                                    "start_token": 707,
                                    "end_token": 711,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "featured",
                                            "start_token": 707,
                                            "end_token": 707,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "bool",
                                            "start_token": 709,
                                            "end_token": 709,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "start_token": 709,
                                                    "end_token": 709,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "false",
                                            "label": "False",
                                            "start_token": 711,
                                            "end_token": 711,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "creator: str | None = None",
                                    "start_token": 714,
                                    "end_token": 720,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "creator",
                                            "start_token": 714,
                                            "end_token": 714,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 716,
                                            "end_token": 718,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 716,
                                                    "end_token": 718,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 716,
                                                            "end_token": 716,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 718,
                                                            "end_token": 718,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 720,
                                            "end_token": 720,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "sorted_by: str | None = None",
                                    "start_token": 723,
                                    "end_token": 729,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "sorted_by",
                                            "start_token": 723,
                                            "end_token": 723,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 725,
                                            "end_token": 727,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 725,
                                                    "end_token": 727,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 725,
                                                            "end_token": 725,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 727,
                                                            "end_token": 727,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 729,
                                            "end_token": 729,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "search_query: str | None = None",
                                    "start_token": 732,
                                    "end_token": 738,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "search_query",
                                            "start_token": 732,
                                            "end_token": 732,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 734,
                                            "end_token": 736,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 734,
                                                    "end_token": 736,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 734,
                                                            "end_token": 734,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 736,
                                                            "end_token": 736,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 738,
                                            "end_token": 738,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "category: str | None = None",
                                    "start_token": 741,
                                    "end_token": 747,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "category",
                                            "start_token": 741,
                                            "end_token": 741,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 743,
                                            "end_token": 745,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 743,
                                                    "end_token": 745,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 743,
                                                            "end_token": 743,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 745,
                                                            "end_token": 745,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 747,
                                            "end_token": 747,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "start_token": 750,
                                    "end_token": 754,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "start_token": 750,
                                            "end_token": 750,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 752,
                                            "end_token": 752,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 752,
                                                    "end_token": 752,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "start_token": 754,
                                            "end_token": 754,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "start_token": 757,
                                    "end_token": 761,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "start_token": 757,
                                            "end_token": 757,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 759,
                                            "end_token": 759,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 759,
                                                    "end_token": 759,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "start_token": 761,
                                            "end_token": 761,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                            "start_token": 767,
                            "end_token": 913,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"",
                                    "start_token": 767,
                                    "end_token": 773,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"",
                                            "start_token": 767,
                                            "end_token": 773,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 767,
                                                    "end_token": 768,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    ",
                                                    "start_token": 768,
                                                    "end_token": 772,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 772,
                                                    "end_token": 773,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "start_token": 775,
                                    "end_token": 795,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "start_token": 776,
                                            "end_token": 778,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "start_token": 776,
                                                    "end_token": 776,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 778,
                                                    "end_token": 778,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "start_token": 781,
                                            "end_token": 795,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "start_token": 781,
                                                    "end_token": 795,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "start_token": 782,
                                                            "end_token": 795,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 782,
                                                                    "end_token": 784,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 782,
                                                                            "end_token": 782,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 784,
                                                                            "end_token": 784,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "start_token": 785,
                                                                    "end_token": 795,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 787,
                                                                            "end_token": 789,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 787,
                                                                                    "end_token": 787,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 789,
                                                                                    "end_token": 789,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "start_token": 791,
                                                                            "end_token": 793,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 791,
                                                                                    "end_token": 791,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "start_token": 793,
                                                                                    "end_token": 793,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 793,
                                                                                            "end_token": 793,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "start_token": 793,
                                                                                            "end_token": 793,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 793,
                                                                                            "end_token": 793,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "start_token": 798,
                                    "end_token": 818,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "start_token": 799,
                                            "end_token": 801,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "start_token": 799,
                                                    "end_token": 799,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 801,
                                                    "end_token": 801,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "start_token": 804,
                                            "end_token": 818,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "start_token": 804,
                                                    "end_token": 818,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "start_token": 805,
                                                            "end_token": 818,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 805,
                                                                    "end_token": 807,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 805,
                                                                            "end_token": 805,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 807,
                                                                            "end_token": 807,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "start_token": 808,
                                                                    "end_token": 818,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 810,
                                                                            "end_token": 812,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 810,
                                                                                    "end_token": 810,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 812,
                                                                                    "end_token": 812,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "start_token": 814,
                                                                            "end_token": 816,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 814,
                                                                                    "end_token": 814,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "start_token": 816,
                                                                                    "end_token": 816,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 816,
                                                                                            "end_token": 816,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "start_token": 816,
                                                                                            "end_token": 816,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 816,
                                                                                            "end_token": 816,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                    "start_token": 821,
                                    "end_token": 913,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents",
                                            "start_token": 824,
                                            "end_token": 878,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "start_token": 824,
                                                    "end_token": 875,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "start_token": 824,
                                                            "end_token": 875,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agents",
                                                                    "start_token": 824,
                                                                    "end_token": 824,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "start_token": 826,
                                                                    "end_token": 875,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "start_token": 827,
                                                                            "end_token": 875,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_agents",
                                                                                    "start_token": 827,
                                                                                    "end_token": 837,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 827,
                                                                                            "end_token": 835,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 827,
                                                                                                    "end_token": 833,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 827,
                                                                                                            "end_token": 831,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 827,
                                                                                                                    "end_token": 829,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 827,
                                                                                                                            "end_token": 827,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 829,
                                                                                                                            "end_token": 829,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 831,
                                                                                                                    "end_token": 831,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 833,
                                                                                                            "end_token": 833,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 835,
                                                                                                    "end_token": 835,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_agents",
                                                                                            "start_token": 837,
                                                                                            "end_token": 837,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "start_token": 838,
                                                                                    "end_token": 875,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "featured=featured",
                                                                                            "start_token": 840,
                                                                                            "end_token": 842,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "start_token": 840,
                                                                                                    "end_token": 840,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "start_token": 842,
                                                                                                    "end_token": 842,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "creator=creator",
                                                                                            "start_token": 845,
                                                                                            "end_token": 847,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "creator",
                                                                                                    "start_token": 845,
                                                                                                    "end_token": 845,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "creator",
                                                                                                    "start_token": 847,
                                                                                                    "end_token": 847,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sorted_by=sorted_by",
                                                                                            "start_token": 850,
                                                                                            "end_token": 852,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "start_token": 850,
                                                                                                    "end_token": 850,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "start_token": 852,
                                                                                                    "end_token": 852,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "search_query=search_query",
                                                                                            "start_token": 855,
                                                                                            "end_token": 857,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "start_token": 855,
                                                                                                    "end_token": 855,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "start_token": 857,
                                                                                                    "end_token": 857,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "category=category",
                                                                                            "start_token": 860,
                                                                                            "end_token": 862,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "category",
                                                                                                    "start_token": 860,
                                                                                                    "end_token": 860,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "category",
                                                                                                    "start_token": 862,
                                                                                                    "end_token": 862,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "start_token": 865,
                                                                                            "end_token": 867,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 865,
                                                                                                    "end_token": 865,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 867,
                                                                                                    "end_token": 867,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "start_token": 870,
                                                                                            "end_token": 872,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 870,
                                                                                                    "end_token": 870,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 872,
                                                                                                    "end_token": 872,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agents",
                                                    "start_token": 877,
                                                    "end_token": 878,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agents",
                                                            "start_token": 878,
                                                            "end_token": 878,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                            "start_token": 880,
                                            "end_token": 913,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 881,
                                                    "end_token": 881,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                    "start_token": 884,
                                                    "end_token": 913,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occured whilst getting store agents\")",
                                                            "start_token": 884,
                                                            "end_token": 889,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occured whilst getting store agents\")",
                                                                    "start_token": 884,
                                                                    "end_token": 889,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 884,
                                                                            "end_token": 886,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 884,
                                                                                    "end_token": 884,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 886,
                                                                                    "end_token": 886,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occured whilst getting store agents\")",
                                                                            "start_token": 887,
                                                                            "end_token": 889,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occured whilst getting store agents\"",
                                                                                    "start_token": 888,
                                                                                    "end_token": 888,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 888,
                                                                                            "end_token": 888,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occured whilst getting store agents",
                                                                                            "start_token": 888,
                                                                                            "end_token": 888,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 888,
                                                                                            "end_token": 888,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                            "start_token": 891,
                                                            "end_token": 913,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                                    "start_token": 892,
                                                                    "end_token": 913,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 892,
                                                                            "end_token": 896,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 892,
                                                                                    "end_token": 894,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 892,
                                                                                            "end_token": 892,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 894,
                                                                                            "end_token": 894,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 896,
                                                                                    "end_token": 896,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                                            "start_token": 897,
                                                                            "end_token": 913,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 899,
                                                                                    "end_token": 901,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 899,
                                                                                            "end_token": 899,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 901,
                                                                                            "end_token": 901,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the store agents\"}",
                                                                                    "start_token": 904,
                                                                                    "end_token": 910,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 904,
                                                                                            "end_token": 904,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the store agents\"}",
                                                                                            "start_token": 906,
                                                                                            "end_token": 910,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store agents\"",
                                                                                                    "start_token": 907,
                                                                                                    "end_token": 909,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 907,
                                                                                                            "end_token": 907,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 907,
                                                                                                                    "end_token": 907,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 907,
                                                                                                                    "end_token": 907,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 907,
                                                                                                                    "end_token": 907,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store agents\"",
                                                                                                            "start_token": 909,
                                                                                                            "end_token": 909,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 909,
                                                                                                                    "end_token": 909,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store agents",
                                                                                                                    "start_token": 909,
                                                                                                                    "end_token": 909,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 909,
                                                                                                                    "end_token": 909,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)\nasync def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
            "start_token": 917,
            "end_token": 1081,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                    "start_token": 917,
                    "end_token": 950,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                            "start_token": 918,
                            "end_token": 950,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 918,
                                    "end_token": 920,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 918,
                                            "end_token": 918,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 920,
                                            "end_token": 920,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                                    "start_token": 921,
                                    "end_token": 950,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents/{username}/{agent_name}\"",
                                            "start_token": 923,
                                            "end_token": 923,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 923,
                                                    "end_token": 923,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents/{username}/{agent_name}",
                                                    "start_token": 923,
                                                    "end_token": 923,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 923,
                                                    "end_token": 923,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "start_token": 926,
                                            "end_token": 932,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 926,
                                                    "end_token": 926,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "start_token": 928,
                                                    "end_token": 932,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 929,
                                                            "end_token": 929,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 929,
                                                                    "end_token": 929,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 929,
                                                                    "end_token": 929,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 929,
                                                                    "end_token": 929,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "start_token": 931,
                                                            "end_token": 931,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 931,
                                                                    "end_token": 931,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "start_token": 931,
                                                                    "end_token": 931,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 931,
                                                                    "end_token": 931,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentDetails",
                                            "start_token": 935,
                                            "end_token": 947,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 935,
                                                    "end_token": 935,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreAgentDetails",
                                                    "start_token": 937,
                                                    "end_token": 947,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 937,
                                                            "end_token": 945,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 937,
                                                                    "end_token": 943,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 937,
                                                                            "end_token": 941,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 937,
                                                                                    "end_token": 939,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 937,
                                                                                            "end_token": 937,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 939,
                                                                                            "end_token": 939,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 941,
                                                                                    "end_token": 941,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 943,
                                                                            "end_token": 943,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 945,
                                                                    "end_token": 945,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreAgentDetails",
                                                            "start_token": 947,
                                                            "end_token": 947,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                    "start_token": 952,
                    "end_token": 1081,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_agent",
                            "start_token": 954,
                            "end_token": 954,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(username: str, agent_name: str)",
                            "start_token": 955,
                            "end_token": 963,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "start_token": 956,
                                    "end_token": 958,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "start_token": 956,
                                            "end_token": 956,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 958,
                                            "end_token": 958,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 958,
                                                    "end_token": 958,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_name: str",
                                    "start_token": 960,
                                    "end_token": 962,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_name",
                                            "start_token": 960,
                                            "end_token": 960,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 962,
                                            "end_token": 962,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 962,
                                                    "end_token": 962,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                            "start_token": 966,
                            "end_token": 1081,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"",
                                    "start_token": 966,
                                    "end_token": 968,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"",
                                            "start_token": 966,
                                            "end_token": 968,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 966,
                                                    "end_token": 967,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    ",
                                                    "start_token": 967,
                                                    "end_token": 967,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 967,
                                                    "end_token": 968,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                    "start_token": 970,
                                    "end_token": 1081,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent",
                                            "start_token": 973,
                                            "end_token": 1044,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "start_token": 973,
                                                    "end_token": 986,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "start_token": 973,
                                                            "end_token": 986,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "start_token": 973,
                                                                    "end_token": 973,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "start_token": 975,
                                                                    "end_token": 986,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "start_token": 975,
                                                                            "end_token": 984,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "start_token": 975,
                                                                                    "end_token": 982,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "start_token": 975,
                                                                                            "end_token": 979,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "start_token": 975,
                                                                                                    "end_token": 977,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "start_token": 975,
                                                                                                            "end_token": 975,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "start_token": 977,
                                                                                                            "end_token": 977,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "start_token": 979,
                                                                                                    "end_token": 979,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "start_token": 980,
                                                                                            "end_token": 982,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 981,
                                                                                                    "end_token": 981,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "start_token": 984,
                                                                                    "end_token": 984,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 985,
                                                                            "end_token": 986,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# URL decode the agent name since it comes from the URL path",
                                                    "start_token": 988,
                                                    "end_token": 1000,
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent_name = urllib.parse.unquote(agent_name).lower()",
                                                    "start_token": 1002,
                                                    "end_token": 1015,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent_name = urllib.parse.unquote(agent_name).lower()",
                                                            "start_token": 1002,
                                                            "end_token": 1015,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent_name",
                                                                    "start_token": 1002,
                                                                    "end_token": 1002,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(agent_name).lower()",
                                                                    "start_token": 1004,
                                                                    "end_token": 1015,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(agent_name).lower",
                                                                            "start_token": 1004,
                                                                            "end_token": 1013,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(agent_name)",
                                                                                    "start_token": 1004,
                                                                                    "end_token": 1011,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "start_token": 1004,
                                                                                            "end_token": 1008,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "start_token": 1004,
                                                                                                    "end_token": 1006,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "start_token": 1004,
                                                                                                            "end_token": 1004,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "start_token": 1006,
                                                                                                            "end_token": 1006,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "start_token": 1008,
                                                                                                    "end_token": 1008,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(agent_name)",
                                                                                            "start_token": 1009,
                                                                                            "end_token": 1011,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "start_token": 1010,
                                                                                                    "end_token": 1010,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "start_token": 1013,
                                                                                    "end_token": 1013,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 1014,
                                                                            "end_token": 1015,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                    "start_token": 1017,
                                                    "end_token": 1041,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                            "start_token": 1017,
                                                            "end_token": 1041,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "start_token": 1017,
                                                                    "end_token": 1017,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                                    "start_token": 1019,
                                                                    "end_token": 1041,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                                            "start_token": 1020,
                                                                            "end_token": 1041,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_agent_details",
                                                                                    "start_token": 1020,
                                                                                    "end_token": 1030,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 1020,
                                                                                            "end_token": 1028,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 1020,
                                                                                                    "end_token": 1026,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 1020,
                                                                                                            "end_token": 1024,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 1020,
                                                                                                                    "end_token": 1022,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 1020,
                                                                                                                            "end_token": 1020,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 1022,
                                                                                                                            "end_token": 1022,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 1024,
                                                                                                                    "end_token": 1024,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 1026,
                                                                                                            "end_token": 1026,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 1028,
                                                                                                    "end_token": 1028,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_agent_details",
                                                                                            "start_token": 1030,
                                                                                            "end_token": 1030,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            username=username, agent_name=agent_name\n        )",
                                                                                    "start_token": 1031,
                                                                                    "end_token": 1041,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "username=username",
                                                                                            "start_token": 1033,
                                                                                            "end_token": 1035,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 1033,
                                                                                                    "end_token": 1033,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 1035,
                                                                                                    "end_token": 1035,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_name=agent_name",
                                                                                            "start_token": 1037,
                                                                                            "end_token": 1039,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "start_token": 1037,
                                                                                                    "end_token": 1037,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "start_token": 1039,
                                                                                                    "end_token": 1039,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agent",
                                                    "start_token": 1043,
                                                    "end_token": 1044,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agent",
                                                            "start_token": 1044,
                                                            "end_token": 1044,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                            "start_token": 1046,
                                            "end_token": 1081,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1047,
                                                    "end_token": 1047,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                    "start_token": 1050,
                                                    "end_token": 1081,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store agent details\")",
                                                            "start_token": 1050,
                                                            "end_token": 1055,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store agent details\")",
                                                                    "start_token": 1050,
                                                                    "end_token": 1055,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 1050,
                                                                            "end_token": 1052,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 1050,
                                                                                    "end_token": 1050,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 1052,
                                                                                    "end_token": 1052,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store agent details\")",
                                                                            "start_token": 1053,
                                                                            "end_token": 1055,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store agent details\"",
                                                                                    "start_token": 1054,
                                                                                    "end_token": 1054,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1054,
                                                                                            "end_token": 1054,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store agent details",
                                                                                            "start_token": 1054,
                                                                                            "end_token": 1054,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1054,
                                                                                            "end_token": 1054,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                            "start_token": 1057,
                                                            "end_token": 1081,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                                    "start_token": 1058,
                                                                    "end_token": 1081,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 1058,
                                                                            "end_token": 1062,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 1058,
                                                                                    "end_token": 1060,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 1058,
                                                                                            "end_token": 1058,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 1060,
                                                                                            "end_token": 1060,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 1062,
                                                                                    "end_token": 1062,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                                            "start_token": 1063,
                                                                            "end_token": 1081,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 1065,
                                                                                    "end_token": 1067,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 1065,
                                                                                            "end_token": 1065,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 1067,
                                                                                            "end_token": 1067,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }",
                                                                                    "start_token": 1070,
                                                                                    "end_token": 1078,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 1070,
                                                                                            "end_token": 1070,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }",
                                                                                            "start_token": 1072,
                                                                                            "end_token": 1078,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store agent details\"",
                                                                                                    "start_token": 1074,
                                                                                                    "end_token": 1076,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 1074,
                                                                                                            "end_token": 1074,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1074,
                                                                                                                    "end_token": 1074,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 1074,
                                                                                                                    "end_token": 1074,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1074,
                                                                                                                    "end_token": 1074,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store agent details\"",
                                                                                                            "start_token": 1076,
                                                                                                            "end_token": 1076,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1076,
                                                                                                                    "end_token": 1076,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store agent details",
                                                                                                                    "start_token": 1076,
                                                                                                                    "end_token": 1076,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1076,
                                                                                                                    "end_token": 1076,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)\nasync def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
            "start_token": 1085,
            "end_token": 1313,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                    "start_token": 1085,
                    "end_token": 1134,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                            "start_token": 1086,
                            "end_token": 1134,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "start_token": 1086,
                                    "end_token": 1088,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 1086,
                                            "end_token": 1086,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "start_token": 1088,
                                            "end_token": 1088,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                                    "start_token": 1089,
                                    "end_token": 1134,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents/{username}/{agent_name}/review\"",
                                            "start_token": 1091,
                                            "end_token": 1091,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 1091,
                                                    "end_token": 1091,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents/{username}/{agent_name}/review",
                                                    "start_token": 1091,
                                                    "end_token": 1091,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 1091,
                                                    "end_token": 1091,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\"]",
                                            "start_token": 1094,
                                            "end_token": 1098,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 1094,
                                                    "end_token": 1094,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\"]",
                                                    "start_token": 1096,
                                                    "end_token": 1098,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 1097,
                                                            "end_token": 1097,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1097,
                                                                    "end_token": 1097,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 1097,
                                                                    "end_token": 1097,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1097,
                                                                    "end_token": 1097,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 1101,
                                            "end_token": 1116,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 1101,
                                                    "end_token": 1101,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 1103,
                                                    "end_token": 1116,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 1104,
                                                            "end_token": 1115,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 1104,
                                                                    "end_token": 1106,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1104,
                                                                            "end_token": 1104,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 1106,
                                                                            "end_token": 1106,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 1107,
                                                                    "end_token": 1115,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 1108,
                                                                            "end_token": 1114,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 1108,
                                                                                    "end_token": 1112,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 1108,
                                                                                            "end_token": 1110,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 1108,
                                                                                                    "end_token": 1108,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 1110,
                                                                                                    "end_token": 1110,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 1112,
                                                                                            "end_token": 1112,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 1114,
                                                                                    "end_token": 1114,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreReview",
                                            "start_token": 1119,
                                            "end_token": 1131,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 1119,
                                                    "end_token": 1119,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreReview",
                                                    "start_token": 1121,
                                                    "end_token": 1131,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 1121,
                                                            "end_token": 1129,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 1121,
                                                                    "end_token": 1127,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 1121,
                                                                            "end_token": 1125,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 1121,
                                                                                    "end_token": 1123,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 1121,
                                                                                            "end_token": 1121,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 1123,
                                                                                            "end_token": 1123,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 1125,
                                                                                    "end_token": 1125,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 1127,
                                                                            "end_token": 1127,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 1129,
                                                                    "end_token": 1129,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreReview",
                                                            "start_token": 1131,
                                                            "end_token": 1131,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                    "start_token": 1136,
                    "end_token": 1313,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "create_review",
                            "start_token": 1138,
                            "end_token": 1138,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "start_token": 1139,
                            "end_token": 1191,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "start_token": 1141,
                                    "end_token": 1143,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "start_token": 1141,
                                            "end_token": 1141,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 1143,
                                            "end_token": 1143,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 1143,
                                                    "end_token": 1143,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_name: str",
                                    "start_token": 1146,
                                    "end_token": 1148,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_name",
                                            "start_token": 1146,
                                            "end_token": 1146,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 1148,
                                            "end_token": 1148,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 1148,
                                                    "end_token": 1148,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "review: backend.server.v2.store.model.StoreReviewCreate",
                                    "start_token": 1151,
                                    "end_token": 1163,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "review",
                                            "start_token": 1151,
                                            "end_token": 1151,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.StoreReviewCreate",
                                            "start_token": 1153,
                                            "end_token": 1163,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreReviewCreate",
                                                    "start_token": 1153,
                                                    "end_token": 1163,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 1153,
                                                            "end_token": 1161,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 1153,
                                                                    "end_token": 1159,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 1153,
                                                                            "end_token": 1157,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 1153,
                                                                                    "end_token": 1155,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 1153,
                                                                                            "end_token": 1153,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 1155,
                                                                                            "end_token": 1155,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 1157,
                                                                                    "end_token": 1157,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 1159,
                                                                            "end_token": 1159,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 1161,
                                                                    "end_token": 1161,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreReviewCreate",
                                                            "start_token": 1163,
                                                            "end_token": 1163,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 1166,
                                    "end_token": 1188,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 1166,
                                            "end_token": 1166,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 1168,
                                            "end_token": 1188,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 1168,
                                                    "end_token": 1188,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 1168,
                                                            "end_token": 1170,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 1168,
                                                                    "end_token": 1168,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 1170,
                                                                    "end_token": 1170,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 1173,
                                                            "end_token": 1173,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 1175,
                                                            "end_token": 1186,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 1175,
                                                                    "end_token": 1177,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1175,
                                                                            "end_token": 1175,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 1177,
                                                                            "end_token": 1177,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 1178,
                                                                    "end_token": 1186,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 1179,
                                                                            "end_token": 1185,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 1179,
                                                                                    "end_token": 1183,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 1179,
                                                                                            "end_token": 1181,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 1179,
                                                                                                    "end_token": 1179,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 1181,
                                                                                                    "end_token": 1181,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 1183,
                                                                                            "end_token": 1183,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 1185,
                                                                                    "end_token": 1185,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                            "start_token": 1194,
                            "end_token": 1313,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"",
                                    "start_token": 1194,
                                    "end_token": 1196,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"",
                                            "start_token": 1194,
                                            "end_token": 1196,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 1194,
                                                    "end_token": 1195,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    ",
                                                    "start_token": 1195,
                                                    "end_token": 1195,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 1195,
                                                    "end_token": 1196,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                    "start_token": 1198,
                                    "end_token": 1313,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review",
                                            "start_token": 1201,
                                            "end_token": 1278,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "start_token": 1201,
                                                    "end_token": 1214,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "start_token": 1201,
                                                            "end_token": 1214,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "start_token": 1201,
                                                                    "end_token": 1201,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "start_token": 1203,
                                                                    "end_token": 1214,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "start_token": 1203,
                                                                            "end_token": 1212,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "start_token": 1203,
                                                                                    "end_token": 1210,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "start_token": 1203,
                                                                                            "end_token": 1207,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "start_token": 1203,
                                                                                                    "end_token": 1205,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "start_token": 1203,
                                                                                                            "end_token": 1203,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "start_token": 1205,
                                                                                                            "end_token": 1205,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "start_token": 1207,
                                                                                                    "end_token": 1207,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "start_token": 1208,
                                                                                            "end_token": 1210,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 1209,
                                                                                                    "end_token": 1209,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "start_token": 1212,
                                                                                    "end_token": 1212,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 1213,
                                                                            "end_token": 1214,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent_name = urllib.parse.unquote(agent_name)",
                                                    "start_token": 1216,
                                                    "end_token": 1225,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent_name = urllib.parse.unquote(agent_name)",
                                                            "start_token": 1216,
                                                            "end_token": 1225,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent_name",
                                                                    "start_token": 1216,
                                                                    "end_token": 1216,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(agent_name)",
                                                                    "start_token": 1218,
                                                                    "end_token": 1225,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote",
                                                                            "start_token": 1218,
                                                                            "end_token": 1222,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "urllib.parse",
                                                                                    "start_token": 1218,
                                                                                    "end_token": 1220,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "urllib",
                                                                                            "start_token": 1218,
                                                                                            "end_token": 1218,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "parse",
                                                                                            "start_token": 1220,
                                                                                            "end_token": 1220,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "unquote",
                                                                                    "start_token": 1222,
                                                                                    "end_token": 1222,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(agent_name)",
                                                                            "start_token": 1223,
                                                                            "end_token": 1225,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "agent_name",
                                                                                    "start_token": 1224,
                                                                                    "end_token": 1224,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Create the review",
                                                    "start_token": 1227,
                                                    "end_token": 1230,
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                    "start_token": 1232,
                                                    "end_token": 1274,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                            "start_token": 1232,
                                                            "end_token": 1274,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "created_review",
                                                                    "start_token": 1232,
                                                                    "end_token": 1232,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                    "start_token": 1234,
                                                                    "end_token": 1274,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                            "start_token": 1235,
                                                                            "end_token": 1274,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.create_store_review",
                                                                                    "start_token": 1235,
                                                                                    "end_token": 1245,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 1235,
                                                                                            "end_token": 1243,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 1235,
                                                                                                    "end_token": 1241,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 1235,
                                                                                                            "end_token": 1239,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 1235,
                                                                                                                    "end_token": 1237,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 1235,
                                                                                                                            "end_token": 1235,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 1237,
                                                                                                                            "end_token": 1237,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 1239,
                                                                                                                    "end_token": 1239,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 1241,
                                                                                                            "end_token": 1241,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 1243,
                                                                                                    "end_token": 1243,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "create_store_review",
                                                                                            "start_token": 1245,
                                                                                            "end_token": 1245,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                                    "start_token": 1246,
                                                                                    "end_token": 1274,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 1248,
                                                                                            "end_token": 1250,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 1248,
                                                                                                    "end_token": 1248,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 1250,
                                                                                                    "end_token": 1250,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "store_listing_version_id=review.store_listing_version_id",
                                                                                            "start_token": 1253,
                                                                                            "end_token": 1257,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "store_listing_version_id",
                                                                                                    "start_token": 1253,
                                                                                                    "end_token": 1253,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.store_listing_version_id",
                                                                                                    "start_token": 1255,
                                                                                                    "end_token": 1257,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "start_token": 1255,
                                                                                                            "end_token": 1255,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store_listing_version_id",
                                                                                                            "start_token": 1257,
                                                                                                            "end_token": 1257,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "score=review.score",
                                                                                            "start_token": 1260,
                                                                                            "end_token": 1264,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "score",
                                                                                                    "start_token": 1260,
                                                                                                    "end_token": 1260,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.score",
                                                                                                    "start_token": 1262,
                                                                                                    "end_token": 1264,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "start_token": 1262,
                                                                                                            "end_token": 1262,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "score",
                                                                                                            "start_token": 1264,
                                                                                                            "end_token": 1264,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "comments=review.comments",
                                                                                            "start_token": 1267,
                                                                                            "end_token": 1271,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "comments",
                                                                                                    "start_token": 1267,
                                                                                                    "end_token": 1267,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.comments",
                                                                                                    "start_token": 1269,
                                                                                                    "end_token": 1271,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "start_token": 1269,
                                                                                                            "end_token": 1269,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "comments",
                                                                                                            "start_token": 1271,
                                                                                                            "end_token": 1271,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return created_review",
                                                    "start_token": 1277,
                                                    "end_token": 1278,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "created_review",
                                                            "start_token": 1278,
                                                            "end_token": 1278,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                            "start_token": 1280,
                                            "end_token": 1313,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1281,
                                                    "end_token": 1281,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                    "start_token": 1284,
                                                    "end_token": 1313,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst creating store review\")",
                                                            "start_token": 1284,
                                                            "end_token": 1289,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst creating store review\")",
                                                                    "start_token": 1284,
                                                                    "end_token": 1289,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 1284,
                                                                            "end_token": 1286,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 1284,
                                                                                    "end_token": 1284,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 1286,
                                                                                    "end_token": 1286,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst creating store review\")",
                                                                            "start_token": 1287,
                                                                            "end_token": 1289,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst creating store review\"",
                                                                                    "start_token": 1288,
                                                                                    "end_token": 1288,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1288,
                                                                                            "end_token": 1288,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst creating store review",
                                                                                            "start_token": 1288,
                                                                                            "end_token": 1288,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1288,
                                                                                            "end_token": 1288,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                            "start_token": 1291,
                                                            "end_token": 1313,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                                    "start_token": 1292,
                                                                    "end_token": 1313,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 1292,
                                                                            "end_token": 1296,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 1292,
                                                                                    "end_token": 1294,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 1292,
                                                                                            "end_token": 1292,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 1294,
                                                                                            "end_token": 1294,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 1296,
                                                                                    "end_token": 1296,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                                            "start_token": 1297,
                                                                            "end_token": 1313,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 1299,
                                                                                    "end_token": 1301,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 1299,
                                                                                            "end_token": 1299,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 1301,
                                                                                            "end_token": 1301,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store review\"}",
                                                                                    "start_token": 1304,
                                                                                    "end_token": 1310,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 1304,
                                                                                            "end_token": 1304,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while creating the store review\"}",
                                                                                            "start_token": 1306,
                                                                                            "end_token": 1310,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while creating the store review\"",
                                                                                                    "start_token": 1307,
                                                                                                    "end_token": 1309,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 1307,
                                                                                                            "end_token": 1307,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1307,
                                                                                                                    "end_token": 1307,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 1307,
                                                                                                                    "end_token": 1307,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1307,
                                                                                                                    "end_token": 1307,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while creating the store review\"",
                                                                                                            "start_token": 1309,
                                                                                                            "end_token": 1309,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1309,
                                                                                                                    "end_token": 1309,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while creating the store review",
                                                                                                                    "start_token": 1309,
                                                                                                                    "end_token": 1309,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1309,
                                                                                                                    "end_token": 1309,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 1317,
            "end_token": 1362,
            "children": []
        },
        {
            "type": "comment",
            "label": "############# Creator Endpoints #############",
            "start_token": 1364,
            "end_token": 1391,
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "start_token": 1393,
            "end_token": 1438,
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)\nasync def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
            "start_token": 1442,
            "end_token": 1656,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                    "start_token": 1442,
                    "end_token": 1475,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                            "start_token": 1443,
                            "end_token": 1475,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 1443,
                                    "end_token": 1445,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 1443,
                                            "end_token": 1443,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 1445,
                                            "end_token": 1445,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                                    "start_token": 1446,
                                    "end_token": 1475,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/creators\"",
                                            "start_token": 1448,
                                            "end_token": 1448,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 1448,
                                                    "end_token": 1448,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/creators",
                                                    "start_token": 1448,
                                                    "end_token": 1448,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 1448,
                                                    "end_token": 1448,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "start_token": 1451,
                                            "end_token": 1457,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 1451,
                                                    "end_token": 1451,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "start_token": 1453,
                                                    "end_token": 1457,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 1454,
                                                            "end_token": 1454,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1454,
                                                                    "end_token": 1454,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 1454,
                                                                    "end_token": 1454,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1454,
                                                                    "end_token": 1454,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "start_token": 1456,
                                                            "end_token": 1456,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1456,
                                                                    "end_token": 1456,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "start_token": 1456,
                                                                    "end_token": 1456,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1456,
                                                                    "end_token": 1456,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorsResponse",
                                            "start_token": 1460,
                                            "end_token": 1472,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 1460,
                                                    "end_token": 1460,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorsResponse",
                                                    "start_token": 1462,
                                                    "end_token": 1472,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 1462,
                                                            "end_token": 1470,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 1462,
                                                                    "end_token": 1468,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 1462,
                                                                            "end_token": 1466,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 1462,
                                                                                    "end_token": 1464,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 1462,
                                                                                            "end_token": 1462,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 1464,
                                                                                            "end_token": 1464,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 1466,
                                                                                    "end_token": 1466,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 1468,
                                                                            "end_token": 1468,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 1470,
                                                                    "end_token": 1470,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorsResponse",
                                                            "start_token": 1472,
                                                            "end_token": 1472,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                    "start_token": 1477,
                    "end_token": 1656,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_creators",
                            "start_token": 1479,
                            "end_token": 1479,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "start_token": 1480,
                            "end_token": 1521,
                            "children": [
                                {
                                    "type": "typed_default_parameter",
                                    "label": "featured: bool = False",
                                    "start_token": 1482,
                                    "end_token": 1486,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "featured",
                                            "start_token": 1482,
                                            "end_token": 1482,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "bool",
                                            "start_token": 1484,
                                            "end_token": 1484,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "start_token": 1484,
                                                    "end_token": 1484,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "false",
                                            "label": "False",
                                            "start_token": 1486,
                                            "end_token": 1486,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "search_query: str | None = None",
                                    "start_token": 1489,
                                    "end_token": 1495,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "search_query",
                                            "start_token": 1489,
                                            "end_token": 1489,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 1491,
                                            "end_token": 1493,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 1491,
                                                    "end_token": 1493,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 1491,
                                                            "end_token": 1491,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 1493,
                                                            "end_token": 1493,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 1495,
                                            "end_token": 1495,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "sorted_by: str | None = None",
                                    "start_token": 1498,
                                    "end_token": 1504,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "sorted_by",
                                            "start_token": 1498,
                                            "end_token": 1498,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "start_token": 1500,
                                            "end_token": 1502,
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "start_token": 1500,
                                                    "end_token": 1502,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 1500,
                                                            "end_token": 1500,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "start_token": 1502,
                                                            "end_token": 1502,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "start_token": 1504,
                                            "end_token": 1504,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "start_token": 1507,
                                    "end_token": 1511,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "start_token": 1507,
                                            "end_token": 1507,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 1509,
                                            "end_token": 1509,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 1509,
                                                    "end_token": 1509,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "start_token": 1511,
                                            "end_token": 1511,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "start_token": 1514,
                                    "end_token": 1518,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "start_token": 1514,
                                            "end_token": 1514,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 1516,
                                            "end_token": 1516,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 1516,
                                                    "end_token": 1516,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "start_token": 1518,
                                            "end_token": 1518,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                            "start_token": 1524,
                            "end_token": 1656,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"",
                                    "start_token": 1524,
                                    "end_token": 1526,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"",
                                            "start_token": 1524,
                                            "end_token": 1526,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 1524,
                                                    "end_token": 1525,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    ",
                                                    "start_token": 1525,
                                                    "end_token": 1525,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 1525,
                                                    "end_token": 1526,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "start_token": 1528,
                                    "end_token": 1548,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "start_token": 1529,
                                            "end_token": 1531,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "start_token": 1529,
                                                    "end_token": 1529,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 1531,
                                                    "end_token": 1531,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "start_token": 1534,
                                            "end_token": 1548,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "start_token": 1534,
                                                    "end_token": 1548,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "start_token": 1535,
                                                            "end_token": 1548,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 1535,
                                                                    "end_token": 1537,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1535,
                                                                            "end_token": 1535,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 1537,
                                                                            "end_token": 1537,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "start_token": 1538,
                                                                    "end_token": 1548,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 1540,
                                                                            "end_token": 1542,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 1540,
                                                                                    "end_token": 1540,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 1542,
                                                                                    "end_token": 1542,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "start_token": 1544,
                                                                            "end_token": 1546,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 1544,
                                                                                    "end_token": 1544,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "start_token": 1546,
                                                                                    "end_token": 1546,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1546,
                                                                                            "end_token": 1546,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "start_token": 1546,
                                                                                            "end_token": 1546,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1546,
                                                                                            "end_token": 1546,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "start_token": 1551,
                                    "end_token": 1571,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "start_token": 1552,
                                            "end_token": 1554,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "start_token": 1552,
                                                    "end_token": 1552,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 1554,
                                                    "end_token": 1554,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "start_token": 1557,
                                            "end_token": 1571,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "start_token": 1557,
                                                    "end_token": 1571,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "start_token": 1558,
                                                            "end_token": 1571,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 1558,
                                                                    "end_token": 1560,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1558,
                                                                            "end_token": 1558,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 1560,
                                                                            "end_token": 1560,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "start_token": 1561,
                                                                    "end_token": 1571,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 1563,
                                                                            "end_token": 1565,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 1563,
                                                                                    "end_token": 1563,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 1565,
                                                                                    "end_token": 1565,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "start_token": 1567,
                                                                            "end_token": 1569,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 1567,
                                                                                    "end_token": 1567,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "start_token": 1569,
                                                                                    "end_token": 1569,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1569,
                                                                                            "end_token": 1569,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "start_token": 1569,
                                                                                            "end_token": 1569,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1569,
                                                                                            "end_token": 1569,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                    "start_token": 1574,
                                    "end_token": 1656,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators",
                                            "start_token": 1577,
                                            "end_token": 1621,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "start_token": 1577,
                                                    "end_token": 1618,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "start_token": 1577,
                                                            "end_token": 1618,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "creators",
                                                                    "start_token": 1577,
                                                                    "end_token": 1577,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "start_token": 1579,
                                                                    "end_token": 1618,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "start_token": 1580,
                                                                            "end_token": 1618,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_creators",
                                                                                    "start_token": 1580,
                                                                                    "end_token": 1590,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 1580,
                                                                                            "end_token": 1588,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 1580,
                                                                                                    "end_token": 1586,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 1580,
                                                                                                            "end_token": 1584,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 1580,
                                                                                                                    "end_token": 1582,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 1580,
                                                                                                                            "end_token": 1580,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 1582,
                                                                                                                            "end_token": 1582,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 1584,
                                                                                                                    "end_token": 1584,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 1586,
                                                                                                            "end_token": 1586,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 1588,
                                                                                                    "end_token": 1588,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_creators",
                                                                                            "start_token": 1590,
                                                                                            "end_token": 1590,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "start_token": 1591,
                                                                                    "end_token": 1618,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "featured=featured",
                                                                                            "start_token": 1593,
                                                                                            "end_token": 1595,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "start_token": 1593,
                                                                                                    "end_token": 1593,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "start_token": 1595,
                                                                                                    "end_token": 1595,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "search_query=search_query",
                                                                                            "start_token": 1598,
                                                                                            "end_token": 1600,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "start_token": 1598,
                                                                                                    "end_token": 1598,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "start_token": 1600,
                                                                                                    "end_token": 1600,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sorted_by=sorted_by",
                                                                                            "start_token": 1603,
                                                                                            "end_token": 1605,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "start_token": 1603,
                                                                                                    "end_token": 1603,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "start_token": 1605,
                                                                                                    "end_token": 1605,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "start_token": 1608,
                                                                                            "end_token": 1610,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 1608,
                                                                                                    "end_token": 1608,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 1610,
                                                                                                    "end_token": 1610,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "start_token": 1613,
                                                                                            "end_token": 1615,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 1613,
                                                                                                    "end_token": 1613,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 1615,
                                                                                                    "end_token": 1615,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return creators",
                                                    "start_token": 1620,
                                                    "end_token": 1621,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "creators",
                                                            "start_token": 1621,
                                                            "end_token": 1621,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                            "start_token": 1623,
                                            "end_token": 1656,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1624,
                                                    "end_token": 1624,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                    "start_token": 1627,
                                                    "end_token": 1656,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store creators\")",
                                                            "start_token": 1627,
                                                            "end_token": 1632,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store creators\")",
                                                                    "start_token": 1627,
                                                                    "end_token": 1632,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 1627,
                                                                            "end_token": 1629,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 1627,
                                                                                    "end_token": 1627,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 1629,
                                                                                    "end_token": 1629,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store creators\")",
                                                                            "start_token": 1630,
                                                                            "end_token": 1632,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store creators\"",
                                                                                    "start_token": 1631,
                                                                                    "end_token": 1631,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1631,
                                                                                            "end_token": 1631,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store creators",
                                                                                            "start_token": 1631,
                                                                                            "end_token": 1631,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1631,
                                                                                            "end_token": 1631,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                            "start_token": 1634,
                                                            "end_token": 1656,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                                    "start_token": 1635,
                                                                    "end_token": 1656,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 1635,
                                                                            "end_token": 1639,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 1635,
                                                                                    "end_token": 1637,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 1635,
                                                                                            "end_token": 1635,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 1637,
                                                                                            "end_token": 1637,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 1639,
                                                                                    "end_token": 1639,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                                            "start_token": 1640,
                                                                            "end_token": 1656,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 1642,
                                                                                    "end_token": 1644,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 1642,
                                                                                            "end_token": 1642,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 1644,
                                                                                            "end_token": 1644,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the store creators\"}",
                                                                                    "start_token": 1647,
                                                                                    "end_token": 1653,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 1647,
                                                                                            "end_token": 1647,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the store creators\"}",
                                                                                            "start_token": 1649,
                                                                                            "end_token": 1653,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store creators\"",
                                                                                                    "start_token": 1650,
                                                                                                    "end_token": 1652,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 1650,
                                                                                                            "end_token": 1650,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1650,
                                                                                                                    "end_token": 1650,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 1650,
                                                                                                                    "end_token": 1650,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1650,
                                                                                                                    "end_token": 1650,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store creators\"",
                                                                                                            "start_token": 1652,
                                                                                                            "end_token": 1652,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1652,
                                                                                                                    "end_token": 1652,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store creators",
                                                                                                                    "start_token": 1652,
                                                                                                                    "end_token": 1652,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1652,
                                                                                                                    "end_token": 1652,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
            "start_token": 1660,
            "end_token": 1794,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                    "start_token": 1660,
                    "end_token": 1693,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                            "start_token": 1661,
                            "end_token": 1693,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 1661,
                                    "end_token": 1663,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 1661,
                                            "end_token": 1661,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 1663,
                                            "end_token": 1663,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                                    "start_token": 1664,
                                    "end_token": 1693,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/creator/{username}\"",
                                            "start_token": 1666,
                                            "end_token": 1666,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 1666,
                                                    "end_token": 1666,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/creator/{username}",
                                                    "start_token": 1666,
                                                    "end_token": 1666,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 1666,
                                                    "end_token": 1666,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "start_token": 1669,
                                            "end_token": 1675,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 1669,
                                                    "end_token": 1669,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "start_token": 1671,
                                                    "end_token": 1675,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 1672,
                                                            "end_token": 1672,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1672,
                                                                    "end_token": 1672,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 1672,
                                                                    "end_token": 1672,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1672,
                                                                    "end_token": 1672,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "start_token": 1674,
                                                            "end_token": 1674,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1674,
                                                                    "end_token": 1674,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "start_token": 1674,
                                                                    "end_token": 1674,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1674,
                                                                    "end_token": 1674,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails",
                                            "start_token": 1678,
                                            "end_token": 1690,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 1678,
                                                    "end_token": 1678,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorDetails",
                                                    "start_token": 1680,
                                                    "end_token": 1690,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 1680,
                                                            "end_token": 1688,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 1680,
                                                                    "end_token": 1686,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 1680,
                                                                            "end_token": 1684,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 1680,
                                                                                    "end_token": 1682,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 1680,
                                                                                            "end_token": 1680,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 1682,
                                                                                            "end_token": 1682,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 1684,
                                                                                    "end_token": 1684,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 1686,
                                                                            "end_token": 1686,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 1688,
                                                                    "end_token": 1688,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorDetails",
                                                            "start_token": 1690,
                                                            "end_token": 1690,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                    "start_token": 1695,
                    "end_token": 1794,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_creator",
                            "start_token": 1697,
                            "end_token": 1697,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    username: str,\n)",
                            "start_token": 1698,
                            "end_token": 1705,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "start_token": 1700,
                                    "end_token": 1702,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "start_token": 1700,
                                            "end_token": 1700,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 1702,
                                            "end_token": 1702,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 1702,
                                                    "end_token": 1702,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                            "start_token": 1708,
                            "end_token": 1794,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"",
                                    "start_token": 1708,
                                    "end_token": 1710,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"",
                                            "start_token": 1708,
                                            "end_token": 1710,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 1708,
                                                    "end_token": 1709,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get the details of a creator\n    - Creator Details Page\n    ",
                                                    "start_token": 1709,
                                                    "end_token": 1709,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 1709,
                                                    "end_token": 1710,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                    "start_token": 1712,
                                    "end_token": 1794,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator",
                                            "start_token": 1715,
                                            "end_token": 1757,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "start_token": 1715,
                                                    "end_token": 1728,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "start_token": 1715,
                                                            "end_token": 1728,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "start_token": 1715,
                                                                    "end_token": 1715,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "start_token": 1717,
                                                                    "end_token": 1728,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "start_token": 1717,
                                                                            "end_token": 1726,
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "start_token": 1717,
                                                                                    "end_token": 1724,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "start_token": 1717,
                                                                                            "end_token": 1721,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "start_token": 1717,
                                                                                                    "end_token": 1719,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "start_token": 1717,
                                                                                                            "end_token": 1717,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "start_token": 1719,
                                                                                                            "end_token": 1719,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "start_token": 1721,
                                                                                                    "end_token": 1721,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "start_token": 1722,
                                                                                            "end_token": 1724,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 1723,
                                                                                                    "end_token": 1723,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "start_token": 1726,
                                                                                    "end_token": 1726,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "start_token": 1727,
                                                                            "end_token": 1728,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                    "start_token": 1730,
                                                    "end_token": 1754,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                            "start_token": 1730,
                                                            "end_token": 1754,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "creator",
                                                                    "start_token": 1730,
                                                                    "end_token": 1730,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                                    "start_token": 1732,
                                                                    "end_token": 1754,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                                            "start_token": 1733,
                                                                            "end_token": 1754,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_creator_details",
                                                                                    "start_token": 1733,
                                                                                    "end_token": 1743,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 1733,
                                                                                            "end_token": 1741,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 1733,
                                                                                                    "end_token": 1739,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 1733,
                                                                                                            "end_token": 1737,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 1733,
                                                                                                                    "end_token": 1735,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 1733,
                                                                                                                            "end_token": 1733,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 1735,
                                                                                                                            "end_token": 1735,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 1737,
                                                                                                                    "end_token": 1737,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 1739,
                                                                                                            "end_token": 1739,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 1741,
                                                                                                    "end_token": 1741,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_creator_details",
                                                                                            "start_token": 1743,
                                                                                            "end_token": 1743,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            username=username.lower()\n        )",
                                                                                    "start_token": 1744,
                                                                                    "end_token": 1754,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "username=username.lower()",
                                                                                            "start_token": 1746,
                                                                                            "end_token": 1752,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "start_token": 1746,
                                                                                                    "end_token": 1746,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "label": "username.lower()",
                                                                                                    "start_token": 1748,
                                                                                                    "end_token": 1752,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "username.lower",
                                                                                                            "start_token": 1748,
                                                                                                            "end_token": 1750,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "username",
                                                                                                                    "start_token": 1748,
                                                                                                                    "end_token": 1748,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "lower",
                                                                                                                    "start_token": 1750,
                                                                                                                    "end_token": 1750,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "label": "()",
                                                                                                            "start_token": 1751,
                                                                                                            "end_token": 1752,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return creator",
                                                    "start_token": 1756,
                                                    "end_token": 1757,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "creator",
                                                            "start_token": 1757,
                                                            "end_token": 1757,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                            "start_token": 1759,
                                            "end_token": 1794,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 1760,
                                                    "end_token": 1760,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                    "start_token": 1763,
                                                    "end_token": 1794,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting creator details\")",
                                                            "start_token": 1763,
                                                            "end_token": 1768,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting creator details\")",
                                                                    "start_token": 1763,
                                                                    "end_token": 1768,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 1763,
                                                                            "end_token": 1765,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 1763,
                                                                                    "end_token": 1763,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 1765,
                                                                                    "end_token": 1765,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting creator details\")",
                                                                            "start_token": 1766,
                                                                            "end_token": 1768,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting creator details\"",
                                                                                    "start_token": 1767,
                                                                                    "end_token": 1767,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 1767,
                                                                                            "end_token": 1767,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting creator details",
                                                                                            "start_token": 1767,
                                                                                            "end_token": 1767,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 1767,
                                                                                            "end_token": 1767,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                            "start_token": 1770,
                                                            "end_token": 1794,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                                    "start_token": 1771,
                                                                    "end_token": 1794,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 1771,
                                                                            "end_token": 1775,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 1771,
                                                                                    "end_token": 1773,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 1771,
                                                                                            "end_token": 1771,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 1773,
                                                                                            "end_token": 1773,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 1775,
                                                                                    "end_token": 1775,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                                            "start_token": 1776,
                                                                            "end_token": 1794,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 1778,
                                                                                    "end_token": 1780,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 1778,
                                                                                            "end_token": 1778,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 1780,
                                                                                            "end_token": 1780,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            }",
                                                                                    "start_token": 1783,
                                                                                    "end_token": 1791,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 1783,
                                                                                            "end_token": 1783,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            }",
                                                                                            "start_token": 1785,
                                                                                            "end_token": 1791,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the creator details\"",
                                                                                                    "start_token": 1787,
                                                                                                    "end_token": 1789,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 1787,
                                                                                                            "end_token": 1787,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1787,
                                                                                                                    "end_token": 1787,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 1787,
                                                                                                                    "end_token": 1787,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1787,
                                                                                                                    "end_token": 1787,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the creator details\"",
                                                                                                            "start_token": 1789,
                                                                                                            "end_token": 1789,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1789,
                                                                                                                    "end_token": 1789,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the creator details",
                                                                                                                    "start_token": 1789,
                                                                                                                    "end_token": 1789,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 1789,
                                                                                                                    "end_token": 1789,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "############################################",
            "start_token": 1798,
            "end_token": 1841,
            "children": []
        },
        {
            "type": "comment",
            "label": "############# Store Submissions ###############",
            "start_token": 1843,
            "end_token": 1872,
            "children": []
        },
        {
            "type": "comment",
            "label": "############################################",
            "start_token": 1874,
            "end_token": 1917,
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)\nasync def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
            "start_token": 1919,
            "end_token": 2061,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                    "start_token": 1919,
                    "end_token": 1970,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                            "start_token": 1920,
                            "end_token": 1970,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 1920,
                                    "end_token": 1922,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 1920,
                                            "end_token": 1920,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 1922,
                                            "end_token": 1922,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                                    "start_token": 1923,
                                    "end_token": 1970,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/myagents\"",
                                            "start_token": 1925,
                                            "end_token": 1925,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 1925,
                                                    "end_token": 1925,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/myagents",
                                                    "start_token": 1925,
                                                    "end_token": 1925,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 1925,
                                                    "end_token": 1925,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 1928,
                                            "end_token": 1934,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 1928,
                                                    "end_token": 1928,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 1930,
                                                    "end_token": 1934,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 1931,
                                                            "end_token": 1931,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1931,
                                                                    "end_token": 1931,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 1931,
                                                                    "end_token": 1931,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1931,
                                                                    "end_token": 1931,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 1933,
                                                            "end_token": 1933,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 1933,
                                                                    "end_token": 1933,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 1933,
                                                                    "end_token": 1933,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 1933,
                                                                    "end_token": 1933,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 1937,
                                            "end_token": 1952,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 1937,
                                                    "end_token": 1937,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 1939,
                                                    "end_token": 1952,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 1940,
                                                            "end_token": 1951,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 1940,
                                                                    "end_token": 1942,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1940,
                                                                            "end_token": 1940,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 1942,
                                                                            "end_token": 1942,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 1943,
                                                                    "end_token": 1951,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 1944,
                                                                            "end_token": 1950,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 1944,
                                                                                    "end_token": 1948,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 1944,
                                                                                            "end_token": 1946,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 1944,
                                                                                                    "end_token": 1944,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 1946,
                                                                                                    "end_token": 1946,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 1948,
                                                                                            "end_token": 1948,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 1950,
                                                                                    "end_token": 1950,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.MyAgentsResponse",
                                            "start_token": 1955,
                                            "end_token": 1967,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 1955,
                                                    "end_token": 1955,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.MyAgentsResponse",
                                                    "start_token": 1957,
                                                    "end_token": 1967,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 1957,
                                                            "end_token": 1965,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 1957,
                                                                    "end_token": 1963,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 1957,
                                                                            "end_token": 1961,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 1957,
                                                                                    "end_token": 1959,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 1957,
                                                                                            "end_token": 1957,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 1959,
                                                                                            "end_token": 1959,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 1961,
                                                                                    "end_token": 1961,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 1963,
                                                                            "end_token": 1963,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 1965,
                                                                    "end_token": 1965,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "MyAgentsResponse",
                                                            "start_token": 1967,
                                                            "end_token": 1967,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                    "start_token": 1972,
                    "end_token": 2061,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_my_agents",
                            "start_token": 1974,
                            "end_token": 1974,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)",
                            "start_token": 1975,
                            "end_token": 2001,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 1977,
                                    "end_token": 1999,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 1977,
                                            "end_token": 1977,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 1979,
                                            "end_token": 1999,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 1979,
                                                    "end_token": 1999,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 1979,
                                                            "end_token": 1981,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 1979,
                                                                    "end_token": 1979,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 1981,
                                                                    "end_token": 1981,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 1984,
                                                            "end_token": 1984,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 1986,
                                                            "end_token": 1997,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 1986,
                                                                    "end_token": 1988,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 1986,
                                                                            "end_token": 1986,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 1988,
                                                                            "end_token": 1988,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 1989,
                                                                    "end_token": 1997,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 1990,
                                                                            "end_token": 1996,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 1990,
                                                                                    "end_token": 1994,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 1990,
                                                                                            "end_token": 1992,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 1990,
                                                                                                    "end_token": 1990,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 1992,
                                                                                                    "end_token": 1992,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 1994,
                                                                                            "end_token": 1994,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 1996,
                                                                                    "end_token": 1996,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                            "start_token": 2004,
                            "end_token": 2061,
                            "children": [
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                    "start_token": 2004,
                                    "end_token": 2061,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents",
                                            "start_token": 2007,
                                            "end_token": 2026,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)",
                                                    "start_token": 2007,
                                                    "end_token": 2023,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)",
                                                            "start_token": 2007,
                                                            "end_token": 2023,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agents",
                                                                    "start_token": 2007,
                                                                    "end_token": 2007,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_my_agents(user_id)",
                                                                    "start_token": 2009,
                                                                    "end_token": 2023,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_my_agents(user_id)",
                                                                            "start_token": 2010,
                                                                            "end_token": 2023,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_my_agents",
                                                                                    "start_token": 2010,
                                                                                    "end_token": 2020,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 2010,
                                                                                            "end_token": 2018,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2010,
                                                                                                    "end_token": 2016,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2010,
                                                                                                            "end_token": 2014,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2010,
                                                                                                                    "end_token": 2012,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2010,
                                                                                                                            "end_token": 2010,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2012,
                                                                                                                            "end_token": 2012,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2014,
                                                                                                                    "end_token": 2014,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2016,
                                                                                                            "end_token": 2016,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 2018,
                                                                                                    "end_token": 2018,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_my_agents",
                                                                                            "start_token": 2020,
                                                                                            "end_token": 2020,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(user_id)",
                                                                                    "start_token": 2021,
                                                                                    "end_token": 2023,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "start_token": 2022,
                                                                                            "end_token": 2022,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agents",
                                                    "start_token": 2025,
                                                    "end_token": 2026,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agents",
                                                            "start_token": 2026,
                                                            "end_token": 2026,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                            "start_token": 2028,
                                            "end_token": 2061,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 2029,
                                                    "end_token": 2029,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                    "start_token": 2032,
                                                    "end_token": 2061,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting my agents\")",
                                                            "start_token": 2032,
                                                            "end_token": 2037,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting my agents\")",
                                                                    "start_token": 2032,
                                                                    "end_token": 2037,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 2032,
                                                                            "end_token": 2034,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 2032,
                                                                                    "end_token": 2032,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 2034,
                                                                                    "end_token": 2034,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting my agents\")",
                                                                            "start_token": 2035,
                                                                            "end_token": 2037,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting my agents\"",
                                                                                    "start_token": 2036,
                                                                                    "end_token": 2036,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2036,
                                                                                            "end_token": 2036,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting my agents",
                                                                                            "start_token": 2036,
                                                                                            "end_token": 2036,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2036,
                                                                                            "end_token": 2036,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                            "start_token": 2039,
                                                            "end_token": 2061,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                                    "start_token": 2040,
                                                                    "end_token": 2061,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 2040,
                                                                            "end_token": 2044,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 2040,
                                                                                    "end_token": 2042,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2040,
                                                                                            "end_token": 2040,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 2042,
                                                                                            "end_token": 2042,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 2044,
                                                                                    "end_token": 2044,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                                            "start_token": 2045,
                                                                            "end_token": 2061,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 2047,
                                                                                    "end_token": 2049,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 2047,
                                                                                            "end_token": 2047,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 2049,
                                                                                            "end_token": 2049,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the my agents\"}",
                                                                                    "start_token": 2052,
                                                                                    "end_token": 2058,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 2052,
                                                                                            "end_token": 2052,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the my agents\"}",
                                                                                            "start_token": 2054,
                                                                                            "end_token": 2058,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the my agents\"",
                                                                                                    "start_token": 2055,
                                                                                                    "end_token": 2057,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 2055,
                                                                                                            "end_token": 2055,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2055,
                                                                                                                    "end_token": 2055,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 2055,
                                                                                                                    "end_token": 2055,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2055,
                                                                                                                    "end_token": 2055,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the my agents\"",
                                                                                                            "start_token": 2057,
                                                                                                            "end_token": 2057,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2057,
                                                                                                                    "end_token": 2057,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the my agents",
                                                                                                                    "start_token": 2057,
                                                                                                                    "end_token": 2057,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2057,
                                                                                                                    "end_token": 2057,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)\nasync def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
            "start_token": 2065,
            "end_token": 2217,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                    "start_token": 2065,
                    "end_token": 2106,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                            "start_token": 2066,
                            "end_token": 2106,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.delete",
                                    "start_token": 2066,
                                    "end_token": 2068,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 2066,
                                            "end_token": 2066,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "delete",
                                            "start_token": 2068,
                                            "end_token": 2068,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                                    "start_token": 2069,
                                    "end_token": 2106,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/{submission_id}\"",
                                            "start_token": 2071,
                                            "end_token": 2071,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 2071,
                                                    "end_token": 2071,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/{submission_id}",
                                                    "start_token": 2071,
                                                    "end_token": 2071,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 2071,
                                                    "end_token": 2071,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 2074,
                                            "end_token": 2080,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 2074,
                                                    "end_token": 2074,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 2076,
                                                    "end_token": 2080,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 2077,
                                                            "end_token": 2077,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2077,
                                                                    "end_token": 2077,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 2077,
                                                                    "end_token": 2077,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2077,
                                                                    "end_token": 2077,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 2079,
                                                            "end_token": 2079,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2079,
                                                                    "end_token": 2079,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 2079,
                                                                    "end_token": 2079,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2079,
                                                                    "end_token": 2079,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 2083,
                                            "end_token": 2098,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 2083,
                                                    "end_token": 2083,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 2085,
                                                    "end_token": 2098,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 2086,
                                                            "end_token": 2097,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2086,
                                                                    "end_token": 2088,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2086,
                                                                            "end_token": 2086,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2088,
                                                                            "end_token": 2088,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 2089,
                                                                    "end_token": 2097,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 2090,
                                                                            "end_token": 2096,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 2090,
                                                                                    "end_token": 2094,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2090,
                                                                                            "end_token": 2092,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2090,
                                                                                                    "end_token": 2090,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2092,
                                                                                                    "end_token": 2092,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 2094,
                                                                                            "end_token": 2094,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 2096,
                                                                                    "end_token": 2096,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=bool",
                                            "start_token": 2101,
                                            "end_token": 2103,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 2101,
                                                    "end_token": 2101,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "start_token": 2103,
                                                    "end_token": 2103,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                    "start_token": 2108,
                    "end_token": 2217,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "delete_submission",
                            "start_token": 2110,
                            "end_token": 2110,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n)",
                            "start_token": 2111,
                            "end_token": 2143,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 2113,
                                    "end_token": 2135,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 2113,
                                            "end_token": 2113,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 2115,
                                            "end_token": 2135,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 2115,
                                                    "end_token": 2135,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 2115,
                                                            "end_token": 2117,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 2115,
                                                                    "end_token": 2115,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 2117,
                                                                    "end_token": 2117,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 2120,
                                                            "end_token": 2120,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 2122,
                                                            "end_token": 2133,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2122,
                                                                    "end_token": 2124,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2122,
                                                                            "end_token": 2122,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2124,
                                                                            "end_token": 2124,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 2125,
                                                                    "end_token": 2133,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 2126,
                                                                            "end_token": 2132,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 2126,
                                                                                    "end_token": 2130,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2126,
                                                                                            "end_token": 2128,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2126,
                                                                                                    "end_token": 2126,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2128,
                                                                                                    "end_token": 2128,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 2130,
                                                                                            "end_token": 2130,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 2132,
                                                                                    "end_token": 2132,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "submission_id: str",
                                    "start_token": 2138,
                                    "end_token": 2140,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "submission_id",
                                            "start_token": 2138,
                                            "end_token": 2138,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 2140,
                                            "end_token": 2140,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 2140,
                                                    "end_token": 2140,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                            "start_token": 2146,
                            "end_token": 2217,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"",
                                    "start_token": 2146,
                                    "end_token": 2148,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"",
                                            "start_token": 2146,
                                            "end_token": 2148,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 2146,
                                                    "end_token": 2147,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    ",
                                                    "start_token": 2147,
                                                    "end_token": 2147,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 2147,
                                                    "end_token": 2148,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                    "start_token": 2150,
                                    "end_token": 2217,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result",
                                            "start_token": 2153,
                                            "end_token": 2182,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                    "start_token": 2153,
                                                    "end_token": 2179,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                            "start_token": 2153,
                                                            "end_token": 2179,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "result",
                                                                    "start_token": 2153,
                                                                    "end_token": 2153,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                    "start_token": 2155,
                                                                    "end_token": 2179,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                            "start_token": 2156,
                                                                            "end_token": 2179,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.delete_store_submission",
                                                                                    "start_token": 2156,
                                                                                    "end_token": 2166,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 2156,
                                                                                            "end_token": 2164,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2156,
                                                                                                    "end_token": 2162,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2156,
                                                                                                            "end_token": 2160,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2156,
                                                                                                                    "end_token": 2158,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2156,
                                                                                                                            "end_token": 2156,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2158,
                                                                                                                            "end_token": 2158,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2160,
                                                                                                                    "end_token": 2160,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2162,
                                                                                                            "end_token": 2162,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 2164,
                                                                                                    "end_token": 2164,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "delete_store_submission",
                                                                                            "start_token": 2166,
                                                                                            "end_token": 2166,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                                    "start_token": 2167,
                                                                                    "end_token": 2179,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 2169,
                                                                                            "end_token": 2171,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2169,
                                                                                                    "end_token": 2169,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2171,
                                                                                                    "end_token": 2171,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "submission_id=submission_id",
                                                                                            "start_token": 2174,
                                                                                            "end_token": 2176,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "submission_id",
                                                                                                    "start_token": 2174,
                                                                                                    "end_token": 2174,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "submission_id",
                                                                                                    "start_token": 2176,
                                                                                                    "end_token": 2176,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return result",
                                                    "start_token": 2181,
                                                    "end_token": 2182,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "result",
                                                            "start_token": 2182,
                                                            "end_token": 2182,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                            "start_token": 2184,
                                            "end_token": 2217,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 2185,
                                                    "end_token": 2185,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                    "start_token": 2188,
                                                    "end_token": 2217,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst deleting store submission\")",
                                                            "start_token": 2188,
                                                            "end_token": 2193,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst deleting store submission\")",
                                                                    "start_token": 2188,
                                                                    "end_token": 2193,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 2188,
                                                                            "end_token": 2190,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 2188,
                                                                                    "end_token": 2188,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 2190,
                                                                                    "end_token": 2190,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst deleting store submission\")",
                                                                            "start_token": 2191,
                                                                            "end_token": 2193,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst deleting store submission\"",
                                                                                    "start_token": 2192,
                                                                                    "end_token": 2192,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2192,
                                                                                            "end_token": 2192,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst deleting store submission",
                                                                                            "start_token": 2192,
                                                                                            "end_token": 2192,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2192,
                                                                                            "end_token": 2192,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                            "start_token": 2195,
                                                            "end_token": 2217,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                                    "start_token": 2196,
                                                                    "end_token": 2217,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 2196,
                                                                            "end_token": 2200,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 2196,
                                                                                    "end_token": 2198,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2196,
                                                                                            "end_token": 2196,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 2198,
                                                                                            "end_token": 2198,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 2200,
                                                                                    "end_token": 2200,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                                            "start_token": 2201,
                                                                            "end_token": 2217,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 2203,
                                                                                    "end_token": 2205,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 2203,
                                                                                            "end_token": 2203,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 2205,
                                                                                            "end_token": 2205,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while deleting the store submission\"}",
                                                                                    "start_token": 2208,
                                                                                    "end_token": 2214,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 2208,
                                                                                            "end_token": 2208,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while deleting the store submission\"}",
                                                                                            "start_token": 2210,
                                                                                            "end_token": 2214,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while deleting the store submission\"",
                                                                                                    "start_token": 2211,
                                                                                                    "end_token": 2213,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 2211,
                                                                                                            "end_token": 2211,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2211,
                                                                                                                    "end_token": 2211,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 2211,
                                                                                                                    "end_token": 2211,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2211,
                                                                                                                    "end_token": 2211,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while deleting the store submission\"",
                                                                                                            "start_token": 2213,
                                                                                                            "end_token": 2213,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2213,
                                                                                                                    "end_token": 2213,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while deleting the store submission",
                                                                                                                    "start_token": 2213,
                                                                                                                    "end_token": 2213,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2213,
                                                                                                                    "end_token": 2213,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)\nasync def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
            "start_token": 2221,
            "end_token": 2444,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                    "start_token": 2221,
                    "end_token": 2272,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                            "start_token": 2222,
                            "end_token": 2272,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "start_token": 2222,
                                    "end_token": 2224,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 2222,
                                            "end_token": 2222,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "start_token": 2224,
                                            "end_token": 2224,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                                    "start_token": 2225,
                                    "end_token": 2272,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions\"",
                                            "start_token": 2227,
                                            "end_token": 2227,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 2227,
                                                    "end_token": 2227,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions",
                                                    "start_token": 2227,
                                                    "end_token": 2227,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 2227,
                                                    "end_token": 2227,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 2230,
                                            "end_token": 2236,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 2230,
                                                    "end_token": 2230,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 2232,
                                                    "end_token": 2236,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 2233,
                                                            "end_token": 2233,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2233,
                                                                    "end_token": 2233,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 2233,
                                                                    "end_token": 2233,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2233,
                                                                    "end_token": 2233,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 2235,
                                                            "end_token": 2235,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2235,
                                                                    "end_token": 2235,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 2235,
                                                                    "end_token": 2235,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2235,
                                                                    "end_token": 2235,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 2239,
                                            "end_token": 2254,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 2239,
                                                    "end_token": 2239,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 2241,
                                                    "end_token": 2254,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 2242,
                                                            "end_token": 2253,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2242,
                                                                    "end_token": 2244,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2242,
                                                                            "end_token": 2242,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2244,
                                                                            "end_token": 2244,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 2245,
                                                                    "end_token": 2253,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 2246,
                                                                            "end_token": 2252,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 2246,
                                                                                    "end_token": 2250,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2246,
                                                                                            "end_token": 2248,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2246,
                                                                                                    "end_token": 2246,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2248,
                                                                                                    "end_token": 2248,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 2250,
                                                                                            "end_token": 2250,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 2252,
                                                                                    "end_token": 2252,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreSubmissionsResponse",
                                            "start_token": 2257,
                                            "end_token": 2269,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 2257,
                                                    "end_token": 2257,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmissionsResponse",
                                                    "start_token": 2259,
                                                    "end_token": 2269,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 2259,
                                                            "end_token": 2267,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 2259,
                                                                    "end_token": 2265,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 2259,
                                                                            "end_token": 2263,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 2259,
                                                                                    "end_token": 2261,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 2259,
                                                                                            "end_token": 2259,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 2261,
                                                                                            "end_token": 2261,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 2263,
                                                                                    "end_token": 2263,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 2265,
                                                                            "end_token": 2265,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 2267,
                                                                    "end_token": 2267,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmissionsResponse",
                                                            "start_token": 2269,
                                                            "end_token": 2269,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                    "start_token": 2274,
                    "end_token": 2444,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_submissions",
                            "start_token": 2276,
                            "end_token": 2276,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "start_token": 2277,
                            "end_token": 2318,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 2279,
                                    "end_token": 2301,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 2279,
                                            "end_token": 2279,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 2281,
                                            "end_token": 2301,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 2281,
                                                    "end_token": 2301,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 2281,
                                                            "end_token": 2283,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 2281,
                                                                    "end_token": 2281,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 2283,
                                                                    "end_token": 2283,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 2286,
                                                            "end_token": 2286,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 2288,
                                                            "end_token": 2299,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2288,
                                                                    "end_token": 2290,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2288,
                                                                            "end_token": 2288,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2290,
                                                                            "end_token": 2290,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 2291,
                                                                    "end_token": 2299,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 2292,
                                                                            "end_token": 2298,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 2292,
                                                                                    "end_token": 2296,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2292,
                                                                                            "end_token": 2294,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2292,
                                                                                                    "end_token": 2292,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2294,
                                                                                                    "end_token": 2294,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 2296,
                                                                                            "end_token": 2296,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 2298,
                                                                                    "end_token": 2298,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "start_token": 2304,
                                    "end_token": 2308,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "start_token": 2304,
                                            "end_token": 2304,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 2306,
                                            "end_token": 2306,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 2306,
                                                    "end_token": 2306,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "start_token": 2308,
                                            "end_token": 2308,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "start_token": 2311,
                                    "end_token": 2315,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "start_token": 2311,
                                            "end_token": 2311,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "start_token": 2313,
                                            "end_token": 2313,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "start_token": 2313,
                                                    "end_token": 2313,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "start_token": 2315,
                                            "end_token": 2315,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                            "start_token": 2321,
                            "end_token": 2444,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"",
                                    "start_token": 2321,
                                    "end_token": 2323,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"",
                                            "start_token": 2321,
                                            "end_token": 2323,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 2321,
                                                    "end_token": 2322,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    ",
                                                    "start_token": 2322,
                                                    "end_token": 2322,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 2322,
                                                    "end_token": 2323,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "start_token": 2325,
                                    "end_token": 2345,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "start_token": 2326,
                                            "end_token": 2328,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "start_token": 2326,
                                                    "end_token": 2326,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 2328,
                                                    "end_token": 2328,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "start_token": 2331,
                                            "end_token": 2345,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "start_token": 2331,
                                                    "end_token": 2345,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "start_token": 2332,
                                                            "end_token": 2345,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 2332,
                                                                    "end_token": 2334,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2332,
                                                                            "end_token": 2332,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 2334,
                                                                            "end_token": 2334,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "start_token": 2335,
                                                                    "end_token": 2345,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 2337,
                                                                            "end_token": 2339,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 2337,
                                                                                    "end_token": 2337,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 2339,
                                                                                    "end_token": 2339,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "start_token": 2341,
                                                                            "end_token": 2343,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 2341,
                                                                                    "end_token": 2341,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "start_token": 2343,
                                                                                    "end_token": 2343,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2343,
                                                                                            "end_token": 2343,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "start_token": 2343,
                                                                                            "end_token": 2343,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2343,
                                                                                            "end_token": 2343,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "start_token": 2348,
                                    "end_token": 2368,
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "start_token": 2349,
                                            "end_token": 2351,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "start_token": 2349,
                                                    "end_token": 2349,
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "start_token": 2351,
                                                    "end_token": 2351,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "start_token": 2354,
                                            "end_token": 2368,
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "start_token": 2354,
                                                    "end_token": 2368,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "start_token": 2355,
                                                            "end_token": 2368,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "start_token": 2355,
                                                                    "end_token": 2357,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2355,
                                                                            "end_token": 2355,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "start_token": 2357,
                                                                            "end_token": 2357,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "start_token": 2358,
                                                                    "end_token": 2368,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "start_token": 2360,
                                                                            "end_token": 2362,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "start_token": 2360,
                                                                                    "end_token": 2360,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "start_token": 2362,
                                                                                    "end_token": 2362,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "start_token": 2364,
                                                                            "end_token": 2366,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "start_token": 2364,
                                                                                    "end_token": 2364,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "start_token": 2366,
                                                                                    "end_token": 2366,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2366,
                                                                                            "end_token": 2366,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "start_token": 2366,
                                                                                            "end_token": 2366,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2366,
                                                                                            "end_token": 2366,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                    "start_token": 2370,
                                    "end_token": 2444,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings",
                                            "start_token": 2373,
                                            "end_token": 2407,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "start_token": 2373,
                                                    "end_token": 2404,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "start_token": 2373,
                                                            "end_token": 2404,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "listings",
                                                                    "start_token": 2373,
                                                                    "end_token": 2373,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "start_token": 2375,
                                                                    "end_token": 2404,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "start_token": 2376,
                                                                            "end_token": 2404,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_submissions",
                                                                                    "start_token": 2376,
                                                                                    "end_token": 2386,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 2376,
                                                                                            "end_token": 2384,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2376,
                                                                                                    "end_token": 2382,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2376,
                                                                                                            "end_token": 2380,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2376,
                                                                                                                    "end_token": 2378,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2376,
                                                                                                                            "end_token": 2376,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2378,
                                                                                                                            "end_token": 2378,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2380,
                                                                                                                    "end_token": 2380,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2382,
                                                                                                            "end_token": 2382,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 2384,
                                                                                                    "end_token": 2384,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_submissions",
                                                                                            "start_token": 2386,
                                                                                            "end_token": 2386,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "start_token": 2387,
                                                                                    "end_token": 2404,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 2389,
                                                                                            "end_token": 2391,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2389,
                                                                                                    "end_token": 2389,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2391,
                                                                                                    "end_token": 2391,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "start_token": 2394,
                                                                                            "end_token": 2396,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 2394,
                                                                                                    "end_token": 2394,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "start_token": 2396,
                                                                                                    "end_token": 2396,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "start_token": 2399,
                                                                                            "end_token": 2401,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 2399,
                                                                                                    "end_token": 2399,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "start_token": 2401,
                                                                                                    "end_token": 2401,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return listings",
                                                    "start_token": 2406,
                                                    "end_token": 2407,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "listings",
                                                            "start_token": 2407,
                                                            "end_token": 2407,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                            "start_token": 2409,
                                            "end_token": 2444,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 2410,
                                                    "end_token": 2410,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                    "start_token": 2413,
                                                    "end_token": 2444,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store submissions\")",
                                                            "start_token": 2413,
                                                            "end_token": 2418,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store submissions\")",
                                                                    "start_token": 2413,
                                                                    "end_token": 2418,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 2413,
                                                                            "end_token": 2415,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 2413,
                                                                                    "end_token": 2413,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 2415,
                                                                                    "end_token": 2415,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store submissions\")",
                                                                            "start_token": 2416,
                                                                            "end_token": 2418,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store submissions\"",
                                                                                    "start_token": 2417,
                                                                                    "end_token": 2417,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2417,
                                                                                            "end_token": 2417,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store submissions",
                                                                                            "start_token": 2417,
                                                                                            "end_token": 2417,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2417,
                                                                                            "end_token": 2417,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                            "start_token": 2420,
                                                            "end_token": 2444,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                                    "start_token": 2421,
                                                                    "end_token": 2444,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 2421,
                                                                            "end_token": 2425,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 2421,
                                                                                    "end_token": 2423,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2421,
                                                                                            "end_token": 2421,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 2423,
                                                                                            "end_token": 2423,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 2425,
                                                                                    "end_token": 2425,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                                            "start_token": 2426,
                                                                            "end_token": 2444,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 2428,
                                                                                    "end_token": 2430,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 2428,
                                                                                            "end_token": 2428,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 2430,
                                                                                            "end_token": 2430,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }",
                                                                                    "start_token": 2433,
                                                                                    "end_token": 2441,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 2433,
                                                                                            "end_token": 2433,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }",
                                                                                            "start_token": 2435,
                                                                                            "end_token": 2441,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store submissions\"",
                                                                                                    "start_token": 2437,
                                                                                                    "end_token": 2439,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 2437,
                                                                                                            "end_token": 2437,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2437,
                                                                                                                    "end_token": 2437,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 2437,
                                                                                                                    "end_token": 2437,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2437,
                                                                                                                    "end_token": 2437,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store submissions\"",
                                                                                                            "start_token": 2439,
                                                                                                            "end_token": 2439,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2439,
                                                                                                                    "end_token": 2439,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store submissions",
                                                                                                                    "start_token": 2439,
                                                                                                                    "end_token": 2439,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2439,
                                                                                                                    "end_token": 2439,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)\nasync def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
            "start_token": 2448,
            "end_token": 2678,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                    "start_token": 2448,
                    "end_token": 2499,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                            "start_token": 2449,
                            "end_token": 2499,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "start_token": 2449,
                                    "end_token": 2451,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 2449,
                                            "end_token": 2449,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "start_token": 2451,
                                            "end_token": 2451,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                                    "start_token": 2452,
                                    "end_token": 2499,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions\"",
                                            "start_token": 2454,
                                            "end_token": 2454,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 2454,
                                                    "end_token": 2454,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions",
                                                    "start_token": 2454,
                                                    "end_token": 2454,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 2454,
                                                    "end_token": 2454,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 2457,
                                            "end_token": 2463,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 2457,
                                                    "end_token": 2457,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 2459,
                                                    "end_token": 2463,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 2460,
                                                            "end_token": 2460,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2460,
                                                                    "end_token": 2460,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 2460,
                                                                    "end_token": 2460,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2460,
                                                                    "end_token": 2460,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 2462,
                                                            "end_token": 2462,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2462,
                                                                    "end_token": 2462,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 2462,
                                                                    "end_token": 2462,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2462,
                                                                    "end_token": 2462,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 2466,
                                            "end_token": 2481,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 2466,
                                                    "end_token": 2466,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 2468,
                                                    "end_token": 2481,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 2469,
                                                            "end_token": 2480,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2469,
                                                                    "end_token": 2471,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2469,
                                                                            "end_token": 2469,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2471,
                                                                            "end_token": 2471,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 2472,
                                                                    "end_token": 2480,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 2473,
                                                                            "end_token": 2479,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 2473,
                                                                                    "end_token": 2477,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2473,
                                                                                            "end_token": 2475,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2473,
                                                                                                    "end_token": 2473,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2475,
                                                                                                    "end_token": 2475,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 2477,
                                                                                            "end_token": 2477,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 2479,
                                                                                    "end_token": 2479,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreSubmission",
                                            "start_token": 2484,
                                            "end_token": 2496,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "start_token": 2484,
                                                    "end_token": 2484,
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmission",
                                                    "start_token": 2486,
                                                    "end_token": 2496,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 2486,
                                                            "end_token": 2494,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 2486,
                                                                    "end_token": 2492,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 2486,
                                                                            "end_token": 2490,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 2486,
                                                                                    "end_token": 2488,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 2486,
                                                                                            "end_token": 2486,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 2488,
                                                                                            "end_token": 2488,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 2490,
                                                                                    "end_token": 2490,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 2492,
                                                                            "end_token": 2492,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 2494,
                                                                    "end_token": 2494,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmission",
                                                            "start_token": 2496,
                                                            "end_token": 2496,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                    "start_token": 2501,
                    "end_token": 2678,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "create_submission",
                            "start_token": 2503,
                            "end_token": 2503,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "start_token": 2504,
                            "end_token": 2546,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "submission_request: backend.server.v2.store.model.StoreSubmissionRequest",
                                    "start_token": 2506,
                                    "end_token": 2518,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "submission_request",
                                            "start_token": 2506,
                                            "end_token": 2506,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.StoreSubmissionRequest",
                                            "start_token": 2508,
                                            "end_token": 2518,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmissionRequest",
                                                    "start_token": 2508,
                                                    "end_token": 2518,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "start_token": 2508,
                                                            "end_token": 2516,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "start_token": 2508,
                                                                    "end_token": 2514,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "start_token": 2508,
                                                                            "end_token": 2512,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "start_token": 2508,
                                                                                    "end_token": 2510,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "start_token": 2508,
                                                                                            "end_token": 2508,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "start_token": 2510,
                                                                                            "end_token": 2510,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "start_token": 2512,
                                                                                    "end_token": 2512,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "start_token": 2514,
                                                                            "end_token": 2514,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "start_token": 2516,
                                                                    "end_token": 2516,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmissionRequest",
                                                            "start_token": 2518,
                                                            "end_token": 2518,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 2521,
                                    "end_token": 2543,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 2521,
                                            "end_token": 2521,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 2523,
                                            "end_token": 2543,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 2523,
                                                    "end_token": 2543,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 2523,
                                                            "end_token": 2525,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 2523,
                                                                    "end_token": 2523,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 2525,
                                                                    "end_token": 2525,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 2528,
                                                            "end_token": 2528,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 2530,
                                                            "end_token": 2541,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2530,
                                                                    "end_token": 2532,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2530,
                                                                            "end_token": 2530,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2532,
                                                                            "end_token": 2532,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 2533,
                                                                    "end_token": 2541,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 2534,
                                                                            "end_token": 2540,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 2534,
                                                                                    "end_token": 2538,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2534,
                                                                                            "end_token": 2536,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2534,
                                                                                                    "end_token": 2534,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2536,
                                                                                                    "end_token": 2536,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 2538,
                                                                                            "end_token": 2538,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 2540,
                                                                                    "end_token": 2540,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                            "start_token": 2549,
                            "end_token": 2678,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"",
                                    "start_token": 2549,
                                    "end_token": 2551,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"",
                                            "start_token": 2549,
                                            "end_token": 2551,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 2549,
                                                    "end_token": 2550,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    ",
                                                    "start_token": 2550,
                                                    "end_token": 2550,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 2550,
                                                    "end_token": 2551,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                    "start_token": 2553,
                                    "end_token": 2678,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission",
                                            "start_token": 2556,
                                            "end_token": 2643,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                    "start_token": 2556,
                                                    "end_token": 2640,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                            "start_token": 2556,
                                                            "end_token": 2640,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "submission",
                                                                    "start_token": 2556,
                                                                    "end_token": 2556,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                    "start_token": 2558,
                                                                    "end_token": 2640,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                            "start_token": 2559,
                                                                            "end_token": 2640,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.create_store_submission",
                                                                                    "start_token": 2559,
                                                                                    "end_token": 2569,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "start_token": 2559,
                                                                                            "end_token": 2567,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2559,
                                                                                                    "end_token": 2565,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2559,
                                                                                                            "end_token": 2563,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2559,
                                                                                                                    "end_token": 2561,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2559,
                                                                                                                            "end_token": 2559,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2561,
                                                                                                                            "end_token": 2561,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2563,
                                                                                                                    "end_token": 2563,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2565,
                                                                                                            "end_token": 2565,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "start_token": 2567,
                                                                                                    "end_token": 2567,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "create_store_submission",
                                                                                            "start_token": 2569,
                                                                                            "end_token": 2569,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                                    "start_token": 2570,
                                                                                    "end_token": 2640,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 2572,
                                                                                            "end_token": 2574,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2572,
                                                                                                    "end_token": 2572,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2574,
                                                                                                    "end_token": 2574,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_id=submission_request.agent_id",
                                                                                            "start_token": 2577,
                                                                                            "end_token": 2581,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_id",
                                                                                                    "start_token": 2577,
                                                                                                    "end_token": 2577,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.agent_id",
                                                                                                    "start_token": 2579,
                                                                                                    "end_token": 2581,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2579,
                                                                                                            "end_token": 2579,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_id",
                                                                                                            "start_token": 2581,
                                                                                                            "end_token": 2581,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_version=submission_request.agent_version",
                                                                                            "start_token": 2584,
                                                                                            "end_token": 2588,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_version",
                                                                                                    "start_token": 2584,
                                                                                                    "end_token": 2584,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.agent_version",
                                                                                                    "start_token": 2586,
                                                                                                    "end_token": 2588,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2586,
                                                                                                            "end_token": 2586,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_version",
                                                                                                            "start_token": 2588,
                                                                                                            "end_token": 2588,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "slug=submission_request.slug",
                                                                                            "start_token": 2591,
                                                                                            "end_token": 2595,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "slug",
                                                                                                    "start_token": 2591,
                                                                                                    "end_token": 2591,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.slug",
                                                                                                    "start_token": 2593,
                                                                                                    "end_token": 2595,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2593,
                                                                                                            "end_token": 2593,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "slug",
                                                                                                            "start_token": 2595,
                                                                                                            "end_token": 2595,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "name=submission_request.name",
                                                                                            "start_token": 2598,
                                                                                            "end_token": 2602,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "name",
                                                                                                    "start_token": 2598,
                                                                                                    "end_token": 2598,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.name",
                                                                                                    "start_token": 2600,
                                                                                                    "end_token": 2602,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2600,
                                                                                                            "end_token": 2600,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "name",
                                                                                                            "start_token": 2602,
                                                                                                            "end_token": 2602,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "video_url=submission_request.video_url",
                                                                                            "start_token": 2605,
                                                                                            "end_token": 2609,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "video_url",
                                                                                                    "start_token": 2605,
                                                                                                    "end_token": 2605,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.video_url",
                                                                                                    "start_token": 2607,
                                                                                                    "end_token": 2609,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2607,
                                                                                                            "end_token": 2607,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "video_url",
                                                                                                            "start_token": 2609,
                                                                                                            "end_token": 2609,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "image_urls=submission_request.image_urls",
                                                                                            "start_token": 2612,
                                                                                            "end_token": 2616,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_urls",
                                                                                                    "start_token": 2612,
                                                                                                    "end_token": 2612,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.image_urls",
                                                                                                    "start_token": 2614,
                                                                                                    "end_token": 2616,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2614,
                                                                                                            "end_token": 2614,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "image_urls",
                                                                                                            "start_token": 2616,
                                                                                                            "end_token": 2616,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "description=submission_request.description",
                                                                                            "start_token": 2619,
                                                                                            "end_token": 2623,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "description",
                                                                                                    "start_token": 2619,
                                                                                                    "end_token": 2619,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.description",
                                                                                                    "start_token": 2621,
                                                                                                    "end_token": 2623,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2621,
                                                                                                            "end_token": 2621,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "description",
                                                                                                            "start_token": 2623,
                                                                                                            "end_token": 2623,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sub_heading=submission_request.sub_heading",
                                                                                            "start_token": 2626,
                                                                                            "end_token": 2630,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sub_heading",
                                                                                                    "start_token": 2626,
                                                                                                    "end_token": 2626,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.sub_heading",
                                                                                                    "start_token": 2628,
                                                                                                    "end_token": 2630,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2628,
                                                                                                            "end_token": 2628,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "sub_heading",
                                                                                                            "start_token": 2630,
                                                                                                            "end_token": 2630,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "categories=submission_request.categories",
                                                                                            "start_token": 2633,
                                                                                            "end_token": 2637,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "categories",
                                                                                                    "start_token": 2633,
                                                                                                    "end_token": 2633,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.categories",
                                                                                                    "start_token": 2635,
                                                                                                    "end_token": 2637,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "start_token": 2635,
                                                                                                            "end_token": 2635,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "categories",
                                                                                                            "start_token": 2637,
                                                                                                            "end_token": 2637,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return submission",
                                                    "start_token": 2642,
                                                    "end_token": 2643,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "submission",
                                                            "start_token": 2643,
                                                            "end_token": 2643,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                            "start_token": 2645,
                                            "end_token": 2678,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 2646,
                                                    "end_token": 2646,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                    "start_token": 2649,
                                                    "end_token": 2678,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst creating store submission\")",
                                                            "start_token": 2649,
                                                            "end_token": 2654,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst creating store submission\")",
                                                                    "start_token": 2649,
                                                                    "end_token": 2654,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 2649,
                                                                            "end_token": 2651,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 2649,
                                                                                    "end_token": 2649,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 2651,
                                                                                    "end_token": 2651,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst creating store submission\")",
                                                                            "start_token": 2652,
                                                                            "end_token": 2654,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst creating store submission\"",
                                                                                    "start_token": 2653,
                                                                                    "end_token": 2653,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2653,
                                                                                            "end_token": 2653,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst creating store submission",
                                                                                            "start_token": 2653,
                                                                                            "end_token": 2653,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2653,
                                                                                            "end_token": 2653,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                            "start_token": 2656,
                                                            "end_token": 2678,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                                    "start_token": 2657,
                                                                    "end_token": 2678,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 2657,
                                                                            "end_token": 2661,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 2657,
                                                                                    "end_token": 2659,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2657,
                                                                                            "end_token": 2657,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 2659,
                                                                                            "end_token": 2659,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 2661,
                                                                                    "end_token": 2661,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                                            "start_token": 2662,
                                                                            "end_token": 2678,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 2664,
                                                                                    "end_token": 2666,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 2664,
                                                                                            "end_token": 2664,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 2666,
                                                                                            "end_token": 2666,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store submission\"}",
                                                                                    "start_token": 2669,
                                                                                    "end_token": 2675,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 2669,
                                                                                            "end_token": 2669,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while creating the store submission\"}",
                                                                                            "start_token": 2671,
                                                                                            "end_token": 2675,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while creating the store submission\"",
                                                                                                    "start_token": 2672,
                                                                                                    "end_token": 2674,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 2672,
                                                                                                            "end_token": 2672,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2672,
                                                                                                                    "end_token": 2672,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 2672,
                                                                                                                    "end_token": 2672,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2672,
                                                                                                                    "end_token": 2672,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while creating the store submission\"",
                                                                                                            "start_token": 2674,
                                                                                                            "end_token": 2674,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2674,
                                                                                                                    "end_token": 2674,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while creating the store submission",
                                                                                                                    "start_token": 2674,
                                                                                                                    "end_token": 2674,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2674,
                                                                                                                    "end_token": 2674,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
            "start_token": 2682,
            "end_token": 2829,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                    "start_token": 2682,
                    "end_token": 2718,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                            "start_token": 2683,
                            "end_token": 2718,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "start_token": 2683,
                                    "end_token": 2685,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 2683,
                                            "end_token": 2683,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "start_token": 2685,
                                            "end_token": 2685,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                                    "start_token": 2686,
                                    "end_token": 2718,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/media\"",
                                            "start_token": 2688,
                                            "end_token": 2688,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 2688,
                                                    "end_token": 2688,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/media",
                                                    "start_token": 2688,
                                                    "end_token": 2688,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 2688,
                                                    "end_token": 2688,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 2691,
                                            "end_token": 2697,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 2691,
                                                    "end_token": 2691,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 2693,
                                                    "end_token": 2697,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 2694,
                                                            "end_token": 2694,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2694,
                                                                    "end_token": 2694,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 2694,
                                                                    "end_token": 2694,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2694,
                                                                    "end_token": 2694,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 2696,
                                                            "end_token": 2696,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2696,
                                                                    "end_token": 2696,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 2696,
                                                                    "end_token": 2696,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2696,
                                                                    "end_token": 2696,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 2700,
                                            "end_token": 2715,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 2700,
                                                    "end_token": 2700,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 2702,
                                                    "end_token": 2715,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 2703,
                                                            "end_token": 2714,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2703,
                                                                    "end_token": 2705,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2703,
                                                                            "end_token": 2703,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2705,
                                                                            "end_token": 2705,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 2706,
                                                                    "end_token": 2714,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 2707,
                                                                            "end_token": 2713,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 2707,
                                                                                    "end_token": 2711,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2707,
                                                                                            "end_token": 2709,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2707,
                                                                                                    "end_token": 2707,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2709,
                                                                                                    "end_token": 2709,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 2711,
                                                                                            "end_token": 2711,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 2713,
                                                                                    "end_token": 2713,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                    "start_token": 2720,
                    "end_token": 2829,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "upload_submission_media",
                            "start_token": 2722,
                            "end_token": 2722,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "start_token": 2723,
                            "end_token": 2757,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "file: fastapi.UploadFile",
                                    "start_token": 2725,
                                    "end_token": 2729,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "file",
                                            "start_token": 2725,
                                            "end_token": 2725,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "fastapi.UploadFile",
                                            "start_token": 2727,
                                            "end_token": 2729,
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "fastapi.UploadFile",
                                                    "start_token": 2727,
                                                    "end_token": 2729,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "fastapi",
                                                            "start_token": 2727,
                                                            "end_token": 2727,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "UploadFile",
                                                            "start_token": 2729,
                                                            "end_token": 2729,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 2732,
                                    "end_token": 2754,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 2732,
                                            "end_token": 2732,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 2734,
                                            "end_token": 2754,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 2734,
                                                    "end_token": 2754,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 2734,
                                                            "end_token": 2736,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 2734,
                                                                    "end_token": 2734,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 2736,
                                                                    "end_token": 2736,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 2739,
                                                            "end_token": 2739,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 2741,
                                                            "end_token": 2752,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2741,
                                                                    "end_token": 2743,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2741,
                                                                            "end_token": 2741,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2743,
                                                                            "end_token": 2743,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 2744,
                                                                    "end_token": 2752,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 2745,
                                                                            "end_token": 2751,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 2745,
                                                                                    "end_token": 2749,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2745,
                                                                                            "end_token": 2747,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2745,
                                                                                                    "end_token": 2745,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2747,
                                                                                                    "end_token": 2747,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 2749,
                                                                                            "end_token": 2749,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 2751,
                                                                                    "end_token": 2751,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                            "start_token": 2760,
                            "end_token": 2829,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"",
                                    "start_token": 2760,
                                    "end_token": 2762,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"",
                                            "start_token": 2760,
                                            "end_token": 2762,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 2760,
                                                    "end_token": 2761,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    ",
                                                    "start_token": 2761,
                                                    "end_token": 2761,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 2761,
                                                    "end_token": 2762,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                    "start_token": 2764,
                                    "end_token": 2829,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url",
                                            "start_token": 2767,
                                            "end_token": 2794,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                    "start_token": 2767,
                                                    "end_token": 2791,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                            "start_token": 2767,
                                                            "end_token": 2791,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "media_url",
                                                                    "start_token": 2767,
                                                                    "end_token": 2767,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                                    "start_token": 2769,
                                                                    "end_token": 2791,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                                            "start_token": 2770,
                                                                            "end_token": 2791,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.upload_media",
                                                                                    "start_token": 2770,
                                                                                    "end_token": 2780,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "start_token": 2770,
                                                                                            "end_token": 2778,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2770,
                                                                                                    "end_token": 2776,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2770,
                                                                                                            "end_token": 2774,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2770,
                                                                                                                    "end_token": 2772,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2770,
                                                                                                                            "end_token": 2770,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2772,
                                                                                                                            "end_token": 2772,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2774,
                                                                                                                    "end_token": 2774,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2776,
                                                                                                            "end_token": 2776,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "start_token": 2778,
                                                                                                    "end_token": 2778,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "upload_media",
                                                                                            "start_token": 2780,
                                                                                            "end_token": 2780,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, file=file\n        )",
                                                                                    "start_token": 2781,
                                                                                    "end_token": 2791,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 2783,
                                                                                            "end_token": 2785,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2783,
                                                                                                    "end_token": 2783,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2785,
                                                                                                    "end_token": 2785,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "file=file",
                                                                                            "start_token": 2787,
                                                                                            "end_token": 2789,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "start_token": 2787,
                                                                                                    "end_token": 2787,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "start_token": 2789,
                                                                                                    "end_token": 2789,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return media_url",
                                                    "start_token": 2793,
                                                    "end_token": 2794,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "media_url",
                                                            "start_token": 2794,
                                                            "end_token": 2794,
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                            "start_token": 2796,
                                            "end_token": 2829,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 2797,
                                                    "end_token": 2797,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                    "start_token": 2800,
                                                    "end_token": 2829,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst uploading submission media\")",
                                                            "start_token": 2800,
                                                            "end_token": 2805,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst uploading submission media\")",
                                                                    "start_token": 2800,
                                                                    "end_token": 2805,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 2800,
                                                                            "end_token": 2802,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 2800,
                                                                                    "end_token": 2800,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 2802,
                                                                                    "end_token": 2802,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst uploading submission media\")",
                                                                            "start_token": 2803,
                                                                            "end_token": 2805,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst uploading submission media\"",
                                                                                    "start_token": 2804,
                                                                                    "end_token": 2804,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 2804,
                                                                                            "end_token": 2804,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst uploading submission media",
                                                                                            "start_token": 2804,
                                                                                            "end_token": 2804,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 2804,
                                                                                            "end_token": 2804,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                            "start_token": 2807,
                                                            "end_token": 2829,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                                    "start_token": 2808,
                                                                    "end_token": 2829,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 2808,
                                                                            "end_token": 2812,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 2808,
                                                                                    "end_token": 2810,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2808,
                                                                                            "end_token": 2808,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 2810,
                                                                                            "end_token": 2810,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 2812,
                                                                                    "end_token": 2812,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                                            "start_token": 2813,
                                                                            "end_token": 2829,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 2815,
                                                                                    "end_token": 2817,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 2815,
                                                                                            "end_token": 2815,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 2817,
                                                                                            "end_token": 2817,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while uploading the media file\"}",
                                                                                    "start_token": 2820,
                                                                                    "end_token": 2826,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 2820,
                                                                                            "end_token": 2820,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while uploading the media file\"}",
                                                                                            "start_token": 2822,
                                                                                            "end_token": 2826,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while uploading the media file\"",
                                                                                                    "start_token": 2823,
                                                                                                    "end_token": 2825,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 2823,
                                                                                                            "end_token": 2823,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2823,
                                                                                                                    "end_token": 2823,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 2823,
                                                                                                                    "end_token": 2823,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2823,
                                                                                                                    "end_token": 2823,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while uploading the media file\"",
                                                                                                            "start_token": 2825,
                                                                                                            "end_token": 2825,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2825,
                                                                                                                    "end_token": 2825,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while uploading the media file",
                                                                                                                    "start_token": 2825,
                                                                                                                    "end_token": 2825,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 2825,
                                                                                                                    "end_token": 2825,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
            "start_token": 2833,
            "end_token": 3172,
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                    "start_token": 2833,
                    "end_token": 2869,
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                            "start_token": 2834,
                            "end_token": 2869,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "start_token": 2834,
                                    "end_token": 2836,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "start_token": 2834,
                                            "end_token": 2834,
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "start_token": 2836,
                                            "end_token": 2836,
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                                    "start_token": 2837,
                                    "end_token": 2869,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/generate_image\"",
                                            "start_token": 2839,
                                            "end_token": 2839,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "start_token": 2839,
                                                    "end_token": 2839,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/generate_image",
                                                    "start_token": 2839,
                                                    "end_token": 2839,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "start_token": 2839,
                                                    "end_token": 2839,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "start_token": 2842,
                                            "end_token": 2848,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "start_token": 2842,
                                                    "end_token": 2842,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "start_token": 2844,
                                                    "end_token": 2848,
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "start_token": 2845,
                                                            "end_token": 2845,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2845,
                                                                    "end_token": 2845,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "start_token": 2845,
                                                                    "end_token": 2845,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2845,
                                                                    "end_token": 2845,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "start_token": 2847,
                                                            "end_token": 2847,
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "start_token": 2847,
                                                                    "end_token": 2847,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "start_token": 2847,
                                                                    "end_token": 2847,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "start_token": 2847,
                                                                    "end_token": 2847,
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "start_token": 2851,
                                            "end_token": 2866,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "start_token": 2851,
                                                    "end_token": 2851,
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "start_token": 2853,
                                                    "end_token": 2866,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "start_token": 2854,
                                                            "end_token": 2865,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2854,
                                                                    "end_token": 2856,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2854,
                                                                            "end_token": 2854,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2856,
                                                                            "end_token": 2856,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "start_token": 2857,
                                                                    "end_token": 2865,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "start_token": 2858,
                                                                            "end_token": 2864,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "start_token": 2858,
                                                                                    "end_token": 2862,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2858,
                                                                                            "end_token": 2860,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2858,
                                                                                                    "end_token": 2858,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2860,
                                                                                                    "end_token": 2860,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "start_token": 2862,
                                                                                            "end_token": 2862,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "start_token": 2864,
                                                                                    "end_token": 2864,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                    "start_token": 2871,
                    "end_token": 3172,
                    "children": [
                        {
                            "type": "identifier",
                            "label": "generate_image",
                            "start_token": 2873,
                            "end_token": 2873,
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "start_token": 2874,
                            "end_token": 2906,
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_id: str",
                                    "start_token": 2876,
                                    "end_token": 2878,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_id",
                                            "start_token": 2876,
                                            "end_token": 2876,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "start_token": 2878,
                                            "end_token": 2878,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "start_token": 2878,
                                                    "end_token": 2878,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "start_token": 2881,
                                    "end_token": 2903,
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "start_token": 2881,
                                            "end_token": 2881,
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "start_token": 2883,
                                            "end_token": 2903,
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "start_token": 2883,
                                                    "end_token": 2903,
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "start_token": 2883,
                                                            "end_token": 2885,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "start_token": 2883,
                                                                    "end_token": 2883,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "start_token": 2885,
                                                                    "end_token": 2885,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "start_token": 2888,
                                                            "end_token": 2888,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "start_token": 2890,
                                                            "end_token": 2901,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "start_token": 2890,
                                                                    "end_token": 2892,
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "start_token": 2890,
                                                                            "end_token": 2890,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "start_token": 2892,
                                                                            "end_token": 2892,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "start_token": 2893,
                                                                    "end_token": 2901,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "start_token": 2894,
                                                                            "end_token": 2900,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "start_token": 2894,
                                                                                    "end_token": 2898,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "start_token": 2894,
                                                                                            "end_token": 2896,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "start_token": 2894,
                                                                                                    "end_token": 2894,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "start_token": 2896,
                                                                                                    "end_token": 2896,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "start_token": 2898,
                                                                                            "end_token": 2898,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "start_token": 2900,
                                                                                    "end_token": 2900,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "type",
                            "label": "fastapi.responses.Response",
                            "start_token": 2909,
                            "end_token": 2913,
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "fastapi.responses.Response",
                                    "start_token": 2909,
                                    "end_token": 2913,
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "fastapi.responses",
                                            "start_token": 2909,
                                            "end_token": 2911,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "fastapi",
                                                    "start_token": 2909,
                                                    "end_token": 2909,
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "responses",
                                                    "start_token": 2911,
                                                    "end_token": 2911,
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "Response",
                                            "start_token": 2913,
                                            "end_token": 2913,
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                            "start_token": 2916,
                            "end_token": 3172,
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"",
                                    "start_token": 2916,
                                    "end_token": 2918,
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"",
                                            "start_token": 2916,
                                            "end_token": 2918,
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "start_token": 2916,
                                                    "end_token": 2917,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    ",
                                                    "start_token": 2917,
                                                    "end_token": 2917,
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "start_token": 2917,
                                                    "end_token": 2918,
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                    "start_token": 2920,
                                    "end_token": 3172,
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                            "start_token": 2923,
                                            "end_token": 3137,
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                    "start_token": 2923,
                                                    "end_token": 2939,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                            "start_token": 2923,
                                                            "end_token": 2939,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "start_token": 2923,
                                                                    "end_token": 2923,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                                    "start_token": 2925,
                                                                    "end_token": 2939,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                                            "start_token": 2926,
                                                                            "end_token": 2939,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.data.graph.get_graph",
                                                                                    "start_token": 2926,
                                                                                    "end_token": 2932,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.data.graph",
                                                                                            "start_token": 2926,
                                                                                            "end_token": 2930,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.data",
                                                                                                    "start_token": 2926,
                                                                                                    "end_token": 2928,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "backend",
                                                                                                            "start_token": 2926,
                                                                                                            "end_token": 2926,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "data",
                                                                                                            "start_token": 2928,
                                                                                                            "end_token": 2928,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "graph",
                                                                                                    "start_token": 2930,
                                                                                                    "end_token": 2930,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_graph",
                                                                                            "start_token": 2932,
                                                                                            "end_token": 2932,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(agent_id, user_id=user_id)",
                                                                                    "start_token": 2933,
                                                                                    "end_token": 2939,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "agent_id",
                                                                                            "start_token": 2934,
                                                                                            "end_token": 2934,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 2936,
                                                                                            "end_token": 2938,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2936,
                                                                                                    "end_token": 2936,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 2938,
                                                                                                    "end_token": 2938,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                    "start_token": 2942,
                                                    "end_token": 2962,
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "label": "not agent",
                                                            "start_token": 2943,
                                                            "end_token": 2944,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "start_token": 2944,
                                                                    "end_token": 2944,
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                            "start_token": 2947,
                                                            "end_token": 2962,
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                    "start_token": 2947,
                                                                    "end_token": 2962,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                            "start_token": 2948,
                                                                            "end_token": 2962,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.HTTPException",
                                                                                    "start_token": 2948,
                                                                                    "end_token": 2950,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 2948,
                                                                                            "end_token": 2948,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "HTTPException",
                                                                                            "start_token": 2950,
                                                                                            "end_token": 2950,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                                    "start_token": 2951,
                                                                                    "end_token": 2962,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status_code=404",
                                                                                            "start_token": 2953,
                                                                                            "end_token": 2955,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status_code",
                                                                                                    "start_token": 2953,
                                                                                                    "end_token": 2953,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "label": "404",
                                                                                                    "start_token": 2955,
                                                                                                    "end_token": 2955,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "detail=f\"Agent with ID {agent_id} not found\"",
                                                                                            "start_token": 2957,
                                                                                            "end_token": 2960,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "detail",
                                                                                                    "start_token": 2957,
                                                                                                    "end_token": 2957,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Agent with ID {agent_id} not found\"",
                                                                                                    "start_token": 2959,
                                                                                                    "end_token": 2960,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "start_token": 2959,
                                                                                                            "end_token": 2960,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Agent with ID ",
                                                                                                            "start_token": 2960,
                                                                                                            "end_token": 2960,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{agent_id}",
                                                                                                            "start_token": 2960,
                                                                                                            "end_token": 2960,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "agent_id",
                                                                                                                    "start_token": 2960,
                                                                                                                    "end_token": 2960,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": " not found",
                                                                                                            "start_token": 2960,
                                                                                                            "end_token": 2960,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 2960,
                                                                                                            "end_token": 2960,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Use .jpeg here since we are generating JPEG images",
                                                    "start_token": 2964,
                                                    "end_token": 2974,
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "filename = f\"agent_{agent_id}.jpeg\"",
                                                    "start_token": 2976,
                                                    "end_token": 2979,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "filename = f\"agent_{agent_id}.jpeg\"",
                                                            "start_token": 2976,
                                                            "end_token": 2979,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "filename",
                                                                    "start_token": 2976,
                                                                    "end_token": 2976,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "label": "f\"agent_{agent_id}.jpeg\"",
                                                                    "start_token": 2978,
                                                                    "end_token": 2979,
                                                                    "children": [
                                                                        {
                                                                            "type": "string_start",
                                                                            "label": "f\"",
                                                                            "start_token": 2978,
                                                                            "end_token": 2979,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": "agent_",
                                                                            "start_token": 2979,
                                                                            "end_token": 2979,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "interpolation",
                                                                            "label": "{agent_id}",
                                                                            "start_token": 2979,
                                                                            "end_token": 2979,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "agent_id",
                                                                                    "start_token": 2979,
                                                                                    "end_token": 2979,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": ".jpeg",
                                                                            "start_token": 2979,
                                                                            "end_token": 2979,
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_end",
                                                                            "label": "\"",
                                                                            "start_token": 2979,
                                                                            "end_token": 2979,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                    "start_token": 2982,
                                                    "end_token": 3002,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                            "start_token": 2982,
                                                            "end_token": 3002,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "existing_url",
                                                                    "start_token": 2982,
                                                                    "end_token": 2982,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                                    "start_token": 2984,
                                                                    "end_token": 3002,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                                            "start_token": 2985,
                                                                            "end_token": 3002,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.check_media_exists",
                                                                                    "start_token": 2985,
                                                                                    "end_token": 2995,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "start_token": 2985,
                                                                                            "end_token": 2993,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 2985,
                                                                                                    "end_token": 2991,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 2985,
                                                                                                            "end_token": 2989,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 2985,
                                                                                                                    "end_token": 2987,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 2985,
                                                                                                                            "end_token": 2985,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 2987,
                                                                                                                            "end_token": 2987,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 2989,
                                                                                                                    "end_token": 2989,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 2991,
                                                                                                            "end_token": 2991,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "start_token": 2993,
                                                                                                    "end_token": 2993,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "check_media_exists",
                                                                                            "start_token": 2995,
                                                                                            "end_token": 2995,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id, filename\n        )",
                                                                                    "start_token": 2996,
                                                                                    "end_token": 3002,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "start_token": 2998,
                                                                                            "end_token": 2998,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "start_token": 3000,
                                                                                            "end_token": 3000,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                    "start_token": 3004,
                                                    "end_token": 3030,
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "existing_url",
                                                            "start_token": 3005,
                                                            "end_token": 3005,
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                            "start_token": 3008,
                                                            "end_token": 3030,
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "label": "logger.info(f\"Using existing image for agent {agent_id}\")",
                                                                    "start_token": 3008,
                                                                    "end_token": 3014,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "logger.info(f\"Using existing image for agent {agent_id}\")",
                                                                            "start_token": 3008,
                                                                            "end_token": 3014,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "logger.info",
                                                                                    "start_token": 3008,
                                                                                    "end_token": 3010,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "logger",
                                                                                            "start_token": 3008,
                                                                                            "end_token": 3008,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "info",
                                                                                            "start_token": 3010,
                                                                                            "end_token": 3010,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(f\"Using existing image for agent {agent_id}\")",
                                                                                    "start_token": 3011,
                                                                                    "end_token": 3014,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "f\"Using existing image for agent {agent_id}\"",
                                                                                            "start_token": 3012,
                                                                                            "end_token": 3013,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "f\"",
                                                                                                    "start_token": 3012,
                                                                                                    "end_token": 3013,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "Using existing image for agent ",
                                                                                                    "start_token": 3013,
                                                                                                    "end_token": 3013,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "interpolation",
                                                                                                    "label": "{agent_id}",
                                                                                                    "start_token": 3013,
                                                                                                    "end_token": 3013,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_id",
                                                                                                            "start_token": 3013,
                                                                                                            "end_token": 3013,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "start_token": 3013,
                                                                                                    "end_token": 3013,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "label": "return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                                    "start_token": 3016,
                                                                    "end_token": 3030,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                                            "start_token": 3017,
                                                                            "end_token": 3030,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses.JSONResponse",
                                                                                    "start_token": 3017,
                                                                                    "end_token": 3021,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "fastapi.responses",
                                                                                            "start_token": 3017,
                                                                                            "end_token": 3019,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "fastapi",
                                                                                                    "start_token": 3017,
                                                                                                    "end_token": 3017,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "responses",
                                                                                                    "start_token": 3019,
                                                                                                    "end_token": 3019,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "JSONResponse",
                                                                                            "start_token": 3021,
                                                                                            "end_token": 3021,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(content={\"image_url\": existing_url})",
                                                                                    "start_token": 3022,
                                                                                    "end_token": 3030,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "content={\"image_url\": existing_url}",
                                                                                            "start_token": 3023,
                                                                                            "end_token": 3029,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "content",
                                                                                                    "start_token": 3023,
                                                                                                    "end_token": 3023,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "label": "{\"image_url\": existing_url}",
                                                                                                    "start_token": 3025,
                                                                                                    "end_token": 3029,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "label": "\"image_url\": existing_url",
                                                                                                            "start_token": 3026,
                                                                                                            "end_token": 3028,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "label": "\"image_url\"",
                                                                                                                    "start_token": 3026,
                                                                                                                    "end_token": 3026,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string_start",
                                                                                                                            "label": "\"",
                                                                                                                            "start_token": 3026,
                                                                                                                            "end_token": 3026,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string_content",
                                                                                                                            "label": "image_url",
                                                                                                                            "start_token": 3026,
                                                                                                                            "end_token": 3026,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string_end",
                                                                                                                            "label": "\"",
                                                                                                                            "start_token": 3026,
                                                                                                                            "end_token": 3026,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "existing_url",
                                                                                                                    "start_token": 3028,
                                                                                                                    "end_token": 3028,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Generate agent image as JPEG",
                                                    "start_token": 3032,
                                                    "end_token": 3037,
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                    "start_token": 3039,
                                                    "end_token": 3059,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                            "start_token": 3039,
                                                            "end_token": 3059,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image",
                                                                    "start_token": 3039,
                                                                    "end_token": 3039,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                                    "start_token": 3041,
                                                                    "end_token": 3059,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                                            "start_token": 3042,
                                                                            "end_token": 3059,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.image_gen.generate_agent_image",
                                                                                    "start_token": 3042,
                                                                                    "end_token": 3052,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.image_gen",
                                                                                            "start_token": 3042,
                                                                                            "end_token": 3050,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 3042,
                                                                                                    "end_token": 3048,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 3042,
                                                                                                            "end_token": 3046,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 3042,
                                                                                                                    "end_token": 3044,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 3042,
                                                                                                                            "end_token": 3042,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 3044,
                                                                                                                            "end_token": 3044,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 3046,
                                                                                                                    "end_token": 3046,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 3048,
                                                                                                            "end_token": 3048,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_gen",
                                                                                                    "start_token": 3050,
                                                                                                    "end_token": 3050,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "generate_agent_image",
                                                                                            "start_token": 3052,
                                                                                            "end_token": 3052,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            agent=agent\n        )",
                                                                                    "start_token": 3053,
                                                                                    "end_token": 3059,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent=agent",
                                                                                            "start_token": 3055,
                                                                                            "end_token": 3057,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent",
                                                                                                    "start_token": 3055,
                                                                                                    "end_token": 3055,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent",
                                                                                                    "start_token": 3057,
                                                                                                    "end_token": 3057,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Create UploadFile with the correct filename and content_type",
                                                    "start_token": 3062,
                                                    "end_token": 3070,
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                    "start_token": 3072,
                                                    "end_token": 3089,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                            "start_token": 3072,
                                                            "end_token": 3089,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image_file",
                                                                    "start_token": 3072,
                                                                    "end_token": 3072,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                                    "start_token": 3074,
                                                                    "end_token": 3089,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.UploadFile",
                                                                            "start_token": 3074,
                                                                            "end_token": 3076,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "fastapi",
                                                                                    "start_token": 3074,
                                                                                    "end_token": 3074,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "UploadFile",
                                                                                    "start_token": 3076,
                                                                                    "end_token": 3076,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            file=image,\n            filename=filename,\n        )",
                                                                            "start_token": 3077,
                                                                            "end_token": 3089,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "file=image",
                                                                                    "start_token": 3079,
                                                                                    "end_token": 3081,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "file",
                                                                                            "start_token": 3079,
                                                                                            "end_token": 3079,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "image",
                                                                                            "start_token": 3081,
                                                                                            "end_token": 3081,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "filename=filename",
                                                                                    "start_token": 3084,
                                                                                    "end_token": 3086,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "start_token": 3084,
                                                                                            "end_token": 3084,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "start_token": 3086,
                                                                                            "end_token": 3086,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                    "start_token": 3092,
                                                    "end_token": 3120,
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                            "start_token": 3092,
                                                            "end_token": 3120,
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image_url",
                                                                    "start_token": 3092,
                                                                    "end_token": 3092,
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                    "start_token": 3094,
                                                                    "end_token": 3120,
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                            "start_token": 3095,
                                                                            "end_token": 3120,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.upload_media",
                                                                                    "start_token": 3095,
                                                                                    "end_token": 3105,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "start_token": 3095,
                                                                                            "end_token": 3103,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "start_token": 3095,
                                                                                                    "end_token": 3101,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "start_token": 3095,
                                                                                                            "end_token": 3099,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "start_token": 3095,
                                                                                                                    "end_token": 3097,
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "start_token": 3095,
                                                                                                                            "end_token": 3095,
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "start_token": 3097,
                                                                                                                            "end_token": 3097,
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "start_token": 3099,
                                                                                                                    "end_token": 3099,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "start_token": 3101,
                                                                                                            "end_token": 3101,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "start_token": 3103,
                                                                                                    "end_token": 3103,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "upload_media",
                                                                                            "start_token": 3105,
                                                                                            "end_token": 3105,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                                    "start_token": 3106,
                                                                                    "end_token": 3120,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "start_token": 3108,
                                                                                            "end_token": 3110,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 3108,
                                                                                                    "end_token": 3108,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "start_token": 3110,
                                                                                                    "end_token": 3110,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "file=image_file",
                                                                                            "start_token": 3112,
                                                                                            "end_token": 3114,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "start_token": 3112,
                                                                                                    "end_token": 3112,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_file",
                                                                                                    "start_token": 3114,
                                                                                                    "end_token": 3114,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "use_file_name=True",
                                                                                            "start_token": 3116,
                                                                                            "end_token": 3118,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "use_file_name",
                                                                                                    "start_token": 3116,
                                                                                                    "end_token": 3116,
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "true",
                                                                                                    "label": "True",
                                                                                                    "start_token": 3118,
                                                                                                    "end_token": 3118,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                                    "start_token": 3123,
                                                    "end_token": 3137,
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                                            "start_token": 3124,
                                                            "end_token": 3137,
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.responses.JSONResponse",
                                                                    "start_token": 3124,
                                                                    "end_token": 3128,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses",
                                                                            "start_token": 3124,
                                                                            "end_token": 3126,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "fastapi",
                                                                                    "start_token": 3124,
                                                                                    "end_token": 3124,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "responses",
                                                                                    "start_token": 3126,
                                                                                    "end_token": 3126,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "JSONResponse",
                                                                            "start_token": 3128,
                                                                            "end_token": 3128,
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(content={\"image_url\": image_url})",
                                                                    "start_token": 3129,
                                                                    "end_token": 3137,
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "content={\"image_url\": image_url}",
                                                                            "start_token": 3130,
                                                                            "end_token": 3136,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "content",
                                                                                    "start_token": 3130,
                                                                                    "end_token": 3130,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "label": "{\"image_url\": image_url}",
                                                                                    "start_token": 3132,
                                                                                    "end_token": 3136,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "label": "\"image_url\": image_url",
                                                                                            "start_token": 3133,
                                                                                            "end_token": 3135,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"image_url\"",
                                                                                                    "start_token": 3133,
                                                                                                    "end_token": 3133,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 3133,
                                                                                                            "end_token": 3133,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "image_url",
                                                                                                            "start_token": 3133,
                                                                                                            "end_token": 3133,
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "start_token": 3133,
                                                                                                            "end_token": 3133,
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_url",
                                                                                                    "start_token": 3135,
                                                                                                    "end_token": 3135,
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                            "start_token": 3139,
                                            "end_token": 3172,
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "start_token": 3140,
                                                    "end_token": 3140,
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                    "start_token": 3143,
                                                    "end_token": 3172,
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst generating submission image\")",
                                                            "start_token": 3143,
                                                            "end_token": 3148,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst generating submission image\")",
                                                                    "start_token": 3143,
                                                                    "end_token": 3148,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "start_token": 3143,
                                                                            "end_token": 3145,
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "start_token": 3143,
                                                                                    "end_token": 3143,
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "start_token": 3145,
                                                                                    "end_token": 3145,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst generating submission image\")",
                                                                            "start_token": 3146,
                                                                            "end_token": 3148,
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst generating submission image\"",
                                                                                    "start_token": 3147,
                                                                                    "end_token": 3147,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "start_token": 3147,
                                                                                            "end_token": 3147,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst generating submission image",
                                                                                            "start_token": 3147,
                                                                                            "end_token": 3147,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "start_token": 3147,
                                                                                            "end_token": 3147,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                            "start_token": 3150,
                                                            "end_token": 3172,
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                                    "start_token": 3151,
                                                                    "end_token": 3172,
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "start_token": 3151,
                                                                            "end_token": 3155,
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "start_token": 3151,
                                                                                    "end_token": 3153,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "start_token": 3151,
                                                                                            "end_token": 3151,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "start_token": 3153,
                                                                                            "end_token": 3153,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "start_token": 3155,
                                                                                    "end_token": 3155,
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                                            "start_token": 3156,
                                                                            "end_token": 3172,
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "start_token": 3158,
                                                                                    "end_token": 3160,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "start_token": 3158,
                                                                                            "end_token": 3158,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "start_token": 3160,
                                                                                            "end_token": 3160,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while generating the image\"}",
                                                                                    "start_token": 3163,
                                                                                    "end_token": 3169,
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "start_token": 3163,
                                                                                            "end_token": 3163,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while generating the image\"}",
                                                                                            "start_token": 3165,
                                                                                            "end_token": 3169,
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while generating the image\"",
                                                                                                    "start_token": 3166,
                                                                                                    "end_token": 3168,
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "start_token": 3166,
                                                                                                            "end_token": 3166,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 3166,
                                                                                                                    "end_token": 3166,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "start_token": 3166,
                                                                                                                    "end_token": 3166,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 3166,
                                                                                                                    "end_token": 3166,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while generating the image\"",
                                                                                                            "start_token": 3168,
                                                                                                            "end_token": 3168,
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 3168,
                                                                                                                    "end_token": 3168,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while generating the image",
                                                                                                                    "start_token": 3168,
                                                                                                                    "end_token": 3168,
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "start_token": 3168,
                                                                                                                    "end_token": 3168,
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}