{
    "type": "module",
    "label": "import logging\nimport typing\nimport urllib.parse\n\nimport autogpt_libs.auth.depends\nimport autogpt_libs.auth.middleware\nimport fastapi\nimport fastapi.responses\n\nimport backend.data.graph\nimport backend.server.v2.store.db\nimport backend.server.v2.store.image_gen\nimport backend.server.v2.store.media\nimport backend.server.v2.store.model\n\nlogger = logging.getLogger(__name__)\n\nrouter = fastapi.APIRouter()\n\n\n##############################################\n############### Profile Endpoints ############\n##############################################\n\n\n@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)\nasync def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )\n\n\n@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )\n\n\n##############################################\n############### Agent Endpoints ##############\n##############################################\n\n\n@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)\nasync def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )\n\n\n@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)\nasync def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )\n\n\n@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)\nasync def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )\n\n\n##############################################\n############# Creator Endpoints #############\n##############################################\n\n\n@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)\nasync def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )\n\n\n@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )\n\n\n############################################\n############# Store Submissions ###############\n############################################\n@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)\nasync def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )\n\n\n@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)\nasync def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )\n\n\n@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)\nasync def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )\n\n\n@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)\nasync def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )\n\n\n@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )\n\n\n@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )\n",
    "children": [
        {
            "type": "import_statement",
            "label": "import logging",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "logging",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logging",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import typing",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "typing",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "typing",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import urllib.parse",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "urllib.parse",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "urllib",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "parse",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import autogpt_libs.auth.depends",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "autogpt_libs.auth.depends",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "autogpt_libs",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "auth",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "depends",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import autogpt_libs.auth.middleware",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "autogpt_libs.auth.middleware",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "autogpt_libs",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "auth",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "middleware",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import fastapi",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "fastapi",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "fastapi",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import fastapi.responses",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "fastapi.responses",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "fastapi",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "responses",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.data.graph",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.data.graph",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "data",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "graph",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.db",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.db",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "db",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.image_gen",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.image_gen",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "image_gen",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.media",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.media",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "media",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "import_statement",
            "label": "import backend.server.v2.store.model",
            "children": [
                {
                    "type": "dotted_name",
                    "label": "backend.server.v2.store.model",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "backend",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "server",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "v2",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "store",
                            "children": []
                        },
                        {
                            "type": "identifier",
                            "label": "model",
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "logger = logging.getLogger(__name__)",
            "children": [
                {
                    "type": "assignment",
                    "label": "logger = logging.getLogger(__name__)",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "logger",
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "logging.getLogger(__name__)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "logging.getLogger",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "logging",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "getLogger",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(__name__)",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "__name__",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "expression_statement",
            "label": "router = fastapi.APIRouter()",
            "children": [
                {
                    "type": "assignment",
                    "label": "router = fastapi.APIRouter()",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "router",
                            "children": []
                        },
                        {
                            "type": "call",
                            "label": "fastapi.APIRouter()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "fastapi.APIRouter",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "fastapi",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "APIRouter",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "comment",
            "label": "############### Profile Endpoints ############",
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)\nasync def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    response_model=backend.server.v2.store.model.ProfileDetails,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/profile\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/profile",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.ProfileDetails",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.ProfileDetails",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "ProfileDetails",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_profile(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    \"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_profile",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"\n    try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get the profile details for the authenticated user.\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get the profile details for the authenticated user.\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)\n        return profile",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "profile = await backend.server.v2.store.db.get_user_profile(user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "profile",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_user_profile(user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_user_profile(user_id)",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_user_profile",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_user_profile",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(user_id)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting user profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting user profile\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting user profile\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting user profile\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting user profile\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting user profile",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the user profile\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the user profile\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the user profile\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the user profile\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the user profile\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the user profile",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/profile\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/profile\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/profile",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorDetails",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorDetails",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def update_or_create_profile(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "update_or_create_profile",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    profile: backend.server.v2.store.model.Profile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "profile: backend.server.v2.store.model.Profile",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "profile",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.Profile",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.Profile",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "Profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"\n    try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Update the store profile for the authenticated user.\n\n    Args:\n        profile (Profile): The updated profile details\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        CreatorDetails: The updated profile\n\n    Raises:\n        HTTPException: If there is an error updating the profile\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile\n    except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )\n        return updated_profile",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "updated_profile = await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "updated_profile",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.update_or_create_profile(\n            user_id=user_id, profile=profile\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.update_or_create_profile",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "update_or_create_profile",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, profile=profile\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "profile=profile",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "profile",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "profile",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return updated_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "updated_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst updating profile\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst updating profile\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst updating profile\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst updating profile\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst updating profile\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst updating profile",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while updating the user profile\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while updating the user profile\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while updating the user profile\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while updating the user profile\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while updating the user profile\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while updating the user profile",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "comment",
            "label": "############### Agent Endpoints ##############",
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)\nasync def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentsResponse,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentsResponse",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreAgentsResponse",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreAgentsResponse",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_agents(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_agents",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    featured: bool = False,\n    creator: str | None = None,\n    sorted_by: str | None = None,\n    search_query: str | None = None,\n    category: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "children": [
                                {
                                    "type": "typed_default_parameter",
                                    "label": "featured: bool = False",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "featured",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "bool",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "false",
                                            "label": "False",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "creator: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "creator",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "sorted_by: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "sorted_by",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "search_query: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "search_query",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "category: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "category",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get a paginated list of agents from the store with optional filtering and sorting.\n\n    Args:\n        featured (bool, optional): Filter to only show featured agents. Defaults to False.\n        creator (str | None, optional): Filter agents by creator username. Defaults to None.\n        sorted_by (str | None, optional): Sort agents by \"runs\" or \"rating\". Defaults to None.\n        search_query (str | None, optional): Search agents by name, subheading and description. Defaults to None.\n        category (str | None, optional): Filter agents by category. Defaults to None.\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of agents per page. Defaults to 20.\n\n    Returns:\n        StoreAgentsResponse: Paginated list of agents matching the filters\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n\n    Used for:\n    - Home Page Featured Agents\n    - Home Page Top Agents\n    - Search Results\n    - Agent Details - Other Agents By Creator\n    - Agent Details - Similar Agents\n    - Creator Details - Agents By Creator\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents\n    except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )\n        return agents",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agents = await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agents",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_agents(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_agents",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_agents",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            featured=featured,\n            creator=creator,\n            sorted_by=sorted_by,\n            search_query=search_query,\n            category=category,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "featured=featured",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "creator=creator",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "creator",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "creator",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sorted_by=sorted_by",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "search_query=search_query",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "category=category",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "category",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "category",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agents",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agents",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occured whilst getting store agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occured whilst getting store agents\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occured whilst getting store agents\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occured whilst getting store agents\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occured whilst getting store agents\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occured whilst getting store agents",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store agents\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the store agents\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the store agents\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store agents\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store agents\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store agents",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)\nasync def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents/{username}/{agent_name}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.StoreAgentDetails,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents/{username}/{agent_name}\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents/{username}/{agent_name}",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreAgentDetails",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreAgentDetails",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreAgentDetails",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_agent(username: str, agent_name: str):\n    \"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_agent",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(username: str, agent_name: str)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_name: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_name",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    This is only used on the AgentDetails Page\n\n    It returns the store listing agents details.\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        # URL decode the agent name since it comes from the URL path\n        agent_name = urllib.parse.unquote(agent_name).lower()\n        agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )\n        return agent",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# URL decode the agent name since it comes from the URL path",
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent_name = urllib.parse.unquote(agent_name).lower()",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent_name = urllib.parse.unquote(agent_name).lower()",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent_name",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(agent_name).lower()",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(agent_name).lower",
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(agent_name)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(agent_name)",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent = await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_agent_details(\n            username=username, agent_name=agent_name\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_agent_details",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_agent_details",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            username=username, agent_name=agent_name\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "username=username",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_name=agent_name",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_name",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agent",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agent",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store agent details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store agent details\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store agent details\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store agent details\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store agent details\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store agent details",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            },\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the store agent details\"\n            }",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store agent details\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store agent details\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store agent details",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)\nasync def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/agents/{username}/{agent_name}/review\",\n    tags=[\"store\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreReview,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/agents/{username}/{agent_name}/review\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/agents/{username}/{agent_name}/review",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreReview",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreReview",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreReview",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def create_review(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "create_review",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    username: str,\n    agent_name: str,\n    review: backend.server.v2.store.model.StoreReviewCreate,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_name: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_name",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "review: backend.server.v2.store.model.StoreReviewCreate",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "review",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.StoreReviewCreate",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreReviewCreate",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreReviewCreate",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Create a review for a store agent.\n\n    Args:\n        username: Creator's username\n        agent_name: Name/slug of the agent\n        review: Review details including score and optional comments\n        user_id: ID of authenticated user creating the review\n\n    Returns:\n        The created review\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        agent_name = urllib.parse.unquote(agent_name)\n        # Create the review\n        created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )\n\n        return created_review",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent_name = urllib.parse.unquote(agent_name)",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent_name = urllib.parse.unquote(agent_name)",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent_name",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(agent_name)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "urllib.parse",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "urllib",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "parse",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "unquote",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(agent_name)",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "agent_name",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Create the review",
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "created_review = await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "created_review",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.create_store_review(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.create_store_review",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "create_store_review",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            store_listing_version_id=review.store_listing_version_id,\n            score=review.score,\n            comments=review.comments,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "store_listing_version_id=review.store_listing_version_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "store_listing_version_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.store_listing_version_id",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store_listing_version_id",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "score=review.score",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "score",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.score",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "score",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "comments=review.comments",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "comments",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "review.comments",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "review",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "comments",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return created_review",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "created_review",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst creating store review\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst creating store review\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst creating store review\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst creating store review\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst creating store review\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst creating store review",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store review\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store review\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while creating the store review\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while creating the store review\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while creating the store review\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while creating the store review",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "comment",
            "label": "############# Creator Endpoints #############",
            "children": []
        },
        {
            "type": "comment",
            "label": "##############################################",
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)\nasync def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/creators\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorsResponse,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/creators\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/creators",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorsResponse",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorsResponse",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorsResponse",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_creators(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_creators",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    featured: bool = False,\n    search_query: str | None = None,\n    sorted_by: str | None = None,\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "children": [
                                {
                                    "type": "typed_default_parameter",
                                    "label": "featured: bool = False",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "featured",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "bool",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "false",
                                            "label": "False",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "search_query: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "search_query",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "sorted_by: str | None = None",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "sorted_by",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str | None",
                                            "children": [
                                                {
                                                    "type": "binary_operator",
                                                    "label": "str | None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "none",
                                            "label": "None",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n\n    try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    This is needed for:\n    - Home Page Featured Creators\n    - Search Results Page\n\n    ---\n\n    To support this functionality we need:\n    - featured: bool - to limit the list to just featured agents\n    - search_query: str - vector search based on the creators profile description.\n    - sorted_by: [agent_rating, agent_runs] -\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )\n        return creators",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "creators = await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "creators",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_creators(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_creators",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_creators",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            featured=featured,\n            search_query=search_query,\n            sorted_by=sorted_by,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "featured=featured",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "featured",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "search_query=search_query",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "search_query",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sorted_by=sorted_by",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sorted_by",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return creators",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "creators",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store creators\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store creators\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store creators\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store creators\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store creators\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store creators",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the store creators\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the store creators\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the store creators\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store creators\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store creators\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store creators",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)\nasync def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/creator/{username}\",\n    tags=[\"store\", \"public\"],\n    response_model=backend.server.v2.store.model.CreatorDetails,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/creator/{username}\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/creator/{username}",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"public\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"public\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"public\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "public",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.CreatorDetails",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.CreatorDetails",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "CreatorDetails",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_creator(\n    username: str,\n):\n    \"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_creator",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    username: str,\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "username: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "username",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"\n    try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get the details of a creator\n    - Creator Details Page\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get the details of a creator\n    - Creator Details Page\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "username = urllib.parse.unquote(username).lower()\n        creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )\n        return creator",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "username = urllib.parse.unquote(username).lower()",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "username = urllib.parse.unquote(username).lower()",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "username",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "urllib.parse.unquote(username).lower()",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "urllib.parse.unquote(username).lower",
                                                                            "children": [
                                                                                {
                                                                                    "type": "call",
                                                                                    "label": "urllib.parse.unquote(username)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "urllib.parse.unquote",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "urllib.parse",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "urllib",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "parse",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "unquote",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "argument_list",
                                                                                            "label": "(username)",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "lower",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "()",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "creator = await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "creator",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_creator_details(\n            username=username.lower()\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_creator_details",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_creator_details",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            username=username.lower()\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "username=username.lower()",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "username",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "call",
                                                                                                    "label": "username.lower()",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "username.lower",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "username",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "lower",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "argument_list",
                                                                                                            "label": "()",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return creator",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "creator",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting creator details\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting creator details\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting creator details\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting creator details\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting creator details\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting creator details",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            },\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            }",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the creator details\"\n            }",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the creator details\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the creator details\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the creator details",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "comment",
            "label": "############################################",
            "children": []
        },
        {
            "type": "comment",
            "label": "############# Store Submissions ###############",
            "children": []
        },
        {
            "type": "comment",
            "label": "############################################",
            "children": []
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)\nasync def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/myagents\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.MyAgentsResponse,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/myagents\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/myagents",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.MyAgentsResponse",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.MyAgentsResponse",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "MyAgentsResponse",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_my_agents(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n):\n    try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_my_agents",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                            "children": [
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)\n        return agents",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agents = await backend.server.v2.store.db.get_my_agents(user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agents",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_my_agents(user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_my_agents(user_id)",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_my_agents",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_my_agents",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(user_id)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return agents",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "agents",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting my agents\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting my agents\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting my agents\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting my agents\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting my agents\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting my agents",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while retrieving the my agents\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while retrieving the my agents\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while retrieving the my agents\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the my agents\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the my agents\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the my agents",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)\nasync def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.delete(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.delete",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "delete",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/{submission_id}\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=bool,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/{submission_id}\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/{submission_id}",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=bool",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "bool",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def delete_submission(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n):\n    \"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "delete_submission",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    submission_id: str,\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "submission_id: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "submission_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"\n    try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Delete a store listing submission.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        submission_id (str): ID of the submission to be deleted\n\n    Returns:\n        bool: True if the submission was successfully deleted, False otherwise\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result\n    except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )\n        return result",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "result = await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "result",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.delete_store_submission(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.delete_store_submission",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "delete_store_submission",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            submission_id=submission_id,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "submission_id=submission_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "submission_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "submission_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return result",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "result",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst deleting store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst deleting store submission\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst deleting store submission\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst deleting store submission\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst deleting store submission\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst deleting store submission",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while deleting the store submission\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while deleting the store submission\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while deleting the store submission\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while deleting the store submission\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while deleting the store submission\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while deleting the store submission",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)\nasync def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.get(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.get",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "get",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmissionsResponse,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreSubmissionsResponse",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmissionsResponse",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmissionsResponse",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def get_submissions(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n):\n    \"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "get_submissions",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n    page: int = 1,\n    page_size: int = 20,\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page: int = 1",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "1",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_default_parameter",
                                    "label": "page_size: int = 20",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "page_size",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "int",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "int",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "label": "20",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"\n    if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )\n\n    if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )\n    try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Get a paginated list of store submissions for the authenticated user.\n\n    Args:\n        user_id (str): ID of the authenticated user\n        page (int, optional): Page number for pagination. Defaults to 1.\n        page_size (int, optional): Number of submissions per page. Defaults to 20.\n\n    Returns:\n        StoreListingsResponse: Paginated list of store submissions\n\n    Raises:\n        HTTPException: If page or page_size are less than 1\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "if_statement",
                                    "label": "if page_size < 1:\n        raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                    "children": [
                                        {
                                            "type": "comparison_operator",
                                            "label": "page_size < 1",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "page_size",
                                                    "children": []
                                                },
                                                {
                                                    "type": "integer",
                                                    "label": "1",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                            "children": [
                                                {
                                                    "type": "raise_statement",
                                                    "label": "raise fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.HTTPException(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.HTTPException",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "HTTPException",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(\n            status_code=422, detail=\"Page size must be greater than 0\"\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "status_code=422",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "status_code",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "integer",
                                                                                    "label": "422",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "detail=\"Page size must be greater than 0\"",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "detail",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Page size must be greater than 0\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Page size must be greater than 0",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings\n    except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )\n        return listings",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "listings = await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "listings",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.get_store_submissions(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.get_store_submissions",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_store_submissions",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            page=page,\n            page_size=page_size,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page=page",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "page_size=page_size",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "page_size",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return listings",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "listings",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst getting store submissions\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst getting store submissions\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst getting store submissions\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst getting store submissions\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst getting store submissions\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst getting store submissions",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            },\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\n                \"detail\": \"An error occurred while retrieving the store submissions\"\n            }",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while retrieving the store submissions\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while retrieving the store submissions\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while retrieving the store submissions",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)\nasync def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n    response_model=backend.server.v2.store.model.StoreSubmission,\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "response_model=backend.server.v2.store.model.StoreSubmission",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "response_model",
                                                    "children": []
                                                },
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmission",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmission",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def create_submission(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "create_submission",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    submission_request: backend.server.v2.store.model.StoreSubmissionRequest,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "submission_request: backend.server.v2.store.model.StoreSubmissionRequest",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "submission_request",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "backend.server.v2.store.model.StoreSubmissionRequest",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "backend.server.v2.store.model.StoreSubmissionRequest",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "backend.server.v2.store.model",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "backend.server.v2.store",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "backend.server.v2",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "backend",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "server",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "v2",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "store",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "model",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "StoreSubmissionRequest",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"\n    try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Create a new store listing submission.\n\n    Args:\n        submission_request (StoreSubmissionRequest): The submission details\n        user_id (str): ID of the authenticated user submitting the listing\n\n    Returns:\n        StoreSubmission: The created store submission\n\n    Raises:\n        HTTPException: If there is an error creating the submission\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission\n    except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )\n        return submission",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "submission = await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "submission",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.db.create_store_submission(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.db.create_store_submission",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.db",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "db",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "create_store_submission",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id,\n            agent_id=submission_request.agent_id,\n            agent_version=submission_request.agent_version,\n            slug=submission_request.slug,\n            name=submission_request.name,\n            video_url=submission_request.video_url,\n            image_urls=submission_request.image_urls,\n            description=submission_request.description,\n            sub_heading=submission_request.sub_heading,\n            categories=submission_request.categories,\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_id=submission_request.agent_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.agent_id",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_id",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent_version=submission_request.agent_version",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent_version",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.agent_version",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_version",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "slug=submission_request.slug",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "slug",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.slug",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "slug",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "name=submission_request.name",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "name",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.name",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "name",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "video_url=submission_request.video_url",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "video_url",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.video_url",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "video_url",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "image_urls=submission_request.image_urls",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_urls",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.image_urls",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "image_urls",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "description=submission_request.description",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "description",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.description",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "description",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "sub_heading=submission_request.sub_heading",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "sub_heading",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.sub_heading",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "sub_heading",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "categories=submission_request.categories",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "categories",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "submission_request.categories",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "submission_request",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "categories",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return submission",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "submission",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst creating store submission\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst creating store submission\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst creating store submission\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst creating store submission\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst creating store submission\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst creating store submission",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while creating the store submission\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while creating the store submission\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while creating the store submission\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while creating the store submission\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while creating the store submission\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while creating the store submission",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/media\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/media\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/media",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def upload_submission_media(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n):\n    \"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "upload_submission_media",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    file: fastapi.UploadFile,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "file: fastapi.UploadFile",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "file",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "fastapi.UploadFile",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "label": "fastapi.UploadFile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "fastapi",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "UploadFile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"\n    try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Upload media (images/videos) for a store listing submission.\n\n    Args:\n        file (UploadFile): The media file to upload\n        user_id (str): ID of the authenticated user uploading the media\n\n    Returns:\n        str: URL of the uploaded media file\n\n    Raises:\n        HTTPException: If there is an error uploading the media\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url\n    except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )\n        return media_url",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "media_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "media_url",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=file\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.upload_media",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "upload_media",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, file=file\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "file=file",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return media_url",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "media_url",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst uploading submission media\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst uploading submission media\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst uploading submission media\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst uploading submission media\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst uploading submission media\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst uploading submission media",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while uploading the media file\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while uploading the media file\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while uploading the media file\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while uploading the media file\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while uploading the media file\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while uploading the media file",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "decorated_definition",
            "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)\nasync def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
            "children": [
                {
                    "type": "decorator",
                    "label": "@router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                    "children": [
                        {
                            "type": "call",
                            "label": "router.post(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "router.post",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "router",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "post",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "label": "(\n    \"/submissions/generate_image\",\n    tags=[\"store\", \"private\"],\n    dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)],\n)",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"/submissions/generate_image\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "/submissions/generate_image",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "tags=[\"store\", \"private\"]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "tags",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[\"store\", \"private\"]",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "label": "\"store\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "store",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "string",
                                                            "label": "\"private\"",
                                                            "children": [
                                                                {
                                                                    "type": "string_start",
                                                                    "label": "\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_content",
                                                                    "label": "private",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string_end",
                                                                    "label": "\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "keyword_argument",
                                            "label": "dependencies=[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "dependencies",
                                                    "children": []
                                                },
                                                {
                                                    "type": "list",
                                                    "label": "[fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)]",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.middleware.auth_middleware)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.middleware.auth_middleware)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.middleware.auth_middleware",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.middleware",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "middleware",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "auth_middleware",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "function_definition",
                    "label": "async def generate_image(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n) -> fastapi.responses.Response:\n    \"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                    "children": [
                        {
                            "type": "identifier",
                            "label": "generate_image",
                            "children": []
                        },
                        {
                            "type": "parameters",
                            "label": "(\n    agent_id: str,\n    user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ],\n)",
                            "children": [
                                {
                                    "type": "typed_parameter",
                                    "label": "agent_id: str",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "agent_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "str",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "str",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "typed_parameter",
                                    "label": "user_id: typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "label": "user_id",
                                            "children": []
                                        },
                                        {
                                            "type": "type",
                                            "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "label": "typing.Annotated[\n        str, fastapi.Depends(autogpt_libs.auth.depends.get_user_id)\n    ]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "label": "typing.Annotated",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "typing",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "Annotated",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "label": "str",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.Depends(autogpt_libs.auth.depends.get_user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.Depends",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "fastapi",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "Depends",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(autogpt_libs.auth.depends.get_user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "autogpt_libs.auth.depends.get_user_id",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "autogpt_libs.auth.depends",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "autogpt_libs.auth",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "autogpt_libs",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "auth",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "depends",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "get_user_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "type",
                            "label": "fastapi.responses.Response",
                            "children": [
                                {
                                    "type": "attribute",
                                    "label": "fastapi.responses.Response",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "label": "fastapi.responses",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "fastapi",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "label": "responses",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "label": "Response",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "block",
                            "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"\n    try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                            "children": [
                                {
                                    "type": "expression_statement",
                                    "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"",
                                    "children": [
                                        {
                                            "type": "string",
                                            "label": "\"\"\"\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    \"\"\"",
                                            "children": [
                                                {
                                                    "type": "string_start",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_content",
                                                    "label": "\n    Generate an image for a store listing submission.\n\n    Args:\n        agent_id (str): ID of the agent to generate an image for\n        user_id (str): ID of the authenticated user\n\n    Returns:\n        JSONResponse: JSON containing the URL of the generated image\n    ",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string_end",
                                                    "label": "\"\"\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "try_statement",
                                    "label": "try:\n        agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})\n    except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                    "children": [
                                        {
                                            "type": "block",
                                            "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)\n\n        if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )\n        # Use .jpeg here since we are generating JPEG images\n        filename = f\"agent_{agent_id}.jpeg\"\n\n        existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )\n        if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})\n        # Generate agent image as JPEG\n        image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )\n\n        # Create UploadFile with the correct filename and content_type\n        image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )\n\n        image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )\n\n        return fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                            "children": [
                                                {
                                                    "type": "expression_statement",
                                                    "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "agent = await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.data.graph.get_graph(agent_id, user_id=user_id)",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.data.graph.get_graph",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.data.graph",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.data",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "backend",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "data",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "graph",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "get_graph",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(agent_id, user_id=user_id)",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "agent_id",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if not agent:\n            raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                    "children": [
                                                        {
                                                            "type": "not_operator",
                                                            "label": "not agent",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "agent",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                            "children": [
                                                                {
                                                                    "type": "raise_statement",
                                                                    "label": "raise fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "fastapi.HTTPException(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.HTTPException",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "HTTPException",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n                status_code=404, detail=f\"Agent with ID {agent_id} not found\"\n            )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "status_code=404",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "status_code",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "integer",
                                                                                                    "label": "404",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "detail=f\"Agent with ID {agent_id} not found\"",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "detail",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "f\"Agent with ID {agent_id} not found\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "f\"",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "Agent with ID ",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "interpolation",
                                                                                                            "label": "{agent_id}",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "agent_id",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": " not found",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Use .jpeg here since we are generating JPEG images",
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "filename = f\"agent_{agent_id}.jpeg\"",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "filename = f\"agent_{agent_id}.jpeg\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "filename",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "label": "f\"agent_{agent_id}.jpeg\"",
                                                                    "children": [
                                                                        {
                                                                            "type": "string_start",
                                                                            "label": "f\"",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": "agent_",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "interpolation",
                                                                            "label": "{agent_id}",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "agent_id",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "string_content",
                                                                            "label": ".jpeg",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "string_end",
                                                                            "label": "\"",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "existing_url = await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "existing_url",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.check_media_exists(\n            user_id, filename\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.check_media_exists",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "check_media_exists",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id, filename\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "user_id",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "if_statement",
                                                    "label": "if existing_url:\n            logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "label": "existing_url",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "block",
                                                            "label": "logger.info(f\"Using existing image for agent {agent_id}\")\n            return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                            "children": [
                                                                {
                                                                    "type": "expression_statement",
                                                                    "label": "logger.info(f\"Using existing image for agent {agent_id}\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "logger.info(f\"Using existing image for agent {agent_id}\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "logger.info",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "logger",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "info",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(f\"Using existing image for agent {agent_id}\")",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string",
                                                                                            "label": "f\"Using existing image for agent {agent_id}\"",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string_start",
                                                                                                    "label": "f\"",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_content",
                                                                                                    "label": "Using existing image for agent ",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "interpolation",
                                                                                                    "label": "{agent_id}",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "agent_id",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "string_end",
                                                                                                    "label": "\"",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "return_statement",
                                                                    "label": "return fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "fastapi.responses.JSONResponse(content={\"image_url\": existing_url})",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses.JSONResponse",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "fastapi.responses",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "fastapi",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "responses",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "JSONResponse",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(content={\"image_url\": existing_url})",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "content={\"image_url\": existing_url}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "content",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "dictionary",
                                                                                                    "label": "{\"image_url\": existing_url}",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "pair",
                                                                                                            "label": "\"image_url\": existing_url",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string",
                                                                                                                    "label": "\"image_url\"",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "string_start",
                                                                                                                            "label": "\"",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string_content",
                                                                                                                            "label": "image_url",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "string_end",
                                                                                                                            "label": "\"",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "existing_url",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Generate agent image as JPEG",
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image = await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.image_gen.generate_agent_image(\n            agent=agent\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.image_gen.generate_agent_image",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.image_gen",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_gen",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "generate_agent_image",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            agent=agent\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "agent=agent",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "agent",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "comment",
                                                    "label": "# Create UploadFile with the correct filename and content_type",
                                                    "children": []
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image_file = fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image_file",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.UploadFile(\n            file=image,\n            filename=filename,\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.UploadFile",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "fastapi",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "UploadFile",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            file=image,\n            filename=filename,\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "file=image",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "file",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "image",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "filename=filename",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "filename",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "expression_statement",
                                                    "label": "image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "label": "image_url = await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "label": "image_url",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "await",
                                                                    "label": "await backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "call",
                                                                            "label": "backend.server.v2.store.media.upload_media(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "backend.server.v2.store.media.upload_media",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "attribute",
                                                                                            "label": "backend.server.v2.store.media",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "attribute",
                                                                                                    "label": "backend.server.v2.store",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "attribute",
                                                                                                            "label": "backend.server.v2",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "attribute",
                                                                                                                    "label": "backend.server",
                                                                                                                    "children": [
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "backend",
                                                                                                                            "children": []
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type": "identifier",
                                                                                                                            "label": "server",
                                                                                                                            "children": []
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "identifier",
                                                                                                                    "label": "v2",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "identifier",
                                                                                                            "label": "store",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "media",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "upload_media",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "argument_list",
                                                                                    "label": "(\n            user_id=user_id, file=image_file, use_file_name=True\n        )",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "user_id=user_id",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "user_id",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "file=image_file",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "file",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_file",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "keyword_argument",
                                                                                            "label": "use_file_name=True",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "use_file_name",
                                                                                                    "children": []
                                                                                                },
                                                                                                {
                                                                                                    "type": "true",
                                                                                                    "label": "True",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "return_statement",
                                                    "label": "return fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                                    "children": [
                                                        {
                                                            "type": "call",
                                                            "label": "fastapi.responses.JSONResponse(content={\"image_url\": image_url})",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "label": "fastapi.responses.JSONResponse",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "fastapi",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "responses",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "label": "JSONResponse",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "label": "(content={\"image_url\": image_url})",
                                                                    "children": [
                                                                        {
                                                                            "type": "keyword_argument",
                                                                            "label": "content={\"image_url\": image_url}",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "content",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "dictionary",
                                                                                    "label": "{\"image_url\": image_url}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "pair",
                                                                                            "label": "\"image_url\": image_url",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "string",
                                                                                                    "label": "\"image_url\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string_start",
                                                                                                            "label": "\"",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_content",
                                                                                                            "label": "image_url",
                                                                                                            "children": []
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string_end",
                                                                                                            "label": "\"",
                                                                                                            "children": []
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "type": "identifier",
                                                                                                    "label": "image_url",
                                                                                                    "children": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "except_clause",
                                            "label": "except Exception:\n        logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "label": "Exception",
                                                    "children": []
                                                },
                                                {
                                                    "type": "block",
                                                    "label": "logger.exception(\"Exception occurred whilst generating submission image\")\n        return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                    "children": [
                                                        {
                                                            "type": "expression_statement",
                                                            "label": "logger.exception(\"Exception occurred whilst generating submission image\")",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "logger.exception(\"Exception occurred whilst generating submission image\")",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "logger.exception",
                                                                            "children": [
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "logger",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "exception",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\"Exception occurred whilst generating submission image\")",
                                                                            "children": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "label": "\"Exception occurred whilst generating submission image\"",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "string_start",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_content",
                                                                                            "label": "Exception occurred whilst generating submission image",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "string_end",
                                                                                            "label": "\"",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "return_statement",
                                                            "label": "return fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                            "children": [
                                                                {
                                                                    "type": "call",
                                                                    "label": "fastapi.responses.JSONResponse(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "label": "fastapi.responses.JSONResponse",
                                                                            "children": [
                                                                                {
                                                                                    "type": "attribute",
                                                                                    "label": "fastapi.responses",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "fastapi",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "responses",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "label": "JSONResponse",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "label": "(\n            status_code=500,\n            content={\"detail\": \"An error occurred while generating the image\"},\n        )",
                                                                            "children": [
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "status_code=500",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "status_code",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "integer",
                                                                                            "label": "500",
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "keyword_argument",
                                                                                    "label": "content={\"detail\": \"An error occurred while generating the image\"}",
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "identifier",
                                                                                            "label": "content",
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "type": "dictionary",
                                                                                            "label": "{\"detail\": \"An error occurred while generating the image\"}",
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "pair",
                                                                                                    "label": "\"detail\": \"An error occurred while generating the image\"",
                                                                                                    "children": [
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"detail\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "detail",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "string",
                                                                                                            "label": "\"An error occurred while generating the image\"",
                                                                                                            "children": [
                                                                                                                {
                                                                                                                    "type": "string_start",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_content",
                                                                                                                    "label": "An error occurred while generating the image",
                                                                                                                    "children": []
                                                                                                                },
                                                                                                                {
                                                                                                                    "type": "string_end",
                                                                                                                    "label": "\"",
                                                                                                                    "children": []
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}