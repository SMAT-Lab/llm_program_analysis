{
  "name": "74.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "Brower",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "initSeries",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154744576,
              "label": "",
              "successors": [
                {
                  "id": 133924141242144,
                  "label": "var series = Group()",
                  "successors": [
                    {
                      "id": 133924141242192,
                      "label": "series.metadata = Metadata(\"Series\")",
                      "successors": [
                        {
                          "id": 133924141242240,
                          "label": "var obj: ArrayList<BookSeries>",
                          "successors": [
                            {
                              "id": 133924141242288,
                              "label": "if (publisher != \"\" )",
                              "successors": [
                                {
                                  "id": 133924141242672,
                                  "label": "obj = BookSeries.formPublisher(publisher)",
                                  "successors": [
                                    {
                                      "id": 133924141242384,
                                      "label": "for (i in obj )",
                                      "successors": [
                                        {
                                          "id": 133924141243008,
                                          "label": "series.navigation.append(\n                Link(\n                    title: i.name,\n                    href: \"http://${host}/opds/v2/series/${i.id}\",\n                    type_u: \"application/opds+json\"\n                )\n            )",
                                          "successors": [
                                            {
                                              "id": 133924141242384
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924141242480,
                                          "label": "return series",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924141242816,
                                  "label": "let numberOfItems = BookSeries.getCount()",
                                  "successors": [
                                    {
                                      "id": 133924141242864,
                                      "label": "obj = BookSeries.formDatabase(baseConfig.database, count: numberOfItems)",
                                      "successors": [
                                        {
                                          "id": 133924141242384
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "initSeries",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154745296,
              "label": "",
              "successors": [
                {
                  "id": 133924141243104,
                  "label": "var series = Group()",
                  "successors": [
                    {
                      "id": 133924141243152,
                      "label": "series.metadata = Metadata(\"Series\")",
                      "successors": [
                        {
                          "id": 133924141243200,
                          "label": "var obj: ArrayList<BookSeries>",
                          "successors": [
                            {
                              "id": 133924141243248,
                              "label": "if (publisher != \"\" )",
                              "successors": [
                                {
                                  "id": 133924141243632,
                                  "label": "obj = BookSeries.formPublisher(publisher)",
                                  "successors": [
                                    {
                                      "id": 133924141243344,
                                      "label": "for (i in obj )",
                                      "successors": [
                                        {
                                          "id": 133924141243968,
                                          "label": "series.navigation.append(\n                Link(\n                    title: i.name,\n                    href: \"http://${host}/opds/v2/series/${i.id}\",\n                    type_u: \"application/opds+json\"\n                )\n            )",
                                          "successors": [
                                            {
                                              "id": 133924141243344
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924141243440,
                                          "label": "return series",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924141243776,
                                  "label": "let numberOfItems = BookSeries.getCount(id: id)",
                                  "successors": [
                                    {
                                      "id": 133924141243824,
                                      "label": "obj = BookSeries.formDatabase(baseConfig.database, count: numberOfItems, libId: id)",
                                      "successors": [
                                        {
                                          "id": 133924141243344
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "initPublisher",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154745920,
              "label": "",
              "successors": [
                {
                  "id": 133924141244064,
                  "label": "var publisher = Group()",
                  "successors": [
                    {
                      "id": 133924141244112,
                      "label": "publisher.metadata = Metadata(\"Publisher\")",
                      "successors": [
                        {
                          "id": 133924141244160,
                          "label": "var obj = BookSeries.getPublishList()",
                          "successors": [
                            {
                              "id": 133924141244208,
                              "label": "for (i in obj )",
                              "successors": [
                                {
                                  "id": 133924141244496,
                                  "label": "var arg = Form(\"publisher=${i}\")",
                                  "successors": [
                                    {
                                      "id": 133924141244544,
                                      "label": "publisher.navigation.append(\n                Link(\n                    title: i,\n                    href: \"http://${host}/opds/v2/libraries/browse?${arg.toEncodeString()}\",\n                    type_u: \"application/opds+json\"\n                )\n            )",
                                      "successors": [
                                        {
                                          "id": 133924141244208
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924141244304,
                                  "label": "return publisher",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154746880,
              "label": "",
              "successors": [
                {
                  "id": 133924141244640,
                  "label": "var now = DateTime.now()",
                  "successors": [
                    {
                      "id": 133924141244688,
                      "label": "metadata = Metadata(\"All libraries\", modified: now.toString())",
                      "successors": [
                        {
                          "id": 133924141244736,
                          "label": "links = Links(host, \"libraries/browse\")",
                          "successors": [
                            {
                              "id": 133924141244784,
                              "label": "navigation = Navigation(host)",
                              "successors": [
                                {
                                  "id": 133924141244832,
                                  "label": "groups.append(initSeries(host, publisher))",
                                  "successors": [
                                    {
                                      "id": 133924141244880,
                                      "label": "groups.append(initPublisher(host))",
                                      "successors": [
                                        {
                                          "id": 133924154746928,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154747840,
              "label": "",
              "successors": [
                {
                  "id": 133924141245024,
                  "label": "let libr = Librarys.fromId(id)",
                  "successors": [
                    {
                      "id": 133924141245072,
                      "label": "metadata = Metadata(libr.name, modified: libr.lastModifiedDate)",
                      "successors": [
                        {
                          "id": 133924141245120,
                          "label": "links = Links(host, \"libraries/${id}/browse\")",
                          "successors": [
                            {
                              "id": 133924141245168,
                              "label": "navigation = Navigation(host, selfPath: \"libraries/${id}\")",
                              "successors": [
                                {
                                  "id": 133924141245216,
                                  "label": "groups.append(initSeries(id, host, publisher))",
                                  "successors": [
                                    {
                                      "id": 133924141245264,
                                      "label": "groups.append(initPublisher(host))",
                                      "successors": [
                                        {
                                          "id": 133924154747888,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924154748320,
              "label": "",
              "successors": [
                {
                  "id": 133924141245360,
                  "label": "let stream = ByteBuffer()",
                  "successors": [
                    {
                      "id": 133924141245408,
                      "label": "let w = JsonWriter(stream)",
                      "successors": [
                        {
                          "id": 133924141245456,
                          "label": "w.startObject()",
                          "successors": [
                            {
                              "id": 133924141245504,
                              "label": "w.writeName(\"metadata\").writeValue(metadata)",
                              "successors": [
                                {
                                  "id": 133924141245552,
                                  "label": "w.writeName(\"links\").writeValue(links)",
                                  "successors": [
                                    {
                                      "id": 133924141245600,
                                      "label": "w.writeName(\"navigation\").writeValue(navigation)",
                                      "successors": [
                                        {
                                          "id": 133924141245648,
                                          "label": "w.writeName(\"groups\").writeValue<ArrayList<Group>>(groups)",
                                          "successors": [
                                            {
                                              "id": 133924141245696,
                                              "label": "w.endObject()",
                                              "successors": [
                                                {
                                                  "id": 133924141245744,
                                                  "label": "w.flush()",
                                                  "successors": [
                                                    {
                                                      "id": 133924141245792,
                                                      "label": "return String.fromUtf8(readToEnd(stream))",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}