{
  "name": "100.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "save_env_info",
          "type": "Function",
          "blocks": [
            {
              "id": 133924169095568,
              "label": "",
              "successors": [
                {
                  "id": 133924150953248,
                  "label": "let env_path = Path(\"env_sample.json\")",
                  "successors": [
                    {
                      "id": 133924150953296,
                      "label": "if (File.exists(env_path) )",
                      "successors": [
                        {
                          "id": 133924150953680,
                          "label": "File.delete(env_path)",
                          "successors": [
                            {
                              "id": 133924150953440,
                              "label": "let file = File.create(env_path)",
                              "successors": [
                                {
                                  "id": 133924150953488,
                                  "label": "let env_info = EnvInfo(\n    \"xxxx\",\n    \"sk-xxxxxx\",\n    \"http://xxx.xxx.xxx/v1/chat/completions\",\n    \"You are a helpful assistant.\"\n  )",
                                  "successors": [
                                    {
                                      "id": 133924150953632,
                                      "label": "var byte_stream = ByteArrayStream()",
                                      "successors": [
                                        {
                                          "id": 133924150953728,
                                          "label": "var json_writer = JsonWriter(byte_stream)",
                                          "successors": [
                                            {
                                              "id": 133924150953776,
                                              "label": "let write_config = WriteConfig.pretty",
                                              "successors": [
                                                {
                                                  "id": 133924150953824,
                                                  "label": "json_writer.writeConfig = write_config",
                                                  "successors": [
                                                    {
                                                      "id": 133924150953872,
                                                      "label": "env_info.toJson(json_writer)",
                                                      "successors": [
                                                        {
                                                          "id": 133924150953920,
                                                          "label": "file.write(byte_stream.readToEnd())",
                                                          "successors": [
                                                            {
                                                              "id": 133924150953968,
                                                              "label": "println(\"`env_sample.json` save ok\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150954016,
                                                                  "label": "file.close()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924169095616,
                                                                      "label": "return",
                                                                      "successors": []
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924150953440
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "load_env_info",
          "type": "Function",
          "blocks": [
            {
              "id": 133924169096288,
              "label": "",
              "successors": [
                {
                  "id": 133924150954160,
                  "label": "let env_path = Path(\"env.json\")",
                  "successors": [
                    {
                      "id": 133924150954208,
                      "label": "if (!File.exists(env_path) )",
                      "successors": [
                        {
                          "id": 133924150954592,
                          "label": "throw Exception(\"`.env` file not exists, please check again\")",
                          "successors": [
                            {
                              "id": 133924150954352,
                              "label": "let file = File.openRead(env_path)",
                              "successors": [
                                {
                                  "id": 133924150954544,
                                  "label": "let file_str: Array<UInt8> = file.readToEnd()",
                                  "successors": [
                                    {
                                      "id": 133924150954640,
                                      "label": "var byte_stream = ByteArrayStream()",
                                      "successors": [
                                        {
                                          "id": 133924150954688,
                                          "label": "byte_stream.write(file_str)",
                                          "successors": [
                                            {
                                              "id": 133924150954736,
                                              "label": "let json_reader = JsonReader(byte_stream)",
                                              "successors": [
                                                {
                                                  "id": 133924150954832,
                                                  "label": "let env_info: EnvInfo = EnvInfo.fromJson(json_reader)",
                                                  "successors": [
                                                    {
                                                      "id": 133924150954880,
                                                      "label": "file.close()",
                                                      "successors": [
                                                        {
                                                          "id": 133924150954928,
                                                          "label": "return env_info",
                                                          "successors": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924150954352
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "EnvInfo",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924169093552,
              "label": "",
              "successors": [
                {
                  "id": 133924150955072,
                  "label": "this.model = model",
                  "successors": [
                    {
                      "id": 133924150955120,
                      "label": "this.api_key = api_key",
                      "successors": [
                        {
                          "id": 133924150955168,
                          "label": "this.base_url = base_url",
                          "successors": [
                            {
                              "id": 133924150955216,
                              "label": "this.system_prompt = system_prompt",
                              "successors": [
                                {
                                  "id": 133924169093600,
                                  "label": "return",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924169094272,
              "label": "",
              "successors": [
                {
                  "id": 133924150955456,
                  "label": "var temp_model: String = \"\"",
                  "successors": [
                    {
                      "id": 133924150955552,
                      "label": "var temp_api_key: String = \"sk-xxx\"",
                      "successors": [
                        {
                          "id": 133924150955648,
                          "label": "var temp_base_url: String = \"http://xxx.xxx.xxx/v1\"",
                          "successors": [
                            {
                              "id": 133924150955744,
                              "label": "var temp_system_prompt: String = \"You are a helpful assistant.\"",
                              "successors": [
                                {
                                  "id": 133924150955792,
                                  "label": "while (let Some(v) <- r.peek() )",
                                  "successors": [
                                    {
                                      "id": 133924150956128,
                                      "label": "match (v )",
                                      "successors": [
                                        {
                                          "id": 133924150956608,
                                          "label": "r.startObject()",
                                          "successors": [
                                            {
                                              "id": 133924150956656,
                                              "label": "while (r.peek() != EndObject )",
                                              "successors": [
                                                {
                                                  "id": 133924150956992,
                                                  "label": "let n = r.readName()",
                                                  "successors": [
                                                    {
                                                      "id": 133924150957040,
                                                      "label": "match (n )",
                                                      "successors": [
                                                        {
                                                          "id": 133924150957520,
                                                          "label": "temp_model = r.readValue<String>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150956656
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150957808,
                                                          "label": "temp_api_key = r.readValue<String>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150956656
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150958096,
                                                          "label": "temp_base_url = r.readValue<String>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150956656
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150958384,
                                                          "label": "temp_system_prompt = r.readValue<String>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150956656
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150958672,
                                                          "label": "()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150956656
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924150956800,
                                                  "label": "r.endObject()",
                                                  "successors": [
                                                    {
                                                      "id": 133924150955936,
                                                      "label": "return EnvInfo(temp_model, temp_api_key, temp_base_url, temp_system_prompt)",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924150958816,
                                          "label": "throw Exception()",
                                          "successors": [
                                            {
                                              "id": 133924150955792
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924150955936
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924169094896,
              "label": "",
              "successors": [
                {
                  "id": 133924150956080,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924150956272,
                      "label": "w.writeName(\"model\").writeValue(this.model)",
                      "successors": [
                        {
                          "id": 133924150958864,
                          "label": "w.writeName(\"api_key\").writeValue(this.api_key)",
                          "successors": [
                            {
                              "id": 133924150958912,
                              "label": "w.writeName(\"base_url\").writeValue(this.base_url)",
                              "successors": [
                                {
                                  "id": 133924150958960,
                                  "label": "w.writeName(\"system_prompt\").writeValue(this.system_prompt)",
                                  "successors": [
                                    {
                                      "id": 133924150959008,
                                      "label": "w.endObject()",
                                      "successors": [
                                        {
                                          "id": 133924150959056,
                                          "label": "w.flush()",
                                          "successors": [
                                            {
                                              "id": 133924169094944,
                                              "label": "return",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}