{
  "name": "139.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "LogDataTransfer",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "sendRequest",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153974096,
              "label": "",
              "successors": [
                {
                  "id": 133924139832736,
                  "label": "fastLog(id, MessageType.REQUEST_METHOD(\"RQM\"), request.getMethod())",
                  "successors": [
                    {
                      "id": 133924139832784,
                      "label": "let url = request.getUrl().toString()",
                      "successors": [
                        {
                          "id": 133924139832832,
                          "label": "fastLog(id, MessageType.REQUEST_URL(\"RQU\"),url)",
                          "successors": [
                            {
                              "id": 133924139832880,
                              "label": "let nowSjc = Time.now().unixNano()",
                              "successors": [
                                {
                                  "id": 133924139832928,
                                  "label": "fastLog(id, MessageType.REQUEST_TIME(\"RQT\"), Time.now().toString())",
                                  "successors": [
                                    {
                                      "id": 133924139832976,
                                      "label": "let copy = request.newBuilder().build()",
                                      "successors": [
                                        {
                                          "id": 133924139833024,
                                          "label": "match (copy.getBody() )",
                                          "successors": [
                                            {
                                              "id": 133924139833504,
                                              "label": "doSomeThingRequestBody(v,id)",
                                              "successors": [
                                                {
                                                  "id": 133924139833168,
                                                  "label": "let headers = request.getHeaders()",
                                                  "successors": [
                                                    {
                                                      "id": 133924139833840,
                                                      "label": "for (header in headers )",
                                                      "successors": [
                                                        {
                                                          "id": 133924139834176,
                                                          "label": "let name: String = header[0]",
                                                          "successors": [
                                                            {
                                                              "id": 133924139834224,
                                                              "label": "let nameUpper = name.toAsciiUpper()",
                                                              "successors": [
                                                                {
                                                                  "id": 133924139834272,
                                                                  "label": "let conentTypeUpper = CONTENT_TYPE.toAsciiUpper()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924139834320,
                                                                      "label": "let conentLengthUpper = CONTENT_LENGTH.toAsciiUpper()",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924139834368,
                                                                          "label": "if (conentTypeUpper.equals(nameUpper) || conentLengthUpper.equals(nameUpper) )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924139833840
                                                                            },
                                                                            {
                                                                              "id": 133924139834752,
                                                                              "label": "continue",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924139834560,
                                                                                  "label": "let arrayList: ArrayList<String> = header[1]",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924139834704,
                                                                                      "label": "if (arrayList.size>0 )",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924139835136,
                                                                                          "label": "if (arrayList.size == 1 )",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924139835520,
                                                                                              "label": "fastLog(id, MessageType.REQUEST_HEADER(\"RQH\"), name + HEADER_DELIMITER + SPACE + arrayList.get(0).getOrThrow())",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924139833840
                                                                                                }
                                                                                              ]
                                                                                            },
                                                                                            {
                                                                                              "id": 133924139835664,
                                                                                              "label": "var strBuilder = StringBuilder()",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924139835712,
                                                                                                  "label": "for (str in arrayList )",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924139836000,
                                                                                                      "label": "strBuilder.append(str).append(\",\")",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924139835712
                                                                                                        }
                                                                                                      ]
                                                                                                    },
                                                                                                    {
                                                                                                      "id": 133924139835808,
                                                                                                      "label": "fastLog(id, MessageType.REQUEST_HEADER(\"RQH\"), name + HEADER_DELIMITER + SPACE + strBuilder.toString())",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924139833840
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        },
                                                                                        {
                                                                                          "id": 133924139833840
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924153974144,
                                                          "label": "return",
                                                          "successors": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924139833792,
                                              "label": "()",
                                              "successors": [
                                                {
                                                  "id": 133924139833168
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "sendResponse",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153974768,
              "label": "",
              "successors": [
                {
                  "id": 133924139834944,
                  "label": "let optionBody: Option<ResponseBody> = response.getBody()",
                  "successors": [
                    {
                      "id": 133924139835088,
                      "label": "match (optionBody )",
                      "successors": [
                        {
                          "id": 133924139836240,
                          "label": "doSomeThingResponseBody(v,id)",
                          "successors": [
                            {
                              "id": 133924139835328,
                              "label": "logWithHandler(id, MessageType.RESPONSE_STATUS(\"RSS\"), response.getCode().toString(), 0)",
                              "successors": [
                                {
                                  "id": 133924139836576,
                                  "label": "let headers = response.getHeaders()",
                                  "successors": [
                                    {
                                      "id": 133924139836624,
                                      "label": "for (header in headers )",
                                      "successors": [
                                        {
                                          "id": 133924139837008,
                                          "label": "let name: String = header[0]",
                                          "successors": [
                                            {
                                              "id": 133924139837104,
                                              "label": "let arrayList : ArrayList<String> = header[1]",
                                              "successors": [
                                                {
                                                  "id": 133924139837152,
                                                  "label": "if (arrayList.size > 0 )",
                                                  "successors": [
                                                    {
                                                      "id": 133924139837536,
                                                      "label": "if (arrayList.size == 1 )",
                                                      "successors": [
                                                        {
                                                          "id": 133924139837920,
                                                          "label": "logWithHandler(id, MessageType.RESPONSE_HEADER(\"RSH\"), name + HEADER_DELIMITER + arrayList.get(0).getOrThrow(), 0)",
                                                          "successors": [
                                                            {
                                                              "id": 133924139836624
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924139838064,
                                                          "label": "var strBuilder = StringBuilder()",
                                                          "successors": [
                                                            {
                                                              "id": 133924139838112,
                                                              "label": "for (str in arrayList )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924139838400,
                                                                  "label": "strBuilder.append(str).append(\",\")",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924139838112
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924139838208,
                                                                  "label": "logWithHandler(id, MessageType.RESPONSE_HEADER(\"RSH\"), name + HEADER_DELIMITER + strBuilder.toString(), 0)",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924139836624
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924139836624
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924153974816,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924139836528,
                          "label": "()",
                          "successors": [
                            {
                              "id": 133924139835328
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "sendException",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153975440,
              "label": "",
              "successors": [
                {
                  "id": 133924139836768,
                  "label": "logWithHandler(id, MessageType.RESPONSE_ERROR(\"REE\"), ex.message, 0)",
                  "successors": [
                    {
                      "id": 133924153975488,
                      "label": "return",
                      "successors": []
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "sendDuration",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153976112,
              "label": "",
              "successors": [
                {
                  "id": 133924139837488,
                  "label": "logWithHandler(id, MessageType.RESPONSE_TIME(\"RST\"), duration.toString(), 0)",
                  "successors": [
                    {
                      "id": 133924139837632,
                      "label": "logWithHandler(id, MessageType.RESPONSE_END(\"RSD\"), \"-->\", 0)",
                      "successors": [
                        {
                          "id": 133924153976160,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fastLog",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153976832,
              "label": "",
              "successors": [
                {
                  "id": 133924139838352,
                  "label": "let tag = LOG_PREFIX + DELIMITER + id + DELIMITER + mType.getValue()",
                  "successors": [
                    {
                      "id": 133924139838448,
                      "label": "printLog(tag,message)",
                      "successors": [
                        {
                          "id": 133924153976880,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "printLog",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153977504,
              "label": "",
              "successors": [
                {
                  "id": 133924139838688,
                  "label": "let logger: SimpleLogger = SimpleLogger()",
                  "successors": [
                    {
                      "id": 133924139838736,
                      "label": "logger.log(LogLevel.TRACE, tag+SPACE+SPACE+message)",
                      "successors": [
                        {
                          "id": 133924139838784,
                          "label": "logger.flush()",
                          "successors": [
                            {
                              "id": 133924153977552,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "doSomeThingResponseBody",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153978176,
              "label": "",
              "successors": [
                {
                  "id": 133924139838928,
                  "label": "let source = body.getString()",
                  "successors": [
                    {
                      "id": 133924139838976,
                      "label": "let sourceSize = source.size",
                      "successors": [
                        {
                          "id": 133924139839024,
                          "label": "var strResponse = \"\"",
                          "successors": [
                            {
                              "id": 133924139839072,
                              "label": "if (sourceSize<BODY_BUFFER_SIZE )",
                              "successors": [
                                {
                                  "id": 133924139839456,
                                  "label": "strResponse = source.substring(0,sourceSize)",
                                  "successors": [
                                    {
                                      "id": 133924139839168,
                                      "label": "largeLog(id, MessageType.RESPONSE_BODY(\"RSB\"), strResponse)",
                                      "successors": [
                                        {
                                          "id": 133924153978224,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924139839600,
                                  "label": "strResponse = source.substring(0,BODY_BUFFER_SIZE)",
                                  "successors": [
                                    {
                                      "id": 133924139839168
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "logWithHandler",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153978944,
              "label": "",
              "successors": [
                {
                  "id": 133924139839264,
                  "label": "let tag = LOG_PREFIX + DELIMITER + id + DELIMITER + mType.getValue()",
                  "successors": [
                    {
                      "id": 133924139839648,
                      "label": "let logger: SimpleLogger = SimpleLogger()",
                      "successors": [
                        {
                          "id": 133924139839696,
                          "label": "logger.log(LogLevel.TRACE, tag+SPACE+SPACE+message+SPACE+partsCount.toString())",
                          "successors": [
                            {
                              "id": 133924139839744,
                              "label": "logger.flush()",
                              "successors": [
                                {
                                  "id": 133924153978992,
                                  "label": "return",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "doSomeThingRequestBody",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153979616,
              "label": "",
              "successors": [
                {
                  "id": 133924139839888,
                  "label": "match (body.contentType() )",
                  "successors": [
                    {
                      "id": 133924139840368,
                      "label": "\"${m}\"",
                      "successors": [
                        {
                          "id": 133924139840032,
                          "label": "let mediaType = match(body.contentType()) {\n            case Some(m) => \"${m}\"\n            case None => \"\"\n         }",
                          "successors": [
                            {
                              "id": 133924139840704,
                              "label": "let contentLength = body.getContentLength()",
                              "successors": [
                                {
                                  "id": 133924139840752,
                                  "label": "if (contentLength != -1 )",
                                  "successors": [
                                    {
                                      "id": 133924139841136,
                                      "label": "fastLog(id, MessageType.REQUEST_HEADER(\"RQH\"), CONTENT_LENGTH + HEADER_DELIMITER + SPACE + contentLength.toString())",
                                      "successors": [
                                        {
                                          "id": 133924139840896,
                                          "label": "fastLog(id,MessageType.REQUEST_HEADER(\"RQH\"),CONTENT_TYPE + HEADER_DELIMITER + SPACE + mediaType)",
                                          "successors": [
                                            {
                                              "id": 133924139840944,
                                              "label": "let inputStream = body.get()",
                                              "successors": [
                                                {
                                                  "id": 133924139841088,
                                                  "label": "let bas = inputStream as ByteArrayStream",
                                                  "successors": [
                                                    {
                                                      "id": 133924139841184,
                                                      "label": "match (bas )",
                                                      "successors": [
                                                        {
                                                          "id": 133924139841616,
                                                          "label": "doSomeThingRequestBodyLog(v,id)",
                                                          "successors": [
                                                            {
                                                              "id": 133924153979664,
                                                              "label": "return",
                                                              "successors": []
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924139841904,
                                                          "label": "()",
                                                          "successors": [
                                                            {
                                                              "id": 133924153979664
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924139840896
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924139840656,
                      "label": "\"\"",
                      "successors": [
                        {
                          "id": 133924139840032
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "doSomeThingRequestBodyLog",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153980288,
              "label": "",
              "successors": [
                {
                  "id": 133924139841952,
                  "label": "largeLog(id, MessageType. REQUEST_BODY(\"RQB\"),String.fromUtf8(bas.readToEnd()))",
                  "successors": [
                    {
                      "id": 133924153980336,
                      "label": "return",
                      "successors": []
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "largeLog",
          "type": "Function",
          "blocks": [
            {
              "id": 133924153981008,
              "label": "",
              "successors": [
                {
                  "id": 133924139842096,
                  "label": "let contentLength = content.size",
                  "successors": [
                    {
                      "id": 133924139842144,
                      "label": "if (contentLength > LOG_LENGTH )",
                      "successors": [
                        {
                          "id": 133924139842528,
                          "label": "let parts = contentLength / LOG_LENGTH",
                          "successors": [
                            {
                              "id": 133924139842576,
                              "label": "for (i in 0..parts )",
                              "successors": [
                                {
                                  "id": 133924139842912,
                                  "label": "let start = i * LOG_LENGTH",
                                  "successors": [
                                    {
                                      "id": 133924139842960,
                                      "label": "var end = start + LOG_LENGTH",
                                      "successors": [
                                        {
                                          "id": 133924139843008,
                                          "label": "if (end > contentLength )",
                                          "successors": [
                                            {
                                              "id": 133924139843440,
                                              "label": "let printLength = contentLength+LOG_LENGTH-end",
                                              "successors": [
                                                {
                                                  "id": 133924139843488,
                                                  "label": "logWithHandler(id, mType, content.substring(start, printLength), parts)",
                                                  "successors": [
                                                    {
                                                      "id": 133924139842576
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924140023920,
                                              "label": "let printLength  = LOG_LENGTH",
                                              "successors": [
                                                {
                                                  "id": 133924140023968,
                                                  "label": "logWithHandler(id, mType, content.substring(start, LOG_LENGTH), parts)",
                                                  "successors": [
                                                    {
                                                      "id": 133924139842576
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924153981056,
                                  "label": "return",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924139843104,
                          "label": "logWithHandler(id, mType, content, 0)",
                          "successors": [
                            {
                              "id": 133924153981056
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}