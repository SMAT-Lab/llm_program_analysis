{
  "name": "99.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "role_type_to_str",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162008256,
              "label": "",
              "successors": [
                {
                  "id": 133924144652896,
                  "label": "match (role )",
                  "successors": [
                    {
                      "id": 133924144653376,
                      "label": "Some(\"user\")",
                      "successors": [
                        {
                          "id": 133924144653040,
                          "label": "return match(role) {\n    case RoleType.User => Some(\"user\")\n    case RoleType.Assistant => Some(\"assistant\")\n    case RoleType.System => Some(\"system\")\n    case RoleType.Function => Some(\"function\")\n    case RoleType.NULL => None\n  }",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924144653664,
                      "label": "Some(\"assistant\")",
                      "successors": [
                        {
                          "id": 133924144653040
                        }
                      ]
                    },
                    {
                      "id": 133924144653952,
                      "label": "Some(\"system\")",
                      "successors": [
                        {
                          "id": 133924144653040
                        }
                      ]
                    },
                    {
                      "id": 133924144654240,
                      "label": "Some(\"function\")",
                      "successors": [
                        {
                          "id": 133924144653040
                        }
                      ]
                    },
                    {
                      "id": 133924144654528,
                      "label": "None",
                      "successors": [
                        {
                          "id": 133924144653040
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "str_to_role_type",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162009024,
              "label": "",
              "successors": [
                {
                  "id": 133924144654624,
                  "label": "match (role_option_str )",
                  "successors": [
                    {
                      "id": 133924144655104,
                      "label": "match (role_option )",
                      "successors": [
                        {
                          "id": 133924144655584,
                          "label": "RoleType.User",
                          "successors": [
                            {
                              "id": 133924144654768,
                              "label": "return match(role_option_str) {\n    case Some(role_option) => \n      match (role_option) {\n        case \"user\" => RoleType.User\n        case \"assistant\" => RoleType.Assistant\n        case \"system\" => RoleType.System\n        case \"function\" => RoleType.Function\n        case x => throw Exception(\"unknow enum ${x} for RoleType\");\n      }\n    case None => RoleType.NULL\n  }",
                              "successors": []
                            }
                          ]
                        },
                        {
                          "id": 133924144655872,
                          "label": "RoleType.Assistant",
                          "successors": [
                            {
                              "id": 133924144654768
                            }
                          ]
                        },
                        {
                          "id": 133924144656160,
                          "label": "RoleType.System",
                          "successors": [
                            {
                              "id": 133924144654768
                            }
                          ]
                        },
                        {
                          "id": 133924144656448,
                          "label": "RoleType.Function",
                          "successors": [
                            {
                              "id": 133924144654768
                            }
                          ]
                        },
                        {
                          "id": 133924144656736,
                          "label": "throw Exception(\"unknow enum ${x} for RoleType\")",
                          "successors": [
                            {
                              "id": 133924144656784,
                              "label": ";",
                              "successors": [
                                {
                                  "id": 133924144654768
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924144656976,
                      "label": "RoleType.NULL",
                      "successors": [
                        {
                          "id": 133924144654768
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "get_domain",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162205680,
              "label": "",
              "successors": [
                {
                  "id": 133924144657072,
                  "label": "var temp_url = url",
                  "successors": [
                    {
                      "id": 133924144657120,
                      "label": "if (temp_url.startsWith(\"https://\") )",
                      "successors": [
                        {
                          "id": 133924144657504,
                          "label": "temp_url = temp_url[\"https://\".size..]",
                          "successors": [
                            {
                              "id": 133924144657264,
                              "label": "let domain: String = temp_url.split(\"?\")[0].split(\"/\")[0]",
                              "successors": [
                                {
                                  "id": 133924144657312,
                                  "label": "return domain",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924144657648,
                          "label": "if (temp_url.startsWith(\"http://\") )",
                          "successors": [
                            {
                              "id": 133924144658032,
                              "label": "temp_url = temp_url[\"http://\".size..]",
                              "successors": [
                                {
                                  "id": 133924144657264
                                }
                              ]
                            },
                            {
                              "id": 133924144657264
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "build_http_client",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162206832,
              "label": "",
              "successors": [
                {
                  "id": 133924144657840,
                  "label": "var array_stream = ByteArrayStream()",
                  "successors": [
                    {
                      "id": 133924144657984,
                      "label": "let json_writer = JsonWriter(array_stream)",
                      "successors": [
                        {
                          "id": 133924144658080,
                          "label": "let chat_res = ChatRequest(\n    env_info.model,\n    prompt,\n    history,\n    env_info.system_prompt,\n    stream\n  )",
                          "successors": [
                            {
                              "id": 133924144658128,
                              "label": "chat_res.toJson(json_writer)",
                              "successors": [
                                {
                                  "id": 133924144658176,
                                  "label": "let post_data: Array<UInt8> = array_stream.readToEnd()",
                                  "successors": [
                                    {
                                      "id": 133924144658224,
                                      "label": "var headers: HttpHeaders = HttpHeaders()",
                                      "successors": [
                                        {
                                          "id": 133924144658272,
                                          "label": "headers.add(\"Authorization\", \"Bearer ${env_info.api_key}\")",
                                          "successors": [
                                            {
                                              "id": 133924144658320,
                                              "label": "headers.add(\"Content-Type\", \"application/json\")",
                                              "successors": [
                                                {
                                                  "id": 133924144658368,
                                                  "label": "if (stream )",
                                                  "successors": [
                                                    {
                                                      "id": 133924144658704,
                                                      "label": "headers.add(\"Accept\", \"text/event-stream\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924144658464,
                                                          "label": "let request = HttpRequestBuilder()\n    .url(env_info.base_url)\n    .method(\"POST\")\n    .body(post_data)\n    .readTimeout(Duration.second * 120)\n    .addHeaders(headers)\n    .build()",
                                                          "successors": [
                                                            {
                                                              "id": 133924144658512,
                                                              "label": "",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144659040,
                                                                  "label": "var tls_client_config = TlsClientConfig()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924144659088,
                                                                      "label": "tls_client_config.verifyMode = CertificateVerifyMode.TrustAll",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924144659136,
                                                                          "label": "tls_client_config.domain = get_domain(env_info.base_url)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924144659184,
                                                                              "label": "ClientBuilder()\n      .tlsConfig(tls_client_config)\n      .build()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924144658752,
                                                                                  "label": "let client = if (env_info.base_url.startsWith(\"https\")) {\n    var tls_client_config = TlsClientConfig();\n    tls_client_config.verifyMode = CertificateVerifyMode.TrustAll;\n    tls_client_config.domain = get_domain(env_info.base_url);\n    ClientBuilder()\n      .tlsConfig(tls_client_config)\n      .build();\n  } else {\n    ClientBuilder().build();\n  }",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924144658800,
                                                                                      "label": "return (request, client)",
                                                                                      "successors": []
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924144659328,
                                                                  "label": "ClientBuilder().build()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924144658752
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924144658464
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "chat",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162207696,
              "label": "",
              "successors": [
                {
                  "id": 133924144659424,
                  "label": "let (request, client) = build_http_client(\n    prompt,\n    env_info,\n    history,\n    stream: false\n  )",
                  "successors": [
                    {
                      "id": 133924144659520,
                      "label": "var result_message: Option<String> = None",
                      "successors": [
                        {
                          "id": 133924144659568,
                          "label": "var res_text = \"\"",
                          "successors": [
                            {
                              "id": 133924144659616,
                              "label": "try",
                              "successors": [
                                {
                                  "id": 133924144659904,
                                  "label": "let response = client.send(\n      request\n    )",
                                  "successors": [
                                    {
                                      "id": 133924144659952,
                                      "label": "let buffer = Array<Byte>(102400, item: 0)",
                                      "successors": [
                                        {
                                          "id": 133924144660000,
                                          "label": "let length = response.body.read(buffer)",
                                          "successors": [
                                            {
                                              "id": 133924144660048,
                                              "label": "res_text = String.fromUtf8(buffer[..length])",
                                              "successors": [
                                                {
                                                  "id": 133924144660096,
                                                  "label": "var input_stream = ByteArrayStream()",
                                                  "successors": [
                                                    {
                                                      "id": 133924144660144,
                                                      "label": "input_stream.write(res_text.toArray())",
                                                      "successors": [
                                                        {
                                                          "id": 133924144660192,
                                                          "label": "let json_reader = JsonReader(input_stream)",
                                                          "successors": [
                                                            {
                                                              "id": 133924144660240,
                                                              "label": "let res_object = ChatResponse.fromJson(json_reader)",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144660336,
                                                                  "label": "let choices: ArrayList<Choice> = res_object.choices",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924144660384,
                                                                      "label": "if (choices.size > 0 )",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924144775520,
                                                                          "label": "let message = choices[0].message.getOrThrow()",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924144775568,
                                                                              "label": "result_message = Some(message.content)",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924144775664,
                                                                                  "label": "client.close()",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924144775808,
                                                                                      "label": "return result_message",
                                                                                      "successors": []
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "id": 133924144775712,
                                                                          "label": "println(\"can't found any response\")",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924144775664
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924144775232,
                                  "label": "catch( ( e: Exception )",
                                  "successors": [
                                    {
                                      "id": 133924144775760,
                                      "label": "println(\"ERROR: ${e.message}, reviced text is ${res_text}\")",
                                      "successors": [
                                        {
                                          "id": 133924144659856,
                                          "label": "",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "stream_chat",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160357232,
              "label": "",
              "successors": [
                {
                  "id": 133924144775952,
                  "label": "let (request, client) = build_http_client(\n    prompt,\n    env_info,\n    history,\n    stream: true\n  )",
                  "successors": [
                    {
                      "id": 133924144776048,
                      "label": "var result_response: String = \"\"",
                      "successors": [
                        {
                          "id": 133924144776096,
                          "label": "var temp_text2 = \"\"",
                          "successors": [
                            {
                              "id": 133924144776144,
                              "label": "try",
                              "successors": [
                                {
                                  "id": 133924144776480,
                                  "label": "let response = client.send(\n      request\n    )",
                                  "successors": [
                                    {
                                      "id": 133924144776528,
                                      "label": "let buffer = Array<Byte>(10240, item: 0)",
                                      "successors": [
                                        {
                                          "id": 133924144776624,
                                          "label": "var finish_reason: Option<String> = None",
                                          "successors": [
                                            {
                                              "id": 133924144776672,
                                              "label": "while (finish_reason.isNone() && temp_text2 != \"[DONE]\" )",
                                              "successors": [
                                                {
                                                  "id": 133924144777008,
                                                  "label": "let length = response.body.read(buffer)",
                                                  "successors": [
                                                    {
                                                      "id": 133924144777056,
                                                      "label": "let res_text = String.fromUtf8(buffer[..length])",
                                                      "successors": [
                                                        {
                                                          "id": 133924144777104,
                                                          "label": "for (temp_text in res_text.split(\"\\n\") )",
                                                          "successors": [
                                                            {
                                                              "id": 133924144777392,
                                                              "label": "",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144777776,
                                                                  "label": "temp_text[\"data: \".size..]",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924144777488,
                                                                      "label": "temp_text2 =  if (temp_text.startsWith(\"data: \")) {\n          temp_text[\"data: \".size..];\n        } else {\n          temp_text\n        }",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924144777536,
                                                                          "label": "if (temp_text2.size == 0 )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924144777104
                                                                            },
                                                                            {
                                                                              "id": 133924144778208,
                                                                              "label": "continue",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924144777968,
                                                                                  "label": "if (temp_text2 == \"[DONE]\" )",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924144776672
                                                                                    },
                                                                                    {
                                                                                      "id": 133924144778256,
                                                                                      "label": "var input_stream = ByteArrayStream()",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924144778304,
                                                                                          "label": "input_stream.write(temp_text2.toArray())",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924144778448,
                                                                                              "label": "let json_reader = JsonReader(input_stream)",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924144778496,
                                                                                                  "label": "let res_object = ChatResponse.fromJson(json_reader)",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924144778592,
                                                                                                      "label": "let choices: ArrayList<Choice> = res_object.choices",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924144778640,
                                                                                                          "label": "if (choices.size > 0 )",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924144779072,
                                                                                                              "label": "finish_reason = choices[0].finish_reason",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924144779120,
                                                                                                                  "label": "if (finish_reason.isNone() )",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924144779504,
                                                                                                                      "label": "let delta = choices[0].delta.getOrThrow()",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924144779552,
                                                                                                                          "label": "print(\"${delta.content}\", flush: true)",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924144779600,
                                                                                                                              "label": "result_response += delta.content",
                                                                                                                              "successors": [
                                                                                                                                {
                                                                                                                                  "id": 133924144777104
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    },
                                                                                                                    {
                                                                                                                      "id": 133924144777104
                                                                                                                    }
                                                                                                                  ]
                                                                                                                }
                                                                                                              ]
                                                                                                            },
                                                                                                            {
                                                                                                              "id": 133924144779456,
                                                                                                              "label": "println(\"can't found any response\")",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924144777104
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924144777920,
                                                                  "label": "temp_text",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924144777488
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "id": 133924144776672
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924144777200,
                                                  "label": "client.close()",
                                                  "successors": [
                                                    {
                                                      "id": 133924144778736,
                                                      "label": "if (result_response.size > 0 )",
                                                      "successors": [
                                                        {
                                                          "id": 133924144779840,
                                                          "label": "return Some(result_response)",
                                                          "successors": []
                                                        },
                                                        {
                                                          "id": 133924144779984,
                                                          "label": "return None",
                                                          "successors": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924144776432,
                                  "label": "catch( ( e: Exception )",
                                  "successors": [
                                    {
                                      "id": 133924144777344,
                                      "label": "println(\"ERROR: ${e.message}, reviced text is ${temp_text2}\")",
                                      "successors": [
                                        {
                                          "id": 133924144776288,
                                          "label": "",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "FunctionCall",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162005760,
              "label": "",
              "successors": [
                {
                  "id": 133924144779312,
                  "label": "this.name = name",
                  "successors": [
                    {
                      "id": 133924144779648,
                      "label": "this.arguments = arguments",
                      "successors": [
                        {
                          "id": 133924162005808,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162006480,
              "label": "",
              "successors": [
                {
                  "id": 133924144780128,
                  "label": "var temp_name: String = \"\"",
                  "successors": [
                    {
                      "id": 133924144780224,
                      "label": "var temp_arguments: String = \"\"",
                      "successors": [
                        {
                          "id": 133924144780272,
                          "label": "while (let Some(v) <- r.peek() )",
                          "successors": [
                            {
                              "id": 133924144780608,
                              "label": "match (v )",
                              "successors": [
                                {
                                  "id": 133924144781088,
                                  "label": "r.startObject()",
                                  "successors": [
                                    {
                                      "id": 133924144781136,
                                      "label": ";",
                                      "successors": [
                                        {
                                          "id": 133924144781184,
                                          "label": "while (r.peek() != EndObject )",
                                          "successors": [
                                            {
                                              "id": 133924144781520,
                                              "label": "let n = r.readName()",
                                              "successors": [
                                                {
                                                  "id": 133924144781568,
                                                  "label": "match (n )",
                                                  "successors": [
                                                    {
                                                      "id": 133924144782048,
                                                      "label": "temp_name = r.readValue<String>()",
                                                      "successors": [
                                                        {
                                                          "id": 133924144782096,
                                                          "label": ";",
                                                          "successors": [
                                                            {
                                                              "id": 133924144781184
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924144782384,
                                                      "label": "temp_arguments = r.readValue<String>()",
                                                      "successors": [
                                                        {
                                                          "id": 133924144782432,
                                                          "label": ";",
                                                          "successors": [
                                                            {
                                                              "id": 133924144781184
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924144782720,
                                                      "label": "println(\"unkow key ${unkow}\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924144782768,
                                                          "label": ";",
                                                          "successors": [
                                                            {
                                                              "id": 133924144781184
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924144781328,
                                              "label": "r.endObject()",
                                              "successors": [
                                                {
                                                  "id": 133924144782480,
                                                  "label": ";",
                                                  "successors": [
                                                    {
                                                      "id": 133924144780416,
                                                      "label": "return FunctionCall(temp_name, temp_arguments)",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924144782960,
                                  "label": "throw Exception(\"can't deserialize for FunctionCall\")",
                                  "successors": [
                                    {
                                      "id": 133924144783008,
                                      "label": ";",
                                      "successors": [
                                        {
                                          "id": 133924144780272
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924144780416
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162007152,
              "label": "",
              "successors": [
                {
                  "id": 133924144783056,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924144783104,
                      "label": "w.writeName(\"name\").writeValue<String>(this.name)",
                      "successors": [
                        {
                          "id": 133924144783152,
                          "label": "w.writeName(\"arguments\").writeValue<String>(this.arguments)",
                          "successors": [
                            {
                              "id": 133924144783200,
                              "label": "w.endObject()",
                              "successors": [
                                {
                                  "id": 133924144783248,
                                  "label": "w.flush()",
                                  "successors": [
                                    {
                                      "id": 133924162007200,
                                      "label": "return",
                                      "successors": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "RoleType",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "Message",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162010272,
              "label": "",
              "successors": [
                {
                  "id": 133924144783344,
                  "label": "this.role = role",
                  "successors": [
                    {
                      "id": 133924144783392,
                      "label": "this.content = content",
                      "successors": [
                        {
                          "id": 133924144783440,
                          "label": "this.function_call = None",
                          "successors": [
                            {
                              "id": 133924162010320,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162011040,
              "label": "",
              "successors": [
                {
                  "id": 133924144783584,
                  "label": "this.role = role",
                  "successors": [
                    {
                      "id": 133924144783632,
                      "label": "this.content = content",
                      "successors": [
                        {
                          "id": 133924144783680,
                          "label": "this.function_call = function_call",
                          "successors": [
                            {
                              "id": 133924162011088,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162192048,
              "label": "",
              "successors": [
                {
                  "id": 133924144783872,
                  "label": "var temp_role: Option<String> = None",
                  "successors": [
                    {
                      "id": 133924144783968,
                      "label": "var temp_content: String = \"\"",
                      "successors": [
                        {
                          "id": 133924144784064,
                          "label": "var temp_functional_call: Option<FunctionCall> = None",
                          "successors": [
                            {
                              "id": 133924144784112,
                              "label": "while (let Some(v) <- r.peek() )",
                              "successors": [
                                {
                                  "id": 133924144784448,
                                  "label": "match (v )",
                                  "successors": [
                                    {
                                      "id": 133924144784928,
                                      "label": "r.startObject()",
                                      "successors": [
                                        {
                                          "id": 133924144784976,
                                          "label": ";",
                                          "successors": [
                                            {
                                              "id": 133924144785024,
                                              "label": "while (r.peek() != EndObject )",
                                              "successors": [
                                                {
                                                  "id": 133924144785360,
                                                  "label": "let n = r.readName()",
                                                  "successors": [
                                                    {
                                                      "id": 133924144785408,
                                                      "label": "match (n )",
                                                      "successors": [
                                                        {
                                                          "id": 133924144785888,
                                                          "label": "temp_role = r.readValue<Option<String>>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924144785936,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144785024
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924144786224,
                                                          "label": "temp_content = r.readValue<String>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924144786272,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144785024
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924144786560,
                                                          "label": "temp_functional_call = r.readValue<Option<FunctionCall>>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924144786608,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144785024
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924144786896,
                                                          "label": "println(\"unkow key ${unkow}\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924144786944,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144785024
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924144785168,
                                                  "label": "r.endObject()",
                                                  "successors": [
                                                    {
                                                      "id": 133924144786656,
                                                      "label": ";",
                                                      "successors": [
                                                        {
                                                          "id": 133924144785312,
                                                          "label": "let role_type: RoleType = str_to_role_type(temp_role)",
                                                          "successors": [
                                                            {
                                                              "id": 133924144784400,
                                                              "label": "return Message(role_type, temp_content)",
                                                              "successors": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924144787136,
                                      "label": "throw Exception(\"can't deserialize for Message\")",
                                      "successors": [
                                        {
                                          "id": 133924144787184,
                                          "label": ";",
                                          "successors": [
                                            {
                                              "id": 133924144784112
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924144785312
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162192720,
              "label": "",
              "successors": [
                {
                  "id": 133924144787328,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924144787376,
                      "label": "w.writeName(\"role\").writeValue<Option<String>>(role_type_to_str(this.role))",
                      "successors": [
                        {
                          "id": 133924144787424,
                          "label": "w.writeName(\"content\").writeValue<String>(this.content)",
                          "successors": [
                            {
                              "id": 133924144787472,
                              "label": "w.endObject()",
                              "successors": [
                                {
                                  "id": 133924144787520,
                                  "label": "w.flush()",
                                  "successors": [
                                    {
                                      "id": 133924162192768,
                                      "label": "return",
                                      "successors": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "ChatRequest",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162194160,
              "label": "",
              "successors": [
                {
                  "id": 133924144787616,
                  "label": "this.model = model",
                  "successors": [
                    {
                      "id": 133924144787664,
                      "label": "this.messages = messages",
                      "successors": [
                        {
                          "id": 133924144787712,
                          "label": "this.max_tokens = max_tokens",
                          "successors": [
                            {
                              "id": 133924144787760,
                              "label": "this.temperature = temperature",
                              "successors": [
                                {
                                  "id": 133924144787808,
                                  "label": "this.top_p = top_p",
                                  "successors": [
                                    {
                                      "id": 133924144787856,
                                      "label": "this.n = n",
                                      "successors": [
                                        {
                                          "id": 133924144787904,
                                          "label": "this.stream = stream",
                                          "successors": [
                                            {
                                              "id": 133924162194208,
                                              "label": "return",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162195504,
              "label": "",
              "successors": [
                {
                  "id": 133924144788048,
                  "label": "this.model = model",
                  "successors": [
                    {
                      "id": 133924144788096,
                      "label": "this.messages = ArrayList<Message>([\n      Message(RoleType.System, system_prompt)\n    ])",
                      "successors": [
                        {
                          "id": 133924144788144,
                          "label": "for ((use_msg, bot_msg) in history )",
                          "successors": [
                            {
                              "id": 133924144788432,
                              "label": "this.messages.append(Message(RoleType.User, use_msg))",
                              "successors": [
                                {
                                  "id": 133924144788480,
                                  "label": "this.messages.append(Message(RoleType.Assistant, bot_msg))",
                                  "successors": [
                                    {
                                      "id": 133924144788144
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924144788240,
                              "label": "this.messages.append(Message(RoleType.User, prompt))",
                              "successors": [
                                {
                                  "id": 133924144788384,
                                  "label": "this.max_tokens = max_tokens",
                                  "successors": [
                                    {
                                      "id": 133924144788528,
                                      "label": "this.temperature = temperature",
                                      "successors": [
                                        {
                                          "id": 133924144788576,
                                          "label": "this.top_p = top_p",
                                          "successors": [
                                            {
                                              "id": 133924144788624,
                                              "label": "this.n = n",
                                              "successors": [
                                                {
                                                  "id": 133924144788672,
                                                  "label": "this.stream = stream",
                                                  "successors": [
                                                    {
                                                      "id": 133924162195552,
                                                      "label": "return",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162196704,
              "label": "",
              "successors": [
                {
                  "id": 133924144788864,
                  "label": "this.model = model",
                  "successors": [
                    {
                      "id": 133924144788912,
                      "label": "this.messages = ArrayList<Message>([\n      Message(RoleType.System, system_prompt)\n    ])",
                      "successors": [
                        {
                          "id": 133924144788960,
                          "label": "for ((use_msg, bot_msg) in history )",
                          "successors": [
                            {
                              "id": 133924144789248,
                              "label": "this.messages.append(Message(RoleType.User, use_msg))",
                              "successors": [
                                {
                                  "id": 133924144789296,
                                  "label": "this.messages.append(Message(RoleType.Assistant, bot_msg))",
                                  "successors": [
                                    {
                                      "id": 133924144788960
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924144789056,
                              "label": "this.messages.append(Message(RoleType.User, prompt))",
                              "successors": [
                                {
                                  "id": 133924144789200,
                                  "label": "this.max_tokens = 2000",
                                  "successors": [
                                    {
                                      "id": 133924144789344,
                                      "label": "this.temperature = 0.7",
                                      "successors": [
                                        {
                                          "id": 133924144789392,
                                          "label": "this.top_p = 1.0",
                                          "successors": [
                                            {
                                              "id": 133924144789440,
                                              "label": "this.n = 1",
                                              "successors": [
                                                {
                                                  "id": 133924144789488,
                                                  "label": "this.stream = stream",
                                                  "successors": [
                                                    {
                                                      "id": 133924162196752,
                                                      "label": "return",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162197328,
              "label": "",
              "successors": [
                {
                  "id": 133924144789632,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924144789680,
                      "label": "w.writeName(\"model\").writeValue<String>(this.model)",
                      "successors": [
                        {
                          "id": 133924144789728,
                          "label": "w.writeName(\"messages\").writeValue<ArrayList<Message>>(this.messages)",
                          "successors": [
                            {
                              "id": 133924144789776,
                              "label": "w.writeName(\"max_tokens\").writeValue<Int64>(this.max_tokens)",
                              "successors": [
                                {
                                  "id": 133924144789824,
                                  "label": "w.writeName(\"temperature\").writeValue<Float64>(this.temperature)",
                                  "successors": [
                                    {
                                      "id": 133924144789872,
                                      "label": "w.writeName(\"top_p\").writeValue<Float64>(this.top_p)",
                                      "successors": [
                                        {
                                          "id": 133924144789920,
                                          "label": "w.writeName(\"n\").writeValue<Int32>(this.n)",
                                          "successors": [
                                            {
                                              "id": 133924144789968,
                                              "label": "w.writeName(\"stream\").writeValue<Bool>(this.stream)",
                                              "successors": [
                                                {
                                                  "id": 133924144790016,
                                                  "label": "w.endObject()",
                                                  "successors": [
                                                    {
                                                      "id": 133924144790064,
                                                      "label": "w.flush()",
                                                      "successors": [
                                                        {
                                                          "id": 133924162197376,
                                                          "label": "return",
                                                          "successors": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "Choice",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162198720,
              "label": "",
              "successors": [
                {
                  "id": 133924144790256,
                  "label": "this.index = index",
                  "successors": [
                    {
                      "id": 133924144790304,
                      "label": "this.message = message",
                      "successors": [
                        {
                          "id": 133924144790352,
                          "label": "this.delta = delta",
                          "successors": [
                            {
                              "id": 133924144790400,
                              "label": "this.finish_reason = finish_reason",
                              "successors": [
                                {
                                  "id": 133924144790448,
                                  "label": "this.logprobs = logprobs",
                                  "successors": [
                                    {
                                      "id": 133924162198768,
                                      "label": "return",
                                      "successors": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162199392,
              "label": "",
              "successors": [
                {
                  "id": 133924144790592,
                  "label": "var temp_index: Int32 = -1",
                  "successors": [
                    {
                      "id": 133924144790688,
                      "label": "var temp_message: Option<Message> = None",
                      "successors": [
                        {
                          "id": 133924144790784,
                          "label": "var temp_delta: Option<Message> = None",
                          "successors": [
                            {
                              "id": 133924144790880,
                              "label": "var temp_finish_reason: Option<String> = None",
                              "successors": [
                                {
                                  "id": 133924144790976,
                                  "label": "var temp_logprobs: Option<Float64> = None",
                                  "successors": [
                                    {
                                      "id": 133924144791024,
                                      "label": "while (let Some(v) <- r.peek() )",
                                      "successors": [
                                        {
                                          "id": 133924144791360,
                                          "label": "match (v )",
                                          "successors": [
                                            {
                                              "id": 133924145004896,
                                              "label": "r.startObject()",
                                              "successors": [
                                                {
                                                  "id": 133924145004944,
                                                  "label": ";",
                                                  "successors": [
                                                    {
                                                      "id": 133924145004992,
                                                      "label": "while (r.peek() != EndObject )",
                                                      "successors": [
                                                        {
                                                          "id": 133924145005328,
                                                          "label": "let n = r.readName()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145005376,
                                                              "label": "match (n )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145005856,
                                                                  "label": "temp_index = r.readValue<Int32>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145005904,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145006192,
                                                                  "label": "temp_message = r.readValue<Option<Message>>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145006240,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145006528,
                                                                  "label": "temp_delta = r.readValue<Option<Message>>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145006576,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145006864,
                                                                  "label": "temp_finish_reason = r.readValue<Option<String>>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145006912,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145007200,
                                                                  "label": "temp_logprobs = r.readValue<Option<Float64>>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145007248,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145007536,
                                                                  "label": "println(\"unkow key ${unkow}\")",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145007584,
                                                                      "label": ";",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145004992
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924145005136,
                                                          "label": "r.endObject()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145007296,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924144791168,
                                                                  "label": "return Choice(temp_index, temp_message, temp_delta, temp_finish_reason, temp_logprobs)",
                                                                  "successors": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924145007776,
                                              "label": "throw Exception(\"can't deserialize for Choice\")",
                                              "successors": [
                                                {
                                                  "id": 133924145007824,
                                                  "label": ";",
                                                  "successors": [
                                                    {
                                                      "id": 133924144791024
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924144791168
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162200064,
              "label": "",
              "successors": [
                {
                  "id": 133924144791504,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924145007872,
                      "label": "w.writeName(\"index\").writeValue<Int32>(this.index)",
                      "successors": [
                        {
                          "id": 133924145007920,
                          "label": "w.writeName(\"message\").writeValue<Option<Message>>(this.message)",
                          "successors": [
                            {
                              "id": 133924145007968,
                              "label": "w.writeName(\"delta\").writeValue<Option<Message>>(this.delta)",
                              "successors": [
                                {
                                  "id": 133924145008016,
                                  "label": "w.writeName(\"finish_reason\").writeValue<Option<String>>(this.finish_reason)",
                                  "successors": [
                                    {
                                      "id": 133924145008064,
                                      "label": "w.writeName(\"logprobs\").writeValue<Option<Float64>>(this.logprobs)",
                                      "successors": [
                                        {
                                          "id": 133924145008112,
                                          "label": "w.endObject()",
                                          "successors": [
                                            {
                                              "id": 133924145008160,
                                              "label": "w.flush()",
                                              "successors": [
                                                {
                                                  "id": 133924162200112,
                                                  "label": "return",
                                                  "successors": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "Usage",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162201408,
              "label": "",
              "successors": [
                {
                  "id": 133924145008304,
                  "label": "this.prompt_tokens = prompt_tokens",
                  "successors": [
                    {
                      "id": 133924145008352,
                      "label": "this.completion_tokens = completion_tokens",
                      "successors": [
                        {
                          "id": 133924145008400,
                          "label": "this.total_tokens = total_tokens",
                          "successors": [
                            {
                              "id": 133924162201456,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162202128,
              "label": "",
              "successors": [
                {
                  "id": 133924145008640,
                  "label": "var temp_prompt_tokens: UInt64 = 0",
                  "successors": [
                    {
                      "id": 133924145008736,
                      "label": "var temp_completion_tokens: UInt64 = 0",
                      "successors": [
                        {
                          "id": 133924145008832,
                          "label": "var temp_total_tokens: UInt64 = 0",
                          "successors": [
                            {
                              "id": 133924145008880,
                              "label": "while (let Some(v) <- r.peek() )",
                              "successors": [
                                {
                                  "id": 133924145009216,
                                  "label": "match (v )",
                                  "successors": [
                                    {
                                      "id": 133924145009696,
                                      "label": "r.startObject()",
                                      "successors": [
                                        {
                                          "id": 133924145009744,
                                          "label": ";",
                                          "successors": [
                                            {
                                              "id": 133924145009792,
                                              "label": "while (r.peek() != EndObject )",
                                              "successors": [
                                                {
                                                  "id": 133924145010128,
                                                  "label": "let n = r.readName()",
                                                  "successors": [
                                                    {
                                                      "id": 133924145010176,
                                                      "label": "match (n )",
                                                      "successors": [
                                                        {
                                                          "id": 133924145010656,
                                                          "label": "temp_prompt_tokens = r.readValue<UInt64>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145010704,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145009792
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924145010992,
                                                          "label": "temp_completion_tokens = r.readValue<UInt64>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145011040,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145009792
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924145011328,
                                                          "label": "temp_total_tokens = r.readValue<UInt64>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145011376,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145009792
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924145011664,
                                                          "label": "println(\"unkow key ${unkow}\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924145011712,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145009792
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924145009936,
                                                  "label": "r.endObject()",
                                                  "successors": [
                                                    {
                                                      "id": 133924145011424,
                                                      "label": ";",
                                                      "successors": [
                                                        {
                                                          "id": 133924145009024,
                                                          "label": "return Usage(temp_prompt_tokens, temp_completion_tokens, temp_total_tokens)",
                                                          "successors": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924145011904,
                                      "label": "throw Exception(\"can't deserialize for Usage\")",
                                      "successors": [
                                        {
                                          "id": 133924145011952,
                                          "label": ";",
                                          "successors": [
                                            {
                                              "id": 133924145008880
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924145009024
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162202800,
              "label": "",
              "successors": [
                {
                  "id": 133924145009360,
                  "label": "w.startObject()",
                  "successors": [
                    {
                      "id": 133924145012000,
                      "label": "w.writeName(\"prompt_tokens\").writeValue<UInt64>(this.prompt_tokens)",
                      "successors": [
                        {
                          "id": 133924145012048,
                          "label": "w.writeName(\"completion_tokens\").writeValue<UInt64>(this.completion_tokens)",
                          "successors": [
                            {
                              "id": 133924145012096,
                              "label": "w.writeName(\"total_tokens\").writeValue<UInt64>(this.total_tokens)",
                              "successors": [
                                {
                                  "id": 133924145012144,
                                  "label": "w.endObject()",
                                  "successors": [
                                    {
                                      "id": 133924145012192,
                                      "label": "w.flush()",
                                      "successors": [
                                        {
                                          "id": 133924162202848,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "ChatResponse",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162204240,
              "label": "",
              "successors": [
                {
                  "id": 133924145012288,
                  "label": "this.id = id",
                  "successors": [
                    {
                      "id": 133924145012336,
                      "label": "this.request_id = request_id",
                      "successors": [
                        {
                          "id": 133924145012384,
                          "label": "this.system_fingerprint = system_fingerprint",
                          "successors": [
                            {
                              "id": 133924145012432,
                              "label": "this.model = model",
                              "successors": [
                                {
                                  "id": 133924145012480,
                                  "label": "this.object = object",
                                  "successors": [
                                    {
                                      "id": 133924145012528,
                                      "label": "this.created = created",
                                      "successors": [
                                        {
                                          "id": 133924145012576,
                                          "label": "this.choices = choices",
                                          "successors": [
                                            {
                                              "id": 133924145012624,
                                              "label": "this.usage = usage",
                                              "successors": [
                                                {
                                                  "id": 133924162204288,
                                                  "label": "return",
                                                  "successors": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "fromJson",
          "type": "Function",
          "blocks": [
            {
              "id": 133924162204960,
              "label": "",
              "successors": [
                {
                  "id": 133924145012816,
                  "label": "var temp_id: Option<String> = None",
                  "successors": [
                    {
                      "id": 133924145012912,
                      "label": "var temp_request_id: Option<String> = None",
                      "successors": [
                        {
                          "id": 133924145013008,
                          "label": "var temp_system_fingerprint: Option<String> = None",
                          "successors": [
                            {
                              "id": 133924145013104,
                              "label": "var temp_model: String = \"\"",
                              "successors": [
                                {
                                  "id": 133924145013200,
                                  "label": "var temp_object: String = \"\"",
                                  "successors": [
                                    {
                                      "id": 133924145013296,
                                      "label": "var temp_created: UInt64 = 0",
                                      "successors": [
                                        {
                                          "id": 133924145013392,
                                          "label": "var temp_choices: ArrayList<Choice> = ArrayList<Choice>([])",
                                          "successors": [
                                            {
                                              "id": 133924145013488,
                                              "label": "var temp_usage: Option<Usage> = None",
                                              "successors": [
                                                {
                                                  "id": 133924145013536,
                                                  "label": "while (let Some(v) <- r.peek() )",
                                                  "successors": [
                                                    {
                                                      "id": 133924145013872,
                                                      "label": "match (v )",
                                                      "successors": [
                                                        {
                                                          "id": 133924145014352,
                                                          "label": "r.startObject()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145014400,
                                                              "label": ";",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145014448,
                                                                  "label": "while (r.peek() != EndObject )",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145014784,
                                                                      "label": "let n = r.readName()",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145014832,
                                                                          "label": "match (n )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145015312,
                                                                              "label": "temp_id = r.readValue<Option<String>>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145015360,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145015648,
                                                                              "label": "temp_request_id = r.readValue<Option<String>>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145015696,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145015984,
                                                                              "label": "temp_system_fingerprint = r.readValue<Option<String>>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145016032,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145016320,
                                                                              "label": "temp_model = r.readValue<String>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145016368,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145016656,
                                                                              "label": "temp_object = r.readValue<String>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145016704,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145016992,
                                                                              "label": "temp_created = r.readValue<UInt64>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145017040,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145017328,
                                                                              "label": "temp_choices = r.readValue<ArrayList<Choice>>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145017376,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145017664,
                                                                              "label": "temp_usage = r.readValue<Option<Usage>>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145017712,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145018000,
                                                                              "label": "println(\"unkow key ${unkow}\")",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145018048,
                                                                                  "label": ";",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145014448
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "id": 133924145014592,
                                                                      "label": "r.endObject()",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145017760,
                                                                          "label": ";",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145013680,
                                                                              "label": "return ChatResponse(\n      temp_id,\n      temp_request_id,\n      temp_system_fingerprint,\n      temp_model,\n      temp_object,\n      temp_created,\n      temp_choices,\n      temp_usage\n    )",
                                                                              "successors": []
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924145018240,
                                                          "label": "throw Exception(\"can't deserialize for ChatResponse\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924145013536
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924145013680
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}