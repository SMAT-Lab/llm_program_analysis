{
  "name": "296.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "AnimatedGifEncoder",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160772592,
              "label": "",
              "successors": [
                {
                  "id": 133924145375280,
                  "label": "outFile = ifile",
                  "successors": [
                    {
                      "id": 133924145375328,
                      "label": "if (outFile.canWrite() )",
                      "successors": [
                        {
                          "id": 133924145375712,
                          "label": "started = true",
                          "successors": [
                            {
                              "id": 133924160772640,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        },
                        {
                          "id": 133924145375856,
                          "label": "started = false",
                          "successors": [
                            {
                              "id": 133924160772640
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160773312,
              "label": "",
              "successors": [
                {
                  "id": 133924145375520,
                  "label": "outFile=File(file, OpenOption.CreateOrTruncate(false))",
                  "successors": [
                    {
                      "id": 133924145375808,
                      "label": "try",
                      "successors": [
                        {
                          "id": 133924145376144,
                          "label": "if (outFile.canWrite() )",
                          "successors": [
                            {
                              "id": 133924145376576,
                              "label": "writeHeadMark()",
                              "successors": [
                                {
                                  "id": 133924145376624,
                                  "label": "started = true",
                                  "successors": [
                                    {
                                      "id": 133924160773360,
                                      "label": "return",
                                      "successors": []
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924145376768,
                              "label": "outFile.close()",
                              "successors": [
                                {
                                  "id": 133924145376816,
                                  "label": "started = false",
                                  "successors": [
                                    {
                                      "id": 133924160773360
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924145376240,
                          "label": "catch( ( e:IOException )",
                          "successors": [
                            {
                              "id": 133924145376864,
                              "label": "started = false",
                              "successors": [
                                {
                                  "id": 133924145376096,
                                  "label": "",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "isOpened",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160773840,
              "label": "",
              "successors": [
                {
                  "id": 133924145376960,
                  "label": "return started && outFile.canWrite()",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeHeadMark",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160774368,
              "label": "",
              "successors": [
                {
                  "id": 133924145377104,
                  "label": "try",
                  "successors": [
                    {
                      "id": 133924145377392,
                      "label": "writeString(\"GIF89a\")",
                      "successors": [
                        {
                          "id": 133924160774416,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924145377440,
                      "label": "catch( ( e:IOException )",
                      "successors": [
                        {
                          "id": 133924145377632,
                          "label": "print(\"Error Exception:@{e}\")",
                          "successors": [
                            {
                              "id": 133924145377680,
                              "label": "started = false",
                              "successors": [
                                {
                                  "id": 133924145377344,
                                  "label": "",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setDelay",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160774896,
              "label": "",
              "successors": [
                {
                  "id": 133924145377776,
                  "label": "delay = Int32(round(Float64(ms) / 10.0))",
                  "successors": [
                    {
                      "id": 133924160774944,
                      "label": "return",
                      "successors": []
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setDispose",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160775472,
              "label": "",
              "successors": [
                {
                  "id": 133924145377920,
                  "label": "if (code >= 0 )",
                  "successors": [
                    {
                      "id": 133924145378256,
                      "label": "dispose = code",
                      "successors": [
                        {
                          "id": 133924160775520,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924160775520
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setRepeat",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160776048,
              "label": "",
              "successors": [
                {
                  "id": 133924145378208,
                  "label": "if (iter >= 0 )",
                  "successors": [
                    {
                      "id": 133924145378592,
                      "label": "repeat = iter",
                      "successors": [
                        {
                          "id": 133924160776096,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924160776096
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setTransparent",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160776576,
              "label": "",
              "successors": [
                {
                  "id": 133924145378544,
                  "label": "transparent = color",
                  "successors": [
                    {
                      "id": 133924160776624,
                      "label": "return",
                      "successors": []
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "addFrame",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160777152,
              "label": "",
              "successors": [
                {
                  "id": 133924145378736,
                  "label": "return addFrame(im, 0, 0)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "addFrame",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160777824,
              "label": "",
              "successors": [
                {
                  "id": 133924145378880,
                  "label": "if ((im.width==0) || !started )",
                  "successors": [
                    {
                      "id": 133924145379264,
                      "label": "return false",
                      "successors": []
                    },
                    {
                      "id": 133924145379072,
                      "label": "var ok:Bool = true",
                      "successors": [
                        {
                          "id": 133924145379216,
                          "label": "try",
                          "successors": [
                            {
                              "id": 133924145379552,
                              "label": "if (sizeSet )",
                              "successors": [
                                {
                                  "id": 133924145379936,
                                  "label": "setFrameSize(fixedWidth, fixedHeight)",
                                  "successors": [
                                    {
                                      "id": 133924145379648,
                                      "label": "image = Bitmap(im)",
                                      "successors": [
                                        {
                                          "id": 133924145379696,
                                          "label": "getImagePixels()",
                                          "successors": [
                                            {
                                              "id": 133924145379744,
                                              "label": "analyzePixels()",
                                              "successors": [
                                                {
                                                  "id": 133924145380032,
                                                  "label": "if (firstFrame )",
                                                  "successors": [
                                                    {
                                                      "id": 133924145380512,
                                                      "label": "writeLSD()",
                                                      "successors": [
                                                        {
                                                          "id": 133924145380560,
                                                          "label": "writePalette()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145380608,
                                                              "label": "if (repeat >= 0 )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145381040,
                                                                  "label": "writeNetscapeExt()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145380224,
                                                                      "label": "writeGraphicCtrlExt()",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145380272,
                                                                          "label": "writeImageDesc(x, y)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145380320,
                                                                              "label": "if (!firstFrame )",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145381280,
                                                                                  "label": "writePalette()",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145380848,
                                                                                      "label": "writePixels()",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924145381088,
                                                                                          "label": "firstFrame = false",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924145545328,
                                                                                              "label": "return ok",
                                                                                              "successors": []
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "id": 133924145380848
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924145380224
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924145380224
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924145380080,
                                  "label": "setFrameSize(im.getWidth(), im.getHeight())",
                                  "successors": [
                                    {
                                      "id": 133924145379648
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924145381232,
                              "label": "catch( ( e:IOException )",
                              "successors": [
                                {
                                  "id": 133924145545376,
                                  "label": "print(\"func addFrame() Exception:${e}\")",
                                  "successors": [
                                    {
                                      "id": 133924145545424,
                                      "label": "ok = false",
                                      "successors": [
                                        {
                                          "id": 133924145379504,
                                          "label": "",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "finish",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160778352,
              "label": "",
              "successors": [
                {
                  "id": 133924145545568,
                  "label": "if (!started )",
                  "successors": [
                    {
                      "id": 133924145545952,
                      "label": "return false",
                      "successors": []
                    },
                    {
                      "id": 133924145545760,
                      "label": "var ok:Bool = true",
                      "successors": [
                        {
                          "id": 133924145545904,
                          "label": "started = false",
                          "successors": [
                            {
                              "id": 133924145546000,
                              "label": "try",
                              "successors": [
                                {
                                  "id": 133924145546288,
                                  "label": "outFile.write(0x3b)",
                                  "successors": [
                                    {
                                      "id": 133924145546336,
                                      "label": "outFile.flush()",
                                      "successors": [
                                        {
                                          "id": 133924145546384,
                                          "label": "outFile.close()",
                                          "successors": [
                                            {
                                              "id": 133924145546576,
                                              "label": "transIndex = 0",
                                              "successors": [
                                                {
                                                  "id": 133924145546720,
                                                  "label": "image = Bitmap()",
                                                  "successors": [
                                                    {
                                                      "id": 133924145546768,
                                                      "label": "pixels =Array<UInt8>()",
                                                      "successors": [
                                                        {
                                                          "id": 133924145546816,
                                                          "label": "indexedPixels = Array<UInt8>()",
                                                          "successors": [
                                                            {
                                                              "id": 133924145546864,
                                                              "label": "colorTab = Array<UInt8>()",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145546912,
                                                                  "label": "closeStream = false",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145546960,
                                                                      "label": "firstFrame = true",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145547008,
                                                                          "label": "return ok",
                                                                          "successors": []
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924145546432,
                                  "label": "catch( ( e:IOException )",
                                  "successors": [
                                    {
                                      "id": 133924145546624,
                                      "label": "print(\"func finish() Exception:${e}\")",
                                      "successors": [
                                        {
                                          "id": 133924145546672,
                                          "label": "ok = false",
                                          "successors": [
                                            {
                                              "id": 133924145546240,
                                              "label": "",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setFrameRate",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160778928,
              "label": "",
              "successors": [
                {
                  "id": 133924145547152,
                  "label": "if (abs(fps - 0.0)>0.001 )",
                  "successors": [
                    {
                      "id": 133924145547488,
                      "label": "delay = Int32(round(Float32(100.0) / fps))",
                      "successors": [
                        {
                          "id": 133924160778976,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924160778976
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setQuality",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160779456,
              "label": "",
              "successors": [
                {
                  "id": 133924145547440,
                  "label": "if (quality < 1 )",
                  "successors": [
                    {
                      "id": 133924145547872,
                      "label": "sample = 1",
                      "successors": [
                        {
                          "id": 133924160779504,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924145548016,
                      "label": "sample = quality",
                      "successors": [
                        {
                          "id": 133924160779504
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setSize",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160780224,
              "label": "",
              "successors": [
                {
                  "id": 133924145547968,
                  "label": "if (started )",
                  "successors": [
                    {
                      "id": 133924145548352,
                      "label": "return",
                      "successors": []
                    },
                    {
                      "id": 133924145548112,
                      "label": "fixedWidth = w",
                      "successors": [
                        {
                          "id": 133924145548160,
                          "label": "fixedHeight = h",
                          "successors": [
                            {
                              "id": 133924145548304,
                              "label": "if (fixedWidth < 1 )",
                              "successors": [
                                {
                                  "id": 133924145548688,
                                  "label": "fixedWidth = 320",
                                  "successors": [
                                    {
                                      "id": 133924145548448,
                                      "label": "if (fixedHeight < 1 )",
                                      "successors": [
                                        {
                                          "id": 133924145548928,
                                          "label": "fixedHeight = 240",
                                          "successors": [
                                            {
                                              "id": 133924145548640,
                                              "label": "sizeSet = true",
                                              "successors": [
                                                {
                                                  "id": 133924160780272,
                                                  "label": "return",
                                                  "successors": []
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924145548640
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924145548448
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "setFrameSize",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160780992,
              "label": "",
              "successors": [
                {
                  "id": 133924145548880,
                  "label": "width = w",
                  "successors": [
                    {
                      "id": 133924145548976,
                      "label": "height = h",
                      "successors": [
                        {
                          "id": 133924160781040,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "analyzePixels",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160782048,
              "label": "",
              "successors": [
                {
                  "id": 133924145549120,
                  "label": "var len:Int32 = Int32(pixels.size)",
                  "successors": [
                    {
                      "id": 133924145549168,
                      "label": "var nPix:Int32 = len / 3",
                      "successors": [
                        {
                          "id": 133924145549216,
                          "label": "indexedPixels = Array<UInt8>(Int64(nPix),item:0)",
                          "successors": [
                            {
                              "id": 133924145549264,
                              "label": "var nq:NeuQuant = NeuQuant(pixels, len, sample)",
                              "successors": [
                                {
                                  "id": 133924145549312,
                                  "label": "colorTab = nq.process()",
                                  "successors": [
                                    {
                                      "id": 133924145549360,
                                      "label": "var i:Int64=0",
                                      "successors": [
                                        {
                                          "id": 133924145549408,
                                          "label": "while (i < colorTab.size )",
                                          "successors": [
                                            {
                                              "id": 133924145549744,
                                              "label": "var temp:UInt8 = colorTab[i]",
                                              "successors": [
                                                {
                                                  "id": 133924145549792,
                                                  "label": "colorTab[i] = colorTab[i + 2]",
                                                  "successors": [
                                                    {
                                                      "id": 133924145549840,
                                                      "label": "colorTab[i + 2] = temp",
                                                      "successors": [
                                                        {
                                                          "id": 133924145549888,
                                                          "label": "usedEntry[i / 3] = false",
                                                          "successors": [
                                                            {
                                                              "id": 133924145549936,
                                                              "label": "i += 3",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145549408
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924145549504,
                                              "label": "var k:Int64 = 0",
                                              "successors": [
                                                {
                                                  "id": 133924145549552,
                                                  "label": "for (i in 0..nPix )",
                                                  "successors": [
                                                    {
                                                      "id": 133924145550176,
                                                      "label": "var index:Int32 = nq.map(Int32(pixels[k] & 0xff), Int32(pixels[k+1] & 0xff), Int32(pixels[k+2] & 0xff))",
                                                      "successors": [
                                                        {
                                                          "id": 133924145550224,
                                                          "label": "k +=3",
                                                          "successors": [
                                                            {
                                                              "id": 133924145550272,
                                                              "label": "usedEntry[Int64(index)] = true",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145550320,
                                                                  "label": "indexedPixels[Int64(i)] =UInt8(index)",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145549552
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924145549984,
                                                      "label": "pixels = Array<UInt8>()",
                                                      "successors": [
                                                        {
                                                          "id": 133924145550128,
                                                          "label": "colorDepth = 8",
                                                          "successors": [
                                                            {
                                                              "id": 133924145550368,
                                                              "label": "palSize = 7",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145550416,
                                                                  "label": "if (transparent != Color.TRANSPARENT )",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145550800,
                                                                      "label": "transIndex = findClosest(transparent)",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924160782096,
                                                                          "label": "return",
                                                                          "successors": []
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "id": 133924145550944,
                                                                      "label": "if (hasTransparentPixels )",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145551328,
                                                                          "label": "transIndex = findClosest(Color.TRANSPARENT)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924160782096
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "id": 133924160782096
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "findClosest",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160962960,
              "label": "",
              "successors": [
                {
                  "id": 133924145550608,
                  "label": "if (colorTab.size==0 )",
                  "successors": [
                    {
                      "id": 133924145551520,
                      "label": "return -1",
                      "successors": []
                    },
                    {
                      "id": 133924145551280,
                      "label": "var r:UInt32 = Color.red(color)",
                      "successors": [
                        {
                          "id": 133924145551568,
                          "label": "var g:UInt32 = Color.green(color)",
                          "successors": [
                            {
                              "id": 133924145551664,
                              "label": "var b:UInt32 = Color.blue(color)",
                              "successors": [
                                {
                                  "id": 133924145551760,
                                  "label": "var minpos:Int32 = 0",
                                  "successors": [
                                    {
                                      "id": 133924145551856,
                                      "label": "var dmin:Int32 = 256 * 256 * 256",
                                      "successors": [
                                        {
                                          "id": 133924145551952,
                                          "label": "var len:Int32 = Int32(colorTab.size)",
                                          "successors": [
                                            {
                                              "id": 133924145552048,
                                              "label": "var i:Int64=0",
                                              "successors": [
                                                {
                                                  "id": 133924145552096,
                                                  "label": "while (i < Int64(len) )",
                                                  "successors": [
                                                    {
                                                      "id": 133924145552480,
                                                      "label": "var dr:Int32 = Int32(r) - Int32(colorTab[i] & 0xff)",
                                                      "successors": [
                                                        {
                                                          "id": 133924145552528,
                                                          "label": "i++",
                                                          "successors": [
                                                            {
                                                              "id": 133924145552624,
                                                              "label": "var dg:Int32 = Int32(g) - Int32(colorTab[i] & 0xff)",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145552672,
                                                                  "label": "i++",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145552768,
                                                                      "label": "var db:Int32 = Int32(b) - Int32(colorTab[i] & 0xff)",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145552864,
                                                                          "label": "var d:Int32 = dr * dr + dg * dg + db * db",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145552960,
                                                                              "label": "var index:Int64 = i / 3",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145553008,
                                                                                  "label": "if (usedEntry[index] && (d < dmin) )",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145553440,
                                                                                      "label": "dmin = d",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924145553488,
                                                                                          "label": "minpos = Int32(index)",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924145553152,
                                                                                              "label": "i++",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924145552096
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    },
                                                                                    {
                                                                                      "id": 133924145553152
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924145552240,
                                                      "label": "return minpos",
                                                      "successors": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "getImagePixels",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160964016,
              "label": "",
              "successors": [
                {
                  "id": 133924145553392,
                  "label": "var w:Int32 = image.getWidth()",
                  "successors": [
                    {
                      "id": 133924145553536,
                      "label": "var h:Int32 = image.getHeight()",
                      "successors": [
                        {
                          "id": 133924145553584,
                          "label": "if ((w != width) || (h != height) )",
                          "successors": [
                            {
                              "id": 133924145553968,
                              "label": "var temp:Bitmap = Bitmap.createBitmap(width, height, Bitmap_Config.ARGB_8888)",
                              "successors": [
                                {
                                  "id": 133924145554016,
                                  "label": "image = Bitmap.createBitmap(width, height, Bitmap_Config.ARGB_8888)",
                                  "successors": [
                                    {
                                      "id": 133924145554064,
                                      "label": "w = image.getWidth()",
                                      "successors": [
                                        {
                                          "id": 133924145554112,
                                          "label": "h = image.getHeight()",
                                          "successors": [
                                            {
                                              "id": 133924145553680,
                                              "label": "var pixelsInt:Array<UInt32> = Array<UInt32>(Int64(w * h) ,item:0)",
                                              "successors": [
                                                {
                                                  "id": 133924145553728,
                                                  "label": "image.getPixels(pixelsInt, 0, w, w, h)",
                                                  "successors": [
                                                    {
                                                      "id": 133924145553776,
                                                      "label": "pixels = Array<UInt8>(Int64(pixelsInt.size * 3), item:0)",
                                                      "successors": [
                                                        {
                                                          "id": 133924145553920,
                                                          "label": "var pixelsIndex:Int64 = 0",
                                                          "successors": [
                                                            {
                                                              "id": 133924145554160,
                                                              "label": "hasTransparentPixels = false",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145554208,
                                                                  "label": "var totalTransparentPixels:Int32 = 0",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145554256,
                                                                      "label": "for (pixel in pixelsInt )",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145554544,
                                                                          "label": "if (pixel == Color.TRANSPARENT )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145554880,
                                                                              "label": "totalTransparentPixels++",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924145554640,
                                                                                  "label": "pixels[pixelsIndex] = UInt8(pixel & 0xFF)",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924145554688,
                                                                                      "label": "pixelsIndex++",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924145554832,
                                                                                          "label": "pixels[pixelsIndex] = UInt8((pixel >> 8) & 0xFF)",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924145554928,
                                                                                              "label": "pixelsIndex++",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924145554976,
                                                                                                  "label": "pixels[pixelsIndex] = UInt8((pixel >> 16) & 0xFF)",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924145555024,
                                                                                                      "label": "pixelsIndex++",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924145554256
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924145554640
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "id": 133924145554352,
                                                                          "label": "var transparentPercentage:Float64 = 100.0 * Float64(totalTransparentPixels) / Float64(pixelsInt.size)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924145554496,
                                                                              "label": "hasTransparentPixels = transparentPercentage > MIN_TRANSPARENT_PERCENTAGE",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924160964064,
                                                                                  "label": "return",
                                                                                  "successors": []
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924145553680
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeGraphicCtrlExt",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160964736,
              "label": "",
              "successors": [
                {
                  "id": 133924145555168,
                  "label": "outFile.write(0x21)",
                  "successors": [
                    {
                      "id": 133924145555216,
                      "label": "outFile.write(0xf9)",
                      "successors": [
                        {
                          "id": 133924145555264,
                          "label": "outFile.write(4)",
                          "successors": [
                            {
                              "id": 133924145555312,
                              "label": "var transpcj:Int32",
                              "successors": [
                                {
                                  "id": 133924145555360,
                                  "label": "var dispcj:Int32",
                                  "successors": [
                                    {
                                      "id": 133924145555408,
                                      "label": "if (transparent == Color.TRANSPARENT && !hasTransparentPixels )",
                                      "successors": [
                                        {
                                          "id": 133924145555792,
                                          "label": "transpcj = 0",
                                          "successors": [
                                            {
                                              "id": 133924145555840,
                                              "label": "dispcj = 0",
                                              "successors": [
                                                {
                                                  "id": 133924145555504,
                                                  "label": "if (dispose >= 0 )",
                                                  "successors": [
                                                    {
                                                      "id": 133924145556224,
                                                      "label": "dispcj = dispose & 7",
                                                      "successors": [
                                                        {
                                                          "id": 133924145555600,
                                                          "label": "dispcj <<= 2",
                                                          "successors": [
                                                            {
                                                              "id": 133924145555936,
                                                              "label": "outFile.write(UInt8(0 | // 1:3 reserved\n                dispcj | // 4:6 disposal\n                0 | // 7 user input - 0 = none\n                transpcj))",
                                                              "successors": [
                                                                {
                                                                  "id": 133924145556176,
                                                                  "label": "writeShort(delay)",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924145556272,
                                                                      "label": "outFile.write(UInt8(transIndex))",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924145556320,
                                                                          "label": "outFile.write(0)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924160964784,
                                                                              "label": "return",
                                                                              "successors": []
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924145555600
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924145555984,
                                          "label": "transpcj = 1",
                                          "successors": [
                                            {
                                              "id": 133924145556032,
                                              "label": "dispcj = 2",
                                              "successors": [
                                                {
                                                  "id": 133924145555504
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeImageDesc",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160965504,
              "label": "",
              "successors": [
                {
                  "id": 133924145556464,
                  "label": "outFile.write(0x2c)",
                  "successors": [
                    {
                      "id": 133924145556512,
                      "label": "writeShort(x)",
                      "successors": [
                        {
                          "id": 133924145556560,
                          "label": "writeShort(y)",
                          "successors": [
                            {
                              "id": 133924145556608,
                              "label": "writeShort(width)",
                              "successors": [
                                {
                                  "id": 133924145556656,
                                  "label": "writeShort(height)",
                                  "successors": [
                                    {
                                      "id": 133924145556704,
                                      "label": "if (firstFrame )",
                                      "successors": [
                                        {
                                          "id": 133924145557088,
                                          "label": "outFile.write(0)",
                                          "successors": [
                                            {
                                              "id": 133924160965552,
                                              "label": "return",
                                              "successors": []
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924145557232,
                                          "label": "outFile.write(UInt8(0x80) | UInt8(0) |UInt8(0) | UInt8(0) | UInt8(palSize))",
                                          "successors": [
                                            {
                                              "id": 133924160965552
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeLSD",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160966176,
              "label": "",
              "successors": [
                {
                  "id": 133924145556896,
                  "label": "writeShort(width)",
                  "successors": [
                    {
                      "id": 133924145557184,
                      "label": "writeShort(height)",
                      "successors": [
                        {
                          "id": 133924145557280,
                          "label": "let t: UInt8 = UInt8(0x80 | // 1 : global color table flag = 1 (gct used)\n                0x70 | // 2-4 : color resolution = 7\n                0x00 | // 5 : gct sort flag = 0\n                palSize)",
                          "successors": [
                            {
                              "id": 133924145557328,
                              "label": "outFile.write(Array<UInt8>(1, item: t))",
                              "successors": [
                                {
                                  "id": 133924145557376,
                                  "label": "outFile.write(Array<UInt8>(1,item:0))",
                                  "successors": [
                                    {
                                      "id": 133924145557424,
                                      "label": "outFile.write(Array<UInt8>(1,item:0))",
                                      "successors": [
                                        {
                                          "id": 133924160966224,
                                          "label": "return",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeNetscapeExt",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160966800,
              "label": "",
              "successors": [
                {
                  "id": 133924145557568,
                  "label": "outFile.write(Array<UInt8>(1, item: 0x21))",
                  "successors": [
                    {
                      "id": 133924145557616,
                      "label": "outFile.write(0xff)",
                      "successors": [
                        {
                          "id": 133924145557664,
                          "label": "outFile.write(11)",
                          "successors": [
                            {
                              "id": 133924145557712,
                              "label": "writeString(\"NETSCAPE\" + \"2.0\")",
                              "successors": [
                                {
                                  "id": 133924145557760,
                                  "label": "outFile.write(3)",
                                  "successors": [
                                    {
                                      "id": 133924145557808,
                                      "label": "outFile.write(1)",
                                      "successors": [
                                        {
                                          "id": 133924145557856,
                                          "label": "writeShort(repeat)",
                                          "successors": [
                                            {
                                              "id": 133924145557904,
                                              "label": "outFile.write(0)",
                                              "successors": [
                                                {
                                                  "id": 133924160966848,
                                                  "label": "return",
                                                  "successors": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writePalette",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160967520,
              "label": "",
              "successors": [
                {
                  "id": 133924145558048,
                  "label": "outFile.write(colorTab)",
                  "successors": [
                    {
                      "id": 133924145558096,
                      "label": "var n:Int32 = (3 * 256) - Int32(colorTab.size)",
                      "successors": [
                        {
                          "id": 133924145558144,
                          "label": "for (i in 0..n )",
                          "successors": [
                            {
                              "id": 133924145558432,
                              "label": "outFile.write(Array<UInt8>(1, item: 0))",
                              "successors": [
                                {
                                  "id": 133924145558144
                                }
                              ]
                            },
                            {
                              "id": 133924160967568,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writePixels",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160968240,
              "label": "",
              "successors": [
                {
                  "id": 133924145558480,
                  "label": "var encoder:LZWEncoder = LZWEncoder(width, height, indexedPixels, colorDepth)",
                  "successors": [
                    {
                      "id": 133924145558528,
                      "label": "encoder.encode(outFile)",
                      "successors": [
                        {
                          "id": 133924160968288,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeShort",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160969008,
              "label": "",
              "successors": [
                {
                  "id": 133924145558672,
                  "label": "var temp:Array<UInt8> = [UInt8(value & 0xff),UInt8((value >> 8) & 0xff)]",
                  "successors": [
                    {
                      "id": 133924145558720,
                      "label": "outFile.write(temp)",
                      "successors": [
                        {
                          "id": 133924160969056,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "writeString",
          "type": "Function",
          "blocks": [
            {
              "id": 133924160969680,
              "label": "",
              "successors": [
                {
                  "id": 133924145558864,
                  "label": "var bytes1=s.toArray()",
                  "successors": [
                    {
                      "id": 133924145558912,
                      "label": "for (i in 0..s.size )",
                      "successors": [
                        {
                          "id": 133924145559200,
                          "label": "outFile.write(Array<UInt8>(1, item: bytes1[i]))",
                          "successors": [
                            {
                              "id": 133924145558912
                            }
                          ]
                        },
                        {
                          "id": 133924160969728,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}