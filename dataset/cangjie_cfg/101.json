{
  "name": "101.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "cli_chat",
          "type": "Function",
          "blocks": [
            {
              "id": 133924167523280,
              "label": "",
              "successors": [
                {
                  "id": 133924149469936,
                  "label": "println(\"\\n欢迎使用AI聊天机器人，输入exit或者quit退出，输入clear清空历史记录\")",
                  "successors": [
                    {
                      "id": 133924149469984,
                      "label": "var history: ArrayList<(String, String)> = ArrayList<(String, String)>()",
                      "successors": [
                        {
                          "id": 133924149470032,
                          "label": "while (true )",
                          "successors": [
                            {
                              "id": 133924149470320,
                              "label": "print(\"Input: \")",
                              "successors": [
                                {
                                  "id": 133924149470368,
                                  "label": "var prompt: String = \"\"",
                                  "successors": [
                                    {
                                      "id": 133924149470416,
                                      "label": "match (Console.stdIn.readln() )",
                                      "successors": [
                                        {
                                          "id": 133924149470848,
                                          "label": "prompt=str1",
                                          "successors": [
                                            {
                                              "id": 133924149470896,
                                              "label": ";",
                                              "successors": [
                                                {
                                                  "id": 133924149470512,
                                                  "label": "if (prompt == \"exit\" || prompt == \"exit()\" )",
                                                  "successors": [
                                                    {
                                                      "id": 133924167523328,
                                                      "label": "return",
                                                      "successors": []
                                                    },
                                                    {
                                                      "id": 133924149471328,
                                                      "label": "if (prompt == \"clear\" )",
                                                      "successors": [
                                                        {
                                                          "id": 133924149471760,
                                                          "label": "history.clear()",
                                                          "successors": [
                                                            {
                                                              "id": 133924149471808,
                                                              "label": "println(\"Output: 已清理历史对话信息。\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924149471856,
                                                                  "label": "continue",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924149471520,
                                                                      "label": "print(\"ChatBox: \")",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924149471568,
                                                                          "label": "",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924149472192,
                                                                              "label": "stream_chat(prompt, env_info, history)",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924149471904,
                                                                                  "label": "let response_option: Option<String> = if (stream) {\n      stream_chat(prompt, env_info, history);\n    } else {\n      chat(prompt, env_info, history);\n    }",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924149471952,
                                                                                      "label": "match (response_option )",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924149472672,
                                                                                          "label": "if (stream )",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924149473056,
                                                                                              "label": "println(\"\")",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924149472768,
                                                                                                  "label": "history.append((prompt, response))",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924149472816,
                                                                                                      "label": ";",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924149470032
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            },
                                                                                            {
                                                                                              "id": 133924149473200,
                                                                                              "label": "println(\"${response}\")",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924149472768
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        },
                                                                                        {
                                                                                          "id": 133924149473392,
                                                                                          "label": "println(\"遇到错误，即将退出\")",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924149473440,
                                                                                              "label": ";",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924167523328
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924149472336,
                                                                              "label": "chat(prompt, env_info, history)",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924149471904
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924149471520
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924149471184,
                                          "label": "continue",
                                          "successors": [
                                            {
                                              "id": 133924149471232,
                                              "label": ";",
                                              "successors": [
                                                {
                                                  "id": 133924149470512
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924167523328
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "unknown_method",
          "type": "Function",
          "blocks": [
            {
              "id": 133924167524000,
              "label": "",
              "successors": [
                {
                  "id": 133924149472288,
                  "label": "let env_info = load_env_info()",
                  "successors": [
                    {
                      "id": 133924149473536,
                      "label": "var stream: Bool = false",
                      "successors": [
                        {
                          "id": 133924149473584,
                          "label": "if (args.size == 1 )",
                          "successors": [
                            {
                              "id": 133924149473968,
                              "label": "if (args[0] == \"--stream\" )",
                              "successors": [
                                {
                                  "id": 133924149474352,
                                  "label": "stream = true",
                                  "successors": [
                                    {
                                      "id": 133924149473728,
                                      "label": "cli_chat(env_info, stream: stream)",
                                      "successors": [
                                        {
                                          "id": 133924149473776,
                                          "label": "return 0",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924149474496,
                                  "label": "println(\"Warning! you can only use `--stream` to use stream for response.\")",
                                  "successors": [
                                    {
                                      "id": 133924149473728
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924149473728
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}