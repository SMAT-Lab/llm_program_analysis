{
  "name": "3.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "safeParseExprFragment",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166544656,
              "label": "",
              "successors": [
                {
                  "id": 133924148638912,
                  "label": "try",
                  "successors": [
                    {
                      "id": 133924148639200,
                      "label": "let (expr, next) = parseExprFragment(t, startFrom: start)",
                      "successors": [
                        {
                          "id": 133924148639248,
                          "label": "return Some((expr, next))",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924148639296,
                      "label": "catch( ( e: ParseASTException )",
                      "successors": [
                        {
                          "id": 133924148639488,
                          "label": "return None",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "wrap",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166545376,
              "label": "",
              "successors": [
                {
                  "id": 133924148639584,
                  "label": "return quote({=> $(tt) }())",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "getIdent",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166546096,
              "label": "",
              "successors": [
                {
                  "id": 133924148639728,
                  "label": "return Token(TokenKind.IDENTIFIER, s)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "parseValue",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166546864,
              "label": "",
              "successors": [
                {
                  "id": 133924148639872,
                  "label": "let tf = t[start]",
                  "successors": [
                    {
                      "id": 133924148639920,
                      "label": "match (tf.kind )",
                      "successors": [
                        {
                          "id": 133924148640400,
                          "label": "return parseObject(t, start + 1)",
                          "successors": []
                        },
                        {
                          "id": 133924148640688,
                          "label": "return parseArray(t, start + 1)",
                          "successors": []
                        },
                        {
                          "id": 133924148640976,
                          "label": "return (quote(JsonNull()), start +\n                1)",
                          "successors": []
                        },
                        {
                          "id": 133924148641264,
                          "label": "if (let Some((expr, next)) < - safeParseExprFragment(t, start) )",
                          "successors": [
                            {
                              "id": 133924148641696,
                              "label": "let exprTokens = expr.toTokens()",
                              "successors": [
                                {
                                  "id": 133924148641744,
                                  "label": "if (exprTokens.size > 1 )",
                                  "successors": [
                                    {
                                      "id": 133924146725264,
                                      "label": "return (quote(castJsonValue($(expr))), next)",
                                      "successors": []
                                    },
                                    {
                                      "id": 133924146725024,
                                      "label": "let first = exprTokens[0]",
                                      "successors": [
                                        {
                                          "id": 133924146725072,
                                          "label": "match (first.kind )",
                                          "successors": [
                                            {
                                              "id": 133924146725696,
                                              "label": "return (quote(JsonString($(first))), next)",
                                              "successors": []
                                            },
                                            {
                                              "id": 133924146725984,
                                              "label": "return (quote(JsonInt($(first))), next)",
                                              "successors": []
                                            },
                                            {
                                              "id": 133924146726272,
                                              "label": "return (quote(JsonFloat($(first))), next)",
                                              "successors": []
                                            },
                                            {
                                              "id": 133924146726560,
                                              "label": "return (quote(JsonBool($(first))), next)",
                                              "successors": []
                                            },
                                            {
                                              "id": 133924146726848,
                                              "label": "return (quote(castJsonValue($(expr))), next)",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924146726896,
                              "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token ${tf.value} in parseValue\", \"Unexpected token\")",
                              "successors": [
                                {
                                  "id": 133924146726944,
                                  "label": "throw Exception(\"Unexpected token ${tf.value} in parseValue\")",
                                  "successors": [
                                    {
                                      "id": 133924166546912,
                                      "label": "return",
                                      "successors": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "parseObject",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166547632,
              "label": "",
              "successors": [
                {
                  "id": 133924148641360,
                  "label": "let ident = getIdent(\"jsonCjObject\")",
                  "successors": [
                    {
                      "id": 133924148641408,
                      "label": "let tokens = quote(\n        let $(ident) = JsonObject();\n    )",
                      "successors": [
                        {
                          "id": 133924148641504,
                          "label": "var i = start",
                          "successors": [
                            {
                              "id": 133924146725360,
                              "label": "var state = JsonState.ObjectStart",
                              "successors": [
                                {
                                  "id": 133924146726992,
                                  "label": "while (i < t.size )",
                                  "successors": [
                                    {
                                      "id": 133924146727328,
                                      "label": "let cur = t[i]",
                                      "successors": [
                                        {
                                          "id": 133924146727376,
                                          "label": "match (cur.kind )",
                                          "successors": [
                                            {
                                              "id": 133924146727856,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146728336,
                                                  "label": "return (quote(JsonObject()), i + 1)",
                                                  "successors": []
                                                },
                                                {
                                                  "id": 133924146728624,
                                                  "label": "tokens.append(quote(\n                            return $(ident);\n                        ))",
                                                  "successors": [
                                                    {
                                                      "id": 133924146728672,
                                                      "label": "return (wrap(tokens), i + 1)",
                                                      "successors": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146728960,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected state for RCURL in parseObject\", \"Unexpected state\"\n                    )",
                                                  "successors": [
                                                    {
                                                      "id": 133924146729008,
                                                      "label": "throw Exception(\"Unexpected state for RCURL in parseObject\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146726992
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146729200,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146729680,
                                                  "label": "i++",
                                                  "successors": [
                                                    {
                                                      "id": 133924146729728,
                                                      "label": "state = JsonState.ObjectComma",
                                                      "successors": [
                                                        {
                                                          "id": 133924146729776,
                                                          "label": "continue",
                                                          "successors": [
                                                            {
                                                              "id": 133924146726992
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146730064,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected state for COMMA in parseObject\", \"Unexpected state\"\n                    )",
                                                  "successors": [
                                                    {
                                                      "id": 133924146730112,
                                                      "label": "throw Exception(\"Unexpected state for COMMA in parseObject\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146726992
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146730304,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146730784,
                                                  "label": "let key = cur.value",
                                                  "successors": [
                                                    {
                                                      "id": 133924146730832,
                                                      "label": "i++",
                                                      "successors": [
                                                        {
                                                          "id": 133924146730880,
                                                          "label": "if (t[i].kind != TokenKind.COLON )",
                                                          "successors": [
                                                            {
                                                              "id": 133924146731264,
                                                              "label": "diagReport(DiagReportLevel.ERROR, t, \"No colon in object\", \"No colon\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924146731312,
                                                                  "label": "throw Exception(\"No colon in object\")",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924146731024,
                                                                      "label": "i++",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924146731072,
                                                                          "label": "let (value, next) = parseValue(t, i)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924146731216,
                                                                              "label": "i = next",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924146731360,
                                                                                  "label": "state = JsonState.ObjectValue",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924146731408,
                                                                                      "label": "tokens.append(quote(\n                        $(ident).put($(key), $(value));\n                    )",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924146731456,
                                                                                          "label": ")",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924146731504,
                                                                                              "label": "continue",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924146726992
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "id": 133924146731024
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146731792,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected state for STRING_LITERAL in parseObject\",\n                        \"Unexpected state\")",
                                                  "successors": [
                                                    {
                                                      "id": 133924146731840,
                                                      "label": "throw Exception(\"Unexpected state for STRING_LITERAL in parseObject\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146726992
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146732032,
                                              "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token ${cur.value} in parseObject\", \"Unexpected token\")",
                                              "successors": [
                                                {
                                                  "id": 133924146732080,
                                                  "label": "throw Exception(\"Unexpected token ${cur.value} in parseObject\")",
                                                  "successors": [
                                                    {
                                                      "id": 133924146726992
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924146727136,
                                      "label": "diagReport(DiagReportLevel.ERROR, t, \"No closing curly bracket\", \"No closing curly bracket\")",
                                      "successors": [
                                        {
                                          "id": 133924146730256,
                                          "label": "throw Exception(\"No closing curly bracket\")",
                                          "successors": [
                                            {
                                              "id": 133924166547680,
                                              "label": "return",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "parseArray",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166548400,
              "label": "",
              "successors": [
                {
                  "id": 133924146732128,
                  "label": "let ident = getIdent(\"jsonCjArray\")",
                  "successors": [
                    {
                      "id": 133924146732176,
                      "label": "let tokens = quote(\n        let $(ident) = JsonArray();\n    )",
                      "successors": [
                        {
                          "id": 133924146732224,
                          "label": "var i = start",
                          "successors": [
                            {
                              "id": 133924146732272,
                              "label": "var state = JsonState.ArrayStart",
                              "successors": [
                                {
                                  "id": 133924146732320,
                                  "label": "while (i < t.size )",
                                  "successors": [
                                    {
                                      "id": 133924146732656,
                                      "label": "let cur = t[i]",
                                      "successors": [
                                        {
                                          "id": 133924146732704,
                                          "label": "match (cur.kind )",
                                          "successors": [
                                            {
                                              "id": 133924146733184,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146733664,
                                                  "label": "return (quote(JsonArray()), i + 1)",
                                                  "successors": []
                                                },
                                                {
                                                  "id": 133924146733952,
                                                  "label": "tokens.append(quote(\n                            return $(ident);\n                        ))",
                                                  "successors": [
                                                    {
                                                      "id": 133924146734000,
                                                      "label": "return (wrap(tokens), i + 1)",
                                                      "successors": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146734288,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected state for RSQUARE in parseArray\",\n                        \"Unexpected state\")",
                                                  "successors": [
                                                    {
                                                      "id": 133924146734336,
                                                      "label": "throw Exception(\"Unexpected state for RSQUARE in parseArray\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146732320
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146734528,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146735008,
                                                  "label": "i++",
                                                  "successors": [
                                                    {
                                                      "id": 133924146735056,
                                                      "label": "state = JsonState.ArrayComma",
                                                      "successors": [
                                                        {
                                                          "id": 133924146735104,
                                                          "label": "continue",
                                                          "successors": [
                                                            {
                                                              "id": 133924146732320
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146735392,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected state for COMMA in parseArray\", \"Unexpected state\")",
                                                  "successors": [
                                                    {
                                                      "id": 133924146735440,
                                                      "label": "throw Exception(\"Unexpected state for COMMA in parseArray\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146732320
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146735632,
                                              "label": "match (state )",
                                              "successors": [
                                                {
                                                  "id": 133924146736112,
                                                  "label": "let (value, next) = parseValue(t, i)",
                                                  "successors": [
                                                    {
                                                      "id": 133924146736160,
                                                      "label": "i = next",
                                                      "successors": [
                                                        {
                                                          "id": 133924146736208,
                                                          "label": "state = JsonState.ArrayValue",
                                                          "successors": [
                                                            {
                                                              "id": 133924146736256,
                                                              "label": "tokens.append(quote(\n                        $(ident).add($(value));\n                    ))",
                                                              "successors": [
                                                                {
                                                                  "id": 133924146736304,
                                                                  "label": "continue",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924146732320
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924146736592,
                                                  "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token ${cur.value} in parseArray\",\n                        \"Unexpected token\")",
                                                  "successors": [
                                                    {
                                                      "id": 133924146736640,
                                                      "label": "throw Exception(\"Unexpected token ${cur.value} in parseArray\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146732320
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924146732464,
                                      "label": "diagReport(DiagReportLevel.ERROR, t, \"No closing bracket\", \"No closing bracket\")",
                                      "successors": [
                                        {
                                          "id": 133924146734480,
                                          "label": "throw Exception(\"No closing bracket\")",
                                          "successors": [
                                            {
                                              "id": 133924166548448,
                                              "label": "return",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "jsonTransform",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166549168,
              "label": "",
              "successors": [
                {
                  "id": 133924146735584,
                  "label": "let t = Tokens()",
                  "successors": [
                    {
                      "id": 133924146735776,
                      "label": "for (ti in input )",
                      "successors": [
                        {
                          "id": 133924146736928,
                          "label": "if (let TokenKind.NL < - ti.kind )",
                          "successors": [
                            {
                              "id": 133924146735776
                            },
                            {
                              "id": 133924146737312,
                              "label": "continue",
                              "successors": [
                                {
                                  "id": 133924146737072,
                                  "label": "t.append(ti)",
                                  "successors": [
                                    {
                                      "id": 133924146735776
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924146736736,
                          "label": "let ret = Tokens()",
                          "successors": [
                            {
                              "id": 133924146736880,
                              "label": "if (t.size == 0 )",
                              "successors": [
                                {
                                  "id": 133924146737600,
                                  "label": "return quote(())",
                                  "successors": []
                                },
                                {
                                  "id": 133924146737360,
                                  "label": "let cur = t[0]",
                                  "successors": [
                                    {
                                      "id": 133924146737408,
                                      "label": "let cv = cur.value",
                                      "successors": [
                                        {
                                          "id": 133924146737552,
                                          "label": "match (cur.kind )",
                                          "successors": [
                                            {
                                              "id": 133924146738080,
                                              "label": "let (ts, next) = parseObject(t, 1)",
                                              "successors": [
                                                {
                                                  "id": 133924146738128,
                                                  "label": "ret.append(quote(\n                    return $(ts);\n                ))",
                                                  "successors": [
                                                    {
                                                      "id": 133924146738176,
                                                      "label": "if (next != t.size )",
                                                      "successors": [
                                                        {
                                                          "id": 133924146738560,
                                                          "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token after initial object\",\n                    \"Unexpected token after initial object\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924146738608,
                                                              "label": "throw Exception(\"Unexpected token after initial object\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924146738320,
                                                                  "label": "return wrap(ret)",
                                                                  "successors": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924146738320
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146738800,
                                              "label": "let (ts, next) = parseArray(t, 1)",
                                              "successors": [
                                                {
                                                  "id": 133924146738848,
                                                  "label": "ret.append(quote(\n                        return $(ts);\n                    ))",
                                                  "successors": [
                                                    {
                                                      "id": 133924146738896,
                                                      "label": "if (next != t.size )",
                                                      "successors": [
                                                        {
                                                          "id": 133924146739280,
                                                          "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token after initial array\",\n                    \"Unexpected token after initial array\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924146739328,
                                                              "label": "throw Exception(\"Unexpected token after initial array\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924146739040,
                                                                  "label": "return wrap(ret)",
                                                                  "successors": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924146739040
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924146739520,
                                              "label": "return quote(JsonNull())",
                                              "successors": []
                                            },
                                            {
                                              "id": 133924146739808,
                                              "label": "let (ts, next) = parseValue(t, 0)",
                                              "successors": [
                                                {
                                                  "id": 133924146739856,
                                                  "label": "if (next != t.size )",
                                                  "successors": [
                                                    {
                                                      "id": 133924146740240,
                                                      "label": "diagReport(DiagReportLevel.ERROR, t, \"Unexpected token after initial value\",\n                    \"Unexpected token after initial value\")",
                                                      "successors": [
                                                        {
                                                          "id": 133924146740288,
                                                          "label": "throw Exception(\"Unexpected token after initial value\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924146740000,
                                                              "label": "return ts",
                                                              "successors": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924146740000
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "JsonState",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    }
  ]
}