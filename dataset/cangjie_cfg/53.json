{
  "name": "53.cj",
  "type": "File",
  "blocks": [],
  "functions": [],
  "classes": [
    {
      "name": "_DEFAULT_CANG_CLASS",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "TokenizerType",
      "type": "Class",
      "blocks": [],
      "functions": [],
      "classes": []
    },
    {
      "name": "Tokenizer",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "createTokenizer",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168587616,
              "label": "",
              "successors": [
                {
                  "id": 133924150021232,
                  "label": "match (tokenizer_type )",
                  "successors": [
                    {
                      "id": 133924150021712,
                      "label": "let tokenizer = HuggingfaceTokenizer()",
                      "successors": [
                        {
                          "id": 133924150021760,
                          "label": ";",
                          "successors": [
                            {
                              "id": 133924150021808,
                              "label": "tokenizer.load_vocab(file_path: file_path)",
                              "successors": [
                                {
                                  "id": 133924150021856,
                                  "label": ";",
                                  "successors": [
                                    {
                                      "id": 133924150021904,
                                      "label": "println(\"tokenizer load ok\")",
                                      "successors": [
                                        {
                                          "id": 133924150021952,
                                          "label": ";",
                                          "successors": [
                                            {
                                              "id": 133924150022000,
                                              "label": "return tokenizer",
                                              "successors": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924150022288,
                      "label": "throw Exception(\"unsupport tokenizer type\")",
                      "successors": [
                        {
                          "id": 133924150022336,
                          "label": ";",
                          "successors": [
                            {
                              "id": 133924168587664,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "is_stop",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168588240,
              "label": "",
              "successors": [
                {
                  "id": 133924150022384,
                  "label": "return stop_tokens_.contains(token)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "is_special",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168588864,
              "label": "",
              "successors": [
                {
                  "id": 133924150022528,
                  "label": "return special_tokens_.contains(token)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "encode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168589632,
              "label": "",
              "successors": [
                {
                  "id": 133924150022720,
                  "label": "if (add_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150022864,
                      "label": "println(\"Waring! encode is virtual function in class Tokenizer, don't to use it!\")",
                      "successors": [
                        {
                          "id": 133924150022912,
                          "label": "return Array<UInt32>()",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924150022768,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150022864
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "decode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168590400,
              "label": "",
              "successors": [
                {
                  "id": 133924150023200,
                  "label": "if (skip_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150023344,
                      "label": "println(\"Waring! decode is virtual function in class Tokenizer, don't to use it!\")",
                      "successors": [
                        {
                          "id": 133924150023392,
                          "label": "return \"\"",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924150023248,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150023344
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "load_special",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168591168,
              "label": "",
              "successors": [
                {
                  "id": 133924150023632,
                  "label": "println(\"Waring! load_special is virtual function in class Tokenizer, don't to use it!\")",
                  "successors": [
                    {
                      "id": 133924168591216,
                      "label": "return",
                      "successors": []
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "load_vocab",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168592032,
              "label": "",
              "successors": [
                {
                  "id": 133924150023776,
                  "label": "if (!File.exists(file_path) && buffer.size == 0 )",
                  "successors": [
                    {
                      "id": 133924150024112,
                      "label": "throw Exception(\"${file_path} not exists and buffer is empty\")",
                      "successors": [
                        {
                          "id": 133924150023872,
                          "label": "println(\"Waring! load_vocab is virtual function in class Tokenizer, don't to use it!\")",
                          "successors": [
                            {
                              "id": 133924168592080,
                              "label": "return",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924150023872
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "Tiktoken",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "decode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168593424,
              "label": "",
              "successors": [
                {
                  "id": 133924150024208,
                  "label": "if (skip_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150024352,
                      "label": "return \"\"",
                      "successors": []
                    },
                    {
                      "id": 133924150024256,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150024352
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "load_vocab",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168594432,
              "label": "",
              "successors": [
                {
                  "id": 133924150024592,
                  "label": "if (!File.exists(file_path) && buffer.size == 0 )",
                  "successors": [
                    {
                      "id": 133924150024928,
                      "label": "throw Exception(\"${file_path} not exists and buffer is empty\")",
                      "successors": [
                        {
                          "id": 133924168594480,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    },
                    {
                      "id": 133924168594480
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "encode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168595152,
              "label": "",
              "successors": [
                {
                  "id": 133924150024880,
                  "label": "if (add_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150025120,
                      "label": "var token_ids: ArrayList<UInt32> = ArrayList<UInt32>()",
                      "successors": [
                        {
                          "id": 133924150025264,
                          "label": "if (str.isEmpty() )",
                          "successors": [
                            {
                              "id": 133924150025648,
                              "label": "return token_ids.toArray()",
                              "successors": []
                            },
                            {
                              "id": 133924150025456,
                              "label": "var i: Int64 = 0",
                              "successors": [
                                {
                                  "id": 133924150025696,
                                  "label": "var longest_match_len: Int64 = 0",
                                  "successors": [
                                    {
                                      "id": 133924150025792,
                                      "label": "var longest_match: String = \"\"",
                                      "successors": [
                                        {
                                          "id": 133924150025888,
                                          "label": "var token: String = \"\"",
                                          "successors": [
                                            {
                                              "id": 133924150025936,
                                              "label": "while (i < str.size )",
                                              "successors": [
                                                {
                                                  "id": 133924150026272,
                                                  "label": "var len = str.size - i",
                                                  "successors": [
                                                    {
                                                      "id": 133924150026320,
                                                      "label": "while (len > 0 )",
                                                      "successors": [
                                                        {
                                                          "id": 133924150026656,
                                                          "label": "token = str[i..i + len]",
                                                          "successors": [
                                                            {
                                                              "id": 133924150026704,
                                                              "label": "if (this.vocab_.contains(token) && len > longest_match_len )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150027136,
                                                                  "label": "longest_match_len = len",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150027184,
                                                                      "label": "longest_match = token",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150026848,
                                                                          "label": "len--",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150026320
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924150026848
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150026464,
                                                          "label": "if (!longest_match.isEmpty() )",
                                                          "successors": [
                                                            {
                                                              "id": 133924150027472,
                                                              "label": "token_ids.append(this.vocab_[longest_match])",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150027520,
                                                                  "label": "i += longest_match_len",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150025936
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "id": 133924150027664,
                                                              "label": "eprintln(\"Error: No encoding found for the sequence starting at position ${i}\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150025936
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924150026080,
                                                  "label": "return token_ids.toArray()",
                                                  "successors": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924150024976,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150025120
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "BertTokenizer",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "encode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924168596448,
              "label": "",
              "successors": [
                {
                  "id": 133924150027280,
                  "label": "if (add_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150027760,
                      "label": "return Array<UInt32>()",
                      "successors": []
                    },
                    {
                      "id": 133924150027616,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150027760
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "HashPairString",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166647920,
              "label": "",
              "successors": [
                {
                  "id": 133924150028000,
                  "label": "this.first = p[0]",
                  "successors": [
                    {
                      "id": 133924150028048,
                      "label": "this.second = p[1]",
                      "successors": [
                        {
                          "id": 133924166647968,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "hashCode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166648496,
              "label": "",
              "successors": [
                {
                  "id": 133924150028288,
                  "label": "let hash1: Int64 = this.first.hashCode()",
                  "successors": [
                    {
                      "id": 133924150028384,
                      "label": "let hash2: Int64 = this.second.hashCode()",
                      "successors": [
                        {
                          "id": 133924150028432,
                          "label": "if (hash1 != hash2 )",
                          "successors": [
                            {
                              "id": 133924150028816,
                              "label": "return hash1 ^ hash2",
                              "successors": []
                            },
                            {
                              "id": 133924150028960,
                              "label": "return hash1",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "HashPairUInt32",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166649744,
              "label": "",
              "successors": [
                {
                  "id": 133924150028624,
                  "label": "this.first = p[0]",
                  "successors": [
                    {
                      "id": 133924150028912,
                      "label": "this.second = p[1]",
                      "successors": [
                        {
                          "id": 133924166649792,
                          "label": "return",
                          "successors": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "toString",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166650320,
              "label": "",
              "successors": [
                {
                  "id": 133924150029104,
                  "label": "return \"(${this.first}, ${this.second})\"",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "hashCode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166650896,
              "label": "",
              "successors": [
                {
                  "id": 133924150029344,
                  "label": "let hash1: Int64 = this.first.hashCode()",
                  "successors": [
                    {
                      "id": 133924150029440,
                      "label": "let hash2: Int64 = this.second.hashCode()",
                      "successors": [
                        {
                          "id": 133924150029488,
                          "label": "if (hash1 != hash2 )",
                          "successors": [
                            {
                              "id": 133924150029872,
                              "label": "return hash1 ^ hash2",
                              "successors": []
                            },
                            {
                              "id": 133924150030016,
                              "label": "return hash1",
                              "successors": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    },
    {
      "name": "HuggingfaceTokenizer",
      "type": "Class",
      "blocks": [],
      "functions": [
        {
          "name": "constructor",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166654448,
              "label": "",
              "successors": [
                {
                  "id": 133924150029680,
                  "label": "this.vocab = vocab",
                  "successors": [
                    {
                      "id": 133924150029968,
                      "label": "for ((token, id) in this.vocab) {\n      this.vocab_r.put(id, token);\n    }\n    (this.byte2rune, this.rune2byte) = this.get_byte_char()",
                      "successors": [
                        {
                          "id": 133924150030064,
                          "label": "let prefix_len = continuing_subword_prefix.getOrDefault({=>\"\"}).size",
                          "successors": [
                            {
                              "id": 133924150030112,
                              "label": "var i: UInt32 = 0",
                              "successors": [
                                {
                                  "id": 133924150030160,
                                  "label": "for ((a, b) in merge_list )",
                                  "successors": [
                                    {
                                      "id": 133924150030448,
                                      "label": "let a_id: UInt32 = this.vocab.get(a).getOrThrow()",
                                      "successors": [
                                        {
                                          "id": 133924150030496,
                                          "label": "let b_id: UInt32 = this.vocab.get(b).getOrThrow()",
                                          "successors": [
                                            {
                                              "id": 133924150030544,
                                              "label": "let new_token: String = \"${a}${b[prefix_len..]}\"",
                                              "successors": [
                                                {
                                                  "id": 133924150030592,
                                                  "label": "let new_id: UInt32 = this.vocab.get(new_token).getOrThrow()",
                                                  "successors": [
                                                    {
                                                      "id": 133924150030640,
                                                      "label": "this.merges.put(HashPairUInt32((a_id, b_id)), (i, new_id))",
                                                      "successors": [
                                                        {
                                                          "id": 133924150030688,
                                                          "label": "this.bpe_ranks_.put(HashPairString((a, b)), i)",
                                                          "successors": [
                                                            {
                                                              "id": 133924150030736,
                                                              "label": "i++",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150030160
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924150030256,
                                      "label": "this.merges = merges",
                                      "successors": [
                                        {
                                          "id": 133924150030400,
                                          "label": "this.dropout = dropout",
                                          "successors": [
                                            {
                                              "id": 133924150030784,
                                              "label": "this.unk_token = unk_token",
                                              "successors": [
                                                {
                                                  "id": 133924150030832,
                                                  "label": "this.continuing_subword_prefix = continuing_subword_prefix",
                                                  "successors": [
                                                    {
                                                      "id": 133924150030880,
                                                      "label": "this.end_of_word_suffix = end_of_word_suffix",
                                                      "successors": [
                                                        {
                                                          "id": 133924150030928,
                                                          "label": "this.fuse_unk = fuse_unk",
                                                          "successors": [
                                                            {
                                                              "id": 133924150030976,
                                                              "label": "this.byte_fallback = byte_fallback",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150031024,
                                                                  "label": "this.ignore_merges = ignore_merges",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924166654496,
                                                                      "label": "return",
                                                                      "successors": []
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "get_byte_char",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166654592,
              "label": "",
              "successors": [
                {
                  "id": 133924150031216,
                  "label": "var bs: ArrayList<UInt8> = ArrayList<UInt8>()",
                  "successors": [
                    {
                      "id": 133924150031312,
                      "label": "var cs: ArrayList<UInt32> = ArrayList<UInt32>()",
                      "successors": [
                        {
                          "id": 133924150031408,
                          "label": "var temp_start: Rune = '!'",
                          "successors": [
                            {
                              "id": 133924150031504,
                              "label": "var temp_end: Rune = '~'",
                              "successors": [
                                {
                                  "id": 133924150031552,
                                  "label": "for (x in UInt32(temp_start)..=UInt32(temp_end) )",
                                  "successors": [
                                    {
                                      "id": 133924150031888,
                                      "label": "bs.append(UInt8(x))",
                                      "successors": [
                                        {
                                          "id": 133924150031936,
                                          "label": "cs.append(x)",
                                          "successors": [
                                            {
                                              "id": 133924150031552
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "id": 133924150031696,
                                      "label": "temp_start = '\\u{A1}'",
                                      "successors": [
                                        {
                                          "id": 133924150031840,
                                          "label": "temp_end = '\\u{AC}'",
                                          "successors": [
                                            {
                                              "id": 133924150031984,
                                              "label": "for (x in UInt32(temp_start)..=UInt32(temp_end) )",
                                              "successors": [
                                                {
                                                  "id": 133924150032320,
                                                  "label": "bs.append(UInt8(x))",
                                                  "successors": [
                                                    {
                                                      "id": 133924150032368,
                                                      "label": "cs.append(x)",
                                                      "successors": [
                                                        {
                                                          "id": 133924150031984
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": 133924150032128,
                                                  "label": "temp_start = '\\u{AE}'",
                                                  "successors": [
                                                    {
                                                      "id": 133924150032272,
                                                      "label": "temp_end = '\\u{FF}'",
                                                      "successors": [
                                                        {
                                                          "id": 133924150032416,
                                                          "label": "for (x in UInt32(temp_start)..=UInt32(temp_end) )",
                                                          "successors": [
                                                            {
                                                              "id": 133924150032752,
                                                              "label": "bs.append(UInt8(x))",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150032800,
                                                                  "label": "cs.append(x)",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150032416
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "id": 133924150032704,
                                                              "label": "var n: UInt32 = 0",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150032848,
                                                                  "label": "for (b in 0_u 8..=255 _u8 )",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150033136,
                                                                      "label": "if (!bs.contains(b) )",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150033520,
                                                                          "label": "bs.append(b)",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150033568,
                                                                              "label": "cs.append(UInt32(pow(2.0, 8)) + n)",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150033616,
                                                                                  "label": "n += 1",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150032848
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "id": 133924150032848
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "id": 133924150033088,
                                                                      "label": "var result: HashMap<UInt8, Rune> = HashMap<UInt8, Rune>()",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150033328,
                                                                          "label": "var result_r: HashMap<Rune, UInt8> = HashMap<Rune, UInt8>()",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150033472,
                                                                              "label": "for ((k, v) in bs.iterator().zip(cs.iterator()) )",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150033952,
                                                                                  "label": "result.put(k, Rune(v))",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150034000,
                                                                                      "label": "result_r.put(Rune(v), k)",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150033472
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "id": 133924150033760,
                                                                                  "label": "return (result, result_r)",
                                                                                  "successors": []
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "load_vocab",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166656752,
              "label": "",
              "successors": [
                {
                  "id": 133924150034096,
                  "label": "",
                  "successors": [
                    {
                      "id": 133924150182000,
                      "label": "throw Exception(\"${file_path} not exists and buffer is empty\")",
                      "successors": [
                        {
                          "id": 133924150034192,
                          "label": "let json_buffer: Array<UInt8> = if (!File.exists(file_path) && buffer.size == 0) {\n      throw Exception(\"${file_path} not exists and buffer is empty\");\n    } else if (File.exists(file_path)) {\n      let file = File.openRead(file_path);\n      let temp_buffer = file.readToEnd();\n      file.close();\n      temp_buffer\n    } else {\n      buffer\n    }",
                          "successors": [
                            {
                              "id": 133924150034240,
                              "label": "var byte_stream = ByteArrayStream()",
                              "successors": [
                                {
                                  "id": 133924150034288,
                                  "label": "byte_stream.write(json_buffer)",
                                  "successors": [
                                    {
                                      "id": 133924150182096,
                                      "label": "let json_reader = JsonReader(byte_stream)",
                                      "successors": [
                                        {
                                          "id": 133924150182240,
                                          "label": "let tokenizer_config = TokenizerJson.fromJson(json_reader)",
                                          "successors": [
                                            {
                                              "id": 133924150182288,
                                              "label": "(this.byte2rune, this.rune2byte)",
                                              "successors": [
                                                {
                                                  "id": 133924150182336,
                                                  "label": " =",
                                                  "successors": [
                                                    {
                                                      "id": 133924150182768,
                                                      "label": "this.get_byte_char()",
                                                      "successors": [
                                                        {
                                                          "id": 133924150182864,
                                                          "label": "this.vocab = tokenizer_config.model.vocab",
                                                          "successors": [
                                                            {
                                                              "id": 133924150182912,
                                                              "label": "for (add_token in tokenizer_config.added_tokens )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150183200,
                                                                  "label": "this.vocab.put(add_token.content, add_token.id)",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150183248,
                                                                      "label": "this.special_id_set.put(add_token.content)",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150182912
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924150183008,
                                                                  "label": "if (this.unk_token.isSome() )",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150183536,
                                                                      "label": "this.unk_token_id = this.vocab.get(this.unk_token.getOrThrow())",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150183296,
                                                                          "label": "for ((token, id) in tokenizer_config.model.vocab )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150183728,
                                                                              "label": "this.vocab_r.put(id, token)",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150183296
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924150183488,
                                                                              "label": "var str_list: Array<String> = Array<String>()",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150183680,
                                                                                  "label": "var merge_list: ArrayList<(String, String)> = ArrayList<(String, String)>()",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150183776,
                                                                                      "label": "for (line in tokenizer_config.model.merges )",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150184064,
                                                                                          "label": "str_list = line.split(\" \")",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150184112,
                                                                                              "label": "if (str_list.size != 2 )",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924150184448,
                                                                                                  "label": "throw Exception(\"merge line size must be 2\")",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924150184208,
                                                                                                      "label": "merge_list.append((str_list[0], str_list[1]))",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150183776
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                },
                                                                                                {
                                                                                                  "id": 133924150184208
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        },
                                                                                        {
                                                                                          "id": 133924150183872,
                                                                                          "label": "let prefix_len = tokenizer_config.model.continuing_subword_prefix.size",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150184016,
                                                                                              "label": "var i: UInt32 = 0",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924150184256,
                                                                                                  "label": "for ((a, b) in merge_list )",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924150184688,
                                                                                                      "label": "let a_id: UInt32 = this.vocab.get(a).getOrThrow()",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150184736,
                                                                                                          "label": "let b_id: UInt32 = this.vocab.get(b).getOrThrow()",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150184784,
                                                                                                              "label": "let new_token: String = \"${a}${b[prefix_len..]}\"",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150184832,
                                                                                                                  "label": "let new_id: UInt32 = this.vocab.get(new_token).getOrThrow()",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924150184880,
                                                                                                                      "label": "this.merges.put(HashPairUInt32((a_id, b_id)), (i, new_id))",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924150184928,
                                                                                                                          "label": "this.bpe_ranks_.put(HashPairString((a, b)), i)",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924150184976,
                                                                                                                              "label": "i++",
                                                                                                                              "successors": [
                                                                                                                                {
                                                                                                                                  "id": 133924150184256
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    }
                                                                                                                  ]
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    },
                                                                                                    {
                                                                                                      "id": 133924150184496,
                                                                                                      "label": "this.dropout = tokenizer_config.model.dropout",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150184640,
                                                                                                          "label": "this.unk_token = tokenizer_config.model.unk_token",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150185024,
                                                                                                              "label": "this.continuing_subword_prefix = tokenizer_config.model.continuing_subword_prefix",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150185072,
                                                                                                                  "label": "this.end_of_word_suffix = tokenizer_config.model.end_of_word_suffix",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924150185120,
                                                                                                                      "label": "this.fuse_unk = tokenizer_config.model.fuse_unk",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924150185168,
                                                                                                                          "label": "this.byte_fallback = tokenizer_config.model.byte_fallback",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924166656800,
                                                                                                                              "label": "return",
                                                                                                                              "successors": []
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    }
                                                                                                                  ]
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "id": 133924150183296
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924150182144,
                      "label": "if (File.exists(file_path) )",
                      "successors": [
                        {
                          "id": 133924150182528,
                          "label": "let file = File.openRead(file_path)",
                          "successors": [
                            {
                              "id": 133924150182576,
                              "label": "let temp_buffer = file.readToEnd()",
                              "successors": [
                                {
                                  "id": 133924150182624,
                                  "label": "file.close()",
                                  "successors": [
                                    {
                                      "id": 133924150182672,
                                      "label": "temp_buffer",
                                      "successors": [
                                        {
                                          "id": 133924150034192
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924150182816,
                          "label": "buffer",
                          "successors": [
                            {
                              "id": 133924150034192
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "token_to_id",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166657280,
              "label": "",
              "successors": [
                {
                  "id": 133924150185312,
                  "label": "return this.vocab.get(token)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "id_to_token",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166658000,
              "label": "",
              "successors": [
                {
                  "id": 133924150185456,
                  "label": "return this.vocab_r.get(id)",
                  "successors": []
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "apply_chat_template",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166658720,
              "label": "",
              "successors": [
                {
                  "id": 133924150185600,
                  "label": "var result_str = \"\"",
                  "successors": [
                    {
                      "id": 133924150185648,
                      "label": "if (messages.size == 0 )",
                      "successors": [
                        {
                          "id": 133924150186032,
                          "label": "return result_str",
                          "successors": []
                        },
                        {
                          "id": 133924150185792,
                          "label": "match (messages[0].role )",
                          "successors": [
                            {
                              "id": 133924150186416,
                              "label": "result_str += \"<|im_start|>system\\n${messages[0].content}<|im_end|>\\n\"",
                              "successors": [
                                {
                                  "id": 133924150186464,
                                  "label": "messages.remove(0)",
                                  "successors": [
                                    {
                                      "id": 133924150186512,
                                      "label": ";",
                                      "successors": [
                                        {
                                          "id": 133924150186080,
                                          "label": "if (messages.size % 2 != 1 )",
                                          "successors": [
                                            {
                                              "id": 133924150187184,
                                              "label": "throw Exception(\"input times - assistant times must = 1\")",
                                              "successors": [
                                                {
                                                  "id": 133924150186944,
                                                  "label": "for (i in 0..messages.size )",
                                                  "successors": [
                                                    {
                                                      "id": 133924150187376,
                                                      "label": "if (i % 2 == 0 )",
                                                      "successors": [
                                                        {
                                                          "id": 133924150187760,
                                                          "label": "result_str += \"<|im_start|>user\\n${messages[i].content}<|im_end|>\\n\"",
                                                          "successors": [
                                                            {
                                                              "id": 133924150186944
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150187904,
                                                          "label": "result_str += \"<|im_start|>assistant\\n${messages[i].content}<|im_end|>\\n\"",
                                                          "successors": [
                                                            {
                                                              "id": 133924150186944
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "id": 133924150187136,
                                                      "label": "if (add_generation_prompt )",
                                                      "successors": [
                                                        {
                                                          "id": 133924150188048,
                                                          "label": "result_str += \"<|im_start|>assistant\\n\"",
                                                          "successors": [
                                                            {
                                                              "id": 133924150187520,
                                                              "label": "return result_str",
                                                              "successors": []
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150187520
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924150186944
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924150186800,
                              "label": "()",
                              "successors": [
                                {
                                  "id": 133924150186080
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "decode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166659488,
              "label": "",
              "successors": [
                {
                  "id": 133924150188096,
                  "label": "let result_str_list = Array<String>(token_ids.size, {_ => \"\"})",
                  "successors": [
                    {
                      "id": 133924150188144,
                      "label": "for ((i, token_id) in token_ids.iterator().enumerate() )",
                      "successors": [
                        {
                          "id": 133924150188432,
                          "label": "result_str_list[i] = this.id_to_token(token_id).getOrThrow()",
                          "successors": [
                            {
                              "id": 133924150188144
                            }
                          ]
                        },
                        {
                          "id": 133924150188240,
                          "label": "let data_array = ArrayList<UInt8>()",
                          "successors": [
                            {
                              "id": 133924150188384,
                              "label": "for (result_str in result_str_list )",
                              "successors": [
                                {
                                  "id": 133924150188768,
                                  "label": "if (skip_special_tokens && this.special_id_set.contains(result_str) )",
                                  "successors": [
                                    {
                                      "id": 133924150188384
                                    },
                                    {
                                      "id": 133924150189152,
                                      "label": "continue",
                                      "successors": [
                                        {
                                          "id": 133924150188912,
                                          "label": "for (rune in result_str.toRuneArray() )",
                                          "successors": [
                                            {
                                              "id": 133924150189440,
                                              "label": "let temp_byte: UInt8 = this.rune2byte[rune]",
                                              "successors": [
                                                {
                                                  "id": 133924150189488,
                                                  "label": "data_array.append(temp_byte)",
                                                  "successors": [
                                                    {
                                                      "id": 133924150188912
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": 133924150188384
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": 133924150188576,
                                  "label": "return String.fromUtf8(data_array.toArray())",
                                  "successors": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "encode",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166660256,
              "label": "",
              "successors": [
                {
                  "id": 133924150189200,
                  "label": "if (add_special_tokens )",
                  "successors": [
                    {
                      "id": 133924150189632,
                      "label": "var special_pattern: String = \"(\"",
                      "successors": [
                        {
                          "id": 133924150189776,
                          "label": "for ((idx, special_str) in this.special_id_set.iterator().enumerate() )",
                          "successors": [
                            {
                              "id": 133924150190064,
                              "label": "if (idx < this.special_id_set.size - 1 )",
                              "successors": [
                                {
                                  "id": 133924150190448,
                                  "label": "special_pattern += special_str.replace(\"|\", \"\\\\|\") + \"|\"",
                                  "successors": [
                                    {
                                      "id": 133924150189776
                                    }
                                  ]
                                },
                                {
                                  "id": 133924150190592,
                                  "label": "special_pattern += special_str.replace(\"|\", \"\\\\|\") + \")\"",
                                  "successors": [
                                    {
                                      "id": 133924150189776
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": 133924150190016,
                              "label": "let special_re: Regex = Regex(special_pattern)",
                              "successors": [
                                {
                                  "id": 133924150190160,
                                  "label": "let special_token_map = HashMap<Int64, UInt32>()",
                                  "successors": [
                                    {
                                      "id": 133924150190208,
                                      "label": "let special_index_list = ArrayList<(Int64, Int64)>()",
                                      "successors": [
                                        {
                                          "id": 133924150190256,
                                          "label": "let added_special_index = HashSet<Int64>()",
                                          "successors": [
                                            {
                                              "id": 133924150190544,
                                              "label": "let special_array = special_re.matcher(str).findAll() ?? Array<MatchData>()",
                                              "successors": [
                                                {
                                                  "id": 133924150190640,
                                                  "label": "var text = str",
                                                  "successors": [
                                                    {
                                                      "id": 133924150190688,
                                                      "label": "for (special in special_array )",
                                                      "successors": [
                                                        {
                                                          "id": 133924150190976,
                                                          "label": "let special_token = special.matchStr()",
                                                          "successors": [
                                                            {
                                                              "id": 133924150191024,
                                                              "label": "println(\"special token: ${special_token}\")",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150191072,
                                                                  "label": "special_token_map.put(\n        special.matchPosition().start,\n        this.vocab.get(special_token).getOrThrow()\n      )",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150191120,
                                                                      "label": "special_index_list.append((\n        special.matchPosition().start,  \n        special.matchPosition().end  \n      ))",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150191168,
                                                                          "label": "var empty_token = \"\"",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150191216,
                                                                              "label": "var temp_i = 0",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150191264,
                                                                                  "label": "while (temp_i < special_token.size )",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150191648,
                                                                                      "label": "empty_token += \" \"",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150191696,
                                                                                          "label": "temp_i++",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150191264
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    },
                                                                                    {
                                                                                      "id": 133924150191456,
                                                                                      "label": "text = text.replace(special_token, empty_token)",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150190688
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "id": 133924150190928,
                                                          "label": "let text_re: Regex = Regex(\"('s|'t|'re|'ve|'m|'ll|'d| ?[[:alpha:]]+| ?[[:digit:]]+| ?[^\\\\s\\\\w]+|\\\\s+)\")",
                                                          "successors": [
                                                            {
                                                              "id": 133924150191600,
                                                              "label": "let match_array = text_re.matcher(text).findAll() ?? Array<MatchData>()",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150191744,
                                                                  "label": "var ids = ArrayList<UInt32>()",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150191792,
                                                                      "label": "var special_index = 0",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150191840,
                                                                          "label": "for (token in match_array )",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150192128,
                                                                              "label": "let temp_start = token.matchPosition().start",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150192176,
                                                                                  "label": "let temp_end = token.matchPosition().end",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150192224,
                                                                                      "label": "var temp_si = special_index",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150192272,
                                                                                          "label": "var is_special = false",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150192320,
                                                                                              "label": "while (temp_si < special_index_list.size )",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924150192656,
                                                                                                  "label": "let (s_start, s_end) = special_index_list[temp_si]",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924150192704,
                                                                                                      "label": "if (temp_end <= s_start )",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150192464,
                                                                                                          "label": "if (is_special )",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150191840
                                                                                                            },
                                                                                                            {
                                                                                                              "id": 133924150194240,
                                                                                                              "label": "continue",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150193280,
                                                                                                                  "label": "let token_str = token.matchStr()",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924150194096,
                                                                                                                      "label": "var temp_str: String = \"\"",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924150194336,
                                                                                                                          "label": "var token_list = ArrayList<String>()",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924150194384,
                                                                                                                              "label": "for (b in token_str.toArray() )",
                                                                                                                              "successors": [
                                                                                                                                {
                                                                                                                                  "id": 133924150194672,
                                                                                                                                  "label": "let char = this.byte2rune[b]",
                                                                                                                                  "successors": [
                                                                                                                                    {
                                                                                                                                      "id": 133924150194720,
                                                                                                                                      "label": "temp_str += char.toString()",
                                                                                                                                      "successors": [
                                                                                                                                        {
                                                                                                                                          "id": 133924150194768,
                                                                                                                                          "label": "token_list.append(char.toString())",
                                                                                                                                          "successors": [
                                                                                                                                            {
                                                                                                                                              "id": 133924150194384
                                                                                                                                            }
                                                                                                                                          ]
                                                                                                                                        }
                                                                                                                                      ]
                                                                                                                                    }
                                                                                                                                  ]
                                                                                                                                },
                                                                                                                                {
                                                                                                                                  "id": 133924150194480,
                                                                                                                                  "label": "if (this.cache.contains(temp_str) )",
                                                                                                                                  "successors": [
                                                                                                                                    {
                                                                                                                                      "id": 133924150195104,
                                                                                                                                      "label": "let result_str_list = this.cache[temp_str]",
                                                                                                                                      "successors": [
                                                                                                                                        {
                                                                                                                                          "id": 133924150195152,
                                                                                                                                          "label": "for (result_str in result_str_list )",
                                                                                                                                          "successors": [
                                                                                                                                            {
                                                                                                                                              "id": 133924150195440,
                                                                                                                                              "label": "ids.append(this.vocab[result_str])",
                                                                                                                                              "successors": [
                                                                                                                                                {
                                                                                                                                                  "id": 133924150195152
                                                                                                                                                }
                                                                                                                                              ]
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                              "id": 133924150195248,
                                                                                                                                              "label": "continue",
                                                                                                                                              "successors": [
                                                                                                                                                {
                                                                                                                                                  "id": 133924150194864,
                                                                                                                                                  "label": "let str_list = this.bpe(token_list.toArray())",
                                                                                                                                                  "successors": [
                                                                                                                                                    {
                                                                                                                                                      "id": 133924150194912,
                                                                                                                                                      "label": "this.cache.put(temp_str, str_list)",
                                                                                                                                                      "successors": [
                                                                                                                                                        {
                                                                                                                                                          "id": 133924150195056,
                                                                                                                                                          "label": "for (temp_str in str_list )",
                                                                                                                                                          "successors": [
                                                                                                                                                            {
                                                                                                                                                              "id": 133924150195728,
                                                                                                                                                              "label": "let new_token = this.token_to_id(temp_str).getOrDefault({=>this.unk_token_id.getOrThrow()})",
                                                                                                                                                              "successors": [
                                                                                                                                                                {
                                                                                                                                                                  "id": 133924150195776,
                                                                                                                                                                  "label": "ids.append(new_token)",
                                                                                                                                                                  "successors": [
                                                                                                                                                                    {
                                                                                                                                                                      "id": 133924150195056
                                                                                                                                                                    }
                                                                                                                                                                  ]
                                                                                                                                                                }
                                                                                                                                                              ]
                                                                                                                                                            },
                                                                                                                                                            {
                                                                                                                                                              "id": 133924150191840
                                                                                                                                                            }
                                                                                                                                                          ]
                                                                                                                                                        }
                                                                                                                                                      ]
                                                                                                                                                    }
                                                                                                                                                  ]
                                                                                                                                                }
                                                                                                                                              ]
                                                                                                                                            }
                                                                                                                                          ]
                                                                                                                                        }
                                                                                                                                      ]
                                                                                                                                    },
                                                                                                                                    {
                                                                                                                                      "id": 133924150194864
                                                                                                                                    }
                                                                                                                                  ]
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    }
                                                                                                                  ]
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        },
                                                                                                        {
                                                                                                          "id": 133924150192848,
                                                                                                          "label": "if (temp_start >= s_start && temp_start < s_end )",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150193328,
                                                                                                              "label": "if (!added_special_index.contains(temp_si) )",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150193760,
                                                                                                                  "label": "let special_token_id = special_token_map[s_start]",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924150193808,
                                                                                                                      "label": "ids.append(special_token_id)",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924150193856,
                                                                                                                          "label": "special_index = temp_si - 1",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924150193904,
                                                                                                                              "label": "if (special_index < 0 )",
                                                                                                                              "successors": [
                                                                                                                                {
                                                                                                                                  "id": 133924150194288,
                                                                                                                                  "label": "special_index = 0",
                                                                                                                                  "successors": [
                                                                                                                                    {
                                                                                                                                      "id": 133924150194048,
                                                                                                                                      "label": "added_special_index.put(temp_si)",
                                                                                                                                      "successors": [
                                                                                                                                        {
                                                                                                                                          "id": 133924150193472,
                                                                                                                                          "label": "is_special = true",
                                                                                                                                          "successors": [
                                                                                                                                            {
                                                                                                                                              "id": 133924150192464
                                                                                                                                            }
                                                                                                                                          ]
                                                                                                                                        }
                                                                                                                                      ]
                                                                                                                                    }
                                                                                                                                  ]
                                                                                                                                },
                                                                                                                                {
                                                                                                                                  "id": 133924150194048
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    }
                                                                                                                  ]
                                                                                                                },
                                                                                                                {
                                                                                                                  "id": 133924150193472
                                                                                                                }
                                                                                                              ]
                                                                                                            },
                                                                                                            {
                                                                                                              "id": 133924150193088,
                                                                                                              "label": "temp_si ++",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150192320
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                },
                                                                                                {
                                                                                                  "id": 133924150192464
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            },
                                                                            {
                                                                              "id": 133924150191936,
                                                                              "label": "return ids.toArray()",
                                                                              "successors": []
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": 133924150189344,
                      "label": "",
                      "successors": [
                        {
                          "id": 133924150189632
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "get_pairs",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166660832,
              "label": "",
              "successors": [
                {
                  "id": 133924150195824,
                  "label": "var pairs: ArrayList<HashPairString> = ArrayList<HashPairString>()",
                  "successors": [
                    {
                      "id": 133924150195872,
                      "label": "if (tokens.size > 1 )",
                      "successors": [
                        {
                          "id": 133924150196304,
                          "label": "var previous: String = tokens[0]",
                          "successors": [
                            {
                              "id": 133924150196400,
                              "label": "var next: String = \" \"",
                              "successors": [
                                {
                                  "id": 133924150196496,
                                  "label": "var i: Int64 = 1",
                                  "successors": [
                                    {
                                      "id": 133924150196544,
                                      "label": "while (i < tokens.size )",
                                      "successors": [
                                        {
                                          "id": 133924150196880,
                                          "label": "next = tokens[i]",
                                          "successors": [
                                            {
                                              "id": 133924150196928,
                                              "label": "pairs.append(HashPairString((previous.toString(), next.toString())))",
                                              "successors": [
                                                {
                                                  "id": 133924150196976,
                                                  "label": "previous = next",
                                                  "successors": [
                                                    {
                                                      "id": 133924150197024,
                                                      "label": "i++",
                                                      "successors": [
                                                        {
                                                          "id": 133924150196544
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924150196016,
                                          "label": "return pairs.toArray()",
                                          "successors": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": 133924150196016
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        },
        {
          "name": "bpe",
          "type": "Function",
          "blocks": [
            {
              "id": 133924166661456,
              "label": "",
              "successors": [
                {
                  "id": 133924150196688,
                  "label": "var word = token_list",
                  "successors": [
                    {
                      "id": 133924150196832,
                      "label": "if (word.size == 0 )",
                      "successors": [
                        {
                          "id": 133924150197408,
                          "label": "return word",
                          "successors": []
                        },
                        {
                          "id": 133924150197216,
                          "label": "let result: ArrayList<String> = ArrayList<String>()",
                          "successors": [
                            {
                              "id": 133924150197360,
                              "label": "func left_index(data_list: Array<String>, i: Int64, target: String): Int64 {\n      var ii = i;\n      while(ii < data_list.size) {\n        if (data_list[ii] == target) {\n          return ii;\n        }\n        ii++;\n      }\n      return -1;\n    }",
                              "successors": [
                                {
                                  "id": 133924150197504,
                                  "label": "var pairs: Array<HashPairString> = this.get_pairs(word)",
                                  "successors": [
                                    {
                                      "id": 133924150197552,
                                      "label": "while (true )",
                                      "successors": [
                                        {
                                          "id": 133924150197936,
                                          "label": "var merged: HashSet<Int32> = HashSet<Int32>()",
                                          "successors": [
                                            {
                                              "id": 133924150198032,
                                              "label": "var min_score:UInt32 =UInt32.Max",
                                              "successors": [
                                                {
                                                  "id": 133924150198128,
                                                  "label": "var to_merge: Int64 = -1",
                                                  "successors": [
                                                    {
                                                      "id": 133924150198224,
                                                      "label": "var i: Int64 = 0",
                                                      "successors": [
                                                        {
                                                          "id": 133924150411328,
                                                          "label": "while (i < pairs.size )",
                                                          "successors": [
                                                            {
                                                              "id": 133924150411712,
                                                              "label": "if (!merged.contains(Int32(i)) )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150412144,
                                                                  "label": "",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150412528,
                                                                      "label": "this.bpe_ranks_[pairs[i]]",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150412240,
                                                                          "label": "let score = if (this.bpe_ranks_.contains(pairs[i])) {\n            this.bpe_ranks_[pairs[i]]\n          } else {\n           UInt32.Max\n          }",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150412288,
                                                                              "label": "if (score < min_score )",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150413008,
                                                                                  "label": "min_score = score",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150413056,
                                                                                      "label": "to_merge = i",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150411856,
                                                                                          "label": "i++",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150411328
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "id": 133924150411856
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "id": 133924150412672,
                                                                      "label": "UInt32.Max",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150412240
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "id": 133924150411856
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "id": 133924150411520,
                                                              "label": "if (to_merge == -1 )",
                                                              "successors": [
                                                                {
                                                                  "id": 133924150197696,
                                                                  "label": "return word",
                                                                  "successors": []
                                                                },
                                                                {
                                                                  "id": 133924150412096,
                                                                  "label": "merged.put(Int32(to_merge))",
                                                                  "successors": [
                                                                    {
                                                                      "id": 133924150412720,
                                                                      "label": "i = 0",
                                                                      "successors": [
                                                                        {
                                                                          "id": 133924150413152,
                                                                          "label": "var new_word: ArrayList<String> = ArrayList<String>()",
                                                                          "successors": [
                                                                            {
                                                                              "id": 133924150413200,
                                                                              "label": "let first = pairs[to_merge].first",
                                                                              "successors": [
                                                                                {
                                                                                  "id": 133924150413248,
                                                                                  "label": "let second = pairs[to_merge].second",
                                                                                  "successors": [
                                                                                    {
                                                                                      "id": 133924150413296,
                                                                                      "label": "while (i < word.size )",
                                                                                      "successors": [
                                                                                        {
                                                                                          "id": 133924150413680,
                                                                                          "label": "let j = left_index(word, i, first)",
                                                                                          "successors": [
                                                                                            {
                                                                                              "id": 133924150413728,
                                                                                              "label": "if (j >= 0 )",
                                                                                              "successors": [
                                                                                                {
                                                                                                  "id": 133924150414160,
                                                                                                  "label": "new_word.appendAll(word[i..j])",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924150414208,
                                                                                                      "label": "i = j",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150413824,
                                                                                                          "label": "var temp_bool = true",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150413872,
                                                                                                              "label": "if (word[i] == first && i < word.size - 1 )",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150414640,
                                                                                                                  "label": "if (word[i + 1] == second )",
                                                                                                                  "successors": [
                                                                                                                    {
                                                                                                                      "id": 133924150415024,
                                                                                                                      "label": "new_word.append(first + second)",
                                                                                                                      "successors": [
                                                                                                                        {
                                                                                                                          "id": 133924150415072,
                                                                                                                          "label": "i += 2",
                                                                                                                          "successors": [
                                                                                                                            {
                                                                                                                              "id": 133924150415120,
                                                                                                                              "label": "temp_bool = false",
                                                                                                                              "successors": [
                                                                                                                                {
                                                                                                                                  "id": 133924150414400,
                                                                                                                                  "label": "if (temp_bool )",
                                                                                                                                  "successors": [
                                                                                                                                    {
                                                                                                                                      "id": 133924150415312,
                                                                                                                                      "label": "new_word.append(word[i])",
                                                                                                                                      "successors": [
                                                                                                                                        {
                                                                                                                                          "id": 133924150415360,
                                                                                                                                          "label": "i += 1",
                                                                                                                                          "successors": [
                                                                                                                                            {
                                                                                                                                              "id": 133924150413296
                                                                                                                                            }
                                                                                                                                          ]
                                                                                                                                        }
                                                                                                                                      ]
                                                                                                                                    },
                                                                                                                                    {
                                                                                                                                      "id": 133924150413296
                                                                                                                                    }
                                                                                                                                  ]
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      ]
                                                                                                                    },
                                                                                                                    {
                                                                                                                      "id": 133924150414400
                                                                                                                    }
                                                                                                                  ]
                                                                                                                },
                                                                                                                {
                                                                                                                  "id": 133924150414400
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                },
                                                                                                {
                                                                                                  "id": 133924150414352,
                                                                                                  "label": "new_word.appendAll(word[i..])",
                                                                                                  "successors": [
                                                                                                    {
                                                                                                      "id": 133924150413440,
                                                                                                      "label": "word = new_word.toArray()",
                                                                                                      "successors": [
                                                                                                        {
                                                                                                          "id": 133924150413488,
                                                                                                          "label": "if (word.size == 1 )",
                                                                                                          "successors": [
                                                                                                            {
                                                                                                              "id": 133924150197696
                                                                                                            },
                                                                                                            {
                                                                                                              "id": 133924150415648,
                                                                                                              "label": "pairs = this.get_pairs(word)",
                                                                                                              "successors": [
                                                                                                                {
                                                                                                                  "id": 133924150197552
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          ]
                                                                                                        }
                                                                                                      ]
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              ]
                                                                                            }
                                                                                          ]
                                                                                        },
                                                                                        {
                                                                                          "id": 133924150413440
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "id": 133924150197696
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "functions": [],
          "classes": []
        }
      ],
      "classes": []
    }
  ]
}