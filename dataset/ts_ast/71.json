{
  "type": "SourceFile",
  "label": "import { screenManager } from '../common/ScreenManager';\nimport { computeSampleSize } from '../utils/ImageUtil';\nimport { UserFileDataItem } from '../base/UserFileDataItem';\n\nexport async function getThumbnail(mediaItem: UserFileDataItem, isCurrent: boolean): Promise<PixelMap> {\n  await mediaItem.load(true);\n  let imgWidth = mediaItem.width;\n  let imgHeight = mediaItem.height;\n  let scale = generateSampleSize(imgWidth, imgHeight, isCurrent);\n  mediaItem.imgWidth = Math.ceil(mediaItem.width / scale);\n  mediaItem.imgHeight = Math.ceil(mediaItem.height / scale);\n  imgWidth = Math.ceil(imgWidth / scale);\n  imgHeight = Math.ceil(imgHeight / scale);\n  return await mediaItem.getThumbnail(imgWidth, imgHeight);\n}\n\nfunction generateSampleSize(imageWidth: number, imageHeight: number, isCurrent: boolean): number {\n  let width = vp2px(screenManager.getWinWidth());\n  let height = vp2px(screenManager.getWinHeight());\n  width = width === 0 ? screenManager.DEFAULT_WIDTH : width;\n  height = height === 0 ? screenManager.DEFAULT_HEIGHT : height;\n  let maxNumOfPixels;\n  if (isCurrent) {\n    maxNumOfPixels = 2 * width * height;\n  } else {\n    maxNumOfPixels = width * height;\n  }\n  let minSide = Math.min(width, height);\n  return computeSampleSize(imageWidth, imageHeight, minSide, maxNumOfPixels);\n}",
  "start_token": 0,
  "end_token": 255,
  "children": [
    {
      "type": "ImportDeclaration",
      "label": "import { screenManager } from '../common/ScreenManager';",
      "start_token": 1,
      "end_token": 7,
      "children": [
        {
          "type": "ImportClause",
          "label": "{ screenManager }",
          "start_token": 2,
          "end_token": 4,
          "children": [
            {
              "type": "NamedImports",
              "label": "{ screenManager }",
              "start_token": 2,
              "end_token": 4,
              "children": [
                {
                  "type": "ImportSpecifier",
                  "label": "screenManager",
                  "start_token": 3,
                  "end_token": 3,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "screenManager",
                      "start_token": 3,
                      "end_token": 3,
                      "children": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "StringLiteral",
          "label": "'../common/ScreenManager'",
          "start_token": 6,
          "end_token": 6,
          "children": []
        }
      ]
    },
    {
      "type": "ImportDeclaration",
      "label": "import { computeSampleSize } from '../utils/ImageUtil';",
      "start_token": 8,
      "end_token": 14,
      "children": [
        {
          "type": "ImportClause",
          "label": "{ computeSampleSize }",
          "start_token": 9,
          "end_token": 11,
          "children": [
            {
              "type": "NamedImports",
              "label": "{ computeSampleSize }",
              "start_token": 9,
              "end_token": 11,
              "children": [
                {
                  "type": "ImportSpecifier",
                  "label": "computeSampleSize",
                  "start_token": 10,
                  "end_token": 10,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "computeSampleSize",
                      "start_token": 10,
                      "end_token": 10,
                      "children": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "StringLiteral",
          "label": "'../utils/ImageUtil'",
          "start_token": 13,
          "end_token": 13,
          "children": []
        }
      ]
    },
    {
      "type": "ImportDeclaration",
      "label": "import { UserFileDataItem } from '../base/UserFileDataItem';",
      "start_token": 15,
      "end_token": 21,
      "children": [
        {
          "type": "ImportClause",
          "label": "{ UserFileDataItem }",
          "start_token": 16,
          "end_token": 18,
          "children": [
            {
              "type": "NamedImports",
              "label": "{ UserFileDataItem }",
              "start_token": 16,
              "end_token": 18,
              "children": [
                {
                  "type": "ImportSpecifier",
                  "label": "UserFileDataItem",
                  "start_token": 17,
                  "end_token": 17,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "UserFileDataItem",
                      "start_token": 17,
                      "end_token": 17,
                      "children": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "StringLiteral",
          "label": "'../base/UserFileDataItem'",
          "start_token": 20,
          "end_token": 20,
          "children": []
        }
      ]
    },
    {
      "type": "FunctionDeclaration",
      "label": "export async function getThumbnail(mediaItem: UserFileDataItem, isCurrent: boolean): Promise<PixelMap> {\n  await mediaItem.load(true);\n  let imgWidth = mediaItem.width;\n  let imgHeight = mediaItem.height;\n  let scale = generateSampleSize(imgWidth, imgHeight, isCurrent);\n  mediaItem.imgWidth = Math.ceil(mediaItem.width / scale);\n  mediaItem.imgHeight = Math.ceil(mediaItem.height / scale);\n  imgWidth = Math.ceil(imgWidth / scale);\n  imgHeight = Math.ceil(imgHeight / scale);\n  return await mediaItem.getThumbnail(imgWidth, imgHeight);\n}",
      "start_token": 22,
      "end_token": 138,
      "children": [
        {
          "type": "ExportKeyword",
          "label": "export",
          "start_token": 22,
          "end_token": 22,
          "children": []
        },
        {
          "type": "AsyncKeyword",
          "label": "async",
          "start_token": 23,
          "end_token": 23,
          "children": []
        },
        {
          "type": "Identifier",
          "label": "getThumbnail",
          "start_token": 25,
          "end_token": 25,
          "children": []
        },
        {
          "type": "Parameter",
          "label": "mediaItem: UserFileDataItem",
          "start_token": 27,
          "end_token": 29,
          "children": [
            {
              "type": "Identifier",
              "label": "mediaItem",
              "start_token": 27,
              "end_token": 27,
              "children": []
            },
            {
              "type": "TypeReference",
              "label": "UserFileDataItem",
              "start_token": 29,
              "end_token": 29,
              "children": [
                {
                  "type": "Identifier",
                  "label": "UserFileDataItem",
                  "start_token": 29,
                  "end_token": 29,
                  "children": []
                }
              ]
            }
          ]
        },
        {
          "type": "Parameter",
          "label": "isCurrent: boolean",
          "start_token": 31,
          "end_token": 33,
          "children": [
            {
              "type": "Identifier",
              "label": "isCurrent",
              "start_token": 31,
              "end_token": 31,
              "children": []
            },
            {
              "type": "BooleanKeyword",
              "label": "boolean",
              "start_token": 33,
              "end_token": 33,
              "children": []
            }
          ]
        },
        {
          "type": "TypeReference",
          "label": "Promise<PixelMap>",
          "start_token": 36,
          "end_token": 39,
          "children": [
            {
              "type": "Identifier",
              "label": "Promise",
              "start_token": 36,
              "end_token": 36,
              "children": []
            },
            {
              "type": "TypeReference",
              "label": "PixelMap",
              "start_token": 38,
              "end_token": 38,
              "children": [
                {
                  "type": "Identifier",
                  "label": "PixelMap",
                  "start_token": 38,
                  "end_token": 38,
                  "children": []
                }
              ]
            }
          ]
        },
        {
          "type": "Block",
          "label": "{\n  await mediaItem.load(true);\n  let imgWidth = mediaItem.width;\n  let imgHeight = mediaItem.height;\n  let scale = generateSampleSize(imgWidth, imgHeight, isCurrent);\n  mediaItem.imgWidth = Math.ceil(mediaItem.width / scale);\n  mediaItem.imgHeight = Math.ceil(mediaItem.height / scale);\n  imgWidth = Math.ceil(imgWidth / scale);\n  imgHeight = Math.ceil(imgHeight / scale);\n  return await mediaItem.getThumbnail(imgWidth, imgHeight);\n}",
          "start_token": 40,
          "end_token": 138,
          "children": [
            {
              "type": "ExpressionStatement",
              "label": "await mediaItem.load(true);",
              "start_token": 41,
              "end_token": 48,
              "children": [
                {
                  "type": "AwaitExpression",
                  "label": "await mediaItem.load(true)",
                  "start_token": 41,
                  "end_token": 47,
                  "children": [
                    {
                      "type": "CallExpression",
                      "label": "mediaItem.load(true)",
                      "start_token": 42,
                      "end_token": 47,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "mediaItem.load",
                          "start_token": 42,
                          "end_token": 44,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "mediaItem",
                              "start_token": 42,
                              "end_token": 42,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "load",
                              "start_token": 44,
                              "end_token": 44,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "TrueKeyword",
                          "label": "true",
                          "start_token": 46,
                          "end_token": 46,
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let imgWidth = mediaItem.width;",
              "start_token": 49,
              "end_token": 55,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let imgWidth = mediaItem.width",
                  "start_token": 49,
                  "end_token": 54,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "imgWidth = mediaItem.width",
                      "start_token": 50,
                      "end_token": 54,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "imgWidth",
                          "start_token": 50,
                          "end_token": 50,
                          "children": []
                        },
                        {
                          "type": "PropertyAccessExpression",
                          "label": "mediaItem.width",
                          "start_token": 52,
                          "end_token": 54,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "mediaItem",
                              "start_token": 52,
                              "end_token": 52,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "width",
                              "start_token": 54,
                              "end_token": 54,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let imgHeight = mediaItem.height;",
              "start_token": 56,
              "end_token": 62,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let imgHeight = mediaItem.height",
                  "start_token": 56,
                  "end_token": 61,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "imgHeight = mediaItem.height",
                      "start_token": 57,
                      "end_token": 61,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "imgHeight",
                          "start_token": 57,
                          "end_token": 57,
                          "children": []
                        },
                        {
                          "type": "PropertyAccessExpression",
                          "label": "mediaItem.height",
                          "start_token": 59,
                          "end_token": 61,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "mediaItem",
                              "start_token": 59,
                              "end_token": 59,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "height",
                              "start_token": 61,
                              "end_token": 61,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let scale = generateSampleSize(imgWidth, imgHeight, isCurrent);",
              "start_token": 63,
              "end_token": 74,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let scale = generateSampleSize(imgWidth, imgHeight, isCurrent)",
                  "start_token": 63,
                  "end_token": 73,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "scale = generateSampleSize(imgWidth, imgHeight, isCurrent)",
                      "start_token": 64,
                      "end_token": 73,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "scale",
                          "start_token": 64,
                          "end_token": 64,
                          "children": []
                        },
                        {
                          "type": "CallExpression",
                          "label": "generateSampleSize(imgWidth, imgHeight, isCurrent)",
                          "start_token": 66,
                          "end_token": 73,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "generateSampleSize",
                              "start_token": 66,
                              "end_token": 66,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "imgWidth",
                              "start_token": 68,
                              "end_token": 68,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "imgHeight",
                              "start_token": 70,
                              "end_token": 70,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "isCurrent",
                              "start_token": 72,
                              "end_token": 72,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "mediaItem.imgWidth = Math.ceil(mediaItem.width / scale);",
              "start_token": 75,
              "end_token": 89,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "mediaItem.imgWidth = Math.ceil(mediaItem.width / scale)",
                  "start_token": 75,
                  "end_token": 88,
                  "children": [
                    {
                      "type": "PropertyAccessExpression",
                      "label": "mediaItem.imgWidth",
                      "start_token": 75,
                      "end_token": 77,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "mediaItem",
                          "start_token": 75,
                          "end_token": 75,
                          "children": []
                        },
                        {
                          "type": "Identifier",
                          "label": "imgWidth",
                          "start_token": 77,
                          "end_token": 77,
                          "children": []
                        }
                      ]
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 78,
                      "end_token": 78,
                      "children": []
                    },
                    {
                      "type": "CallExpression",
                      "label": "Math.ceil(mediaItem.width / scale)",
                      "start_token": 79,
                      "end_token": 88,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "Math.ceil",
                          "start_token": 79,
                          "end_token": 81,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "Math",
                              "start_token": 79,
                              "end_token": 79,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "ceil",
                              "start_token": 81,
                              "end_token": 81,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "BinaryExpression",
                          "label": "mediaItem.width / scale",
                          "start_token": 83,
                          "end_token": 87,
                          "children": [
                            {
                              "type": "PropertyAccessExpression",
                              "label": "mediaItem.width",
                              "start_token": 83,
                              "end_token": 85,
                              "children": [
                                {
                                  "type": "Identifier",
                                  "label": "mediaItem",
                                  "start_token": 83,
                                  "end_token": 83,
                                  "children": []
                                },
                                {
                                  "type": "Identifier",
                                  "label": "width",
                                  "start_token": 85,
                                  "end_token": 85,
                                  "children": []
                                }
                              ]
                            },
                            {
                              "type": "SlashToken",
                              "label": "/",
                              "start_token": 86,
                              "end_token": 86,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "scale",
                              "start_token": 87,
                              "end_token": 87,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "mediaItem.imgHeight = Math.ceil(mediaItem.height / scale);",
              "start_token": 90,
              "end_token": 104,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "mediaItem.imgHeight = Math.ceil(mediaItem.height / scale)",
                  "start_token": 90,
                  "end_token": 103,
                  "children": [
                    {
                      "type": "PropertyAccessExpression",
                      "label": "mediaItem.imgHeight",
                      "start_token": 90,
                      "end_token": 92,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "mediaItem",
                          "start_token": 90,
                          "end_token": 90,
                          "children": []
                        },
                        {
                          "type": "Identifier",
                          "label": "imgHeight",
                          "start_token": 92,
                          "end_token": 92,
                          "children": []
                        }
                      ]
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 93,
                      "end_token": 93,
                      "children": []
                    },
                    {
                      "type": "CallExpression",
                      "label": "Math.ceil(mediaItem.height / scale)",
                      "start_token": 94,
                      "end_token": 103,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "Math.ceil",
                          "start_token": 94,
                          "end_token": 96,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "Math",
                              "start_token": 94,
                              "end_token": 94,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "ceil",
                              "start_token": 96,
                              "end_token": 96,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "BinaryExpression",
                          "label": "mediaItem.height / scale",
                          "start_token": 98,
                          "end_token": 102,
                          "children": [
                            {
                              "type": "PropertyAccessExpression",
                              "label": "mediaItem.height",
                              "start_token": 98,
                              "end_token": 100,
                              "children": [
                                {
                                  "type": "Identifier",
                                  "label": "mediaItem",
                                  "start_token": 98,
                                  "end_token": 98,
                                  "children": []
                                },
                                {
                                  "type": "Identifier",
                                  "label": "height",
                                  "start_token": 100,
                                  "end_token": 100,
                                  "children": []
                                }
                              ]
                            },
                            {
                              "type": "SlashToken",
                              "label": "/",
                              "start_token": 101,
                              "end_token": 101,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "scale",
                              "start_token": 102,
                              "end_token": 102,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "imgWidth = Math.ceil(imgWidth / scale);",
              "start_token": 105,
              "end_token": 115,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "imgWidth = Math.ceil(imgWidth / scale)",
                  "start_token": 105,
                  "end_token": 114,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "imgWidth",
                      "start_token": 105,
                      "end_token": 105,
                      "children": []
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 106,
                      "end_token": 106,
                      "children": []
                    },
                    {
                      "type": "CallExpression",
                      "label": "Math.ceil(imgWidth / scale)",
                      "start_token": 107,
                      "end_token": 114,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "Math.ceil",
                          "start_token": 107,
                          "end_token": 109,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "Math",
                              "start_token": 107,
                              "end_token": 107,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "ceil",
                              "start_token": 109,
                              "end_token": 109,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "BinaryExpression",
                          "label": "imgWidth / scale",
                          "start_token": 111,
                          "end_token": 113,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "imgWidth",
                              "start_token": 111,
                              "end_token": 111,
                              "children": []
                            },
                            {
                              "type": "SlashToken",
                              "label": "/",
                              "start_token": 112,
                              "end_token": 112,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "scale",
                              "start_token": 113,
                              "end_token": 113,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "imgHeight = Math.ceil(imgHeight / scale);",
              "start_token": 116,
              "end_token": 126,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "imgHeight = Math.ceil(imgHeight / scale)",
                  "start_token": 116,
                  "end_token": 125,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "imgHeight",
                      "start_token": 116,
                      "end_token": 116,
                      "children": []
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 117,
                      "end_token": 117,
                      "children": []
                    },
                    {
                      "type": "CallExpression",
                      "label": "Math.ceil(imgHeight / scale)",
                      "start_token": 118,
                      "end_token": 125,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "Math.ceil",
                          "start_token": 118,
                          "end_token": 120,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "Math",
                              "start_token": 118,
                              "end_token": 118,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "ceil",
                              "start_token": 120,
                              "end_token": 120,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "BinaryExpression",
                          "label": "imgHeight / scale",
                          "start_token": 122,
                          "end_token": 124,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "imgHeight",
                              "start_token": 122,
                              "end_token": 122,
                              "children": []
                            },
                            {
                              "type": "SlashToken",
                              "label": "/",
                              "start_token": 123,
                              "end_token": 123,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "scale",
                              "start_token": 124,
                              "end_token": 124,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ReturnStatement",
              "label": "return await mediaItem.getThumbnail(imgWidth, imgHeight);",
              "start_token": 127,
              "end_token": 137,
              "children": [
                {
                  "type": "AwaitExpression",
                  "label": "await mediaItem.getThumbnail(imgWidth, imgHeight)",
                  "start_token": 128,
                  "end_token": 136,
                  "children": [
                    {
                      "type": "CallExpression",
                      "label": "mediaItem.getThumbnail(imgWidth, imgHeight)",
                      "start_token": 129,
                      "end_token": 136,
                      "children": [
                        {
                          "type": "PropertyAccessExpression",
                          "label": "mediaItem.getThumbnail",
                          "start_token": 129,
                          "end_token": 131,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "mediaItem",
                              "start_token": 129,
                              "end_token": 129,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "getThumbnail",
                              "start_token": 131,
                              "end_token": 131,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "Identifier",
                          "label": "imgWidth",
                          "start_token": 133,
                          "end_token": 133,
                          "children": []
                        },
                        {
                          "type": "Identifier",
                          "label": "imgHeight",
                          "start_token": 135,
                          "end_token": 135,
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "FunctionDeclaration",
      "label": "function generateSampleSize(imageWidth: number, imageHeight: number, isCurrent: boolean): number {\n  let width = vp2px(screenManager.getWinWidth());\n  let height = vp2px(screenManager.getWinHeight());\n  width = width === 0 ? screenManager.DEFAULT_WIDTH : width;\n  height = height === 0 ? screenManager.DEFAULT_HEIGHT : height;\n  let maxNumOfPixels;\n  if (isCurrent) {\n    maxNumOfPixels = 2 * width * height;\n  } else {\n    maxNumOfPixels = width * height;\n  }\n  let minSide = Math.min(width, height);\n  return computeSampleSize(imageWidth, imageHeight, minSide, maxNumOfPixels);\n}",
      "start_token": 139,
      "end_token": 255,
      "children": [
        {
          "type": "Identifier",
          "label": "generateSampleSize",
          "start_token": 140,
          "end_token": 140,
          "children": []
        },
        {
          "type": "Parameter",
          "label": "imageWidth: number",
          "start_token": 142,
          "end_token": 144,
          "children": [
            {
              "type": "Identifier",
              "label": "imageWidth",
              "start_token": 142,
              "end_token": 142,
              "children": []
            },
            {
              "type": "NumberKeyword",
              "label": "number",
              "start_token": 144,
              "end_token": 144,
              "children": []
            }
          ]
        },
        {
          "type": "Parameter",
          "label": "imageHeight: number",
          "start_token": 146,
          "end_token": 148,
          "children": [
            {
              "type": "Identifier",
              "label": "imageHeight",
              "start_token": 146,
              "end_token": 146,
              "children": []
            },
            {
              "type": "NumberKeyword",
              "label": "number",
              "start_token": 148,
              "end_token": 148,
              "children": []
            }
          ]
        },
        {
          "type": "Parameter",
          "label": "isCurrent: boolean",
          "start_token": 150,
          "end_token": 152,
          "children": [
            {
              "type": "Identifier",
              "label": "isCurrent",
              "start_token": 150,
              "end_token": 150,
              "children": []
            },
            {
              "type": "BooleanKeyword",
              "label": "boolean",
              "start_token": 152,
              "end_token": 152,
              "children": []
            }
          ]
        },
        {
          "type": "NumberKeyword",
          "label": "number",
          "start_token": 155,
          "end_token": 155,
          "children": []
        },
        {
          "type": "Block",
          "label": "{\n  let width = vp2px(screenManager.getWinWidth());\n  let height = vp2px(screenManager.getWinHeight());\n  width = width === 0 ? screenManager.DEFAULT_WIDTH : width;\n  height = height === 0 ? screenManager.DEFAULT_HEIGHT : height;\n  let maxNumOfPixels;\n  if (isCurrent) {\n    maxNumOfPixels = 2 * width * height;\n  } else {\n    maxNumOfPixels = width * height;\n  }\n  let minSide = Math.min(width, height);\n  return computeSampleSize(imageWidth, imageHeight, minSide, maxNumOfPixels);\n}",
          "start_token": 156,
          "end_token": 255,
          "children": [
            {
              "type": "FirstStatement",
              "label": "let width = vp2px(screenManager.getWinWidth());",
              "start_token": 157,
              "end_token": 168,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let width = vp2px(screenManager.getWinWidth())",
                  "start_token": 157,
                  "end_token": 167,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "width = vp2px(screenManager.getWinWidth())",
                      "start_token": 158,
                      "end_token": 167,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "width",
                          "start_token": 158,
                          "end_token": 158,
                          "children": []
                        },
                        {
                          "type": "CallExpression",
                          "label": "vp2px(screenManager.getWinWidth())",
                          "start_token": 160,
                          "end_token": 167,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "vp2px",
                              "start_token": 160,
                              "end_token": 160,
                              "children": []
                            },
                            {
                              "type": "CallExpression",
                              "label": "screenManager.getWinWidth()",
                              "start_token": 162,
                              "end_token": 166,
                              "children": [
                                {
                                  "type": "PropertyAccessExpression",
                                  "label": "screenManager.getWinWidth",
                                  "start_token": 162,
                                  "end_token": 164,
                                  "children": [
                                    {
                                      "type": "Identifier",
                                      "label": "screenManager",
                                      "start_token": 162,
                                      "end_token": 162,
                                      "children": []
                                    },
                                    {
                                      "type": "Identifier",
                                      "label": "getWinWidth",
                                      "start_token": 164,
                                      "end_token": 164,
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let height = vp2px(screenManager.getWinHeight());",
              "start_token": 169,
              "end_token": 180,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let height = vp2px(screenManager.getWinHeight())",
                  "start_token": 169,
                  "end_token": 179,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "height = vp2px(screenManager.getWinHeight())",
                      "start_token": 170,
                      "end_token": 179,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "height",
                          "start_token": 170,
                          "end_token": 170,
                          "children": []
                        },
                        {
                          "type": "CallExpression",
                          "label": "vp2px(screenManager.getWinHeight())",
                          "start_token": 172,
                          "end_token": 179,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "vp2px",
                              "start_token": 172,
                              "end_token": 172,
                              "children": []
                            },
                            {
                              "type": "CallExpression",
                              "label": "screenManager.getWinHeight()",
                              "start_token": 174,
                              "end_token": 178,
                              "children": [
                                {
                                  "type": "PropertyAccessExpression",
                                  "label": "screenManager.getWinHeight",
                                  "start_token": 174,
                                  "end_token": 176,
                                  "children": [
                                    {
                                      "type": "Identifier",
                                      "label": "screenManager",
                                      "start_token": 174,
                                      "end_token": 174,
                                      "children": []
                                    },
                                    {
                                      "type": "Identifier",
                                      "label": "getWinHeight",
                                      "start_token": 176,
                                      "end_token": 176,
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "width = width === 0 ? screenManager.DEFAULT_WIDTH : width;",
              "start_token": 181,
              "end_token": 192,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "width = width === 0 ? screenManager.DEFAULT_WIDTH : width",
                  "start_token": 181,
                  "end_token": 191,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "width",
                      "start_token": 181,
                      "end_token": 181,
                      "children": []
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 182,
                      "end_token": 182,
                      "children": []
                    },
                    {
                      "type": "ConditionalExpression",
                      "label": "width === 0 ? screenManager.DEFAULT_WIDTH : width",
                      "start_token": 183,
                      "end_token": 191,
                      "children": [
                        {
                          "type": "BinaryExpression",
                          "label": "width === 0",
                          "start_token": 183,
                          "end_token": 185,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "width",
                              "start_token": 183,
                              "end_token": 183,
                              "children": []
                            },
                            {
                              "type": "EqualsEqualsEqualsToken",
                              "label": "===",
                              "start_token": 184,
                              "end_token": 184,
                              "children": []
                            },
                            {
                              "type": "FirstLiteralToken",
                              "label": "0",
                              "start_token": 185,
                              "end_token": 185,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "QuestionToken",
                          "label": "?",
                          "start_token": 186,
                          "end_token": 186,
                          "children": []
                        },
                        {
                          "type": "PropertyAccessExpression",
                          "label": "screenManager.DEFAULT_WIDTH",
                          "start_token": 187,
                          "end_token": 189,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "screenManager",
                              "start_token": 187,
                              "end_token": 187,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "DEFAULT_WIDTH",
                              "start_token": 189,
                              "end_token": 189,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "ColonToken",
                          "label": ":",
                          "start_token": 190,
                          "end_token": 190,
                          "children": []
                        },
                        {
                          "type": "Identifier",
                          "label": "width",
                          "start_token": 191,
                          "end_token": 191,
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ExpressionStatement",
              "label": "height = height === 0 ? screenManager.DEFAULT_HEIGHT : height;",
              "start_token": 193,
              "end_token": 204,
              "children": [
                {
                  "type": "BinaryExpression",
                  "label": "height = height === 0 ? screenManager.DEFAULT_HEIGHT : height",
                  "start_token": 193,
                  "end_token": 203,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "height",
                      "start_token": 193,
                      "end_token": 193,
                      "children": []
                    },
                    {
                      "type": "FirstAssignment",
                      "label": "=",
                      "start_token": 194,
                      "end_token": 194,
                      "children": []
                    },
                    {
                      "type": "ConditionalExpression",
                      "label": "height === 0 ? screenManager.DEFAULT_HEIGHT : height",
                      "start_token": 195,
                      "end_token": 203,
                      "children": [
                        {
                          "type": "BinaryExpression",
                          "label": "height === 0",
                          "start_token": 195,
                          "end_token": 197,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "height",
                              "start_token": 195,
                              "end_token": 195,
                              "children": []
                            },
                            {
                              "type": "EqualsEqualsEqualsToken",
                              "label": "===",
                              "start_token": 196,
                              "end_token": 196,
                              "children": []
                            },
                            {
                              "type": "FirstLiteralToken",
                              "label": "0",
                              "start_token": 197,
                              "end_token": 197,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "QuestionToken",
                          "label": "?",
                          "start_token": 198,
                          "end_token": 198,
                          "children": []
                        },
                        {
                          "type": "PropertyAccessExpression",
                          "label": "screenManager.DEFAULT_HEIGHT",
                          "start_token": 199,
                          "end_token": 201,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "screenManager",
                              "start_token": 199,
                              "end_token": 199,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "DEFAULT_HEIGHT",
                              "start_token": 201,
                              "end_token": 201,
                              "children": []
                            }
                          ]
                        },
                        {
                          "type": "ColonToken",
                          "label": ":",
                          "start_token": 202,
                          "end_token": 202,
                          "children": []
                        },
                        {
                          "type": "Identifier",
                          "label": "height",
                          "start_token": 203,
                          "end_token": 203,
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let maxNumOfPixels;",
              "start_token": 205,
              "end_token": 207,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let maxNumOfPixels",
                  "start_token": 205,
                  "end_token": 206,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "maxNumOfPixels",
                      "start_token": 206,
                      "end_token": 206,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "maxNumOfPixels",
                          "start_token": 206,
                          "end_token": 206,
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "IfStatement",
              "label": "if (isCurrent) {\n    maxNumOfPixels = 2 * width * height;\n  } else {\n    maxNumOfPixels = width * height;\n  }",
              "start_token": 208,
              "end_token": 230,
              "children": [
                {
                  "type": "Identifier",
                  "label": "isCurrent",
                  "start_token": 210,
                  "end_token": 210,
                  "children": []
                },
                {
                  "type": "Block",
                  "label": "{\n    maxNumOfPixels = 2 * width * height;\n  }",
                  "start_token": 212,
                  "end_token": 221,
                  "children": [
                    {
                      "type": "ExpressionStatement",
                      "label": "maxNumOfPixels = 2 * width * height;",
                      "start_token": 213,
                      "end_token": 220,
                      "children": [
                        {
                          "type": "BinaryExpression",
                          "label": "maxNumOfPixels = 2 * width * height",
                          "start_token": 213,
                          "end_token": 219,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "maxNumOfPixels",
                              "start_token": 213,
                              "end_token": 213,
                              "children": []
                            },
                            {
                              "type": "FirstAssignment",
                              "label": "=",
                              "start_token": 214,
                              "end_token": 214,
                              "children": []
                            },
                            {
                              "type": "BinaryExpression",
                              "label": "2 * width * height",
                              "start_token": 215,
                              "end_token": 219,
                              "children": [
                                {
                                  "type": "BinaryExpression",
                                  "label": "2 * width",
                                  "start_token": 215,
                                  "end_token": 217,
                                  "children": [
                                    {
                                      "type": "FirstLiteralToken",
                                      "label": "2",
                                      "start_token": 215,
                                      "end_token": 215,
                                      "children": []
                                    },
                                    {
                                      "type": "AsteriskToken",
                                      "label": "*",
                                      "start_token": 216,
                                      "end_token": 216,
                                      "children": []
                                    },
                                    {
                                      "type": "Identifier",
                                      "label": "width",
                                      "start_token": 217,
                                      "end_token": 217,
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "type": "AsteriskToken",
                                  "label": "*",
                                  "start_token": 218,
                                  "end_token": 218,
                                  "children": []
                                },
                                {
                                  "type": "Identifier",
                                  "label": "height",
                                  "start_token": 219,
                                  "end_token": 219,
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "Block",
                  "label": "{\n    maxNumOfPixels = width * height;\n  }",
                  "start_token": 223,
                  "end_token": 230,
                  "children": [
                    {
                      "type": "ExpressionStatement",
                      "label": "maxNumOfPixels = width * height;",
                      "start_token": 224,
                      "end_token": 229,
                      "children": [
                        {
                          "type": "BinaryExpression",
                          "label": "maxNumOfPixels = width * height",
                          "start_token": 224,
                          "end_token": 228,
                          "children": [
                            {
                              "type": "Identifier",
                              "label": "maxNumOfPixels",
                              "start_token": 224,
                              "end_token": 224,
                              "children": []
                            },
                            {
                              "type": "FirstAssignment",
                              "label": "=",
                              "start_token": 225,
                              "end_token": 225,
                              "children": []
                            },
                            {
                              "type": "BinaryExpression",
                              "label": "width * height",
                              "start_token": 226,
                              "end_token": 228,
                              "children": [
                                {
                                  "type": "Identifier",
                                  "label": "width",
                                  "start_token": 226,
                                  "end_token": 226,
                                  "children": []
                                },
                                {
                                  "type": "AsteriskToken",
                                  "label": "*",
                                  "start_token": 227,
                                  "end_token": 227,
                                  "children": []
                                },
                                {
                                  "type": "Identifier",
                                  "label": "height",
                                  "start_token": 228,
                                  "end_token": 228,
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "FirstStatement",
              "label": "let minSide = Math.min(width, height);",
              "start_token": 231,
              "end_token": 242,
              "children": [
                {
                  "type": "VariableDeclarationList",
                  "label": "let minSide = Math.min(width, height)",
                  "start_token": 231,
                  "end_token": 241,
                  "children": [
                    {
                      "type": "VariableDeclaration",
                      "label": "minSide = Math.min(width, height)",
                      "start_token": 232,
                      "end_token": 241,
                      "children": [
                        {
                          "type": "Identifier",
                          "label": "minSide",
                          "start_token": 232,
                          "end_token": 232,
                          "children": []
                        },
                        {
                          "type": "CallExpression",
                          "label": "Math.min(width, height)",
                          "start_token": 234,
                          "end_token": 241,
                          "children": [
                            {
                              "type": "PropertyAccessExpression",
                              "label": "Math.min",
                              "start_token": 234,
                              "end_token": 236,
                              "children": [
                                {
                                  "type": "Identifier",
                                  "label": "Math",
                                  "start_token": 234,
                                  "end_token": 234,
                                  "children": []
                                },
                                {
                                  "type": "Identifier",
                                  "label": "min",
                                  "start_token": 236,
                                  "end_token": 236,
                                  "children": []
                                }
                              ]
                            },
                            {
                              "type": "Identifier",
                              "label": "width",
                              "start_token": 238,
                              "end_token": 238,
                              "children": []
                            },
                            {
                              "type": "Identifier",
                              "label": "height",
                              "start_token": 240,
                              "end_token": 240,
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "ReturnStatement",
              "label": "return computeSampleSize(imageWidth, imageHeight, minSide, maxNumOfPixels);",
              "start_token": 243,
              "end_token": 254,
              "children": [
                {
                  "type": "CallExpression",
                  "label": "computeSampleSize(imageWidth, imageHeight, minSide, maxNumOfPixels)",
                  "start_token": 244,
                  "end_token": 253,
                  "children": [
                    {
                      "type": "Identifier",
                      "label": "computeSampleSize",
                      "start_token": 244,
                      "end_token": 244,
                      "children": []
                    },
                    {
                      "type": "Identifier",
                      "label": "imageWidth",
                      "start_token": 246,
                      "end_token": 246,
                      "children": []
                    },
                    {
                      "type": "Identifier",
                      "label": "imageHeight",
                      "start_token": 248,
                      "end_token": 248,
                      "children": []
                    },
                    {
                      "type": "Identifier",
                      "label": "minSide",
                      "start_token": 250,
                      "end_token": 250,
                      "children": []
                    },
                    {
                      "type": "Identifier",
                      "label": "maxNumOfPixels",
                      "start_token": 252,
                      "end_token": 252,
                      "children": []
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "EndOfFileToken",
      "label": "",
      "start_token": -1,
      "end_token": -1,
      "children": []
    }
  ]
}