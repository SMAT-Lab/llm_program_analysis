digraph "207.ts" {
subgraph "cluster_@ts_files/207.ts: %dflt.[static]%dflt()" {
  label="@ts_files/207.ts: %dflt.[static]%dflt()";
  Node33730 [label="id:0
      this = this: @ts_files/207.ts: %dflt
      addAssetsToAlbum = %AM0
      tagAssets = %AM2
      removeTag = %AM3
      addAssetsToNewAlbum = %AM4
      downloadAlbum = %AM5
      downloadBlob = %AM6
      downloadArchive = %AM7
      downloadFile = %AM10
      %0 = new @%unk/%unk: Set
      %1 = newarray (string)[6]
      %1[0] = 'image/apng'
      %1[1] = 'image/avif'
      %1[2] = 'image/gif'
      %1[3] = 'image/jpeg'
      %1[4] = 'image/png'
      %1[5] = 'image/webp'
      instanceinvoke %0.<@%unk/%unk: Set.constructor()>(%1)
      supportedImageMimeTypes = %0
      %2 = navigator.<@%unk/%unk: .userAgent>
      %3 = /^((?!chrome|android).)*safari/i
      isSafari = instanceinvoke %3.<@%unk/%unk: .test()>(%2)
      if isSafari != 0"];
  Node33731 [label="id:1
      %4 = instanceinvoke supportedImageMimeTypes.<@%unk/%unk: .add()>('image/heic')
      instanceinvoke %4.<@%unk/%unk: .add()>('image/heif')"];
  Node33732 [label="id:2
      getAssetType = %AM13
      getSelectedAssets = %AM14
      stackAssets = %AM18
      deleteStack = %AM20
      keepThisDeleteOthers = %AM24
      selectAllAssets = %AM27
      cancelMultiselect = %AM28
      toggleArchive = %AM29
      archiveAssets = %AM30
      delay = %AM32
      canCopyImageToClipboard = %AM34
      imgToBlob = %AM35
      urlToBlob = %AM38
      copyImageToClipboard = %AM39
      return"];
  Node33730 -> Node33731;
  Node33730 -> Node33732;
  Node33731 -> Node33732;
}
subgraph "cluster_@ts_files/207.ts: %dflt.getFilenameExtension(string)" {
  label="@ts_files/207.ts: %dflt.getFilenameExtension(string)";
  Node48190 [label="id:0
      filename = parameter0: string
      this = this: @ts_files/207.ts: %dflt
      %0 = instanceinvoke filename.<@%unk/%unk: .lastIndexOf()>('.')
      lastIndex = instanceinvoke Math.<@%unk/%unk: .max()>(0, %0)
      %1 = Number.<@%unk/%unk: .POSITIVE_INFINITY>
      %2 = lastIndex || %1
      startIndex = %2 + 1
      %3 = instanceinvoke filename.<@%unk/%unk: .slice()>(startIndex)
      %4 = instanceinvoke %3.<@%unk/%unk: .toLowerCase()>()
      return %4"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.getAssetFilename(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.getAssetFilename(AssetResponseDto)";
  Node53650 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .originalPath>
      fileExtension = staticinvoke <@ts_files/207.ts: %dflt.getFilenameExtension(string)>(%0)
      %1 = asset.<@%unk/%unk: .originalFileName>
      %2 = %1 + '.'
      %3 = %2 + fileExtension
      return %3"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.isRotated90CW(number)" {
  label="@ts_files/207.ts: %dflt.isRotated90CW(number)";
  Node39290 [label="id:0
      orientation = parameter0: number
      this = this: @ts_files/207.ts: %dflt
      %0 = orientation === 5
      %1 = orientation === 6
      %2 = %0 || %1
      %3 = orientation === 90
      %4 = %2 || %3
      return %4"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.isRotated270CW(number)" {
  label="@ts_files/207.ts: %dflt.isRotated270CW(number)";
  Node39770 [label="id:0
      orientation = parameter0: number
      this = this: @ts_files/207.ts: %dflt
      %0 = orientation === 7
      %1 = orientation === 8
      %2 = %0 || %1
      %3 = -90
      %4 = orientation === %3
      %5 = %2 || %4
      return %5"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.isFlipped(string|null)" {
  label="@ts_files/207.ts: %dflt.isFlipped(string|null)";
  Node42360 [label="id:0
      orientation = parameter0: string|null
      this = this: @ts_files/207.ts: %dflt
      value = staticinvoke <@%unk/%unk: .Number()>(orientation)
      %0 = staticinvoke <@ts_files/207.ts: %dflt.isRotated270CW(number)>(value)
      %1 = staticinvoke <@ts_files/207.ts: %dflt.isRotated90CW(number)>(value)
      %2 = %0 || %1
      %3 = value && %2
      return %3"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.getFileSize(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.getFileSize(AssetResponseDto)";
  Node48470 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .exifInfo>
      %1 = %0.<@%unk/%unk: .fileSizeInByte>
      size = %1 || 0
      if size > 0"];
  Node48471 [label="id:1
      %2 = staticinvoke <@%unk/%unk: .getByteUnitString()>(size, undefined, 4)"];
  Node48472 [label="id:2
      %2 = 'Invalid Data'"];
  Node48473 [label="id:3
      return %2"];
  Node48470 -> Node48471;
  Node48470 -> Node48472;
  Node48471 -> Node48473;
  Node48472 -> Node48473;
}
subgraph "cluster_@ts_files/207.ts: %dflt.getAssetResolution(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.getAssetResolution(AssetResponseDto)";
  Node56400 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = staticinvoke <@ts_files/207.ts: %dflt.getAssetRatio(AssetResponseDto)>(asset)
      width = %0.<@ts_files/207.ts: %AC$%dflt$getAssetRatio$77.width>
      height = %0.<@ts_files/207.ts: %AC$%dflt$getAssetRatio$77.height>
      %1 = width === 235
      %2 = height === 235
      %3 = %1 && %2
      if %3 != false"];
  Node56401 [label="id:1
      return 'Invalid Data'"];
  Node56402 [label="id:2
      %4 = width + ' x '
      %5 = %4 + height
      return %5"];
  Node56400 -> Node56401;
  Node56400 -> Node56402;
}
subgraph "cluster_@ts_files/207.ts: %dflt.getAssetRatio(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.getAssetRatio(AssetResponseDto)";
  Node50750 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .exifInfo>
      %1 = %0.<@%unk/%unk: .exifImageHeight>
      height = %1 || 235
      %2 = asset.<@%unk/%unk: .exifInfo>
      %3 = %2.<@%unk/%unk: .exifImageWidth>
      width = %3 || 235
      %4 = asset.<@%unk/%unk: .exifInfo>
      %5 = %4.<@%unk/%unk: .orientation>
      %6 = staticinvoke <@ts_files/207.ts: %dflt.isFlipped(string|null)>(%5)
      if %6 != false"];
  Node50751 [label="id:1
      %8 = newarray (boolean)[2]
      %8[0] = height
      %8[1] = width
      %7 = %8
      width = %7[0]
      height = %7[1]"];
  Node50752 [label="id:2
      %9 = new @ts_files/207.ts: %AC$%dflt$getAssetRatio$77
      instanceinvoke %9.<@ts_files/207.ts: %AC$%dflt$getAssetRatio$77.constructor()>()
      return %9"];
  Node50750 -> Node50751;
  Node50750 -> Node50752;
  Node50751 -> Node50752;
}
subgraph "cluster_@ts_files/207.ts: %dflt.isWebCompatibleImage(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.isWebCompatibleImage(AssetResponseDto)";
  Node57450 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .originalMimeType>
      %1 = !%0
      if %1 != 0"];
  Node57451 [label="id:1
      return false"];
  Node57452 [label="id:2
      %2 = asset.<@%unk/%unk: .originalMimeType>
      %3 = instanceinvoke supportedImageMimeTypes.<@%unk/%unk: .has()>(%2)
      return %3"];
  Node57450 -> Node57451;
  Node57450 -> Node57452;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM1$%AM0(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM1$%AM0(unknown)";
  Node33530 [label="id:0
      ObjectBindingPattern = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      return success"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM0(string, string[], unknown)" {
  label="@ts_files/207.ts: %dflt.%AM0(string, string[], unknown)";
  Node47510 [label="id:0
      albumId = parameter0: string
      assetIds = parameter1: string[]
      showNotification = parameter2: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM0$0
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM0$0.constructor()>()
      %1 = staticinvoke <@%unk/%unk: .addAssets()>(%0)
      result = await %1
      %2 = instanceinvoke result.<@%unk/%unk: .filter()>(%AM1$%AM0)
      count = %2.<@%unk/%unk: .length>
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      if showNotification != 0"];
  Node47511 [label="id:1
      %3 = new @ts_files/207.ts: %AC$%dflt$%AM0$2
      instanceinvoke %3.<@ts_files/207.ts: %AC$%dflt$%AM0$2.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%3)"];
  Node47512 [label="id:2
      return"];
  Node47510 -> Node47511;
  Node47510 -> Node47512;
  Node47511 -> Node47512;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM2(@ts_files/207.ts: %AC$8)" {
  label="@ts_files/207.ts: %dflt.%AM2(@ts_files/207.ts: %AC$8)";
  Node40560 [label="id:0
      ObjectBindingPattern = parameter0: @ts_files/207.ts: %AC$8
      this = this: @ts_files/207.ts: %dflt
      %0 = instanceinvoke tagIds.<@%unk/%unk: .iterator()>()"];
  Node40561 [label="id:1
      %1 = instanceinvoke %0.<@%unk/%unk: .next()>()
      %2 = %1.<@ES2015/BuiltinClass: IteratorResult.done>
      if %2 == true"];
  Node40562 [label="id:2
      %3 = %1.<@ES2015/BuiltinClass: IteratorResult.value>
      tagId = <any>%3
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM2$9
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM2$9.constructor()>()
      %5 = staticinvoke <@%unk/%unk: .tagAllAssets()>(%4)
      %6 = await %5"];
  Node40563 [label="id:3
      if showNotification != 0"];
  Node40564 [label="id:4
      %7 = staticinvoke <@%unk/%unk: .getFormatter()>()
      $t = await %7
      %8 = new @ts_files/207.ts: %AC$%dflt$%AM2$11
      instanceinvoke %8.<@ts_files/207.ts: %AC$%dflt$%AM2$11.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%8)"];
  Node40565 [label="id:5
      return assetIds"];
  Node40560 -> Node40561;
  Node40561 -> Node40562;
  Node40561 -> Node40563;
  Node40562 -> Node40561;
  Node40563 -> Node40564;
  Node40563 -> Node40565;
  Node40564 -> Node40565;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM3(@ts_files/207.ts: %AC$14)" {
  label="@ts_files/207.ts: %dflt.%AM3(@ts_files/207.ts: %AC$14)";
  Node41020 [label="id:0
      ObjectBindingPattern = parameter0: @ts_files/207.ts: %AC$14
      this = this: @ts_files/207.ts: %dflt
      %0 = instanceinvoke tagIds.<@%unk/%unk: .iterator()>()"];
  Node41021 [label="id:1
      %1 = instanceinvoke %0.<@%unk/%unk: .next()>()
      %2 = %1.<@ES2015/BuiltinClass: IteratorResult.done>
      if %2 == true"];
  Node41022 [label="id:2
      %3 = %1.<@ES2015/BuiltinClass: IteratorResult.value>
      tagId = <any>%3
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM3$15
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM3$15.constructor()>()
      %5 = staticinvoke <@%unk/%unk: .untagAssets()>(%4)
      %6 = await %5"];
  Node41023 [label="id:3
      if showNotification != 0"];
  Node41024 [label="id:4
      %7 = staticinvoke <@%unk/%unk: .getFormatter()>()
      $t = await %7
      %8 = new @ts_files/207.ts: %AC$%dflt$%AM3$17
      instanceinvoke %8.<@ts_files/207.ts: %AC$%dflt$%AM3$17.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%8)"];
  Node41025 [label="id:5
      return assetIds"];
  Node41020 -> Node41021;
  Node41021 -> Node41022;
  Node41021 -> Node41023;
  Node41022 -> Node41021;
  Node41023 -> Node41024;
  Node41023 -> Node41025;
  Node41024 -> Node41025;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM4(string, string[])" {
  label="@ts_files/207.ts: %dflt.%AM4(string, string[])";
  Node38950 [label="id:0
      albumName = parameter0: string
      assetIds = parameter1: string[]
      this = this: @ts_files/207.ts: %dflt
      %0 = staticinvoke <@%unk/%unk: .createAlbum()>(albumName, assetIds)
      album = await %0
      %1 = !album
      if %1 != 0"];
  Node38951 [label="id:1
      return"];
  Node38952 [label="id:2
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %2 = new @ts_files/207.ts: %AC$%dflt$%AM4$20
      instanceinvoke %2.<@ts_files/207.ts: %AC$%dflt$%AM4$20.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%2)
      return album"];
  Node38950 -> Node38951;
  Node38950 -> Node38952;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM5(AlbumResponseDto)" {
  label="@ts_files/207.ts: %dflt.%AM5(AlbumResponseDto)";
  Node39490 [label="id:0
      album = parameter0: AlbumResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = album.<@%unk/%unk: .albumName>
      %1 = %0 + '.zip'
      %2 = new @ts_files/207.ts: %AC$%dflt$%AM5$25
      instanceinvoke %2.<@ts_files/207.ts: %AC$%dflt$%AM5$25.constructor()>()
      %3 = staticinvoke <@%unk/%unk: .downloadArchive()>(%1, %2)
      %4 = await %3
      return"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM6(Blob, string)" {
  label="@ts_files/207.ts: %dflt.%AM6(Blob, string)";
  Node34330 [label="id:0
      data = parameter0: Blob
      filename = parameter1: string
      this = this: @ts_files/207.ts: %dflt
      url = instanceinvoke URL.<@%unk/%unk: .createObjectURL()>(data)
      anchor = instanceinvoke document.<@%unk/%unk: .createElement()>('a')
      anchor.<@%unk/%unk: .href> = url
      anchor.<@%unk/%unk: .download> = filename
      %0 = document.<@%unk/%unk: .body>
      instanceinvoke %0.<@%unk/%unk: .append()>(anchor)
      instanceinvoke anchor.<@%unk/%unk: .click()>()
      instanceinvoke anchor.<@%unk/%unk: .remove()>()
      instanceinvoke URL.<@%unk/%unk: .revokeObjectURL()>(url)
      return"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM8$%AM7()" {
  label="@ts_files/207.ts: %dflt.%AM8$%AM7()";
  Node25830 [label="id:0
      this = this: @ts_files/207.ts: %dflt
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM8$%AM7$27
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM8$%AM7$27.constructor()>()
      %1 = staticinvoke <@%unk/%unk: .getDownloadInfo()>(%0)
      return %1"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM9$%AM7()" {
  label="@ts_files/207.ts: %dflt.%AM9$%AM7()";
  Node25840 [label="id:0
      this = this: @ts_files/207.ts: %dflt
      %0 = instanceinvoke downloadManager.<@%unk/%unk: .clear()>(downloadKey)
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM7(string, Omit<DownloadInfoDto,string>)" {
  label="@ts_files/207.ts: %dflt.%AM7(string, Omit<DownloadInfoDto,string>)";
  Node58040 [label="id:0
      fileName = parameter0: string
      options = parameter1: Omit<DownloadInfoDto,string>
      this = this: @ts_files/207.ts: %dflt
      $preferences = staticinvoke <@%unk/%unk: .get()>(preferences)
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM7$26
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM7$26.constructor()>()
      dto = %0
      %2 = staticinvoke <@%unk/%unk: .withError()>(%AM8$%AM7)
      %1 = await %2
      error = %1[0]
      downloadInfo = %1[1]
      if error != 0"];
  Node58041 [label="id:1
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %3 = staticinvoke <@%unk/%unk: .$t()>('errors.unable_to_download_files')
      staticinvoke <@%unk/%unk: .handleError()>(error, %3)
      return"];
  Node58042 [label="id:2
      %4 = !downloadInfo
      if %4 != 0
      index = 0"];
  Node58043 [label="id:3
      return"];
  Node58044 [label="id:4
      %5 = downloadInfo.<@%unk/%unk: .archives>
      %6 = %5.<@%unk/%unk: .length>
      if index < %6"];
  Node58045 [label="id:5
      %21 = index + 1
      %22 = downloadInfo.<@%unk/%unk: .archives>
      %23 = %22.<@%unk/%unk: .length>
      %24 = archiveName + ' ('
      %25 = %24 + %21
      %26 = %25 + '/'
      %27 = %26 + %23
      %28 = %27 + ')'
      downloadKey = %28"];
  Node58046 [label="id:6
      %29 = new @%unk/%unk: AbortController
      instanceinvoke %29.<@%unk/%unk: AbortController.constructor()>()
      abort = %29
      %30 = archive.<@%unk/%unk: .size>
      instanceinvoke downloadManager.<@%unk/%unk: .add()>(downloadKey, %30, abort)"];
  Node58047 [label="id:7
      %32 = new @ts_files/207.ts: %AC$%dflt$%AM7$28
      instanceinvoke %32.<@ts_files/207.ts: %AC$%dflt$%AM7$28.constructor()>()
      %33 = staticinvoke <@%unk/%unk: .downloadRequest()>(%32)
      %31 = await %33
      data = %31.<@%unk/%unk: .data>
      staticinvoke <@%unk/%unk: .downloadBlob()>(data, archiveName)"];
  Node58048 [label="id:8
      error = caughtexception: unknown
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %34 = staticinvoke <@%unk/%unk: .$t()>('errors.unable_to_download_files')
      staticinvoke <@%unk/%unk: .handleError()>(error, %34)
      instanceinvoke downloadManager.<@%unk/%unk: .clear()>(downloadKey)
      return"];
  Node58049 [label="id:9
      staticinvoke <@%unk/%unk: .setTimeout()>(%AM9$%AM7, 5000)
      index = index + 1"];
  Node580410 [label="id:10
      return"];
  Node580411 [label="id:11
      %7 = downloadInfo.<@%unk/%unk: .archives>
      archive = %7.<@%unk/%unk: .index>
      %8 = downloadInfo.<@%unk/%unk: .archives>
      %9 = %8.<@%unk/%unk: .length>
      if %9 > 1"];
  Node580412 [label="id:12
      %10 = index + 1
      %11 = '+' + %10"];
  Node580413 [label="id:13
      suffix = ''"];
  Node580414 [label="id:14
      %13 = instanceinvoke DateTime.<@%unk/%unk: .now()>()
      %14 = instanceinvoke %13.<@%unk/%unk: .toFormat()>('yyyyLLdd_HHmmss')
      %15 = suffix + '-'
      %16 = %15 + %14
      %17 = %16 + '.zip'
      archiveName = instanceinvoke fileName.<@%unk/%unk: .replace()>('.zip', %17)
      key = staticinvoke <@%unk/%unk: .getKey()>()
      %18 = archiveName + ' '
      downloadKey = %18
      %19 = downloadInfo.<@%unk/%unk: .archives>
      %20 = %19.<@%unk/%unk: .length>
      if %20 > 1"];
  Node580415 [label="id:15
      %35 = caughtexception: unknown
      staticinvoke <@%unk/%unk: .setTimeout()>(%AM9$%AM7, 5000)
      index = index + 1
      throw %35"];
  Node58040 -> Node58041;
  Node58040 -> Node58042;
  Node58042 -> Node58043;
  Node58042 -> Node58044;
  Node58044 -> Node580410;
  Node58044 -> Node580411;
  Node58045 -> Node58046;
  Node58046 -> Node58047;
  Node58047 -> Node58049;
  Node58047 -> Node58048[style="dotted"];
  Node58048 -> Node58049;
  Node58048 -> Node580415[style="dotted"];
  Node58049 -> Node58044;
  Node580411 -> Node580413;
  Node580411 -> Node580412;
  Node580412 -> Node580414;
  Node580413 -> Node580414;
  Node580414 -> Node58045;
  Node580414 -> Node58046;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM11$%AM10(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.%AM11$%AM10(AssetResponseDto)";
  Node43210 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .originalPath>
      %1 = instanceinvoke %0.<@%unk/%unk: .includes()>('encoded-video')
      return %1"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM12$%AM10()" {
  label="@ts_files/207.ts: %dflt.%AM12$%AM10()";
  Node26680 [label="id:0
      this = this: @ts_files/207.ts: %dflt
      %0 = instanceinvoke downloadManager.<@%unk/%unk: .clear()>(downloadKey)
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM10(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.%AM10(AssetResponseDto)";
  Node40080 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM10$30
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM10$30.constructor()>()
      %1 = newarray (@ts_files/207.ts: %AC$%dflt$%AM10$30)[1]
      %1[0] = %0
      assets = %1
      isAndroidMotionVideo = %AM11$%AM10
      %2 = asset.<@%unk/%unk: .livePhotoVideoId>
      if %2 != 0
      %12 = instanceinvoke assets.<@%unk/%unk: .iterator()>()"];
  Node40081 [label="id:1
      %3 = new @ts_files/207.ts: %AC$%dflt$%AM10$31
      instanceinvoke %3.<@ts_files/207.ts: %AC$%dflt$%AM10$31.constructor()>()
      %4 = staticinvoke <@%unk/%unk: .getAssetInfo()>(%3)
      motionAsset = await %4
      %5 = ptrinvoke <@%unk/%unk: .isAndroidMotionVideo()>(motionAsset)
      %6 = !%5
      %7 = staticinvoke <@%unk/%unk: .get()>(preferences)
      %8 = %7.<@%unk/%unk: .download>
      %9 = %8.<@%unk/%unk: .includeEmbeddedVideos>
      %10 = %6 || %9
      if %10 != false"];
  Node40082 [label="id:2
      %11 = new @ts_files/207.ts: %AC$%dflt$%AM10$32
      instanceinvoke %11.<@ts_files/207.ts: %AC$%dflt$%AM10$32.constructor()>()
      instanceinvoke assets.<@%unk/%unk: .push()>(%11)"];
  Node40083 [label="id:3
      %13 = instanceinvoke %12.<@%unk/%unk: .next()>()
      %14 = %13.<@ES2015/BuiltinClass: IteratorResult.done>
      if %14 == true"];
  Node40084 [label="id:4
      %15 = %13.<@ES2015/BuiltinClass: IteratorResult.value>
      %16 = <@ts_files/207.ts: %AC$%dflt$%AM10$30>%15
      filename = %16.<@ts_files/207.ts: %AC$%dflt$%AM10$30.filename>
      id = %16.<@ts_files/207.ts: %AC$%dflt$%AM10$30.id>
      size = %16.<@ts_files/207.ts: %AC$%dflt$%AM10$30.size>
      downloadKey = filename"];
  Node40085 [label="id:5
      %17 = new @%unk/%unk: AbortController
      instanceinvoke %17.<@%unk/%unk: AbortController.constructor()>()
      abort = %17
      instanceinvoke downloadManager.<@%unk/%unk: .add()>(downloadKey, size, abort)
      key = staticinvoke <@%unk/%unk: .getKey()>()
      %18 = new @ts_files/207.ts: %AC$%dflt$%AM10$33
      instanceinvoke %18.<@ts_files/207.ts: %AC$%dflt$%AM10$33.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%18)
      %20 = new @ts_files/207.ts: %AC$%dflt$%AM10$36
      instanceinvoke %20.<@ts_files/207.ts: %AC$%dflt$%AM10$36.constructor()>()
      %21 = staticinvoke <@%unk/%unk: .downloadRequest()>(%20)
      %19 = await %21
      data = %19.<@%unk/%unk: .data>
      staticinvoke <@%unk/%unk: .downloadBlob()>(data, filename)"];
  Node40086 [label="id:6
      error = caughtexception: unknown
      %22 = new @ts_files/207.ts: %AC$%dflt$%AM10$37
      instanceinvoke %22.<@ts_files/207.ts: %AC$%dflt$%AM10$37.constructor()>()
      %23 = staticinvoke <@%unk/%unk: .$t()>('errors.error_downloading', %22)
      staticinvoke <@%unk/%unk: .handleError()>(error, %23)
      instanceinvoke downloadManager.<@%unk/%unk: .clear()>(downloadKey)"];
  Node40087 [label="id:7
      staticinvoke <@%unk/%unk: .setTimeout()>(%AM12$%AM10, 5000)"];
  Node40088 [label="id:8
      return"];
  Node40089 [label="id:9
      %24 = caughtexception: unknown
      staticinvoke <@%unk/%unk: .setTimeout()>(%AM12$%AM10, 5000)
      throw %24"];
  Node40080 -> Node40081;
  Node40080 -> Node40083;
  Node40081 -> Node40082;
  Node40081 -> Node40083;
  Node40082 -> Node40083;
  Node40083 -> Node40084;
  Node40083 -> Node40088;
  Node40084 -> Node40085;
  Node40085 -> Node40087;
  Node40085 -> Node40086[style="dotted"];
  Node40086 -> Node40087;
  Node40086 -> Node40089[style="dotted"];
  Node40087 -> Node40083;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM13(AssetTypeEnum)" {
  label="@ts_files/207.ts: %dflt.%AM13(AssetTypeEnum)";
  Node36920 [label="id:0
      type = parameter0: AssetTypeEnum
      this = this: @ts_files/207.ts: %dflt
      if type == 'IMAGE'"];
  Node36921 [label="id:1
      return 'Photo'"];
  Node36922 [label="id:2
      return 'Video'"];
  Node36923 [label="id:3
      return 'Asset'"];
  Node36924 [label="id:4
      if type == 'VIDEO'"];
  Node36920 -> Node36921;
  Node36920 -> Node36924;
  Node36924 -> Node36922;
  Node36924 -> Node36923;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM15$%AM14(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM15$%AM14(unknown)";
  Node34590 [label="id:0
      a = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = a.<@%unk/%unk: .id>
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM16$%AM14(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM16$%AM14(unknown)";
  Node34600 [label="id:0
      a = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = a.<@%unk/%unk: .ownerId>
      %1 = user.<@%unk/%unk: .id>
      %2 = %0 === %1
      %3 = user && %2
      return %3"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM17$%AM14(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM17$%AM14(unknown)";
  Node34610 [label="id:0
      a = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = a.<@%unk/%unk: .ownerId>
      %1 = user.<@%unk/%unk: .id>
      %2 = %0 !== %1
      %3 = user && %2
      return %3"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM14(Set<AssetResponseDto>, UserResponseDto|null)" {
  label="@ts_files/207.ts: %dflt.%AM14(Set<AssetResponseDto>, UserResponseDto|null)";
  Node66340 [label="id:0
      assets = parameter0: Set<AssetResponseDto>
      user = parameter1: UserResponseDto|null
      this = this: @ts_files/207.ts: %dflt
      %0 = newarray (unknown)[1]
      %0[0] = ...assets
      %1 = instanceinvoke %0.<@%unk/%unk: .filter()>(%AM16$%AM14)
      ids = instanceinvoke %1.<@%unk/%unk: .map()>(%AM15$%AM14)
      %2 = newarray (unknown)[1]
      %2[0] = ...assets
      %3 = instanceinvoke %2.<@%unk/%unk: .filter()>(%AM17$%AM14)
      numberOfIssues = %3.<@ES2015/BuiltinClass: RegExp.length>
      if numberOfIssues > 0"];
  Node66341 [label="id:1
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM14$39
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM14$39.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%4)"];
  Node66342 [label="id:2
      return ids"];
  Node66340 -> Node66341;
  Node66340 -> Node66342;
  Node66341 -> Node66342;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM19$%AM18(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM19$%AM18(unknown)";
  Node34670 [label="id:0
      asset = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .id>
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM18(AssetResponseDto[], unknown)" {
  label="@ts_files/207.ts: %dflt.%AM18(AssetResponseDto[], unknown)";
  Node50600 [label="id:0
      assets = parameter0: AssetResponseDto[]
      showNotification = parameter1: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = assets.<@%unk/%unk: .length>
      if %0 < 2"];
  Node50601 [label="id:1
      return false"];
  Node50602 [label="id:2
      $t = staticinvoke <@%unk/%unk: .get()>(t)"];
  Node50603 [label="id:3
      %1 = new @ts_files/207.ts: %AC$%dflt$%AM18$42
      instanceinvoke %1.<@ts_files/207.ts: %AC$%dflt$%AM18$42.constructor()>()
      %2 = staticinvoke <@%unk/%unk: .createStack()>(%1)
      stack = await %2
      if showNotification != 0
      %4 = instanceinvoke assets.<@%unk/%unk: .entries()>()
      %5 = instanceinvoke %4.<@%unk/%unk: .iterator()>()"];
  Node50604 [label="id:4
      %3 = new @ts_files/207.ts: %AC$%dflt$%AM18$44
      instanceinvoke %3.<@ts_files/207.ts: %AC$%dflt$%AM18$44.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%3)"];
  Node50605 [label="id:5
      %6 = instanceinvoke %5.<@%unk/%unk: .next()>()
      %7 = %6.<@ES2015/BuiltinClass: IteratorResult.done>
      if %7 == true"];
  Node50606 [label="id:6
      %12 = instanceinvoke assets.<@%unk/%unk: .slice()>(1)
      %13 = instanceinvoke %12.<@%unk/%unk: .map()>(%AM19$%AM18)
      return %13"];
  Node50607 [label="id:7
      error = caughtexception: unknown
      %14 = staticinvoke <@%unk/%unk: .$t()>('errors.failed_to_stack_assets')
      staticinvoke <@%unk/%unk: .handleError()>(error, %14)
      return false"];
  Node50608 [label="id:8
      return"];
  Node50609 [label="id:9
      %8 = %6.<@ES2015/BuiltinClass: IteratorResult.value>
      %9 = <@ts_files/207.ts: %AC$%dflt$%AM10$30>%8
      index = %9[0]
      asset = %9[1]
      if index === 0"];
  Node506010 [label="id:10
      %10 = new @ts_files/207.ts: %AC$%dflt$%AM18$48
      instanceinvoke %10.<@ts_files/207.ts: %AC$%dflt$%AM18$48.constructor()>()
      %11 = %10"];
  Node506011 [label="id:11
      %11 = null"];
  Node506012 [label="id:12
      asset.<@%unk/%unk: .stack> = %11"];
  Node50600 -> Node50601;
  Node50600 -> Node50602;
  Node50602 -> Node50603;
  Node50603 -> Node50604;
  Node50603 -> Node50605;
  Node50604 -> Node50605;
  Node50605 -> Node50606;
  Node50605 -> Node50609;
  Node50607 -> Node50608;
  Node50609 -> Node506010;
  Node50609 -> Node506011;
  Node506010 -> Node506012;
  Node506011 -> Node506012;
  Node506012 -> Node50605;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM21$%AM20(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM21$%AM20(unknown)";
  Node34530 [label="id:0
      id = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM21$%AM20$49
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM21$%AM20$49.constructor()>()
      %1 = staticinvoke <@%unk/%unk: .getStack()>(%0)
      return %1"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM22$%AM20(unknown, unknown)" {
  label="@ts_files/207.ts: %dflt.%AM22$%AM20(unknown, unknown)";
  Node43140 [label="id:0
      sum = parameter0: unknown
      stack = parameter1: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = stack.<@%unk/%unk: .assets>
      %1 = %0.<@%unk/%unk: .length>
      %2 = sum + %1
      return %2"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM23$%AM20(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM23$%AM20(unknown)";
  Node34550 [label="id:0
      stack = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = stack.<@%unk/%unk: .assets>
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM20(string[])" {
  label="@ts_files/207.ts: %dflt.%AM20(string[])";
  Node32020 [label="id:0
      stackIds = parameter0: string[]
      this = this: @ts_files/207.ts: %dflt
      %0 = newarray (unknown)[1]
      %0[0] = ...new Set(stackIds)
      ids = %0
      %1 = ids.<@%unk/%unk: .length>
      if %1 === 0"];
  Node32021 [label="id:1
      return"];
  Node32022 [label="id:2
      $t = staticinvoke <@%unk/%unk: .get()>(t)"];
  Node32023 [label="id:3
      %2 = instanceinvoke ids.<@%unk/%unk: .map()>(%AM21$%AM20)
      %3 = instanceinvoke Promise.<@%unk/%unk: .all()>(%2)
      stacks = await %3
      count = instanceinvoke stacks.<@%unk/%unk: .reduce()>(%AM22$%AM20, 0)
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM20$50
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM20$50.constructor()>()
      %5 = staticinvoke <@%unk/%unk: .deleteStacks()>(%4)
      %6 = await %5
      %7 = new @ts_files/207.ts: %AC$%dflt$%AM20$52
      instanceinvoke %7.<@ts_files/207.ts: %AC$%dflt$%AM20$52.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%7)
      assets = instanceinvoke stacks.<@%unk/%unk: .flatMap()>(%AM23$%AM20)
      %8 = instanceinvoke assets.<@%unk/%unk: .iterator()>()"];
  Node32024 [label="id:4
      %9 = instanceinvoke %8.<@%unk/%unk: .next()>()
      %10 = %9.<@ES2015/BuiltinClass: IteratorResult.done>
      if %10 == true"];
  Node32025 [label="id:5
      %11 = %9.<@ES2015/BuiltinClass: IteratorResult.value>
      asset = <@ts_files/207.ts: %AC$%dflt$%AM10$30>%11
      asset.<@ts_files/207.ts: %AC$%dflt$%AM10$30.stack> = null"];
  Node32026 [label="id:6
      return assets"];
  Node32027 [label="id:7
      error = caughtexception: unknown
      %12 = staticinvoke <@%unk/%unk: .$t()>('errors.failed_to_unstack_assets')
      staticinvoke <@%unk/%unk: .handleError()>(error, %12)"];
  Node32028 [label="id:8
      return"];
  Node32020 -> Node32021;
  Node32020 -> Node32022;
  Node32022 -> Node32023;
  Node32023 -> Node32024;
  Node32024 -> Node32025;
  Node32024 -> Node32026;
  Node32025 -> Node32024;
  Node32027 -> Node32028;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM25$%AM24(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM25$%AM24(unknown)";
  Node34610 [label="id:0
      asset = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .id>
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM26$%AM24(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM26$%AM24(unknown)";
  Node34620 [label="id:0
      asset = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = asset.<@%unk/%unk: .id>
      %1 = keepAsset.<@%unk/%unk: .id>
      %2 = %0 !== %1
      return %2"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM24(AssetResponseDto, StackResponseDto)" {
  label="@ts_files/207.ts: %dflt.%AM24(AssetResponseDto, StackResponseDto)";
  Node57330 [label="id:0
      keepAsset = parameter0: AssetResponseDto
      stack = parameter1: StackResponseDto
      this = this: @ts_files/207.ts: %dflt
      $t = staticinvoke <@%unk/%unk: .get()>(t)"];
  Node57331 [label="id:1
      %0 = stack.<@%unk/%unk: .assets>
      %1 = instanceinvoke %0.<@%unk/%unk: .filter()>(%AM26$%AM24)
      assetsToDeleteIds = instanceinvoke %1.<@%unk/%unk: .map()>(%AM25$%AM24)
      %2 = new @ts_files/207.ts: %AC$%dflt$%AM24$55
      instanceinvoke %2.<@ts_files/207.ts: %AC$%dflt$%AM24$55.constructor()>()
      %3 = staticinvoke <@%unk/%unk: .deleteAssets()>(%2)
      %4 = await %3
      %5 = new @ts_files/207.ts: %AC$%dflt$%AM24$57
      instanceinvoke %5.<@ts_files/207.ts: %AC$%dflt$%AM24$57.constructor()>()
      %6 = staticinvoke <@%unk/%unk: .deleteStacks()>(%5)
      %7 = await %6
      %8 = new @ts_files/207.ts: %AC$%dflt$%AM24$59
      instanceinvoke %8.<@ts_files/207.ts: %AC$%dflt$%AM24$59.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%8)
      keepAsset.<@%unk/%unk: .stack> = null
      return keepAsset"];
  Node57332 [label="id:2
      error = caughtexception: unknown
      %9 = staticinvoke <@%unk/%unk: .$t()>('errors.failed_to_keep_this_delete_others')
      staticinvoke <@%unk/%unk: .handleError()>(error, %9)"];
  Node57333 [label="id:3
      return"];
  Node57330 -> Node57331;
  Node57332 -> Node57333;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM27(AssetStore, AssetInteractionStore)" {
  label="@ts_files/207.ts: %dflt.%AM27(AssetStore, AssetInteractionStore)";
  Node56640 [label="id:0
      assetStore = parameter0: AssetStore
      assetInteractionStore = parameter1: AssetInteractionStore
      this = this: @ts_files/207.ts: %dflt
      %0 = staticinvoke <@%unk/%unk: .get()>(isSelectingAllAssets)
      if %0 != 0"];
  Node56641 [label="id:1
      return"];
  Node56642 [label="id:2
      instanceinvoke isSelectingAllAssets.<@%unk/%unk: .set()>(true)
      %1 = assetStore.<@%unk/%unk: .buckets>
      %2 = instanceinvoke %1.<@%unk/%unk: .iterator()>()"];
  Node56643 [label="id:3
      %3 = instanceinvoke %2.<@%unk/%unk: .next()>()
      %4 = %3.<@ES2015/BuiltinClass: IteratorResult.done>
      if %4 == true"];
  Node56644 [label="id:4
      %5 = %3.<@ES2015/BuiltinClass: IteratorResult.value>
      bucket = <string>%5
      %6 = bucket.<@%unk/%unk: .bucketDate>
      %7 = instanceinvoke assetStore.<@%unk/%unk: .loadBucket()>(%6)
      %8 = await %7
      %9 = staticinvoke <@%unk/%unk: .get()>(isSelectingAllAssets)
      %10 = !%9
      if %10 != 0"];
  Node56645 [label="id:5
      %11 = bucket.<@%unk/%unk: .assets>
      instanceinvoke assetInteractionStore.<@%unk/%unk: .selectAssets()>(%11)
      %12 = staticinvoke <@%unk/%unk: .delay()>(0)
      %13 = await %12"];
  Node56646 [label="id:6
      error = caughtexception: unknown
      $t = staticinvoke <@%unk/%unk: .get()>(t)
      %14 = staticinvoke <@%unk/%unk: .$t()>('errors.error_selecting_all_assets')
      staticinvoke <@%unk/%unk: .handleError()>(error, %14)
      instanceinvoke isSelectingAllAssets.<@%unk/%unk: .set()>(false)"];
  Node56647 [label="id:7
      return"];
  Node56640 -> Node56641;
  Node56640 -> Node56642;
  Node56642 -> Node56643;
  Node56643 -> Node56644;
  Node56643 -> undefined;
  Node56644 -> Node56647;
  Node56644 -> Node56645;
  Node56644 -> Node56646[style="dotted"];
  Node56645 -> Node56643;
  Node56646 -> Node56647;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM28(AssetInteractionStore)" {
  label="@ts_files/207.ts: %dflt.%AM28(AssetInteractionStore)";
  Node45520 [label="id:0
      assetInteractionStore = parameter0: AssetInteractionStore
      this = this: @ts_files/207.ts: %dflt
      instanceinvoke isSelectingAllAssets.<@%unk/%unk: .set()>(false)
      instanceinvoke assetInteractionStore.<@%unk/%unk: .clearMultiselect()>()
      return"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM29(AssetResponseDto)" {
  label="@ts_files/207.ts: %dflt.%AM29(AssetResponseDto)";
  Node40180 [label="id:0
      asset = parameter0: AssetResponseDto
      this = this: @ts_files/207.ts: %dflt
      $t = staticinvoke <@%unk/%unk: .get()>(t)"];
  Node40181 [label="id:1
      %0 = new @ts_files/207.ts: %AC$%dflt$%AM29$62
      instanceinvoke %0.<@ts_files/207.ts: %AC$%dflt$%AM29$62.constructor()>()
      %1 = staticinvoke <@%unk/%unk: .updateAsset()>(%0)
      data = await %1
      %2 = data['isArchived']
      asset.<@%unk/%unk: .isArchived> = %2
      %3 = new @ts_files/207.ts: %AC$%dflt$%AM29$64
      instanceinvoke %3.<@ts_files/207.ts: %AC$%dflt$%AM29$64.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%3)"];
  Node40182 [label="id:2
      error = caughtexception: unknown
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM29$65
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM29$65.constructor()>()
      %5 = staticinvoke <@%unk/%unk: .$t()>('errors.unable_to_add_remove_archive', %4)
      staticinvoke <@%unk/%unk: .handleError()>(error, %5)"];
  Node40183 [label="id:3
      return asset"];
  Node40180 -> Node40181;
  Node40181 -> Node40183;
  Node40181 -> Node40182[style="dotted"];
  Node40182 -> Node40183;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM31$%AM30(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM31$%AM30(unknown)";
  Node34550 [label="id:0
      ObjectBindingPattern = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      return id"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM30(AssetResponseDto[], boolean)" {
  label="@ts_files/207.ts: %dflt.%AM30(AssetResponseDto[], boolean)";
  Node50060 [label="id:0
      assets = parameter0: AssetResponseDto[]
      archive = parameter1: boolean
      this = this: @ts_files/207.ts: %dflt
      isArchived = archive
      ids = instanceinvoke assets.<@%unk/%unk: .map()>(%AM31$%AM30)
      $t = staticinvoke <@%unk/%unk: .get()>(t)"];
  Node50061 [label="id:1
      %0 = ids.<@%unk/%unk: .length>
      if %0 > 0
      %4 = instanceinvoke assets.<@%unk/%unk: .iterator()>()"];
  Node50062 [label="id:2
      %1 = new @ts_files/207.ts: %AC$%dflt$%AM30$67
      instanceinvoke %1.<@ts_files/207.ts: %AC$%dflt$%AM30$67.constructor()>()
      %2 = staticinvoke <@%unk/%unk: .updateAssets()>(%1)
      %3 = await %2"];
  Node50063 [label="id:3
      %5 = instanceinvoke %4.<@%unk/%unk: .next()>()
      %6 = %5.<@ES2015/BuiltinClass: IteratorResult.done>
      if %6 == true"];
  Node50064 [label="id:4
      %7 = %5.<@ES2015/BuiltinClass: IteratorResult.value>
      asset = <unknown>%7
      asset.<@%unk/%unk: .isArchived> = isArchived"];
  Node50065 [label="id:5
      %8 = new @ts_files/207.ts: %AC$%dflt$%AM30$69
      instanceinvoke %8.<@ts_files/207.ts: %AC$%dflt$%AM30$69.constructor()>()
      instanceinvoke notificationController.<@%unk/%unk: .show()>(%8)"];
  Node50066 [label="id:6
      error = caughtexception: unknown
      %9 = new @ts_files/207.ts: %AC$%dflt$%AM30$74
      instanceinvoke %9.<@ts_files/207.ts: %AC$%dflt$%AM30$74.constructor()>()
      %10 = staticinvoke <@%unk/%unk: .$t()>('errors.unable_to_archive_unarchive', %9)
      staticinvoke <@%unk/%unk: .handleError()>(error, %10)"];
  Node50067 [label="id:7
      return ids"];
  Node50060 -> Node50061;
  Node50061 -> Node50062;
  Node50061 -> Node50063;
  Node50062 -> Node50063;
  Node50063 -> Node50064;
  Node50063 -> Node50065;
  Node50064 -> Node50063;
  Node50065 -> Node50067;
  Node50065 -> Node50066[style="dotted"];
  Node50066 -> Node50067;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM33$%AM32(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM33$%AM32(unknown)";
  Node34590 [label="id:0
      resolve = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = staticinvoke <@%unk/%unk: .setTimeout()>(resolve, ms)
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM32(number)" {
  label="@ts_files/207.ts: %dflt.%AM32(number)";
  Node30070 [label="id:0
      ms = parameter0: number
      this = this: @ts_files/207.ts: %dflt
      %0 = new @%unk/%unk: Promise
      instanceinvoke %0.<@%unk/%unk: Promise.constructor()>(%AM33$%AM32)
      return %0"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM34()" {
  label="@ts_files/207.ts: %dflt.%AM34()";
  Node23600 [label="id:0
      this = this: @ts_files/207.ts: %dflt
      %0 = navigator.<@%unk/%unk: .clipboard>
      %1 = window.<@%unk/%unk: .ClipboardItem>
      %2 = %0 && %1
      %3 = !%2
      %4 = !%3
      return %4"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM37$%AM36$%AM35(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM37$%AM36$%AM35(unknown)";
  Node37860 [label="id:0
      blob = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      if blob != 0"];
  Node37861 [label="id:1
      staticinvoke <@%unk/%unk: .resolve()>(blob)"];
  Node37862 [label="id:2
      %0 = new @%unk/%unk: Error
      instanceinvoke %0.<@%unk/%unk: Error.constructor()>('Canvas conversion to Blob failed')
      throw %0"];
  Node37863 [label="id:3
      return"];
  Node37860 -> Node37861;
  Node37860 -> Node37862;
  Node37861 -> Node37863;
  Node37862 -> Node37863;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM36$%AM35(unknown)" {
  label="@ts_files/207.ts: %dflt.%AM36$%AM35(unknown)";
  Node34650 [label="id:0
      resolve = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      instanceinvoke canvas.<@%unk/%unk: .toBlob()>(%AM37$%AM36$%AM35)
      return"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM35(HTMLImageElement)" {
  label="@ts_files/207.ts: %dflt.%AM35(HTMLImageElement)";
  Node38670 [label="id:0
      imageElement = parameter0: HTMLImageElement
      this = this: @ts_files/207.ts: %dflt
      canvas = instanceinvoke document.<@%unk/%unk: .createElement()>('canvas')
      context = instanceinvoke canvas.<@%unk/%unk: .getContext()>('2d')
      %0 = imageElement.<@%unk/%unk: .naturalWidth>
      canvas.<@%unk/%unk: .width> = %0
      %1 = imageElement.<@%unk/%unk: .naturalHeight>
      canvas.<@%unk/%unk: .height> = %1
      if context != 0"];
  Node38671 [label="id:1
      instanceinvoke context.<@%unk/%unk: .drawImage()>(imageElement, 0, 0)
      %2 = new @%unk/%unk: Promise<Blob>
      instanceinvoke %2.<@%unk/%unk: Promise.constructor()>(%AM36$%AM35)
      return await %2"];
  Node38672 [label="id:2
      %3 = new @%unk/%unk: Error
      instanceinvoke %3.<@%unk/%unk: Error.constructor()>('Canvas context is null')
      throw %3
      return"];
  Node38670 -> Node38671;
  Node38670 -> Node38672;
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM38(string)" {
  label="@ts_files/207.ts: %dflt.%AM38(string)";
  Node30270 [label="id:0
      imageSource = parameter0: string
      this = this: @ts_files/207.ts: %dflt
      %0 = staticinvoke <@%unk/%unk: .fetch()>(imageSource)
      response = await %0
      %1 = instanceinvoke response.<@%unk/%unk: .blob()>()
      return await %1"];
}
subgraph "cluster_@ts_files/207.ts: %dflt.%AM39(HTMLImageElement|string)" {
  label="@ts_files/207.ts: %dflt.%AM39(HTMLImageElement|string)";
  Node46580 [label="id:0
      source = parameter0: HTMLImageElement|string
      this = this: @ts_files/207.ts: %dflt
      if source instanceof HTMLImageElement != false"];
  Node46581 [label="id:1
      %0 = staticinvoke <@%unk/%unk: .imgToBlob()>(source)
      blob = await %0"];
  Node46582 [label="id:2
      %2 = staticinvoke <@%unk/%unk: .urlToBlob()>(source)
      blob = await %2"];
  Node46583 [label="id:3
      %3 = new @%unk/%unk: ClipboardItem
      %4 = new @ts_files/207.ts: %AC$%dflt$%AM39$76
      instanceinvoke %4.<@ts_files/207.ts: %AC$%dflt$%AM39$76.constructor()>()
      instanceinvoke %3.<@%unk/%unk: ClipboardItem.constructor()>(%4)
      %5 = newarray (@%unk/%unk: ClipboardItem)[1]
      %5[0] = %3
      %6 = navigator.<@%unk/%unk: .clipboard>
      %7 = instanceinvoke %6.<@%unk/%unk: .write()>(%5)
      %8 = await %7
      return"];
  Node46580 -> Node46581;
  Node46580 -> Node46582;
  Node46581 -> Node46583;
  Node46582 -> Node46583;
}
subgraph "cluster_@ts_files/207.ts: %AC$%AC$%dflt$%AM0$2$%instInit$7.onClick()" {
  label="@ts_files/207.ts: %AC$%AC$%dflt$%AM0$2$%instInit$7.onClick()";
  Node45580 [label="id:0
      this = this: @ts_files/207.ts: %AC$%AC$%dflt$%AM0$2$%instInit$7
      %0 = AppRoute.<@%unk/%unk: .ALBUMS>
      %1 = %0 + '/'
      %2 = %1 + albumId
      %3 = staticinvoke <@%unk/%unk: .goto()>(%2)
      return %3"];
}
subgraph "cluster_@ts_files/207.ts: %AC$%AC$%dflt$%AM4$20$%instInit$24.onClick()" {
  label="@ts_files/207.ts: %AC$%AC$%dflt$%AM4$20$%instInit$24.onClick()";
  Node46570 [label="id:0
      this = this: @ts_files/207.ts: %AC$%AC$%dflt$%AM4$20$%instInit$24
      %0 = AppRoute.<@%unk/%unk: .ALBUMS>
      %1 = album.<@%unk/%unk: .id>
      %2 = %0 + '/'
      %3 = %2 + %1
      %4 = staticinvoke <@%unk/%unk: .goto()>(%3)
      return %4"];
}
subgraph "cluster_@ts_files/207.ts: %AC$%dflt$%AM7$28.%AM0$%instInit(unknown)" {
  label="@ts_files/207.ts: %AC$%dflt$%AM7$28.%AM0$%instInit(unknown)";
  Node46290 [label="id:0
      event = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = event.<@%unk/%unk: .loaded>
      %1 = instanceinvoke downloadManager.<@%unk/%unk: .update()>(downloadKey, %0)
      return %1"];
}
subgraph "cluster_@ts_files/207.ts: %AC$%dflt$%AM10$36.%AM0$%instInit(unknown)" {
  label="@ts_files/207.ts: %AC$%dflt$%AM10$36.%AM0$%instInit(unknown)";
  Node46700 [label="id:0
      event = parameter0: unknown
      this = this: @ts_files/207.ts: %dflt
      %0 = event.<@%unk/%unk: .loaded>
      %1 = event.<@%unk/%unk: .total>
      %2 = instanceinvoke downloadManager.<@%unk/%unk: .update()>(downloadKey, %0, %1)
      return %2"];
}
subgraph "cluster_@ts_files/207.ts: %AC$%AC$%dflt$%AM18$42$%instInit$43.%AM0$%instInit(unknown)" {
  label="@ts_files/207.ts: %AC$%AC$%dflt$%AM18$42$%instInit$43.%AM0$%instInit(unknown)";
  Node59420 [label="id:0
      ObjectBindingPattern = parameter0: unknown
      this = this: @ts_files/207.ts: %AC$%AC$%dflt$%AM18$42$%instInit$43
      return id"];
}
subgraph "cluster_@ts_files/207.ts: %AC$%AC$%dflt$%AM18$44$%instInit$47.%AM0$%instInit()" {
  label="@ts_files/207.ts: %AC$%AC$%dflt$%AM18$44$%instInit$47.%AM0$%instInit()";
  Node51640 [label="id:0
      this = this: @ts_files/207.ts: %AC$%AC$%dflt$%AM18$44$%instInit$47
      %0 = stack.<@%unk/%unk: .primaryAssetId>
      %1 = instanceinvoke assetViewingStore.<@%unk/%unk: .setAssetId()>(%0)
      return %1"];
}
}
