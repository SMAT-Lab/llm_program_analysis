digraph "89.ts" {
subgraph "cluster_@ts_files/89.ts: %dflt.[static]%dflt()" {
  label="@ts_files/89.ts: %dflt.[static]%dflt()";
  Node33330 [label="id:0
      this = this: @ts_files/89.ts: %dflt
      TAG = '[MediaUtils]'
      %0 = new @ts_files/89.ts: MediaUtils
      instanceinvoke %0.<@ts_files/89.ts: MediaUtils.constructor()>()
      default = %0
      return"];
}
subgraph "cluster_@ts_files/89.ts: MediaUtils.createAndGetFile(any)" {
  label="@ts_files/89.ts: MediaUtils.createAndGetFile(any)";
  Node44870 [label="id:0
      context = parameter0: any
      this = this: @ts_files/89.ts: MediaUtils
      mediaTest = instanceinvoke photoAccessHelper.<@%unk/%unk: .getPhotoAccessHelper()>(context)
      %0 = new @ts_files/89.ts: %AC$MediaUtils$createAndGetFile$0
      instanceinvoke %0.<@ts_files/89.ts: %AC$MediaUtils$createAndGetFile$0.constructor()>()
      info = %0
      %1 = new @%unk/%unk: DateTimeUtil
      instanceinvoke %1.<@%unk/%unk: DateTimeUtil.constructor()>()
      dateTimeUtil = %1
      %2 = instanceinvoke dateTimeUtil.<@%unk/%unk: .getDate()>()
      %3 = instanceinvoke dateTimeUtil.<@%unk/%unk: .getTime()>()
      %4 = %2 + '_'
      %5 = %4 + %3
      name = %5
      %6 = info.<@ts_files/89.ts: %AC$MediaUtils$createAndGetFile$0.prefix>
      %7 = info.<@ts_files/89.ts: %AC$MediaUtils$createAndGetFile$0.suffix>
      %8 = %6 + name
      %9 = %8 + %7
      displayName = %9
      %10 = photoAccessHelper.<@%unk/%unk: .PhotoType>
      photoType = %10.<@%unk/%unk: .IMAGE>
      %11 = new @ts_files/89.ts: %AC$MediaUtils$createAndGetFile$1
      instanceinvoke %11.<@ts_files/89.ts: %AC$MediaUtils$createAndGetFile$1.constructor()>()
      options = %11
      return await instanceinvoke mediaTest.<@%unk/%unk: .createAsset()>(photoType, '.jpg', options)"];
}
subgraph "cluster_@ts_files/89.ts: MediaUtils.savePicture(image.PixelMap, any)" {
  label="@ts_files/89.ts: MediaUtils.savePicture(image.PixelMap, any)";
  Node55120 [label="id:0
      data = parameter0: image.PixelMap
      context = parameter1: any
      this = this: @ts_files/89.ts: MediaUtils
      instanceinvoke console.<@%unk/%unk: .log()>(TAG, 'savePicture')
      %0 = new @ts_files/89.ts: %AC$MediaUtils$savePicture$2
      instanceinvoke %0.<@ts_files/89.ts: %AC$MediaUtils$savePicture$2.constructor()>()
      packOpts = %0
      imagePackerApi = instanceinvoke image.<@%unk/%unk: .createImagePacker()>()
      arrayBuffer = await instanceinvoke imagePackerApi.<@%unk/%unk: .packing()>(data, packOpts)
      fileAsset = await instanceinvoke this.<@ts_files/89.ts: MediaUtils.createAndGetFile(any)>(context)
      %1 = fs.<@%unk/%unk: .OpenMode>
      %2 = %1.<@%unk/%unk: .READ_WRITE>
      %3 = fs.<@%unk/%unk: .OpenMode>
      %4 = %3.<@%unk/%unk: .CREATE>
      %5 = %2 | %4
      file = await instanceinvoke fs.<@%unk/%unk: .open()>(fileAsset, %5)
      instanceinvoke imagePackerApi.<@%unk/%unk: .release()>()
      %6 = file.<@%unk/%unk: .fd>
      %7 = await instanceinvoke fs.<@%unk/%unk: .write()>(%6, arrayBuffer)"];
  Node55121 [label="id:1
      %8 = file.<@%unk/%unk: .fd>
      %9 = await instanceinvoke fs.<@%unk/%unk: .close()>(%8)
      instanceinvoke console.<@%unk/%unk: .log()>(TAG, 'write done')
      %10 = new @ts_files/89.ts: %AC$MediaUtils$savePicture$3
      instanceinvoke %10.<@ts_files/89.ts: %AC$MediaUtils$savePicture$3.constructor()>()
      instanceinvoke prompt.<@%unk/%unk: .showToast()>(%10)
      return"];
  Node55122 [label="id:2
      err = caughtexception: unknown
      %11 = err.<@%unk/%unk: .code>
      %12 = err.<@%unk/%unk: .message>
      %13 = 'write failed, code is ' + %11
      %14 = %13 + ', message is '
      %15 = %14 + %12
      instanceinvoke console.<@%unk/%unk: .log()>(%15)"];
  Node55120 -> Node55121;
}
}
