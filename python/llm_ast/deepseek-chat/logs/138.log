2025-01-08 10:15:09,308 - INFO - Processing sample 138
2025-01-08 10:15:09,309 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:15:12,616 - INFO - Successfully split code into 4 top-level declarations
2025-01-08 10:15:12,619 - INFO - Processing chunk #0 (size=372 chars, start_index=0)
2025-01-08 10:15:12,619 - INFO - Processing chunk with 372 chars starting at index 0
2025-01-08 10:15:12,619 - INFO - Starting main AST analysis flow
2025-01-08 10:15:12,620 - INFO - Tokenized code into 72 tokens
2025-01-08 10:15:12,620 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:15:12,621 - INFO - Processing chunk #1 (size=204 chars, start_index=72)
2025-01-08 10:15:12,621 - INFO - Processing chunk with 204 chars starting at index 72
2025-01-08 10:15:12,621 - INFO - Starting main AST analysis flow
2025-01-08 10:15:12,621 - INFO - Tokenized code into 35 tokens
2025-01-08 10:15:12,621 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:15:12,623 - INFO - Processing chunk #2 (size=174 chars, start_index=107)
2025-01-08 10:15:12,623 - INFO - Processing chunk with 174 chars starting at index 107
2025-01-08 10:15:12,623 - INFO - Starting main AST analysis flow
2025-01-08 10:15:12,624 - INFO - Tokenized code into 34 tokens
2025-01-08 10:15:12,624 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:15:12,628 - INFO - Processing chunk #3 (size=5990 chars, start_index=141)
2025-01-08 10:15:12,628 - INFO - Processing chunk with 5990 chars starting at index 141
2025-01-08 10:15:12,629 - INFO - Starting main AST analysis flow
2025-01-08 10:15:12,638 - INFO - Tokenized code into 870 tokens
2025-01-08 10:15:12,638 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:15:17,790 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 71], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 13], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 29], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [53, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [62, 70], 'children': []}]}
2025-01-08 10:15:17,790 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:15:18,062 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [107, 140], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [107, 139], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [109, 139], 'children': [{'type': 'Property', 'name': 'provider', 'range': [111, 115], 'children': []}, {'type': 'Property', 'name': 'id', 'range': [118, 122], 'children': []}, {'type': 'Property', 'name': 'type', 'range': [125, 129], 'children': []}, {'type': 'Property', 'name': 'title', 'range': [132, 136], 'children': []}]}]}]}
2025-01-08 10:15:18,062 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:15:20,277 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [72, 106], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [72, 106], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [73, 105], 'children': [{'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [74, 105], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [75, 105], 'children': [{'type': 'NamedArgument', 'name': 'id', 'range': [77, 79], 'children': []}, {'type': 'NamedArgument', 'name': 'provider', 'range': [82, 84], 'children': []}, {'type': 'NamedArgument', 'name': 'api_key', 'range': [87, 92], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [89, 92], 'children': []}]}, {'type': 'NamedArgument', 'name': 'title', 'range': [95, 97], 'children': []}, {'type': 'NamedArgument', 'name': 'expires_at', 'range': [100, 102], 'children': []}]}]}]}]}]}
2025-01-08 10:15:20,277 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:15:21,298 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [141, 1010], 'children': [{'type': 'ClassDeclaration', 'name': 'CreateTalkingAvatarVideoBlock', 'range': [141, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [147, 185], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [148, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [154, 185], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [405, 433], 'children': [{'type': 'ClassBody', 'name': '', 'range': [411, 433], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [435, 625], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'create_clip', 'range': [627, 694], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'get_clip_status', 'range': [696, 755], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [757, 1009], 'children': []}]}
2025-01-08 10:15:21,298 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:15:29,814 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'time', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [12, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 29], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [22, 22], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [24, 24], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [28, 28], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [42, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [45, 45], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [49, 49], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [62, 70], 'children': [{'type': 'ImportSpecifier', 'name': 'requests', 'range': [69, 69], 'children': []}]}]}
2025-01-08 10:15:29,814 - INFO - Starting Step 3: AST simplification
2025-01-08 10:15:30,625 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [107, 140], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [107, 139], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [109, 139], 'children': [{'type': 'Property', 'name': 'provider', 'range': [111, 115], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [115, 115], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [118, 122], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [118, 118], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [120, 120], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [122, 122], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [125, 129], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [125, 125], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [127, 127], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [129, 129], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [132, 136], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [136, 136], 'children': []}]}]}]}]}
2025-01-08 10:15:30,625 - INFO - Starting Step 3: AST simplification
2025-01-08 10:15:31,536 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [72, 106], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [72, 106], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [73, 105], 'children': [{'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [74, 105], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [75, 105], 'children': [{'type': 'NamedArgument', 'name': 'id', 'range': [77, 79], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [79, 79], 'children': []}]}, {'type': 'NamedArgument', 'name': 'provider', 'range': [82, 84], 'children': [{'type': 'Literal', 'name': '"d_id"', 'range': [84, 84], 'children': []}]}, {'type': 'NamedArgument', 'name': 'api_key', 'range': [87, 92], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [89, 92], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [90, 92], 'children': [{'type': 'Literal', 'name': '"mock-d-id-api-key"', 'range': [91, 91], 'children': []}]}]}]}, {'type': 'NamedArgument', 'name': 'title', 'range': [95, 97], 'children': [{'type': 'Literal', 'name': '"Mock D-ID API key"', 'range': [97, 97], 'children': []}]}, {'type': 'NamedArgument', 'name': 'expires_at', 'range': [100, 102], 'children': [{'type': 'Literal', 'name': 'None', 'range': [102, 102], 'children': []}]}]}]}]}]}]}
2025-01-08 10:15:31,537 - INFO - Starting Step 3: AST simplification
2025-01-08 10:15:42,477 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [72, 106], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [72, 106], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [73, 105], 'children': [{'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [74, 105], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [75, 105], 'children': [{'type': 'NamedArgument', 'name': 'id', 'range': [77, 79], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [79, 79], 'children': []}]}, {'type': 'NamedArgument', 'name': 'provider', 'range': [82, 84], 'children': [{'type': 'Literal', 'name': '"d_id"', 'range': [84, 84], 'children': []}]}, {'type': 'NamedArgument', 'name': 'api_key', 'range': [87, 92], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [89, 92], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [90, 92], 'children': [{'type': 'Literal', 'name': '"mock-d-id-api-key"', 'range': [91, 91], 'children': []}]}]}]}, {'type': 'NamedArgument', 'name': 'title', 'range': [95, 97], 'children': [{'type': 'Literal', 'name': '"Mock D-ID API key"', 'range': [97, 97], 'children': []}]}, {'type': 'NamedArgument', 'name': 'expires_at', 'range': [100, 102], 'children': [{'type': 'Literal', 'name': 'None', 'range': [102, 102], 'children': []}]}]}]}]}]}]}
2025-01-08 10:15:42,478 - INFO - Starting Step 4: AST normalization
2025-01-08 10:15:42,524 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'time', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [12, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 29], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [22, 22], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [24, 24], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [28, 28], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [42, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [45, 45], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [49, 49], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [62, 70], 'children': [{'type': 'ImportSpecifier', 'name': 'requests', 'range': [69, 69], 'children': []}]}]}
2025-01-08 10:15:42,524 - INFO - Starting Step 4: AST normalization
2025-01-08 10:15:43,102 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [107, 140], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [107, 139], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [109, 139], 'children': [{'type': 'Property', 'name': 'provider', 'range': [111, 115], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [115, 115], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [118, 122], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [118, 118], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [120, 120], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [122, 122], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [125, 129], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [125, 125], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [127, 127], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [129, 129], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [132, 136], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [136, 136], 'children': []}]}]}]}]}
2025-01-08 10:15:43,102 - INFO - Starting Step 4: AST normalization
2025-01-08 10:15:53,892 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [72, 106], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [72, 106], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [73, 105], 'children': [{'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [74, 105], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [75, 105], 'children': [{'type': 'NamedArgument', 'name': 'id', 'range': [77, 79], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [79, 79], 'children': []}]}, {'type': 'NamedArgument', 'name': 'provider', 'range': [82, 84], 'children': [{'type': 'Literal', 'name': '"d_id"', 'range': [84, 84], 'children': []}]}, {'type': 'NamedArgument', 'name': 'api_key', 'range': [87, 92], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [89, 92], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [90, 92], 'children': [{'type': 'Literal', 'name': '"mock-d-id-api-key"', 'range': [91, 91], 'children': []}]}]}]}, {'type': 'NamedArgument', 'name': 'title', 'range': [95, 97], 'children': [{'type': 'Literal', 'name': '"Mock D-ID API key"', 'range': [97, 97], 'children': []}]}, {'type': 'NamedArgument', 'name': 'expires_at', 'range': [100, 102], 'children': [{'type': 'Literal', 'name': 'None', 'range': [102, 102], 'children': []}]}]}]}]}]}]}
2025-01-08 10:15:53,892 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:15:55,618 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'time', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [12, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 29], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [22, 22], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [24, 24], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [28, 28], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [42, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [45, 45], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [49, 49], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [62, 70], 'children': [{'type': 'ImportSpecifier', 'name': 'requests', 'range': [69, 69], 'children': []}]}]}
2025-01-08 10:15:55,618 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:15:55,701 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [107, 140], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [107, 139], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [109, 139], 'children': [{'type': 'Property', 'name': 'provider', 'range': [111, 115], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [115, 115], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [118, 122], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [118, 118], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [120, 120], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [122, 122], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [125, 129], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [125, 125], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [127, 127], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [129, 129], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [132, 136], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [136, 136], 'children': []}]}]}]}]}
2025-01-08 10:15:55,701 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:16:05,043 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [72, 106], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [72, 106], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [73, 105], 'children': [{'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [74, 105], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [75, 105], 'children': [{'type': 'NamedArgument', 'name': 'id', 'range': [77, 79], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [79, 79], 'children': []}]}, {'type': 'NamedArgument', 'name': 'provider', 'range': [82, 84], 'children': [{'type': 'Literal', 'name': '"d_id"', 'range': [84, 84], 'children': []}]}, {'type': 'NamedArgument', 'name': 'api_key', 'range': [87, 92], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [89, 92], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [90, 92], 'children': [{'type': 'Literal', 'name': '"mock-d-id-api-key"', 'range': [91, 91], 'children': []}]}]}]}, {'type': 'NamedArgument', 'name': 'title', 'range': [95, 97], 'children': [{'type': 'Literal', 'name': '"Mock D-ID API key"', 'range': [97, 97], 'children': []}]}, {'type': 'NamedArgument', 'name': 'expires_at', 'range': [100, 102], 'children': [{'type': 'Literal', 'name': 'None', 'range': [102, 102], 'children': []}]}]}]}]}]}]}
2025-01-08 10:16:05,043 - INFO - Completed main AST analysis flow
2025-01-08 10:16:05,043 - INFO - Successfully processed chunk
2025-01-08 10:16:07,950 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [107, 140], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [107, 139], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [109, 139], 'children': [{'type': 'Property', 'name': 'provider', 'range': [111, 115], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [115, 115], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [118, 122], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [118, 118], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [120, 120], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [122, 122], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [125, 129], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [125, 125], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [127, 127], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [129, 129], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [132, 136], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [136, 136], 'children': []}]}]}]}]}
2025-01-08 10:16:07,950 - INFO - Completed main AST analysis flow
2025-01-08 10:16:07,950 - INFO - Successfully processed chunk
2025-01-08 10:16:09,424 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 70], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'time', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [12, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 29], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [22, 22], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [24, 24], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [28, 28], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [42, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [45, 45], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [49, 49], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [62, 70], 'children': [{'type': 'ImportSpecifier', 'name': 'requests', 'range': [69, 69], 'children': []}]}]}]}
2025-01-08 10:16:09,424 - INFO - Completed main AST analysis flow
2025-01-08 10:16:09,425 - INFO - Successfully processed chunk
2025-01-08 10:16:49,925 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [141, 1010], 'children': [{'type': 'ClassDeclaration', 'name': 'CreateTalkingAvatarVideoBlock', 'range': [141, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [147, 185], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [155, 184], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [157, 172], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [173, 184], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [174, 184], 'children': [{'type': 'Argument', 'name': 'description', 'range': [177, 182], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [148, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [154, 185], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [405, 433], 'children': [{'type': 'ClassBody', 'name': '', 'range': [411, 433], 'children': [{'type': 'FieldDeclaration', 'name': 'video_url', 'range': [412, 421], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [414, 417], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [415, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [416, 421], 'children': [{'type': 'Argument', 'name': 'description', 'range': [418, 420], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [423, 432], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [425, 428], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [427, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [429, 431], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [435, 625], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [441, 625], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [442, 445], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [442, 445], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [446, 624], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [446, 624], 'children': [{'type': 'Argument', 'name': 'id', 'range': [449, 451], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [454, 456], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [459, 465], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [468, 472], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [475, 479], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [482, 541], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [544, 559], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [562, 616], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [619, 621], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'create_clip', 'range': [627, 694], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [644, 694], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [645, 647], 'children': [{'type': 'Literal', 'name': '"https://api.d-id.com/clips"', 'range': [647, 647], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [649, 669], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [651, 669], 'children': [{'type': 'Property', 'name': 'accept', 'range': [653, 656], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [655, 655], 'children': []}]}, {'type': 'Property', 'name': 'content-type', 'range': [658, 661], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [660, 660], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [663, 667], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [665, 666], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [665, 665], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [666, 666], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [671, 686], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [673, 686], 'children': [{'type': 'Argument', 'name': 'url', 'range': [677, 677], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [679, 681], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [683, 685], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [688, 694], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [690, 694], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'get_clip_status', 'range': [696, 755], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [713, 755], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [714, 717], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [716, 717], 'children': [{'type': 'TemplateElement', 'name': 'https://api.d-id.com/clips/', 'range': [716, 716], 'children': []}, {'type': 'Expression', 'name': 'clip_id', 'range': [717, 717], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [719, 734], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [721, 734], 'children': [{'type': 'Property', 'name': 'accept', 'range': [723, 726], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [725, 725], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [728, 732], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [730, 731], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [730, 730], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [731, 731], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [736, 747], 'children': [{'type': 'CallExpression', 'name': 'requests.get', 'range': [738, 747], 'children': [{'type': 'Argument', 'name': 'url', 'range': [742, 742], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [744, 746], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [749, 755], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [751, 755], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [757, 1009], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [782, 1009], 'children': [{'type': 'VariableDeclaration', 'name': 'payload', 'range': [788, 901], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [790, 901], 'children': [{'type': 'Property', 'name': 'script', 'range': [792, 857], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [794, 857], 'children': [{'type': 'Property', 'name': 'type', 'range': [796, 799], 'children': [{'type': 'Literal', 'name': '"text"', 'range': [798, 798], 'children': []}]}, {'type': 'Property', 'name': 'subtitles', 'range': [801, 813], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [803, 813], 'children': [{'type': 'Argument', 'name': 'input_data.subtitles', 'range': [805, 807], 'children': []}]}]}, {'type': 'Property', 'name': 'provider', 'range': [815, 833], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [817, 833], 'children': [{'type': 'Property', 'name': 'type', 'range': [819, 824], 'children': [{'type': 'Identifier', 'name': 'input_data.provider', 'range': [821, 823], 'children': []}]}, {'type': 'Property', 'name': 'voice_id', 'range': [826, 831], 'children': [{'type': 'Identifier', 'name': 'input_data.voice_id', 'range': [828, 830], 'children': []}]}]}]}, {'type': 'Property', 'name': 'ssml', 'range': [835, 848], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [837, 848], 'children': [{'type': 'Argument', 'name': 'input_data.ssml', 'range': [839, 842], 'children': []}]}]}, {'type': 'Property', 'name': 'input', 'range': [850, 855], 'children': [{'type': 'Identifier', 'name': 'input_data.script_input', 'range': [852, 854], 'children': []}]}]}]}, {'type': 'Property', 'name': 'config', 'range': [860, 868], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [862, 868], 'children': [{'type': 'Property', 'name': 'result_format', 'range': [863, 867], 'children': [{'type': 'Identifier', 'name': 'input_data.result_format', 'range': [865, 867], 'children': []}]}]}]}, {'type': 'Property', 'name': 'presenter_config', 'range': [871, 883], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [873, 883], 'children': [{'type': 'Property', 'name': 'crop', 'range': [874, 882], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [876, 882], 'children': [{'type': 'Property', 'name': 'type', 'range': [877, 881], 'children': [{'type': 'Identifier', 'name': 'input_data.crop_type', 'range': [879, 881], 'children': []}]}]}]}]}]}, {'type': 'Property', 'name': 'presenter_id', 'range': [886, 891], 'children': [{'type': 'Identifier', 'name': 'input_data.presenter_id', 'range': [888, 890], 'children': []}]}, {'type': 'Property', 'name': 'driver_id', 'range': [893, 898], 'children': [{'type': 'Identifier', 'name': 'input_data.driver_id', 'range': [895, 897], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [903, 914], 'children': [{'type': 'CallExpression', 'name': 'self.create_clip', 'range': [905, 914], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [909, 911], 'children': []}, {'type': 'Argument', 'name': 'payload', 'range': [913, 913], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'clip_id', 'range': [916, 922], 'children': [{'type': 'MemberExpression', 'name': 'response.id', 'range': [918, 921], 'children': []}]}, {'type': 'ForStatement', 'name': '', 'range': [930, 1002], 'children': [{'type': 'VariableDeclaration', 'name': '_', 'range': [931, 931], 'children': []}, {'type': 'CallExpression', 'name': 'range', 'range': [933, 938], 'children': [{'type': 'Argument', 'name': 'input_data.max_polling_attempts', 'range': [935, 937], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [940, 1002], 'children': [{'type': 'VariableDeclaration', 'name': 'status_response', 'range': [941, 952], 'children': [{'type': 'CallExpression', 'name': 'self.get_clip_status', 'range': [943, 952], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [947, 949], 'children': []}, {'type': 'Argument', 'name': 'clip_id', 'range': [951, 951], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [954, 962], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [955, 961], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [956, 958], 'children': []}, {'type': 'Literal', 'name': '"done"', 'range': [960, 960], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [963, 971], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [964, 971], 'children': [{'type': 'Literal', 'name': '"video_url"', 'range': [965, 965], 'children': []}, {'type': 'MemberExpression', 'name': 'status_response.result_url', 'range': [967, 970], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [974, 982], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [975, 981], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [976, 978], 'children': []}, {'type': 'Literal', 'name': '"error"', 'range': [980, 980], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [983, 992], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [984, 992], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [985, 992], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [987, 990], 'children': [{'type': 'TemplateElement', 'name': 'Clip creation failed: ', 'range': [987, 987], 'children': []}, {'type': 'Expression', 'name': "status_response.get('error', 'Unknown error')", 'range': [989, 989], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [994, 1002], 'children': [{'type': 'CallExpression', 'name': 'time.sleep', 'range': [995, 1001], 'children': [{'type': 'Argument', 'name': 'input_data.polling_interval', 'range': [998, 1000], 'children': []}]}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [1004, 1009], 'children': [{'type': 'NewExpression', 'name': 'TimeoutError', 'range': [1005, 1009], 'children': [{'type': 'Literal', 'name': '"Clip creation timed out"', 'range': [1007, 1007], 'children': []}]}]}]}]}]}
2025-01-08 10:16:49,925 - INFO - Starting Step 3: AST simplification
2025-01-08 10:19:21,750 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [141, 1010], 'children': [{'type': 'ClassDeclaration', 'name': 'CreateTalkingAvatarVideoBlock', 'range': [141, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [147, 185], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [155, 184], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [157, 172], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [173, 184], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [174, 184], 'children': [{'type': 'Argument', 'name': 'description', 'range': [177, 182], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [148, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [154, 185], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [405, 433], 'children': [{'type': 'ClassBody', 'name': '', 'range': [411, 433], 'children': [{'type': 'FieldDeclaration', 'name': 'video_url', 'range': [412, 421], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [414, 417], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [415, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [416, 421], 'children': [{'type': 'Argument', 'name': 'description', 'range': [418, 420], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [423, 432], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [425, 428], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [427, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [429, 431], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [435, 625], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [441, 625], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [442, 445], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [442, 445], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [446, 624], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [446, 624], 'children': [{'type': 'Argument', 'name': 'id', 'range': [449, 451], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [454, 456], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [459, 465], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [468, 472], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [475, 479], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [482, 541], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [544, 559], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [562, 616], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [619, 621], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'create_clip', 'range': [627, 694], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [644, 694], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [645, 647], 'children': [{'type': 'Literal', 'name': '"https://api.d-id.com/clips"', 'range': [647, 647], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [649, 669], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [651, 669], 'children': [{'type': 'Property', 'name': 'accept', 'range': [653, 656], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [655, 655], 'children': []}]}, {'type': 'Property', 'name': 'content-type', 'range': [658, 661], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [660, 660], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [663, 667], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [665, 666], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [665, 665], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [666, 666], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [671, 686], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [673, 686], 'children': [{'type': 'Argument', 'name': 'url', 'range': [677, 677], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [679, 681], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [683, 685], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [688, 694], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [690, 694], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'get_clip_status', 'range': [696, 755], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [713, 755], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [714, 717], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [716, 717], 'children': [{'type': 'TemplateElement', 'name': 'https://api.d-id.com/clips/', 'range': [716, 716], 'children': []}, {'type': 'Expression', 'name': 'clip_id', 'range': [717, 717], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [719, 734], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [721, 734], 'children': [{'type': 'Property', 'name': 'accept', 'range': [723, 726], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [725, 725], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [728, 732], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [730, 731], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [730, 730], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [731, 731], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [736, 747], 'children': [{'type': 'CallExpression', 'name': 'requests.get', 'range': [738, 747], 'children': [{'type': 'Argument', 'name': 'url', 'range': [742, 742], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [744, 746], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [749, 755], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [751, 755], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [757, 1009], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [782, 1009], 'children': [{'type': 'VariableDeclaration', 'name': 'payload', 'range': [788, 901], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [790, 901], 'children': [{'type': 'Property', 'name': 'script', 'range': [792, 857], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [794, 857], 'children': [{'type': 'Property', 'name': 'type', 'range': [796, 799], 'children': [{'type': 'Literal', 'name': '"text"', 'range': [798, 798], 'children': []}]}, {'type': 'Property', 'name': 'subtitles', 'range': [801, 813], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [803, 813], 'children': [{'type': 'Argument', 'name': 'input_data.subtitles', 'range': [805, 807], 'children': []}]}]}, {'type': 'Property', 'name': 'provider', 'range': [815, 833], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [817, 833], 'children': [{'type': 'Property', 'name': 'type', 'range': [819, 824], 'children': [{'type': 'Identifier', 'name': 'input_data.provider', 'range': [821, 823], 'children': []}]}, {'type': 'Property', 'name': 'voice_id', 'range': [826, 831], 'children': [{'type': 'Identifier', 'name': 'input_data.voice_id', 'range': [828, 830], 'children': []}]}]}]}, {'type': 'Property', 'name': 'ssml', 'range': [835, 848], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [837, 848], 'children': [{'type': 'Argument', 'name': 'input_data.ssml', 'range': [839, 842], 'children': []}]}]}, {'type': 'Property', 'name': 'input', 'range': [850, 855], 'children': [{'type': 'Identifier', 'name': 'input_data.script_input', 'range': [852, 854], 'children': []}]}]}]}, {'type': 'Property', 'name': 'config', 'range': [860, 868], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [862, 868], 'children': [{'type': 'Property', 'name': 'result_format', 'range': [863, 867], 'children': [{'type': 'Identifier', 'name': 'input_data.result_format', 'range': [865, 867], 'children': []}]}]}]}, {'type': 'Property', 'name': 'presenter_config', 'range': [871, 883], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [873, 883], 'children': [{'type': 'Property', 'name': 'crop', 'range': [874, 882], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [876, 882], 'children': [{'type': 'Property', 'name': 'type', 'range': [877, 881], 'children': [{'type': 'Identifier', 'name': 'input_data.crop_type', 'range': [879, 881], 'children': []}]}]}]}]}]}, {'type': 'Property', 'name': 'presenter_id', 'range': [886, 891], 'children': [{'type': 'Identifier', 'name': 'input_data.presenter_id', 'range': [888, 890], 'children': []}]}, {'type': 'Property', 'name': 'driver_id', 'range': [893, 898], 'children': [{'type': 'Identifier', 'name': 'input_data.driver_id', 'range': [895, 897], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [903, 914], 'children': [{'type': 'CallExpression', 'name': 'self.create_clip', 'range': [905, 914], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [909, 911], 'children': []}, {'type': 'Argument', 'name': 'payload', 'range': [913, 913], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'clip_id', 'range': [916, 922], 'children': [{'type': 'MemberExpression', 'name': 'response.id', 'range': [918, 921], 'children': []}]}, {'type': 'ForStatement', 'name': '', 'range': [930, 1002], 'children': [{'type': 'VariableDeclaration', 'name': '_', 'range': [931, 931], 'children': []}, {'type': 'CallExpression', 'name': 'range', 'range': [933, 938], 'children': [{'type': 'Argument', 'name': 'input_data.max_polling_attempts', 'range': [935, 937], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [940, 1002], 'children': [{'type': 'VariableDeclaration', 'name': 'status_response', 'range': [941, 952], 'children': [{'type': 'CallExpression', 'name': 'self.get_clip_status', 'range': [943, 952], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [947, 949], 'children': []}, {'type': 'Argument', 'name': 'clip_id', 'range': [951, 951], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [954, 962], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [955, 961], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [956, 958], 'children': []}, {'type': 'Literal', 'name': '"done"', 'range': [960, 960], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [963, 971], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [964, 971], 'children': [{'type': 'Literal', 'name': '"video_url"', 'range': [965, 965], 'children': []}, {'type': 'MemberExpression', 'name': 'status_response.result_url', 'range': [967, 970], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [974, 982], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [975, 981], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [976, 978], 'children': []}, {'type': 'Literal', 'name': '"error"', 'range': [980, 980], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [983, 992], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [984, 992], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [985, 992], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [987, 990], 'children': [{'type': 'TemplateElement', 'name': 'Clip creation failed: ', 'range': [987, 987], 'children': []}, {'type': 'Expression', 'name': "status_response.get('error', 'Unknown error')", 'range': [989, 989], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [994, 1002], 'children': [{'type': 'CallExpression', 'name': 'time.sleep', 'range': [995, 1001], 'children': [{'type': 'Argument', 'name': 'input_data.polling_interval', 'range': [998, 1000], 'children': []}]}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [1004, 1009], 'children': [{'type': 'NewExpression', 'name': 'TimeoutError', 'range': [1005, 1009], 'children': [{'type': 'Literal', 'name': '"Clip creation timed out"', 'range': [1007, 1007], 'children': []}]}]}]}]}]}
2025-01-08 10:19:21,751 - INFO - Starting Step 4: AST normalization
2025-01-08 10:20:59,077 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [141, 1010], 'children': [{'type': 'ClassDecl', 'name': 'CreateTalkingAvatarVideoBlock', 'range': [141, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [147, 185], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [155, 184], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [157, 172], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [173, 184], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [174, 184], 'children': [{'type': 'Argument', 'name': 'description', 'range': [177, 182], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [148, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [154, 185], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [405, 433], 'children': [{'type': 'ClassBody', 'name': '', 'range': [411, 433], 'children': [{'type': 'FieldDecl', 'name': 'video_url', 'range': [412, 421], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [414, 417], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [415, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [416, 421], 'children': [{'type': 'Argument', 'name': 'description', 'range': [418, 420], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [423, 432], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [425, 428], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [427, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [429, 431], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [435, 625], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [441, 625], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [442, 445], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [442, 445], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [446, 624], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [446, 624], 'children': [{'type': 'Argument', 'name': 'id', 'range': [449, 451], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [454, 456], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [459, 465], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [468, 472], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [475, 479], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [482, 541], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [544, 559], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [562, 616], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [619, 621], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'create_clip', 'range': [627, 694], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [644, 694], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [645, 647], 'children': [{'type': 'Literal', 'name': '"https://api.d-id.com/clips"', 'range': [647, 647], 'children': []}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [649, 669], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [651, 669], 'children': [{'type': 'Property', 'name': 'accept', 'range': [653, 656], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [655, 655], 'children': []}]}, {'type': 'Property', 'name': 'content-type', 'range': [658, 661], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [660, 660], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [663, 667], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [665, 666], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [665, 665], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [666, 666], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [671, 686], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [673, 686], 'children': [{'type': 'Argument', 'name': 'url', 'range': [677, 677], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [679, 681], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [683, 685], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [688, 694], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [690, 694], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'get_clip_status', 'range': [696, 755], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [713, 755], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [714, 717], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [716, 717], 'children': [{'type': 'TemplateElement', 'name': 'https://api.d-id.com/clips/', 'range': [716, 716], 'children': []}, {'type': 'Expression', 'name': 'clip_id', 'range': [717, 717], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [719, 734], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [721, 734], 'children': [{'type': 'Property', 'name': 'accept', 'range': [723, 726], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [725, 725], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [728, 732], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [730, 731], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [730, 730], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [731, 731], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [736, 747], 'children': [{'type': 'CallExpression', 'name': 'requests.get', 'range': [738, 747], 'children': [{'type': 'Argument', 'name': 'url', 'range': [742, 742], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [744, 746], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [749, 755], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [751, 755], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [757, 1009], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [782, 1009], 'children': [{'type': 'VariableDecl', 'name': 'payload', 'range': [788, 901], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [790, 901], 'children': [{'type': 'Property', 'name': 'script', 'range': [792, 857], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [794, 857], 'children': [{'type': 'Property', 'name': 'type', 'range': [796, 799], 'children': [{'type': 'Literal', 'name': '"text"', 'range': [798, 798], 'children': []}]}, {'type': 'Property', 'name': 'subtitles', 'range': [801, 813], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [803, 813], 'children': [{'type': 'Argument', 'name': 'input_data.subtitles', 'range': [805, 807], 'children': []}]}]}, {'type': 'Property', 'name': 'provider', 'range': [815, 833], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [817, 833], 'children': [{'type': 'Property', 'name': 'type', 'range': [819, 824], 'children': [{'type': 'Identifier', 'name': 'input_data.provider', 'range': [821, 823], 'children': []}]}, {'type': 'Property', 'name': 'voice_id', 'range': [826, 831], 'children': [{'type': 'Identifier', 'name': 'input_data.voice_id', 'range': [828, 830], 'children': []}]}]}]}, {'type': 'Property', 'name': 'ssml', 'range': [835, 848], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [837, 848], 'children': [{'type': 'Argument', 'name': 'input_data.ssml', 'range': [839, 842], 'children': []}]}]}, {'type': 'Property', 'name': 'input', 'range': [850, 855], 'children': [{'type': 'Identifier', 'name': 'input_data.script_input', 'range': [852, 854], 'children': []}]}]}]}, {'type': 'Property', 'name': 'config', 'range': [860, 868], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [862, 868], 'children': [{'type': 'Property', 'name': 'result_format', 'range': [863, 867], 'children': [{'type': 'Identifier', 'name': 'input_data.result_format', 'range': [865, 867], 'children': []}]}]}]}, {'type': 'Property', 'name': 'presenter_config', 'range': [871, 883], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [873, 883], 'children': [{'type': 'Property', 'name': 'crop', 'range': [874, 882], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [876, 882], 'children': [{'type': 'Property', 'name': 'type', 'range': [877, 881], 'children': [{'type': 'Identifier', 'name': 'input_data.crop_type', 'range': [879, 881], 'children': []}]}]}]}]}]}, {'type': 'Property', 'name': 'presenter_id', 'range': [886, 891], 'children': [{'type': 'Identifier', 'name': 'input_data.presenter_id', 'range': [888, 890], 'children': []}]}, {'type': 'Property', 'name': 'driver_id', 'range': [893, 898], 'children': [{'type': 'Identifier', 'name': 'input_data.driver_id', 'range': [895, 897], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [903, 914], 'children': [{'type': 'CallExpression', 'name': 'self.create_clip', 'range': [905, 914], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [909, 911], 'children': []}, {'type': 'Argument', 'name': 'payload', 'range': [913, 913], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'clip_id', 'range': [916, 922], 'children': [{'type': 'MemberExpression', 'name': 'response.id', 'range': [918, 921], 'children': []}]}, {'type': 'ForStatement', 'name': '', 'range': [930, 1002], 'children': [{'type': 'VariableDecl', 'name': '_', 'range': [931, 931], 'children': []}, {'type': 'CallExpression', 'name': 'range', 'range': [933, 938], 'children': [{'type': 'Argument', 'name': 'input_data.max_polling_attempts', 'range': [935, 937], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [940, 1002], 'children': [{'type': 'VariableDecl', 'name': 'status_response', 'range': [941, 952], 'children': [{'type': 'CallExpression', 'name': 'self.get_clip_status', 'range': [943, 952], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [947, 949], 'children': []}, {'type': 'Argument', 'name': 'clip_id', 'range': [951, 951], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [954, 962], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [955, 961], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [956, 958], 'children': []}, {'type': 'Literal', 'name': '"done"', 'range': [960, 960], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [963, 971], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [964, 971], 'children': [{'type': 'Literal', 'name': '"video_url"', 'range': [965, 965], 'children': []}, {'type': 'MemberExpression', 'name': 'status_response.result_url', 'range': [967, 970], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [974, 982], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [975, 981], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [976, 978], 'children': []}, {'type': 'Literal', 'name': '"error"', 'range': [980, 980], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [983, 992], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [984, 992], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [985, 992], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [987, 990], 'children': [{'type': 'TemplateElement', 'name': 'Clip creation failed: ', 'range': [987, 987], 'children': []}, {'type': 'Expression', 'name': "status_response.get('error', 'Unknown error')", 'range': [989, 989], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [994, 1002], 'children': [{'type': 'CallExpression', 'name': 'time.sleep', 'range': [995, 1001], 'children': [{'type': 'Argument', 'name': 'input_data.polling_interval', 'range': [998, 1000], 'children': []}]}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [1004, 1009], 'children': [{'type': 'NewExpression', 'name': 'TimeoutError', 'range': [1005, 1009], 'children': [{'type': 'Literal', 'name': '"Clip creation timed out"', 'range': [1007, 1007], 'children': []}]}]}]}]}]}
2025-01-08 10:20:59,077 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:22:35,066 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [141, 1009], 'children': [{'type': 'ClassDecl', 'name': 'CreateTalkingAvatarVideoBlock', 'range': [141, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [147, 185], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [155, 184], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [157, 172], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [173, 184], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [174, 184], 'children': [{'type': 'Argument', 'name': 'description', 'range': [177, 182], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [148, 185], 'children': [{'type': 'ClassBody', 'name': '', 'range': [154, 185], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [405, 433], 'children': [{'type': 'ClassBody', 'name': '', 'range': [411, 433], 'children': [{'type': 'FieldDecl', 'name': 'video_url', 'range': [412, 421], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [414, 417], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [415, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [416, 421], 'children': [{'type': 'Argument', 'name': 'description', 'range': [418, 420], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [423, 432], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [425, 428], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [427, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [429, 431], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [435, 625], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [441, 625], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [442, 445], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [442, 445], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [446, 624], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [446, 624], 'children': [{'type': 'Argument', 'name': 'id', 'range': [449, 451], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [454, 456], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [459, 465], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [468, 472], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [475, 479], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [482, 541], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [544, 559], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [562, 616], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [619, 621], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'create_clip', 'range': [627, 694], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [644, 694], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [645, 647], 'children': [{'type': 'Literal', 'name': '"https://api.d-id.com/clips"', 'range': [647, 647], 'children': []}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [649, 669], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [651, 669], 'children': [{'type': 'Property', 'name': 'accept', 'range': [653, 656], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [655, 655], 'children': []}]}, {'type': 'Property', 'name': 'content-type', 'range': [658, 661], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [660, 660], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [663, 667], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [665, 666], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [665, 665], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [666, 666], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [671, 686], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [673, 686], 'children': [{'type': 'Argument', 'name': 'url', 'range': [677, 677], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [679, 681], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [683, 685], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [688, 694], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [690, 694], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'get_clip_status', 'range': [696, 755], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [713, 755], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [714, 717], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [716, 717], 'children': [{'type': 'TemplateElement', 'name': 'https://api.d-id.com/clips/', 'range': [716, 716], 'children': []}, {'type': 'Expression', 'name': 'clip_id', 'range': [717, 717], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [719, 734], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [721, 734], 'children': [{'type': 'Property', 'name': 'accept', 'range': [723, 726], 'children': [{'type': 'Literal', 'name': '"application/json"', 'range': [725, 725], 'children': []}]}, {'type': 'Property', 'name': 'authorization', 'range': [728, 732], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [730, 731], 'children': [{'type': 'TemplateElement', 'name': 'Basic ', 'range': [730, 730], 'children': []}, {'type': 'Expression', 'name': 'api_key.get_secret_value()', 'range': [731, 731], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [736, 747], 'children': [{'type': 'CallExpression', 'name': 'requests.get', 'range': [738, 747], 'children': [{'type': 'Argument', 'name': 'url', 'range': [742, 742], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [744, 746], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [749, 755], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [751, 755], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [757, 1009], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [782, 1009], 'children': [{'type': 'VariableDecl', 'name': 'payload', 'range': [788, 901], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [790, 901], 'children': [{'type': 'Property', 'name': 'script', 'range': [792, 857], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [794, 857], 'children': [{'type': 'Property', 'name': 'type', 'range': [796, 799], 'children': [{'type': 'Literal', 'name': '"text"', 'range': [798, 798], 'children': []}]}, {'type': 'Property', 'name': 'subtitles', 'range': [801, 813], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [803, 813], 'children': [{'type': 'Argument', 'name': 'input_data.subtitles', 'range': [805, 807], 'children': []}]}]}, {'type': 'Property', 'name': 'provider', 'range': [815, 833], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [817, 833], 'children': [{'type': 'Property', 'name': 'type', 'range': [819, 824], 'children': [{'type': 'Identifier', 'name': 'input_data.provider', 'range': [821, 823], 'children': []}]}, {'type': 'Property', 'name': 'voice_id', 'range': [826, 831], 'children': [{'type': 'Identifier', 'name': 'input_data.voice_id', 'range': [828, 830], 'children': []}]}]}]}, {'type': 'Property', 'name': 'ssml', 'range': [835, 848], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [837, 848], 'children': [{'type': 'Argument', 'name': 'input_data.ssml', 'range': [839, 842], 'children': []}]}]}, {'type': 'Property', 'name': 'input', 'range': [850, 855], 'children': [{'type': 'Identifier', 'name': 'input_data.script_input', 'range': [852, 854], 'children': []}]}]}]}, {'type': 'Property', 'name': 'config', 'range': [860, 868], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [862, 868], 'children': [{'type': 'Property', 'name': 'result_format', 'range': [863, 867], 'children': [{'type': 'Identifier', 'name': 'input_data.result_format', 'range': [865, 867], 'children': []}]}]}]}, {'type': 'Property', 'name': 'presenter_config', 'range': [871, 883], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [873, 883], 'children': [{'type': 'Property', 'name': 'crop', 'range': [874, 882], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [876, 882], 'children': [{'type': 'Property', 'name': 'type', 'range': [877, 881], 'children': [{'type': 'Identifier', 'name': 'input_data.crop_type', 'range': [879, 881], 'children': []}]}]}]}]}]}, {'type': 'Property', 'name': 'presenter_id', 'range': [886, 891], 'children': [{'type': 'Identifier', 'name': 'input_data.presenter_id', 'range': [888, 890], 'children': []}]}, {'type': 'Property', 'name': 'driver_id', 'range': [893, 898], 'children': [{'type': 'Identifier', 'name': 'input_data.driver_id', 'range': [895, 897], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [903, 914], 'children': [{'type': 'CallExpression', 'name': 'self.create_clip', 'range': [905, 914], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [909, 911], 'children': []}, {'type': 'Argument', 'name': 'payload', 'range': [913, 913], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'clip_id', 'range': [916, 922], 'children': [{'type': 'MemberExpression', 'name': 'response.id', 'range': [918, 921], 'children': []}]}, {'type': 'ForStatement', 'name': '', 'range': [930, 1002], 'children': [{'type': 'VariableDecl', 'name': '_', 'range': [931, 931], 'children': []}, {'type': 'CallExpression', 'name': 'range', 'range': [933, 938], 'children': [{'type': 'Argument', 'name': 'input_data.max_polling_attempts', 'range': [935, 937], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [940, 1002], 'children': [{'type': 'VariableDecl', 'name': 'status_response', 'range': [941, 952], 'children': [{'type': 'CallExpression', 'name': 'self.get_clip_status', 'range': [943, 952], 'children': [{'type': 'Argument', 'name': 'credentials.api_key', 'range': [947, 949], 'children': []}, {'type': 'Argument', 'name': 'clip_id', 'range': [951, 951], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [954, 962], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [955, 961], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [956, 958], 'children': []}, {'type': 'Literal', 'name': '"done"', 'range': [960, 960], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [963, 971], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [964, 971], 'children': [{'type': 'Literal', 'name': '"video_url"', 'range': [965, 965], 'children': []}, {'type': 'MemberExpression', 'name': 'status_response.result_url', 'range': [967, 970], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [974, 982], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [975, 981], 'children': [{'type': 'MemberExpression', 'name': 'status_response.status', 'range': [976, 978], 'children': []}, {'type': 'Literal', 'name': '"error"', 'range': [980, 980], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [983, 992], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [984, 992], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [985, 992], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [987, 990], 'children': [{'type': 'TemplateElement', 'name': 'Clip creation failed: ', 'range': [987, 987], 'children': []}, {'type': 'Expression', 'name': "status_response.get('error', 'Unknown error')", 'range': [989, 989], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [994, 1002], 'children': [{'type': 'CallExpression', 'name': 'time.sleep', 'range': [995, 1001], 'children': [{'type': 'Argument', 'name': 'input_data.polling_interval', 'range': [998, 1000], 'children': []}]}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [1004, 1009], 'children': [{'type': 'NewExpression', 'name': 'TimeoutError', 'range': [1005, 1009], 'children': [{'type': 'Literal', 'name': '"Clip creation timed out"', 'range': [1007, 1007], 'children': []}]}]}]}]}]}
2025-01-08 10:22:35,066 - INFO - Completed main AST analysis flow
2025-01-08 10:22:35,068 - INFO - Successfully processed chunk
2025-01-08 10:22:35,104 - INFO - Starting code generation from AST
2025-01-08 10:23:02,329 - INFO - Successfully generated code from AST
2025-01-08 10:23:02,329 - INFO - Starting static code similarity comparison
2025-01-08 10:23:02,351 - INFO - Static similarity result: {'final_score': 95.7, 'length_similarity': 94.34, 'token_similarity': 94.84, 'structure_similarity': 92.41, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
