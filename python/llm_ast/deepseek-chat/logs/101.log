2025-01-08 09:56:36,102 - INFO - Processing sample 101
2025-01-08 09:56:36,102 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:56:40,141 - INFO - Successfully split code into 4 top-level declarations
2025-01-08 09:56:40,144 - INFO - Processing chunk #0 (size=400 chars, start_index=0)
2025-01-08 09:56:40,144 - INFO - Processing chunk with 400 chars starting at index 0
2025-01-08 09:56:40,144 - INFO - Starting main AST analysis flow
2025-01-08 09:56:40,144 - INFO - Tokenized code into 78 tokens
2025-01-08 09:56:40,145 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:40,149 - INFO - Processing chunk #1 (size=1362 chars, start_index=78)
2025-01-08 09:56:40,149 - INFO - Processing chunk with 1362 chars starting at index 78
2025-01-08 09:56:40,149 - INFO - Starting main AST analysis flow
2025-01-08 09:56:40,150 - INFO - Tokenized code into 211 tokens
2025-01-08 09:56:40,150 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:40,155 - INFO - Processing chunk #2 (size=408 chars, start_index=289)
2025-01-08 09:56:40,156 - INFO - Processing chunk with 408 chars starting at index 289
2025-01-08 09:56:40,156 - INFO - Starting main AST analysis flow
2025-01-08 09:56:40,157 - INFO - Tokenized code into 69 tokens
2025-01-08 09:56:40,157 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:40,157 - INFO - Processing chunk #3 (size=2919 chars, start_index=358)
2025-01-08 09:56:40,158 - INFO - Processing chunk with 2919 chars starting at index 358
2025-01-08 09:56:40,158 - INFO - Starting main AST analysis flow
2025-01-08 09:56:40,159 - INFO - Tokenized code into 408 tokens
2025-01-08 09:56:40,159 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:43,794 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [289, 357], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [289, 322], 'children': []}, {'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [324, 356], 'children': []}]}
2025-01-08 09:56:43,794 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:47,037 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 4], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [5, 11], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 29], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': []}]}
2025-01-08 09:56:47,037 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:48,093 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [78, 288], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWikipediaSummaryBlock', 'range': [78, 84], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [87, 91], 'children': []}, {'type': 'VariableDeclaration', 'name': 'topic', 'range': [94, 103], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [106, 110], 'children': []}, {'type': 'VariableDeclaration', 'name': 'summary', 'range': [113, 122], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [124, 135], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [138, 222], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [224, 288], 'children': []}]}
2025-01-08 09:56:48,094 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:50,147 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [358, 765], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWeatherInformationBlock', 'range': [358, 365], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [367, 372], 'children': []}, {'type': 'VariableDeclaration', 'name': 'location', 'range': [374, 385], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [387, 416], 'children': []}, {'type': 'VariableDeclaration', 'name': 'use_celsius', 'range': [418, 435], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [438, 443], 'children': []}, {'type': 'VariableDeclaration', 'name': 'temperature', 'range': [445, 456], 'children': []}, {'type': 'VariableDeclaration', 'name': 'humidity', 'range': [458, 467], 'children': []}, {'type': 'VariableDeclaration', 'name': 'condition', 'range': [469, 480], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [482, 493], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [496, 634], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [636, 765], 'children': []}]}
2025-01-08 09:56:50,147 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:57:08,159 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 4], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [0, 4], 'children': [{'type': 'Import', 'name': 'Literal', 'range': [2, 4], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [5, 11], 'children': [{'type': 'FromImport', 'name': 'urllib.parse', 'range': [5, 11], 'children': [{'type': 'Import', 'name': 'quote', 'range': [9, 11], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromImport', 'name': 'pydantic', 'range': [13, 17], 'children': [{'type': 'Import', 'name': 'SecretStr', 'range': [15, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 29], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.helpers.http', 'range': [19, 29], 'children': [{'type': 'Import', 'name': 'GetRequest', 'range': [27, 29], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [30, 44], 'children': [{'type': 'Import', 'name': 'Block', 'range': [36, 44], 'children': [{'type': 'Import', 'name': 'BlockCategory', 'range': [38, 44], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [40, 44], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [42, 44], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [45, 67], 'children': [{'type': 'Import', 'name': 'APIKeyCredentials', 'range': [54, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsField', 'range': [57, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsMetaInput', 'range': [60, 67], 'children': []}, {'type': 'Import', 'name': 'SchemaField', 'range': [63, 67], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'FromImport', 'name': 'backend.integrations.providers', 'range': [68, 76], 'children': [{'type': 'Import', 'name': 'ProviderName', 'range': [74, 76], 'children': []}]}]}]}
2025-01-08 09:57:08,160 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:09,886 - INFO - Step 2 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [289, 322], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [290, 322], 'children': [{'type': 'Identifier', 'name': 'APIKeyCredentials', 'range': [291, 291], 'children': []}, {'type': 'CallExpression', 'name': '(', 'range': [292, 322], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [293, 321], 'children': [{'type': 'Property', 'name': 'id', 'range': [294, 296], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [296, 296], 'children': []}]}, {'type': 'Property', 'name': 'provider', 'range': [299, 301], 'children': [{'type': 'Literal', 'name': '"openweathermap"', 'range': [301, 301], 'children': []}]}, {'type': 'Property', 'name': 'api_key', 'range': [304, 309], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [306, 309], 'children': [{'type': 'Literal', 'name': '"mock-openweathermap-api-key"', 'range': [308, 308], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [312, 314], 'children': [{'type': 'Literal', 'name': '"Mock OpenWeatherMap API key"', 'range': [314, 314], 'children': []}]}, {'type': 'Property', 'name': 'expires_at', 'range': [317, 319], 'children': [{'type': 'Literal', 'name': 'None', 'range': [319, 319], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [324, 356], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [325, 356], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [326, 356], 'children': [{'type': 'Property', 'name': '"provider"', 'range': [328, 332], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [330, 332], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [330, 330], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [332, 332], 'children': []}]}]}, {'type': 'Property', 'name': '"id"', 'range': [335, 339], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [337, 339], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [337, 337], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [339, 339], 'children': []}]}]}, {'type': 'Property', 'name': '"type"', 'range': [342, 346], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [344, 346], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [344, 344], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [346, 346], 'children': []}]}]}, {'type': 'Property', 'name': '"title"', 'range': [349, 353], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [353, 353], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:09,886 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:20,793 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [78, 288], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWikipediaSummaryBlock', 'range': [78, 84], 'children': [{'type': 'Inheritance', 'name': '', 'range': [80, 84], 'children': [{'type': 'ParentClass', 'name': 'Block', 'range': [81, 81], 'children': []}, {'type': 'ParentClass', 'name': 'GetRequest', 'range': [83, 83], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [87, 91], 'children': [{'type': 'Inheritance', 'name': '', 'range': [89, 91], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [90, 90], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'topic', 'range': [94, 103], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [97, 103], 'children': [{'type': 'SchemaField', 'name': '', 'range': [98, 103], 'children': [{'type': 'Argument', 'name': 'description', 'range': [100, 102], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [106, 110], 'children': [{'type': 'Inheritance', 'name': '', 'range': [108, 110], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [109, 109], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'summary', 'range': [113, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [115, 115], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [116, 122], 'children': [{'type': 'SchemaField', 'name': '', 'range': [117, 122], 'children': [{'type': 'Argument', 'name': 'description', 'range': [119, 121], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [124, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [126, 126], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [127, 135], 'children': [{'type': 'SchemaField', 'name': '', 'range': [128, 135], 'children': [{'type': 'Argument', 'name': 'description', 'range': [131, 133], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [138, 222], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [141, 141], 'children': []}, {'type': 'SuperCall', 'name': '', 'range': [145, 150], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [152, 154], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [157, 159], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [162, 168], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [171, 176], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [178, 182], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [185, 191], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [194, 200], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [203, 218], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [224, 288], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [227, 227], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [229, 231], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [235, 235], 'children': []}, {'type': 'Assignment', 'name': 'topic', 'range': [242, 246], 'children': []}, {'type': 'Assignment', 'name': 'url', 'range': [248, 251], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [253, 264], 'children': []}, {'type': 'Conditional', 'name': '', 'range': [266, 278], 'children': [{'type': 'Condition', 'name': '', 'range': [267, 270], 'children': []}, {'type': 'Throw', 'name': 'RuntimeError', 'range': [273, 278], 'children': []}]}, {'type': 'Yield', 'name': '', 'range': [280, 286], 'children': []}]}]}
2025-01-08 09:57:20,794 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:27,442 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 4], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [0, 4], 'children': [{'type': 'Import', 'name': 'Literal', 'range': [2, 4], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [5, 11], 'children': [{'type': 'FromImport', 'name': 'urllib.parse', 'range': [5, 11], 'children': [{'type': 'Import', 'name': 'quote', 'range': [9, 11], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromImport', 'name': 'pydantic', 'range': [13, 17], 'children': [{'type': 'Import', 'name': 'SecretStr', 'range': [15, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 29], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.helpers.http', 'range': [19, 29], 'children': [{'type': 'Import', 'name': 'GetRequest', 'range': [27, 29], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [30, 44], 'children': [{'type': 'Import', 'name': 'Block', 'range': [36, 44], 'children': [{'type': 'Import', 'name': 'BlockCategory', 'range': [38, 44], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [40, 44], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [42, 44], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [45, 67], 'children': [{'type': 'Import', 'name': 'APIKeyCredentials', 'range': [54, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsField', 'range': [57, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsMetaInput', 'range': [60, 67], 'children': []}, {'type': 'Import', 'name': 'SchemaField', 'range': [63, 67], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'FromImport', 'name': 'backend.integrations.providers', 'range': [68, 76], 'children': [{'type': 'Import', 'name': 'ProviderName', 'range': [74, 76], 'children': []}]}]}]}
2025-01-08 09:57:27,443 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:35,651 - INFO - Step 3 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [289, 322], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [290, 322], 'children': [{'type': 'Identifier', 'name': 'APIKeyCredentials', 'range': [291, 291], 'children': []}, {'type': 'CallExpression', 'name': '(', 'range': [292, 322], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [293, 321], 'children': [{'type': 'Property', 'name': 'id', 'range': [294, 296], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [296, 296], 'children': []}]}, {'type': 'Property', 'name': 'provider', 'range': [299, 301], 'children': [{'type': 'Literal', 'name': '"openweathermap"', 'range': [301, 301], 'children': []}]}, {'type': 'Property', 'name': 'api_key', 'range': [304, 309], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [306, 309], 'children': [{'type': 'Literal', 'name': '"mock-openweathermap-api-key"', 'range': [308, 308], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [312, 314], 'children': [{'type': 'Literal', 'name': '"Mock OpenWeatherMap API key"', 'range': [314, 314], 'children': []}]}, {'type': 'Property', 'name': 'expires_at', 'range': [317, 319], 'children': [{'type': 'Literal', 'name': 'None', 'range': [319, 319], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [324, 356], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [325, 356], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [326, 356], 'children': [{'type': 'Property', 'name': '"provider"', 'range': [328, 332], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [330, 332], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [330, 330], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [332, 332], 'children': []}]}]}, {'type': 'Property', 'name': '"id"', 'range': [335, 339], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [337, 339], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [337, 337], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [339, 339], 'children': []}]}]}, {'type': 'Property', 'name': '"type"', 'range': [342, 346], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [344, 346], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [344, 344], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [346, 346], 'children': []}]}]}, {'type': 'Property', 'name': '"title"', 'range': [349, 353], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [353, 353], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:35,651 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:45,886 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 4], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [0, 4], 'children': [{'type': 'Import', 'name': 'Literal', 'range': [2, 4], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [5, 11], 'children': [{'type': 'FromImport', 'name': 'urllib.parse', 'range': [5, 11], 'children': [{'type': 'Import', 'name': 'quote', 'range': [9, 11], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromImport', 'name': 'pydantic', 'range': [13, 17], 'children': [{'type': 'Import', 'name': 'SecretStr', 'range': [15, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 29], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.helpers.http', 'range': [19, 29], 'children': [{'type': 'Import', 'name': 'GetRequest', 'range': [27, 29], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [30, 44], 'children': [{'type': 'Import', 'name': 'Block', 'range': [36, 44], 'children': [{'type': 'Import', 'name': 'BlockCategory', 'range': [38, 44], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [40, 44], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [42, 44], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [45, 67], 'children': [{'type': 'Import', 'name': 'APIKeyCredentials', 'range': [54, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsField', 'range': [57, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsMetaInput', 'range': [60, 67], 'children': []}, {'type': 'Import', 'name': 'SchemaField', 'range': [63, 67], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'FromImport', 'name': 'backend.integrations.providers', 'range': [68, 76], 'children': [{'type': 'Import', 'name': 'ProviderName', 'range': [74, 76], 'children': []}]}]}]}
2025-01-08 09:57:45,887 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:57:53,117 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [78, 288], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWikipediaSummaryBlock', 'range': [78, 84], 'children': [{'type': 'Inheritance', 'name': '', 'range': [80, 84], 'children': [{'type': 'ParentClass', 'name': 'Block', 'range': [81, 81], 'children': []}, {'type': 'ParentClass', 'name': 'GetRequest', 'range': [83, 83], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [87, 91], 'children': [{'type': 'Inheritance', 'name': '', 'range': [89, 91], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [90, 90], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'topic', 'range': [94, 103], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [97, 103], 'children': [{'type': 'SchemaField', 'name': '', 'range': [98, 103], 'children': [{'type': 'Argument', 'name': 'description', 'range': [100, 102], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [106, 110], 'children': [{'type': 'Inheritance', 'name': '', 'range': [108, 110], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [109, 109], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'summary', 'range': [113, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [115, 115], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [116, 122], 'children': [{'type': 'SchemaField', 'name': '', 'range': [117, 122], 'children': [{'type': 'Argument', 'name': 'description', 'range': [119, 121], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [124, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [126, 126], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [127, 135], 'children': [{'type': 'SchemaField', 'name': '', 'range': [128, 135], 'children': [{'type': 'Argument', 'name': 'description', 'range': [131, 133], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [138, 222], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [141, 141], 'children': []}, {'type': 'SuperCall', 'name': '', 'range': [145, 150], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [152, 154], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [157, 159], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [162, 168], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [171, 176], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [178, 182], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [185, 191], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [194, 200], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [203, 218], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [224, 288], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [227, 227], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [229, 231], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [235, 235], 'children': []}, {'type': 'Assignment', 'name': 'topic', 'range': [242, 246], 'children': []}, {'type': 'Assignment', 'name': 'url', 'range': [248, 251], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [253, 264], 'children': []}, {'type': 'Conditional', 'name': '', 'range': [266, 278], 'children': [{'type': 'Condition', 'name': '', 'range': [267, 270], 'children': []}, {'type': 'Throw', 'name': 'RuntimeError', 'range': [273, 278], 'children': []}]}, {'type': 'Yield', 'name': '', 'range': [280, 286], 'children': []}]}]}
2025-01-08 09:57:53,117 - INFO - Starting Step 4: AST normalization
2025-01-08 09:58:01,367 - INFO - Step 4 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [289, 322], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [290, 322], 'children': [{'type': 'Identifier', 'name': 'APIKeyCredentials', 'range': [291, 291], 'children': []}, {'type': 'CallExpression', 'name': '(', 'range': [292, 322], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [293, 321], 'children': [{'type': 'Property', 'name': 'id', 'range': [294, 296], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [296, 296], 'children': []}]}, {'type': 'Property', 'name': 'provider', 'range': [299, 301], 'children': [{'type': 'Literal', 'name': '"openweathermap"', 'range': [301, 301], 'children': []}]}, {'type': 'Property', 'name': 'api_key', 'range': [304, 309], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [306, 309], 'children': [{'type': 'Literal', 'name': '"mock-openweathermap-api-key"', 'range': [308, 308], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [312, 314], 'children': [{'type': 'Literal', 'name': '"Mock OpenWeatherMap API key"', 'range': [314, 314], 'children': []}]}, {'type': 'Property', 'name': 'expires_at', 'range': [317, 319], 'children': [{'type': 'Literal', 'name': 'None', 'range': [319, 319], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [324, 356], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [325, 356], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [326, 356], 'children': [{'type': 'Property', 'name': '"provider"', 'range': [328, 332], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [330, 332], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [330, 330], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [332, 332], 'children': []}]}]}, {'type': 'Property', 'name': '"id"', 'range': [335, 339], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [337, 339], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [337, 337], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [339, 339], 'children': []}]}]}, {'type': 'Property', 'name': '"type"', 'range': [342, 346], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [344, 346], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [344, 344], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [346, 346], 'children': []}]}]}, {'type': 'Property', 'name': '"title"', 'range': [349, 353], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [353, 353], 'children': []}]}]}]}]}]}]}
2025-01-08 09:58:01,367 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:58:05,926 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 76], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 4], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [0, 4], 'children': [{'type': 'Import', 'name': 'Literal', 'range': [2, 4], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [5, 11], 'children': [{'type': 'FromImport', 'name': 'urllib.parse', 'range': [5, 11], 'children': [{'type': 'Import', 'name': 'quote', 'range': [9, 11], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromImport', 'name': 'pydantic', 'range': [13, 17], 'children': [{'type': 'Import', 'name': 'SecretStr', 'range': [15, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 29], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.helpers.http', 'range': [19, 29], 'children': [{'type': 'Import', 'name': 'GetRequest', 'range': [27, 29], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [30, 44], 'children': [{'type': 'Import', 'name': 'Block', 'range': [36, 44], 'children': [{'type': 'Import', 'name': 'BlockCategory', 'range': [38, 44], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [40, 44], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [42, 44], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [45, 67], 'children': [{'type': 'Import', 'name': 'APIKeyCredentials', 'range': [54, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsField', 'range': [57, 67], 'children': []}, {'type': 'Import', 'name': 'CredentialsMetaInput', 'range': [60, 67], 'children': []}, {'type': 'Import', 'name': 'SchemaField', 'range': [63, 67], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'FromImport', 'name': 'backend.integrations.providers', 'range': [68, 76], 'children': [{'type': 'Import', 'name': 'ProviderName', 'range': [74, 76], 'children': []}]}]}]}]}
2025-01-08 09:58:05,926 - INFO - Completed main AST analysis flow
2025-01-08 09:58:05,927 - INFO - Successfully processed chunk
2025-01-08 09:58:06,441 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [358, 765], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWeatherInformationBlock', 'range': [358, 365], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [361, 361], 'children': []}, {'type': 'ClassInheritance', 'name': 'GetRequest', 'range': [363, 363], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [367, 372], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [370, 370], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'location', 'range': [374, 385], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [376, 376], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [377, 377], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [378, 385], 'children': [{'type': 'Argument', 'name': 'description', 'range': [381, 383], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [387, 416], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [389, 389], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [405, 405], 'children': [{'type': 'FunctionCall', 'name': 'CredentialsField', 'range': [406, 416], 'children': [{'type': 'Argument', 'name': 'description', 'range': [409, 413], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'use_celsius', 'range': [418, 435], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [420, 420], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [421, 421], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [422, 435], 'children': [{'type': 'Argument', 'name': 'default', 'range': [425, 427], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [438, 443], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [441, 441], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'temperature', 'range': [445, 456], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [447, 447], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [448, 448], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [449, 456], 'children': [{'type': 'Argument', 'name': 'description', 'range': [452, 454], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'humidity', 'range': [458, 467], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [460, 460], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [461, 461], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [462, 467], 'children': [{'type': 'Argument', 'name': 'description', 'range': [465, 466], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'condition', 'range': [469, 480], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [471, 471], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [472, 472], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [473, 480], 'children': [{'type': 'Argument', 'name': 'description', 'range': [477, 478], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [482, 493], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [484, 484], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [485, 485], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [486, 493], 'children': [{'type': 'Argument', 'name': 'description', 'range': [490, 491], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [496, 634], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [499, 499], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [503, 633], 'children': [{'type': 'Argument', 'name': 'id', 'range': [510, 512], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [515, 520], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [522, 526], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [529, 531], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [534, 553], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [556, 581], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [584, 625], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [628, 630], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [636, 765], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [640, 640], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [642, 644], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [648, 650], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [654, 654], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [659, 659], 'children': []}, {'type': 'VariableDeclaration', 'name': 'units', 'range': [662, 671], 'children': [{'type': 'Assignment', 'name': '=', 'range': [663, 663], 'children': [{'type': 'ConditionalExpression', 'name': 'if', 'range': [665, 669], 'children': [{'type': 'MemberExpression', 'name': 'input_data.use_celsius', 'range': [666, 668], 'children': []}, {'type': 'Literal', 'name': '"metric"', 'range': [664, 664], 'children': []}, {'type': 'Literal', 'name': '"imperial"', 'range': [670, 670], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'api_key', 'range': [672, 677], 'children': [{'type': 'Assignment', 'name': '=', 'range': [673, 673], 'children': [{'type': 'MemberExpression', 'name': 'credentials.api_key', 'range': [674, 676], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'location', 'range': [678, 683], 'children': [{'type': 'Assignment', 'name': '=', 'range': [679, 679], 'children': [{'type': 'MemberExpression', 'name': 'input_data.location', 'range': [680, 682], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'url', 'range': [684, 688], 'children': [{'type': 'Assignment', 'name': '=', 'range': [685, 685], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [686, 688], 'children': [{'type': 'TemplateElement', 'name': 'http://api.openweathermap.org/data/2.5/weather?q=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&appid=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&units=', 'range': [687, 687], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'weather_data', 'range': [689, 701], 'children': [{'type': 'Assignment', 'name': '=', 'range': [690, 690], 'children': [{'type': 'FunctionCall', 'name': 'self.get_request', 'range': [691, 701], 'children': [{'type': 'Argument', 'name': 'url', 'range': [695, 695], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [698, 699], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [703, 764], 'children': [{'type': 'LogicalExpression', 'name': 'and', 'range': [707, 709], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [705, 705], 'children': [{'type': 'Literal', 'name': '"main"', 'range': [704, 704], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [706, 706], 'children': []}]}, {'type': 'BinaryExpression', 'name': 'in', 'range': [709, 709], 'children': [{'type': 'Literal', 'name': '"weather"', 'range': [708, 708], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [710, 710], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [712, 754], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [713, 726], 'children': [{'type': 'Literal', 'name': '"temperature"', 'range': [714, 714], 'children': []}, {'type': 'FunctionCall', 'name': 'str', 'range': [716, 725], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["temp"]', 'range': [718, 724], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [727, 740], 'children': [{'type': 'Literal', 'name': '"humidity"', 'range': [728, 728], 'children': []}, {'type': 'FunctionCall', 'name': 'str', 'range': [730, 739], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["humidity"]', 'range': [732, 738], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [741, 754], 'children': [{'type': 'Literal', 'name': '"condition"', 'range': [742, 742], 'children': []}, {'type': 'MemberExpression', 'name': 'weather_data["weather"][0]["description"]', 'range': [744, 753], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [755, 764], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [758, 763], 'children': [{'type': 'FunctionCall', 'name': 'RuntimeError', 'range': [760, 763], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [761, 763], 'children': [{'type': 'TemplateElement', 'name': 'Expected keys not found in response: ', 'range': [762, 762], 'children': []}, {'type': 'TemplateElement', 'name': 'weather_data', 'range': [762, 762], 'children': []}]}]}]}]}]}]}]}
2025-01-08 09:58:06,441 - INFO - Starting Step 3: AST simplification
2025-01-08 09:58:25,688 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [78, 288], 'children': [{'type': 'ClassDecl', 'name': 'GetWikipediaSummaryBlock', 'range': [78, 84], 'children': [{'type': 'Inheritance', 'name': '', 'range': [80, 84], 'children': [{'type': 'ParentClass', 'name': 'Block', 'range': [81, 81], 'children': []}, {'type': 'ParentClass', 'name': 'GetRequest', 'range': [83, 83], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [87, 91], 'children': [{'type': 'Inheritance', 'name': '', 'range': [89, 91], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [90, 90], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'topic', 'range': [94, 103], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [97, 103], 'children': [{'type': 'SchemaField', 'name': '', 'range': [98, 103], 'children': [{'type': 'Argument', 'name': 'description', 'range': [100, 102], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [106, 110], 'children': [{'type': 'Inheritance', 'name': '', 'range': [108, 110], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [109, 109], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'summary', 'range': [113, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [115, 115], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [116, 122], 'children': [{'type': 'SchemaField', 'name': '', 'range': [117, 122], 'children': [{'type': 'Argument', 'name': 'description', 'range': [119, 121], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [124, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [126, 126], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [127, 135], 'children': [{'type': 'SchemaField', 'name': '', 'range': [128, 135], 'children': [{'type': 'Argument', 'name': 'description', 'range': [131, 133], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [138, 222], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [141, 141], 'children': []}, {'type': 'SuperCall', 'name': '', 'range': [145, 150], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [152, 154], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [157, 159], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [162, 168], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [171, 176], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [178, 182], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [185, 191], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [194, 200], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [203, 218], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [224, 288], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [227, 227], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [229, 231], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [235, 235], 'children': []}, {'type': 'Assignment', 'name': 'topic', 'range': [242, 246], 'children': []}, {'type': 'Assignment', 'name': 'url', 'range': [248, 251], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [253, 264], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [266, 278], 'children': [{'type': 'Condition', 'name': '', 'range': [267, 270], 'children': []}, {'type': 'Throw', 'name': 'RuntimeError', 'range': [273, 278], 'children': []}]}, {'type': 'Yield', 'name': '', 'range': [280, 286], 'children': []}]}]}
2025-01-08 09:58:25,689 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:58:28,053 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [289, 356], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS', 'range': [289, 322], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [290, 322], 'children': [{'type': 'Identifier', 'name': 'APIKeyCredentials', 'range': [291, 291], 'children': []}, {'type': 'CallExpression', 'name': '(', 'range': [292, 322], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [293, 321], 'children': [{'type': 'Property', 'name': 'id', 'range': [294, 296], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [296, 296], 'children': []}]}, {'type': 'Property', 'name': 'provider', 'range': [299, 301], 'children': [{'type': 'Literal', 'name': '"openweathermap"', 'range': [301, 301], 'children': []}]}, {'type': 'Property', 'name': 'api_key', 'range': [304, 309], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [306, 309], 'children': [{'type': 'Literal', 'name': '"mock-openweathermap-api-key"', 'range': [308, 308], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [312, 314], 'children': [{'type': 'Literal', 'name': '"Mock OpenWeatherMap API key"', 'range': [314, 314], 'children': []}]}, {'type': 'Property', 'name': 'expires_at', 'range': [317, 319], 'children': [{'type': 'Literal', 'name': 'None', 'range': [319, 319], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [324, 356], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [325, 356], 'children': [{'type': 'ObjectExpression', 'name': '{', 'range': [326, 356], 'children': [{'type': 'Property', 'name': '"provider"', 'range': [328, 332], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [330, 332], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [330, 330], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [332, 332], 'children': []}]}]}, {'type': 'Property', 'name': '"id"', 'range': [335, 339], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [337, 339], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [337, 337], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [339, 339], 'children': []}]}]}, {'type': 'Property', 'name': '"type"', 'range': [342, 346], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [344, 346], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [344, 344], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [346, 346], 'children': []}]}]}, {'type': 'Property', 'name': '"title"', 'range': [349, 353], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [353, 353], 'children': []}]}]}]}]}]}]}]}
2025-01-08 09:58:28,053 - INFO - Completed main AST analysis flow
2025-01-08 09:58:28,055 - INFO - Successfully processed chunk
2025-01-08 09:59:00,264 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [78, 288], 'children': [{'type': 'ClassDecl', 'name': 'GetWikipediaSummaryBlock', 'range': [78, 84], 'children': [{'type': 'Inheritance', 'name': '', 'range': [80, 84], 'children': [{'type': 'ParentClass', 'name': 'Block', 'range': [81, 81], 'children': []}, {'type': 'ParentClass', 'name': 'GetRequest', 'range': [83, 83], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [87, 91], 'children': [{'type': 'Inheritance', 'name': '', 'range': [89, 91], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [90, 90], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'topic', 'range': [94, 103], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [97, 103], 'children': [{'type': 'SchemaField', 'name': '', 'range': [98, 103], 'children': [{'type': 'Argument', 'name': 'description', 'range': [100, 102], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [106, 110], 'children': [{'type': 'Inheritance', 'name': '', 'range': [108, 110], 'children': [{'type': 'ParentClass', 'name': 'BlockSchema', 'range': [109, 109], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'summary', 'range': [113, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [115, 115], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [116, 122], 'children': [{'type': 'SchemaField', 'name': '', 'range': [117, 122], 'children': [{'type': 'Argument', 'name': 'description', 'range': [119, 121], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [124, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [126, 126], 'children': []}, {'type': 'Assignment', 'name': '', 'range': [127, 135], 'children': [{'type': 'SchemaField', 'name': '', 'range': [128, 135], 'children': [{'type': 'Argument', 'name': 'description', 'range': [131, 133], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [138, 222], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [141, 141], 'children': []}, {'type': 'SuperCall', 'name': '', 'range': [145, 150], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [152, 154], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [157, 159], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [162, 168], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [171, 176], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [178, 182], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [185, 191], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [194, 200], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [203, 218], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [224, 288], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [227, 227], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [229, 231], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [235, 235], 'children': []}, {'type': 'Assignment', 'name': 'topic', 'range': [242, 246], 'children': []}, {'type': 'Assignment', 'name': 'url', 'range': [248, 251], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [253, 264], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [266, 278], 'children': [{'type': 'Condition', 'name': '', 'range': [267, 270], 'children': []}, {'type': 'Throw', 'name': 'RuntimeError', 'range': [273, 278], 'children': []}]}, {'type': 'Yield', 'name': '', 'range': [280, 286], 'children': []}]}]}
2025-01-08 09:59:00,264 - INFO - Completed main AST analysis flow
2025-01-08 09:59:00,270 - INFO - Successfully processed chunk
2025-01-08 09:59:23,643 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [358, 765], 'children': [{'type': 'ClassDeclaration', 'name': 'GetWeatherInformationBlock', 'range': [358, 365], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [361, 361], 'children': []}, {'type': 'ClassInheritance', 'name': 'GetRequest', 'range': [363, 363], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [367, 372], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [370, 370], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'location', 'range': [374, 385], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [376, 376], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [377, 377], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [378, 385], 'children': [{'type': 'Argument', 'name': 'description', 'range': [381, 383], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [387, 416], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [389, 389], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [405, 405], 'children': [{'type': 'FunctionCall', 'name': 'CredentialsField', 'range': [406, 416], 'children': [{'type': 'Argument', 'name': 'description', 'range': [409, 413], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'use_celsius', 'range': [418, 435], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [420, 420], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [421, 421], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [422, 435], 'children': [{'type': 'Argument', 'name': 'default', 'range': [425, 427], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [438, 443], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [441, 441], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'temperature', 'range': [445, 456], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [447, 447], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [448, 448], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [449, 456], 'children': [{'type': 'Argument', 'name': 'description', 'range': [452, 454], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'humidity', 'range': [458, 467], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [460, 460], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [461, 461], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [462, 467], 'children': [{'type': 'Argument', 'name': 'description', 'range': [465, 466], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'condition', 'range': [469, 480], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [471, 471], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [472, 472], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [473, 480], 'children': [{'type': 'Argument', 'name': 'description', 'range': [477, 478], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [482, 493], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [484, 484], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [485, 485], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [486, 493], 'children': [{'type': 'Argument', 'name': 'description', 'range': [490, 491], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [496, 634], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [499, 499], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [503, 633], 'children': [{'type': 'Argument', 'name': 'id', 'range': [510, 512], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [515, 520], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [522, 526], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [529, 531], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [534, 553], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [556, 581], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [584, 625], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [628, 630], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [636, 765], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [640, 640], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [642, 644], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [648, 650], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [654, 654], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [659, 659], 'children': []}, {'type': 'VariableDeclaration', 'name': 'units', 'range': [662, 671], 'children': [{'type': 'Assignment', 'name': '=', 'range': [663, 663], 'children': [{'type': 'ConditionalExpression', 'name': 'if', 'range': [665, 669], 'children': [{'type': 'MemberExpression', 'name': 'input_data.use_celsius', 'range': [666, 668], 'children': []}, {'type': 'Literal', 'name': '"metric"', 'range': [664, 664], 'children': []}, {'type': 'Literal', 'name': '"imperial"', 'range': [670, 670], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'api_key', 'range': [672, 677], 'children': [{'type': 'Assignment', 'name': '=', 'range': [673, 673], 'children': [{'type': 'MemberExpression', 'name': 'credentials.api_key', 'range': [674, 676], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'location', 'range': [678, 683], 'children': [{'type': 'Assignment', 'name': '=', 'range': [679, 679], 'children': [{'type': 'MemberExpression', 'name': 'input_data.location', 'range': [680, 682], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'url', 'range': [684, 688], 'children': [{'type': 'Assignment', 'name': '=', 'range': [685, 685], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [686, 688], 'children': [{'type': 'TemplateElement', 'name': 'http://api.openweathermap.org/data/2.5/weather?q=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&appid=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&units=', 'range': [687, 687], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'weather_data', 'range': [689, 701], 'children': [{'type': 'Assignment', 'name': '=', 'range': [690, 690], 'children': [{'type': 'FunctionCall', 'name': 'self.get_request', 'range': [691, 701], 'children': [{'type': 'Argument', 'name': 'url', 'range': [695, 695], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [698, 699], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [703, 764], 'children': [{'type': 'LogicalExpression', 'name': 'and', 'range': [707, 709], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [705, 705], 'children': [{'type': 'Literal', 'name': '"main"', 'range': [704, 704], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [706, 706], 'children': []}]}, {'type': 'BinaryExpression', 'name': 'in', 'range': [709, 709], 'children': [{'type': 'Literal', 'name': '"weather"', 'range': [708, 708], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [710, 710], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [712, 754], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [713, 726], 'children': [{'type': 'Literal', 'name': '"temperature"', 'range': [714, 714], 'children': []}, {'type': 'FunctionCall', 'name': 'str', 'range': [716, 725], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["temp"]', 'range': [718, 724], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [727, 740], 'children': [{'type': 'Literal', 'name': '"humidity"', 'range': [728, 728], 'children': []}, {'type': 'FunctionCall', 'name': 'str', 'range': [730, 739], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["humidity"]', 'range': [732, 738], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [741, 754], 'children': [{'type': 'Literal', 'name': '"condition"', 'range': [742, 742], 'children': []}, {'type': 'MemberExpression', 'name': 'weather_data["weather"][0]["description"]', 'range': [744, 753], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [755, 764], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [758, 763], 'children': [{'type': 'FunctionCall', 'name': 'RuntimeError', 'range': [760, 763], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [761, 763], 'children': [{'type': 'TemplateElement', 'name': 'Expected keys not found in response: ', 'range': [762, 762], 'children': []}, {'type': 'TemplateElement', 'name': 'weather_data', 'range': [762, 762], 'children': []}]}]}]}]}]}]}]}
2025-01-08 09:59:23,644 - INFO - Starting Step 4: AST normalization
2025-01-08 10:00:39,457 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [358, 765], 'children': [{'type': 'ClassDecl', 'name': 'GetWeatherInformationBlock', 'range': [358, 365], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [361, 361], 'children': []}, {'type': 'ClassInheritance', 'name': 'GetRequest', 'range': [363, 363], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [367, 372], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [370, 370], 'children': []}]}, {'type': 'VariableDecl', 'name': 'location', 'range': [374, 385], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [376, 376], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [377, 377], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [378, 385], 'children': [{'type': 'Argument', 'name': 'description', 'range': [381, 383], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [387, 416], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [389, 389], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [405, 405], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [406, 416], 'children': [{'type': 'Argument', 'name': 'description', 'range': [409, 413], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'use_celsius', 'range': [418, 435], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [420, 420], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [421, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [422, 435], 'children': [{'type': 'Argument', 'name': 'default', 'range': [425, 427], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [438, 443], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [441, 441], 'children': []}]}, {'type': 'VariableDecl', 'name': 'temperature', 'range': [445, 456], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [447, 447], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [448, 448], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [449, 456], 'children': [{'type': 'Argument', 'name': 'description', 'range': [452, 454], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'humidity', 'range': [458, 467], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [460, 460], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [461, 461], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [462, 467], 'children': [{'type': 'Argument', 'name': 'description', 'range': [465, 466], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'condition', 'range': [469, 480], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [471, 471], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [472, 472], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [473, 480], 'children': [{'type': 'Argument', 'name': 'description', 'range': [477, 478], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [482, 493], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [484, 484], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [485, 485], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [486, 493], 'children': [{'type': 'Argument', 'name': 'description', 'range': [490, 491], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [496, 634], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [499, 499], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [503, 633], 'children': [{'type': 'Argument', 'name': 'id', 'range': [510, 512], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [515, 520], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [522, 526], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [529, 531], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [534, 553], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [556, 581], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [584, 625], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [628, 630], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [636, 765], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [640, 640], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [642, 644], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [648, 650], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [654, 654], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [659, 659], 'children': []}, {'type': 'VariableDecl', 'name': 'units', 'range': [662, 671], 'children': [{'type': 'Assignment', 'name': '=', 'range': [663, 663], 'children': [{'type': 'ConditionalExpression', 'name': 'if', 'range': [665, 669], 'children': [{'type': 'MemberExpression', 'name': 'input_data.use_celsius', 'range': [666, 668], 'children': []}, {'type': 'Literal', 'name': '"metric"', 'range': [664, 664], 'children': []}, {'type': 'Literal', 'name': '"imperial"', 'range': [670, 670], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'api_key', 'range': [672, 677], 'children': [{'type': 'Assignment', 'name': '=', 'range': [673, 673], 'children': [{'type': 'MemberExpression', 'name': 'credentials.api_key', 'range': [674, 676], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'location', 'range': [678, 683], 'children': [{'type': 'Assignment', 'name': '=', 'range': [679, 679], 'children': [{'type': 'MemberExpression', 'name': 'input_data.location', 'range': [680, 682], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'url', 'range': [684, 688], 'children': [{'type': 'Assignment', 'name': '=', 'range': [685, 685], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [686, 688], 'children': [{'type': 'TemplateElement', 'name': 'http://api.openweathermap.org/data/2.5/weather?q=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&appid=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&units=', 'range': [687, 687], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'weather_data', 'range': [689, 701], 'children': [{'type': 'Assignment', 'name': '=', 'range': [690, 690], 'children': [{'type': 'CallExpression', 'name': 'self.get_request', 'range': [691, 701], 'children': [{'type': 'Argument', 'name': 'url', 'range': [695, 695], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [698, 699], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [703, 764], 'children': [{'type': 'LogicalExpression', 'name': 'and', 'range': [707, 709], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [705, 705], 'children': [{'type': 'Literal', 'name': '"main"', 'range': [704, 704], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [706, 706], 'children': []}]}, {'type': 'BinaryExpression', 'name': 'in', 'range': [709, 709], 'children': [{'type': 'Literal', 'name': '"weather"', 'range': [708, 708], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [710, 710], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [712, 754], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [713, 726], 'children': [{'type': 'Literal', 'name': '"temperature"', 'range': [714, 714], 'children': []}, {'type': 'CallExpression', 'name': 'str', 'range': [716, 725], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["temp"]', 'range': [718, 724], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [727, 740], 'children': [{'type': 'Literal', 'name': '"humidity"', 'range': [728, 728], 'children': []}, {'type': 'CallExpression', 'name': 'str', 'range': [730, 739], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["humidity"]', 'range': [732, 738], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [741, 754], 'children': [{'type': 'Literal', 'name': '"condition"', 'range': [742, 742], 'children': []}, {'type': 'MemberExpression', 'name': 'weather_data["weather"][0]["description"]', 'range': [744, 753], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [755, 764], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [758, 763], 'children': [{'type': 'CallExpression', 'name': 'RuntimeError', 'range': [760, 763], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [761, 763], 'children': [{'type': 'TemplateElement', 'name': 'Expected keys not found in response: ', 'range': [762, 762], 'children': []}, {'type': 'TemplateElement', 'name': 'weather_data', 'range': [762, 762], 'children': []}]}]}]}]}]}]}]}
2025-01-08 10:00:39,457 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:01:55,690 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainOrSomething', 'range': [358, 765], 'children': [{'type': 'ClassDecl', 'name': 'GetWeatherInformationBlock', 'range': [358, 365], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [361, 361], 'children': []}, {'type': 'ClassInheritance', 'name': 'GetRequest', 'range': [363, 363], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [367, 372], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [370, 370], 'children': []}]}, {'type': 'VariableDecl', 'name': 'location', 'range': [374, 385], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [376, 376], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [377, 377], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [378, 385], 'children': [{'type': 'Argument', 'name': 'description', 'range': [381, 383], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [387, 416], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [389, 389], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [405, 405], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [406, 416], 'children': [{'type': 'Argument', 'name': 'description', 'range': [409, 413], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'use_celsius', 'range': [418, 435], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [420, 420], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [421, 421], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [422, 435], 'children': [{'type': 'Argument', 'name': 'default', 'range': [425, 427], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [438, 443], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [441, 441], 'children': []}]}, {'type': 'VariableDecl', 'name': 'temperature', 'range': [445, 456], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [447, 447], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [448, 448], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [449, 456], 'children': [{'type': 'Argument', 'name': 'description', 'range': [452, 454], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'humidity', 'range': [458, 467], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [460, 460], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [461, 461], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [462, 467], 'children': [{'type': 'Argument', 'name': 'description', 'range': [465, 466], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'condition', 'range': [469, 480], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [471, 471], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [472, 472], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [473, 480], 'children': [{'type': 'Argument', 'name': 'description', 'range': [477, 478], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [482, 493], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [484, 484], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [485, 485], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [486, 493], 'children': [{'type': 'Argument', 'name': 'description', 'range': [490, 491], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [496, 634], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [499, 499], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [503, 633], 'children': [{'type': 'Argument', 'name': 'id', 'range': [510, 512], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [515, 520], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [522, 526], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [529, 531], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [534, 553], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [556, 581], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [584, 625], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [628, 630], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [636, 765], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [640, 640], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [642, 644], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [648, 650], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [654, 654], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [659, 659], 'children': []}, {'type': 'VariableDecl', 'name': 'units', 'range': [662, 671], 'children': [{'type': 'Assignment', 'name': '=', 'range': [663, 663], 'children': [{'type': 'ConditionalExpression', 'name': 'if', 'range': [665, 669], 'children': [{'type': 'MemberExpression', 'name': 'input_data.use_celsius', 'range': [666, 668], 'children': []}, {'type': 'Literal', 'name': '"metric"', 'range': [664, 664], 'children': []}, {'type': 'Literal', 'name': '"imperial"', 'range': [670, 670], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'api_key', 'range': [672, 677], 'children': [{'type': 'Assignment', 'name': '=', 'range': [673, 673], 'children': [{'type': 'MemberExpression', 'name': 'credentials.api_key', 'range': [674, 676], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'location', 'range': [678, 683], 'children': [{'type': 'Assignment', 'name': '=', 'range': [679, 679], 'children': [{'type': 'MemberExpression', 'name': 'input_data.location', 'range': [680, 682], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'url', 'range': [684, 688], 'children': [{'type': 'Assignment', 'name': '=', 'range': [685, 685], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [686, 688], 'children': [{'type': 'TemplateElement', 'name': 'http://api.openweathermap.org/data/2.5/weather?q=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&appid=', 'range': [687, 687], 'children': []}, {'type': 'TemplateElement', 'name': '&units=', 'range': [687, 687], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'weather_data', 'range': [689, 701], 'children': [{'type': 'Assignment', 'name': '=', 'range': [690, 690], 'children': [{'type': 'CallExpression', 'name': 'self.get_request', 'range': [691, 701], 'children': [{'type': 'Argument', 'name': 'url', 'range': [695, 695], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [698, 699], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [703, 764], 'children': [{'type': 'LogicalExpression', 'name': 'and', 'range': [707, 709], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [705, 705], 'children': [{'type': 'Literal', 'name': '"main"', 'range': [704, 704], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [706, 706], 'children': []}]}, {'type': 'BinaryExpression', 'name': 'in', 'range': [709, 709], 'children': [{'type': 'Literal', 'name': '"weather"', 'range': [708, 708], 'children': []}, {'type': 'Identifier', 'name': 'weather_data', 'range': [710, 710], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [712, 754], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [713, 726], 'children': [{'type': 'Literal', 'name': '"temperature"', 'range': [714, 714], 'children': []}, {'type': 'CallExpression', 'name': 'str', 'range': [716, 725], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["temp"]', 'range': [718, 724], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [727, 740], 'children': [{'type': 'Literal', 'name': '"humidity"', 'range': [728, 728], 'children': []}, {'type': 'CallExpression', 'name': 'str', 'range': [730, 739], 'children': [{'type': 'MemberExpression', 'name': 'weather_data["main"]["humidity"]', 'range': [732, 738], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [741, 754], 'children': [{'type': 'Literal', 'name': '"condition"', 'range': [742, 742], 'children': []}, {'type': 'MemberExpression', 'name': 'weather_data["weather"][0]["description"]', 'range': [744, 753], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [755, 764], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [758, 763], 'children': [{'type': 'CallExpression', 'name': 'RuntimeError', 'range': [760, 763], 'children': [{'type': 'TemplateLiteral', 'name': 'f', 'range': [761, 763], 'children': [{'type': 'TemplateElement', 'name': 'Expected keys not found in response: ', 'range': [762, 762], 'children': []}, {'type': 'TemplateElement', 'name': 'weather_data', 'range': [762, 762], 'children': []}]}]}]}]}]}]}]}
2025-01-08 10:01:55,690 - INFO - Completed main AST analysis flow
2025-01-08 10:01:55,692 - INFO - Successfully processed chunk
2025-01-08 10:01:55,723 - INFO - Starting code generation from AST
