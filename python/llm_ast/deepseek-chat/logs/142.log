2025-01-08 10:17:23,156 - INFO - Processing sample 142
2025-01-08 10:17:23,156 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:17:25,899 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 10:17:25,902 - INFO - Processing chunk #0 (size=293 chars, start_index=0)
2025-01-08 10:17:25,902 - INFO - Processing chunk with 293 chars starting at index 0
2025-01-08 10:17:25,902 - INFO - Starting main AST analysis flow
2025-01-08 10:17:25,903 - INFO - Tokenized code into 60 tokens
2025-01-08 10:17:25,903 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:17:25,904 - INFO - Processing chunk #1 (size=413 chars, start_index=60)
2025-01-08 10:17:25,905 - INFO - Processing chunk with 413 chars starting at index 60
2025-01-08 10:17:25,905 - INFO - Starting main AST analysis flow
2025-01-08 10:17:25,905 - INFO - Tokenized code into 72 tokens
2025-01-08 10:17:25,905 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:17:25,917 - INFO - Processing chunk #2 (size=2789 chars, start_index=132)
2025-01-08 10:17:25,917 - INFO - Processing chunk with 2789 chars starting at index 132
2025-01-08 10:17:25,917 - INFO - Starting main AST analysis flow
2025-01-08 10:17:25,918 - INFO - Tokenized code into 450 tokens
2025-01-08 10:17:25,918 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:17:30,496 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 59], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 11], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 57], 'children': []}]}
2025-01-08 10:17:30,497 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:17:31,446 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [132, 581], 'children': [{'type': 'ClassDeclaration', 'name': 'SendEmailBlock', 'range': [132, 196], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [139, 196], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [219, 249], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [251, 381], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'send_email', 'range': [386, 531], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [533, 581], 'children': []}]}
2025-01-08 10:17:31,446 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:17:40,944 - INFO - Step 1 result: {'type': 'Program', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'ClassDeclaration', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [62, 64], 'children': []}, {'type': 'FieldDeclaration', 'name': 'smtp_server', 'range': [67, 82], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [68, 69], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [70, 82], 'children': [{'type': 'Argument', 'name': 'default', 'range': [74, 76], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [78, 80], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_port', 'range': [84, 97], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [85, 86], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [87, 97], 'children': [{'type': 'Argument', 'name': 'default', 'range': [90, 92], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [94, 96], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_username', 'range': [99, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [100, 101], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [102, 108], 'children': [{'type': 'Argument', 'name': 'key', 'range': [105, 107], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_password', 'range': [110, 119], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [111, 112], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [113, 119], 'children': [{'type': 'Argument', 'name': 'key', 'range': [116, 118], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'model_config', 'range': [122, 129], 'children': [{'type': 'Assignment', 'name': 'ConfigDict', 'range': [123, 129], 'children': [{'type': 'Argument', 'name': 'title', 'range': [126, 128], 'children': []}]}]}]}]}
2025-01-08 10:17:40,944 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:17:42,573 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 59], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'smtplib', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEMultipart', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEText', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'BaseModel', 'range': [25, 25], 'children': []}, {'type': 'ImportSpecifier', 'name': 'ConfigModel', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 57], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockSecret', 'range': [52, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SecretField', 'range': [56, 56], 'children': []}]}]}
2025-01-08 10:17:42,573 - INFO - Starting Step 3: AST simplification
2025-01-08 10:17:55,667 - INFO - Step 2 result: {'type': 'Program', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'ClassDeclaration', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [62, 64], 'children': []}, {'type': 'FieldDeclaration', 'name': 'smtp_server', 'range': [67, 82], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [68, 69], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [70, 82], 'children': [{'type': 'Argument', 'name': 'default', 'range': [74, 76], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [78, 80], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_port', 'range': [84, 97], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [85, 86], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [87, 97], 'children': [{'type': 'Argument', 'name': 'default', 'range': [90, 92], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [94, 96], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_username', 'range': [99, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [100, 101], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [102, 108], 'children': [{'type': 'Argument', 'name': 'key', 'range': [105, 107], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_password', 'range': [110, 119], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [111, 112], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [113, 119], 'children': [{'type': 'Argument', 'name': 'key', 'range': [116, 118], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'model_config', 'range': [122, 129], 'children': [{'type': 'Assignment', 'name': 'ConfigDict', 'range': [123, 129], 'children': [{'type': 'Argument', 'name': 'title', 'range': [126, 128], 'children': []}]}]}]}]}
2025-01-08 10:17:55,667 - INFO - Starting Step 3: AST simplification
2025-01-08 10:17:55,909 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 59], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'smtplib', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEMultipart', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEText', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'BaseModel', 'range': [25, 25], 'children': []}, {'type': 'ImportSpecifier', 'name': 'ConfigModel', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 57], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockSecret', 'range': [52, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SecretField', 'range': [56, 56], 'children': []}]}]}
2025-01-08 10:17:55,909 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:09,669 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 59], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'smtplib', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEMultipart', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEText', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'BaseModel', 'range': [25, 25], 'children': []}, {'type': 'ImportSpecifier', 'name': 'ConfigModel', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 57], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockSecret', 'range': [52, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SecretField', 'range': [56, 56], 'children': []}]}]}
2025-01-08 10:18:09,669 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:18:12,144 - INFO - Step 3 result: {'type': 'Program', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'ClassDeclaration', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [62, 64], 'children': []}, {'type': 'FieldDeclaration', 'name': 'smtp_server', 'range': [67, 82], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [68, 69], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [70, 82], 'children': [{'type': 'Argument', 'name': 'default', 'range': [74, 76], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [78, 80], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_port', 'range': [84, 97], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [85, 86], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [87, 97], 'children': [{'type': 'Argument', 'name': 'default', 'range': [90, 92], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [94, 96], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_username', 'range': [99, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [100, 101], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [102, 108], 'children': [{'type': 'Argument', 'name': 'key', 'range': [105, 107], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'smtp_password', 'range': [110, 119], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [111, 112], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [113, 119], 'children': [{'type': 'Argument', 'name': 'key', 'range': [116, 118], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'model_config', 'range': [122, 129], 'children': [{'type': 'Assignment', 'name': 'ConfigDict', 'range': [123, 129], 'children': [{'type': 'Argument', 'name': 'title', 'range': [126, 128], 'children': []}]}]}]}]}
2025-01-08 10:18:12,144 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:21,978 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [0, 59], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'smtplib', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEMultipart', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'MIMEText', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'BaseModel', 'range': [25, 25], 'children': []}, {'type': 'ImportSpecifier', 'name': 'ConfigModel', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 57], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockSecret', 'range': [52, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SecretField', 'range': [56, 56], 'children': []}]}]}
2025-01-08 10:18:21,978 - INFO - Completed main AST analysis flow
2025-01-08 10:18:21,978 - INFO - Successfully processed chunk
2025-01-08 10:18:27,656 - INFO - Step 4 result: {'type': 'Program', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'ClassDecl', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [62, 64], 'children': []}, {'type': 'FieldDecl', 'name': 'smtp_server', 'range': [67, 82], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [68, 69], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [70, 82], 'children': [{'type': 'Argument', 'name': 'default', 'range': [74, 76], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [78, 80], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_port', 'range': [84, 97], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [85, 86], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [87, 97], 'children': [{'type': 'Argument', 'name': 'default', 'range': [90, 92], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [94, 96], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_username', 'range': [99, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [100, 101], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [102, 108], 'children': [{'type': 'Argument', 'name': 'key', 'range': [105, 107], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_password', 'range': [110, 119], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [111, 112], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [113, 119], 'children': [{'type': 'Argument', 'name': 'key', 'range': [116, 118], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'model_config', 'range': [122, 129], 'children': [{'type': 'Assignment', 'name': 'ConfigDict', 'range': [123, 129], 'children': [{'type': 'Argument', 'name': 'title', 'range': [126, 128], 'children': []}]}]}]}]}
2025-01-08 10:18:27,656 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:18:42,989 - INFO - Step 5 result: {'type': 'Program', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'ClassDecl', 'name': 'EmailCredentials', 'range': [60, 131], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [62, 64], 'children': []}, {'type': 'FieldDecl', 'name': 'smtp_server', 'range': [67, 82], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [68, 69], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [70, 82], 'children': [{'type': 'Argument', 'name': 'default', 'range': [74, 76], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [78, 80], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_port', 'range': [84, 97], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [85, 86], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [87, 97], 'children': [{'type': 'Argument', 'name': 'default', 'range': [90, 92], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [94, 96], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_username', 'range': [99, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [100, 101], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [102, 108], 'children': [{'type': 'Argument', 'name': 'key', 'range': [105, 107], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'smtp_password', 'range': [110, 119], 'children': [{'type': 'TypeAnnotation', 'name': 'BlockSecret', 'range': [111, 112], 'children': []}, {'type': 'Assignment', 'name': 'SecretField', 'range': [113, 119], 'children': [{'type': 'Argument', 'name': 'key', 'range': [116, 118], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'model_config', 'range': [122, 129], 'children': [{'type': 'Assignment', 'name': 'ConfigDict', 'range': [123, 129], 'children': [{'type': 'Argument', 'name': 'title', 'range': [126, 128], 'children': []}]}]}]}]}
2025-01-08 10:18:42,989 - INFO - Completed main AST analysis flow
2025-01-08 10:18:42,990 - INFO - Successfully processed chunk
2025-01-08 10:19:00,533 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [132, 581], 'children': [{'type': 'ClassDeclaration', 'name': 'SendEmailBlock', 'range': [132, 196], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [134, 136], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [139, 196], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [141, 143], 'children': []}, {'type': 'FieldDeclaration', 'name': 'to_email', 'range': [146, 161], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [147, 148], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [149, 150], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [150, 161], 'children': [{'type': 'Argument', 'name': 'description', 'range': [153, 155], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [157, 159], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'subject', 'range': [163, 178], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [164, 165], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [166, 167], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [167, 178], 'children': [{'type': 'Argument', 'name': 'description', 'range': [170, 172], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [174, 176], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'body', 'range': [180, 195], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [181, 182], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [183, 184], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [184, 195], 'children': [{'type': 'Argument', 'name': 'description', 'range': [187, 189], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [191, 193], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'creds', 'range': [197, 216], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [198, 199], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [200, 201], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [201, 216], 'children': [{'type': 'Argument', 'name': 'description', 'range': [204, 206], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [209, 211], 'children': [{'type': 'EmailCredentials', 'name': 'EmailCredentials', 'range': [211, 213], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [219, 249], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [221, 223], 'children': []}, {'type': 'FieldDeclaration', 'name': 'status', 'range': [226, 235], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [227, 228], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [229, 230], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [230, 235], 'children': [{'type': 'Argument', 'name': 'description', 'range': [232, 234], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [237, 248], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [238, 239], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [240, 241], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [241, 248], 'children': [{'type': 'Argument', 'name': 'description', 'range': [244, 246], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [251, 381], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [254, 255], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [258, 264], 'children': []}, {'type': 'Assignment', 'name': 'disabled', 'range': [265, 267], 'children': [{'type': 'Literal', 'name': 'True', 'range': [267, 267], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [270, 272], 'children': [{'type': 'Literal', 'name': '"4335878a-394e-4e67-adf2-919877ff49ae"', 'range': [272, 272], 'children': []}]}, {'type': 'Assignment', 'name': 'description', 'range': [275, 277], 'children': [{'type': 'Literal', 'name': '"This block sends an email using the provided SMTP credentials."', 'range': [277, 277], 'children': []}]}, {'type': 'Assignment', 'name': 'categories', 'range': [280, 286], 'children': [{'type': 'BlockCategory', 'name': 'BlockCategory.OUTPUT', 'range': [283, 286], 'children': []}]}, {'type': 'Assignment', 'name': 'input_schema', 'range': [289, 294], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Input', 'range': [291, 294], 'children': []}]}, {'type': 'Assignment', 'name': 'output_schema', 'range': [296, 300], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Output', 'range': [298, 300], 'children': []}]}, {'type': 'Assignment', 'name': 'test_input', 'range': [303, 349], 'children': [{'type': 'Literal', 'name': '"to_email"', 'range': [307, 307], 'children': []}, {'type': 'Literal', 'name': '"recipient@example.com"', 'range': [309, 309], 'children': []}, {'type': 'Literal', 'name': '"subject"', 'range': [312, 312], 'children': []}, {'type': 'Literal', 'name': '"Test Email"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"body"', 'range': [317, 317], 'children': []}, {'type': 'Literal', 'name': '"This is a test email."', 'range': [319, 319], 'children': []}, {'type': 'Literal', 'name': '"creds"', 'range': [322, 322], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [324, 346], 'children': [{'type': 'Literal', 'name': '"smtp_server"', 'range': [326, 326], 'children': []}, {'type': 'Literal', 'name': '"smtp.gmail.com"', 'range': [328, 328], 'children': []}, {'type': 'Literal', 'name': '"smtp_port"', 'range': [331, 331], 'children': []}, {'type': 'Literal', 'name': '25', 'range': [333, 333], 'children': []}, {'type': 'Literal', 'name': '"smtp_username"', 'range': [336, 336], 'children': []}, {'type': 'Literal', 'name': '"your-email@gmail.com"', 'range': [338, 338], 'children': []}, {'type': 'Literal', 'name': '"smtp_password"', 'range': [341, 341], 'children': []}, {'type': 'Literal', 'name': '"your-gmail-password"', 'range': [343, 343], 'children': []}]}]}, {'type': 'Assignment', 'name': 'test_output', 'range': [352, 360], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [354, 360], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [355, 359], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [356, 356], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [358, 358], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'test_mock', 'range': [363, 377], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [365, 377], 'children': [{'type': 'Literal', 'name': '"send_email"', 'range': [366, 366], 'children': []}, {'type': 'Lambda', 'name': '', 'range': [368, 376], 'children': [{'type': 'Parameter', 'name': '*args', 'range': [369, 370], 'children': []}, {'type': 'Parameter', 'name': '**kwargs', 'range': [372, 374], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [376, 376], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'send_email', 'range': [386, 531], 'children': [{'type': 'Parameter', 'name': 'creds', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [391, 392], 'children': []}]}, {'type': 'Parameter', 'name': 'to_email', 'range': [394, 396], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [395, 396], 'children': []}]}, {'type': 'Parameter', 'name': 'subject', 'range': [398, 400], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [399, 400], 'children': []}]}, {'type': 'Parameter', 'name': 'body', 'range': [402, 404], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [403, 404], 'children': []}]}, {'type': 'ReturnType', 'name': 'str', 'range': [407, 409], 'children': []}, {'type': 'Assignment', 'name': 'smtp_server', 'range': [412, 417], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_server', 'range': [414, 417], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_port', 'range': [418, 423], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_port', 'range': [420, 423], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_username', 'range': [424, 433], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_username', 'range': [426, 429], 'children': []}, {'type': 'MethodCall', 'name': 'get_secret_value', 'range': [430, 433], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_password', 'range': [434, 443], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_password', 'range': [436, 439], 'children': []}, {'type': 'MethodCall', 'name': 'get_secret_value', 'range': [440, 443], 'children': []}]}, {'type': 'Assignment', 'name': 'msg', 'range': [445, 450], 'children': [{'type': 'MIMEMultipart', 'name': 'MIMEMultipart', 'range': [447, 450], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["From"]', 'range': [451, 457], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [456, 457], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["To"]', 'range': [458, 464], 'children': [{'type': 'Literal', 'name': 'to_email', 'range': [463, 464], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["Subject"]', 'range': [465, 471], 'children': [{'type': 'Literal', 'name': 'subject', 'range': [470, 471], 'children': []}]}, {'type': 'MethodCall', 'name': 'msg.attach', 'range': [472, 483], 'children': [{'type': 'MIMEText', 'name': 'MIMEText', 'range': [476, 481], 'children': [{'type': 'Literal', 'name': 'body', 'range': [478, 478], 'children': []}, {'type': 'Literal', 'name': '"plain"', 'range': [480, 480], 'children': []}]}]}, {'type': 'WithStatement', 'name': 'with', 'range': [485, 527], 'children': [{'type': 'SMTP', 'name': 'smtplib.SMTP', 'range': [486, 493], 'children': [{'type': 'Literal', 'name': 'smtp_server', 'range': [490, 490], 'children': []}, {'type': 'Literal', 'name': 'smtp_port', 'range': [492, 492], 'children': []}]}, {'type': 'MethodCall', 'name': 'server.starttls', 'range': [498, 503], 'children': []}, {'type': 'MethodCall', 'name': 'server.login', 'range': [504, 512], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [508, 508], 'children': []}, {'type': 'Literal', 'name': 'smtp_password', 'range': [510, 510], 'children': []}]}, {'type': 'MethodCall', 'name': 'server.sendmail', 'range': [513, 527], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [517, 517], 'children': []}, {'type': 'Literal', 'name': 'to_email', 'range': [519, 519], 'children': []}, {'type': 'MethodCall', 'name': 'msg.as_string', 'range': [522, 526], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [529, 531], 'children': [{'type': 'Literal', 'name': '"Email sent successfully"', 'range': [530, 531], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [533, 581], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [536, 537], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [538, 540], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [539, 540], 'children': []}]}, {'type': 'Parameter', 'name': '**kwargs', 'range': [542, 544], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [546, 548], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [551, 580], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [552, 552], 'children': []}, {'type': 'MethodCall', 'name': 'self.send_email', 'range': [554, 579], 'children': [{'type': 'MemberExpression', 'name': 'input_data.creds', 'range': [560, 562], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.to_email', 'range': [565, 567], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.subject', 'range': [570, 572], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.body', 'range': [575, 577], 'children': []}]}]}]}]}
2025-01-08 10:19:00,533 - INFO - Starting Step 3: AST simplification
2025-01-08 10:20:31,500 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [132, 581], 'children': [{'type': 'ClassDeclaration', 'name': 'SendEmailBlock', 'range': [132, 196], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [134, 136], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [139, 196], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [141, 143], 'children': []}, {'type': 'FieldDeclaration', 'name': 'to_email', 'range': [146, 161], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [147, 148], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [150, 161], 'children': [{'type': 'Argument', 'name': 'description', 'range': [153, 155], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [157, 159], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'subject', 'range': [163, 178], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [164, 165], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [167, 178], 'children': [{'type': 'Argument', 'name': 'description', 'range': [170, 172], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [174, 176], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'body', 'range': [180, 195], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [181, 182], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [184, 195], 'children': [{'type': 'Argument', 'name': 'description', 'range': [187, 189], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [191, 193], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'creds', 'range': [197, 216], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [198, 199], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [201, 216], 'children': [{'type': 'Argument', 'name': 'description', 'range': [204, 206], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [209, 211], 'children': [{'type': 'EmailCredentials', 'name': 'EmailCredentials', 'range': [211, 213], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [219, 249], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [221, 223], 'children': []}, {'type': 'FieldDeclaration', 'name': 'status', 'range': [226, 235], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [227, 228], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [230, 235], 'children': [{'type': 'Argument', 'name': 'description', 'range': [232, 234], 'children': []}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [237, 248], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [238, 239], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [241, 248], 'children': [{'type': 'Argument', 'name': 'description', 'range': [244, 246], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [251, 381], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [254, 255], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [258, 264], 'children': []}, {'type': 'Assignment', 'name': 'disabled', 'range': [265, 267], 'children': [{'type': 'Literal', 'name': 'True', 'range': [267, 267], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [270, 272], 'children': [{'type': 'Literal', 'name': '"4335878a-394e-4e67-adf2-919877ff49ae"', 'range': [272, 272], 'children': []}]}, {'type': 'Assignment', 'name': 'description', 'range': [275, 277], 'children': [{'type': 'Literal', 'name': '"This block sends an email using the provided SMTP credentials."', 'range': [277, 277], 'children': []}]}, {'type': 'Assignment', 'name': 'categories', 'range': [280, 286], 'children': [{'type': 'BlockCategory', 'name': 'BlockCategory.OUTPUT', 'range': [283, 286], 'children': []}]}, {'type': 'Assignment', 'name': 'input_schema', 'range': [289, 294], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Input', 'range': [291, 294], 'children': []}]}, {'type': 'Assignment', 'name': 'output_schema', 'range': [296, 300], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Output', 'range': [298, 300], 'children': []}]}, {'type': 'Assignment', 'name': 'test_input', 'range': [303, 349], 'children': [{'type': 'Literal', 'name': '"to_email"', 'range': [307, 307], 'children': []}, {'type': 'Literal', 'name': '"recipient@example.com"', 'range': [309, 309], 'children': []}, {'type': 'Literal', 'name': '"subject"', 'range': [312, 312], 'children': []}, {'type': 'Literal', 'name': '"Test Email"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"body"', 'range': [317, 317], 'children': []}, {'type': 'Literal', 'name': '"This is a test email."', 'range': [319, 319], 'children': []}, {'type': 'Literal', 'name': '"creds"', 'range': [322, 322], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [324, 346], 'children': [{'type': 'Literal', 'name': '"smtp_server"', 'range': [326, 326], 'children': []}, {'type': 'Literal', 'name': '"smtp.gmail.com"', 'range': [328, 328], 'children': []}, {'type': 'Literal', 'name': '"smtp_port"', 'range': [331, 331], 'children': []}, {'type': 'Literal', 'name': '25', 'range': [333, 333], 'children': []}, {'type': 'Literal', 'name': '"smtp_username"', 'range': [336, 336], 'children': []}, {'type': 'Literal', 'name': '"your-email@gmail.com"', 'range': [338, 338], 'children': []}, {'type': 'Literal', 'name': '"smtp_password"', 'range': [341, 341], 'children': []}, {'type': 'Literal', 'name': '"your-gmail-password"', 'range': [343, 343], 'children': []}]}]}, {'type': 'Assignment', 'name': 'test_output', 'range': [352, 360], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [354, 360], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [355, 359], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [356, 356], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [358, 358], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'test_mock', 'range': [363, 377], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [365, 377], 'children': [{'type': 'Literal', 'name': '"send_email"', 'range': [366, 366], 'children': []}, {'type': 'Lambda', 'name': '', 'range': [368, 376], 'children': [{'type': 'Parameter', 'name': '*args', 'range': [369, 370], 'children': []}, {'type': 'Parameter', 'name': '**kwargs', 'range': [372, 374], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [376, 376], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'send_email', 'range': [386, 531], 'children': [{'type': 'Parameter', 'name': 'creds', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [391, 392], 'children': []}]}, {'type': 'Parameter', 'name': 'to_email', 'range': [394, 396], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [395, 396], 'children': []}]}, {'type': 'Parameter', 'name': 'subject', 'range': [398, 400], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [399, 400], 'children': []}]}, {'type': 'Parameter', 'name': 'body', 'range': [402, 404], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [403, 404], 'children': []}]}, {'type': 'ReturnType', 'name': 'str', 'range': [407, 409], 'children': []}, {'type': 'Assignment', 'name': 'smtp_server', 'range': [412, 417], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_server', 'range': [414, 417], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_port', 'range': [418, 423], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_port', 'range': [420, 423], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_username', 'range': [424, 433], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_username', 'range': [426, 429], 'children': []}, {'type': 'MethodCall', 'name': 'get_secret_value', 'range': [430, 433], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_password', 'range': [434, 443], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_password', 'range': [436, 439], 'children': []}, {'type': 'MethodCall', 'name': 'get_secret_value', 'range': [440, 443], 'children': []}]}, {'type': 'Assignment', 'name': 'msg', 'range': [445, 450], 'children': [{'type': 'MIMEMultipart', 'name': 'MIMEMultipart', 'range': [447, 450], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["From"]', 'range': [451, 457], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [456, 457], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["To"]', 'range': [458, 464], 'children': [{'type': 'Literal', 'name': 'to_email', 'range': [463, 464], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["Subject"]', 'range': [465, 471], 'children': [{'type': 'Literal', 'name': 'subject', 'range': [470, 471], 'children': []}]}, {'type': 'MethodCall', 'name': 'msg.attach', 'range': [472, 483], 'children': [{'type': 'MIMEText', 'name': 'MIMEText', 'range': [476, 481], 'children': [{'type': 'Literal', 'name': 'body', 'range': [478, 478], 'children': []}, {'type': 'Literal', 'name': '"plain"', 'range': [480, 480], 'children': []}]}]}, {'type': 'WithStatement', 'name': 'with', 'range': [485, 527], 'children': [{'type': 'SMTP', 'name': 'smtplib.SMTP', 'range': [486, 493], 'children': [{'type': 'Literal', 'name': 'smtp_server', 'range': [490, 490], 'children': []}, {'type': 'Literal', 'name': 'smtp_port', 'range': [492, 492], 'children': []}]}, {'type': 'MethodCall', 'name': 'server.starttls', 'range': [498, 503], 'children': []}, {'type': 'MethodCall', 'name': 'server.login', 'range': [504, 512], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [508, 508], 'children': []}, {'type': 'Literal', 'name': 'smtp_password', 'range': [510, 510], 'children': []}]}, {'type': 'MethodCall', 'name': 'server.sendmail', 'range': [513, 527], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [517, 517], 'children': []}, {'type': 'Literal', 'name': 'to_email', 'range': [519, 519], 'children': []}, {'type': 'MethodCall', 'name': 'msg.as_string', 'range': [522, 526], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [529, 531], 'children': [{'type': 'Literal', 'name': '"Email sent successfully"', 'range': [530, 531], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [533, 581], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [536, 537], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [538, 540], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [539, 540], 'children': []}]}, {'type': 'Parameter', 'name': '**kwargs', 'range': [542, 544], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [546, 548], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [551, 580], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [552, 552], 'children': []}, {'type': 'MethodCall', 'name': 'self.send_email', 'range': [554, 579], 'children': [{'type': 'MemberExpression', 'name': 'input_data.creds', 'range': [560, 562], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.to_email', 'range': [565, 567], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.subject', 'range': [570, 572], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.body', 'range': [575, 577], 'children': []}]}]}]}]}
2025-01-08 10:20:31,500 - INFO - Starting Step 4: AST normalization
2025-01-08 10:22:00,283 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [132, 581], 'children': [{'type': 'ClassDecl', 'name': 'SendEmailBlock', 'range': [132, 196], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [134, 136], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [139, 196], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [141, 143], 'children': []}, {'type': 'FieldDecl', 'name': 'to_email', 'range': [146, 161], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [147, 148], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [150, 161], 'children': [{'type': 'Argument', 'name': 'description', 'range': [153, 155], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [157, 159], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'subject', 'range': [163, 178], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [164, 165], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [167, 178], 'children': [{'type': 'Argument', 'name': 'description', 'range': [170, 172], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [174, 176], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'body', 'range': [180, 195], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [181, 182], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [184, 195], 'children': [{'type': 'Argument', 'name': 'description', 'range': [187, 189], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [191, 193], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'creds', 'range': [197, 216], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [198, 199], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [201, 216], 'children': [{'type': 'Argument', 'name': 'description', 'range': [204, 206], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [209, 211], 'children': [{'type': 'EmailCredentials', 'name': 'EmailCredentials', 'range': [211, 213], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [219, 249], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [221, 223], 'children': []}, {'type': 'FieldDecl', 'name': 'status', 'range': [226, 235], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [227, 228], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [230, 235], 'children': [{'type': 'Argument', 'name': 'description', 'range': [232, 234], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [237, 248], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [238, 239], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [241, 248], 'children': [{'type': 'Argument', 'name': 'description', 'range': [244, 246], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [251, 381], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [254, 255], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [258, 264], 'children': []}, {'type': 'Assignment', 'name': 'disabled', 'range': [265, 267], 'children': [{'type': 'Literal', 'name': 'True', 'range': [267, 267], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [270, 272], 'children': [{'type': 'Literal', 'name': '"4335878a-394e-4e67-adf2-919877ff49ae"', 'range': [272, 272], 'children': []}]}, {'type': 'Assignment', 'name': 'description', 'range': [275, 277], 'children': [{'type': 'Literal', 'name': '"This block sends an email using the provided SMTP credentials."', 'range': [277, 277], 'children': []}]}, {'type': 'Assignment', 'name': 'categories', 'range': [280, 286], 'children': [{'type': 'BlockCategory', 'name': 'BlockCategory.OUTPUT', 'range': [283, 286], 'children': []}]}, {'type': 'Assignment', 'name': 'input_schema', 'range': [289, 294], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Input', 'range': [291, 294], 'children': []}]}, {'type': 'Assignment', 'name': 'output_schema', 'range': [296, 300], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Output', 'range': [298, 300], 'children': []}]}, {'type': 'Assignment', 'name': 'test_input', 'range': [303, 349], 'children': [{'type': 'Literal', 'name': '"to_email"', 'range': [307, 307], 'children': []}, {'type': 'Literal', 'name': '"recipient@example.com"', 'range': [309, 309], 'children': []}, {'type': 'Literal', 'name': '"subject"', 'range': [312, 312], 'children': []}, {'type': 'Literal', 'name': '"Test Email"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"body"', 'range': [317, 317], 'children': []}, {'type': 'Literal', 'name': '"This is a test email."', 'range': [319, 319], 'children': []}, {'type': 'Literal', 'name': '"creds"', 'range': [322, 322], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [324, 346], 'children': [{'type': 'Literal', 'name': '"smtp_server"', 'range': [326, 326], 'children': []}, {'type': 'Literal', 'name': '"smtp.gmail.com"', 'range': [328, 328], 'children': []}, {'type': 'Literal', 'name': '"smtp_port"', 'range': [331, 331], 'children': []}, {'type': 'Literal', 'name': '25', 'range': [333, 333], 'children': []}, {'type': 'Literal', 'name': '"smtp_username"', 'range': [336, 336], 'children': []}, {'type': 'Literal', 'name': '"your-email@gmail.com"', 'range': [338, 338], 'children': []}, {'type': 'Literal', 'name': '"smtp_password"', 'range': [341, 341], 'children': []}, {'type': 'Literal', 'name': '"your-gmail-password"', 'range': [343, 343], 'children': []}]}]}, {'type': 'Assignment', 'name': 'test_output', 'range': [352, 360], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [354, 360], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [355, 359], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [356, 356], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [358, 358], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'test_mock', 'range': [363, 377], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [365, 377], 'children': [{'type': 'Literal', 'name': '"send_email"', 'range': [366, 366], 'children': []}, {'type': 'Lambda', 'name': '', 'range': [368, 376], 'children': [{'type': 'Parameter', 'name': '*args', 'range': [369, 370], 'children': []}, {'type': 'Parameter', 'name': '**kwargs', 'range': [372, 374], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [376, 376], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'send_email', 'range': [386, 531], 'children': [{'type': 'Parameter', 'name': 'creds', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [391, 392], 'children': []}]}, {'type': 'Parameter', 'name': 'to_email', 'range': [394, 396], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [395, 396], 'children': []}]}, {'type': 'Parameter', 'name': 'subject', 'range': [398, 400], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [399, 400], 'children': []}]}, {'type': 'Parameter', 'name': 'body', 'range': [402, 404], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [403, 404], 'children': []}]}, {'type': 'ReturnType', 'name': 'str', 'range': [407, 409], 'children': []}, {'type': 'Assignment', 'name': 'smtp_server', 'range': [412, 417], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_server', 'range': [414, 417], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_port', 'range': [418, 423], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_port', 'range': [420, 423], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_username', 'range': [424, 433], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_username', 'range': [426, 429], 'children': []}, {'type': 'CallExpression', 'name': 'get_secret_value', 'range': [430, 433], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_password', 'range': [434, 443], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_password', 'range': [436, 439], 'children': []}, {'type': 'CallExpression', 'name': 'get_secret_value', 'range': [440, 443], 'children': []}]}, {'type': 'Assignment', 'name': 'msg', 'range': [445, 450], 'children': [{'type': 'MIMEMultipart', 'name': 'MIMEMultipart', 'range': [447, 450], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["From"]', 'range': [451, 457], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [456, 457], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["To"]', 'range': [458, 464], 'children': [{'type': 'Literal', 'name': 'to_email', 'range': [463, 464], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["Subject"]', 'range': [465, 471], 'children': [{'type': 'Literal', 'name': 'subject', 'range': [470, 471], 'children': []}]}, {'type': 'CallExpression', 'name': 'msg.attach', 'range': [472, 483], 'children': [{'type': 'MIMEText', 'name': 'MIMEText', 'range': [476, 481], 'children': [{'type': 'Literal', 'name': 'body', 'range': [478, 478], 'children': []}, {'type': 'Literal', 'name': '"plain"', 'range': [480, 480], 'children': []}]}]}, {'type': 'WithStatement', 'name': 'with', 'range': [485, 527], 'children': [{'type': 'SMTP', 'name': 'smtplib.SMTP', 'range': [486, 493], 'children': [{'type': 'Literal', 'name': 'smtp_server', 'range': [490, 490], 'children': []}, {'type': 'Literal', 'name': 'smtp_port', 'range': [492, 492], 'children': []}]}, {'type': 'CallExpression', 'name': 'server.starttls', 'range': [498, 503], 'children': []}, {'type': 'CallExpression', 'name': 'server.login', 'range': [504, 512], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [508, 508], 'children': []}, {'type': 'Literal', 'name': 'smtp_password', 'range': [510, 510], 'children': []}]}, {'type': 'CallExpression', 'name': 'server.sendmail', 'range': [513, 527], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [517, 517], 'children': []}, {'type': 'Literal', 'name': 'to_email', 'range': [519, 519], 'children': []}, {'type': 'CallExpression', 'name': 'msg.as_string', 'range': [522, 526], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [529, 531], 'children': [{'type': 'Literal', 'name': '"Email sent successfully"', 'range': [530, 531], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [533, 581], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [536, 537], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [538, 540], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [539, 540], 'children': []}]}, {'type': 'Parameter', 'name': '**kwargs', 'range': [542, 544], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [546, 548], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [551, 580], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [552, 552], 'children': []}, {'type': 'CallExpression', 'name': 'self.send_email', 'range': [554, 579], 'children': [{'type': 'MemberExpression', 'name': 'input_data.creds', 'range': [560, 562], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.to_email', 'range': [565, 567], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.subject', 'range': [570, 572], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.body', 'range': [575, 577], 'children': []}]}]}]}]}
2025-01-08 10:22:00,283 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:23:30,152 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [132, 581], 'children': [{'type': 'ClassDecl', 'name': 'SendEmailBlock', 'range': [132, 196], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [134, 136], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [139, 196], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [141, 143], 'children': []}, {'type': 'FieldDecl', 'name': 'to_email', 'range': [146, 161], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [147, 148], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [150, 161], 'children': [{'type': 'Argument', 'name': 'description', 'range': [153, 155], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [157, 159], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'subject', 'range': [163, 178], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [164, 165], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [167, 178], 'children': [{'type': 'Argument', 'name': 'description', 'range': [170, 172], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [174, 176], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'body', 'range': [180, 195], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [181, 182], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [184, 195], 'children': [{'type': 'Argument', 'name': 'description', 'range': [187, 189], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [191, 193], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'creds', 'range': [197, 216], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [198, 199], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [201, 216], 'children': [{'type': 'Argument', 'name': 'description', 'range': [204, 206], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [209, 211], 'children': [{'type': 'EmailCredentials', 'name': 'EmailCredentials', 'range': [211, 213], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [219, 249], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [221, 223], 'children': []}, {'type': 'FieldDecl', 'name': 'status', 'range': [226, 235], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [227, 228], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [230, 235], 'children': [{'type': 'Argument', 'name': 'description', 'range': [232, 234], 'children': []}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [237, 248], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [238, 239], 'children': []}, {'type': 'SchemaField', 'name': 'SchemaField', 'range': [241, 248], 'children': [{'type': 'Argument', 'name': 'description', 'range': [244, 246], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [251, 381], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [254, 255], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [258, 264], 'children': []}, {'type': 'Assignment', 'name': 'disabled', 'range': [265, 267], 'children': [{'type': 'Literal', 'name': 'True', 'range': [267, 267], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [270, 272], 'children': [{'type': 'Literal', 'name': '"4335878a-394e-4e67-adf2-919877ff49ae"', 'range': [272, 272], 'children': []}]}, {'type': 'Assignment', 'name': 'description', 'range': [275, 277], 'children': [{'type': 'Literal', 'name': '"This block sends an email using the provided SMTP credentials."', 'range': [277, 277], 'children': []}]}, {'type': 'Assignment', 'name': 'categories', 'range': [280, 286], 'children': [{'type': 'BlockCategory', 'name': 'BlockCategory.OUTPUT', 'range': [283, 286], 'children': []}]}, {'type': 'Assignment', 'name': 'input_schema', 'range': [289, 294], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Input', 'range': [291, 294], 'children': []}]}, {'type': 'Assignment', 'name': 'output_schema', 'range': [296, 300], 'children': [{'type': 'SendEmailBlock', 'name': 'SendEmailBlock.Output', 'range': [298, 300], 'children': []}]}, {'type': 'Assignment', 'name': 'test_input', 'range': [303, 349], 'children': [{'type': 'Literal', 'name': '"to_email"', 'range': [307, 307], 'children': []}, {'type': 'Literal', 'name': '"recipient@example.com"', 'range': [309, 309], 'children': []}, {'type': 'Literal', 'name': '"subject"', 'range': [312, 312], 'children': []}, {'type': 'Literal', 'name': '"Test Email"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"body"', 'range': [317, 317], 'children': []}, {'type': 'Literal', 'name': '"This is a test email."', 'range': [319, 319], 'children': []}, {'type': 'Literal', 'name': '"creds"', 'range': [322, 322], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [324, 346], 'children': [{'type': 'Literal', 'name': '"smtp_server"', 'range': [326, 326], 'children': []}, {'type': 'Literal', 'name': '"smtp.gmail.com"', 'range': [328, 328], 'children': []}, {'type': 'Literal', 'name': '"smtp_port"', 'range': [331, 331], 'children': []}, {'type': 'Literal', 'name': '25', 'range': [333, 333], 'children': []}, {'type': 'Literal', 'name': '"smtp_username"', 'range': [336, 336], 'children': []}, {'type': 'Literal', 'name': '"your-email@gmail.com"', 'range': [338, 338], 'children': []}, {'type': 'Literal', 'name': '"smtp_password"', 'range': [341, 341], 'children': []}, {'type': 'Literal', 'name': '"your-gmail-password"', 'range': [343, 343], 'children': []}]}]}, {'type': 'Assignment', 'name': 'test_output', 'range': [352, 360], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [354, 360], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [355, 359], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [356, 356], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [358, 358], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'test_mock', 'range': [363, 377], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [365, 377], 'children': [{'type': 'Literal', 'name': '"send_email"', 'range': [366, 366], 'children': []}, {'type': 'Lambda', 'name': '', 'range': [368, 376], 'children': [{'type': 'Parameter', 'name': '*args', 'range': [369, 370], 'children': []}, {'type': 'Parameter', 'name': '**kwargs', 'range': [372, 374], 'children': []}, {'type': 'Literal', 'name': '"Email sent successfully"', 'range': [376, 376], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'send_email', 'range': [386, 531], 'children': [{'type': 'Parameter', 'name': 'creds', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'EmailCredentials', 'range': [391, 392], 'children': []}]}, {'type': 'Parameter', 'name': 'to_email', 'range': [394, 396], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [395, 396], 'children': []}]}, {'type': 'Parameter', 'name': 'subject', 'range': [398, 400], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [399, 400], 'children': []}]}, {'type': 'Parameter', 'name': 'body', 'range': [402, 404], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [403, 404], 'children': []}]}, {'type': 'ReturnType', 'name': 'str', 'range': [407, 409], 'children': []}, {'type': 'Assignment', 'name': 'smtp_server', 'range': [412, 417], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_server', 'range': [414, 417], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_port', 'range': [418, 423], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_port', 'range': [420, 423], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_username', 'range': [424, 433], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_username', 'range': [426, 429], 'children': []}, {'type': 'CallExpression', 'name': 'get_secret_value', 'range': [430, 433], 'children': []}]}, {'type': 'Assignment', 'name': 'smtp_password', 'range': [434, 443], 'children': [{'type': 'MemberExpression', 'name': 'creds.smtp_password', 'range': [436, 439], 'children': []}, {'type': 'CallExpression', 'name': 'get_secret_value', 'range': [440, 443], 'children': []}]}, {'type': 'Assignment', 'name': 'msg', 'range': [445, 450], 'children': [{'type': 'MIMEMultipart', 'name': 'MIMEMultipart', 'range': [447, 450], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["From"]', 'range': [451, 457], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [456, 457], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["To"]', 'range': [458, 464], 'children': [{'type': 'Literal', 'name': 'to_email', 'range': [463, 464], 'children': []}]}, {'type': 'Assignment', 'name': 'msg["Subject"]', 'range': [465, 471], 'children': [{'type': 'Literal', 'name': 'subject', 'range': [470, 471], 'children': []}]}, {'type': 'CallExpression', 'name': 'msg.attach', 'range': [472, 483], 'children': [{'type': 'MIMEText', 'name': 'MIMEText', 'range': [476, 481], 'children': [{'type': 'Literal', 'name': 'body', 'range': [478, 478], 'children': []}, {'type': 'Literal', 'name': '"plain"', 'range': [480, 480], 'children': []}]}]}, {'type': 'WithStatement', 'name': 'with', 'range': [485, 527], 'children': [{'type': 'SMTP', 'name': 'smtplib.SMTP', 'range': [486, 493], 'children': [{'type': 'Literal', 'name': 'smtp_server', 'range': [490, 490], 'children': []}, {'type': 'Literal', 'name': 'smtp_port', 'range': [492, 492], 'children': []}]}, {'type': 'CallExpression', 'name': 'server.starttls', 'range': [498, 503], 'children': []}, {'type': 'CallExpression', 'name': 'server.login', 'range': [504, 512], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [508, 508], 'children': []}, {'type': 'Literal', 'name': 'smtp_password', 'range': [510, 510], 'children': []}]}, {'type': 'CallExpression', 'name': 'server.sendmail', 'range': [513, 527], 'children': [{'type': 'Literal', 'name': 'smtp_username', 'range': [517, 517], 'children': []}, {'type': 'Literal', 'name': 'to_email', 'range': [519, 519], 'children': []}, {'type': 'CallExpression', 'name': 'msg.as_string', 'range': [522, 526], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [529, 531], 'children': [{'type': 'Literal', 'name': '"Email sent successfully"', 'range': [530, 531], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [533, 581], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [536, 537], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [538, 540], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [539, 540], 'children': []}]}, {'type': 'Parameter', 'name': '**kwargs', 'range': [542, 544], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [546, 548], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [551, 580], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [552, 552], 'children': []}, {'type': 'CallExpression', 'name': 'self.send_email', 'range': [554, 579], 'children': [{'type': 'MemberExpression', 'name': 'input_data.creds', 'range': [560, 562], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.to_email', 'range': [565, 567], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.subject', 'range': [570, 572], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.body', 'range': [575, 577], 'children': []}]}]}]}]}
2025-01-08 10:23:30,152 - INFO - Completed main AST analysis flow
2025-01-08 10:23:30,155 - INFO - Successfully processed chunk
2025-01-08 10:23:30,190 - INFO - Starting code generation from AST
2025-01-08 10:23:50,820 - INFO - Successfully generated code from AST
2025-01-08 10:23:50,821 - INFO - Starting static code similarity comparison
2025-01-08 10:23:50,832 - INFO - Static similarity result: {'final_score': 100.0, 'length_similarity': 100.0, 'token_similarity': 100.0, 'structure_similarity': 100.0, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
