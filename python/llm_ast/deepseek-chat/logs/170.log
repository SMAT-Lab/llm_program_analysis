2025-01-08 10:27:27,621 - INFO - Processing sample 170
2025-01-08 10:27:27,621 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:32,782 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 10:27:32,784 - INFO - Processing chunk #0 (size=55 chars, start_index=0)
2025-01-08 10:27:32,784 - INFO - Processing chunk with 55 chars starting at index 0
2025-01-08 10:27:32,784 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,784 - INFO - Tokenized code into 23 tokens
2025-01-08 10:27:32,785 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,785 - INFO - Processing chunk #1 (size=1363 chars, start_index=23)
2025-01-08 10:27:32,785 - INFO - Processing chunk with 1363 chars starting at index 23
2025-01-08 10:27:32,785 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,786 - INFO - Tokenized code into 215 tokens
2025-01-08 10:27:32,786 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,787 - INFO - Processing chunk #2 (size=57 chars, start_index=238)
2025-01-08 10:27:32,793 - INFO - Processing chunk with 57 chars starting at index 238
2025-01-08 10:27:32,798 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,798 - INFO - Tokenized code into 14 tokens
2025-01-08 10:27:32,798 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:34,735 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [238, 251], 'children': []}
2025-01-08 10:27:34,735 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:34,845 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 22], 'children': []}
2025-01-08 10:27:34,845 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:40,508 - INFO - Step 1 result: {'type': 'Program', 'name': 'SpendingByCategory', 'range': [23, 237], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [31, 45], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'current_year_month', 'range': [51, 65], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'extract_year_month', 'range': [67, 83], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'handle_budget_notifications', 'range': [85, 103], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'mapper', 'range': [105, 162], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'reducer', 'range': [163, 202], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'steps', 'range': [203, 237], 'children': []}]}
2025-01-08 10:27:40,595 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:49,096 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [238, 251], 'children': [{'type': 'IfStatement', 'name': '', 'range': [238, 250], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [239, 242], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [239, 239], 'children': []}, {'type': 'Literal', 'name': "'__main__'", 'range': [242, 242], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [244, 250], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [245, 249], 'children': [{'type': 'CallExpression', 'name': '', 'range': [245, 249], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [245, 247], 'children': [{'type': 'Identifier', 'name': 'SpendingByCategory', 'range': [245, 245], 'children': []}, {'type': 'Identifier', 'name': 'run', 'range': [247, 247], 'children': []}]}]}]}]}]}]}
2025-01-08 10:27:49,284 - INFO - Starting Step 3: AST simplification
2025-01-08 10:27:52,463 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 22], 'children': [{'type': 'Comment', 'name': '', 'range': [0, 12], 'children': [{'type': 'Token', 'name': '#', 'range': [0, 1], 'children': []}, {'type': 'Token', 'name': '-', 'range': [1, 2], 'children': []}, {'type': 'Token', 'name': '*', 'range': [2, 3], 'children': []}, {'type': 'Token', 'name': '-', 'range': [3, 4], 'children': []}, {'type': 'Token', 'name': 'coding', 'range': [4, 5], 'children': []}, {'type': 'Token', 'name': ':', 'range': [5, 6], 'children': []}, {'type': 'Token', 'name': 'utf', 'range': [6, 7], 'children': []}, {'type': 'Token', 'name': '-', 'range': [7, 8], 'children': []}, {'type': 'Token', 'name': '8', 'range': [8, 9], 'children': []}, {'type': 'Token', 'name': '-', 'range': [9, 10], 'children': []}, {'type': 'Token', 'name': '*', 'range': [10, 11], 'children': []}, {'type': 'Token', 'name': '-', 'range': [11, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 20], 'children': [{'type': 'Token', 'name': 'from', 'range': [14, 15], 'children': []}, {'type': 'Token', 'name': 'mrjob', 'range': [15, 16], 'children': []}, {'type': 'Token', 'name': '.', 'range': [16, 17], 'children': []}, {'type': 'Token', 'name': 'job', 'range': [17, 18], 'children': []}, {'type': 'Token', 'name': 'import', 'range': [18, 19], 'children': []}, {'type': 'Token', 'name': 'MRJob', 'range': [19, 20], 'children': []}]}]}
2025-01-08 10:27:52,463 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:04,199 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [238, 251], 'children': [{'type': 'IfStatement', 'name': '', 'range': [238, 250], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [239, 242], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [239, 239], 'children': []}, {'type': 'Literal', 'name': "'__main__'", 'range': [242, 242], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [244, 250], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [245, 249], 'children': [{'type': 'CallExpression', 'name': '', 'range': [245, 249], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [245, 247], 'children': [{'type': 'Identifier', 'name': 'SpendingByCategory', 'range': [245, 245], 'children': []}, {'type': 'Identifier', 'name': 'run', 'range': [247, 247], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:04,518 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:08,585 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 22], 'children': [{'type': 'Comment', 'name': '', 'range': [0, 12], 'children': [{'type': 'Token', 'name': '#', 'range': [0, 1], 'children': []}, {'type': 'Token', 'name': 'coding', 'range': [4, 5], 'children': []}, {'type': 'Token', 'name': ':', 'range': [5, 6], 'children': []}, {'type': 'Token', 'name': 'utf', 'range': [6, 7], 'children': []}, {'type': 'Token', 'name': '8', 'range': [8, 9], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 20], 'children': [{'type': 'Token', 'name': 'from', 'range': [14, 15], 'children': []}, {'type': 'Token', 'name': 'mrjob', 'range': [15, 16], 'children': []}, {'type': 'Token', 'name': 'job', 'range': [17, 18], 'children': []}, {'type': 'Token', 'name': 'import', 'range': [18, 19], 'children': []}, {'type': 'Token', 'name': 'MRJob', 'range': [19, 20], 'children': []}]}]}
2025-01-08 10:28:08,631 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:17,243 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [238, 251], 'children': [{'type': 'IfStatement', 'name': '', 'range': [238, 250], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [239, 242], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [239, 239], 'children': []}, {'type': 'Literal', 'name': "'__main__'", 'range': [242, 242], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [244, 250], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [245, 249], 'children': [{'type': 'CallExpression', 'name': '', 'range': [245, 249], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [245, 247], 'children': [{'type': 'Identifier', 'name': 'SpendingByCategory', 'range': [245, 245], 'children': []}, {'type': 'Identifier', 'name': 'run', 'range': [247, 247], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:17,300 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:21,410 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 22], 'children': [{'type': 'Comment', 'name': '', 'range': [0, 12], 'children': [{'type': 'Literal', 'name': '#', 'range': [0, 1], 'children': []}, {'type': 'Literal', 'name': 'coding', 'range': [4, 5], 'children': []}, {'type': 'Literal', 'name': ':', 'range': [5, 6], 'children': []}, {'type': 'Literal', 'name': 'utf', 'range': [6, 7], 'children': []}, {'type': 'Literal', 'name': '8', 'range': [8, 9], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 20], 'children': [{'type': 'Literal', 'name': 'from', 'range': [14, 15], 'children': []}, {'type': 'Identifier', 'name': 'mrjob', 'range': [15, 16], 'children': []}, {'type': 'Identifier', 'name': 'job', 'range': [17, 18], 'children': []}, {'type': 'Literal', 'name': 'import', 'range': [18, 19], 'children': []}, {'type': 'Identifier', 'name': 'MRJob', 'range': [19, 20], 'children': []}]}]}
2025-01-08 10:28:21,410 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:28,864 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [238, 251], 'children': [{'type': 'IfStatement', 'name': '', 'range': [238, 250], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [239, 242], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [239, 239], 'children': []}, {'type': 'Literal', 'name': "'__main__'", 'range': [242, 242], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [244, 250], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [245, 249], 'children': [{'type': 'CallExpression', 'name': '', 'range': [245, 249], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [245, 247], 'children': [{'type': 'Identifier', 'name': 'SpendingByCategory', 'range': [245, 245], 'children': []}, {'type': 'Identifier', 'name': 'run', 'range': [247, 247], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:28,873 - INFO - Completed main AST analysis flow
2025-01-08 10:28:28,873 - INFO - Successfully processed chunk
2025-01-08 10:28:31,536 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [0, 22], 'children': [{'type': 'Comment', 'name': '', 'range': [0, 12], 'children': [{'type': 'Literal', 'name': '#', 'range': [0, 1], 'children': []}, {'type': 'Literal', 'name': 'coding', 'range': [4, 5], 'children': []}, {'type': 'Literal', 'name': ':', 'range': [5, 6], 'children': []}, {'type': 'Literal', 'name': 'utf', 'range': [6, 7], 'children': []}, {'type': 'Literal', 'name': '8', 'range': [8, 9], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 20], 'children': [{'type': 'Literal', 'name': 'from', 'range': [14, 15], 'children': []}, {'type': 'Identifier', 'name': 'mrjob', 'range': [15, 16], 'children': []}, {'type': 'Identifier', 'name': 'job', 'range': [17, 18], 'children': []}, {'type': 'Literal', 'name': 'import', 'range': [18, 19], 'children': []}, {'type': 'Identifier', 'name': 'MRJob', 'range': [19, 20], 'children': []}]}]}
2025-01-08 10:28:31,536 - INFO - Completed main AST analysis flow
2025-01-08 10:28:31,537 - INFO - Successfully processed chunk
2025-01-08 10:29:01,536 - INFO - Step 2 result: {'type': 'Program', 'name': 'SpendingByCategory', 'range': [23, 237], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [31, 45], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [33, 37], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [34, 34], 'children': []}, {'type': 'Parameter', 'name': 'categorizer', 'range': [36, 36], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [38, 45], 'children': [{'type': 'ExpressionStatement', 'name': 'assignment', 'range': [40, 44], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [43, 43], 'children': [{'type': 'MemberExpression', 'name': 'self.categorizer', 'range': [40, 42], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [40, 40], 'children': []}, {'type': 'Identifier', 'name': 'categorizer', 'range': [42, 42], 'children': []}]}, {'type': 'Identifier', 'name': 'categorizer', 'range': [44, 44], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'current_year_month', 'range': [51, 65], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [53, 55], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [54, 54], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [56, 65], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [58, 60], 'children': [{'type': 'Literal', 'name': '"Return the current year and month."', 'range': [59, 59], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'extract_year_month', 'range': [67, 83], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [69, 73], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [70, 70], 'children': []}, {'type': 'Parameter', 'name': 'timestamp', 'range': [72, 72], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [74, 83], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [76, 78], 'children': [{'type': 'Literal', 'name': '"Return the year and month portions of the timestamp."', 'range': [77, 77], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'handle_budget_notifications', 'range': [85, 103], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [87, 93], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [88, 88], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [90, 90], 'children': []}, {'type': 'Parameter', 'name': 'total', 'range': [92, 92], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [94, 103], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [96, 98], 'children': [{'type': 'Literal', 'name': '"Call notification API if nearing or exceeded budget."', 'range': [97, 97], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'mapper', 'range': [105, 162], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [107, 113], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [108, 108], 'children': []}, {'type': 'Parameter', 'name': '_', 'range': [110, 110], 'children': []}, {'type': 'Parameter', 'name': 'line', 'range': [112, 112], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [114, 162], 'children': [{'type': 'VariableDeclaration', 'name': 'timestamp, category, amount', 'range': [120, 131], 'children': [{'type': 'VariableDeclarator', 'name': 'timestamp', 'range': [120, 120], 'children': []}, {'type': 'VariableDeclarator', 'name': 'category', 'range': [122, 122], 'children': []}, {'type': 'VariableDeclarator', 'name': 'amount', 'range': [124, 124], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [125, 125], 'children': [{'type': 'CallExpression', 'name': 'line.split', 'range': [126, 131], 'children': [{'type': 'MemberExpression', 'name': 'line.split', 'range': [126, 128], 'children': [{'type': 'Identifier', 'name': 'line', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'split', 'range': [128, 128], 'children': []}]}, {'type': 'Literal', 'name': "'\\t'", 'range': [130, 130], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'period', 'range': [133, 141], 'children': [{'type': 'VariableDeclarator', 'name': 'period', 'range': [133, 133], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [134, 134], 'children': [{'type': 'CallExpression', 'name': 'self.extract_year_month', 'range': [135, 141], 'children': [{'type': 'MemberExpression', 'name': 'self.extract_year_month', 'range': [135, 137], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [135, 135], 'children': []}, {'type': 'Identifier', 'name': 'extract_year_month', 'range': [137, 137], 'children': []}]}, {'type': 'Identifier', 'name': 'timestamp', 'range': [139, 139], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [142, 161], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [143, 145], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [143, 143], 'children': []}, {'type': 'CallExpression', 'name': 'self.current_year_month', 'range': [146, 150], 'children': [{'type': 'MemberExpression', 'name': 'self.current_year_month', 'range': [146, 148], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'current_year_month', 'range': [148, 148], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'consequent', 'range': [151, 161], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [153, 160], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [154, 158], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [155, 155], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [157, 157], 'children': []}]}, {'type': 'Identifier', 'name': 'amount', 'range': [160, 160], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'reducer', 'range': [163, 202], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 171], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [166, 166], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [168, 168], 'children': []}, {'type': 'Parameter', 'name': 'values', 'range': [170, 170], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [172, 202], 'children': [{'type': 'VariableDeclaration', 'name': 'total', 'range': [178, 184], 'children': [{'type': 'VariableDeclarator', 'name': 'total', 'range': [178, 178], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [179, 179], 'children': [{'type': 'CallExpression', 'name': 'sum', 'range': [180, 184], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [182, 182], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'call', 'range': [185, 193], 'children': [{'type': 'CallExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 193], 'children': [{'type': 'MemberExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 187], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [185, 185], 'children': []}, {'type': 'Identifier', 'name': 'handle_budget_notifications', 'range': [187, 187], 'children': []}]}, {'type': 'Identifier', 'name': 'key', 'range': [189, 189], 'children': []}, {'type': 'Identifier', 'name': 'total', 'range': [191, 191], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [194, 201], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [195, 197], 'children': [{'type': 'Identifier', 'name': 'key', 'range': [195, 195], 'children': []}, {'type': 'CallExpression', 'name': 'sum', 'range': [198, 201], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [199, 199], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'steps', 'range': [203, 237], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [205, 207], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [206, 206], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [208, 237], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 236], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [215, 235], 'children': [{'type': 'CallExpression', 'name': 'self.mr', 'range': [217, 234], 'children': [{'type': 'MemberExpression', 'name': 'self.mr', 'range': [217, 219], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [217, 217], 'children': []}, {'type': 'Identifier', 'name': 'mr', 'range': [219, 219], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{', 'range': [220, 233], 'children': [{'type': 'Property', 'name': 'mapper', 'range': [221, 226], 'children': [{'type': 'Identifier', 'name': 'mapper', 'range': [221, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'self.mapper', 'range': [223, 225], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}, {'type': 'Identifier', 'name': 'mapper', 'range': [225, 225], 'children': []}]}]}, {'type': 'Property', 'name': 'reducer', 'range': [228, 233], 'children': [{'type': 'Identifier', 'name': 'reducer', 'range': [228, 228], 'children': []}, {'type': 'MemberExpression', 'name': 'self.reducer', 'range': [230, 232], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [230, 230], 'children': []}, {'type': 'Identifier', 'name': 'reducer', 'range': [232, 232], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:29:01,536 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:15,004 - INFO - Step 3 result: {'type': 'Program', 'name': 'SpendingByCategory', 'range': [23, 237], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [31, 45], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [33, 37], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [34, 34], 'children': []}, {'type': 'Parameter', 'name': 'categorizer', 'range': [36, 36], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [38, 45], 'children': [{'type': 'ExpressionStatement', 'name': 'assignment', 'range': [40, 44], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [43, 43], 'children': [{'type': 'MemberExpression', 'name': 'self.categorizer', 'range': [40, 42], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [40, 40], 'children': []}, {'type': 'Identifier', 'name': 'categorizer', 'range': [42, 42], 'children': []}]}, {'type': 'Identifier', 'name': 'categorizer', 'range': [44, 44], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'current_year_month', 'range': [51, 65], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [53, 55], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [54, 54], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [56, 65], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [58, 60], 'children': [{'type': 'Literal', 'name': '"Return the current year and month."', 'range': [59, 59], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'extract_year_month', 'range': [67, 83], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [69, 73], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [70, 70], 'children': []}, {'type': 'Parameter', 'name': 'timestamp', 'range': [72, 72], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [74, 83], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [76, 78], 'children': [{'type': 'Literal', 'name': '"Return the year and month portions of the timestamp."', 'range': [77, 77], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'handle_budget_notifications', 'range': [85, 103], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [87, 93], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [88, 88], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [90, 90], 'children': []}, {'type': 'Parameter', 'name': 'total', 'range': [92, 92], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [94, 103], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [96, 98], 'children': [{'type': 'Literal', 'name': '"Call notification API if nearing or exceeded budget."', 'range': [97, 97], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'mapper', 'range': [105, 162], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [107, 113], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [108, 108], 'children': []}, {'type': 'Parameter', 'name': '_', 'range': [110, 110], 'children': []}, {'type': 'Parameter', 'name': 'line', 'range': [112, 112], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [114, 162], 'children': [{'type': 'VariableDeclaration', 'name': 'timestamp, category, amount', 'range': [120, 131], 'children': [{'type': 'VariableDeclarator', 'name': 'timestamp', 'range': [120, 120], 'children': []}, {'type': 'VariableDeclarator', 'name': 'category', 'range': [122, 122], 'children': []}, {'type': 'VariableDeclarator', 'name': 'amount', 'range': [124, 124], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [125, 125], 'children': [{'type': 'CallExpression', 'name': 'line.split', 'range': [126, 131], 'children': [{'type': 'MemberExpression', 'name': 'line.split', 'range': [126, 128], 'children': [{'type': 'Identifier', 'name': 'line', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'split', 'range': [128, 128], 'children': []}]}, {'type': 'Literal', 'name': "'\\t'", 'range': [130, 130], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'period', 'range': [133, 141], 'children': [{'type': 'VariableDeclarator', 'name': 'period', 'range': [133, 133], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [134, 134], 'children': [{'type': 'CallExpression', 'name': 'self.extract_year_month', 'range': [135, 141], 'children': [{'type': 'MemberExpression', 'name': 'self.extract_year_month', 'range': [135, 137], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [135, 135], 'children': []}, {'type': 'Identifier', 'name': 'extract_year_month', 'range': [137, 137], 'children': []}]}, {'type': 'Identifier', 'name': 'timestamp', 'range': [139, 139], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [142, 161], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [143, 145], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [143, 143], 'children': []}, {'type': 'CallExpression', 'name': 'self.current_year_month', 'range': [146, 150], 'children': [{'type': 'MemberExpression', 'name': 'self.current_year_month', 'range': [146, 148], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'current_year_month', 'range': [148, 148], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'consequent', 'range': [151, 161], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [153, 160], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [154, 158], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [155, 155], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [157, 157], 'children': []}]}, {'type': 'Identifier', 'name': 'amount', 'range': [160, 160], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'reducer', 'range': [163, 202], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 171], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [166, 166], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [168, 168], 'children': []}, {'type': 'Parameter', 'name': 'values', 'range': [170, 170], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [172, 202], 'children': [{'type': 'VariableDeclaration', 'name': 'total', 'range': [178, 184], 'children': [{'type': 'VariableDeclarator', 'name': 'total', 'range': [178, 178], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [179, 179], 'children': [{'type': 'CallExpression', 'name': 'sum', 'range': [180, 184], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [182, 182], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'call', 'range': [185, 193], 'children': [{'type': 'CallExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 193], 'children': [{'type': 'MemberExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 187], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [185, 185], 'children': []}, {'type': 'Identifier', 'name': 'handle_budget_notifications', 'range': [187, 187], 'children': []}]}, {'type': 'Identifier', 'name': 'key', 'range': [189, 189], 'children': []}, {'type': 'Identifier', 'name': 'total', 'range': [191, 191], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [194, 201], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [195, 197], 'children': [{'type': 'Identifier', 'name': 'key', 'range': [195, 195], 'children': []}, {'type': 'CallExpression', 'name': 'sum', 'range': [198, 201], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [199, 199], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'steps', 'range': [203, 237], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [205, 207], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [206, 206], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [208, 237], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 236], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [215, 235], 'children': [{'type': 'CallExpression', 'name': 'self.mr', 'range': [217, 234], 'children': [{'type': 'MemberExpression', 'name': 'self.mr', 'range': [217, 219], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [217, 217], 'children': []}, {'type': 'Identifier', 'name': 'mr', 'range': [219, 219], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{', 'range': [220, 233], 'children': [{'type': 'Property', 'name': 'mapper', 'range': [221, 226], 'children': [{'type': 'Identifier', 'name': 'mapper', 'range': [221, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'self.mapper', 'range': [223, 225], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}, {'type': 'Identifier', 'name': 'mapper', 'range': [225, 225], 'children': []}]}]}, {'type': 'Property', 'name': 'reducer', 'range': [228, 233], 'children': [{'type': 'Identifier', 'name': 'reducer', 'range': [228, 228], 'children': []}, {'type': 'MemberExpression', 'name': 'self.reducer', 'range': [230, 232], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [230, 230], 'children': []}, {'type': 'Identifier', 'name': 'reducer', 'range': [232, 232], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:30:15,004 - INFO - Starting Step 4: AST normalization
2025-01-08 10:31:30,147 - INFO - Step 4 result: {'type': 'Program', 'name': 'SpendingByCategory', 'range': [23, 237], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [31, 45], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [33, 37], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [34, 34], 'children': []}, {'type': 'Parameter', 'name': 'categorizer', 'range': [36, 36], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [38, 45], 'children': [{'type': 'ExpressionStatement', 'name': 'assignment', 'range': [40, 44], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [43, 43], 'children': [{'type': 'MemberExpression', 'name': 'self.categorizer', 'range': [40, 42], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [40, 40], 'children': []}, {'type': 'Identifier', 'name': 'categorizer', 'range': [42, 42], 'children': []}]}, {'type': 'Identifier', 'name': 'categorizer', 'range': [44, 44], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'current_year_month', 'range': [51, 65], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [53, 55], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [54, 54], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [56, 65], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [58, 60], 'children': [{'type': 'Literal', 'name': '"Return the current year and month."', 'range': [59, 59], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'extract_year_month', 'range': [67, 83], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [69, 73], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [70, 70], 'children': []}, {'type': 'Parameter', 'name': 'timestamp', 'range': [72, 72], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [74, 83], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [76, 78], 'children': [{'type': 'Literal', 'name': '"Return the year and month portions of the timestamp."', 'range': [77, 77], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'handle_budget_notifications', 'range': [85, 103], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [87, 93], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [88, 88], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [90, 90], 'children': []}, {'type': 'Parameter', 'name': 'total', 'range': [92, 92], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [94, 103], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [96, 98], 'children': [{'type': 'Literal', 'name': '"Call notification API if nearing or exceeded budget."', 'range': [97, 97], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'mapper', 'range': [105, 162], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [107, 113], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [108, 108], 'children': []}, {'type': 'Parameter', 'name': '_', 'range': [110, 110], 'children': []}, {'type': 'Parameter', 'name': 'line', 'range': [112, 112], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [114, 162], 'children': [{'type': 'VariableDeclaration', 'name': 'timestamp, category, amount', 'range': [120, 131], 'children': [{'type': 'VariableDeclarator', 'name': 'timestamp', 'range': [120, 120], 'children': []}, {'type': 'VariableDeclarator', 'name': 'category', 'range': [122, 122], 'children': []}, {'type': 'VariableDeclarator', 'name': 'amount', 'range': [124, 124], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [125, 125], 'children': [{'type': 'CallExpression', 'name': 'line.split', 'range': [126, 131], 'children': [{'type': 'MemberExpression', 'name': 'line.split', 'range': [126, 128], 'children': [{'type': 'Identifier', 'name': 'line', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'split', 'range': [128, 128], 'children': []}]}, {'type': 'Literal', 'name': "'\\t'", 'range': [130, 130], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'period', 'range': [133, 141], 'children': [{'type': 'VariableDeclarator', 'name': 'period', 'range': [133, 133], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [134, 134], 'children': [{'type': 'CallExpression', 'name': 'self.extract_year_month', 'range': [135, 141], 'children': [{'type': 'MemberExpression', 'name': 'self.extract_year_month', 'range': [135, 137], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [135, 135], 'children': []}, {'type': 'Identifier', 'name': 'extract_year_month', 'range': [137, 137], 'children': []}]}, {'type': 'Identifier', 'name': 'timestamp', 'range': [139, 139], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [142, 161], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [143, 145], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [143, 143], 'children': []}, {'type': 'CallExpression', 'name': 'self.current_year_month', 'range': [146, 150], 'children': [{'type': 'MemberExpression', 'name': 'self.current_year_month', 'range': [146, 148], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'current_year_month', 'range': [148, 148], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'consequent', 'range': [151, 161], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [153, 160], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [154, 158], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [155, 155], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [157, 157], 'children': []}]}, {'type': 'Identifier', 'name': 'amount', 'range': [160, 160], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'reducer', 'range': [163, 202], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 171], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [166, 166], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [168, 168], 'children': []}, {'type': 'Parameter', 'name': 'values', 'range': [170, 170], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [172, 202], 'children': [{'type': 'VariableDeclaration', 'name': 'total', 'range': [178, 184], 'children': [{'type': 'VariableDeclarator', 'name': 'total', 'range': [178, 178], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [179, 179], 'children': [{'type': 'CallExpression', 'name': 'sum', 'range': [180, 184], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [182, 182], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'call', 'range': [185, 193], 'children': [{'type': 'CallExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 193], 'children': [{'type': 'MemberExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 187], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [185, 185], 'children': []}, {'type': 'Identifier', 'name': 'handle_budget_notifications', 'range': [187, 187], 'children': []}]}, {'type': 'Identifier', 'name': 'key', 'range': [189, 189], 'children': []}, {'type': 'Identifier', 'name': 'total', 'range': [191, 191], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [194, 201], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [195, 197], 'children': [{'type': 'Identifier', 'name': 'key', 'range': [195, 195], 'children': []}, {'type': 'CallExpression', 'name': 'sum', 'range': [198, 201], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [199, 199], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'steps', 'range': [203, 237], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [205, 207], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [206, 206], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [208, 237], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 236], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [215, 235], 'children': [{'type': 'CallExpression', 'name': 'self.mr', 'range': [217, 234], 'children': [{'type': 'MemberExpression', 'name': 'self.mr', 'range': [217, 219], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [217, 217], 'children': []}, {'type': 'Identifier', 'name': 'mr', 'range': [219, 219], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{', 'range': [220, 233], 'children': [{'type': 'Property', 'name': 'mapper', 'range': [221, 226], 'children': [{'type': 'Identifier', 'name': 'mapper', 'range': [221, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'self.mapper', 'range': [223, 225], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}, {'type': 'Identifier', 'name': 'mapper', 'range': [225, 225], 'children': []}]}]}, {'type': 'Property', 'name': 'reducer', 'range': [228, 233], 'children': [{'type': 'Identifier', 'name': 'reducer', 'range': [228, 228], 'children': []}, {'type': 'MemberExpression', 'name': 'self.reducer', 'range': [230, 232], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [230, 230], 'children': []}, {'type': 'Identifier', 'name': 'reducer', 'range': [232, 232], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:31:30,148 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:32:42,871 - INFO - Step 5 result: {'type': 'Program', 'name': 'SpendingByCategory', 'range': [23, 237], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [31, 45], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [33, 37], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [34, 34], 'children': []}, {'type': 'Parameter', 'name': 'categorizer', 'range': [36, 36], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [38, 45], 'children': [{'type': 'ExpressionStatement', 'name': 'assignment', 'range': [40, 44], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [43, 43], 'children': [{'type': 'MemberExpression', 'name': 'self.categorizer', 'range': [40, 42], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [40, 40], 'children': []}, {'type': 'Identifier', 'name': 'categorizer', 'range': [42, 42], 'children': []}]}, {'type': 'Identifier', 'name': 'categorizer', 'range': [44, 44], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'current_year_month', 'range': [51, 65], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [53, 55], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [54, 54], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [56, 65], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [58, 60], 'children': [{'type': 'Literal', 'name': '"Return the current year and month."', 'range': [59, 59], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'extract_year_month', 'range': [67, 83], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [69, 73], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [70, 70], 'children': []}, {'type': 'Parameter', 'name': 'timestamp', 'range': [72, 72], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [74, 83], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [76, 78], 'children': [{'type': 'Literal', 'name': '"Return the year and month portions of the timestamp."', 'range': [77, 77], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'handle_budget_notifications', 'range': [85, 103], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [87, 93], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [88, 88], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [90, 90], 'children': []}, {'type': 'Parameter', 'name': 'total', 'range': [92, 92], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [94, 103], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [96, 98], 'children': [{'type': 'Literal', 'name': '"Call notification API if nearing or exceeded budget."', 'range': [97, 97], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'mapper', 'range': [105, 162], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [107, 113], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [108, 108], 'children': []}, {'type': 'Parameter', 'name': '_', 'range': [110, 110], 'children': []}, {'type': 'Parameter', 'name': 'line', 'range': [112, 112], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [114, 162], 'children': [{'type': 'VariableDeclaration', 'name': 'timestamp, category, amount', 'range': [120, 131], 'children': [{'type': 'VariableDeclarator', 'name': 'timestamp', 'range': [120, 120], 'children': []}, {'type': 'VariableDeclarator', 'name': 'category', 'range': [122, 122], 'children': []}, {'type': 'VariableDeclarator', 'name': 'amount', 'range': [124, 124], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [125, 125], 'children': [{'type': 'CallExpression', 'name': 'line.split', 'range': [126, 131], 'children': [{'type': 'MemberExpression', 'name': 'line.split', 'range': [126, 128], 'children': [{'type': 'Identifier', 'name': 'line', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'split', 'range': [128, 128], 'children': []}]}, {'type': 'Literal', 'name': "'\\t'", 'range': [130, 130], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'period', 'range': [133, 141], 'children': [{'type': 'VariableDeclarator', 'name': 'period', 'range': [133, 133], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [134, 134], 'children': [{'type': 'CallExpression', 'name': 'self.extract_year_month', 'range': [135, 141], 'children': [{'type': 'MemberExpression', 'name': 'self.extract_year_month', 'range': [135, 137], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [135, 135], 'children': []}, {'type': 'Identifier', 'name': 'extract_year_month', 'range': [137, 137], 'children': []}]}, {'type': 'Identifier', 'name': 'timestamp', 'range': [139, 139], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [142, 161], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [143, 145], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [143, 143], 'children': []}, {'type': 'CallExpression', 'name': 'self.current_year_month', 'range': [146, 150], 'children': [{'type': 'MemberExpression', 'name': 'self.current_year_month', 'range': [146, 148], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'current_year_month', 'range': [148, 148], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'consequent', 'range': [151, 161], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [153, 160], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [154, 158], 'children': [{'type': 'Identifier', 'name': 'period', 'range': [155, 155], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [157, 157], 'children': []}]}, {'type': 'Identifier', 'name': 'amount', 'range': [160, 160], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'reducer', 'range': [163, 202], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 171], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [166, 166], 'children': []}, {'type': 'Parameter', 'name': 'key', 'range': [168, 168], 'children': []}, {'type': 'Parameter', 'name': 'values', 'range': [170, 170], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [172, 202], 'children': [{'type': 'VariableDeclaration', 'name': 'total', 'range': [178, 184], 'children': [{'type': 'VariableDeclarator', 'name': 'total', 'range': [178, 178], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [179, 179], 'children': [{'type': 'CallExpression', 'name': 'sum', 'range': [180, 184], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [182, 182], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'call', 'range': [185, 193], 'children': [{'type': 'CallExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 193], 'children': [{'type': 'MemberExpression', 'name': 'self.handle_budget_notifications', 'range': [185, 187], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [185, 185], 'children': []}, {'type': 'Identifier', 'name': 'handle_budget_notifications', 'range': [187, 187], 'children': []}]}, {'type': 'Identifier', 'name': 'key', 'range': [189, 189], 'children': []}, {'type': 'Identifier', 'name': 'total', 'range': [191, 191], 'children': []}]}]}, {'type': 'YieldExpression', 'name': 'yield', 'range': [194, 201], 'children': [{'type': 'SequenceExpression', 'name': ',', 'range': [195, 197], 'children': [{'type': 'Identifier', 'name': 'key', 'range': [195, 195], 'children': []}, {'type': 'CallExpression', 'name': 'sum', 'range': [198, 201], 'children': [{'type': 'Identifier', 'name': 'values', 'range': [199, 199], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'steps', 'range': [203, 237], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [205, 207], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [206, 206], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [208, 237], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 236], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [215, 235], 'children': [{'type': 'CallExpression', 'name': 'self.mr', 'range': [217, 234], 'children': [{'type': 'MemberExpression', 'name': 'self.mr', 'range': [217, 219], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [217, 217], 'children': []}, {'type': 'Identifier', 'name': 'mr', 'range': [219, 219], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{', 'range': [220, 233], 'children': [{'type': 'Property', 'name': 'mapper', 'range': [221, 226], 'children': [{'type': 'Identifier', 'name': 'mapper', 'range': [221, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'self.mapper', 'range': [223, 225], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}, {'type': 'Identifier', 'name': 'mapper', 'range': [225, 225], 'children': []}]}]}, {'type': 'Property', 'name': 'reducer', 'range': [228, 233], 'children': [{'type': 'Identifier', 'name': 'reducer', 'range': [228, 228], 'children': []}, {'type': 'MemberExpression', 'name': 'self.reducer', 'range': [230, 232], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [230, 230], 'children': []}, {'type': 'Identifier', 'name': 'reducer', 'range': [232, 232], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:32:42,871 - INFO - Completed main AST analysis flow
2025-01-08 10:32:42,874 - INFO - Successfully processed chunk
2025-01-08 10:32:42,894 - INFO - Starting code generation from AST
2025-01-08 10:32:49,728 - INFO - Successfully generated code from AST
2025-01-08 10:32:49,729 - INFO - Starting static code similarity comparison
2025-01-08 10:32:49,733 - INFO - Static similarity result: {'final_score': 97.23, 'length_similarity': 98.83, 'token_similarity': 93.33, 'structure_similarity': 97.62, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
