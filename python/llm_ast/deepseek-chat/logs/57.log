2025-01-08 09:28:23,430 - INFO - Processing sample 57
2025-01-08 09:28:23,430 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:28:40,019 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 09:28:40,023 - INFO - Processing chunk #0 (size=665 chars, start_index=0)
2025-01-08 09:28:40,023 - INFO - Processing chunk with 665 chars starting at index 0
2025-01-08 09:28:40,023 - INFO - Starting main AST analysis flow
2025-01-08 09:28:40,023 - INFO - Tokenized code into 121 tokens
2025-01-08 09:28:40,023 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:28:40,025 - INFO - Processing chunk #1 (size=5712 chars, start_index=121)
2025-01-08 09:28:40,025 - INFO - Processing chunk with 5712 chars starting at index 121
2025-01-08 09:28:40,025 - INFO - Starting main AST analysis flow
2025-01-08 09:28:40,027 - INFO - Tokenized code into 685 tokens
2025-01-08 09:28:40,027 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:28:40,037 - INFO - Processing chunk #2 (size=841 chars, start_index=806)
2025-01-08 09:28:40,038 - INFO - Processing chunk with 841 chars starting at index 806
2025-01-08 09:28:40,038 - INFO - Starting main AST analysis flow
2025-01-08 09:28:40,038 - INFO - Tokenized code into 119 tokens
2025-01-08 09:28:40,038 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:28:51,082 - INFO - Step 1 result: {'type': 'Program', 'name': '_get_provider_oauth_handler', 'range': [806, 924], 'children': []}
2025-01-08 09:28:51,082 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:29:02,037 - INFO - Step 1 result: {'type': 'Program', 'name': 'IntegrationCredentialsManager', 'range': [121, 805], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [132, 163], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'create', 'range': [165, 194], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'exists', 'range': [196, 228], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'get', 'range': [230, 448], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'acquire', 'range': [450, 568], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'update', 'range': [570, 611], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'delete', 'range': [613, 652], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_acquire_lock', 'range': [664, 714], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_locked', 'range': [719, 774], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'release_all_locks', 'range': [776, 804], 'children': []}]}
2025-01-08 09:29:02,037 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:29:06,954 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 120], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 27], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [28, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 44], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 53], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [54, 62], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 80], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [81, 89], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [91, 103], 'children': []}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [105, 113], 'children': []}, {'type': 'VariableDeclaration', 'name': 'settings', 'range': [114, 119], 'children': []}]}
2025-01-08 09:29:06,954 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:29:28,129 - INFO - Step 2 result: {'type': 'Program', 'name': '_get_provider_oauth_handler', 'range': [806, 924], 'children': [{'type': 'FunctionDeclaration', 'name': '_get_provider_oauth_handler', 'range': [806, 923], 'children': [{'type': 'Parameter', 'name': 'provider_name', 'range': [809, 811], 'children': []}, {'type': 'ReturnType', 'name': 'BaseOAuthHandler', 'range': [813, 815], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [818, 831], 'children': [{'type': 'Condition', 'name': '', 'range': [819, 822], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [825, 830], 'children': [{'type': 'Exception', 'name': 'KeyError', 'range': [826, 830], 'children': []}]}]}, {'type': 'Assignment', 'name': 'client_id', 'range': [833, 843], 'children': []}, {'type': 'Assignment', 'name': 'client_secret', 'range': [845, 855], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [857, 875], 'children': [{'type': 'Condition', 'name': '', 'range': [858, 863], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [866, 874], 'children': [{'type': 'Exception', 'name': 'MissingConfigError', 'range': [867, 874], 'children': []}]}]}, {'type': 'Assignment', 'name': 'handler_class', 'range': [877, 882], 'children': []}, {'type': 'Assignment', 'name': 'frontend_base_url', 'range': [884, 900], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [902, 922], 'children': [{'type': 'CallExpression', 'name': 'handler_class', 'range': [903, 922], 'children': [{'type': 'Argument', 'name': 'client_id', 'range': [906, 908], 'children': []}, {'type': 'Argument', 'name': 'client_secret', 'range': [911, 913], 'children': []}, {'type': 'Argument', 'name': 'redirect_uri', 'range': [916, 919], 'children': []}]}]}]}]}
2025-01-08 09:29:28,129 - INFO - Starting Step 3: AST simplification
2025-01-08 09:29:56,400 - INFO - Step 3 result: {'type': 'Program', 'name': '_get_provider_oauth_handler', 'range': [806, 924], 'children': [{'type': 'FunctionDeclaration', 'name': '_get_provider_oauth_handler', 'range': [806, 923], 'children': [{'type': 'Parameter', 'name': 'provider_name', 'range': [809, 811], 'children': []}, {'type': 'ReturnType', 'name': 'BaseOAuthHandler', 'range': [813, 815], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [818, 831], 'children': [{'type': 'Condition', 'name': '', 'range': [819, 822], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [825, 830], 'children': [{'type': 'Exception', 'name': 'KeyError', 'range': [826, 830], 'children': []}]}]}, {'type': 'Assignment', 'name': 'client_id', 'range': [833, 843], 'children': []}, {'type': 'Assignment', 'name': 'client_secret', 'range': [845, 855], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [857, 875], 'children': [{'type': 'Condition', 'name': '', 'range': [858, 863], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [866, 874], 'children': [{'type': 'Exception', 'name': 'MissingConfigError', 'range': [867, 874], 'children': []}]}]}, {'type': 'Assignment', 'name': 'handler_class', 'range': [877, 882], 'children': []}, {'type': 'Assignment', 'name': 'frontend_base_url', 'range': [884, 900], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [902, 922], 'children': [{'type': 'CallExpression', 'name': 'handler_class', 'range': [903, 922], 'children': [{'type': 'Argument', 'name': 'client_id', 'range': [906, 908], 'children': []}, {'type': 'Argument', 'name': 'client_secret', 'range': [911, 913], 'children': []}, {'type': 'Argument', 'name': 'redirect_uri', 'range': [916, 919], 'children': []}]}]}]}]}
2025-01-08 09:29:56,400 - INFO - Starting Step 4: AST normalization
2025-01-08 09:30:13,415 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportClause', 'name': 'logging', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'FromClause', 'name': 'contextlib', 'range': [4, 4], 'children': []}, {'type': 'ImportClause', 'name': 'contextmanager', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'FromClause', 'name': 'datetime', 'range': [9, 9], 'children': []}, {'type': 'ImportClause', 'name': 'datetime', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromClause', 'name': 'typing', 'range': [14, 14], 'children': []}, {'type': 'ImportClause', 'name': 'TYPE_CHECKING', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 27], 'children': [{'type': 'FromClause', 'name': 'autogpt_libs.utils.synchronize', 'range': [20, 24], 'children': []}, {'type': 'ImportClause', 'name': 'RedisKeyedMutex', 'range': [26, 26], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [28, 36], 'children': [{'type': 'FromClause', 'name': 'redis.lock', 'range': [29, 31], 'children': []}, {'type': 'ImportClause', 'name': 'Lock', 'range': [33, 33], 'children': []}, {'type': 'Alias', 'name': 'RedisLock', 'range': [35, 35], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 44], 'children': [{'type': 'FromClause', 'name': 'backend.data', 'range': [39, 41], 'children': []}, {'type': 'ImportClause', 'name': 'redis', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 53], 'children': [{'type': 'FromClause', 'name': 'backend.data.model', 'range': [46, 50], 'children': []}, {'type': 'ImportClause', 'name': 'Credentials', 'range': [52, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [54, 62], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.credentials_store', 'range': [55, 59], 'children': []}, {'type': 'ImportClause', 'name': 'IntegrationCredentialsStore', 'range': [61, 61], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [64, 68], 'children': []}, {'type': 'ImportClause', 'name': 'HANDLERS_BY_NAME', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 80], 'children': [{'type': 'FromClause', 'name': 'backend.util.exceptions', 'range': [73, 77], 'children': []}, {'type': 'ImportClause', 'name': 'MissingConfigError', 'range': [79, 79], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [81, 89], 'children': [{'type': 'FromClause', 'name': 'backend.util.settings', 'range': [82, 86], 'children': []}, {'type': 'ImportClause', 'name': 'Settings', 'range': [88, 88], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [91, 103], 'children': [{'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [92, 92], 'children': []}, {'type': 'Block', 'name': '', 'range': [93, 103], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [96, 100], 'children': []}, {'type': 'ImportClause', 'name': 'BaseOAuthHandler', 'range': [102, 102], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [105, 113], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [106, 112], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [107, 112], 'children': [{'type': 'Argument', 'name': '__name__', 'range': [111, 111], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'settings', 'range': [114, 119], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [115, 118], 'children': [{'type': 'NewExpression', 'name': 'Settings', 'range': [116, 118], 'children': []}]}]}]}
2025-01-08 09:30:13,415 - INFO - Starting Step 3: AST simplification
2025-01-08 09:30:15,438 - INFO - Step 2 result: {'type': 'Program', 'name': 'IntegrationCredentialsManager', 'range': [121, 805], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [132, 163], 'children': [{'type': 'Assignment', 'name': 'redis_conn', 'range': [139, 145], 'children': []}, {'type': 'Assignment', 'name': 'self._locks', 'range': [147, 154], 'children': []}, {'type': 'Assignment', 'name': 'self.store', 'range': [156, 162], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'create', 'range': [165, 194], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [183, 193], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'exists', 'range': [196, 228], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 227], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'get', 'range': [230, 448], 'children': [{'type': 'Assignment', 'name': 'credentials', 'range': [258, 269], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [271, 277], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [276, 277], 'children': []}]}, {'type': 'IfStatement', 'name': 'if', 'range': [287, 294], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [300, 314], 'children': []}, {'type': 'WithStatement', 'name': 'with', 'range': [317, 328], 'children': [{'type': 'Assignment', 'name': 'oauth_handler', 'range': [330, 337], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [339, 346], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [348, 359], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [365, 367], 'children': [{'type': 'Assignment', 'name': '_lock', 'range': [381, 390], 'children': []}]}, {'type': 'Assignment', 'name': 'fresh_credentials', 'range': [393, 400], 'children': []}, {'type': 'ExpressionStatement', 'name': 'self.store.update_creds', 'range': [402, 411], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [413, 421], 'children': [{'type': 'ExpressionStatement', 'name': '_lock.release', 'range': [423, 427], 'children': []}]}, {'type': 'Assignment', 'name': 'credentials', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [434, 435], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [437, 443], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [446, 447], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'acquire', 'range': [450, 568], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [511, 522], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [524, 533], 'children': []}, {'type': 'Assignment', 'name': 'credentials', 'range': [535, 548], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [550, 553], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [555, 562], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [564, 567], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'update', 'range': [570, 611], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [588, 599], 'children': [{'type': 'ExpressionStatement', 'name': 'self.store.update_creds', 'range': [601, 610], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'delete', 'range': [613, 652], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [631, 640], 'children': [{'type': 'ExpressionStatement', 'name': 'self.store.delete_creds_by_id', 'range': [642, 651], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '_acquire_lock', 'range': [664, 714], 'children': [{'type': 'Assignment', 'name': 'key', 'range': [687, 703], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [705, 713], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_locked', 'range': [719, 774], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [739, 751], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [753, 754], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [756, 757], 'children': []}]}, {'type': 'FinallyStatement', 'name': 'finally', 'range': [758, 759], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [761, 767], 'children': [{'type': 'ExpressionStatement', 'name': 'lock.release', 'range': [769, 773], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'release_all_locks', 'range': [776, 804], 'children': [{'type': 'ExpressionStatement', 'name': 'self._locks.release_all_locks', 'range': [787, 793], 'children': []}, {'type': 'ExpressionStatement', 'name': 'self.store.locks.release_all_locks', 'range': [795, 803], 'children': []}]}]}
2025-01-08 09:30:15,438 - INFO - Starting Step 3: AST simplification
2025-01-08 09:30:25,363 - INFO - Step 4 result: {'type': 'Program', 'name': '_get_provider_oauth_handler', 'range': [806, 924], 'children': [{'type': 'FunctionDecl', 'name': '_get_provider_oauth_handler', 'range': [806, 923], 'children': [{'type': 'Parameter', 'name': 'provider_name', 'range': [809, 811], 'children': []}, {'type': 'ReturnType', 'name': 'BaseOAuthHandler', 'range': [813, 815], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [818, 831], 'children': [{'type': 'Condition', 'name': '', 'range': [819, 822], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [825, 830], 'children': [{'type': 'Exception', 'name': 'KeyError', 'range': [826, 830], 'children': []}]}]}, {'type': 'Assignment', 'name': 'client_id', 'range': [833, 843], 'children': []}, {'type': 'Assignment', 'name': 'client_secret', 'range': [845, 855], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [857, 875], 'children': [{'type': 'Condition', 'name': '', 'range': [858, 863], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [866, 874], 'children': [{'type': 'Exception', 'name': 'MissingConfigError', 'range': [867, 874], 'children': []}]}]}, {'type': 'Assignment', 'name': 'handler_class', 'range': [877, 882], 'children': []}, {'type': 'Assignment', 'name': 'frontend_base_url', 'range': [884, 900], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [902, 922], 'children': [{'type': 'CallExpression', 'name': 'handler_class', 'range': [903, 922], 'children': [{'type': 'Argument', 'name': 'client_id', 'range': [906, 908], 'children': []}, {'type': 'Argument', 'name': 'client_secret', 'range': [911, 913], 'children': []}, {'type': 'Argument', 'name': 'redirect_uri', 'range': [916, 919], 'children': []}]}]}]}]}
2025-01-08 09:30:25,363 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:30:55,638 - INFO - Step 5 result: {'type': 'Program', 'name': '_get_provider_oauth_handler', 'range': [806, 924], 'children': [{'type': 'FunctionDecl', 'name': '_get_provider_oauth_handler', 'range': [806, 923], 'children': [{'type': 'Parameter', 'name': 'provider_name', 'range': [809, 811], 'children': []}, {'type': 'ReturnType', 'name': 'BaseOAuthHandler', 'range': [813, 815], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [818, 831], 'children': [{'type': 'Condition', 'name': '', 'range': [819, 822], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [825, 830], 'children': [{'type': 'Exception', 'name': 'KeyError', 'range': [826, 830], 'children': []}]}]}, {'type': 'Assignment', 'name': 'client_id', 'range': [833, 843], 'children': []}, {'type': 'Assignment', 'name': 'client_secret', 'range': [845, 855], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [857, 875], 'children': [{'type': 'Condition', 'name': '', 'range': [858, 863], 'children': []}, {'type': 'RaiseStatement', 'name': '', 'range': [866, 874], 'children': [{'type': 'Exception', 'name': 'MissingConfigError', 'range': [867, 874], 'children': []}]}]}, {'type': 'Assignment', 'name': 'handler_class', 'range': [877, 882], 'children': []}, {'type': 'Assignment', 'name': 'frontend_base_url', 'range': [884, 900], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [902, 922], 'children': [{'type': 'CallExpression', 'name': 'handler_class', 'range': [903, 922], 'children': [{'type': 'Argument', 'name': 'client_id', 'range': [906, 908], 'children': []}, {'type': 'Argument', 'name': 'client_secret', 'range': [911, 913], 'children': []}, {'type': 'Argument', 'name': 'redirect_uri', 'range': [916, 919], 'children': []}]}]}]}]}
2025-01-08 09:30:55,638 - INFO - Completed main AST analysis flow
2025-01-08 09:30:55,639 - INFO - Successfully processed chunk
2025-01-08 09:31:14,200 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportClause', 'name': 'logging', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'FromClause', 'name': 'contextlib', 'range': [4, 4], 'children': []}, {'type': 'ImportClause', 'name': 'contextmanager', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'FromClause', 'name': 'datetime', 'range': [9, 9], 'children': []}, {'type': 'ImportClause', 'name': 'datetime', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromClause', 'name': 'typing', 'range': [14, 14], 'children': []}, {'type': 'ImportClause', 'name': 'TYPE_CHECKING', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 27], 'children': [{'type': 'FromClause', 'name': 'autogpt_libs.utils.synchronize', 'range': [20, 24], 'children': []}, {'type': 'ImportClause', 'name': 'RedisKeyedMutex', 'range': [26, 26], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [28, 36], 'children': [{'type': 'FromClause', 'name': 'redis.lock', 'range': [29, 31], 'children': []}, {'type': 'ImportClause', 'name': 'Lock', 'range': [33, 33], 'children': []}, {'type': 'Alias', 'name': 'RedisLock', 'range': [35, 35], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 44], 'children': [{'type': 'FromClause', 'name': 'backend.data', 'range': [39, 41], 'children': []}, {'type': 'ImportClause', 'name': 'redis', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 53], 'children': [{'type': 'FromClause', 'name': 'backend.data.model', 'range': [46, 50], 'children': []}, {'type': 'ImportClause', 'name': 'Credentials', 'range': [52, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [54, 62], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.credentials_store', 'range': [55, 59], 'children': []}, {'type': 'ImportClause', 'name': 'IntegrationCredentialsStore', 'range': [61, 61], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [64, 68], 'children': []}, {'type': 'ImportClause', 'name': 'HANDLERS_BY_NAME', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 80], 'children': [{'type': 'FromClause', 'name': 'backend.util.exceptions', 'range': [73, 77], 'children': []}, {'type': 'ImportClause', 'name': 'MissingConfigError', 'range': [79, 79], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [81, 89], 'children': [{'type': 'FromClause', 'name': 'backend.util.settings', 'range': [82, 86], 'children': []}, {'type': 'ImportClause', 'name': 'Settings', 'range': [88, 88], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [91, 103], 'children': [{'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [92, 92], 'children': []}, {'type': 'Block', 'name': '', 'range': [93, 103], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [96, 100], 'children': []}, {'type': 'ImportClause', 'name': 'BaseOAuthHandler', 'range': [102, 102], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [105, 113], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [106, 112], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [107, 112], 'children': [{'type': 'Argument', 'name': '__name__', 'range': [111, 111], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'settings', 'range': [114, 119], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [115, 118], 'children': [{'type': 'NewExpression', 'name': 'Settings', 'range': [116, 118], 'children': []}]}]}]}
2025-01-08 09:31:14,200 - INFO - Starting Step 4: AST normalization
2025-01-08 09:31:22,585 - INFO - Step 3 result: {'type': 'Program', 'name': 'IntegrationCredentialsManager', 'range': [121, 805], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [132, 163], 'children': [{'type': 'Assignment', 'name': 'redis_conn', 'range': [139, 145], 'children': []}, {'type': 'Assignment', 'name': 'self._locks', 'range': [147, 154], 'children': []}, {'type': 'Assignment', 'name': 'self.store', 'range': [156, 162], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'create', 'range': [165, 194], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [183, 193], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'exists', 'range': [196, 228], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 227], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'get', 'range': [230, 448], 'children': [{'type': 'Assignment', 'name': 'credentials', 'range': [258, 269], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [271, 277], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [276, 277], 'children': []}]}, {'type': 'IfStatement', 'name': 'if', 'range': [287, 294], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [300, 314], 'children': []}, {'type': 'WithStatement', 'name': 'with', 'range': [317, 328], 'children': [{'type': 'Assignment', 'name': 'oauth_handler', 'range': [330, 337], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [339, 346], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [348, 359], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [365, 367], 'children': [{'type': 'Assignment', 'name': '_lock', 'range': [381, 390], 'children': []}]}, {'type': 'Assignment', 'name': 'fresh_credentials', 'range': [393, 400], 'children': []}, {'type': 'ExpressionStatement', 'name': 'self.store.update_creds', 'range': [402, 411], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [413, 421], 'children': [{'type': 'ExpressionStatement', 'name': '_lock.release', 'range': [423, 427], 'children': []}]}, {'type': 'Assignment', 'name': 'credentials', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [434, 435], 'children': [{'type': 'ExpressionStatement', 'name': 'logger.debug', 'range': [437, 443], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [446, 447], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'acquire', 'range': [450, 568], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [511, 522], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [524, 533], 'children': []}, {'type': 'Assignment', 'name': 'credentials', 'range': [535, 548], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [550, 553], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [555, 562], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [564, 567], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'update', 'range': [570, 611], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [588, 599], 'children': [{'type': 'ExpressionStatement', 'name': 'self.store.update_creds', 'range': [601, 610], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'delete', 'range': [613, 652], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [631, 640], 'children': [{'type': 'ExpressionStatement', 'name': 'self.store.delete_creds_by_id', 'range': [642, 651], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '_acquire_lock', 'range': [664, 714], 'children': [{'type': 'Assignment', 'name': 'key', 'range': [687, 703], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [705, 713], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_locked', 'range': [719, 774], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [739, 751], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [753, 754], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [756, 757], 'children': []}]}, {'type': 'FinallyStatement', 'name': 'finally', 'range': [758, 759], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [761, 767], 'children': [{'type': 'ExpressionStatement', 'name': 'lock.release', 'range': [769, 773], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'release_all_locks', 'range': [776, 804], 'children': [{'type': 'ExpressionStatement', 'name': 'self._locks.release_all_locks', 'range': [787, 793], 'children': []}, {'type': 'ExpressionStatement', 'name': 'self.store.locks.release_all_locks', 'range': [795, 803], 'children': []}]}]}
2025-01-08 09:31:22,585 - INFO - Starting Step 4: AST normalization
2025-01-08 09:32:24,872 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportClause', 'name': 'logging', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'FromClause', 'name': 'contextlib', 'range': [4, 4], 'children': []}, {'type': 'ImportClause', 'name': 'contextmanager', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'FromClause', 'name': 'datetime', 'range': [9, 9], 'children': []}, {'type': 'ImportClause', 'name': 'datetime', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromClause', 'name': 'typing', 'range': [14, 14], 'children': []}, {'type': 'ImportClause', 'name': 'TYPE_CHECKING', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 27], 'children': [{'type': 'FromClause', 'name': 'autogpt_libs.utils.synchronize', 'range': [20, 24], 'children': []}, {'type': 'ImportClause', 'name': 'RedisKeyedMutex', 'range': [26, 26], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [28, 36], 'children': [{'type': 'FromClause', 'name': 'redis.lock', 'range': [29, 31], 'children': []}, {'type': 'ImportClause', 'name': 'Lock', 'range': [33, 33], 'children': []}, {'type': 'Alias', 'name': 'RedisLock', 'range': [35, 35], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 44], 'children': [{'type': 'FromClause', 'name': 'backend.data', 'range': [39, 41], 'children': []}, {'type': 'ImportClause', 'name': 'redis', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 53], 'children': [{'type': 'FromClause', 'name': 'backend.data.model', 'range': [46, 50], 'children': []}, {'type': 'ImportClause', 'name': 'Credentials', 'range': [52, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [54, 62], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.credentials_store', 'range': [55, 59], 'children': []}, {'type': 'ImportClause', 'name': 'IntegrationCredentialsStore', 'range': [61, 61], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [64, 68], 'children': []}, {'type': 'ImportClause', 'name': 'HANDLERS_BY_NAME', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 80], 'children': [{'type': 'FromClause', 'name': 'backend.util.exceptions', 'range': [73, 77], 'children': []}, {'type': 'ImportClause', 'name': 'MissingConfigError', 'range': [79, 79], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [81, 89], 'children': [{'type': 'FromClause', 'name': 'backend.util.settings', 'range': [82, 86], 'children': []}, {'type': 'ImportClause', 'name': 'Settings', 'range': [88, 88], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [91, 103], 'children': [{'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [92, 92], 'children': []}, {'type': 'Block', 'name': '', 'range': [93, 103], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [96, 100], 'children': []}, {'type': 'ImportClause', 'name': 'BaseOAuthHandler', 'range': [102, 102], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [105, 113], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [106, 112], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [107, 112], 'children': [{'type': 'Argument', 'name': '__name__', 'range': [111, 111], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'settings', 'range': [114, 119], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [115, 118], 'children': [{'type': 'NewExpression', 'name': 'Settings', 'range': [116, 118], 'children': []}]}]}]}
2025-01-08 09:32:24,873 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:32:33,719 - INFO - Step 4 result: {'type': 'Program', 'name': 'IntegrationCredentialsManager', 'range': [121, 805], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [132, 163], 'children': [{'type': 'Assignment', 'name': 'redis_conn', 'range': [139, 145], 'children': []}, {'type': 'Assignment', 'name': 'self._locks', 'range': [147, 154], 'children': []}, {'type': 'Assignment', 'name': 'self.store', 'range': [156, 162], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'create', 'range': [165, 194], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [183, 193], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'exists', 'range': [196, 228], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 227], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'get', 'range': [230, 448], 'children': [{'type': 'Assignment', 'name': 'credentials', 'range': [258, 269], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [271, 277], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [276, 277], 'children': []}]}, {'type': 'IfStatement', 'name': 'if', 'range': [287, 294], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [300, 314], 'children': []}, {'type': 'WithStatement', 'name': 'with', 'range': [317, 328], 'children': [{'type': 'Assignment', 'name': 'oauth_handler', 'range': [330, 337], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [339, 346], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [348, 359], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [365, 367], 'children': [{'type': 'Assignment', 'name': '_lock', 'range': [381, 390], 'children': []}]}, {'type': 'Assignment', 'name': 'fresh_credentials', 'range': [393, 400], 'children': []}, {'type': 'CallExpression', 'name': 'self.store.update_creds', 'range': [402, 411], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [413, 421], 'children': [{'type': 'CallExpression', 'name': '_lock.release', 'range': [423, 427], 'children': []}]}, {'type': 'Assignment', 'name': 'credentials', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [434, 435], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [437, 443], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [446, 447], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'acquire', 'range': [450, 568], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [511, 522], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [524, 533], 'children': []}, {'type': 'Assignment', 'name': 'credentials', 'range': [535, 548], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [550, 553], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [555, 562], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [564, 567], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'update', 'range': [570, 611], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [588, 599], 'children': [{'type': 'CallExpression', 'name': 'self.store.update_creds', 'range': [601, 610], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'delete', 'range': [613, 652], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [631, 640], 'children': [{'type': 'CallExpression', 'name': 'self.store.delete_creds_by_id', 'range': [642, 651], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '_acquire_lock', 'range': [664, 714], 'children': [{'type': 'Assignment', 'name': 'key', 'range': [687, 703], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [705, 713], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_locked', 'range': [719, 774], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [739, 751], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [753, 754], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [756, 757], 'children': []}]}, {'type': 'FinallyStatement', 'name': 'finally', 'range': [758, 759], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [761, 767], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [769, 773], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'release_all_locks', 'range': [776, 804], 'children': [{'type': 'CallExpression', 'name': 'self._locks.release_all_locks', 'range': [787, 793], 'children': []}, {'type': 'CallExpression', 'name': 'self.store.locks.release_all_locks', 'range': [795, 803], 'children': []}]}]}
2025-01-08 09:32:33,719 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:33:36,039 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportClause', 'name': 'logging', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'FromClause', 'name': 'contextlib', 'range': [4, 4], 'children': []}, {'type': 'ImportClause', 'name': 'contextmanager', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'FromClause', 'name': 'datetime', 'range': [9, 9], 'children': []}, {'type': 'ImportClause', 'name': 'datetime', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'FromClause', 'name': 'typing', 'range': [14, 14], 'children': []}, {'type': 'ImportClause', 'name': 'TYPE_CHECKING', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [19, 27], 'children': [{'type': 'FromClause', 'name': 'autogpt_libs.utils.synchronize', 'range': [20, 24], 'children': []}, {'type': 'ImportClause', 'name': 'RedisKeyedMutex', 'range': [26, 26], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [28, 36], 'children': [{'type': 'FromClause', 'name': 'redis.lock', 'range': [29, 31], 'children': []}, {'type': 'ImportClause', 'name': 'Lock', 'range': [33, 33], 'children': []}, {'type': 'Alias', 'name': 'RedisLock', 'range': [35, 35], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 44], 'children': [{'type': 'FromClause', 'name': 'backend.data', 'range': [39, 41], 'children': []}, {'type': 'ImportClause', 'name': 'redis', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 53], 'children': [{'type': 'FromClause', 'name': 'backend.data.model', 'range': [46, 50], 'children': []}, {'type': 'ImportClause', 'name': 'Credentials', 'range': [52, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [54, 62], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.credentials_store', 'range': [55, 59], 'children': []}, {'type': 'ImportClause', 'name': 'IntegrationCredentialsStore', 'range': [61, 61], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [64, 68], 'children': []}, {'type': 'ImportClause', 'name': 'HANDLERS_BY_NAME', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 80], 'children': [{'type': 'FromClause', 'name': 'backend.util.exceptions', 'range': [73, 77], 'children': []}, {'type': 'ImportClause', 'name': 'MissingConfigError', 'range': [79, 79], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [81, 89], 'children': [{'type': 'FromClause', 'name': 'backend.util.settings', 'range': [82, 86], 'children': []}, {'type': 'ImportClause', 'name': 'Settings', 'range': [88, 88], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [91, 103], 'children': [{'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [92, 92], 'children': []}, {'type': 'Block', 'name': '', 'range': [93, 103], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromClause', 'name': 'backend.integrations.oauth', 'range': [96, 100], 'children': []}, {'type': 'ImportClause', 'name': 'BaseOAuthHandler', 'range': [102, 102], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [105, 113], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [106, 112], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [107, 112], 'children': [{'type': 'Argument', 'name': '__name__', 'range': [111, 111], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'settings', 'range': [114, 119], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [115, 118], 'children': [{'type': 'NewExpression', 'name': 'Settings', 'range': [116, 118], 'children': []}]}]}]}
2025-01-08 09:33:36,040 - INFO - Completed main AST analysis flow
2025-01-08 09:33:36,040 - INFO - Successfully processed chunk
2025-01-08 09:33:41,463 - INFO - Step 5 result: {'type': 'Program', 'name': 'IntegrationCredentialsManager', 'range': [121, 805], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [132, 163], 'children': [{'type': 'Assignment', 'name': 'redis_conn', 'range': [139, 145], 'children': []}, {'type': 'Assignment', 'name': 'self._locks', 'range': [147, 154], 'children': []}, {'type': 'Assignment', 'name': 'self.store', 'range': [156, 162], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'create', 'range': [165, 194], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [183, 193], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'exists', 'range': [196, 228], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [214, 227], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'get', 'range': [230, 448], 'children': [{'type': 'Assignment', 'name': 'credentials', 'range': [258, 269], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [271, 277], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [276, 277], 'children': []}]}, {'type': 'IfStatement', 'name': 'if', 'range': [287, 294], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [300, 314], 'children': []}, {'type': 'WithStatement', 'name': 'with', 'range': [317, 328], 'children': [{'type': 'Assignment', 'name': 'oauth_handler', 'range': [330, 337], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [339, 346], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [348, 359], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [365, 367], 'children': [{'type': 'Assignment', 'name': '_lock', 'range': [381, 390], 'children': []}]}, {'type': 'Assignment', 'name': 'fresh_credentials', 'range': [393, 400], 'children': []}, {'type': 'CallExpression', 'name': 'self.store.update_creds', 'range': [402, 411], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [413, 421], 'children': [{'type': 'CallExpression', 'name': '_lock.release', 'range': [423, 427], 'children': []}]}, {'type': 'Assignment', 'name': 'credentials', 'range': [430, 432], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [434, 435], 'children': [{'type': 'CallExpression', 'name': 'logger.debug', 'range': [437, 443], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [446, 447], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'acquire', 'range': [450, 568], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [511, 522], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [524, 533], 'children': []}, {'type': 'Assignment', 'name': 'credentials', 'range': [535, 548], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [550, 553], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [555, 562], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [564, 567], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'update', 'range': [570, 611], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [588, 599], 'children': [{'type': 'CallExpression', 'name': 'self.store.update_creds', 'range': [601, 610], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'delete', 'range': [613, 652], 'children': [{'type': 'WithStatement', 'name': 'with', 'range': [631, 640], 'children': [{'type': 'CallExpression', 'name': 'self.store.delete_creds_by_id', 'range': [642, 651], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '_acquire_lock', 'range': [664, 714], 'children': [{'type': 'Assignment', 'name': 'key', 'range': [687, 703], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [705, 713], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_locked', 'range': [719, 774], 'children': [{'type': 'Assignment', 'name': 'lock', 'range': [739, 751], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [753, 754], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [756, 757], 'children': []}]}, {'type': 'FinallyStatement', 'name': 'finally', 'range': [758, 759], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [761, 767], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [769, 773], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'release_all_locks', 'range': [776, 804], 'children': [{'type': 'CallExpression', 'name': 'self._locks.release_all_locks', 'range': [787, 793], 'children': []}, {'type': 'CallExpression', 'name': 'self.store.locks.release_all_locks', 'range': [795, 803], 'children': []}]}]}
2025-01-08 09:33:41,463 - INFO - Completed main AST analysis flow
2025-01-08 09:33:41,464 - INFO - Successfully processed chunk
2025-01-08 09:33:41,493 - INFO - Starting code generation from AST
2025-01-08 09:34:43,288 - INFO - Successfully generated code from AST
2025-01-08 09:34:43,288 - INFO - Starting static code similarity comparison
2025-01-08 09:34:43,311 - INFO - Static similarity result: {'final_score': 99.1, 'length_similarity': 99.71, 'token_similarity': 100.0, 'structure_similarity': 96.58, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
