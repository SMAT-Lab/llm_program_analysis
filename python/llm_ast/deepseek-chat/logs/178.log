2025-01-08 10:27:27,511 - INFO - Processing sample 178
2025-01-08 10:27:27,528 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:35,431 - INFO - Successfully split code into 6 top-level declarations
2025-01-08 10:27:35,460 - INFO - Processing chunk #0 (size=408 chars, start_index=0)
2025-01-08 10:27:35,469 - INFO - Processing chunk with 408 chars starting at index 0
2025-01-08 10:27:35,476 - INFO - Processing chunk #1 (size=219 chars, start_index=78)
2025-01-08 10:27:35,479 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,480 - INFO - Processing chunk #2 (size=174 chars, start_index=113)
2025-01-08 10:27:35,484 - INFO - Processing chunk with 219 chars starting at index 78
2025-01-08 10:27:35,500 - INFO - Tokenized code into 78 tokens
2025-01-08 10:27:35,505 - INFO - Processing chunk #3 (size=504 chars, start_index=147)
2025-01-08 10:27:35,505 - INFO - Processing chunk with 174 chars starting at index 113
2025-01-08 10:27:35,516 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,516 - INFO - Tokenized code into 34 tokens
2025-01-08 10:27:35,509 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,511 - INFO - Processing chunk with 504 chars starting at index 147
2025-01-08 10:27:35,505 - INFO - Processing chunk #4 (size=97 chars, start_index=227)
2025-01-08 10:27:35,526 - INFO - Processing chunk with 97 chars starting at index 227
2025-01-08 10:27:35,526 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,526 - INFO - Tokenized code into 27 tokens
2025-01-08 10:27:35,526 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,516 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,505 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,521 - INFO - Processing chunk #5 (size=7600 chars, start_index=254)
2025-01-08 10:27:35,529 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,533 - INFO - Tokenized code into 80 tokens
2025-01-08 10:27:35,543 - INFO - Tokenized code into 35 tokens
2025-01-08 10:27:35,580 - INFO - Processing chunk with 7600 chars starting at index 254
2025-01-08 10:27:35,584 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,589 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,592 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,604 - INFO - Tokenized code into 1094 tokens
2025-01-08 10:27:35,604 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:43,131 - INFO - Step 1 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [78, 112], 'children': []}
2025-01-08 10:27:43,131 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:45,370 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [227, 253], 'children': [{'type': 'EnumDeclaration', 'name': 'ImageType', 'range': [230, 252], 'children': [{'type': 'EnumMember', 'name': 'WEBP', 'range': [241, 243], 'children': []}, {'type': 'EnumMember', 'name': 'JPG', 'range': [245, 247], 'children': []}, {'type': 'EnumMember', 'name': 'PNG', 'range': [249, 251], 'children': []}]}]}
2025-01-08 10:27:45,370 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:46,535 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [147, 226], 'children': [{'type': 'EnumDeclaration', 'name': 'ReplicateFluxModelName', 'range': [147, 181], 'children': [{'type': 'EnumMember', 'name': 'FLUX_SCHNELL', 'range': [161, 166], 'children': []}, {'type': 'EnumMember', 'name': 'FLUX_PRO', 'range': [168, 173], 'children': []}, {'type': 'EnumMember', 'name': 'FLUX_PRO1_1', 'range': [175, 180], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'api_name', 'range': [183, 225], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [220, 225], 'children': []}]}]}
2025-01-08 10:27:46,640 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:47,342 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [113, 146], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [113, 145], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [115, 145], 'children': [{'type': 'Property', 'name': 'provider', 'range': [117, 121], 'children': []}, {'type': 'Property', 'name': 'id', 'range': [124, 128], 'children': []}, {'type': 'Property', 'name': 'type', 'range': [131, 135], 'children': []}, {'type': 'Property', 'name': 'title', 'range': [138, 142], 'children': []}]}]}]}
2025-01-08 10:27:47,584 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:49,159 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 16], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': []}]}
2025-01-08 10:27:49,839 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:55,390 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [254, 1347], 'children': [{'type': 'ClassDeclaration', 'name': 'ReplicateFluxAdvancedModelBlock', 'range': [254, 260], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [261, 267], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [268, 298], 'children': []}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [299, 322], 'children': []}, {'type': 'VariableDeclaration', 'name': 'replicate_model_name', 'range': [323, 353], 'children': []}, {'type': 'VariableDeclaration', 'name': 'seed', 'range': [354, 379], 'children': []}, {'type': 'VariableDeclaration', 'name': 'steps', 'range': [380, 403], 'children': []}, {'type': 'VariableDeclaration', 'name': 'guidance', 'range': [404, 433], 'children': []}, {'type': 'VariableDeclaration', 'name': 'interval', 'range': [434, 463], 'children': []}, {'type': 'VariableDeclaration', 'name': 'aspect_ratio', 'range': [464, 492], 'children': []}, {'type': 'VariableDeclaration', 'name': 'output_format', 'range': [493, 518], 'children': []}, {'type': 'VariableDeclaration', 'name': 'output_quality', 'range': [519, 548], 'children': []}, {'type': 'VariableDeclaration', 'name': 'safety_tolerance', 'range': [549, 572], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [574, 580], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [604, 780], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [782, 950], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run_model', 'range': [952, 1347], 'children': []}]}
2025-01-08 10:27:55,559 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:01,131 - INFO - Step 2 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [78, 112], 'children': [{'type': 'Assignment', 'name': '=', 'range': [78, 112], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [78, 78], 'children': []}, {'type': 'FunctionCall', 'name': 'APIKeyCredentials', 'range': [80, 111], 'children': [{'type': 'Argument', 'name': 'id', 'range': [83, 85], 'children': [{'type': 'StringLiteral', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [85, 85], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [88, 90], 'children': [{'type': 'StringLiteral', 'name': '"replicate"', 'range': [90, 90], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [93, 98], 'children': [{'type': 'FunctionCall', 'name': 'SecretStr', 'range': [95, 98], 'children': [{'type': 'StringLiteral', 'name': '"mock-replicate-api-key"', 'range': [97, 97], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [101, 103], 'children': [{'type': 'StringLiteral', 'name': '"Mock Replicate API key"', 'range': [103, 103], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [106, 108], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [108, 108], 'children': []}]}]}]}]}
2025-01-08 10:28:01,146 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:02,318 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [227, 253], 'children': [{'type': 'EnumDeclaration', 'name': 'ImageType', 'range': [230, 252], 'children': [{'type': 'EnumMember', 'name': 'WEBP', 'range': [241, 243], 'children': [{'type': 'Literal', 'name': '"webp"', 'range': [243, 243], 'children': []}]}, {'type': 'EnumMember', 'name': 'JPG', 'range': [245, 247], 'children': [{'type': 'Literal', 'name': '"jpg"', 'range': [247, 247], 'children': []}]}, {'type': 'EnumMember', 'name': 'PNG', 'range': [249, 251], 'children': [{'type': 'Literal', 'name': '"png"', 'range': [251, 251], 'children': []}]}]}]}
2025-01-08 10:28:02,319 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:09,110 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [113, 146], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [113, 145], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [115, 145], 'children': [{'type': 'Property', 'name': 'provider', 'range': [117, 121], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [121, 121], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [124, 128], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [128, 128], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [131, 135], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [131, 131], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [133, 133], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [135, 135], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [138, 142], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [138, 138], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [140, 140], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [142, 142], 'children': []}]}]}]}]}
2025-01-08 10:28:09,114 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:12,784 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'replicate', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'FileOutput', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [57, 57], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [60, 60], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [63, 63], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [75, 75], 'children': []}]}]}
2025-01-08 10:28:12,788 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:12,970 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [147, 226], 'children': [{'type': 'EnumDeclaration', 'name': 'ReplicateFluxModelName', 'range': [147, 181], 'children': [{'type': 'EnumMember', 'name': 'FLUX_SCHNELL', 'range': [161, 166], 'children': [{'type': 'StringLiteral', 'name': '"Flux Schnell"', 'range': [164, 164], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO', 'range': [168, 173], 'children': [{'type': 'StringLiteral', 'name': '"Flux Pro"', 'range': [171, 171], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO1_1', 'range': [175, 180], 'children': [{'type': 'StringLiteral', 'name': '"Flux Pro 1.1"', 'range': [178, 178], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'api_name', 'range': [183, 225], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [192, 225], 'children': [{'type': 'VariableDeclaration', 'name': 'api_names', 'range': [193, 218], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [195, 218], 'children': [{'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_SCHNELL', 'range': [197, 202], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-schnell"', 'range': [201, 201], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO', 'range': [204, 209], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-pro"', 'range': [208, 208], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO1_1', 'range': [211, 216], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-1.1-pro"', 'range': [215, 215], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [220, 225], 'children': [{'type': 'MemberExpression', 'name': 'api_names[self]', 'range': [221, 224], 'children': [{'type': 'Identifier', 'name': 'api_names', 'range': [221, 221], 'children': []}, {'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}]}]}]}]}]}
2025-01-08 10:28:13,070 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:15,730 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [227, 253], 'children': [{'type': 'EnumDeclaration', 'name': 'ImageType', 'range': [230, 252], 'children': [{'type': 'EnumMember', 'name': 'WEBP', 'range': [241, 243], 'children': [{'type': 'Literal', 'name': '"webp"', 'range': [243, 243], 'children': []}]}, {'type': 'EnumMember', 'name': 'JPG', 'range': [245, 247], 'children': [{'type': 'Literal', 'name': '"jpg"', 'range': [247, 247], 'children': []}]}, {'type': 'EnumMember', 'name': 'PNG', 'range': [249, 251], 'children': [{'type': 'Literal', 'name': '"png"', 'range': [251, 251], 'children': []}]}]}]}
2025-01-08 10:28:15,823 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:19,657 - INFO - Step 3 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [78, 112], 'children': [{'type': 'Assignment', 'name': '=', 'range': [78, 112], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [78, 78], 'children': []}, {'type': 'FunctionCall', 'name': 'APIKeyCredentials', 'range': [80, 111], 'children': [{'type': 'Argument', 'name': 'id', 'range': [83, 85], 'children': [{'type': 'StringLiteral', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [85, 85], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [88, 90], 'children': [{'type': 'StringLiteral', 'name': '"replicate"', 'range': [90, 90], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [93, 98], 'children': [{'type': 'FunctionCall', 'name': 'SecretStr', 'range': [95, 98], 'children': [{'type': 'StringLiteral', 'name': '"mock-replicate-api-key"', 'range': [97, 97], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [101, 103], 'children': [{'type': 'StringLiteral', 'name': '"Mock Replicate API key"', 'range': [103, 103], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [106, 108], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [108, 108], 'children': []}]}]}]}]}
2025-01-08 10:28:19,657 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:26,644 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [227, 253], 'children': [{'type': 'EnumDeclaration', 'name': 'ImageType', 'range': [230, 252], 'children': [{'type': 'EnumMember', 'name': 'WEBP', 'range': [241, 243], 'children': [{'type': 'Literal', 'name': '"webp"', 'range': [243, 243], 'children': []}]}, {'type': 'EnumMember', 'name': 'JPG', 'range': [245, 247], 'children': [{'type': 'Literal', 'name': '"jpg"', 'range': [247, 247], 'children': []}]}, {'type': 'EnumMember', 'name': 'PNG', 'range': [249, 251], 'children': [{'type': 'Literal', 'name': '"png"', 'range': [251, 251], 'children': []}]}]}]}
2025-01-08 10:28:26,644 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:28,875 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [113, 146], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [113, 145], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [115, 145], 'children': [{'type': 'Property', 'name': 'provider', 'range': [117, 121], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [121, 121], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [124, 128], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [128, 128], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [131, 135], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [131, 131], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [133, 133], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [135, 135], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [138, 142], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [138, 138], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [140, 140], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [142, 142], 'children': []}]}]}]}]}
2025-01-08 10:28:28,880 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:32,441 - INFO - Step 4 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [78, 112], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [78, 112], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [78, 78], 'children': []}, {'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [80, 111], 'children': [{'type': 'Argument', 'name': 'id', 'range': [83, 85], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [85, 85], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [88, 90], 'children': [{'type': 'Literal', 'name': '"replicate"', 'range': [90, 90], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [93, 98], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [95, 98], 'children': [{'type': 'Literal', 'name': '"mock-replicate-api-key"', 'range': [97, 97], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [101, 103], 'children': [{'type': 'Literal', 'name': '"Mock Replicate API key"', 'range': [103, 103], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [106, 108], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [108, 108], 'children': []}]}]}]}]}
2025-01-08 10:28:32,442 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:33,560 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [227, 253], 'children': [{'type': 'EnumDeclaration', 'name': 'ImageType', 'range': [230, 252], 'children': [{'type': 'EnumMember', 'name': 'WEBP', 'range': [241, 243], 'children': [{'type': 'Literal', 'name': '"webp"', 'range': [243, 243], 'children': []}]}, {'type': 'EnumMember', 'name': 'JPG', 'range': [245, 247], 'children': [{'type': 'Literal', 'name': '"jpg"', 'range': [247, 247], 'children': []}]}, {'type': 'EnumMember', 'name': 'PNG', 'range': [249, 251], 'children': [{'type': 'Literal', 'name': '"png"', 'range': [251, 251], 'children': []}]}]}]}
2025-01-08 10:28:33,561 - INFO - Completed main AST analysis flow
2025-01-08 10:28:33,561 - INFO - Successfully processed chunk
2025-01-08 10:28:35,037 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'replicate', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'FileOutput', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [57, 57], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [60, 60], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [63, 63], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [75, 75], 'children': []}]}]}
2025-01-08 10:28:35,041 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:35,273 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [147, 226], 'children': [{'type': 'EnumDeclaration', 'name': 'ReplicateFluxModelName', 'range': [147, 181], 'children': [{'type': 'EnumMember', 'name': 'FLUX_SCHNELL', 'range': [161, 166], 'children': [{'type': 'StringLiteral', 'name': '"Flux Schnell"', 'range': [164, 164], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO', 'range': [168, 173], 'children': [{'type': 'StringLiteral', 'name': '"Flux Pro"', 'range': [171, 171], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO1_1', 'range': [175, 180], 'children': [{'type': 'StringLiteral', 'name': '"Flux Pro 1.1"', 'range': [178, 178], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'api_name', 'range': [183, 225], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [192, 225], 'children': [{'type': 'VariableDeclaration', 'name': 'api_names', 'range': [193, 218], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [195, 218], 'children': [{'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_SCHNELL', 'range': [197, 202], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-schnell"', 'range': [201, 201], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO', 'range': [204, 209], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-pro"', 'range': [208, 208], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO1_1', 'range': [211, 216], 'children': [{'type': 'StringLiteral', 'name': '"black-forest-labs/flux-1.1-pro"', 'range': [215, 215], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [220, 225], 'children': [{'type': 'MemberExpression', 'name': 'api_names[self]', 'range': [221, 224], 'children': [{'type': 'Identifier', 'name': 'api_names', 'range': [221, 221], 'children': []}, {'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}]}]}]}]}]}
2025-01-08 10:28:35,273 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:42,204 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [113, 146], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [113, 145], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [115, 145], 'children': [{'type': 'Property', 'name': 'provider', 'range': [117, 121], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [121, 121], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [124, 128], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [128, 128], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [131, 135], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [131, 131], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [133, 133], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [135, 135], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [138, 142], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [138, 138], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [140, 140], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [142, 142], 'children': []}]}]}]}]}
2025-01-08 10:28:42,204 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:44,904 - INFO - Step 5 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [78, 112], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [78, 112], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [78, 78], 'children': []}, {'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [80, 111], 'children': [{'type': 'Argument', 'name': 'id', 'range': [83, 85], 'children': [{'type': 'Literal', 'name': '"01234567-89ab-cdef-0123-456789abcdef"', 'range': [85, 85], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [88, 90], 'children': [{'type': 'Literal', 'name': '"replicate"', 'range': [90, 90], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [93, 98], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [95, 98], 'children': [{'type': 'Literal', 'name': '"mock-replicate-api-key"', 'range': [97, 97], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [101, 103], 'children': [{'type': 'Literal', 'name': '"Mock Replicate API key"', 'range': [103, 103], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [106, 108], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [108, 108], 'children': []}]}]}]}]}
2025-01-08 10:28:44,904 - INFO - Completed main AST analysis flow
2025-01-08 10:28:44,904 - INFO - Successfully processed chunk
2025-01-08 10:28:52,696 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [147, 226], 'children': [{'type': 'EnumDecl', 'name': 'ReplicateFluxModelName', 'range': [147, 181], 'children': [{'type': 'EnumMember', 'name': 'FLUX_SCHNELL', 'range': [161, 166], 'children': [{'type': 'Literal', 'name': '"Flux Schnell"', 'range': [164, 164], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO', 'range': [168, 173], 'children': [{'type': 'Literal', 'name': '"Flux Pro"', 'range': [171, 171], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO1_1', 'range': [175, 180], 'children': [{'type': 'Literal', 'name': '"Flux Pro 1.1"', 'range': [178, 178], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'api_name', 'range': [183, 225], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [192, 225], 'children': [{'type': 'VariableDecl', 'name': 'api_names', 'range': [193, 218], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [195, 218], 'children': [{'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_SCHNELL', 'range': [197, 202], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-schnell"', 'range': [201, 201], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO', 'range': [204, 209], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-pro"', 'range': [208, 208], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO1_1', 'range': [211, 216], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-1.1-pro"', 'range': [215, 215], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [220, 225], 'children': [{'type': 'MemberExpression', 'name': 'api_names[self]', 'range': [221, 224], 'children': [{'type': 'Identifier', 'name': 'api_names', 'range': [221, 221], 'children': []}, {'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}]}]}]}]}]}
2025-01-08 10:28:52,696 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:53,234 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'replicate', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'FileOutput', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [57, 57], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [60, 60], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [63, 63], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [75, 75], 'children': []}]}]}
2025-01-08 10:28:53,234 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:55,573 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [113, 146], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [113, 145], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [115, 145], 'children': [{'type': 'Property', 'name': 'provider', 'range': [117, 121], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [121, 121], 'children': []}]}, {'type': 'Property', 'name': 'id', 'range': [124, 128], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [128, 128], 'children': []}]}, {'type': 'Property', 'name': 'type', 'range': [131, 135], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [131, 131], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [133, 133], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [135, 135], 'children': []}]}, {'type': 'Property', 'name': 'title', 'range': [138, 142], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [138, 138], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [140, 140], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [142, 142], 'children': []}]}]}]}]}
2025-01-08 10:28:55,573 - INFO - Completed main AST analysis flow
2025-01-08 10:28:55,573 - INFO - Successfully processed chunk
2025-01-08 10:29:09,779 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [147, 226], 'children': [{'type': 'EnumDecl', 'name': 'ReplicateFluxModelName', 'range': [147, 181], 'children': [{'type': 'EnumMember', 'name': 'FLUX_SCHNELL', 'range': [161, 166], 'children': [{'type': 'Literal', 'name': '"Flux Schnell"', 'range': [164, 164], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO', 'range': [168, 173], 'children': [{'type': 'Literal', 'name': '"Flux Pro"', 'range': [171, 171], 'children': []}]}, {'type': 'EnumMember', 'name': 'FLUX_PRO1_1', 'range': [175, 180], 'children': [{'type': 'Literal', 'name': '"Flux Pro 1.1"', 'range': [178, 178], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'api_name', 'range': [183, 225], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [192, 225], 'children': [{'type': 'VariableDecl', 'name': 'api_names', 'range': [193, 218], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [195, 218], 'children': [{'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_SCHNELL', 'range': [197, 202], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-schnell"', 'range': [201, 201], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO', 'range': [204, 209], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-pro"', 'range': [208, 208], 'children': []}]}, {'type': 'Property', 'name': 'ReplicateFluxModelName.FLUX_PRO1_1', 'range': [211, 216], 'children': [{'type': 'Literal', 'name': '"black-forest-labs/flux-1.1-pro"', 'range': [215, 215], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [220, 225], 'children': [{'type': 'MemberExpression', 'name': 'api_names[self]', 'range': [221, 224], 'children': [{'type': 'Identifier', 'name': 'api_names', 'range': [221, 221], 'children': []}, {'type': 'Identifier', 'name': 'self', 'range': [223, 223], 'children': []}]}]}]}]}]}
2025-01-08 10:29:09,779 - INFO - Completed main AST analysis flow
2025-01-08 10:29:09,779 - INFO - Successfully processed chunk
2025-01-08 10:29:09,835 - INFO - Step 5 result: {'type': 'Program', 'name': 'CombinedImports', 'range': [0, 77], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [6, 6], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Literal', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [14, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'replicate', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 28], 'children': [{'type': 'ImportSpecifier', 'name': 'FileOutput', 'range': [27, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [37, 37], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [39, 39], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [41, 41], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [43, 43], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [45, 67], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [54, 54], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [57, 57], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [60, 60], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [63, 63], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [68, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [75, 75], 'children': []}]}]}
2025-01-08 10:29:09,835 - INFO - Completed main AST analysis flow
2025-01-08 10:29:09,835 - INFO - Successfully processed chunk
2025-01-08 10:29:49,832 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [254, 1347], 'children': [{'type': 'ClassDeclaration', 'name': 'ReplicateFluxAdvancedModelBlock', 'range': [254, 260], 'children': [{'type': 'ClassBody', 'name': '', 'range': [260, 260], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [261, 267], 'children': [{'type': 'ClassBody', 'name': '', 'range': [267, 267], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [268, 298], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [270, 270], 'children': []}, {'type': 'ArrayType', 'name': '', 'range': [271, 285], 'children': [{'type': 'LiteralType', 'name': 'ProviderName.REPLICATE', 'range': [273, 278], 'children': []}, {'type': 'LiteralType', 'name': '"api_key"', 'range': [280, 283], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [286, 286], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [287, 297], 'children': [{'type': 'Argument', 'name': 'description', 'range': [290, 294], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [299, 322], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [301, 301], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [302, 302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [303, 321], 'children': [{'type': 'Argument', 'name': 'description', 'range': [306, 308], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [311, 313], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [316, 318], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'replicate_model_name', 'range': [323, 353], 'children': [{'type': 'TypeAnnotation', 'name': 'ReplicateFluxModelName', 'range': [325, 325], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [326, 326], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [327, 352], 'children': [{'type': 'Argument', 'name': 'description', 'range': [330, 332], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [335, 339], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [342, 344], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [347, 349], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'seed', 'range': [354, 379], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [356, 358], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [359, 359], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [360, 378], 'children': [{'type': 'Argument', 'name': 'description', 'range': [363, 365], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [368, 370], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [373, 375], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'steps', 'range': [380, 403], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [382, 382], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [383, 383], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [384, 402], 'children': [{'type': 'Argument', 'name': 'description', 'range': [387, 389], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [392, 394], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [397, 399], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'guidance', 'range': [404, 433], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [406, 406], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [407, 407], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [408, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [411, 419], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [422, 424], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [427, 429], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'interval', 'range': [434, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [436, 436], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [437, 437], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [438, 462], 'children': [{'type': 'Argument', 'name': 'description', 'range': [441, 449], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [452, 454], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [457, 459], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'aspect_ratio', 'range': [464, 492], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [466, 466], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [467, 467], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [468, 491], 'children': [{'type': 'Argument', 'name': 'description', 'range': [471, 473], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [476, 478], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [481, 483], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [486, 488], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'output_format', 'range': [493, 518], 'children': [{'type': 'TypeAnnotation', 'name': 'ImageType', 'range': [495, 495], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [496, 496], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [497, 517], 'children': [{'type': 'Argument', 'name': 'description', 'range': [500, 502], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [505, 510], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [513, 514], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'output_quality', 'range': [519, 548], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [521, 521], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [522, 522], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [523, 547], 'children': [{'type': 'Argument', 'name': 'description', 'range': [526, 534], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [537, 539], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [542, 544], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'safety_tolerance', 'range': [549, 572], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [551, 551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [552, 552], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [553, 571], 'children': [{'type': 'Argument', 'name': 'description', 'range': [556, 558], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [561, 563], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [566, 568], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [574, 580], 'children': [{'type': 'ClassBody', 'name': '', 'range': [580, 580], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [604, 780], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [609, 780], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [611, 617], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [615, 779], 'children': [{'type': 'Argument', 'name': 'id', 'range': [618, 620], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [623, 625], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [628, 634], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [637, 641], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [644, 648], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [651, 718], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [721, 736], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [739, 771], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [774, 776], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [782, 950], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [807, 950], 'children': [{'type': 'IfStatement', 'name': '', 'range': [827, 848], 'children': [{'type': 'Condition', 'name': 'seed is None', 'range': [828, 830], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [831, 848], 'children': [{'type': 'Assignment', 'name': '=', 'range': [833, 847], 'children': [{'type': 'CallExpression', 'name': 'int.from_bytes', 'range': [835, 847], 'children': [{'type': 'Argument', 'name': 'os.urandom(4)', 'range': [839, 844], 'children': []}, {'type': 'Argument', 'name': '"big"', 'range': [846, 846], 'children': []}]}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [859, 943], 'children': [{'type': 'CallExpression', 'name': 'self.run_model', 'range': [861, 943], 'children': [{'type': 'Argument', 'name': 'api_key', 'range': [866, 870], 'children': []}, {'type': 'Argument', 'name': 'model_name', 'range': [873, 879], 'children': []}, {'type': 'Argument', 'name': 'prompt', 'range': [882, 886], 'children': []}, {'type': 'Argument', 'name': 'seed', 'range': [889, 891], 'children': []}, {'type': 'Argument', 'name': 'steps', 'range': [894, 898], 'children': []}, {'type': 'Argument', 'name': 'guidance', 'range': [901, 905], 'children': []}, {'type': 'Argument', 'name': 'interval', 'range': [908, 912], 'children': []}, {'type': 'Argument', 'name': 'aspect_ratio', 'range': [915, 919], 'children': []}, {'type': 'Argument', 'name': 'output_format', 'range': [922, 926], 'children': []}, {'type': 'Argument', 'name': 'output_quality', 'range': [929, 933], 'children': []}, {'type': 'Argument', 'name': 'safety_tolerance', 'range': [936, 940], 'children': []}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [945, 949], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [946, 946], 'children': []}, {'type': 'Argument', 'name': 'result', 'range': [948, 948], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run_model', 'range': [952, 1347], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [995, 1347], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1005, 1018], 'children': [{'type': 'CallExpression', 'name': 'replicate.Client', 'range': [1007, 1018], 'children': [{'type': 'Argument', 'name': 'api_token', 'range': [1011, 1013], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1029, 1155], 'children': [{'type': 'CallExpression', 'name': 'client.run', 'range': [1038, 1155], 'children': [{'type': 'Argument', 'name': 'f"{model_name}"', 'range': [1068, 1070], 'children': []}, {'type': 'Argument', 'name': 'input', 'range': [1072, 1121], 'children': [{'type': 'Property', 'name': 'prompt', 'range': [1076, 1078], 'children': []}, {'type': 'Property', 'name': 'seed', 'range': [1081, 1083], 'children': []}, {'type': 'Property', 'name': 'steps', 'range': [1086, 1088], 'children': []}, {'type': 'Property', 'name': 'guidance', 'range': [1091, 1093], 'children': []}, {'type': 'Property', 'name': 'interval', 'range': [1096, 1098], 'children': []}, {'type': 'Property', 'name': 'aspect_ratio', 'range': [1101, 1103], 'children': []}, {'type': 'Property', 'name': 'output_format', 'range': [1106, 1108], 'children': []}, {'type': 'Property', 'name': 'output_quality', 'range': [1111, 1113], 'children': []}, {'type': 'Property', 'name': 'safety_tolerance', 'range': [1116, 1118], 'children': []}]}, {'type': 'Argument', 'name': 'wait', 'range': [1124, 1126], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [1179, 1342], 'children': [{'type': 'Condition', 'name': 'isinstance(output, list) and len(output) > 0', 'range': [1180, 1192], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1193, 1263], 'children': [{'type': 'IfStatement', 'name': '', 'range': [1195, 1227], 'children': [{'type': 'Condition', 'name': 'isinstance(output[0], FileOutput)', 'range': [1196, 1204], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1205, 1227], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1207, 1215], 'children': [{'type': 'MemberExpression', 'name': 'output[0].url', 'range': [1209, 1215], 'children': []}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1228, 1263], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1230, 1238], 'children': [{'type': 'MemberExpression', 'name': 'output[0]', 'range': [1232, 1238], 'children': []}]}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1264, 1288], 'children': [{'type': 'Condition', 'name': 'isinstance(output, FileOutput)', 'range': [1265, 1270], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1271, 1288], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1273, 1277], 'children': [{'type': 'MemberExpression', 'name': 'output.url', 'range': [1275, 1277], 'children': []}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1289, 1322], 'children': [{'type': 'Condition', 'name': 'isinstance(output, str)', 'range': [1290, 1295], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1296, 1322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1298, 1300], 'children': [{'type': 'Identifier', 'name': 'output', 'range': [1300, 1300], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1323, 1342], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1326, 1330], 'children': [{'type': 'Literal', 'name': '"No output received"', 'range': [1328, 1330], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [1344, 1345], 'children': [{'type': 'Argument', 'name': 'result_url', 'range': [1345, 1345], 'children': []}]}]}]}]}
2025-01-08 10:29:49,833 - INFO - Starting Step 3: AST simplification
2025-01-08 10:31:40,848 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [254, 1347], 'children': [{'type': 'ClassDeclaration', 'name': 'ReplicateFluxAdvancedModelBlock', 'range': [254, 260], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [261, 267], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [268, 298], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [270, 270], 'children': []}, {'type': 'ArrayType', 'name': '', 'range': [271, 285], 'children': [{'type': 'LiteralType', 'name': 'ProviderName.REPLICATE', 'range': [273, 278], 'children': []}, {'type': 'LiteralType', 'name': '"api_key"', 'range': [280, 283], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [286, 286], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [287, 297], 'children': [{'type': 'Argument', 'name': 'description', 'range': [290, 294], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [299, 322], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [301, 301], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [302, 302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [303, 321], 'children': [{'type': 'Argument', 'name': 'description', 'range': [306, 308], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [311, 313], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [316, 318], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'replicate_model_name', 'range': [323, 353], 'children': [{'type': 'TypeAnnotation', 'name': 'ReplicateFluxModelName', 'range': [325, 325], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [326, 326], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [327, 352], 'children': [{'type': 'Argument', 'name': 'description', 'range': [330, 332], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [335, 339], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [342, 344], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [347, 349], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'seed', 'range': [354, 379], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [356, 358], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [359, 359], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [360, 378], 'children': [{'type': 'Argument', 'name': 'description', 'range': [363, 365], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [368, 370], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [373, 375], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'steps', 'range': [380, 403], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [382, 382], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [383, 383], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [384, 402], 'children': [{'type': 'Argument', 'name': 'description', 'range': [387, 389], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [392, 394], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [397, 399], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'guidance', 'range': [404, 433], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [406, 406], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [407, 407], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [408, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [411, 419], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [422, 424], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [427, 429], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'interval', 'range': [434, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [436, 436], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [437, 437], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [438, 462], 'children': [{'type': 'Argument', 'name': 'description', 'range': [441, 449], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [452, 454], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [457, 459], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'aspect_ratio', 'range': [464, 492], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [466, 466], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [467, 467], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [468, 491], 'children': [{'type': 'Argument', 'name': 'description', 'range': [471, 473], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [476, 478], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [481, 483], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [486, 488], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'output_format', 'range': [493, 518], 'children': [{'type': 'TypeAnnotation', 'name': 'ImageType', 'range': [495, 495], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [496, 496], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [497, 517], 'children': [{'type': 'Argument', 'name': 'description', 'range': [500, 502], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [505, 510], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [513, 514], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'output_quality', 'range': [519, 548], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [521, 521], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [522, 522], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [523, 547], 'children': [{'type': 'Argument', 'name': 'description', 'range': [526, 534], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [537, 539], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [542, 544], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'safety_tolerance', 'range': [549, 572], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [551, 551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [552, 552], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [553, 571], 'children': [{'type': 'Argument', 'name': 'description', 'range': [556, 558], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [561, 563], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [566, 568], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [574, 580], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [604, 780], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [609, 780], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [611, 617], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [615, 779], 'children': [{'type': 'Argument', 'name': 'id', 'range': [618, 620], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [623, 625], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [628, 634], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [637, 641], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [644, 648], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [651, 718], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [721, 736], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [739, 771], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [774, 776], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [782, 950], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [807, 950], 'children': [{'type': 'IfStatement', 'name': '', 'range': [827, 848], 'children': [{'type': 'Condition', 'name': 'seed is None', 'range': [828, 830], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [831, 848], 'children': [{'type': 'Assignment', 'name': '=', 'range': [833, 847], 'children': [{'type': 'CallExpression', 'name': 'int.from_bytes', 'range': [835, 847], 'children': [{'type': 'Argument', 'name': 'os.urandom(4)', 'range': [839, 844], 'children': []}, {'type': 'Argument', 'name': '"big"', 'range': [846, 846], 'children': []}]}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [859, 943], 'children': [{'type': 'CallExpression', 'name': 'self.run_model', 'range': [861, 943], 'children': [{'type': 'Argument', 'name': 'api_key', 'range': [866, 870], 'children': []}, {'type': 'Argument', 'name': 'model_name', 'range': [873, 879], 'children': []}, {'type': 'Argument', 'name': 'prompt', 'range': [882, 886], 'children': []}, {'type': 'Argument', 'name': 'seed', 'range': [889, 891], 'children': []}, {'type': 'Argument', 'name': 'steps', 'range': [894, 898], 'children': []}, {'type': 'Argument', 'name': 'guidance', 'range': [901, 905], 'children': []}, {'type': 'Argument', 'name': 'interval', 'range': [908, 912], 'children': []}, {'type': 'Argument', 'name': 'aspect_ratio', 'range': [915, 919], 'children': []}, {'type': 'Argument', 'name': 'output_format', 'range': [922, 926], 'children': []}, {'type': 'Argument', 'name': 'output_quality', 'range': [929, 933], 'children': []}, {'type': 'Argument', 'name': 'safety_tolerance', 'range': [936, 940], 'children': []}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [945, 949], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [946, 946], 'children': []}, {'type': 'Argument', 'name': 'result', 'range': [948, 948], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run_model', 'range': [952, 1347], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [995, 1347], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1005, 1018], 'children': [{'type': 'CallExpression', 'name': 'replicate.Client', 'range': [1007, 1018], 'children': [{'type': 'Argument', 'name': 'api_token', 'range': [1011, 1013], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1029, 1155], 'children': [{'type': 'CallExpression', 'name': 'client.run', 'range': [1038, 1155], 'children': [{'type': 'Argument', 'name': 'f"{model_name}"', 'range': [1068, 1070], 'children': []}, {'type': 'Argument', 'name': 'input', 'range': [1072, 1121], 'children': [{'type': 'Property', 'name': 'prompt', 'range': [1076, 1078], 'children': []}, {'type': 'Property', 'name': 'seed', 'range': [1081, 1083], 'children': []}, {'type': 'Property', 'name': 'steps', 'range': [1086, 1088], 'children': []}, {'type': 'Property', 'name': 'guidance', 'range': [1091, 1093], 'children': []}, {'type': 'Property', 'name': 'interval', 'range': [1096, 1098], 'children': []}, {'type': 'Property', 'name': 'aspect_ratio', 'range': [1101, 1103], 'children': []}, {'type': 'Property', 'name': 'output_format', 'range': [1106, 1108], 'children': []}, {'type': 'Property', 'name': 'output_quality', 'range': [1111, 1113], 'children': []}, {'type': 'Property', 'name': 'safety_tolerance', 'range': [1116, 1118], 'children': []}]}, {'type': 'Argument', 'name': 'wait', 'range': [1124, 1126], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [1179, 1342], 'children': [{'type': 'Condition', 'name': 'isinstance(output, list) and len(output) > 0', 'range': [1180, 1192], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1193, 1263], 'children': [{'type': 'IfStatement', 'name': '', 'range': [1195, 1227], 'children': [{'type': 'Condition', 'name': 'isinstance(output[0], FileOutput)', 'range': [1196, 1204], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1205, 1227], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1207, 1215], 'children': [{'type': 'MemberExpression', 'name': 'output[0].url', 'range': [1209, 1215], 'children': []}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1228, 1263], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1230, 1238], 'children': [{'type': 'MemberExpression', 'name': 'output[0]', 'range': [1232, 1238], 'children': []}]}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1264, 1288], 'children': [{'type': 'Condition', 'name': 'isinstance(output, FileOutput)', 'range': [1265, 1270], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1271, 1288], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1273, 1277], 'children': [{'type': 'MemberExpression', 'name': 'output.url', 'range': [1275, 1277], 'children': []}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1289, 1322], 'children': [{'type': 'Condition', 'name': 'isinstance(output, str)', 'range': [1290, 1295], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1296, 1322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1298, 1300], 'children': [{'type': 'Identifier', 'name': 'output', 'range': [1300, 1300], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1323, 1342], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1326, 1330], 'children': [{'type': 'Literal', 'name': '"No output received"', 'range': [1328, 1330], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [1344, 1345], 'children': [{'type': 'Argument', 'name': 'result_url', 'range': [1345, 1345], 'children': []}]}]}]}]}
2025-01-08 10:31:40,848 - INFO - Starting Step 4: AST normalization
2025-01-08 10:33:26,960 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [254, 1347], 'children': [{'type': 'ClassDecl', 'name': 'ReplicateFluxAdvancedModelBlock', 'range': [254, 260], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [261, 267], 'children': []}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [268, 298], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [270, 270], 'children': []}, {'type': 'ArrayType', 'name': '', 'range': [271, 285], 'children': [{'type': 'Literal', 'name': 'ProviderName.REPLICATE', 'range': [273, 278], 'children': []}, {'type': 'Literal', 'name': '"api_key"', 'range': [280, 283], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [286, 286], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [287, 297], 'children': [{'type': 'Argument', 'name': 'description', 'range': [290, 294], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'prompt', 'range': [299, 322], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [301, 301], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [302, 302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [303, 321], 'children': [{'type': 'Argument', 'name': 'description', 'range': [306, 308], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [311, 313], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [316, 318], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'replicate_model_name', 'range': [323, 353], 'children': [{'type': 'TypeAnnotation', 'name': 'ReplicateFluxModelName', 'range': [325, 325], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [326, 326], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [327, 352], 'children': [{'type': 'Argument', 'name': 'description', 'range': [330, 332], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [335, 339], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [342, 344], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [347, 349], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'seed', 'range': [354, 379], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [356, 358], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [359, 359], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [360, 378], 'children': [{'type': 'Argument', 'name': 'description', 'range': [363, 365], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [368, 370], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [373, 375], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'steps', 'range': [380, 403], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [382, 382], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [383, 383], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [384, 402], 'children': [{'type': 'Argument', 'name': 'description', 'range': [387, 389], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [392, 394], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [397, 399], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'guidance', 'range': [404, 433], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [406, 406], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [407, 407], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [408, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [411, 419], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [422, 424], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [427, 429], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'interval', 'range': [434, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [436, 436], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [437, 437], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [438, 462], 'children': [{'type': 'Argument', 'name': 'description', 'range': [441, 449], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [452, 454], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [457, 459], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'aspect_ratio', 'range': [464, 492], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [466, 466], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [467, 467], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [468, 491], 'children': [{'type': 'Argument', 'name': 'description', 'range': [471, 473], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [476, 478], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [481, 483], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [486, 488], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'output_format', 'range': [493, 518], 'children': [{'type': 'TypeAnnotation', 'name': 'ImageType', 'range': [495, 495], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [496, 496], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [497, 517], 'children': [{'type': 'Argument', 'name': 'description', 'range': [500, 502], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [505, 510], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [513, 514], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'output_quality', 'range': [519, 548], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [521, 521], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [522, 522], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [523, 547], 'children': [{'type': 'Argument', 'name': 'description', 'range': [526, 534], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [537, 539], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [542, 544], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'safety_tolerance', 'range': [549, 572], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [551, 551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [552, 552], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [553, 571], 'children': [{'type': 'Argument', 'name': 'description', 'range': [556, 558], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [561, 563], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [566, 568], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [574, 580], 'children': []}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [604, 780], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [609, 780], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [611, 617], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [615, 779], 'children': [{'type': 'Argument', 'name': 'id', 'range': [618, 620], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [623, 625], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [628, 634], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [637, 641], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [644, 648], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [651, 718], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [721, 736], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [739, 771], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [774, 776], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [782, 950], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [807, 950], 'children': [{'type': 'IfStatement', 'name': '', 'range': [827, 848], 'children': [{'type': 'Condition', 'name': 'seed is None', 'range': [828, 830], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [831, 848], 'children': [{'type': 'Assignment', 'name': '=', 'range': [833, 847], 'children': [{'type': 'CallExpression', 'name': 'int.from_bytes', 'range': [835, 847], 'children': [{'type': 'Argument', 'name': 'os.urandom(4)', 'range': [839, 844], 'children': []}, {'type': 'Argument', 'name': '"big"', 'range': [846, 846], 'children': []}]}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [859, 943], 'children': [{'type': 'CallExpression', 'name': 'self.run_model', 'range': [861, 943], 'children': [{'type': 'Argument', 'name': 'api_key', 'range': [866, 870], 'children': []}, {'type': 'Argument', 'name': 'model_name', 'range': [873, 879], 'children': []}, {'type': 'Argument', 'name': 'prompt', 'range': [882, 886], 'children': []}, {'type': 'Argument', 'name': 'seed', 'range': [889, 891], 'children': []}, {'type': 'Argument', 'name': 'steps', 'range': [894, 898], 'children': []}, {'type': 'Argument', 'name': 'guidance', 'range': [901, 905], 'children': []}, {'type': 'Argument', 'name': 'interval', 'range': [908, 912], 'children': []}, {'type': 'Argument', 'name': 'aspect_ratio', 'range': [915, 919], 'children': []}, {'type': 'Argument', 'name': 'output_format', 'range': [922, 926], 'children': []}, {'type': 'Argument', 'name': 'output_quality', 'range': [929, 933], 'children': []}, {'type': 'Argument', 'name': 'safety_tolerance', 'range': [936, 940], 'children': []}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [945, 949], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [946, 946], 'children': []}, {'type': 'Argument', 'name': 'result', 'range': [948, 948], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run_model', 'range': [952, 1347], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [995, 1347], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1005, 1018], 'children': [{'type': 'CallExpression', 'name': 'replicate.Client', 'range': [1007, 1018], 'children': [{'type': 'Argument', 'name': 'api_token', 'range': [1011, 1013], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1029, 1155], 'children': [{'type': 'CallExpression', 'name': 'client.run', 'range': [1038, 1155], 'children': [{'type': 'Argument', 'name': 'f"{model_name}"', 'range': [1068, 1070], 'children': []}, {'type': 'Argument', 'name': 'input', 'range': [1072, 1121], 'children': [{'type': 'Property', 'name': 'prompt', 'range': [1076, 1078], 'children': []}, {'type': 'Property', 'name': 'seed', 'range': [1081, 1083], 'children': []}, {'type': 'Property', 'name': 'steps', 'range': [1086, 1088], 'children': []}, {'type': 'Property', 'name': 'guidance', 'range': [1091, 1093], 'children': []}, {'type': 'Property', 'name': 'interval', 'range': [1096, 1098], 'children': []}, {'type': 'Property', 'name': 'aspect_ratio', 'range': [1101, 1103], 'children': []}, {'type': 'Property', 'name': 'output_format', 'range': [1106, 1108], 'children': []}, {'type': 'Property', 'name': 'output_quality', 'range': [1111, 1113], 'children': []}, {'type': 'Property', 'name': 'safety_tolerance', 'range': [1116, 1118], 'children': []}]}, {'type': 'Argument', 'name': 'wait', 'range': [1124, 1126], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [1179, 1342], 'children': [{'type': 'Condition', 'name': 'isinstance(output, list) and len(output) > 0', 'range': [1180, 1192], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1193, 1263], 'children': [{'type': 'IfStatement', 'name': '', 'range': [1195, 1227], 'children': [{'type': 'Condition', 'name': 'isinstance(output[0], FileOutput)', 'range': [1196, 1204], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1205, 1227], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1207, 1215], 'children': [{'type': 'MemberExpression', 'name': 'output[0].url', 'range': [1209, 1215], 'children': []}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1228, 1263], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1230, 1238], 'children': [{'type': 'MemberExpression', 'name': 'output[0]', 'range': [1232, 1238], 'children': []}]}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1264, 1288], 'children': [{'type': 'Condition', 'name': 'isinstance(output, FileOutput)', 'range': [1265, 1270], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1271, 1288], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1273, 1277], 'children': [{'type': 'MemberExpression', 'name': 'output.url', 'range': [1275, 1277], 'children': []}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1289, 1322], 'children': [{'type': 'Condition', 'name': 'isinstance(output, str)', 'range': [1290, 1295], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1296, 1322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1298, 1300], 'children': [{'type': 'Identifier', 'name': 'output', 'range': [1300, 1300], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1323, 1342], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1326, 1330], 'children': [{'type': 'Literal', 'name': '"No output received"', 'range': [1328, 1330], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [1344, 1345], 'children': [{'type': 'Argument', 'name': 'result_url', 'range': [1345, 1345], 'children': []}]}]}]}]}
2025-01-08 10:33:26,960 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:35:11,428 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [254, 1347], 'children': [{'type': 'ClassDecl', 'name': 'ReplicateFluxAdvancedModelBlock', 'range': [254, 260], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [261, 267], 'children': []}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [268, 298], 'children': [{'type': 'TypeAnnotation', 'name': 'CredentialsMetaInput', 'range': [270, 270], 'children': []}, {'type': 'ArrayType', 'name': '', 'range': [271, 285], 'children': [{'type': 'Literal', 'name': 'ProviderName.REPLICATE', 'range': [273, 278], 'children': []}, {'type': 'Literal', 'name': '"api_key"', 'range': [280, 283], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [286, 286], 'children': [{'type': 'CallExpression', 'name': 'CredentialsField', 'range': [287, 297], 'children': [{'type': 'Argument', 'name': 'description', 'range': [290, 294], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'prompt', 'range': [299, 322], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [301, 301], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [302, 302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [303, 321], 'children': [{'type': 'Argument', 'name': 'description', 'range': [306, 308], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [311, 313], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [316, 318], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'replicate_model_name', 'range': [323, 353], 'children': [{'type': 'TypeAnnotation', 'name': 'ReplicateFluxModelName', 'range': [325, 325], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [326, 326], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [327, 352], 'children': [{'type': 'Argument', 'name': 'description', 'range': [330, 332], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [335, 339], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [342, 344], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [347, 349], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'seed', 'range': [354, 379], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [356, 358], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [359, 359], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [360, 378], 'children': [{'type': 'Argument', 'name': 'description', 'range': [363, 365], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [368, 370], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [373, 375], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'steps', 'range': [380, 403], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [382, 382], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [383, 383], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [384, 402], 'children': [{'type': 'Argument', 'name': 'description', 'range': [387, 389], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [392, 394], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [397, 399], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'guidance', 'range': [404, 433], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [406, 406], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [407, 407], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [408, 432], 'children': [{'type': 'Argument', 'name': 'description', 'range': [411, 419], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [422, 424], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [427, 429], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'interval', 'range': [434, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'float', 'range': [436, 436], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [437, 437], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [438, 462], 'children': [{'type': 'Argument', 'name': 'description', 'range': [441, 449], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [452, 454], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [457, 459], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'aspect_ratio', 'range': [464, 492], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [466, 466], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [467, 467], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [468, 491], 'children': [{'type': 'Argument', 'name': 'description', 'range': [471, 473], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [476, 478], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [481, 483], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [486, 488], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'output_format', 'range': [493, 518], 'children': [{'type': 'TypeAnnotation', 'name': 'ImageType', 'range': [495, 495], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [496, 496], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [497, 517], 'children': [{'type': 'Argument', 'name': 'description', 'range': [500, 502], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [505, 510], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [513, 514], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'output_quality', 'range': [519, 548], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [521, 521], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [522, 522], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [523, 547], 'children': [{'type': 'Argument', 'name': 'description', 'range': [526, 534], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [537, 539], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [542, 544], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'safety_tolerance', 'range': [549, 572], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [551, 551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [552, 552], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [553, 571], 'children': [{'type': 'Argument', 'name': 'description', 'range': [556, 558], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [561, 563], 'children': []}, {'type': 'Argument', 'name': 'title', 'range': [566, 568], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [574, 580], 'children': []}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [604, 780], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [609, 780], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [611, 617], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [615, 779], 'children': [{'type': 'Argument', 'name': 'id', 'range': [618, 620], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [623, 625], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [628, 634], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [637, 641], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [644, 648], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [651, 718], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [721, 736], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [739, 771], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [774, 776], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [782, 950], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [807, 950], 'children': [{'type': 'IfStatement', 'name': '', 'range': [827, 848], 'children': [{'type': 'Condition', 'name': 'seed is None', 'range': [828, 830], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [831, 848], 'children': [{'type': 'Assignment', 'name': '=', 'range': [833, 847], 'children': [{'type': 'CallExpression', 'name': 'int.from_bytes', 'range': [835, 847], 'children': [{'type': 'Argument', 'name': 'os.urandom(4)', 'range': [839, 844], 'children': []}, {'type': 'Argument', 'name': '"big"', 'range': [846, 846], 'children': []}]}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [859, 943], 'children': [{'type': 'CallExpression', 'name': 'self.run_model', 'range': [861, 943], 'children': [{'type': 'Argument', 'name': 'api_key', 'range': [866, 870], 'children': []}, {'type': 'Argument', 'name': 'model_name', 'range': [873, 879], 'children': []}, {'type': 'Argument', 'name': 'prompt', 'range': [882, 886], 'children': []}, {'type': 'Argument', 'name': 'seed', 'range': [889, 891], 'children': []}, {'type': 'Argument', 'name': 'steps', 'range': [894, 898], 'children': []}, {'type': 'Argument', 'name': 'guidance', 'range': [901, 905], 'children': []}, {'type': 'Argument', 'name': 'interval', 'range': [908, 912], 'children': []}, {'type': 'Argument', 'name': 'aspect_ratio', 'range': [915, 919], 'children': []}, {'type': 'Argument', 'name': 'output_format', 'range': [922, 926], 'children': []}, {'type': 'Argument', 'name': 'output_quality', 'range': [929, 933], 'children': []}, {'type': 'Argument', 'name': 'safety_tolerance', 'range': [936, 940], 'children': []}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [945, 949], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [946, 946], 'children': []}, {'type': 'Argument', 'name': 'result', 'range': [948, 948], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run_model', 'range': [952, 1347], 'children': [{'type': 'FunctionBody', 'name': '', 'range': [995, 1347], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1005, 1018], 'children': [{'type': 'CallExpression', 'name': 'replicate.Client', 'range': [1007, 1018], 'children': [{'type': 'Argument', 'name': 'api_token', 'range': [1011, 1013], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1029, 1155], 'children': [{'type': 'CallExpression', 'name': 'client.run', 'range': [1038, 1155], 'children': [{'type': 'Argument', 'name': 'f"{model_name}"', 'range': [1068, 1070], 'children': []}, {'type': 'Argument', 'name': 'input', 'range': [1072, 1121], 'children': [{'type': 'Property', 'name': 'prompt', 'range': [1076, 1078], 'children': []}, {'type': 'Property', 'name': 'seed', 'range': [1081, 1083], 'children': []}, {'type': 'Property', 'name': 'steps', 'range': [1086, 1088], 'children': []}, {'type': 'Property', 'name': 'guidance', 'range': [1091, 1093], 'children': []}, {'type': 'Property', 'name': 'interval', 'range': [1096, 1098], 'children': []}, {'type': 'Property', 'name': 'aspect_ratio', 'range': [1101, 1103], 'children': []}, {'type': 'Property', 'name': 'output_format', 'range': [1106, 1108], 'children': []}, {'type': 'Property', 'name': 'output_quality', 'range': [1111, 1113], 'children': []}, {'type': 'Property', 'name': 'safety_tolerance', 'range': [1116, 1118], 'children': []}]}, {'type': 'Argument', 'name': 'wait', 'range': [1124, 1126], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [1179, 1342], 'children': [{'type': 'Condition', 'name': 'isinstance(output, list) and len(output) > 0', 'range': [1180, 1192], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1193, 1263], 'children': [{'type': 'IfStatement', 'name': '', 'range': [1195, 1227], 'children': [{'type': 'Condition', 'name': 'isinstance(output[0], FileOutput)', 'range': [1196, 1204], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1205, 1227], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1207, 1215], 'children': [{'type': 'MemberExpression', 'name': 'output[0].url', 'range': [1209, 1215], 'children': []}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1228, 1263], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1230, 1238], 'children': [{'type': 'MemberExpression', 'name': 'output[0]', 'range': [1232, 1238], 'children': []}]}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1264, 1288], 'children': [{'type': 'Condition', 'name': 'isinstance(output, FileOutput)', 'range': [1265, 1270], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1271, 1288], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1273, 1277], 'children': [{'type': 'MemberExpression', 'name': 'output.url', 'range': [1275, 1277], 'children': []}]}]}]}, {'type': 'ElseIfStatement', 'name': '', 'range': [1289, 1322], 'children': [{'type': 'Condition', 'name': 'isinstance(output, str)', 'range': [1290, 1295], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [1296, 1322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1298, 1300], 'children': [{'type': 'Identifier', 'name': 'output', 'range': [1300, 1300], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [1323, 1342], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1326, 1330], 'children': [{'type': 'Literal', 'name': '"No output received"', 'range': [1328, 1330], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [1344, 1345], 'children': [{'type': 'Argument', 'name': 'result_url', 'range': [1345, 1345], 'children': []}]}]}]}]}
2025-01-08 10:35:11,429 - INFO - Completed main AST analysis flow
2025-01-08 10:35:11,430 - INFO - Successfully processed chunk
2025-01-08 10:35:11,481 - INFO - Starting code generation from AST
2025-01-08 10:35:44,798 - INFO - Successfully generated code from AST
2025-01-08 10:35:44,799 - INFO - Starting static code similarity comparison
2025-01-08 10:35:44,834 - INFO - Static similarity result: {'final_score': 91.63, 'length_similarity': 91.64, 'token_similarity': 82.56, 'structure_similarity': 98.17, 'function_similarity': 100, 'complexity_similarity': 85.71, 'variable_similarity': 100}
