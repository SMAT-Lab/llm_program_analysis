2025-01-08 10:27:27,702 - INFO - Processing sample 203
2025-01-08 10:27:27,702 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:38,651 - INFO - Successfully split code into 11 top-level declarations
2025-01-08 10:27:41,363 - INFO - Processing chunk #0 (size=504 chars, start_index=0)
2025-01-08 10:27:41,371 - INFO - Processing chunk with 504 chars starting at index 0
2025-01-08 10:27:41,371 - INFO - Starting main AST analysis flow
2025-01-08 10:27:41,371 - INFO - Tokenized code into 104 tokens
2025-01-08 10:27:41,371 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:41,929 - INFO - Processing chunk #1 (size=89 chars, start_index=104)
2025-01-08 10:27:41,929 - INFO - Processing chunk with 89 chars starting at index 104
2025-01-08 10:27:41,929 - INFO - Starting main AST analysis flow
2025-01-08 10:27:41,929 - INFO - Tokenized code into 27 tokens
2025-01-08 10:27:41,929 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,201 - INFO - Processing chunk #2 (size=582 chars, start_index=131)
2025-01-08 10:27:51,201 - INFO - Processing chunk with 582 chars starting at index 131
2025-01-08 10:27:51,201 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,201 - INFO - Tokenized code into 118 tokens
2025-01-08 10:27:51,201 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,202 - INFO - Processing chunk #3 (size=48 chars, start_index=249)
2025-01-08 10:27:51,202 - INFO - Processing chunk with 48 chars starting at index 249
2025-01-08 10:27:51,202 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,202 - INFO - Tokenized code into 13 tokens
2025-01-08 10:27:51,202 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,208 - INFO - Processing chunk #4 (size=148 chars, start_index=262)
2025-01-08 10:27:51,211 - INFO - Processing chunk with 148 chars starting at index 262
2025-01-08 10:27:51,226 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,227 - INFO - Processing chunk #6 (size=375 chars, start_index=346)
2025-01-08 10:27:51,212 - INFO - Processing chunk #5 (size=296 chars, start_index=296)
2025-01-08 10:27:51,228 - INFO - Tokenized code into 34 tokens
2025-01-08 10:27:51,230 - INFO - Processing chunk #7 (size=383 chars, start_index=421)
2025-01-08 10:27:51,231 - INFO - Processing chunk with 375 chars starting at index 346
2025-01-08 10:27:51,236 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,233 - INFO - Processing chunk with 296 chars starting at index 296
2025-01-08 10:27:51,233 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,234 - INFO - Processing chunk #9 (size=139 chars, start_index=559)
2025-01-08 10:27:51,264 - INFO - Processing chunk with 139 chars starting at index 559
2025-01-08 10:27:51,278 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,279 - INFO - Tokenized code into 33 tokens
2025-01-08 10:27:51,244 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,235 - INFO - Processing chunk with 383 chars starting at index 421
2025-01-08 10:27:51,279 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,231 - INFO - Processing chunk #8 (size=144 chars, start_index=526)
2025-01-08 10:27:51,319 - INFO - Processing chunk with 144 chars starting at index 526
2025-01-08 10:27:51,293 - INFO - Tokenized code into 50 tokens
2025-01-08 10:27:51,303 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,325 - INFO - Tokenized code into 105 tokens
2025-01-08 10:27:51,237 - INFO - Tokenized code into 75 tokens
2025-01-08 10:27:51,329 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,325 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,303 - INFO - Processing chunk #10 (size=80 chars, start_index=592)
2025-01-08 10:27:51,326 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,319 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,344 - INFO - Processing chunk with 80 chars starting at index 592
2025-01-08 10:27:51,402 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,403 - INFO - Tokenized code into 17 tokens
2025-01-08 10:27:51,404 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,380 - INFO - Tokenized code into 33 tokens
2025-01-08 10:27:51,453 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:53,687 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [104, 130], 'children': [{'type': 'FunctionCall', 'name': 'dotenv.load_dotenv', 'range': [104, 108], 'children': []}, {'type': 'FunctionCall', 'name': 'logging.config.dictConfig', 'range': [111, 128], 'children': [{'type': 'FunctionCall', 'name': 'market.config.LogConfig.model_dump', 'range': [117, 127], 'children': []}]}]}
2025-01-08 10:27:53,687 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,318 - INFO - Step 1 result: {'type': 'Program', 'name': 'lifespan', 'range': [262, 294], 'children': []}
2025-01-08 10:28:00,365 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:04,022 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [421, 525], 'children': [{'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [421, 438], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [440, 457], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [459, 476], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [478, 499], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [501, 524], 'children': []}]}
2025-01-08 10:28:04,022 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:05,666 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [559, 591], 'children': [{'type': 'FunctionDeclaration', 'name': 'default', 'range': [567, 590], 'children': [{'type': 'ReturnStatement', 'range': [573, 589], 'children': [{'type': 'CallExpression', 'range': [574, 589], 'children': [{'type': 'MemberExpression', 'range': [574, 578], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [574, 574]}, {'type': 'Identifier', 'name': 'responses', 'range': [576, 576]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [578, 578]}]}, {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [583, 583]}, {'type': 'Literal', 'value': 200, 'range': [587, 587]}]}]}]}]}
2025-01-08 10:28:05,666 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:05,858 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [592, 608], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'expose', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'instrument', 'range': [592, 601], 'children': [{'type': 'CallExpression', 'name': 'Instrumentator', 'range': [592, 596], 'children': [{'type': 'Identifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [592, 592], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [600, 600], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [605, 605], 'children': []}]}]}]}
2025-01-08 10:28:05,858 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:05,954 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [296, 345], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [297, 299], 'children': []}, {'type': 'VariableDeclaration', 'name': 'app', 'range': [301, 343], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [303, 343], 'children': [{'type': 'Argument', 'name': 'title', 'range': [308, 310], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [313, 315], 'children': []}, {'type': 'Argument', 'name': 'summary', 'range': [318, 320], 'children': []}, {'type': 'Argument', 'name': 'version', 'range': [323, 325], 'children': []}, {'type': 'Argument', 'name': 'lifespan', 'range': [328, 330], 'children': []}, {'type': 'Argument', 'name': 'root_path', 'range': [333, 335], 'children': []}, {'type': 'Argument', 'name': 'docs_url', 'range': [338, 340], 'children': []}]}]}]}
2025-01-08 10:28:05,954 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:06,113 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [249, 261], 'children': [{'type': 'VariableDeclaration', 'name': 'db_client', 'range': [249, 258], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [250, 258], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [251, 253], 'children': [{'type': 'Identifier', 'name': 'prisma', 'range': [251, 251], 'children': []}, {'type': 'Identifier', 'name': 'Prisma', 'range': [253, 253], 'children': []}]}, {'type': 'CallExpression', 'name': '', 'range': [254, 258], 'children': [{'type': 'Identifier', 'name': 'auto_register', 'range': [255, 255], 'children': []}, {'type': 'Identifier', 'name': 'True', 'range': [257, 257], 'children': []}]}]}]}]}
2025-01-08 10:28:06,807 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:06,114 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [346, 420], 'children': [{'type': 'FunctionCall', 'name': 'add_middleware', 'range': [346, 361], 'children': [{'type': 'Argument', 'name': 'minimum_size', 'range': [358, 360], 'children': []}]}, {'type': 'FunctionCall', 'name': 'add_middleware', 'range': [363, 419], 'children': [{'type': 'Argument', 'name': 'middleware_class', 'range': [368, 376], 'children': []}, {'type': 'Argument', 'name': 'allow_origins', 'range': [379, 397], 'children': []}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [400, 402], 'children': []}, {'type': 'Argument', 'name': 'allow_methods', 'range': [405, 409], 'children': []}, {'type': 'Argument', 'name': 'allow_headers', 'range': [412, 416], 'children': []}]}]}
2025-01-08 10:28:06,911 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:08,589 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [526, 558], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [534, 556], 'children': [{'type': 'ReturnStatement', 'range': [540, 556], 'children': [{'type': 'CallExpression', 'range': [541, 556], 'children': [{'type': 'MemberExpression', 'range': [541, 545], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [541, 541]}, {'type': 'Identifier', 'name': 'responses', 'range': [543, 543]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [545, 545]}]}, {'type': 'ObjectExpression', 'range': [546, 556], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'content', 'range': [548, 548]}, 'value': {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [550, 550]}, 'range': [548, 550]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'status_code', 'range': [552, 552]}, 'value': {'type': 'Literal', 'value': 200, 'range': [554, 554]}, 'range': [552, 554]}]}]}]}]}]}
2025-01-08 10:28:08,629 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,479 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 103], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging.config', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': 'os', 'range': [8, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'dotenv', 'range': [12, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.gzip', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma', 'range': [32, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk', 'range': [38, 40], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.asyncio', 'range': [41, 47], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.fastapi', 'range': [48, 54], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.starlette', 'range': [55, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.config', 'range': [63, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.admin', 'range': [68, 74], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.agents', 'range': [75, 81], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.analytics', 'range': [82, 88], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.search', 'range': [89, 95], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.submissions', 'range': [96, 102], 'children': []}]}
2025-01-08 10:28:10,479 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:11,557 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [131, 248], 'children': [{'type': 'IfStatement', 'name': '', 'range': [131, 140], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 246], 'children': [{'type': 'CallExpression', 'name': 'init', 'range': [142, 246], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [142, 144], 'children': []}, {'type': 'Literal', 'name': '', 'range': [147, 156], 'children': []}, {'type': 'Literal', 'name': '', 'range': [159, 163], 'children': []}, {'type': 'Literal', 'name': '', 'range': [166, 170], 'children': []}, {'type': 'Literal', 'name': '', 'range': [173, 175], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [180, 191], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [180, 182], 'children': []}, {'type': 'Literal', 'name': '', 'range': [186, 190], 'children': []}]}, {'type': 'ArrayExpression', 'name': '', 'range': [198, 243], 'children': [{'type': 'NewExpression', 'name': 'StarletteIntegration', 'range': [202, 215], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [202, 208], 'children': []}, {'type': 'Literal', 'name': '', 'range': [211, 213], 'children': []}]}, {'type': 'NewExpression', 'name': 'FastApiIntegration', 'range': [218, 229], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [218, 224], 'children': []}, {'type': 'Literal', 'name': '', 'range': [226, 228], 'children': []}]}, {'type': 'NewExpression', 'name': 'AsyncioIntegration', 'range': [232, 240], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [232, 238], 'children': []}]}]}]}]}]}
2025-01-08 10:28:11,557 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:15,624 - INFO - Step 2 result: {'type': 'Program', 'name': 'lifespan', 'range': [262, 294], 'children': [{'type': 'Import', 'name': 'contextlib.asynccontextmanager', 'range': [262, 265], 'children': []}, {'type': 'FunctionDef', 'name': 'lifespan', 'range': [267, 294], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [271, 275], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [273, 275], 'children': []}]}, {'type': 'Await', 'name': 'db_client.connect', 'range': [279, 284], 'children': []}, {'type': 'Yield', 'name': '', 'range': [286, 286], 'children': []}, {'type': 'Await', 'name': 'db_client.disconnect', 'range': [288, 293], 'children': []}]}]}
2025-01-08 10:28:15,624 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:16,035 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [592, 608], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'expose', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'instrument', 'range': [592, 601], 'children': [{'type': 'CallExpression', 'name': 'Instrumentator', 'range': [592, 596], 'children': [{'type': 'Identifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [592, 592], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [600, 600], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [605, 605], 'children': []}]}]}]}
2025-01-08 10:28:16,523 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:16,700 - INFO - Step 2 result: {'nodes': [{'type': 'FunctionCall', 'name': 'dotenv.load_dotenv', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'dotenv', 'range': [104, 104], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [105, 105], 'children': []}, {'type': 'Identifier', 'name': 'load_dotenv', 'range': [106, 106], 'children': []}, {'type': 'Parenthesis', 'name': '(', 'range': [107, 107], 'children': []}, {'type': 'Parenthesis', 'name': ')', 'range': [108, 108], 'children': []}]}, {'type': 'FunctionCall', 'name': 'logging.config.dictConfig', 'range': [111, 128], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [111, 111], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [112, 112], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [113, 113], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [114, 114], 'children': []}, {'type': 'Identifier', 'name': 'dictConfig', 'range': [115, 115], 'children': []}, {'type': 'Parenthesis', 'name': '(', 'range': [116, 116], 'children': []}, {'type': 'FunctionCall', 'name': 'market.config.LogConfig.model_dump', 'range': [117, 127], 'children': [{'type': 'Identifier', 'name': 'market', 'range': [117, 117], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [118, 118], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [119, 119], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [120, 120], 'children': []}, {'type': 'Identifier', 'name': 'LogConfig', 'range': [121, 121], 'children': []}, {'type': 'Parenthesis', 'name': '(', 'range': [122, 122], 'children': []}, {'type': 'Parenthesis', 'name': ')', 'range': [123, 123], 'children': []}, {'type': 'Dot', 'name': '.', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [125, 125], 'children': []}, {'type': 'Parenthesis', 'name': '(', 'range': [126, 126], 'children': []}, {'type': 'Parenthesis', 'name': ')', 'range': [127, 127], 'children': []}]}, {'type': 'Parenthesis', 'name': ')', 'range': [128, 128], 'children': []}]}]}
2025-01-08 10:28:16,803 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:18,168 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [249, 261], 'children': [{'type': 'VariableDeclaration', 'name': 'db_client', 'range': [249, 258], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [250, 258], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [251, 253], 'children': [{'type': 'Identifier', 'name': 'prisma', 'range': [251, 251], 'children': []}, {'type': 'Identifier', 'name': 'Prisma', 'range': [253, 253], 'children': []}]}, {'type': 'CallExpression', 'name': '', 'range': [254, 258], 'children': [{'type': 'Identifier', 'name': 'auto_register', 'range': [255, 255], 'children': []}, {'type': 'Identifier', 'name': 'True', 'range': [257, 257], 'children': []}]}]}]}]}
2025-01-08 10:28:18,185 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:18,669 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [559, 591], 'children': [{'type': 'FunctionDeclaration', 'name': 'default', 'range': [567, 590], 'children': [{'type': 'BlockStatement', 'range': [571, 590], 'children': [{'type': 'ReturnStatement', 'range': [573, 589], 'children': [{'type': 'CallExpression', 'range': [574, 589], 'children': [{'type': 'MemberExpression', 'range': [574, 578], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [574, 574]}, {'type': 'Identifier', 'name': 'responses', 'range': [576, 576]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [578, 578]}]}, {'type': 'ObjectExpression', 'range': [579, 589], 'children': [{'type': 'Property', 'range': [581, 583], 'children': [{'type': 'Identifier', 'name': 'content', 'range': [581, 581]}, {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [583, 583]}]}, {'type': 'Property', 'range': [585, 587], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [585, 585]}, {'type': 'Literal', 'value': 200, 'range': [587, 587]}]}]}]}]}]}]}]}
2025-01-08 10:28:18,674 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:23,136 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [296, 345], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [297, 299], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [299, 299], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'app', 'range': [301, 343], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [303, 343], 'children': [{'type': 'Argument', 'name': 'title', 'range': [308, 310], 'children': [{'type': 'Literal', 'name': '"Marketplace API"', 'range': [310, 310], 'children': []}]}, {'type': 'Argument', 'name': 'description', 'range': [313, 315], 'children': [{'type': 'Literal', 'name': '"AutoGPT Marketplace API is a service that allows users to share AI agents."', 'range': [315, 315], 'children': []}]}, {'type': 'Argument', 'name': 'summary', 'range': [318, 320], 'children': [{'type': 'Literal', 'name': '"Maketplace API"', 'range': [320, 320], 'children': []}]}, {'type': 'Argument', 'name': 'version', 'range': [323, 325], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [325, 325], 'children': []}]}, {'type': 'Argument', 'name': 'lifespan', 'range': [328, 330], 'children': [{'type': 'Identifier', 'name': 'lifespan', 'range': [330, 330], 'children': []}]}, {'type': 'Argument', 'name': 'root_path', 'range': [333, 335], 'children': [{'type': 'Literal', 'name': '"/api/v1/market"', 'range': [335, 335], 'children': []}]}, {'type': 'Argument', 'name': 'docs_url', 'range': [338, 340], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [340, 340], 'children': []}]}]}]}]}
2025-01-08 10:28:23,140 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:24,403 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [526, 558], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [534, 556], 'children': [{'type': 'ReturnStatement', 'range': [540, 556], 'children': [{'type': 'CallExpression', 'range': [541, 556], 'children': [{'type': 'MemberExpression', 'range': [541, 545], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [541, 541]}, {'type': 'Identifier', 'name': 'responses', 'range': [543, 543]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [545, 545]}]}, {'type': 'ObjectExpression', 'range': [546, 556], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'content', 'range': [548, 548]}, 'value': {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [550, 550]}, 'range': [548, 550]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'status_code', 'range': [552, 552]}, 'value': {'type': 'Literal', 'value': 200, 'range': [554, 554]}, 'range': [552, 554]}]}]}]}]}]}
2025-01-08 10:28:24,403 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:26,839 - INFO - Step 3 result: {'type': 'Program', 'name': 'lifespan', 'range': [262, 294], 'children': [{'type': 'Import', 'name': 'contextlib.asynccontextmanager', 'range': [262, 265], 'children': []}, {'type': 'FunctionDef', 'name': 'lifespan', 'range': [267, 294], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [271, 275], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [273, 275], 'children': []}]}, {'type': 'Await', 'name': 'db_client.connect', 'range': [279, 284], 'children': []}, {'type': 'Yield', 'name': '', 'range': [286, 286], 'children': []}, {'type': 'Await', 'name': 'db_client.disconnect', 'range': [288, 293], 'children': []}]}]}
2025-01-08 10:28:26,840 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:27,002 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [249, 261], 'children': [{'type': 'VariableDeclaration', 'name': 'db_client', 'range': [249, 258], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [250, 258], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [251, 253], 'children': [{'type': 'Identifier', 'name': 'prisma', 'range': [251, 251], 'children': []}, {'type': 'Identifier', 'name': 'Prisma', 'range': [253, 253], 'children': []}]}, {'type': 'CallExpression', 'name': '', 'range': [254, 258], 'children': [{'type': 'Identifier', 'name': 'auto_register', 'range': [255, 255], 'children': []}, {'type': 'Literal', 'name': 'True', 'range': [257, 257], 'children': []}]}]}]}]}
2025-01-08 10:28:27,002 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:27,445 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [592, 608], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'expose', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'instrument', 'range': [592, 601], 'children': [{'type': 'CallExpression', 'name': 'Instrumentator', 'range': [592, 596], 'children': [{'type': 'Identifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [592, 592], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [600, 600], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [605, 605], 'children': []}]}]}]}
2025-01-08 10:28:27,445 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:27,507 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [346, 420], 'children': [{'type': 'FunctionCall', 'name': 'add_middleware', 'range': [346, 361], 'children': [{'type': 'Argument', 'name': 'minimum_size', 'range': [358, 360], 'children': [{'type': 'Literal', 'name': '1000', 'range': [360, 360], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'add_middleware', 'range': [363, 419], 'children': [{'type': 'Argument', 'name': 'middleware_class', 'range': [368, 376], 'children': [{'type': 'MemberExpression', 'name': 'CORSMiddleware', 'range': [370, 376], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [370, 370], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [372, 372], 'children': []}, {'type': 'Identifier', 'name': 'cors', 'range': [374, 374], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_origins', 'range': [379, 397], 'children': [{'type': 'CallExpression', 'name': 'split', 'range': [381, 397], 'children': [{'type': 'MemberExpression', 'name': 'get', 'range': [381, 385], 'children': [{'type': 'Identifier', 'name': 'os', 'range': [381, 381], 'children': []}, {'type': 'Identifier', 'name': 'environ', 'range': [383, 383], 'children': []}]}, {'type': 'Literal', 'name': '"BACKEND_CORS_ALLOW_ORIGINS"', 'range': [388, 388], 'children': []}, {'type': 'Literal', 'name': '"http://localhost:3000,http://127.0.0.1:3000"', 'range': [390, 390], 'children': []}, {'type': 'Literal', 'name': '","', 'range': [396, 396], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [400, 402], 'children': [{'type': 'Literal', 'name': 'True', 'range': [402, 402], 'children': []}]}, {'type': 'Argument', 'name': 'allow_methods', 'range': [405, 409], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [407, 409], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [408, 408], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_headers', 'range': [412, 416], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [414, 416], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [415, 415], 'children': []}]}]}]}]}
2025-01-08 10:28:27,507 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:29,727 - INFO - Step 3 result: {'nodes': [{'type': 'FunctionCall', 'name': 'dotenv.load_dotenv', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'dotenv', 'range': [104, 104], 'children': []}, {'type': 'Identifier', 'name': 'load_dotenv', 'range': [106, 106], 'children': []}]}, {'type': 'FunctionCall', 'name': 'logging.config.dictConfig', 'range': [111, 128], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'dictConfig', 'range': [115, 115], 'children': []}, {'type': 'FunctionCall', 'name': 'market.config.LogConfig.model_dump', 'range': [117, 127], 'children': [{'type': 'Identifier', 'name': 'market', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'LogConfig', 'range': [121, 121], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [125, 125], 'children': []}]}]}]}
2025-01-08 10:28:29,727 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:31,359 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [559, 591], 'children': [{'type': 'FunctionDeclaration', 'name': 'default', 'range': [567, 590], 'children': [{'type': 'BlockStatement', 'range': [571, 590], 'children': [{'type': 'ReturnStatement', 'range': [573, 589], 'children': [{'type': 'CallExpression', 'range': [574, 589], 'children': [{'type': 'MemberExpression', 'range': [574, 578], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [574, 574]}, {'type': 'Identifier', 'name': 'responses', 'range': [576, 576]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [578, 578]}]}, {'type': 'ObjectExpression', 'range': [579, 589], 'children': [{'type': 'Property', 'range': [581, 583], 'children': [{'type': 'Identifier', 'name': 'content', 'range': [581, 581]}, {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [583, 583]}]}, {'type': 'Property', 'range': [585, 587], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [585, 585]}, {'type': 'Literal', 'value': 200, 'range': [587, 587]}]}]}]}]}]}]}]}
2025-01-08 10:28:31,359 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:33,969 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [249, 261], 'children': [{'type': 'VariableDeclaration', 'name': 'db_client', 'range': [249, 258], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [250, 258], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [251, 253], 'children': [{'type': 'Identifier', 'name': 'prisma', 'range': [251, 251], 'children': []}, {'type': 'Identifier', 'name': 'Prisma', 'range': [253, 253], 'children': []}]}, {'type': 'CallExpression', 'name': '', 'range': [254, 258], 'children': [{'type': 'Identifier', 'name': 'auto_register', 'range': [255, 255], 'children': []}, {'type': 'Literal', 'name': 'True', 'range': [257, 257], 'children': []}]}]}]}]}
2025-01-08 10:28:33,970 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:34,174 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [526, 558], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [534, 556], 'children': [{'type': 'ReturnStatement', 'range': [540, 556], 'children': [{'type': 'CallExpression', 'range': [541, 556], 'children': [{'type': 'MemberExpression', 'range': [541, 545], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [541, 541]}, {'type': 'Identifier', 'name': 'responses', 'range': [543, 543]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [545, 545]}]}, {'type': 'ObjectExpression', 'range': [546, 556], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'content', 'range': [548, 548]}, 'value': {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [550, 550]}, 'range': [548, 550]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'status_code', 'range': [552, 552]}, 'value': {'type': 'Literal', 'value': 200, 'range': [554, 554]}, 'range': [552, 554]}]}]}]}]}]}
2025-01-08 10:28:34,174 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:34,302 - INFO - Step 4 result: {'type': 'Program', 'name': 'lifespan', 'range': [262, 294], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib.asynccontextmanager', 'range': [262, 265], 'children': []}, {'type': 'FunctionDecl', 'name': 'lifespan', 'range': [267, 294], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [271, 275], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [273, 275], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'db_client.connect', 'range': [279, 284], 'children': []}, {'type': 'YieldExpression', 'name': '', 'range': [286, 286], 'children': []}, {'type': 'AwaitExpression', 'name': 'db_client.disconnect', 'range': [288, 293], 'children': []}]}]}
2025-01-08 10:28:34,303 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:34,545 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [592, 608], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'expose', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'instrument', 'range': [592, 601], 'children': [{'type': 'CallExpression', 'name': 'Instrumentator', 'range': [592, 596], 'children': [{'type': 'Identifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [592, 592], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [600, 600], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [605, 605], 'children': []}]}]}]}
2025-01-08 10:28:34,545 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:36,449 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [296, 345], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [297, 299], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [299, 299], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'app', 'range': [301, 343], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [303, 343], 'children': [{'type': 'Argument', 'name': 'title', 'range': [308, 310], 'children': [{'type': 'Literal', 'name': '"Marketplace API"', 'range': [310, 310], 'children': []}]}, {'type': 'Argument', 'name': 'description', 'range': [313, 315], 'children': [{'type': 'Literal', 'name': '"AutoGPT Marketplace API is a service that allows users to share AI agents."', 'range': [315, 315], 'children': []}]}, {'type': 'Argument', 'name': 'summary', 'range': [318, 320], 'children': [{'type': 'Literal', 'name': '"Maketplace API"', 'range': [320, 320], 'children': []}]}, {'type': 'Argument', 'name': 'version', 'range': [323, 325], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [325, 325], 'children': []}]}, {'type': 'Argument', 'name': 'lifespan', 'range': [328, 330], 'children': [{'type': 'Identifier', 'name': 'lifespan', 'range': [330, 330], 'children': []}]}, {'type': 'Argument', 'name': 'root_path', 'range': [333, 335], 'children': [{'type': 'Literal', 'name': '"/api/v1/market"', 'range': [335, 335], 'children': []}]}, {'type': 'Argument', 'name': 'docs_url', 'range': [338, 340], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [340, 340], 'children': []}]}]}]}]}
2025-01-08 10:28:36,449 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:39,271 - INFO - Step 2 result: {'nodes': [{'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [421, 423], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [424, 438], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.agents.router', 'range': [425, 431], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [433, 437], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [435, 437], 'children': [{'type': 'StringLiteral', 'name': '"agents"', 'range': [436, 436], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [440, 442], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [443, 457], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.search.router', 'range': [444, 450], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [452, 456], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [454, 456], 'children': [{'type': 'StringLiteral', 'name': '"search"', 'range': [455, 455], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [459, 461], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 476], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.submissions.router', 'range': [463, 469], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [471, 475], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [473, 475], 'children': [{'type': 'StringLiteral', 'name': '"submissions"', 'range': [474, 474], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [478, 480], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [481, 499], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.admin.router', 'range': [482, 488], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [490, 492], 'children': [{'type': 'StringLiteral', 'name': '"/admin"', 'range': [492, 492], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [494, 498], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [496, 498], 'children': [{'type': 'StringLiteral', 'name': '"admin"', 'range': [497, 497], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [501, 503], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [504, 524], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.analytics.router', 'range': [506, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [514, 516], 'children': [{'type': 'StringLiteral', 'name': '"/analytics"', 'range': [516, 516], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [518, 522], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [520, 522], 'children': [{'type': 'StringLiteral', 'name': '"analytics"', 'range': [521, 521], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:39,271 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:39,499 - INFO - Step 4 result: {'nodes': [{'type': 'CallExpression', 'name': 'dotenv.load_dotenv', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'dotenv', 'range': [104, 104], 'children': []}, {'type': 'Identifier', 'name': 'load_dotenv', 'range': [106, 106], 'children': []}]}, {'type': 'CallExpression', 'name': 'logging.config.dictConfig', 'range': [111, 128], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'dictConfig', 'range': [115, 115], 'children': []}, {'type': 'CallExpression', 'name': 'market.config.LogConfig.model_dump', 'range': [117, 127], 'children': [{'type': 'Identifier', 'name': 'market', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'LogConfig', 'range': [121, 121], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [125, 125], 'children': []}]}]}]}
2025-01-08 10:28:39,499 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:40,378 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [131, 248], 'children': [{'type': 'IfStatement', 'name': '', 'range': [131, 140], 'children': [{'type': 'Condition', 'name': '', 'range': [132, 139], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [132, 134], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [136, 139], 'children': [{'type': 'Literal', 'name': '', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 246], 'children': [{'type': 'CallExpression', 'name': 'init', 'range': [142, 246], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [142, 144], 'children': []}, {'type': 'Argument', 'name': 'dsn', 'range': [147, 156], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [149, 151], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [153, 156], 'children': [{'type': 'Literal', 'name': '', 'range': [155, 155], 'children': []}]}]}, {'type': 'Argument', 'name': 'traces_sample_rate', 'range': [159, 163], 'children': [{'type': 'Literal', 'name': '', 'range': [161, 163], 'children': []}]}, {'type': 'Argument', 'name': 'profiles_sample_rate', 'range': [166, 170], 'children': [{'type': 'Literal', 'name': '', 'range': [168, 170], 'children': []}]}, {'type': 'Argument', 'name': 'enable_tracing', 'range': [173, 175], 'children': [{'type': 'Literal', 'name': '', 'range': [175, 175], 'children': []}]}, {'type': 'Argument', 'name': 'environment', 'range': [178, 196], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [180, 182], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [184, 191], 'children': [{'type': 'Literal', 'name': '', 'range': [186, 190], 'children': []}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [193, 195], 'children': []}]}, {'type': 'Argument', 'name': 'integrations', 'range': [198, 243], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [200, 243], 'children': [{'type': 'NewExpression', 'name': 'StarletteIntegration', 'range': [202, 215], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [202, 208], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '', 'range': [213, 213], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'FastApiIntegration', 'range': [218, 229], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [218, 224], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [226, 228], 'children': [{'type': 'Literal', 'name': '', 'range': [228, 228], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'AsyncioIntegration', 'range': [232, 240], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [232, 238], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:40,378 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:41,699 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [592, 608], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'expose', 'range': [592, 606], 'children': [{'type': 'CallExpression', 'name': 'instrument', 'range': [592, 601], 'children': [{'type': 'CallExpression', 'name': 'Instrumentator', 'range': [592, 596], 'children': [{'type': 'Identifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [592, 592], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [600, 600], 'children': []}]}, {'type': 'Identifier', 'name': 'app', 'range': [605, 605], 'children': []}]}]}]}
2025-01-08 10:28:41,699 - INFO - Completed main AST analysis flow
2025-01-08 10:28:41,699 - INFO - Successfully processed chunk
2025-01-08 10:28:42,120 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [559, 591], 'children': [{'type': 'FunctionDecl', 'name': 'default', 'range': [567, 590], 'children': [{'type': 'BlockStatement', 'range': [571, 590], 'children': [{'type': 'ReturnStatement', 'range': [573, 589], 'children': [{'type': 'CallExpression', 'range': [574, 589], 'children': [{'type': 'MemberExpression', 'range': [574, 578], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [574, 574]}, {'type': 'Identifier', 'name': 'responses', 'range': [576, 576]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [578, 578]}]}, {'type': 'ObjectExpression', 'range': [579, 589], 'children': [{'type': 'Property', 'range': [581, 583], 'children': [{'type': 'Identifier', 'name': 'content', 'range': [581, 581]}, {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [583, 583]}]}, {'type': 'Property', 'range': [585, 587], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [585, 585]}, {'type': 'Literal', 'value': 200, 'range': [587, 587]}]}]}]}]}]}]}]}
2025-01-08 10:28:42,120 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:42,641 - INFO - Step 5 result: {'type': 'Program', 'name': 'lifespan', 'range': [262, 294], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib.asynccontextmanager', 'range': [262, 265], 'children': []}, {'type': 'FunctionDecl', 'name': 'lifespan', 'range': [267, 294], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [271, 275], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [273, 275], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'db_client.connect', 'range': [279, 284], 'children': []}, {'type': 'YieldExpression', 'name': '', 'range': [286, 286], 'children': []}, {'type': 'AwaitExpression', 'name': 'db_client.disconnect', 'range': [288, 293], 'children': []}]}]}
2025-01-08 10:28:42,641 - INFO - Completed main AST analysis flow
2025-01-08 10:28:42,641 - INFO - Successfully processed chunk
2025-01-08 10:28:42,906 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [249, 261], 'children': [{'type': 'VariableDeclaration', 'name': 'db_client', 'range': [249, 258], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [250, 258], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [251, 253], 'children': [{'type': 'Identifier', 'name': 'prisma', 'range': [251, 251], 'children': []}, {'type': 'Identifier', 'name': 'Prisma', 'range': [253, 253], 'children': []}]}, {'type': 'CallExpression', 'name': '', 'range': [254, 258], 'children': [{'type': 'Identifier', 'name': 'auto_register', 'range': [255, 255], 'children': []}, {'type': 'Literal', 'name': 'True', 'range': [257, 257], 'children': []}]}]}]}]}
2025-01-08 10:28:42,907 - INFO - Completed main AST analysis flow
2025-01-08 10:28:42,907 - INFO - Successfully processed chunk
2025-01-08 10:28:45,512 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [526, 558], 'children': [{'type': 'FunctionDecl', 'name': 'health', 'range': [534, 556], 'children': [{'type': 'ReturnStatement', 'range': [540, 556], 'children': [{'type': 'CallExpression', 'range': [541, 556], 'children': [{'type': 'MemberExpression', 'range': [541, 545], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [541, 541]}, {'type': 'Identifier', 'name': 'responses', 'range': [543, 543]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [545, 545]}]}, {'type': 'ObjectExpression', 'range': [546, 556], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'content', 'range': [548, 548]}, 'value': {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [550, 550]}, 'range': [548, 550]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'status_code', 'range': [552, 552]}, 'value': {'type': 'Literal', 'value': 200, 'range': [554, 554]}, 'range': [552, 554]}]}]}]}]}]}
2025-01-08 10:28:45,512 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:46,124 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [346, 420], 'children': [{'type': 'FunctionCall', 'name': 'add_middleware', 'range': [346, 361], 'children': [{'type': 'Argument', 'name': 'minimum_size', 'range': [358, 360], 'children': [{'type': 'Literal', 'name': '1000', 'range': [360, 360], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'add_middleware', 'range': [363, 419], 'children': [{'type': 'Argument', 'name': 'middleware_class', 'range': [368, 376], 'children': [{'type': 'MemberExpression', 'name': 'CORSMiddleware', 'range': [370, 376], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [370, 370], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [372, 372], 'children': []}, {'type': 'Identifier', 'name': 'cors', 'range': [374, 374], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_origins', 'range': [379, 397], 'children': [{'type': 'CallExpression', 'name': 'split', 'range': [381, 397], 'children': [{'type': 'MemberExpression', 'name': 'get', 'range': [381, 385], 'children': [{'type': 'Identifier', 'name': 'os', 'range': [381, 381], 'children': []}, {'type': 'Identifier', 'name': 'environ', 'range': [383, 383], 'children': []}]}, {'type': 'Literal', 'name': '"BACKEND_CORS_ALLOW_ORIGINS"', 'range': [388, 388], 'children': []}, {'type': 'Literal', 'name': '"http://localhost:3000,http://127.0.0.1:3000"', 'range': [390, 390], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [400, 402], 'children': [{'type': 'Literal', 'name': 'True', 'range': [402, 402], 'children': []}]}, {'type': 'Argument', 'name': 'allow_methods', 'range': [405, 409], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [407, 409], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [408, 408], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_headers', 'range': [412, 416], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [414, 416], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [415, 415], 'children': []}]}]}]}]}
2025-01-08 10:28:46,125 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:49,332 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [104, 128], 'children': [{'type': 'CallExpression', 'name': 'dotenv.load_dotenv', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'dotenv', 'range': [104, 104], 'children': []}, {'type': 'Identifier', 'name': 'load_dotenv', 'range': [106, 106], 'children': []}]}, {'type': 'CallExpression', 'name': 'logging.config.dictConfig', 'range': [111, 128], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [111, 111], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'dictConfig', 'range': [115, 115], 'children': []}, {'type': 'CallExpression', 'name': 'market.config.LogConfig.model_dump', 'range': [117, 127], 'children': [{'type': 'Identifier', 'name': 'market', 'range': [117, 117], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [119, 119], 'children': []}, {'type': 'Identifier', 'name': 'LogConfig', 'range': [121, 121], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [125, 125], 'children': []}]}]}]}]}
2025-01-08 10:28:49,333 - INFO - Completed main AST analysis flow
2025-01-08 10:28:49,333 - INFO - Successfully processed chunk
2025-01-08 10:28:49,836 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [296, 345], 'children': [{'type': 'VariableDecl', 'name': 'docs_url', 'range': [297, 299], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [299, 299], 'children': []}]}, {'type': 'VariableDecl', 'name': 'app', 'range': [301, 343], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [303, 343], 'children': [{'type': 'Argument', 'name': 'title', 'range': [308, 310], 'children': [{'type': 'Literal', 'name': '"Marketplace API"', 'range': [310, 310], 'children': []}]}, {'type': 'Argument', 'name': 'description', 'range': [313, 315], 'children': [{'type': 'Literal', 'name': '"AutoGPT Marketplace API is a service that allows users to share AI agents."', 'range': [315, 315], 'children': []}]}, {'type': 'Argument', 'name': 'summary', 'range': [318, 320], 'children': [{'type': 'Literal', 'name': '"Maketplace API"', 'range': [320, 320], 'children': []}]}, {'type': 'Argument', 'name': 'version', 'range': [323, 325], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [325, 325], 'children': []}]}, {'type': 'Argument', 'name': 'lifespan', 'range': [328, 330], 'children': [{'type': 'Identifier', 'name': 'lifespan', 'range': [330, 330], 'children': []}]}, {'type': 'Argument', 'name': 'root_path', 'range': [333, 335], 'children': [{'type': 'Literal', 'name': '"/api/v1/market"', 'range': [335, 335], 'children': []}]}, {'type': 'Argument', 'name': 'docs_url', 'range': [338, 340], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [340, 340], 'children': []}]}]}]}]}
2025-01-08 10:28:49,837 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:52,570 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [559, 591], 'children': [{'type': 'FunctionDecl', 'name': 'default', 'range': [567, 590], 'children': [{'type': 'BlockStatement', 'range': [571, 590], 'children': [{'type': 'ReturnStatement', 'range': [573, 589], 'children': [{'type': 'CallExpression', 'range': [574, 589], 'children': [{'type': 'MemberExpression', 'range': [574, 578], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [574, 574]}, {'type': 'Identifier', 'name': 'responses', 'range': [576, 576]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [578, 578]}]}, {'type': 'ObjectExpression', 'range': [579, 589], 'children': [{'type': 'Property', 'range': [581, 583], 'children': [{'type': 'Identifier', 'name': 'content', 'range': [581, 581]}, {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [583, 583]}]}, {'type': 'Property', 'range': [585, 587], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [585, 585]}, {'type': 'Literal', 'value': 200, 'range': [587, 587]}]}]}]}]}]}]}]}
2025-01-08 10:28:52,570 - INFO - Completed main AST analysis flow
2025-01-08 10:28:52,570 - INFO - Successfully processed chunk
2025-01-08 10:28:54,928 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [526, 558], 'children': [{'type': 'FunctionDecl', 'name': 'health', 'range': [534, 556], 'children': [{'type': 'ReturnStatement', 'range': [540, 556], 'children': [{'type': 'CallExpression', 'range': [541, 556], 'children': [{'type': 'MemberExpression', 'range': [541, 545], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [541, 541]}, {'type': 'Identifier', 'name': 'responses', 'range': [543, 543]}, {'type': 'Identifier', 'name': 'HTMLResponse', 'range': [545, 545]}]}, {'type': 'ObjectExpression', 'range': [546, 556], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'content', 'range': [548, 548]}, 'value': {'type': 'Literal', 'value': '<h1>Marketplace API</h1>', 'range': [550, 550]}, 'range': [548, 550]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'status_code', 'range': [552, 552]}, 'value': {'type': 'Literal', 'value': 200, 'range': [554, 554]}, 'range': [552, 554]}]}]}]}]}]}
2025-01-08 10:28:54,928 - INFO - Completed main AST analysis flow
2025-01-08 10:28:54,928 - INFO - Successfully processed chunk
2025-01-08 10:28:57,571 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'contextlib', 'range': [0, 2], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'logging.config', 'range': [3, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [3, 4], 'children': []}, {'type': 'ImportSpecifier', 'name': 'config', 'range': [5, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'os', 'range': [8, 10], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [8, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'dotenv', 'range': [12, 14], 'children': [{'type': 'ImportSpecifier', 'name': 'dotenv', 'range': [12, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [15, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [15, 17], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.cors', 'range': [18, 24], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [18, 19], 'children': []}, {'type': 'ImportSpecifier', 'name': 'middleware', 'range': [20, 21], 'children': []}, {'type': 'ImportSpecifier', 'name': 'cors', 'range': [22, 24], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.gzip', 'range': [25, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [25, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'middleware', 'range': [27, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'gzip', 'range': [29, 31], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'prisma', 'range': [32, 34], 'children': [{'type': 'ImportSpecifier', 'name': 'prisma', 'range': [32, 34], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': [{'type': 'ImportSpecifier', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk', 'range': [38, 40], 'children': [{'type': 'ImportSpecifier', 'name': 'sentry_sdk', 'range': [38, 40], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.asyncio', 'range': [41, 47], 'children': [{'type': 'ImportSpecifier', 'name': 'sentry_sdk', 'range': [41, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'integrations', 'range': [43, 44], 'children': []}, {'type': 'ImportSpecifier', 'name': 'asyncio', 'range': [45, 47], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.fastapi', 'range': [48, 54], 'children': [{'type': 'ImportSpecifier', 'name': 'sentry_sdk', 'range': [48, 49], 'children': []}, {'type': 'ImportSpecifier', 'name': 'integrations', 'range': [50, 51], 'children': []}, {'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [52, 54], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.starlette', 'range': [55, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'sentry_sdk', 'range': [55, 56], 'children': []}, {'type': 'ImportSpecifier', 'name': 'integrations', 'range': [57, 58], 'children': []}, {'type': 'ImportSpecifier', 'name': 'starlette', 'range': [59, 61], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.config', 'range': [63, 67], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [63, 64], 'children': []}, {'type': 'ImportSpecifier', 'name': 'config', 'range': [65, 67], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.routes.admin', 'range': [68, 74], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [68, 69], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [70, 71], 'children': []}, {'type': 'ImportSpecifier', 'name': 'admin', 'range': [72, 74], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.routes.agents', 'range': [75, 81], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [75, 76], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [77, 78], 'children': []}, {'type': 'ImportSpecifier', 'name': 'agents', 'range': [79, 81], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.routes.analytics', 'range': [82, 88], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [82, 83], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [84, 85], 'children': []}, {'type': 'ImportSpecifier', 'name': 'analytics', 'range': [86, 88], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.routes.search', 'range': [89, 95], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [89, 90], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [91, 92], 'children': []}, {'type': 'ImportSpecifier', 'name': 'search', 'range': [93, 95], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'market.routes.submissions', 'range': [96, 102], 'children': [{'type': 'ImportSpecifier', 'name': 'market', 'range': [96, 97], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [98, 99], 'children': []}, {'type': 'ImportSpecifier', 'name': 'submissions', 'range': [100, 102], 'children': []}]}]}
2025-01-08 10:28:57,571 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:02,910 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [296, 345], 'children': [{'type': 'VariableDecl', 'name': 'docs_url', 'range': [297, 299], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [299, 299], 'children': []}]}, {'type': 'VariableDecl', 'name': 'app', 'range': [301, 343], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [303, 343], 'children': [{'type': 'Argument', 'name': 'title', 'range': [308, 310], 'children': [{'type': 'Literal', 'name': '"Marketplace API"', 'range': [310, 310], 'children': []}]}, {'type': 'Argument', 'name': 'description', 'range': [313, 315], 'children': [{'type': 'Literal', 'name': '"AutoGPT Marketplace API is a service that allows users to share AI agents."', 'range': [315, 315], 'children': []}]}, {'type': 'Argument', 'name': 'summary', 'range': [318, 320], 'children': [{'type': 'Literal', 'name': '"Maketplace API"', 'range': [320, 320], 'children': []}]}, {'type': 'Argument', 'name': 'version', 'range': [323, 325], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [325, 325], 'children': []}]}, {'type': 'Argument', 'name': 'lifespan', 'range': [328, 330], 'children': [{'type': 'Identifier', 'name': 'lifespan', 'range': [330, 330], 'children': []}]}, {'type': 'Argument', 'name': 'root_path', 'range': [333, 335], 'children': [{'type': 'Literal', 'name': '"/api/v1/market"', 'range': [335, 335], 'children': []}]}, {'type': 'Argument', 'name': 'docs_url', 'range': [338, 340], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [340, 340], 'children': []}]}]}]}]}
2025-01-08 10:29:02,910 - INFO - Completed main AST analysis flow
2025-01-08 10:29:02,910 - INFO - Successfully processed chunk
2025-01-08 10:29:03,956 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [131, 248], 'children': [{'type': 'IfStatement', 'name': '', 'range': [131, 140], 'children': [{'type': 'Condition', 'name': '', 'range': [132, 139], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [132, 134], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [136, 139], 'children': [{'type': 'Literal', 'name': '', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 246], 'children': [{'type': 'CallExpression', 'name': 'init', 'range': [142, 246], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [142, 144], 'children': []}, {'type': 'Argument', 'name': 'dsn', 'range': [147, 156], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [149, 151], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [153, 156], 'children': [{'type': 'Literal', 'name': '', 'range': [155, 155], 'children': []}]}]}, {'type': 'Argument', 'name': 'traces_sample_rate', 'range': [159, 163], 'children': [{'type': 'Literal', 'name': '', 'range': [161, 163], 'children': []}]}, {'type': 'Argument', 'name': 'profiles_sample_rate', 'range': [166, 170], 'children': [{'type': 'Literal', 'name': '', 'range': [168, 170], 'children': []}]}, {'type': 'Argument', 'name': 'enable_tracing', 'range': [173, 175], 'children': [{'type': 'Literal', 'name': '', 'range': [175, 175], 'children': []}]}, {'type': 'Argument', 'name': 'environment', 'range': [178, 196], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [180, 182], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [184, 191], 'children': [{'type': 'Literal', 'name': '', 'range': [186, 190], 'children': []}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [193, 195], 'children': []}]}, {'type': 'Argument', 'name': 'integrations', 'range': [198, 243], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [200, 243], 'children': [{'type': 'NewExpression', 'name': 'StarletteIntegration', 'range': [202, 215], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [202, 208], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '', 'range': [213, 213], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'FastApiIntegration', 'range': [218, 229], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [218, 224], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [226, 228], 'children': [{'type': 'Literal', 'name': '', 'range': [228, 228], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'AsyncioIntegration', 'range': [232, 240], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [232, 238], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:03,956 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:04,186 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [346, 420], 'children': [{'type': 'CallExpression', 'name': 'add_middleware', 'range': [346, 361], 'children': [{'type': 'Argument', 'name': 'minimum_size', 'range': [358, 360], 'children': [{'type': 'Literal', 'name': '1000', 'range': [360, 360], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'add_middleware', 'range': [363, 419], 'children': [{'type': 'Argument', 'name': 'middleware_class', 'range': [368, 376], 'children': [{'type': 'MemberExpression', 'name': 'CORSMiddleware', 'range': [370, 376], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [370, 370], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [372, 372], 'children': []}, {'type': 'Identifier', 'name': 'cors', 'range': [374, 374], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_origins', 'range': [379, 397], 'children': [{'type': 'CallExpression', 'name': 'split', 'range': [381, 397], 'children': [{'type': 'MemberExpression', 'name': 'get', 'range': [381, 385], 'children': [{'type': 'Identifier', 'name': 'os', 'range': [381, 381], 'children': []}, {'type': 'Identifier', 'name': 'environ', 'range': [383, 383], 'children': []}]}, {'type': 'Literal', 'name': '"BACKEND_CORS_ALLOW_ORIGINS"', 'range': [388, 388], 'children': []}, {'type': 'Literal', 'name': '"http://localhost:3000,http://127.0.0.1:3000"', 'range': [390, 390], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [400, 402], 'children': [{'type': 'Literal', 'name': 'True', 'range': [402, 402], 'children': []}]}, {'type': 'Argument', 'name': 'allow_methods', 'range': [405, 409], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [407, 409], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [408, 408], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_headers', 'range': [412, 416], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [414, 416], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [415, 415], 'children': []}]}]}]}]}
2025-01-08 10:29:04,187 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:09,570 - INFO - Step 3 result: {'nodes': [{'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [421, 423], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [424, 438], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.agents.router', 'range': [425, 431], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [433, 437], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [435, 437], 'children': [{'type': 'StringLiteral', 'name': '"agents"', 'range': [436, 436], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [440, 442], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [443, 457], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.search.router', 'range': [444, 450], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [452, 456], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [454, 456], 'children': [{'type': 'StringLiteral', 'name': '"search"', 'range': [455, 455], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [459, 461], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 476], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.submissions.router', 'range': [463, 469], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [471, 475], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [473, 475], 'children': [{'type': 'StringLiteral', 'name': '"submissions"', 'range': [474, 474], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [478, 480], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [481, 499], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.admin.router', 'range': [482, 488], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [490, 492], 'children': [{'type': 'StringLiteral', 'name': '"/admin"', 'range': [492, 492], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [494, 498], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [496, 498], 'children': [{'type': 'StringLiteral', 'name': '"admin"', 'range': [497, 497], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [501, 503], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [504, 524], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.analytics.router', 'range': [506, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [514, 516], 'children': [{'type': 'StringLiteral', 'name': '"/analytics"', 'range': [516, 516], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [518, 522], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [520, 522], 'children': [{'type': 'StringLiteral', 'name': '"analytics"', 'range': [521, 521], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:09,571 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:12,719 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging.config', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': 'os', 'range': [8, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'dotenv', 'range': [12, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.gzip', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma', 'range': [32, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk', 'range': [38, 40], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.asyncio', 'range': [41, 47], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.fastapi', 'range': [48, 54], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.starlette', 'range': [55, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.config', 'range': [63, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.admin', 'range': [68, 74], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.agents', 'range': [75, 81], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.analytics', 'range': [82, 88], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.search', 'range': [89, 95], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.submissions', 'range': [96, 102], 'children': []}]}
2025-01-08 10:29:12,720 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:21,526 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [346, 420], 'children': [{'type': 'CallExpression', 'name': 'add_middleware', 'range': [346, 361], 'children': [{'type': 'Argument', 'name': 'minimum_size', 'range': [358, 360], 'children': [{'type': 'Literal', 'name': '1000', 'range': [360, 360], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'add_middleware', 'range': [363, 419], 'children': [{'type': 'Argument', 'name': 'middleware_class', 'range': [368, 376], 'children': [{'type': 'MemberExpression', 'name': 'CORSMiddleware', 'range': [370, 376], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [370, 370], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [372, 372], 'children': []}, {'type': 'Identifier', 'name': 'cors', 'range': [374, 374], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_origins', 'range': [379, 397], 'children': [{'type': 'CallExpression', 'name': 'split', 'range': [381, 397], 'children': [{'type': 'MemberExpression', 'name': 'get', 'range': [381, 385], 'children': [{'type': 'Identifier', 'name': 'os', 'range': [381, 381], 'children': []}, {'type': 'Identifier', 'name': 'environ', 'range': [383, 383], 'children': []}]}, {'type': 'Literal', 'name': '"BACKEND_CORS_ALLOW_ORIGINS"', 'range': [388, 388], 'children': []}, {'type': 'Literal', 'name': '"http://localhost:3000,http://127.0.0.1:3000"', 'range': [390, 390], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [400, 402], 'children': [{'type': 'Literal', 'name': 'True', 'range': [402, 402], 'children': []}]}, {'type': 'Argument', 'name': 'allow_methods', 'range': [405, 409], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [407, 409], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [408, 408], 'children': []}]}]}, {'type': 'Argument', 'name': 'allow_headers', 'range': [412, 416], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [414, 416], 'children': [{'type': 'Literal', 'name': '"*"', 'range': [415, 415], 'children': []}]}]}]}]}
2025-01-08 10:29:21,527 - INFO - Completed main AST analysis flow
2025-01-08 10:29:21,528 - INFO - Successfully processed chunk
2025-01-08 10:29:27,566 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging.config', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': 'os', 'range': [8, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'dotenv', 'range': [12, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.gzip', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma', 'range': [32, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk', 'range': [38, 40], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.asyncio', 'range': [41, 47], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.fastapi', 'range': [48, 54], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.starlette', 'range': [55, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.config', 'range': [63, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.admin', 'range': [68, 74], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.agents', 'range': [75, 81], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.analytics', 'range': [82, 88], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.search', 'range': [89, 95], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.submissions', 'range': [96, 102], 'children': []}]}
2025-01-08 10:29:27,566 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:28,354 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [131, 248], 'children': [{'type': 'IfStatement', 'name': '', 'range': [131, 140], 'children': [{'type': 'Condition', 'name': '', 'range': [132, 139], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [132, 134], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [136, 139], 'children': [{'type': 'Literal', 'name': '', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 246], 'children': [{'type': 'CallExpression', 'name': 'init', 'range': [142, 246], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [142, 144], 'children': []}, {'type': 'Argument', 'name': 'dsn', 'range': [147, 156], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [149, 151], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [153, 156], 'children': [{'type': 'Literal', 'name': '', 'range': [155, 155], 'children': []}]}]}, {'type': 'Argument', 'name': 'traces_sample_rate', 'range': [159, 163], 'children': [{'type': 'Literal', 'name': '', 'range': [161, 163], 'children': []}]}, {'type': 'Argument', 'name': 'profiles_sample_rate', 'range': [166, 170], 'children': [{'type': 'Literal', 'name': '', 'range': [168, 170], 'children': []}]}, {'type': 'Argument', 'name': 'enable_tracing', 'range': [173, 175], 'children': [{'type': 'Literal', 'name': '', 'range': [175, 175], 'children': []}]}, {'type': 'Argument', 'name': 'environment', 'range': [178, 196], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [180, 182], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [184, 191], 'children': [{'type': 'Literal', 'name': '', 'range': [186, 190], 'children': []}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [193, 195], 'children': []}]}, {'type': 'Argument', 'name': 'integrations', 'range': [198, 243], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [200, 243], 'children': [{'type': 'NewExpression', 'name': 'StarletteIntegration', 'range': [202, 215], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [202, 208], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '', 'range': [213, 213], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'FastApiIntegration', 'range': [218, 229], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [218, 224], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [226, 228], 'children': [{'type': 'Literal', 'name': '', 'range': [228, 228], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'AsyncioIntegration', 'range': [232, 240], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [232, 238], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:28,354 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:40,692 - INFO - Step 4 result: {'nodes': [{'type': 'FunctionDecl', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [421, 423], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [424, 438], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.agents.router', 'range': [425, 431], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [433, 437], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [435, 437], 'children': [{'type': 'StringLiteral', 'name': '"agents"', 'range': [436, 436], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [440, 442], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [443, 457], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.search.router', 'range': [444, 450], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [452, 456], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [454, 456], 'children': [{'type': 'StringLiteral', 'name': '"search"', 'range': [455, 455], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [459, 461], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 476], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.submissions.router', 'range': [463, 469], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [471, 475], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [473, 475], 'children': [{'type': 'StringLiteral', 'name': '"submissions"', 'range': [474, 474], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [478, 480], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [481, 499], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.admin.router', 'range': [482, 488], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [490, 492], 'children': [{'type': 'StringLiteral', 'name': '"/admin"', 'range': [492, 492], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [494, 498], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [496, 498], 'children': [{'type': 'StringLiteral', 'name': '"admin"', 'range': [497, 497], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [501, 503], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [504, 524], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.analytics.router', 'range': [506, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [514, 516], 'children': [{'type': 'StringLiteral', 'name': '"/analytics"', 'range': [516, 516], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [518, 522], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [520, 522], 'children': [{'type': 'StringLiteral', 'name': '"analytics"', 'range': [521, 521], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:40,692 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:41,807 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 102], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging.config', 'range': [3, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': 'os', 'range': [8, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'dotenv', 'range': [12, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.middleware.gzip', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma', 'range': [32, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prometheus_fastapi_instrumentator', 'range': [35, 37], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk', 'range': [38, 40], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.asyncio', 'range': [41, 47], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.fastapi', 'range': [48, 54], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sentry_sdk.integrations.starlette', 'range': [55, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.config', 'range': [63, 67], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.admin', 'range': [68, 74], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.agents', 'range': [75, 81], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.analytics', 'range': [82, 88], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.search', 'range': [89, 95], 'children': []}, {'type': 'ImportDeclaration', 'name': 'market.routes.submissions', 'range': [96, 102], 'children': []}]}]}
2025-01-08 10:29:41,807 - INFO - Completed main AST analysis flow
2025-01-08 10:29:41,809 - INFO - Successfully processed chunk
2025-01-08 10:29:51,335 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [131, 248], 'children': [{'type': 'IfStatement', 'name': '', 'range': [131, 140], 'children': [{'type': 'Condition', 'name': '', 'range': [132, 139], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [132, 134], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [136, 139], 'children': [{'type': 'Literal', 'name': '', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 246], 'children': [{'type': 'CallExpression', 'name': 'init', 'range': [142, 246], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [142, 144], 'children': []}, {'type': 'Argument', 'name': 'dsn', 'range': [147, 156], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [149, 151], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [153, 156], 'children': [{'type': 'Literal', 'name': '', 'range': [155, 155], 'children': []}]}]}, {'type': 'Argument', 'name': 'traces_sample_rate', 'range': [159, 163], 'children': [{'type': 'Literal', 'name': '', 'range': [161, 163], 'children': []}]}, {'type': 'Argument', 'name': 'profiles_sample_rate', 'range': [166, 170], 'children': [{'type': 'Literal', 'name': '', 'range': [168, 170], 'children': []}]}, {'type': 'Argument', 'name': 'enable_tracing', 'range': [173, 175], 'children': [{'type': 'Literal', 'name': '', 'range': [175, 175], 'children': []}]}, {'type': 'Argument', 'name': 'environment', 'range': [178, 196], 'children': [{'type': 'MemberExpression', 'name': 'os', 'range': [180, 182], 'children': []}, {'type': 'CallExpression', 'name': 'get', 'range': [184, 191], 'children': [{'type': 'Literal', 'name': '', 'range': [186, 190], 'children': []}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [193, 195], 'children': []}]}, {'type': 'Argument', 'name': 'integrations', 'range': [198, 243], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [200, 243], 'children': [{'type': 'NewExpression', 'name': 'StarletteIntegration', 'range': [202, 215], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [202, 208], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '', 'range': [213, 213], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'FastApiIntegration', 'range': [218, 229], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [218, 224], 'children': []}, {'type': 'Argument', 'name': 'transaction_style', 'range': [226, 228], 'children': [{'type': 'Literal', 'name': '', 'range': [228, 228], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'AsyncioIntegration', 'range': [232, 240], 'children': [{'type': 'MemberExpression', 'name': 'sentry_sdk', 'range': [232, 238], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:51,336 - INFO - Completed main AST analysis flow
2025-01-08 10:29:51,337 - INFO - Successfully processed chunk
2025-01-08 10:30:10,736 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [421, 524], 'children': [{'type': 'FunctionDecl', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [421, 438], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [421, 423], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [424, 438], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.agents.router', 'range': [425, 431], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [433, 437], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [435, 437], 'children': [{'type': 'StringLiteral', 'name': '"agents"', 'range': [436, 436], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [440, 457], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [440, 442], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [443, 457], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.search.router', 'range': [444, 450], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [452, 456], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [454, 456], 'children': [{'type': 'StringLiteral', 'name': '"search"', 'range': [455, 455], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [459, 476], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [459, 461], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 476], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.submissions.router', 'range': [463, 469], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [471, 475], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [473, 475], 'children': [{'type': 'StringLiteral', 'name': '"submissions"', 'range': [474, 474], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [478, 499], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [478, 480], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [481, 499], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.admin.router', 'range': [482, 488], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [490, 492], 'children': [{'type': 'StringLiteral', 'name': '"/admin"', 'range': [492, 492], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [494, 498], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [496, 498], 'children': [{'type': 'StringLiteral', 'name': '"admin"', 'range': [497, 497], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'CallExpression', 'name': 'include_router', 'range': [501, 524], 'children': [{'type': 'MemberExpression', 'name': 'app.include_router', 'range': [501, 503], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [504, 524], 'children': [{'type': 'MemberExpression', 'name': 'market.routes.analytics.router', 'range': [506, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [514, 516], 'children': [{'type': 'StringLiteral', 'name': '"/analytics"', 'range': [516, 516], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [518, 522], 'children': [{'type': 'ListLiteral', 'name': '', 'range': [520, 522], 'children': [{'type': 'StringLiteral', 'name': '"analytics"', 'range': [521, 521], 'children': []}]}]}]}]}]}]}
2025-01-08 10:30:10,736 - INFO - Completed main AST analysis flow
2025-01-08 10:30:10,737 - INFO - Successfully processed chunk
2025-01-08 10:30:10,777 - INFO - Starting code generation from AST
2025-01-08 10:30:22,993 - INFO - Successfully generated code from AST
2025-01-08 10:30:22,994 - INFO - Starting static code similarity comparison
2025-01-08 10:30:23,002 - INFO - Static similarity result: {'final_score': 87.67, 'length_similarity': 78.38, 'token_similarity': 91.6, 'structure_similarity': 73.75, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
