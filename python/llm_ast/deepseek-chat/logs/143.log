2025-01-08 10:18:02,533 - INFO - Processing sample 143
2025-01-08 10:18:02,533 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:18:10,175 - INFO - Successfully split code into 10 top-level declarations
2025-01-08 10:18:10,179 - INFO - Processing chunk #0 (size=511 chars, start_index=0)
2025-01-08 10:18:10,179 - INFO - Processing chunk with 511 chars starting at index 0
2025-01-08 10:18:10,179 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,179 - INFO - Tokenized code into 120 tokens
2025-01-08 10:18:10,179 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,181 - INFO - Processing chunk #1 (size=140 chars, start_index=120)
2025-01-08 10:18:10,181 - INFO - Processing chunk with 140 chars starting at index 120
2025-01-08 10:18:10,181 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,181 - INFO - Tokenized code into 37 tokens
2025-01-08 10:18:10,181 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,183 - INFO - Processing chunk #2 (size=277 chars, start_index=157)
2025-01-08 10:18:10,190 - INFO - Processing chunk with 277 chars starting at index 157
2025-01-08 10:18:10,190 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,190 - INFO - Tokenized code into 52 tokens
2025-01-08 10:18:10,190 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,192 - INFO - Processing chunk #3 (size=383 chars, start_index=209)
2025-01-08 10:18:10,192 - INFO - Processing chunk with 383 chars starting at index 209
2025-01-08 10:18:10,192 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,193 - INFO - Tokenized code into 81 tokens
2025-01-08 10:18:10,193 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,202 - INFO - Processing chunk #4 (size=118 chars, start_index=290)
2025-01-08 10:18:10,202 - INFO - Processing chunk with 118 chars starting at index 290
2025-01-08 10:18:10,202 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,202 - INFO - Tokenized code into 29 tokens
2025-01-08 10:18:10,203 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,216 - INFO - Processing chunk #5 (size=292 chars, start_index=319)
2025-01-08 10:18:10,216 - INFO - Processing chunk with 292 chars starting at index 319
2025-01-08 10:18:10,217 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,217 - INFO - Processing chunk #6 (size=505 chars, start_index=364)
2025-01-08 10:18:10,218 - INFO - Tokenized code into 45 tokens
2025-01-08 10:18:10,219 - INFO - Processing chunk #7 (size=425 chars, start_index=448)
2025-01-08 10:18:10,219 - INFO - Processing chunk with 505 chars starting at index 364
2025-01-08 10:18:10,220 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,221 - INFO - Processing chunk #8 (size=112 chars, start_index=555)
2025-01-08 10:18:10,221 - INFO - Processing chunk with 425 chars starting at index 448
2025-01-08 10:18:10,222 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,223 - INFO - Processing chunk #9 (size=1918 chars, start_index=590)
2025-01-08 10:18:10,227 - INFO - Processing chunk with 112 chars starting at index 555
2025-01-08 10:18:10,228 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,228 - INFO - Tokenized code into 84 tokens
2025-01-08 10:18:10,228 - INFO - Processing chunk with 1918 chars starting at index 590
2025-01-08 10:18:10,227 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,229 - INFO - Tokenized code into 35 tokens
2025-01-08 10:18:10,229 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,230 - INFO - Starting main AST analysis flow
2025-01-08 10:18:10,230 - INFO - Tokenized code into 107 tokens
2025-01-08 10:18:10,236 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,236 - INFO - Tokenized code into 371 tokens
2025-01-08 10:18:10,230 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:10,238 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:18:12,289 - INFO - Step 1 result: {'type': 'Program', 'name': 'lifespan_context', 'range': [209, 289], 'children': []}
2025-01-08 10:18:12,289 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:12,762 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [555, 589], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [576, 589], 'children': []}]}
2025-01-08 10:18:12,762 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:13,496 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [364, 447], 'children': [{'type': 'FunctionDeclaration', 'name': 'handle_internal_http_error', 'range': [364, 378], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'handler', 'range': [381, 446], 'children': []}]}
2025-01-08 10:18:13,496 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:14,574 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [120, 156], 'children': [{'type': 'VariableDeclaration', 'name': 'settings', 'range': [120, 130], 'children': []}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [132, 139], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 154], 'children': []}]}
2025-01-08 10:18:14,574 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:14,901 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [290, 318], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [290, 294], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [296, 313], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [297, 312], 'children': []}]}, {'type': 'ElseStatement', 'name': '', 'range': [314, 315], 'children': []}]}
2025-01-08 10:18:14,901 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:15,714 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [448, 554], 'children': [{'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [448, 458], 'children': []}, {'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [460, 470], 'children': []}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [472, 495], 'children': []}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [497, 524], 'children': []}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [526, 553], 'children': []}]}
2025-01-08 10:18:15,715 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:18,903 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [590, 960], 'children': [{'type': 'ClassDeclaration', 'name': 'AgentServer', 'range': [590, 703], 'children': [{'type': 'MethodDeclaration', 'name': 'run', 'range': [603, 703], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'test_execute_graph', 'range': [705, 754], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'test_create_graph', 'range': [756, 801], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_status', 'range': [803, 858], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_node_execution_results', 'range': [860, 903], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'test_delete_graph', 'range': [905, 938], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'set_test_dependency_overrides', 'range': [940, 960], 'children': []}]}
2025-01-08 10:18:18,903 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:21,225 - INFO - Step 2 result: {'type': 'Program', 'name': 'lifespan_context', 'range': [209, 289], 'children': [{'type': 'Import', 'name': 'contextlib.asynccontextmanager', 'range': [209, 213], 'children': []}, {'type': 'FunctionDef', 'name': 'lifespan_context', 'range': [214, 289], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [218, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [220, 223], 'children': []}]}, {'type': 'Await', 'name': 'backend.data.db.connect', 'range': [226, 236], 'children': []}, {'type': 'Await', 'name': 'backend.data.block.initialize_blocks', 'range': [237, 247], 'children': []}, {'type': 'Await', 'name': 'backend.data.user.migrate_and_encrypt_user_integrations', 'range': [248, 258], 'children': []}, {'type': 'Await', 'name': 'backend.data.graph.fix_llm_provider_credentials', 'range': [259, 269], 'children': []}, {'type': 'With', 'name': 'launch_darkly_context', 'range': [270, 277], 'children': [{'type': 'Yield', 'name': '', 'range': [276, 277], 'children': []}]}, {'type': 'Await', 'name': 'backend.data.db.disconnect', 'range': [278, 288], 'children': []}]}]}
2025-01-08 10:18:21,225 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:22,957 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [319, 363], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [319, 363], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [320, 362], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [321, 362], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [321, 321]}, {'type': 'Identifier', 'name': 'FastAPI', 'range': [323, 323]}]}, {'type': 'ObjectExpression', 'name': '', 'range': [324, 362], 'children': [{'type': 'Property', 'name': 'title', 'range': [326, 328], 'children': [{'type': 'Literal', 'name': '', 'range': [328, 328]}]}, {'type': 'Property', 'name': 'description', 'range': [331, 339], 'children': [{'type': 'Literal', 'name': '', 'range': [333, 339]}]}, {'type': 'Property', 'name': 'summary', 'range': [342, 344], 'children': [{'type': 'Literal', 'name': '', 'range': [344, 344]}]}, {'type': 'Property', 'name': 'version', 'range': [347, 349], 'children': [{'type': 'Literal', 'name': '', 'range': [349, 349]}]}, {'type': 'Property', 'name': 'lifespan', 'range': [352, 354], 'children': [{'type': 'Identifier', 'name': 'lifespan_context', 'range': [354, 354]}]}, {'type': 'Property', 'name': 'docs_url', 'range': [357, 359], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [359, 359]}]}]}]}]}]}]}
2025-01-08 10:18:22,957 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:24,113 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'typing', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [10, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.responses', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'uvicorn', 'range': [25, 27], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.block', 'range': [46, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.db', 'range': [53, 59], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.graph', 'range': [60, 66], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.user', 'range': [67, 73], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.service', 'range': [105, 111], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.settings', 'range': [112, 118], 'children': []}]}
2025-01-08 10:18:24,113 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:25,470 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [555, 589], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [576, 589], 'children': [{'type': 'FunctionSignature', 'name': '', 'range': [576, 581], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [576, 581], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [577, 580], 'children': []}, {'type': 'Identifier', 'name': 'health', 'range': [578, 584], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [579, 580], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [580, 581], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [581, 582], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [582, 589], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [583, 588], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [583, 589], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [584, 588], 'children': [{'type': 'Punctuation', 'name': '{', 'range': [584, 585], 'children': []}, {'type': 'Property', 'name': 'status', 'range': [585, 587], 'children': [{'type': 'StringLiteral', 'name': '"status"', 'range': [585, 591], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [586, 587], 'children': []}, {'type': 'StringLiteral', 'name': '"healthy"', 'range': [587, 595], 'children': []}]}, {'type': 'Punctuation', 'name': '}', 'range': [588, 589], 'children': []}]}]}]}]}]}
2025-01-08 10:18:25,470 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:26,517 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [290, 318], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [290, 294], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [291, 294], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [294, 294], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [296, 313], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [297, 312], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [297, 301], 'children': [{'type': 'Identifier', 'name': 'settings', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [299, 299], 'children': []}, {'type': 'Identifier', 'name': 'app_env', 'range': [301, 301], 'children': []}]}, {'type': 'MemberExpression', 'name': '.', 'range': [305, 312], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [305, 305], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [307, 307], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [309, 309], 'children': []}, {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'LOCAL', 'range': [312, 312], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [314, 315], 'children': [{'type': 'Literal', 'name': 'None', 'range': [315, 315], 'children': []}]}]}
2025-01-08 10:18:26,517 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:27,116 - INFO - Step 1 result: {'type': 'Program', 'name': 'launch_darkly_context', 'range': [157, 208], 'children': [{'type': 'FunctionDeclaration', 'name': 'launch_darkly_context', 'range': [162, 208], 'children': [{'type': 'BlockStatement', 'range': [167, 208], 'children': [{'type': 'IfStatement', 'range': [168, 185], 'children': [{'type': 'BinaryExpression', 'operator': '!=', 'range': [169, 184], 'children': [{'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'settings', 'range': [169, 170]}, 'property': {'type': 'Identifier', 'name': 'config', 'range': [171, 172]}, 'range': [169, 172]}, 'property': {'type': 'Identifier', 'name': 'app_env', 'range': [173, 174]}, 'range': [169, 174]}, {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'backend', 'range': [176, 177]}, 'property': {'type': 'Identifier', 'name': 'util', 'range': [178, 179]}, 'range': [176, 179]}, 'property': {'type': 'Identifier', 'name': 'settings', 'range': [180, 181]}, 'range': [176, 181]}, 'property': {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [182, 183]}, 'range': [176, 183]}]}, {'type': 'BlockStatement', 'range': [186, 190], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'initialize_launchdarkly', 'range': [187, 188]}, 'arguments': [], 'range': [187, 189]}, 'range': [187, 190]}]}]}, {'type': 'TryStatement', 'range': [191, 202], 'children': [{'type': 'BlockStatement', 'range': [193, 195], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [194, 195]}, 'range': [194, 195]}]}, {'type': 'BlockStatement', 'range': [197, 202], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'shutdown_launchdarkly', 'range': [199, 200]}, 'arguments': [], 'range': [199, 201]}, 'range': [199, 202]}]}]}, {'type': 'BlockStatement', 'range': [204, 207], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [206, 207]}, 'range': [206, 207]}]}]}]}]}
2025-01-08 10:18:27,116 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:18:30,106 - INFO - Step 3 result: {'type': 'Program', 'name': 'lifespan_context', 'range': [209, 289], 'children': [{'type': 'Import', 'name': 'contextlib.asynccontextmanager', 'range': [209, 213], 'children': []}, {'type': 'FunctionDef', 'name': 'lifespan_context', 'range': [214, 289], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [218, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [220, 223], 'children': []}]}, {'type': 'Await', 'name': 'backend.data.db.connect', 'range': [226, 236], 'children': []}, {'type': 'Await', 'name': 'backend.data.block.initialize_blocks', 'range': [237, 247], 'children': []}, {'type': 'Await', 'name': 'backend.data.user.migrate_and_encrypt_user_integrations', 'range': [248, 258], 'children': []}, {'type': 'Await', 'name': 'backend.data.graph.fix_llm_provider_credentials', 'range': [259, 269], 'children': []}, {'type': 'With', 'name': 'launch_darkly_context', 'range': [270, 277], 'children': [{'type': 'Yield', 'name': '', 'range': [276, 277], 'children': []}]}, {'type': 'Await', 'name': 'backend.data.db.disconnect', 'range': [278, 288], 'children': []}]}]}
2025-01-08 10:18:30,106 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:30,840 - INFO - Step 2 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'settings', 'range': [120, 130], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [121, 130], 'children': [{'type': 'MemberExpression', 'name': 'backend.util.settings.Settings', 'range': [122, 128], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [122, 122], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'Settings', 'range': [128, 128], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [129, 130], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [132, 139], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [133, 139], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [134, 136], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [136, 136], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [137, 139], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger("autogpt_libs").setLevel', 'range': [142, 149], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [142, 142], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [144, 144], 'children': []}, {'type': 'Literal', 'name': '"autogpt_libs"', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'setLevel', 'range': [149, 149], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [150, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.INFO', 'range': [151, 153], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'INFO', 'range': [153, 153], 'children': []}]}]}]}]}
2025-01-08 10:18:30,840 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:33,499 - INFO - Step 2 result: {'nodes': [{'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [448, 458], 'children': [{'type': 'Argument', 'name': 'ValueError', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'handle_internal_http_error', 'range': [454, 457], 'children': [{'type': 'Argument', 'name': '400', 'range': [456, 456], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [460, 470], 'children': [{'type': 'Argument', 'name': 'Exception', 'range': [464, 464], 'children': []}, {'type': 'Argument', 'name': 'handle_internal_http_error', 'range': [466, 469], 'children': [{'type': 'Argument', 'name': '500', 'range': [468, 468], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [472, 495], 'children': [{'type': 'Argument', 'name': 'backend.server.routers.v1.v1_router', 'range': [476, 484], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [486, 490], 'children': [{'type': 'Argument', 'name': '"v1"', 'range': [489, 489], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [492, 494], 'children': [{'type': 'Argument', 'name': '"/api"', 'range': [494, 494], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [497, 524], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.routes.router', 'range': [502, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': '"v2"', 'range': [517, 517], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [520, 522], 'children': [{'type': 'Argument', 'name': '"/api/store"', 'range': [522, 522], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [526, 553], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.library.routes.router', 'range': [531, 541], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [543, 547], 'children': [{'type': 'Argument', 'name': '"v2"', 'range': [546, 546], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [549, 551], 'children': [{'type': 'Argument', 'name': '"/api/library"', 'range': [551, 551], 'children': []}]}]}]}
2025-01-08 10:18:33,500 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:34,250 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [555, 589], 'children': [{'type': 'FunctionDeclaration', 'name': 'health', 'range': [576, 589], 'children': [{'type': 'FunctionSignature', 'name': '', 'range': [576, 581], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [576, 581], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [577, 580], 'children': []}, {'type': 'Identifier', 'name': 'health', 'range': [578, 584], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [582, 589], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [583, 588], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [583, 589], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [584, 588], 'children': [{'type': 'Property', 'name': 'status', 'range': [585, 587], 'children': [{'type': 'StringLiteral', 'name': '"status"', 'range': [585, 591], 'children': []}, {'type': 'StringLiteral', 'name': '"healthy"', 'range': [587, 595], 'children': []}]}]}]}]}]}]}
2025-01-08 10:18:34,250 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:34,572 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [364, 447], 'children': [{'type': 'FunctionDeclaration', 'name': 'handle_internal_http_error', 'range': [364, 378], 'children': [{'type': 'Parameter', 'name': 'status_code', 'range': [367, 371], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [369, 369], 'children': []}, {'type': 'DefaultValue', 'name': '500', 'range': [371, 371], 'children': []}]}, {'type': 'Parameter', 'name': 'log_error', 'range': [373, 377], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [375, 375], 'children': []}, {'type': 'DefaultValue', 'name': 'True', 'range': [377, 377], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'handler', 'range': [381, 446], 'children': [{'type': 'Parameter', 'name': 'request', 'range': [384, 388], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.Request', 'range': [386, 388], 'children': []}]}, {'type': 'Parameter', 'name': 'exc', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'Exception', 'range': [392, 392], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [396, 407], 'children': [{'type': 'Condition', 'name': 'log_error', 'range': [397, 397], 'children': []}, {'type': 'Block', 'name': '', 'range': [399, 407], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [400, 406], 'children': [{'type': 'CallExpression', 'name': 'logger.exception', 'range': [400, 406], 'children': [{'type': 'Argument', 'name': '', 'range': [404, 405], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [404, 405], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [408, 442], 'children': [{'type': 'CallExpression', 'name': 'fastapi.responses.JSONResponse', 'range': [409, 442], 'children': [{'type': 'Argument', 'name': 'content', 'range': [416, 434], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [418, 434], 'children': [{'type': 'Property', 'name': 'message', 'range': [420, 423], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [422, 423], 'children': []}]}, {'type': 'Property', 'name': 'detail', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [428, 432], 'children': [{'type': 'Argument', 'name': 'exc', 'range': [430, 430], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'status_code', 'range': [437, 439], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [439, 439], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [445, 446], 'children': [{'type': 'Identifier', 'name': 'handler', 'range': [446, 446], 'children': []}]}]}]}
2025-01-08 10:18:34,573 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:35,574 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [319, 363], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [319, 363], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [320, 362], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [321, 362], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [321, 321]}, {'type': 'Identifier', 'name': 'FastAPI', 'range': [323, 323]}]}, {'type': 'ObjectExpression', 'name': '', 'range': [324, 362], 'children': [{'type': 'Property', 'name': 'title', 'range': [326, 328], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [328, 328]}]}, {'type': 'Property', 'name': 'description', 'range': [331, 339], 'children': [{'type': 'Literal', 'name': '"This server is used to execute agents that are created by the AutoGPT system."', 'range': [333, 339]}]}, {'type': 'Property', 'name': 'summary', 'range': [342, 344], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [344, 344]}]}, {'type': 'Property', 'name': 'version', 'range': [347, 349], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [349, 349]}]}, {'type': 'Property', 'name': 'lifespan', 'range': [352, 354], 'children': [{'type': 'Identifier', 'name': 'lifespan_context', 'range': [354, 354]}]}, {'type': 'Property', 'name': 'docs_url', 'range': [357, 359], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [359, 359]}]}]}]}]}]}]}
2025-01-08 10:18:35,574 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:37,939 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [290, 318], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [290, 294], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [291, 294], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [294, 294], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [296, 313], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [297, 312], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [297, 301], 'children': [{'type': 'Identifier', 'name': 'settings', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [299, 299], 'children': []}, {'type': 'Identifier', 'name': 'app_env', 'range': [301, 301], 'children': []}]}, {'type': 'MemberExpression', 'name': '.', 'range': [305, 312], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [305, 305], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [307, 307], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [309, 309], 'children': []}, {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'LOCAL', 'range': [312, 312], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [314, 315], 'children': [{'type': 'Literal', 'name': 'None', 'range': [315, 315], 'children': []}]}]}
2025-01-08 10:18:37,939 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:39,298 - INFO - Step 4 result: {'type': 'Program', 'name': 'lifespan_context', 'range': [209, 289], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib.asynccontextmanager', 'range': [209, 213], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'lifespan_context', 'range': [214, 289], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [218, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [220, 223], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'backend.data.db.connect', 'range': [226, 236], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.block.initialize_blocks', 'range': [237, 247], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.user.migrate_and_encrypt_user_integrations', 'range': [248, 258], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.graph.fix_llm_provider_credentials', 'range': [259, 269], 'children': []}, {'type': 'WithStatement', 'name': 'launch_darkly_context', 'range': [270, 277], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [276, 277], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'backend.data.db.disconnect', 'range': [278, 288], 'children': []}]}]}
2025-01-08 10:18:39,298 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:18:42,657 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [555, 589], 'children': [{'type': 'FunctionDecl', 'name': 'health', 'range': [576, 589], 'children': [{'type': 'FunctionSignature', 'name': '', 'range': [576, 581], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [576, 581], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [577, 580], 'children': []}, {'type': 'Identifier', 'name': 'health', 'range': [578, 584], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [582, 589], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [583, 588], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [583, 589], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [584, 588], 'children': [{'type': 'Property', 'name': 'status', 'range': [585, 587], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [585, 591], 'children': []}, {'type': 'Literal', 'name': '"healthy"', 'range': [587, 595], 'children': []}]}]}]}]}]}]}
2025-01-08 10:18:42,657 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:18:44,876 - INFO - Step 2 result: {'type': 'Program', 'name': 'launch_darkly_context', 'range': [157, 208], 'children': [{'type': 'FunctionDeclaration', 'name': 'launch_darkly_context', 'range': [162, 208], 'children': [{'type': 'BlockStatement', 'range': [167, 208], 'children': [{'type': 'IfStatement', 'range': [168, 185], 'children': [{'type': 'BinaryExpression', 'operator': '!=', 'range': [169, 184], 'children': [{'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'settings', 'range': [169, 170]}, 'property': {'type': 'Identifier', 'name': 'config', 'range': [171, 172]}, 'range': [169, 172]}, 'property': {'type': 'Identifier', 'name': 'app_env', 'range': [173, 174]}, 'range': [169, 174]}, {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'backend', 'range': [176, 177]}, 'property': {'type': 'Identifier', 'name': 'util', 'range': [178, 179]}, 'range': [176, 179]}, 'property': {'type': 'Identifier', 'name': 'settings', 'range': [180, 181]}, 'range': [176, 181]}, 'property': {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [182, 183]}, 'range': [176, 183]}]}, {'type': 'BlockStatement', 'range': [186, 190], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'initialize_launchdarkly', 'range': [187, 188]}, 'arguments': [], 'range': [187, 189]}, 'range': [187, 190]}]}]}, {'type': 'TryStatement', 'range': [191, 202], 'children': [{'type': 'BlockStatement', 'range': [193, 195], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [194, 195]}, 'range': [194, 195]}]}, {'type': 'BlockStatement', 'range': [197, 202], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'shutdown_launchdarkly', 'range': [199, 200]}, 'arguments': [], 'range': [199, 201]}, 'range': [199, 202]}]}]}, {'type': 'BlockStatement', 'range': [204, 207], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [206, 207]}, 'range': [206, 207]}]}]}]}]}
2025-01-08 10:18:44,876 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:47,091 - INFO - Step 3 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'settings', 'range': [120, 130], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [121, 130], 'children': [{'type': 'MemberExpression', 'name': 'backend.util.settings.Settings', 'range': [122, 128], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [122, 122], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'Settings', 'range': [128, 128], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [129, 130], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [132, 139], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [133, 139], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [134, 136], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [136, 136], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [137, 139], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger("autogpt_libs").setLevel', 'range': [142, 149], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [142, 142], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [144, 144], 'children': []}, {'type': 'Literal', 'name': '"autogpt_libs"', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'setLevel', 'range': [149, 149], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [150, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.INFO', 'range': [151, 153], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'INFO', 'range': [153, 153], 'children': []}]}]}]}]}
2025-01-08 10:18:47,091 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:48,011 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'contextlib', 'range': [0, 2], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'logging', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [3, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'typing', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'typing', 'range': [6, 8], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [10, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [10, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi.responses', 'range': [13, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi.responses', 'range': [13, 17], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': [{'type': 'ImportSpecifier', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'uvicorn', 'range': [25, 27], 'children': [{'type': 'ImportSpecifier', 'name': 'uvicorn', 'range': [25, 27], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.block', 'range': [46, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.data.block', 'range': [46, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.db', 'range': [53, 59], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.data.db', 'range': [53, 59], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.graph', 'range': [60, 66], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.data.graph', 'range': [60, 66], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.user', 'range': [67, 73], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.data.user', 'range': [67, 73], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.util.service', 'range': [105, 111], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.util.service', 'range': [105, 111], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.util.settings', 'range': [112, 118], 'children': [{'type': 'ImportSpecifier', 'name': 'backend.util.settings', 'range': [112, 118], 'children': []}]}]}
2025-01-08 10:18:48,011 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:48,313 - INFO - Step 5 result: {'type': 'Program', 'name': 'lifespan_context', 'range': [209, 289], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib.asynccontextmanager', 'range': [209, 213], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'lifespan_context', 'range': [214, 289], 'children': [{'type': 'Parameter', 'name': 'app', 'range': [218, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.FastAPI', 'range': [220, 223], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'backend.data.db.connect', 'range': [226, 236], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.block.initialize_blocks', 'range': [237, 247], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.user.migrate_and_encrypt_user_integrations', 'range': [248, 258], 'children': []}, {'type': 'AwaitExpression', 'name': 'backend.data.graph.fix_llm_provider_credentials', 'range': [259, 269], 'children': []}, {'type': 'WithStatement', 'name': 'launch_darkly_context', 'range': [270, 277], 'children': [{'type': 'YieldExpression', 'name': '', 'range': [276, 277], 'children': []}]}, {'type': 'AwaitExpression', 'name': 'backend.data.db.disconnect', 'range': [278, 288], 'children': []}]}]}
2025-01-08 10:18:48,313 - INFO - Completed main AST analysis flow
2025-01-08 10:18:48,313 - INFO - Successfully processed chunk
2025-01-08 10:18:49,099 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [319, 363], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [319, 363], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [320, 362], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [321, 362], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [321, 321]}, {'type': 'Identifier', 'name': 'FastAPI', 'range': [323, 323]}]}, {'type': 'ObjectExpression', 'name': '', 'range': [324, 362], 'children': [{'type': 'Property', 'name': 'title', 'range': [326, 328], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [328, 328]}]}, {'type': 'Property', 'name': 'description', 'range': [331, 339], 'children': [{'type': 'Literal', 'name': '"This server is used to execute agents that are created by the AutoGPT system."', 'range': [333, 339]}]}, {'type': 'Property', 'name': 'summary', 'range': [342, 344], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [344, 344]}]}, {'type': 'Property', 'name': 'version', 'range': [347, 349], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [349, 349]}]}, {'type': 'Property', 'name': 'lifespan', 'range': [352, 354], 'children': [{'type': 'Identifier', 'name': 'lifespan_context', 'range': [354, 354]}]}, {'type': 'Property', 'name': 'docs_url', 'range': [357, 359], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [359, 359]}]}]}]}]}]}]}
2025-01-08 10:18:49,099 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:49,429 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [290, 318], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [290, 294], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [291, 294], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [294, 294], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [296, 313], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [297, 312], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [297, 301], 'children': [{'type': 'Identifier', 'name': 'settings', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [299, 299], 'children': []}, {'type': 'Identifier', 'name': 'app_env', 'range': [301, 301], 'children': []}]}, {'type': 'MemberExpression', 'name': '.', 'range': [305, 312], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [305, 305], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [307, 307], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [309, 309], 'children': []}, {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'LOCAL', 'range': [312, 312], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [314, 315], 'children': [{'type': 'Literal', 'name': 'None', 'range': [315, 315], 'children': []}]}]}
2025-01-08 10:18:49,429 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:18:50,715 - INFO - Step 3 result: {'nodes': [{'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [448, 458], 'children': [{'type': 'Argument', 'name': 'ValueError', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'handle_internal_http_error', 'range': [454, 457], 'children': [{'type': 'Argument', 'name': '400', 'range': [456, 456], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'add_exception_handler', 'range': [460, 470], 'children': [{'type': 'Argument', 'name': 'Exception', 'range': [464, 464], 'children': []}, {'type': 'Argument', 'name': 'handle_internal_http_error', 'range': [466, 469], 'children': [{'type': 'Argument', 'name': '500', 'range': [468, 468], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [472, 495], 'children': [{'type': 'Argument', 'name': 'backend.server.routers.v1.v1_router', 'range': [476, 484], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [486, 490], 'children': [{'type': 'Argument', 'name': '"v1"', 'range': [489, 489], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [492, 494], 'children': [{'type': 'Argument', 'name': '"/api"', 'range': [494, 494], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [497, 524], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.routes.router', 'range': [502, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': '"v2"', 'range': [517, 517], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [520, 522], 'children': [{'type': 'Argument', 'name': '"/api/store"', 'range': [522, 522], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'include_router', 'range': [526, 553], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.library.routes.router', 'range': [531, 541], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [543, 547], 'children': [{'type': 'Argument', 'name': '"v2"', 'range': [546, 546], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [549, 551], 'children': [{'type': 'Argument', 'name': '"/api/library"', 'range': [551, 551], 'children': []}]}]}]}
2025-01-08 10:18:50,716 - INFO - Starting Step 4: AST normalization
2025-01-08 10:18:51,321 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [555, 589], 'children': [{'type': 'FunctionDecl', 'name': 'health', 'range': [576, 589], 'children': [{'type': 'FunctionSignature', 'name': '', 'range': [576, 581], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [576, 581], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [577, 580], 'children': []}, {'type': 'Identifier', 'name': 'health', 'range': [578, 584], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [582, 589], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [583, 588], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [583, 589], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [584, 588], 'children': [{'type': 'Property', 'name': 'status', 'range': [585, 587], 'children': [{'type': 'Literal', 'name': '"status"', 'range': [585, 591], 'children': []}, {'type': 'Literal', 'name': '"healthy"', 'range': [587, 595], 'children': []}]}]}]}]}]}]}
2025-01-08 10:18:51,321 - INFO - Completed main AST analysis flow
2025-01-08 10:18:51,321 - INFO - Successfully processed chunk
2025-01-08 10:18:55,529 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [590, 960], 'children': [{'type': 'ClassDeclaration', 'name': 'AgentServer', 'range': [590, 703], 'children': [{'type': 'MethodDeclaration', 'name': 'run', 'range': [603, 703], 'children': [{'type': 'AssignmentExpression', 'name': 'server_app', 'range': [610, 662], 'children': [{'type': 'CallExpression', 'name': 'CORSMiddleware', 'range': [612, 662], 'children': [{'type': 'Argument', 'name': 'app', 'range': [621, 623], 'children': []}, {'type': 'Argument', 'name': 'allow_origins', 'range': [626, 632], 'children': []}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [635, 637], 'children': []}, {'type': 'Argument', 'name': 'allow_methods', 'range': [640, 644], 'children': []}, {'type': 'Argument', 'name': 'allow_headers', 'range': [651, 655], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run', 'range': [664, 702], 'children': [{'type': 'Argument', 'name': 'server_app', 'range': [669, 669], 'children': []}, {'type': 'Argument', 'name': 'host', 'range': [672, 684], 'children': []}, {'type': 'Argument', 'name': 'port', 'range': [687, 699], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_execute_graph', 'range': [705, 754], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [737, 753], 'children': [{'type': 'CallExpression', 'name': 'execute_graph', 'range': [738, 753], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [748, 748], 'children': []}, {'type': 'Argument', 'name': 'node_input', 'range': [750, 750], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_create_graph', 'range': [756, 801], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [785, 800], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [786, 800], 'children': [{'type': 'CallExpression', 'name': 'create_new_graph', 'range': [787, 800], 'children': [{'type': 'Argument', 'name': 'create_graph', 'range': [797, 797], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [799, 799], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_status', 'range': [803, 858], 'children': [{'type': 'VariableDeclaration', 'name': 'execution', 'range': [820, 840], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [822, 840], 'children': [{'type': 'CallExpression', 'name': 'get_execution', 'range': [823, 840], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [834, 834], 'children': []}, {'type': 'Argument', 'name': 'execution_id', 'range': [838, 838], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [842, 853], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [843, 844], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [844, 844], 'children': []}]}, {'type': 'ThrowStatement', 'name': '', 'range': [847, 852], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [848, 852], 'children': [{'type': 'Literal', 'name': '', 'range': [850, 851], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [854, 858], 'children': [{'type': 'MemberExpression', 'name': 'status', 'range': [855, 858], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [855, 855], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_node_execution_results', 'range': [860, 903], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [883, 902], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [884, 902], 'children': [{'type': 'CallExpression', 'name': 'get_graph_run_node_execution_results', 'range': [885, 902], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [896, 896], 'children': []}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [898, 898], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [900, 900], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_delete_graph', 'range': [905, 938], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [922, 937], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [923, 937], 'children': [{'type': 'CallExpression', 'name': 'delete_graph', 'range': [924, 937], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [934, 934], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [936, 936], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'set_test_dependency_overrides', 'range': [940, 960], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [951, 959], 'children': [{'type': 'CallExpression', 'name': 'update', 'range': [955, 959], 'children': [{'type': 'Argument', 'name': 'overrides', 'range': [957, 957], 'children': []}]}]}]}]}
2025-01-08 10:18:55,529 - INFO - Starting Step 3: AST simplification
2025-01-08 10:18:55,747 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [364, 447], 'children': [{'type': 'FunctionDeclaration', 'name': 'handle_internal_http_error', 'range': [364, 378], 'children': [{'type': 'Parameter', 'name': 'status_code', 'range': [367, 371], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [369, 369], 'children': []}, {'type': 'DefaultValue', 'name': '500', 'range': [371, 371], 'children': []}]}, {'type': 'Parameter', 'name': 'log_error', 'range': [373, 377], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [375, 375], 'children': []}, {'type': 'DefaultValue', 'name': 'True', 'range': [377, 377], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'handler', 'range': [381, 446], 'children': [{'type': 'Parameter', 'name': 'request', 'range': [384, 388], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.Request', 'range': [386, 388], 'children': []}]}, {'type': 'Parameter', 'name': 'exc', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'Exception', 'range': [392, 392], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [396, 407], 'children': [{'type': 'Condition', 'name': 'log_error', 'range': [397, 397], 'children': []}, {'type': 'Block', 'name': '', 'range': [399, 407], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [400, 406], 'children': [{'type': 'CallExpression', 'name': 'logger.exception', 'range': [400, 406], 'children': [{'type': 'Argument', 'name': '', 'range': [404, 405], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [404, 405], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [408, 442], 'children': [{'type': 'CallExpression', 'name': 'fastapi.responses.JSONResponse', 'range': [409, 442], 'children': [{'type': 'Argument', 'name': 'content', 'range': [416, 434], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [418, 434], 'children': [{'type': 'Property', 'name': 'message', 'range': [420, 423], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [422, 423], 'children': []}]}, {'type': 'Property', 'name': 'detail', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [428, 432], 'children': [{'type': 'Argument', 'name': 'exc', 'range': [430, 430], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'status_code', 'range': [437, 439], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [439, 439], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [445, 446], 'children': [{'type': 'Identifier', 'name': 'handler', 'range': [446, 446], 'children': []}]}]}]}
2025-01-08 10:18:55,748 - INFO - Starting Step 4: AST normalization
2025-01-08 10:19:01,268 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [290, 318], 'children': [{'type': 'VariableDeclaration', 'name': 'docs_url', 'range': [290, 294], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [291, 294], 'children': [{'type': 'Literal', 'name': '"/docs"', 'range': [294, 294], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [296, 313], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [297, 312], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [297, 301], 'children': [{'type': 'Identifier', 'name': 'settings', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'config', 'range': [299, 299], 'children': []}, {'type': 'Identifier', 'name': 'app_env', 'range': [301, 301], 'children': []}]}, {'type': 'MemberExpression', 'name': '.', 'range': [305, 312], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [305, 305], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [307, 307], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [309, 309], 'children': []}, {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'LOCAL', 'range': [312, 312], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [314, 315], 'children': [{'type': 'Literal', 'name': 'None', 'range': [315, 315], 'children': []}]}]}
2025-01-08 10:19:01,268 - INFO - Completed main AST analysis flow
2025-01-08 10:19:01,268 - INFO - Successfully processed chunk
2025-01-08 10:19:01,710 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'typing', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [10, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.responses', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'uvicorn', 'range': [25, 27], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'initialize_launchdarkly', 'range': [37, 38], 'children': []}, {'type': 'ImportSpecifier', 'name': 'shutdown_launchdarkly', 'range': [40, 41], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.block', 'range': [46, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.db', 'range': [53, 59], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.graph', 'range': [60, 66], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.user', 'range': [67, 73], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.service', 'range': [105, 111], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.settings', 'range': [112, 118], 'children': []}]}
2025-01-08 10:19:01,711 - INFO - Starting Step 4: AST normalization
2025-01-08 10:19:02,157 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [319, 363], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [319, 363], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [320, 362], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [321, 362], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [321, 321]}, {'type': 'Identifier', 'name': 'FastAPI', 'range': [323, 323]}]}, {'type': 'ObjectExpression', 'name': '', 'range': [324, 362], 'children': [{'type': 'Property', 'name': 'title', 'range': [326, 328], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [328, 328]}]}, {'type': 'Property', 'name': 'description', 'range': [331, 339], 'children': [{'type': 'Literal', 'name': '"This server is used to execute agents that are created by the AutoGPT system."', 'range': [333, 339]}]}, {'type': 'Property', 'name': 'summary', 'range': [342, 344], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [344, 344]}]}, {'type': 'Property', 'name': 'version', 'range': [347, 349], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [349, 349]}]}, {'type': 'Property', 'name': 'lifespan', 'range': [352, 354], 'children': [{'type': 'Identifier', 'name': 'lifespan_context', 'range': [354, 354]}]}, {'type': 'Property', 'name': 'docs_url', 'range': [357, 359], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [359, 359]}]}]}]}]}]}]}
2025-01-08 10:19:02,157 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:02,320 - INFO - Step 3 result: {'type': 'Program', 'name': 'launch_darkly_context', 'range': [157, 208], 'children': [{'type': 'FunctionDeclaration', 'name': 'launch_darkly_context', 'range': [162, 208], 'children': [{'type': 'BlockStatement', 'range': [167, 208], 'children': [{'type': 'IfStatement', 'range': [168, 185], 'children': [{'type': 'BinaryExpression', 'operator': '!=', 'range': [169, 184], 'children': [{'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'settings', 'range': [169, 170]}, 'property': {'type': 'Identifier', 'name': 'config', 'range': [171, 172]}, 'range': [169, 172]}, 'property': {'type': 'Identifier', 'name': 'app_env', 'range': [173, 174]}, 'range': [169, 174]}, {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'backend', 'range': [176, 177]}, 'property': {'type': 'Identifier', 'name': 'util', 'range': [178, 179]}, 'range': [176, 179]}, 'property': {'type': 'Identifier', 'name': 'settings', 'range': [180, 181]}, 'range': [176, 181]}, 'property': {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [182, 183]}, 'range': [176, 183]}]}, {'type': 'BlockStatement', 'range': [186, 190], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'initialize_launchdarkly', 'range': [187, 188]}, 'arguments': [], 'range': [187, 189]}, 'range': [187, 190]}]}]}, {'type': 'TryStatement', 'range': [191, 202], 'children': [{'type': 'BlockStatement', 'range': [193, 195], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [194, 195]}, 'range': [194, 195]}]}, {'type': 'BlockStatement', 'range': [197, 202], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'shutdown_launchdarkly', 'range': [199, 200]}, 'arguments': [], 'range': [199, 201]}, 'range': [199, 202]}]}]}, {'type': 'BlockStatement', 'range': [204, 207], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [206, 207]}, 'range': [206, 207]}]}]}]}]}
2025-01-08 10:19:02,320 - INFO - Starting Step 4: AST normalization
2025-01-08 10:19:03,495 - INFO - Step 4 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'settings', 'range': [120, 130], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [121, 130], 'children': [{'type': 'MemberExpression', 'name': 'backend.util.settings.Settings', 'range': [122, 128], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [122, 122], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'Settings', 'range': [128, 128], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [129, 130], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [132, 139], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [133, 139], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [134, 136], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [136, 136], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [137, 139], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger("autogpt_libs").setLevel', 'range': [142, 149], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [142, 142], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [144, 144], 'children': []}, {'type': 'Literal', 'name': '"autogpt_libs"', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'setLevel', 'range': [149, 149], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [150, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.INFO', 'range': [151, 153], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'INFO', 'range': [153, 153], 'children': []}]}]}]}]}
2025-01-08 10:19:03,495 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:08,764 - INFO - Step 4 result: {'nodes': [{'type': 'CallExpression', 'name': 'add_exception_handler', 'range': [448, 458], 'children': [{'type': 'Literal', 'name': 'ValueError', 'range': [452, 452], 'children': []}, {'type': 'CallExpression', 'name': 'handle_internal_http_error', 'range': [454, 457], 'children': [{'type': 'Literal', 'name': '400', 'range': [456, 456], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'add_exception_handler', 'range': [460, 470], 'children': [{'type': 'Literal', 'name': 'Exception', 'range': [464, 464], 'children': []}, {'type': 'CallExpression', 'name': 'handle_internal_http_error', 'range': [466, 469], 'children': [{'type': 'Literal', 'name': '500', 'range': [468, 468], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [472, 495], 'children': [{'type': 'Identifier', 'name': 'backend.server.routers.v1.v1_router', 'range': [476, 484], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [486, 490], 'children': [{'type': 'Literal', 'name': '"v1"', 'range': [489, 489], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [492, 494], 'children': [{'type': 'Literal', 'name': '"/api"', 'range': [494, 494], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [497, 524], 'children': [{'type': 'Identifier', 'name': 'backend.server.v2.store.routes.router', 'range': [502, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [514, 518], 'children': [{'type': 'Literal', 'name': '"v2"', 'range': [517, 517], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [520, 522], 'children': [{'type': 'Literal', 'name': '"/api/store"', 'range': [522, 522], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [526, 553], 'children': [{'type': 'Identifier', 'name': 'backend.server.v2.library.routes.router', 'range': [531, 541], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [543, 547], 'children': [{'type': 'Literal', 'name': '"v2"', 'range': [546, 546], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [549, 551], 'children': [{'type': 'Literal', 'name': '"/api/library"', 'range': [551, 551], 'children': []}]}]}]}
2025-01-08 10:19:08,764 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:14,902 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [319, 363], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [319, 363], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [320, 362], 'children': [{'type': 'CallExpression', 'name': 'FastAPI', 'range': [321, 362], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [321, 321]}, {'type': 'Identifier', 'name': 'FastAPI', 'range': [323, 323]}]}, {'type': 'ObjectExpression', 'name': '', 'range': [324, 362], 'children': [{'type': 'Property', 'name': 'title', 'range': [326, 328], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [328, 328]}]}, {'type': 'Property', 'name': 'description', 'range': [331, 339], 'children': [{'type': 'Literal', 'name': '"This server is used to execute agents that are created by the AutoGPT system."', 'range': [333, 339]}]}, {'type': 'Property', 'name': 'summary', 'range': [342, 344], 'children': [{'type': 'Literal', 'name': '"AutoGPT Agent Server"', 'range': [344, 344]}]}, {'type': 'Property', 'name': 'version', 'range': [347, 349], 'children': [{'type': 'Literal', 'name': '"0.1"', 'range': [349, 349]}]}, {'type': 'Property', 'name': 'lifespan', 'range': [352, 354], 'children': [{'type': 'Identifier', 'name': 'lifespan_context', 'range': [354, 354]}]}, {'type': 'Property', 'name': 'docs_url', 'range': [357, 359], 'children': [{'type': 'Identifier', 'name': 'docs_url', 'range': [359, 359]}]}]}]}]}]}]}
2025-01-08 10:19:14,902 - INFO - Completed main AST analysis flow
2025-01-08 10:19:14,903 - INFO - Successfully processed chunk
2025-01-08 10:19:15,623 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'typing', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [10, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.responses', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'uvicorn', 'range': [25, 27], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'initialize_launchdarkly', 'range': [37, 38], 'children': []}, {'type': 'ImportSpecifier', 'name': 'shutdown_launchdarkly', 'range': [40, 41], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.block', 'range': [46, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.db', 'range': [53, 59], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.graph', 'range': [60, 66], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.user', 'range': [67, 73], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.service', 'range': [105, 111], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.settings', 'range': [112, 118], 'children': []}]}
2025-01-08 10:19:15,623 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:16,658 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [364, 447], 'children': [{'type': 'FunctionDecl', 'name': 'handle_internal_http_error', 'range': [364, 378], 'children': [{'type': 'Parameter', 'name': 'status_code', 'range': [367, 371], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [369, 369], 'children': []}, {'type': 'DefaultValue', 'name': '500', 'range': [371, 371], 'children': []}]}, {'type': 'Parameter', 'name': 'log_error', 'range': [373, 377], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [375, 375], 'children': []}, {'type': 'DefaultValue', 'name': 'True', 'range': [377, 377], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'handler', 'range': [381, 446], 'children': [{'type': 'Parameter', 'name': 'request', 'range': [384, 388], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.Request', 'range': [386, 388], 'children': []}]}, {'type': 'Parameter', 'name': 'exc', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'Exception', 'range': [392, 392], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [396, 407], 'children': [{'type': 'Condition', 'name': 'log_error', 'range': [397, 397], 'children': []}, {'type': 'Block', 'name': '', 'range': [399, 407], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [400, 406], 'children': [{'type': 'CallExpression', 'name': 'logger.exception', 'range': [400, 406], 'children': [{'type': 'Argument', 'name': '', 'range': [404, 405], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [404, 405], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [408, 442], 'children': [{'type': 'CallExpression', 'name': 'fastapi.responses.JSONResponse', 'range': [409, 442], 'children': [{'type': 'Argument', 'name': 'content', 'range': [416, 434], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [418, 434], 'children': [{'type': 'Property', 'name': 'message', 'range': [420, 423], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [422, 423], 'children': []}]}, {'type': 'Property', 'name': 'detail', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [428, 432], 'children': [{'type': 'Argument', 'name': 'exc', 'range': [430, 430], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'status_code', 'range': [437, 439], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [439, 439], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [445, 446], 'children': [{'type': 'Identifier', 'name': 'handler', 'range': [446, 446], 'children': []}]}]}]}
2025-01-08 10:19:16,658 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:19,551 - INFO - Step 4 result: {'type': 'Program', 'name': 'launch_darkly_context', 'range': [157, 208], 'children': [{'type': 'FunctionDecl', 'name': 'launch_darkly_context', 'range': [162, 208], 'children': [{'type': 'BlockStatement', 'range': [167, 208], 'children': [{'type': 'IfStatement', 'range': [168, 185], 'children': [{'type': 'BinaryExpression', 'operator': '!=', 'range': [169, 184], 'children': [{'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'settings', 'range': [169, 170]}, 'property': {'type': 'Identifier', 'name': 'config', 'range': [171, 172]}, 'range': [169, 172]}, 'property': {'type': 'Identifier', 'name': 'app_env', 'range': [173, 174]}, 'range': [169, 174]}, {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'backend', 'range': [176, 177]}, 'property': {'type': 'Identifier', 'name': 'util', 'range': [178, 179]}, 'range': [176, 179]}, 'property': {'type': 'Identifier', 'name': 'settings', 'range': [180, 181]}, 'range': [176, 181]}, 'property': {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [182, 183]}, 'range': [176, 183]}]}, {'type': 'BlockStatement', 'range': [186, 190], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'initialize_launchdarkly', 'range': [187, 188]}, 'arguments': [], 'range': [187, 189]}, 'range': [187, 190]}]}]}, {'type': 'TryStatement', 'range': [191, 202], 'children': [{'type': 'BlockStatement', 'range': [193, 195], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [194, 195]}, 'range': [194, 195]}]}, {'type': 'BlockStatement', 'range': [197, 202], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'shutdown_launchdarkly', 'range': [199, 200]}, 'arguments': [], 'range': [199, 201]}, 'range': [199, 202]}]}]}, {'type': 'BlockStatement', 'range': [204, 207], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [206, 207]}, 'range': [206, 207]}]}]}]}]}
2025-01-08 10:19:19,552 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:19:20,228 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [120, 154], 'children': [{'type': 'VariableDeclaration', 'name': 'settings', 'range': [120, 130], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [121, 130], 'children': [{'type': 'MemberExpression', 'name': 'backend.util.settings.Settings', 'range': [122, 128], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [122, 122], 'children': []}, {'type': 'Identifier', 'name': 'util', 'range': [124, 124], 'children': []}, {'type': 'Identifier', 'name': 'settings', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'Settings', 'range': [128, 128], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [129, 130], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [132, 139], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [133, 139], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [134, 136], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [136, 136], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [137, 139], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [138, 138], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [142, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger("autogpt_libs").setLevel', 'range': [142, 149], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [142, 142], 'children': []}, {'type': 'Identifier', 'name': 'getLogger', 'range': [144, 144], 'children': []}, {'type': 'Literal', 'name': '"autogpt_libs"', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'setLevel', 'range': [149, 149], 'children': []}]}, {'type': 'CallExpression', 'name': '()', 'range': [150, 154], 'children': [{'type': 'MemberExpression', 'name': 'logging.INFO', 'range': [151, 153], 'children': [{'type': 'Identifier', 'name': 'logging', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'INFO', 'range': [153, 153], 'children': []}]}]}]}]}]}
2025-01-08 10:19:20,229 - INFO - Completed main AST analysis flow
2025-01-08 10:19:20,229 - INFO - Successfully processed chunk
2025-01-08 10:19:27,062 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [448, 553], 'children': [{'type': 'CallExpression', 'name': 'add_exception_handler', 'range': [448, 458], 'children': [{'type': 'Literal', 'name': 'ValueError', 'range': [452, 452], 'children': []}, {'type': 'CallExpression', 'name': 'handle_internal_http_error', 'range': [454, 457], 'children': [{'type': 'Literal', 'name': '400', 'range': [456, 456], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'add_exception_handler', 'range': [460, 470], 'children': [{'type': 'Literal', 'name': 'Exception', 'range': [464, 464], 'children': []}, {'type': 'CallExpression', 'name': 'handle_internal_http_error', 'range': [466, 469], 'children': [{'type': 'Literal', 'name': '500', 'range': [468, 468], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [472, 495], 'children': [{'type': 'Identifier', 'name': 'backend.server.routers.v1.v1_router', 'range': [476, 484], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [486, 490], 'children': [{'type': 'Literal', 'name': '"v1"', 'range': [489, 489], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [492, 494], 'children': [{'type': 'Literal', 'name': '"/api"', 'range': [494, 494], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [497, 524], 'children': [{'type': 'Identifier', 'name': 'backend.server.v2.store.routes.router', 'range': [502, 512], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [514, 518], 'children': [{'type': 'Literal', 'name': '"v2"', 'range': [517, 517], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [520, 522], 'children': [{'type': 'Literal', 'name': '"/api/store"', 'range': [522, 522], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [526, 553], 'children': [{'type': 'Identifier', 'name': 'backend.server.v2.library.routes.router', 'range': [531, 541], 'children': []}, {'type': 'KeywordArgument', 'name': 'tags', 'range': [543, 547], 'children': [{'type': 'Literal', 'name': '"v2"', 'range': [546, 546], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'prefix', 'range': [549, 551], 'children': [{'type': 'Literal', 'name': '"/api/library"', 'range': [551, 551], 'children': []}]}]}]}]}
2025-01-08 10:19:27,063 - INFO - Completed main AST analysis flow
2025-01-08 10:19:27,063 - INFO - Successfully processed chunk
2025-01-08 10:19:30,068 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 119], 'children': [{'type': 'ImportDeclaration', 'name': 'contextlib', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'logging', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'typing', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [10, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.responses', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'starlette.middleware.cors', 'range': [18, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'uvicorn', 'range': [25, 27], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.feature_flag.client', 'range': [28, 44], 'children': [{'type': 'ImportSpecifier', 'name': 'initialize_launchdarkly', 'range': [37, 38], 'children': []}, {'type': 'ImportSpecifier', 'name': 'shutdown_launchdarkly', 'range': [40, 41], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data.block', 'range': [46, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.db', 'range': [53, 59], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.graph', 'range': [60, 66], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.data.user', 'range': [67, 73], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.routers.v1', 'range': [74, 82], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.library.routes', 'range': [83, 93], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [94, 104], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.service', 'range': [105, 111], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.util.settings', 'range': [112, 118], 'children': []}]}
2025-01-08 10:19:30,069 - INFO - Completed main AST analysis flow
2025-01-08 10:19:30,069 - INFO - Successfully processed chunk
2025-01-08 10:19:31,116 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [590, 960], 'children': [{'type': 'ClassDeclaration', 'name': 'AgentServer', 'range': [590, 703], 'children': [{'type': 'MethodDeclaration', 'name': 'run', 'range': [603, 703], 'children': [{'type': 'AssignmentExpression', 'name': 'server_app', 'range': [610, 662], 'children': [{'type': 'CallExpression', 'name': 'CORSMiddleware', 'range': [612, 662], 'children': [{'type': 'Argument', 'name': 'app', 'range': [621, 623], 'children': []}, {'type': 'Argument', 'name': 'allow_origins', 'range': [626, 632], 'children': []}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [635, 637], 'children': []}, {'type': 'Argument', 'name': 'allow_methods', 'range': [640, 644], 'children': []}, {'type': 'Argument', 'name': 'allow_headers', 'range': [651, 655], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run', 'range': [664, 702], 'children': [{'type': 'Argument', 'name': 'server_app', 'range': [669, 669], 'children': []}, {'type': 'Argument', 'name': 'host', 'range': [672, 684], 'children': []}, {'type': 'Argument', 'name': 'port', 'range': [687, 699], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_execute_graph', 'range': [705, 754], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [737, 753], 'children': [{'type': 'CallExpression', 'name': 'execute_graph', 'range': [738, 753], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [748, 748], 'children': []}, {'type': 'Argument', 'name': 'node_input', 'range': [750, 750], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_create_graph', 'range': [756, 801], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [785, 800], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [786, 800], 'children': [{'type': 'CallExpression', 'name': 'create_new_graph', 'range': [787, 800], 'children': [{'type': 'Argument', 'name': 'create_graph', 'range': [797, 797], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [799, 799], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_status', 'range': [803, 858], 'children': [{'type': 'VariableDeclaration', 'name': 'execution', 'range': [820, 840], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [822, 840], 'children': [{'type': 'CallExpression', 'name': 'get_execution', 'range': [823, 840], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [834, 834], 'children': []}, {'type': 'Argument', 'name': 'execution_id', 'range': [838, 838], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [842, 853], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [843, 844], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [844, 844], 'children': []}]}, {'type': 'ThrowStatement', 'name': '', 'range': [847, 852], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [848, 852], 'children': [{'type': 'Literal', 'name': '', 'range': [850, 851], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [854, 858], 'children': [{'type': 'MemberExpression', 'name': 'status', 'range': [855, 858], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [855, 855], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_get_graph_run_node_execution_results', 'range': [860, 903], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [883, 902], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [884, 902], 'children': [{'type': 'CallExpression', 'name': 'get_graph_run_node_execution_results', 'range': [885, 902], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [896, 896], 'children': []}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [898, 898], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [900, 900], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'test_delete_graph', 'range': [905, 938], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [922, 937], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [923, 937], 'children': [{'type': 'CallExpression', 'name': 'delete_graph', 'range': [924, 937], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [934, 934], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [936, 936], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'set_test_dependency_overrides', 'range': [940, 960], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [951, 959], 'children': [{'type': 'CallExpression', 'name': 'update', 'range': [955, 959], 'children': [{'type': 'Argument', 'name': 'overrides', 'range': [957, 957], 'children': []}]}]}]}]}
2025-01-08 10:19:31,117 - INFO - Starting Step 4: AST normalization
2025-01-08 10:19:38,237 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [364, 447], 'children': [{'type': 'FunctionDecl', 'name': 'handle_internal_http_error', 'range': [364, 378], 'children': [{'type': 'Parameter', 'name': 'status_code', 'range': [367, 371], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [369, 369], 'children': []}, {'type': 'DefaultValue', 'name': '500', 'range': [371, 371], 'children': []}]}, {'type': 'Parameter', 'name': 'log_error', 'range': [373, 377], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [375, 375], 'children': []}, {'type': 'DefaultValue', 'name': 'True', 'range': [377, 377], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'handler', 'range': [381, 446], 'children': [{'type': 'Parameter', 'name': 'request', 'range': [384, 388], 'children': [{'type': 'TypeAnnotation', 'name': 'fastapi.Request', 'range': [386, 388], 'children': []}]}, {'type': 'Parameter', 'name': 'exc', 'range': [390, 392], 'children': [{'type': 'TypeAnnotation', 'name': 'Exception', 'range': [392, 392], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [396, 407], 'children': [{'type': 'Condition', 'name': 'log_error', 'range': [397, 397], 'children': []}, {'type': 'Block', 'name': '', 'range': [399, 407], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [400, 406], 'children': [{'type': 'CallExpression', 'name': 'logger.exception', 'range': [400, 406], 'children': [{'type': 'Argument', 'name': '', 'range': [404, 405], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [404, 405], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [408, 442], 'children': [{'type': 'CallExpression', 'name': 'fastapi.responses.JSONResponse', 'range': [409, 442], 'children': [{'type': 'Argument', 'name': 'content', 'range': [416, 434], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [418, 434], 'children': [{'type': 'Property', 'name': 'message', 'range': [420, 423], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [422, 423], 'children': []}]}, {'type': 'Property', 'name': 'detail', 'range': [426, 432], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [428, 432], 'children': [{'type': 'Argument', 'name': 'exc', 'range': [430, 430], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'status_code', 'range': [437, 439], 'children': [{'type': 'Identifier', 'name': 'status_code', 'range': [439, 439], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [445, 446], 'children': [{'type': 'Identifier', 'name': 'handler', 'range': [446, 446], 'children': []}]}]}]}
2025-01-08 10:19:38,238 - INFO - Completed main AST analysis flow
2025-01-08 10:19:38,238 - INFO - Successfully processed chunk
2025-01-08 10:19:38,304 - INFO - Step 5 result: {'type': 'Program', 'name': 'launch_darkly_context', 'range': [157, 208], 'children': [{'type': 'FunctionDecl', 'name': 'launch_darkly_context', 'range': [162, 208], 'children': [{'type': 'BlockStatement', 'range': [167, 208], 'children': [{'type': 'IfStatement', 'range': [168, 185], 'children': [{'type': 'BinaryExpression', 'operator': '!=', 'range': [169, 184], 'children': [{'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'settings', 'range': [169, 170]}, 'property': {'type': 'Identifier', 'name': 'config', 'range': [171, 172]}, 'range': [169, 172]}, 'property': {'type': 'Identifier', 'name': 'app_env', 'range': [173, 174]}, 'range': [169, 174]}, {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'backend', 'range': [176, 177]}, 'property': {'type': 'Identifier', 'name': 'util', 'range': [178, 179]}, 'range': [176, 179]}, 'property': {'type': 'Identifier', 'name': 'settings', 'range': [180, 181]}, 'range': [176, 181]}, 'property': {'type': 'Identifier', 'name': 'AppEnvironment', 'range': [182, 183]}, 'range': [176, 183]}]}, {'type': 'BlockStatement', 'range': [186, 190], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'initialize_launchdarkly', 'range': [187, 188]}, 'arguments': [], 'range': [187, 189]}, 'range': [187, 190]}]}]}, {'type': 'TryStatement', 'range': [191, 202], 'children': [{'type': 'BlockStatement', 'range': [193, 195], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [194, 195]}, 'range': [194, 195]}]}, {'type': 'BlockStatement', 'range': [197, 202], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'CallExpression', 'callee': {'type': 'Identifier', 'name': 'shutdown_launchdarkly', 'range': [199, 200]}, 'arguments': [], 'range': [199, 201]}, 'range': [199, 202]}]}]}, {'type': 'BlockStatement', 'range': [204, 207], 'children': [{'type': 'ExpressionStatement', 'expression': {'type': 'YieldExpression', 'argument': None, 'range': [206, 207]}, 'range': [206, 207]}]}]}]}]}
2025-01-08 10:19:38,304 - INFO - Completed main AST analysis flow
2025-01-08 10:19:38,305 - INFO - Successfully processed chunk
2025-01-08 10:20:08,677 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [590, 960], 'children': [{'type': 'ClassDecl', 'name': 'AgentServer', 'range': [590, 703], 'children': [{'type': 'MethodDecl', 'name': 'run', 'range': [603, 703], 'children': [{'type': 'AssignmentExpression', 'name': 'server_app', 'range': [610, 662], 'children': [{'type': 'CallExpression', 'name': 'CORSMiddleware', 'range': [612, 662], 'children': [{'type': 'Argument', 'name': 'app', 'range': [621, 623], 'children': []}, {'type': 'Argument', 'name': 'allow_origins', 'range': [626, 632], 'children': []}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [635, 637], 'children': []}, {'type': 'Argument', 'name': 'allow_methods', 'range': [640, 644], 'children': []}, {'type': 'Argument', 'name': 'allow_headers', 'range': [651, 655], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run', 'range': [664, 702], 'children': [{'type': 'Argument', 'name': 'server_app', 'range': [669, 669], 'children': []}, {'type': 'Argument', 'name': 'host', 'range': [672, 684], 'children': []}, {'type': 'Argument', 'name': 'port', 'range': [687, 699], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_execute_graph', 'range': [705, 754], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [737, 753], 'children': [{'type': 'CallExpression', 'name': 'execute_graph', 'range': [738, 753], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [748, 748], 'children': []}, {'type': 'Argument', 'name': 'node_input', 'range': [750, 750], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_create_graph', 'range': [756, 801], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [785, 800], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [786, 800], 'children': [{'type': 'CallExpression', 'name': 'create_new_graph', 'range': [787, 800], 'children': [{'type': 'Argument', 'name': 'create_graph', 'range': [797, 797], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [799, 799], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_get_graph_run_status', 'range': [803, 858], 'children': [{'type': 'VariableDecl', 'name': 'execution', 'range': [820, 840], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [822, 840], 'children': [{'type': 'CallExpression', 'name': 'get_execution', 'range': [823, 840], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [834, 834], 'children': []}, {'type': 'Argument', 'name': 'execution_id', 'range': [838, 838], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [842, 853], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [843, 844], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [844, 844], 'children': []}]}, {'type': 'ThrowStatement', 'name': '', 'range': [847, 852], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [848, 852], 'children': [{'type': 'Literal', 'name': '', 'range': [850, 851], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [854, 858], 'children': [{'type': 'MemberExpression', 'name': 'status', 'range': [855, 858], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [855, 855], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_get_graph_run_node_execution_results', 'range': [860, 903], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [883, 902], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [884, 902], 'children': [{'type': 'CallExpression', 'name': 'get_graph_run_node_execution_results', 'range': [885, 902], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [896, 896], 'children': []}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [898, 898], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [900, 900], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_delete_graph', 'range': [905, 938], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [922, 937], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [923, 937], 'children': [{'type': 'CallExpression', 'name': 'delete_graph', 'range': [924, 937], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [934, 934], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [936, 936], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'set_test_dependency_overrides', 'range': [940, 960], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [951, 959], 'children': [{'type': 'CallExpression', 'name': 'update', 'range': [955, 959], 'children': [{'type': 'Argument', 'name': 'overrides', 'range': [957, 957], 'children': []}]}]}]}]}
2025-01-08 10:20:08,677 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:20:44,872 - INFO - Step 5 result: {'type': 'Program', 'name': 'CombinedProgram', 'range': [590, 960], 'children': [{'type': 'ClassDecl', 'name': 'AgentServer', 'range': [590, 703], 'children': [{'type': 'MethodDecl', 'name': 'run', 'range': [603, 703], 'children': [{'type': 'AssignmentExpression', 'name': 'server_app', 'range': [610, 662], 'children': [{'type': 'CallExpression', 'name': 'CORSMiddleware', 'range': [612, 662], 'children': [{'type': 'Argument', 'name': 'app', 'range': [621, 623], 'children': []}, {'type': 'Argument', 'name': 'allow_origins', 'range': [626, 632], 'children': []}, {'type': 'Argument', 'name': 'allow_credentials', 'range': [635, 637], 'children': []}, {'type': 'Argument', 'name': 'allow_methods', 'range': [640, 644], 'children': []}, {'type': 'Argument', 'name': 'allow_headers', 'range': [651, 655], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run', 'range': [664, 702], 'children': [{'type': 'Argument', 'name': 'server_app', 'range': [669, 669], 'children': []}, {'type': 'Argument', 'name': 'host', 'range': [672, 684], 'children': []}, {'type': 'Argument', 'name': 'port', 'range': [687, 699], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_execute_graph', 'range': [705, 754], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [737, 753], 'children': [{'type': 'CallExpression', 'name': 'execute_graph', 'range': [738, 753], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [748, 748], 'children': []}, {'type': 'Argument', 'name': 'node_input', 'range': [750, 750], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_create_graph', 'range': [756, 801], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [785, 800], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [786, 800], 'children': [{'type': 'CallExpression', 'name': 'create_new_graph', 'range': [787, 800], 'children': [{'type': 'Argument', 'name': 'create_graph', 'range': [797, 797], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [799, 799], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_get_graph_run_status', 'range': [803, 858], 'children': [{'type': 'VariableDecl', 'name': 'execution', 'range': [820, 840], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [822, 840], 'children': [{'type': 'CallExpression', 'name': 'get_execution', 'range': [823, 840], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [834, 834], 'children': []}, {'type': 'Argument', 'name': 'execution_id', 'range': [838, 838], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [842, 853], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [843, 844], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [844, 844], 'children': []}]}, {'type': 'ThrowStatement', 'name': '', 'range': [847, 852], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [848, 852], 'children': [{'type': 'Literal', 'name': '', 'range': [850, 851], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [854, 858], 'children': [{'type': 'MemberExpression', 'name': 'status', 'range': [855, 858], 'children': [{'type': 'Identifier', 'name': 'execution', 'range': [855, 855], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_get_graph_run_node_execution_results', 'range': [860, 903], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [883, 902], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [884, 902], 'children': [{'type': 'CallExpression', 'name': 'get_graph_run_node_execution_results', 'range': [885, 902], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [896, 896], 'children': []}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [898, 898], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [900, 900], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'test_delete_graph', 'range': [905, 938], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [922, 937], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [923, 937], 'children': [{'type': 'CallExpression', 'name': 'delete_graph', 'range': [924, 937], 'children': [{'type': 'Argument', 'name': 'graph_id', 'range': [934, 934], 'children': []}, {'type': 'Argument', 'name': 'user_id', 'range': [936, 936], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'set_test_dependency_overrides', 'range': [940, 960], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [951, 959], 'children': [{'type': 'CallExpression', 'name': 'update', 'range': [955, 959], 'children': [{'type': 'Argument', 'name': 'overrides', 'range': [957, 957], 'children': []}]}]}]}]}
2025-01-08 10:20:44,872 - INFO - Completed main AST analysis flow
2025-01-08 10:20:44,873 - INFO - Successfully processed chunk
2025-01-08 10:20:44,911 - INFO - Starting code generation from AST
2025-01-08 10:21:05,666 - INFO - Successfully generated code from AST
2025-01-08 10:21:05,667 - INFO - Starting static code similarity comparison
2025-01-08 10:21:05,686 - INFO - Static similarity result: {'final_score': 99.58, 'length_similarity': 99.59, 'token_similarity': 99.45, 'structure_similarity': 99.21, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
