2025-01-08 09:16:34,852 - INFO - Processing sample 2
2025-01-08 09:16:34,852 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:16:41,814 - INFO - Successfully split code into 2 top-level declarations
2025-01-08 09:16:41,815 - INFO - Processing chunk #0 (size=280 chars, start_index=0)
2025-01-08 09:16:41,816 - INFO - Processing chunk #1 (size=1348 chars, start_index=57)
2025-01-08 09:16:41,816 - INFO - Processing chunk with 280 chars starting at index 0
2025-01-08 09:16:41,816 - INFO - Processing chunk with 1348 chars starting at index 57
2025-01-08 09:16:41,816 - INFO - Starting main AST analysis flow
2025-01-08 09:16:41,816 - INFO - Starting main AST analysis flow
2025-01-08 09:16:41,817 - INFO - Tokenized code into 228 tokens
2025-01-08 09:16:41,817 - INFO - Tokenized code into 57 tokens
2025-01-08 09:16:41,817 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:16:41,818 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:16:49,580 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': []}]}
2025-01-08 09:16:49,580 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:16:54,326 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [57, 284], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaEmbeddingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 89], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 80], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [82, 88], 'children': []}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [90, 107], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [110, 127], 'children': [{'type': 'VariableDeclaration', 'name': 'embeddings', 'range': [117, 126], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [129, 177], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [179, 283], 'children': []}]}
2025-01-08 09:16:54,326 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:17:20,265 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.jina._auth', 'range': [0, 7], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [8, 20], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [12, 19], 'children': [{'type': 'ImportSpecifier', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'ImportSpecifier', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [22, 27], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [28, 36], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [30, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [37, 42], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [43, 45], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': 'backend.util.request', 'range': [46, 51], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [52, 54], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:17:20,265 - INFO - Starting Step 3: AST simplification
2025-01-08 09:17:50,005 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.jina._auth', 'range': [0, 7], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [8, 20], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [12, 19], 'children': [{'type': 'ImportSpecifier', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'ImportSpecifier', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [22, 27], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [28, 36], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [30, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [37, 42], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [43, 45], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': 'backend.util.request', 'range': [46, 51], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [52, 54], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:17:50,005 - INFO - Starting Step 4: AST normalization
2025-01-08 09:18:20,563 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [57, 284], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaEmbeddingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 89], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 80], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [82, 88], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [84, 84], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [85, 85], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [86, 88], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [90, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [92, 92], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [93, 93], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [94, 107], 'children': [{'type': 'Argument', 'name': 'description', 'range': [97, 99], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [110, 127], 'children': [{'type': 'VariableDeclaration', 'name': 'embeddings', 'range': [117, 126], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [120, 120], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 126], 'children': [{'type': 'Argument', 'name': 'description', 'range': [123, 125], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [129, 177], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [132, 132], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [134, 177], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [136, 176], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [136, 176], 'children': [{'type': 'Argument', 'name': '', 'range': [138, 138], 'children': []}, {'type': 'MemberExpression', 'name': '__init__', 'range': [140, 176], 'children': [{'type': 'Argument', 'name': 'id', 'range': [143, 145], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [148, 150], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [153, 159], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [162, 167], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [169, 174], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [179, 283], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [183, 183], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [185, 187], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [191, 193], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [197, 197], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [199, 283], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [205, 207], 'children': [{'type': 'Assignment', 'name': '=', 'range': [206, 206], 'children': [{'type': 'Literal', 'name': '"https://api.jina.ai/v1/embeddings"', 'range': [207, 207], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [209, 224], 'children': [{'type': 'Assignment', 'name': '=', 'range': [210, 210], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [211, 224], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [213, 215], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [218, 221], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [226, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [227, 227], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [228, 240], 'children': [{'type': 'Property', 'name': '"input"', 'range': [229, 234], 'children': []}, {'type': 'Property', 'name': '"model"', 'range': [235, 239], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [242, 257], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [244, 257], 'children': [{'type': 'Argument', 'name': 'url', 'range': [248, 248], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [250, 252], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [254, 256], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'embeddings', 'range': [259, 277], 'children': [{'type': 'Assignment', 'name': '=', 'range': [260, 260], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [261, 277], 'children': [{'type': 'ForStatement', 'name': '', 'range': [262, 277], 'children': [{'type': 'VariableDeclaration', 'name': 'e', 'range': [262, 262], 'children': []}, {'type': 'MemberExpression', 'name': 'response.json', 'range': [269, 273], 'children': []}, {'type': 'MemberExpression', 'name': '"data"', 'range': [274, 276], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [279, 282], 'children': [{'type': 'Literal', 'name': '"embeddings"', 'range': [280, 280], 'children': []}, {'type': 'Identifier', 'name': 'embeddings', 'range': [282, 282], 'children': []}]}]}]}]}
2025-01-08 09:18:20,563 - INFO - Starting Step 3: AST simplification
2025-01-08 09:18:22,940 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.jina._auth', 'range': [0, 7], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [8, 20], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [12, 19], 'children': [{'type': 'ImportSpecifier', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'ImportSpecifier', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [22, 27], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [28, 36], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [30, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [37, 42], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [43, 45], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': 'backend.util.request', 'range': [46, 51], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [52, 54], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:18:22,941 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:18:53,482 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': 'backend.blocks.jina._auth', 'range': [0, 7], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [8, 20], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [12, 19], 'children': [{'type': 'ImportSpecifier', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'ImportSpecifier', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': 'backend.data.block', 'range': [22, 27], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [28, 36], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'NamedImports', 'name': '', 'range': [30, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': 'backend.data.model', 'range': [37, 42], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [43, 45], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': 'backend.util.request', 'range': [46, 51], 'children': []}, {'type': 'ImportClause', 'name': '', 'range': [52, 54], 'children': [{'type': 'ImportedDefaultBinding', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:18:53,483 - INFO - Completed main AST analysis flow
2025-01-08 09:18:53,484 - INFO - Successfully processed chunk
2025-01-08 09:19:41,783 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [57, 284], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaEmbeddingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 89], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 80], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [82, 88], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [84, 84], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [85, 85], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [86, 88], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [90, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [92, 92], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [93, 93], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [94, 107], 'children': [{'type': 'Argument', 'name': 'description', 'range': [97, 99], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [110, 127], 'children': [{'type': 'VariableDeclaration', 'name': 'embeddings', 'range': [117, 126], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [120, 120], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 126], 'children': [{'type': 'Argument', 'name': 'description', 'range': [123, 125], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [129, 177], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [132, 132], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [134, 177], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [136, 176], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [136, 176], 'children': [{'type': 'Argument', 'name': '', 'range': [138, 138], 'children': []}, {'type': 'MemberExpression', 'name': '__init__', 'range': [140, 176], 'children': [{'type': 'Argument', 'name': 'id', 'range': [143, 145], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [148, 150], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [153, 159], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [162, 167], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [169, 174], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [179, 283], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [183, 183], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [185, 187], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [191, 193], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [197, 197], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [199, 283], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [205, 207], 'children': [{'type': 'Assignment', 'name': '=', 'range': [206, 206], 'children': [{'type': 'Literal', 'name': '"https://api.jina.ai/v1/embeddings"', 'range': [207, 207], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [209, 224], 'children': [{'type': 'Assignment', 'name': '=', 'range': [210, 210], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [211, 224], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [213, 215], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [218, 221], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [226, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [227, 227], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [228, 240], 'children': [{'type': 'Property', 'name': '"input"', 'range': [229, 234], 'children': []}, {'type': 'Property', 'name': '"model"', 'range': [235, 239], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [242, 257], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [244, 257], 'children': [{'type': 'Argument', 'name': 'url', 'range': [248, 248], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [250, 252], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [254, 256], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'embeddings', 'range': [259, 277], 'children': [{'type': 'Assignment', 'name': '=', 'range': [260, 260], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [261, 277], 'children': [{'type': 'ForStatement', 'name': '', 'range': [262, 277], 'children': [{'type': 'VariableDeclaration', 'name': 'e', 'range': [262, 262], 'children': []}, {'type': 'MemberExpression', 'name': 'response.json', 'range': [269, 273], 'children': []}, {'type': 'MemberExpression', 'name': '"data"', 'range': [274, 276], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [279, 282], 'children': [{'type': 'Literal', 'name': '"embeddings"', 'range': [280, 280], 'children': []}, {'type': 'Identifier', 'name': 'embeddings', 'range': [282, 282], 'children': []}]}]}]}]}
2025-01-08 09:19:41,783 - INFO - Starting Step 4: AST normalization
2025-01-08 09:21:03,894 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [57, 284], 'children': [{'type': 'ClassDecl', 'name': 'JinaEmbeddingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [64, 89], 'children': [{'type': 'VariableDecl', 'name': 'texts', 'range': [71, 80], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [82, 88], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [84, 84], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [85, 85], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [86, 88], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [90, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [92, 92], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [93, 93], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [94, 107], 'children': [{'type': 'Argument', 'name': 'description', 'range': [97, 99], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [110, 127], 'children': [{'type': 'VariableDecl', 'name': 'embeddings', 'range': [117, 126], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [120, 120], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 126], 'children': [{'type': 'Argument', 'name': 'description', 'range': [123, 125], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [129, 177], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [132, 132], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [134, 177], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [136, 176], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [136, 176], 'children': [{'type': 'Argument', 'name': '', 'range': [138, 138], 'children': []}, {'type': 'MemberExpression', 'name': '__init__', 'range': [140, 176], 'children': [{'type': 'Argument', 'name': 'id', 'range': [143, 145], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [148, 150], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [153, 159], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [162, 167], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [169, 174], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [179, 283], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [183, 183], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [185, 187], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [191, 193], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [197, 197], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [199, 283], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [205, 207], 'children': [{'type': 'Assignment', 'name': '=', 'range': [206, 206], 'children': [{'type': 'Literal', 'name': '"https://api.jina.ai/v1/embeddings"', 'range': [207, 207], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [209, 224], 'children': [{'type': 'Assignment', 'name': '=', 'range': [210, 210], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [211, 224], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [213, 215], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [218, 221], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [226, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [227, 227], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [228, 240], 'children': [{'type': 'Property', 'name': '"input"', 'range': [229, 234], 'children': []}, {'type': 'Property', 'name': '"model"', 'range': [235, 239], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [242, 257], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [244, 257], 'children': [{'type': 'Argument', 'name': 'url', 'range': [248, 248], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [250, 252], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [254, 256], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'embeddings', 'range': [259, 277], 'children': [{'type': 'Assignment', 'name': '=', 'range': [260, 260], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [261, 277], 'children': [{'type': 'ForStatement', 'name': '', 'range': [262, 277], 'children': [{'type': 'VariableDecl', 'name': 'e', 'range': [262, 262], 'children': []}, {'type': 'MemberExpression', 'name': 'response.json', 'range': [269, 273], 'children': []}, {'type': 'MemberExpression', 'name': '"data"', 'range': [274, 276], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [279, 282], 'children': [{'type': 'Literal', 'name': '"embeddings"', 'range': [280, 280], 'children': []}, {'type': 'Identifier', 'name': 'embeddings', 'range': [282, 282], 'children': []}]}]}]}]}
2025-01-08 09:21:03,895 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:22:26,209 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [57, 284], 'children': [{'type': 'ClassDecl', 'name': 'JinaEmbeddingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [64, 89], 'children': [{'type': 'VariableDecl', 'name': 'texts', 'range': [71, 80], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [82, 88], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [84, 84], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [85, 85], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [86, 88], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [90, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [92, 92], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [93, 93], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [94, 107], 'children': [{'type': 'Argument', 'name': 'description', 'range': [97, 99], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [110, 127], 'children': [{'type': 'VariableDecl', 'name': 'embeddings', 'range': [117, 126], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [120, 120], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 126], 'children': [{'type': 'Argument', 'name': 'description', 'range': [123, 125], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [129, 177], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [132, 132], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [134, 177], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [136, 176], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [136, 176], 'children': [{'type': 'Argument', 'name': '', 'range': [138, 138], 'children': []}, {'type': 'MemberExpression', 'name': '__init__', 'range': [140, 176], 'children': [{'type': 'Argument', 'name': 'id', 'range': [143, 145], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [148, 150], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [153, 159], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [162, 167], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [169, 174], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [179, 283], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [183, 183], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [185, 187], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [191, 193], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [197, 197], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [199, 283], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [205, 207], 'children': [{'type': 'Assignment', 'name': '=', 'range': [206, 206], 'children': [{'type': 'Literal', 'name': '"https://api.jina.ai/v1/embeddings"', 'range': [207, 207], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [209, 224], 'children': [{'type': 'Assignment', 'name': '=', 'range': [210, 210], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [211, 224], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [213, 215], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [218, 221], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [226, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [227, 227], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [228, 240], 'children': [{'type': 'Property', 'name': '"input"', 'range': [229, 234], 'children': []}, {'type': 'Property', 'name': '"model"', 'range': [235, 239], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [242, 257], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [244, 257], 'children': [{'type': 'Argument', 'name': 'url', 'range': [248, 248], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [250, 252], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [254, 256], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'embeddings', 'range': [259, 277], 'children': [{'type': 'Assignment', 'name': '=', 'range': [260, 260], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [261, 277], 'children': [{'type': 'ForStatement', 'name': '', 'range': [262, 277], 'children': [{'type': 'VariableDecl', 'name': 'e', 'range': [262, 262], 'children': []}, {'type': 'MemberExpression', 'name': 'response.json', 'range': [269, 273], 'children': []}, {'type': 'MemberExpression', 'name': '"data"', 'range': [274, 276], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [279, 282], 'children': [{'type': 'Literal', 'name': '"embeddings"', 'range': [280, 280], 'children': []}, {'type': 'Identifier', 'name': 'embeddings', 'range': [282, 282], 'children': []}]}]}]}]}
2025-01-08 09:22:26,209 - INFO - Completed main AST analysis flow
2025-01-08 09:22:26,210 - INFO - Successfully processed chunk
2025-01-08 09:22:26,226 - INFO - Starting code generation from AST
2025-01-08 09:22:44,215 - INFO - Successfully generated code from AST
2025-01-08 09:22:44,215 - INFO - Starting static code similarity comparison
2025-01-08 09:22:44,220 - INFO - Static similarity result: {'final_score': 91.12, 'length_similarity': 94.77, 'token_similarity': 93.02, 'structure_similarity': 76.0, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
