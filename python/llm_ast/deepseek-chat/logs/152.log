2025-01-08 10:20:50,230 - INFO - Processing sample 152
2025-01-08 10:20:50,231 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:20:54,523 - INFO - Successfully split code into 6 top-level declarations
2025-01-08 10:20:54,525 - INFO - Processing chunk #0 (size=43 chars, start_index=0)
2025-01-08 10:20:54,530 - INFO - Processing chunk with 43 chars starting at index 0
2025-01-08 10:20:54,530 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,530 - INFO - Tokenized code into 11 tokens
2025-01-08 10:20:54,530 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:54,536 - INFO - Processing chunk #1 (size=975 chars, start_index=11)
2025-01-08 10:20:54,537 - INFO - Processing chunk with 975 chars starting at index 11
2025-01-08 10:20:54,537 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,537 - INFO - Tokenized code into 130 tokens
2025-01-08 10:20:54,537 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:54,539 - INFO - Processing chunk #2 (size=2 chars, start_index=141)
2025-01-08 10:20:54,543 - INFO - Processing chunk with 2 chars starting at index 141
2025-01-08 10:20:54,543 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,543 - INFO - Tokenized code into 2 tokens
2025-01-08 10:20:54,543 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:54,548 - INFO - Processing chunk #3 (size=198 chars, start_index=143)
2025-01-08 10:20:54,549 - INFO - Processing chunk with 198 chars starting at index 143
2025-01-08 10:20:54,549 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,549 - INFO - Tokenized code into 47 tokens
2025-01-08 10:20:54,549 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:54,553 - INFO - Processing chunk #4 (size=1 chars, start_index=190)
2025-01-08 10:20:54,553 - INFO - Processing chunk with 1 chars starting at index 190
2025-01-08 10:20:54,553 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,554 - INFO - Tokenized code into 1 tokens
2025-01-08 10:20:54,554 - INFO - Processing chunk #5 (size=684 chars, start_index=191)
2025-01-08 10:20:54,555 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:54,556 - INFO - Processing chunk with 684 chars starting at index 191
2025-01-08 10:20:54,557 - INFO - Starting main AST analysis flow
2025-01-08 10:20:54,557 - INFO - Tokenized code into 146 tokens
2025-01-08 10:20:54,557 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:20:56,517 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [141, 142], 'children': []}
2025-01-08 10:20:56,517 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:20:56,583 - INFO - Step 1 result: {'type': 'Program', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': []}
2025-01-08 10:20:56,583 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:20:56,677 - INFO - Step 1 result: {'type': 'Program', 'name': 'run_command', 'range': [143, 189], 'children': []}
2025-01-08 10:20:56,678 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:20:56,902 - INFO - Step 1 result: {'error': "Insufficient data provided. The token list contains only a single newline character, which does not constitute a top-level declaration in any known programming language, including 'cangjie'. Please provide a more comprehensive token list for analysis."}
2025-01-08 10:20:56,902 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:20:58,088 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 10], 'children': [{'type': 'ImportDeclaration', 'name': 'subprocess', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sys', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'time', 'range': [6, 8], 'children': []}]}
2025-01-08 10:20:58,088 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:20:58,287 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [141, 142], 'children': []}
2025-01-08 10:20:58,287 - INFO - Starting Step 3: AST simplification
2025-01-08 10:20:58,800 - INFO - Step 2 result: {'error': "Insufficient data provided. The token list contains only a single newline character, which does not constitute a top-level declaration in any known programming language, including 'cangjie'. Please provide a more comprehensive token list for analysis."}
2025-01-08 10:20:58,800 - INFO - Starting Step 3: AST simplification
2025-01-08 10:20:59,624 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [141, 142], 'children': []}
2025-01-08 10:20:59,624 - INFO - Starting Step 4: AST normalization
2025-01-08 10:20:59,955 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [191, 336], 'children': [{'type': 'FunctionDeclaration', 'name': 'test', 'range': [191, 233], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [235, 263], 'children': []}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [270, 279], 'children': []}, {'type': 'FunctionCall', 'name': 'subprocess.run', 'range': [287, 308], 'children': []}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [311, 324], 'children': []}, {'type': 'FunctionCall', 'name': 'sys.exit', 'range': [327, 335], 'children': []}]}
2025-01-08 10:20:59,956 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:21:00,800 - INFO - Step 3 result: {'error': "Insufficient data provided. The token list contains only a single newline character, which does not constitute a top-level declaration in any known programming language, including 'cangjie'. Please provide a more comprehensive token list for analysis."}
2025-01-08 10:21:00,800 - INFO - Starting Step 4: AST normalization
2025-01-08 10:21:01,228 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [141, 142], 'children': []}
2025-01-08 10:21:01,229 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:21:02,716 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'subprocess', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'subprocess', 'range': [0, 2], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'sys', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'sys', 'range': [3, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'time', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'time', 'range': [6, 8], 'children': []}]}]}
2025-01-08 10:21:02,716 - INFO - Starting Step 3: AST simplification
2025-01-08 10:21:02,779 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [141, 142], 'children': []}
2025-01-08 10:21:02,779 - INFO - Completed main AST analysis flow
2025-01-08 10:21:02,779 - INFO - Successfully processed chunk
2025-01-08 10:21:03,882 - INFO - Step 4 result: {'type': 'Program', 'name': 'Root', 'range': [0, 1], 'children': [{'type': 'Error', 'name': 'InsufficientDataError', 'range': [0, 1], 'children': [], 'message': "Insufficient data provided. The token list contains only a single newline character, which does not constitute a top-level declaration in any known programming language, including 'cangjie'. Please provide a more comprehensive token list for analysis."}]}
2025-01-08 10:21:03,882 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:21:05,597 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'subprocess', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sys', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'time', 'range': [6, 8], 'children': []}]}
2025-01-08 10:21:05,597 - INFO - Starting Step 4: AST normalization
2025-01-08 10:21:07,053 - INFO - Step 5 result: {'type': 'Program', 'name': 'Root', 'range': [0, 1], 'children': [{'type': 'Error', 'name': 'InsufficientDataError', 'range': [0, 1], 'children': [], 'message': "Insufficient data provided. The token list contains only a single newline character, which does not constitute a top-level declaration in any known programming language, including 'cangjie'. Please provide a more comprehensive token list for analysis."}]}
2025-01-08 10:21:07,053 - INFO - Completed main AST analysis flow
2025-01-08 10:21:07,053 - INFO - Successfully processed chunk
2025-01-08 10:21:08,491 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'subprocess', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sys', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'time', 'range': [6, 8], 'children': []}]}
2025-01-08 10:21:08,491 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:21:12,095 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 8], 'children': [{'type': 'ImportDeclaration', 'name': 'subprocess', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'sys', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': 'time', 'range': [6, 8], 'children': []}]}]}
2025-01-08 10:21:12,095 - INFO - Completed main AST analysis flow
2025-01-08 10:21:12,095 - INFO - Successfully processed chunk
2025-01-08 10:21:12,206 - INFO - Step 2 result: {'type': 'Program', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'FunctionDeclaration', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [145, 151], 'children': [{'type': 'Parameter', 'name': 'command', 'range': [146, 146], 'children': []}, {'type': 'Parameter', 'name': 'check', 'range': [148, 150], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [152, 189], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [154, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [156, 167], 'children': [{'type': 'ExpressionStatement', 'name': 'subprocess.run', 'range': [157, 166], 'children': [{'type': 'CallExpression', 'name': 'run', 'range': [159, 166], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [160, 166], 'children': [{'type': 'Argument', 'name': 'command', 'range': [161, 161], 'children': []}, {'type': 'Argument', 'name': 'check', 'range': [163, 165], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'catch', 'range': [168, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [175, 188], 'children': [{'type': 'ExpressionStatement', 'name': 'print', 'range': [176, 180], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [177, 180], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [178, 180], 'children': [{'type': 'Argument', 'name': 'f"Command failed: {e}"', 'range': [179, 179], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'sys.exit', 'range': [182, 187], 'children': [{'type': 'CallExpression', 'name': 'exit', 'range': [184, 187], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [185, 187], 'children': [{'type': 'Argument', 'name': '1', 'range': [186, 186], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:21:12,206 - INFO - Starting Step 3: AST simplification
2025-01-08 10:21:28,691 - INFO - Step 3 result: {'type': 'Program', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'FunctionDeclaration', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [145, 151], 'children': [{'type': 'Parameter', 'name': 'command', 'range': [146, 146], 'children': []}, {'type': 'Parameter', 'name': 'check', 'range': [148, 150], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [152, 189], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [154, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [156, 167], 'children': [{'type': 'ExpressionStatement', 'name': 'subprocess.run', 'range': [157, 166], 'children': [{'type': 'CallExpression', 'name': 'run', 'range': [159, 166], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [160, 166], 'children': [{'type': 'Argument', 'name': 'command', 'range': [161, 161], 'children': []}, {'type': 'Argument', 'name': 'check', 'range': [163, 165], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'catch', 'range': [168, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [175, 188], 'children': [{'type': 'ExpressionStatement', 'name': 'print', 'range': [176, 180], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [177, 180], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [178, 180], 'children': [{'type': 'Argument', 'name': 'f"Command failed: {e}"', 'range': [179, 179], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'sys.exit', 'range': [182, 187], 'children': [{'type': 'CallExpression', 'name': 'exit', 'range': [184, 187], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [185, 187], 'children': [{'type': 'Argument', 'name': '1', 'range': [186, 186], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:21:28,691 - INFO - Starting Step 4: AST normalization
2025-01-08 10:21:34,252 - INFO - Step 2 result: {'type': 'Program', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'FunctionDef', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'Parameters', 'name': 'parameters', 'range': [13, 21], 'children': [{'type': 'Parameter', 'name': 'max_retries', 'range': [14, 16], 'children': []}, {'type': 'Parameter', 'name': 'delay', 'range': [18, 20], 'children': []}]}, {'type': 'Block', 'name': 'body', 'range': [23, 140], 'children': [{'type': 'ForLoop', 'name': 'for_loop', 'range': [24, 113], 'children': [{'type': 'Iteration', 'name': 'iteration', 'range': [25, 30], 'children': [{'type': 'Range', 'name': 'range', 'range': [27, 30], 'children': [{'type': 'Variable', 'name': 'max_retries', 'range': [29, 29], 'children': []}]}]}, {'type': 'Block', 'name': 'body', 'range': [32, 113], 'children': [{'type': 'TryBlock', 'name': 'try_block', 'range': [33, 113], 'children': [{'type': 'Block', 'name': 'body', 'range': [35, 113], 'children': [{'type': 'Assignment', 'name': 'assignment', 'range': [36, 96], 'children': [{'type': 'Variable', 'name': 'result', 'range': [36, 36], 'children': []}, {'type': 'FunctionCall', 'name': 'subprocess.run', 'range': [38, 96], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [41, 96], 'children': [{'type': 'List', 'name': 'command', 'range': [43, 78], 'children': [{'type': 'StringLiteral', 'name': 'docker', 'range': [45, 45], 'children': []}, {'type': 'StringLiteral', 'name': 'compose', 'range': [48, 48], 'children': []}, {'type': 'StringLiteral', 'name': '-f', 'range': [51, 51], 'children': []}, {'type': 'StringLiteral', 'name': 'docker-compose.test.yaml', 'range': [54, 54], 'children': []}, {'type': 'StringLiteral', 'name': 'exec', 'range': [57, 57], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres-test', 'range': [60, 60], 'children': []}, {'type': 'StringLiteral', 'name': 'pg_isready', 'range': [63, 63], 'children': []}, {'type': 'StringLiteral', 'name': '-U', 'range': [66, 66], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres', 'range': [69, 69], 'children': []}, {'type': 'StringLiteral', 'name': '-d', 'range': [72, 72], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres', 'range': [75, 75], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'check', 'range': [81, 83], 'children': []}, {'type': 'KeywordArgument', 'name': 'capture_output', 'range': [86, 88], 'children': []}, {'type': 'KeywordArgument', 'name': 'text', 'range': [91, 93], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if_statement', 'range': [98, 113], 'children': [{'type': 'Condition', 'name': 'condition', 'range': [99, 104], 'children': [{'type': 'InExpression', 'name': 'in_expression', 'range': [100, 104], 'children': [{'type': 'StringLiteral', 'name': 'accepting connections', 'range': [99, 99], 'children': []}, {'type': 'AttributeAccess', 'name': 'stdout', 'range': [103, 104], 'children': [{'type': 'Variable', 'name': 'result', 'range': [101, 101], 'children': []}]}]}]}, {'type': 'Block', 'name': 'body', 'range': [105, 113], 'children': [{'type': 'FunctionCall', 'name': 'print', 'range': [106, 109], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [107, 109], 'children': [{'type': 'StringLiteral', 'name': 'PostgreSQL is ready.', 'range': [108, 108], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [111, 113], 'children': [{'type': 'BooleanLiteral', 'name': 'True', 'range': [112, 112], 'children': []}]}]}]}]}, {'type': 'ExceptBlock', 'name': 'except_block', 'range': [114, 139], 'children': [{'type': 'Exception', 'name': 'CalledProcessError', 'range': [115, 117], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [119, 139], 'children': [{'type': 'FunctionCall', 'name': 'print', 'range': [120, 124], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [121, 124], 'children': [{'type': 'FormattedStringLiteral', 'name': 'f_string', 'range': [122, 123], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'time.sleep', 'range': [126, 131], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [129, 131], 'children': [{'type': 'Variable', 'name': 'delay', 'range': [130, 130], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'print', 'range': [133, 136], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [134, 136], 'children': [{'type': 'StringLiteral', 'name': 'Failed to connect to PostgreSQL.', 'range': [135, 135], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [138, 139], 'children': [{'type': 'BooleanLiteral', 'name': 'False', 'range': [139, 139], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:21:34,252 - INFO - Starting Step 3: AST simplification
2025-01-08 10:21:34,307 - INFO - Step 2 result: {'nodes': [{'type': 'FunctionDeclaration', 'name': 'test', 'range': [191, 233], 'children': [{'type': 'Comment', 'name': '# Start PostgreSQL with Docker Compose', 'range': [197, 203], 'children': []}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [204, 232], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [205, 232], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [207, 230], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [209, 209], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [212, 212], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [215, 215], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [218, 218], 'children': []}, {'type': 'StringLiteral', 'name': '"up"', 'range': [221, 221], 'children': []}, {'type': 'StringLiteral', 'name': '"-d"', 'range': [224, 224], 'children': []}, {'type': 'StringLiteral', 'name': '"postgres-test"', 'range': [227, 227], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [235, 263], 'children': [{'type': 'Condition', 'name': 'not wait_for_postgres()', 'range': [236, 239], 'children': []}, {'type': 'Block', 'name': '', 'range': [241, 263], 'children': [{'type': 'FunctionCall', 'name': 'run_command', 'range': [242, 255], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [243, 255], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [244, 254], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [245, 245], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [247, 247], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [249, 249], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [251, 251], 'children': []}, {'type': 'StringLiteral', 'name': '"down"', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'sys.exit', 'range': [257, 262], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [260, 262], 'children': [{'type': 'NumberLiteral', 'name': '1', 'range': [261, 261], 'children': []}]}]}]}]}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [270, 279], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [271, 279], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [272, 278], 'children': [{'type': 'StringLiteral', 'name': '"prisma"', 'range': [273, 273], 'children': []}, {'type': 'StringLiteral', 'name': '"migrate"', 'range': [275, 275], 'children': []}, {'type': 'StringLiteral', 'name': '"dev"', 'range': [277, 277], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'subprocess.run', 'range': [287, 308], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [292, 308], 'children': [{'type': 'BinaryExpression', 'name': '+', 'range': [296, 303], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [293, 295], 'children': [{'type': 'StringLiteral', 'name': '"pytest"', 'range': [294, 294], 'children': []}]}, {'type': 'ArraySlice', 'name': '', 'range': [297, 303], 'children': [{'type': 'MemberExpression', 'name': 'sys.argv', 'range': [297, 299], 'children': []}, {'type': 'NumberLiteral', 'name': '1', 'range': [301, 301], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'check=False', 'range': [305, 307], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [311, 324], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [312, 324], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [313, 323], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [314, 314], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [316, 316], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [318, 318], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [320, 320], 'children': []}, {'type': 'StringLiteral', 'name': '"down"', 'range': [322, 322], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'sys.exit', 'range': [327, 335], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [330, 335], 'children': [{'type': 'MemberExpression', 'name': 'result.returncode', 'range': [331, 333], 'children': []}]}]}]}
2025-01-08 10:21:34,307 - INFO - Starting Step 3: AST simplification
2025-01-08 10:21:43,841 - INFO - Step 4 result: {'type': 'Program', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'FunctionDecl', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [145, 151], 'children': [{'type': 'Parameter', 'name': 'command', 'range': [146, 146], 'children': []}, {'type': 'Parameter', 'name': 'check', 'range': [148, 150], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [152, 189], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [154, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [156, 167], 'children': [{'type': 'ExpressionStatement', 'name': 'subprocess.run', 'range': [157, 166], 'children': [{'type': 'CallExpression', 'name': 'run', 'range': [159, 166], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [160, 166], 'children': [{'type': 'Argument', 'name': 'command', 'range': [161, 161], 'children': []}, {'type': 'Argument', 'name': 'check', 'range': [163, 165], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'catch', 'range': [168, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [175, 188], 'children': [{'type': 'ExpressionStatement', 'name': 'print', 'range': [176, 180], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [177, 180], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [178, 180], 'children': [{'type': 'Argument', 'name': 'f"Command failed: {e}"', 'range': [179, 179], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'sys.exit', 'range': [182, 187], 'children': [{'type': 'CallExpression', 'name': 'exit', 'range': [184, 187], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [185, 187], 'children': [{'type': 'Argument', 'name': '1', 'range': [186, 186], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:21:43,841 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:21:59,045 - INFO - Step 5 result: {'type': 'Program', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'FunctionDecl', 'name': 'run_command', 'range': [143, 189], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [145, 151], 'children': [{'type': 'Parameter', 'name': 'command', 'range': [146, 146], 'children': []}, {'type': 'Parameter', 'name': 'check', 'range': [148, 150], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [152, 189], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [154, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [156, 167], 'children': [{'type': 'ExpressionStatement', 'name': 'subprocess.run', 'range': [157, 166], 'children': [{'type': 'CallExpression', 'name': 'run', 'range': [159, 166], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [160, 166], 'children': [{'type': 'Argument', 'name': 'command', 'range': [161, 161], 'children': []}, {'type': 'Argument', 'name': 'check', 'range': [163, 165], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'catch', 'range': [168, 188], 'children': [{'type': 'BlockStatement', 'name': 'block', 'range': [175, 188], 'children': [{'type': 'ExpressionStatement', 'name': 'print', 'range': [176, 180], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [177, 180], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [178, 180], 'children': [{'type': 'Argument', 'name': 'f"Command failed: {e}"', 'range': [179, 179], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'sys.exit', 'range': [182, 187], 'children': [{'type': 'CallExpression', 'name': 'exit', 'range': [184, 187], 'children': [{'type': 'ArgumentList', 'name': 'arguments', 'range': [185, 187], 'children': [{'type': 'Argument', 'name': '1', 'range': [186, 186], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:21:59,045 - INFO - Completed main AST analysis flow
2025-01-08 10:21:59,046 - INFO - Successfully processed chunk
2025-01-08 10:22:07,541 - INFO - Step 3 result: {'nodes': [{'type': 'FunctionDeclaration', 'name': 'test', 'range': [191, 233], 'children': [{'type': 'Comment', 'name': '# Start PostgreSQL with Docker Compose', 'range': [197, 203], 'children': []}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [204, 232], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [205, 232], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [207, 230], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [209, 209], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [212, 212], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [215, 215], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [218, 218], 'children': []}, {'type': 'StringLiteral', 'name': '"up"', 'range': [221, 221], 'children': []}, {'type': 'StringLiteral', 'name': '"-d"', 'range': [224, 224], 'children': []}, {'type': 'StringLiteral', 'name': '"postgres-test"', 'range': [227, 227], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [235, 263], 'children': [{'type': 'Condition', 'name': 'not wait_for_postgres()', 'range': [236, 239], 'children': []}, {'type': 'Block', 'name': '', 'range': [241, 263], 'children': [{'type': 'FunctionCall', 'name': 'run_command', 'range': [242, 255], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [243, 255], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [244, 254], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [245, 245], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [247, 247], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [249, 249], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [251, 251], 'children': []}, {'type': 'StringLiteral', 'name': '"down"', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'sys.exit', 'range': [257, 262], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [260, 262], 'children': [{'type': 'NumberLiteral', 'name': '1', 'range': [261, 261], 'children': []}]}]}]}]}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [270, 279], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [271, 279], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [272, 278], 'children': [{'type': 'StringLiteral', 'name': '"prisma"', 'range': [273, 273], 'children': []}, {'type': 'StringLiteral', 'name': '"migrate"', 'range': [275, 275], 'children': []}, {'type': 'StringLiteral', 'name': '"dev"', 'range': [277, 277], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'subprocess.run', 'range': [287, 308], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [292, 308], 'children': [{'type': 'BinaryExpression', 'name': '+', 'range': [296, 303], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [293, 295], 'children': [{'type': 'StringLiteral', 'name': '"pytest"', 'range': [294, 294], 'children': []}]}, {'type': 'ArraySlice', 'name': '', 'range': [297, 303], 'children': [{'type': 'MemberExpression', 'name': 'sys.argv', 'range': [297, 299], 'children': []}, {'type': 'NumberLiteral', 'name': '1', 'range': [301, 301], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'check=False', 'range': [305, 307], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'run_command', 'range': [311, 324], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [312, 324], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [313, 323], 'children': [{'type': 'StringLiteral', 'name': '"docker"', 'range': [314, 314], 'children': []}, {'type': 'StringLiteral', 'name': '"compose"', 'range': [316, 316], 'children': []}, {'type': 'StringLiteral', 'name': '"-f"', 'range': [318, 318], 'children': []}, {'type': 'StringLiteral', 'name': '"docker-compose.test.yaml"', 'range': [320, 320], 'children': []}, {'type': 'StringLiteral', 'name': '"down"', 'range': [322, 322], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'sys.exit', 'range': [327, 335], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [330, 335], 'children': [{'type': 'MemberExpression', 'name': 'result.returncode', 'range': [331, 333], 'children': []}]}]}]}
2025-01-08 10:22:07,542 - INFO - Starting Step 4: AST normalization
2025-01-08 10:22:11,753 - INFO - Step 3 result: {'type': 'Program', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'FunctionDef', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'Parameters', 'name': 'parameters', 'range': [13, 21], 'children': [{'type': 'Parameter', 'name': 'max_retries', 'range': [14, 16], 'children': []}, {'type': 'Parameter', 'name': 'delay', 'range': [18, 20], 'children': []}]}, {'type': 'Block', 'name': 'body', 'range': [23, 140], 'children': [{'type': 'ForLoop', 'name': 'for_loop', 'range': [24, 113], 'children': [{'type': 'Iteration', 'name': 'iteration', 'range': [25, 30], 'children': [{'type': 'Range', 'name': 'range', 'range': [27, 30], 'children': [{'type': 'Variable', 'name': 'max_retries', 'range': [29, 29], 'children': []}]}]}, {'type': 'Block', 'name': 'body', 'range': [32, 113], 'children': [{'type': 'TryBlock', 'name': 'try_block', 'range': [33, 113], 'children': [{'type': 'Block', 'name': 'body', 'range': [35, 113], 'children': [{'type': 'Assignment', 'name': 'assignment', 'range': [36, 96], 'children': [{'type': 'Variable', 'name': 'result', 'range': [36, 36], 'children': []}, {'type': 'FunctionCall', 'name': 'subprocess.run', 'range': [38, 96], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [41, 96], 'children': [{'type': 'List', 'name': 'command', 'range': [43, 78], 'children': [{'type': 'StringLiteral', 'name': 'docker', 'range': [45, 45], 'children': []}, {'type': 'StringLiteral', 'name': 'compose', 'range': [48, 48], 'children': []}, {'type': 'StringLiteral', 'name': '-f', 'range': [51, 51], 'children': []}, {'type': 'StringLiteral', 'name': 'docker-compose.test.yaml', 'range': [54, 54], 'children': []}, {'type': 'StringLiteral', 'name': 'exec', 'range': [57, 57], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres-test', 'range': [60, 60], 'children': []}, {'type': 'StringLiteral', 'name': 'pg_isready', 'range': [63, 63], 'children': []}, {'type': 'StringLiteral', 'name': '-U', 'range': [66, 66], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres', 'range': [69, 69], 'children': []}, {'type': 'StringLiteral', 'name': '-d', 'range': [72, 72], 'children': []}, {'type': 'StringLiteral', 'name': 'postgres', 'range': [75, 75], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'check', 'range': [81, 83], 'children': []}, {'type': 'KeywordArgument', 'name': 'capture_output', 'range': [86, 88], 'children': []}, {'type': 'KeywordArgument', 'name': 'text', 'range': [91, 93], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if_statement', 'range': [98, 113], 'children': [{'type': 'Condition', 'name': 'condition', 'range': [99, 104], 'children': [{'type': 'InExpression', 'name': 'in_expression', 'range': [100, 104], 'children': [{'type': 'StringLiteral', 'name': 'accepting connections', 'range': [99, 99], 'children': []}, {'type': 'AttributeAccess', 'name': 'stdout', 'range': [103, 104], 'children': [{'type': 'Variable', 'name': 'result', 'range': [101, 101], 'children': []}]}]}]}, {'type': 'Block', 'name': 'body', 'range': [105, 113], 'children': [{'type': 'FunctionCall', 'name': 'print', 'range': [106, 109], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [107, 109], 'children': [{'type': 'StringLiteral', 'name': 'PostgreSQL is ready.', 'range': [108, 108], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [111, 113], 'children': [{'type': 'BooleanLiteral', 'name': 'True', 'range': [112, 112], 'children': []}]}]}]}]}, {'type': 'ExceptBlock', 'name': 'except_block', 'range': [114, 139], 'children': [{'type': 'Exception', 'name': 'CalledProcessError', 'range': [115, 117], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [119, 139], 'children': [{'type': 'FunctionCall', 'name': 'print', 'range': [120, 124], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [121, 124], 'children': [{'type': 'FormattedStringLiteral', 'name': 'f_string', 'range': [122, 123], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'time.sleep', 'range': [126, 131], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [129, 131], 'children': [{'type': 'Variable', 'name': 'delay', 'range': [130, 130], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'print', 'range': [133, 136], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [134, 136], 'children': [{'type': 'StringLiteral', 'name': 'Failed to connect to PostgreSQL.', 'range': [135, 135], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [138, 139], 'children': [{'type': 'BooleanLiteral', 'name': 'False', 'range': [139, 139], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:22:11,753 - INFO - Starting Step 4: AST normalization
2025-01-08 10:22:41,163 - INFO - Step 4 result: {'nodes': [{'type': 'FunctionDecl', 'name': 'test', 'range': [191, 233], 'children': [{'type': 'Comment', 'name': '# Start PostgreSQL with Docker Compose', 'range': [197, 203], 'children': []}, {'type': 'CallExpression', 'name': 'run_command', 'range': [204, 232], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [205, 232], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [207, 230], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [209, 209], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [212, 212], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [215, 215], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [218, 218], 'children': []}, {'type': 'Literal', 'name': '"up"', 'range': [221, 221], 'children': []}, {'type': 'Literal', 'name': '"-d"', 'range': [224, 224], 'children': []}, {'type': 'Literal', 'name': '"postgres-test"', 'range': [227, 227], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [235, 263], 'children': [{'type': 'Condition', 'name': 'not wait_for_postgres()', 'range': [236, 239], 'children': []}, {'type': 'Block', 'name': '', 'range': [241, 263], 'children': [{'type': 'CallExpression', 'name': 'run_command', 'range': [242, 255], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [243, 255], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [244, 254], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [245, 245], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [247, 247], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [249, 249], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [251, 251], 'children': []}, {'type': 'Literal', 'name': '"down"', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [257, 262], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [260, 262], 'children': [{'type': 'Literal', 'name': '1', 'range': [261, 261], 'children': []}]}]}]}]}, {'type': 'CallExpression', 'name': 'run_command', 'range': [270, 279], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [271, 279], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [272, 278], 'children': [{'type': 'Literal', 'name': '"prisma"', 'range': [273, 273], 'children': []}, {'type': 'Literal', 'name': '"migrate"', 'range': [275, 275], 'children': []}, {'type': 'Literal', 'name': '"dev"', 'range': [277, 277], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'subprocess.run', 'range': [287, 308], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [292, 308], 'children': [{'type': 'BinaryExpression', 'name': '+', 'range': [296, 303], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [293, 295], 'children': [{'type': 'Literal', 'name': '"pytest"', 'range': [294, 294], 'children': []}]}, {'type': 'ArraySlice', 'name': '', 'range': [297, 303], 'children': [{'type': 'MemberExpression', 'name': 'sys.argv', 'range': [297, 299], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [301, 301], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'check=False', 'range': [305, 307], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run_command', 'range': [311, 324], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [312, 324], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [313, 323], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [316, 316], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [318, 318], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [320, 320], 'children': []}, {'type': 'Literal', 'name': '"down"', 'range': [322, 322], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [327, 335], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [330, 335], 'children': [{'type': 'MemberExpression', 'name': 'result.returncode', 'range': [331, 333], 'children': []}]}]}]}
2025-01-08 10:22:41,164 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:22:48,281 - INFO - Step 4 result: {'type': 'Program', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'FunctionDecl', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'Parameters', 'name': 'parameters', 'range': [13, 21], 'children': [{'type': 'Parameter', 'name': 'max_retries', 'range': [14, 16], 'children': []}, {'type': 'Parameter', 'name': 'delay', 'range': [18, 20], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [23, 140], 'children': [{'type': 'ForStatement', 'name': 'for_loop', 'range': [24, 113], 'children': [{'type': 'Iteration', 'name': 'iteration', 'range': [25, 30], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [27, 30], 'children': [{'type': 'Identifier', 'name': 'max_retries', 'range': [29, 29], 'children': []}]}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [32, 113], 'children': [{'type': 'TryStatement', 'name': 'try_block', 'range': [33, 113], 'children': [{'type': 'BlockStatement', 'name': 'body', 'range': [35, 113], 'children': [{'type': 'AssignmentExpression', 'name': 'assignment', 'range': [36, 96], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [36, 36], 'children': []}, {'type': 'CallExpression', 'name': 'subprocess.run', 'range': [38, 96], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [41, 96], 'children': [{'type': 'List', 'name': 'command', 'range': [43, 78], 'children': [{'type': 'Literal', 'name': 'docker', 'range': [45, 45], 'children': []}, {'type': 'Literal', 'name': 'compose', 'range': [48, 48], 'children': []}, {'type': 'Literal', 'name': '-f', 'range': [51, 51], 'children': []}, {'type': 'Literal', 'name': 'docker-compose.test.yaml', 'range': [54, 54], 'children': []}, {'type': 'Literal', 'name': 'exec', 'range': [57, 57], 'children': []}, {'type': 'Literal', 'name': 'postgres-test', 'range': [60, 60], 'children': []}, {'type': 'Literal', 'name': 'pg_isready', 'range': [63, 63], 'children': []}, {'type': 'Literal', 'name': '-U', 'range': [66, 66], 'children': []}, {'type': 'Literal', 'name': 'postgres', 'range': [69, 69], 'children': []}, {'type': 'Literal', 'name': '-d', 'range': [72, 72], 'children': []}, {'type': 'Literal', 'name': 'postgres', 'range': [75, 75], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'check', 'range': [81, 83], 'children': []}, {'type': 'KeywordArgument', 'name': 'capture_output', 'range': [86, 88], 'children': []}, {'type': 'KeywordArgument', 'name': 'text', 'range': [91, 93], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if_statement', 'range': [98, 113], 'children': [{'type': 'Condition', 'name': 'condition', 'range': [99, 104], 'children': [{'type': 'BinaryExpression', 'name': 'in_expression', 'range': [100, 104], 'children': [{'type': 'Literal', 'name': 'accepting connections', 'range': [99, 99], 'children': []}, {'type': 'MemberExpression', 'name': 'stdout', 'range': [103, 104], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [101, 101], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [105, 113], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [106, 109], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [107, 109], 'children': [{'type': 'Literal', 'name': 'PostgreSQL is ready.', 'range': [108, 108], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [111, 113], 'children': [{'type': 'Literal', 'name': 'True', 'range': [112, 112], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except_block', 'range': [114, 139], 'children': [{'type': 'Exception', 'name': 'CalledProcessError', 'range': [115, 117], 'children': []}, {'type': 'BlockStatement', 'name': 'body', 'range': [119, 139], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [120, 124], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [121, 124], 'children': [{'type': 'TemplateLiteral', 'name': 'f_string', 'range': [122, 123], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'time.sleep', 'range': [126, 131], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [129, 131], 'children': [{'type': 'Identifier', 'name': 'delay', 'range': [130, 130], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'print', 'range': [133, 136], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [134, 136], 'children': [{'type': 'Literal', 'name': 'Failed to connect to PostgreSQL.', 'range': [135, 135], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [138, 139], 'children': [{'type': 'Literal', 'name': 'False', 'range': [139, 139], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:22:48,281 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:23:15,520 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [191, 335], 'children': [{'type': 'FunctionDecl', 'name': 'test', 'range': [191, 233], 'children': [{'type': 'Comment', 'name': '# Start PostgreSQL with Docker Compose', 'range': [197, 203], 'children': []}, {'type': 'CallExpression', 'name': 'run_command', 'range': [204, 232], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [205, 232], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [207, 230], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [209, 209], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [212, 212], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [215, 215], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [218, 218], 'children': []}, {'type': 'Literal', 'name': '"up"', 'range': [221, 221], 'children': []}, {'type': 'Literal', 'name': '"-d"', 'range': [224, 224], 'children': []}, {'type': 'Literal', 'name': '"postgres-test"', 'range': [227, 227], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [235, 263], 'children': [{'type': 'Condition', 'name': 'not wait_for_postgres()', 'range': [236, 239], 'children': []}, {'type': 'Block', 'name': '', 'range': [241, 263], 'children': [{'type': 'CallExpression', 'name': 'run_command', 'range': [242, 255], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [243, 255], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [244, 254], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [245, 245], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [247, 247], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [249, 249], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [251, 251], 'children': []}, {'type': 'Literal', 'name': '"down"', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [257, 262], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [260, 262], 'children': [{'type': 'Literal', 'name': '1', 'range': [261, 261], 'children': []}]}]}]}]}, {'type': 'CallExpression', 'name': 'run_command', 'range': [270, 279], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [271, 279], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [272, 278], 'children': [{'type': 'Literal', 'name': '"prisma"', 'range': [273, 273], 'children': []}, {'type': 'Literal', 'name': '"migrate"', 'range': [275, 275], 'children': []}, {'type': 'Literal', 'name': '"dev"', 'range': [277, 277], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'subprocess.run', 'range': [287, 308], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [292, 308], 'children': [{'type': 'BinaryExpression', 'name': '+', 'range': [296, 303], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [293, 295], 'children': [{'type': 'Literal', 'name': '"pytest"', 'range': [294, 294], 'children': []}]}, {'type': 'ArraySlice', 'name': '', 'range': [297, 303], 'children': [{'type': 'MemberExpression', 'name': 'sys.argv', 'range': [297, 299], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [301, 301], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'check=False', 'range': [305, 307], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'run_command', 'range': [311, 324], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [312, 324], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [313, 323], 'children': [{'type': 'Literal', 'name': '"docker"', 'range': [314, 314], 'children': []}, {'type': 'Literal', 'name': '"compose"', 'range': [316, 316], 'children': []}, {'type': 'Literal', 'name': '"-f"', 'range': [318, 318], 'children': []}, {'type': 'Literal', 'name': '"docker-compose.test.yaml"', 'range': [320, 320], 'children': []}, {'type': 'Literal', 'name': '"down"', 'range': [322, 322], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [327, 335], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [330, 335], 'children': [{'type': 'MemberExpression', 'name': 'result.returncode', 'range': [331, 333], 'children': []}]}]}]}]}
2025-01-08 10:23:15,520 - INFO - Completed main AST analysis flow
2025-01-08 10:23:15,522 - INFO - Successfully processed chunk
2025-01-08 10:23:24,826 - INFO - Step 5 result: {'type': 'Program', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'FunctionDecl', 'name': 'wait_for_postgres', 'range': [11, 140], 'children': [{'type': 'Parameters', 'name': 'parameters', 'range': [13, 21], 'children': [{'type': 'Parameter', 'name': 'max_retries', 'range': [14, 16], 'children': []}, {'type': 'Parameter', 'name': 'delay', 'range': [18, 20], 'children': []}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [23, 140], 'children': [{'type': 'ForStatement', 'name': 'for_loop', 'range': [24, 113], 'children': [{'type': 'Iteration', 'name': 'iteration', 'range': [25, 30], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [27, 30], 'children': [{'type': 'Identifier', 'name': 'max_retries', 'range': [29, 29], 'children': []}]}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [32, 113], 'children': [{'type': 'TryStatement', 'name': 'try_block', 'range': [33, 113], 'children': [{'type': 'BlockStatement', 'name': 'body', 'range': [35, 113], 'children': [{'type': 'AssignmentExpression', 'name': 'assignment', 'range': [36, 96], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [36, 36], 'children': []}, {'type': 'CallExpression', 'name': 'subprocess.run', 'range': [38, 96], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [41, 96], 'children': [{'type': 'List', 'name': 'command', 'range': [43, 78], 'children': [{'type': 'Literal', 'name': 'docker', 'range': [45, 45], 'children': []}, {'type': 'Literal', 'name': 'compose', 'range': [48, 48], 'children': []}, {'type': 'Literal', 'name': '-f', 'range': [51, 51], 'children': []}, {'type': 'Literal', 'name': 'docker-compose.test.yaml', 'range': [54, 54], 'children': []}, {'type': 'Literal', 'name': 'exec', 'range': [57, 57], 'children': []}, {'type': 'Literal', 'name': 'postgres-test', 'range': [60, 60], 'children': []}, {'type': 'Literal', 'name': 'pg_isready', 'range': [63, 63], 'children': []}, {'type': 'Literal', 'name': '-U', 'range': [66, 66], 'children': []}, {'type': 'Literal', 'name': 'postgres', 'range': [69, 69], 'children': []}, {'type': 'Literal', 'name': '-d', 'range': [72, 72], 'children': []}, {'type': 'Literal', 'name': 'postgres', 'range': [75, 75], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'check', 'range': [81, 83], 'children': []}, {'type': 'KeywordArgument', 'name': 'capture_output', 'range': [86, 88], 'children': []}, {'type': 'KeywordArgument', 'name': 'text', 'range': [91, 93], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if_statement', 'range': [98, 113], 'children': [{'type': 'Condition', 'name': 'condition', 'range': [99, 104], 'children': [{'type': 'BinaryExpression', 'name': 'in_expression', 'range': [100, 104], 'children': [{'type': 'Literal', 'name': 'accepting connections', 'range': [99, 99], 'children': []}, {'type': 'MemberExpression', 'name': 'stdout', 'range': [103, 104], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [101, 101], 'children': []}]}]}]}, {'type': 'BlockStatement', 'name': 'body', 'range': [105, 113], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [106, 109], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [107, 109], 'children': [{'type': 'Literal', 'name': 'PostgreSQL is ready.', 'range': [108, 108], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [111, 113], 'children': [{'type': 'Literal', 'name': 'True', 'range': [112, 112], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except_block', 'range': [114, 139], 'children': [{'type': 'Exception', 'name': 'CalledProcessError', 'range': [115, 117], 'children': []}, {'type': 'BlockStatement', 'name': 'body', 'range': [119, 139], 'children': [{'type': 'CallExpression', 'name': 'print', 'range': [120, 124], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [121, 124], 'children': [{'type': 'TemplateLiteral', 'name': 'f_string', 'range': [122, 123], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'time.sleep', 'range': [126, 131], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [129, 131], 'children': [{'type': 'Identifier', 'name': 'delay', 'range': [130, 130], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'print', 'range': [133, 136], 'children': [{'type': 'Arguments', 'name': 'arguments', 'range': [134, 136], 'children': [{'type': 'Literal', 'name': 'Failed to connect to PostgreSQL.', 'range': [135, 135], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return_statement', 'range': [138, 139], 'children': [{'type': 'Literal', 'name': 'False', 'range': [139, 139], 'children': []}]}]}]}]}]}]}]}]}]}
2025-01-08 10:23:24,826 - INFO - Completed main AST analysis flow
2025-01-08 10:23:24,826 - INFO - Successfully processed chunk
2025-01-08 10:23:24,846 - INFO - Starting code generation from AST
2025-01-08 10:23:30,722 - INFO - Successfully generated code from AST
2025-01-08 10:23:30,723 - INFO - Starting static code similarity comparison
2025-01-08 10:23:30,728 - INFO - Static similarity result: {'final_score': 74.8, 'length_similarity': 64.13, 'token_similarity': 72.84, 'structure_similarity': 63.33, 'function_similarity': 100, 'complexity_similarity': 75.0, 'variable_similarity': 100}
