2025-01-08 10:27:27,688 - INFO - Processing sample 184
2025-01-08 10:27:27,689 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:33,087 - INFO - Successfully split code into 2 top-level declarations
2025-01-08 10:27:33,088 - INFO - Processing chunk #0 (size=150 chars, start_index=0)
2025-01-08 10:27:33,088 - INFO - Processing chunk with 150 chars starting at index 0
2025-01-08 10:27:33,088 - INFO - Starting main AST analysis flow
2025-01-08 10:27:33,088 - INFO - Tokenized code into 34 tokens
2025-01-08 10:27:33,089 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:33,089 - INFO - Processing chunk #1 (size=1442 chars, start_index=34)
2025-01-08 10:27:33,090 - INFO - Processing chunk with 1442 chars starting at index 34
2025-01-08 10:27:33,090 - INFO - Starting main AST analysis flow
2025-01-08 10:27:33,090 - INFO - Tokenized code into 295 tokens
2025-01-08 10:27:33,090 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,445 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 33], 'children': []}
2025-01-08 10:27:35,456 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:39,738 - INFO - Step 1 result: {'type': 'Program', 'name': 'ConnectionManager', 'range': [34, 328], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [38, 74], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'connect', 'range': [76, 104], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'disconnect', 'range': [105, 144], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'subscribe', 'range': [145, 193], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'unsubscribe', 'range': [194, 248], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'send_execution_result', 'range': [249, 328], 'children': []}]}
2025-01-08 10:27:39,786 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:49,713 - INFO - Step 2 result: {'children': [{'type': 'ImportDeclaration', 'name': 'typing', 'range': [0, 6], 'children': [{'type': 'ImportSpecifier', 'name': 'Dict', 'range': [3, 3], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Set', 'range': [5, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'WebSocket', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data', 'range': [14, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'execution', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.model', 'range': [21, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'Methods', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'WsMessage', 'range': [30, 30], 'children': []}]}]}
2025-01-08 10:27:49,713 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:02,247 - INFO - Step 2 result: {'type': 'Program', 'name': 'ConnectionManager', 'range': [34, 328], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [38, 74], 'children': [{'type': 'Assignment', 'name': 'active_connections', 'range': [45, 56], 'children': []}, {'type': 'Assignment', 'name': 'subscriptions', 'range': [58, 73], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'connect', 'range': [76, 104], 'children': [{'type': 'AwaitExpression', 'name': 'websocket.accept', 'range': [88, 93], 'children': []}, {'type': 'MethodCall', 'name': 'active_connections.add', 'range': [95, 102], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'disconnect', 'range': [105, 144], 'children': [{'type': 'MethodCall', 'name': 'active_connections.remove', 'range': [116, 123], 'children': []}, {'type': 'ForLoop', 'name': 'subscribers in self.subscriptions.values', 'range': [125, 142], 'children': [{'type': 'MethodCall', 'name': 'subscribers.discard', 'range': [137, 141], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'subscribe', 'range': [145, 193], 'children': [{'type': 'IfStatement', 'name': 'graph_id not in self.subscriptions', 'range': [161, 179], 'children': [{'type': 'Assignment', 'name': 'subscriptions[graph_id]', 'range': [170, 177], 'children': []}]}, {'type': 'MethodCall', 'name': 'subscriptions[graph_id].add', 'range': [181, 191], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'unsubscribe', 'range': [194, 248], 'children': [{'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [210, 228], 'children': [{'type': 'MethodCall', 'name': 'subscriptions[graph_id].discard', 'range': [218, 227], 'children': []}]}, {'type': 'IfStatement', 'name': 'not self.subscriptions[graph_id]', 'range': [230, 246], 'children': [{'type': 'DeleteStatement', 'name': 'del subscriptions[graph_id]', 'range': [240, 245], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'send_execution_result', 'range': [249, 328], 'children': [{'type': 'Assignment', 'name': 'graph_id', 'range': [263, 268], 'children': []}, {'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [269, 327], 'children': [{'type': 'Assignment', 'name': 'message', 'range': [277, 307], 'children': []}, {'type': 'ForLoop', 'name': 'connection in self.subscriptions[graph_id]', 'range': [309, 326], 'children': [{'type': 'AwaitExpression', 'name': 'connection.send_text', 'range': [320, 325], 'children': []}]}]}]}]}
2025-01-08 10:28:02,251 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:05,201 - INFO - Step 3 result: {'children': [{'type': 'ImportDeclaration', 'name': 'typing', 'range': [0, 6], 'children': [{'type': 'ImportSpecifier', 'name': 'Dict', 'range': [3, 3], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Set', 'range': [5, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'WebSocket', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data', 'range': [14, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'execution', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.model', 'range': [21, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'Methods', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'WsMessage', 'range': [30, 30], 'children': []}]}]}
2025-01-08 10:28:05,202 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:16,708 - INFO - Step 4 result: {'children': [{'type': 'ImportDeclaration', 'name': 'typing', 'range': [0, 6], 'children': [{'type': 'ImportSpecifier', 'name': 'Dict', 'range': [3, 3], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Set', 'range': [5, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'WebSocket', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data', 'range': [14, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'execution', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.model', 'range': [21, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'Methods', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'WsMessage', 'range': [30, 30], 'children': []}]}]}
2025-01-08 10:28:16,714 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:27,830 - INFO - Step 3 result: {'type': 'Program', 'name': 'ConnectionManager', 'range': [34, 328], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [38, 74], 'children': [{'type': 'Assignment', 'name': 'active_connections', 'range': [45, 56], 'children': []}, {'type': 'Assignment', 'name': 'subscriptions', 'range': [58, 73], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'connect', 'range': [76, 104], 'children': [{'type': 'AwaitExpression', 'name': 'websocket.accept', 'range': [88, 93], 'children': []}, {'type': 'MethodCall', 'name': 'active_connections.add', 'range': [95, 102], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'disconnect', 'range': [105, 144], 'children': [{'type': 'MethodCall', 'name': 'active_connections.remove', 'range': [116, 123], 'children': []}, {'type': 'ForLoop', 'name': 'subscribers in self.subscriptions.values', 'range': [125, 142], 'children': [{'type': 'MethodCall', 'name': 'subscribers.discard', 'range': [137, 141], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'subscribe', 'range': [145, 193], 'children': [{'type': 'IfStatement', 'name': 'graph_id not in self.subscriptions', 'range': [161, 179], 'children': [{'type': 'Assignment', 'name': 'subscriptions[graph_id]', 'range': [170, 177], 'children': []}]}, {'type': 'MethodCall', 'name': 'subscriptions[graph_id].add', 'range': [181, 191], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'unsubscribe', 'range': [194, 248], 'children': [{'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [210, 228], 'children': [{'type': 'MethodCall', 'name': 'subscriptions[graph_id].discard', 'range': [218, 227], 'children': []}]}, {'type': 'IfStatement', 'name': 'not self.subscriptions[graph_id]', 'range': [230, 246], 'children': [{'type': 'DeleteStatement', 'name': 'del subscriptions[graph_id]', 'range': [240, 245], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'send_execution_result', 'range': [249, 328], 'children': [{'type': 'Assignment', 'name': 'graph_id', 'range': [263, 268], 'children': []}, {'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [269, 327], 'children': [{'type': 'Assignment', 'name': 'message', 'range': [277, 307], 'children': []}, {'type': 'ForLoop', 'name': 'connection in self.subscriptions[graph_id]', 'range': [309, 326], 'children': [{'type': 'AwaitExpression', 'name': 'connection.send_text', 'range': [320, 325], 'children': []}]}]}]}]}
2025-01-08 10:28:27,831 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:28,898 - INFO - Step 5 result: {'children': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 31], 'children': [{'type': 'ImportDeclaration', 'name': 'typing', 'range': [0, 6], 'children': [{'type': 'ImportSpecifier', 'name': 'Dict', 'range': [3, 3], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Set', 'range': [5, 5], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [8, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'WebSocket', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.data', 'range': [14, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'execution', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.model', 'range': [21, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'Methods', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'WsMessage', 'range': [30, 30], 'children': []}]}]}]}
2025-01-08 10:28:28,899 - INFO - Completed main AST analysis flow
2025-01-08 10:28:28,899 - INFO - Successfully processed chunk
2025-01-08 10:28:47,966 - INFO - Step 4 result: {'type': 'Program', 'name': 'ConnectionManager', 'range': [34, 328], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [38, 74], 'children': [{'type': 'AssignmentExpression', 'name': 'active_connections', 'range': [45, 56], 'children': []}, {'type': 'AssignmentExpression', 'name': 'subscriptions', 'range': [58, 73], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'connect', 'range': [76, 104], 'children': [{'type': 'AwaitExpression', 'name': 'websocket.accept', 'range': [88, 93], 'children': []}, {'type': 'CallExpression', 'name': 'active_connections.add', 'range': [95, 102], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'disconnect', 'range': [105, 144], 'children': [{'type': 'CallExpression', 'name': 'active_connections.remove', 'range': [116, 123], 'children': []}, {'type': 'ForStatement', 'name': 'subscribers in self.subscriptions.values', 'range': [125, 142], 'children': [{'type': 'CallExpression', 'name': 'subscribers.discard', 'range': [137, 141], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'subscribe', 'range': [145, 193], 'children': [{'type': 'IfStatement', 'name': 'graph_id not in self.subscriptions', 'range': [161, 179], 'children': [{'type': 'AssignmentExpression', 'name': 'subscriptions[graph_id]', 'range': [170, 177], 'children': []}]}, {'type': 'CallExpression', 'name': 'subscriptions[graph_id].add', 'range': [181, 191], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'unsubscribe', 'range': [194, 248], 'children': [{'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [210, 228], 'children': [{'type': 'CallExpression', 'name': 'subscriptions[graph_id].discard', 'range': [218, 227], 'children': []}]}, {'type': 'IfStatement', 'name': 'not self.subscriptions[graph_id]', 'range': [230, 246], 'children': [{'type': 'DeleteStatement', 'name': 'del subscriptions[graph_id]', 'range': [240, 245], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'send_execution_result', 'range': [249, 328], 'children': [{'type': 'AssignmentExpression', 'name': 'graph_id', 'range': [263, 268], 'children': []}, {'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [269, 327], 'children': [{'type': 'AssignmentExpression', 'name': 'message', 'range': [277, 307], 'children': []}, {'type': 'ForStatement', 'name': 'connection in self.subscriptions[graph_id]', 'range': [309, 326], 'children': [{'type': 'AwaitExpression', 'name': 'connection.send_text', 'range': [320, 325], 'children': []}]}]}]}]}
2025-01-08 10:28:47,966 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:06,595 - INFO - Step 5 result: {'type': 'Program', 'name': 'ConnectionManager', 'range': [34, 328], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [38, 74], 'children': [{'type': 'AssignmentExpression', 'name': 'active_connections', 'range': [45, 56], 'children': []}, {'type': 'AssignmentExpression', 'name': 'subscriptions', 'range': [58, 73], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'connect', 'range': [76, 104], 'children': [{'type': 'AwaitExpression', 'name': 'websocket.accept', 'range': [88, 93], 'children': []}, {'type': 'CallExpression', 'name': 'active_connections.add', 'range': [95, 102], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'disconnect', 'range': [105, 144], 'children': [{'type': 'CallExpression', 'name': 'active_connections.remove', 'range': [116, 123], 'children': []}, {'type': 'ForStatement', 'name': 'subscribers in self.subscriptions.values', 'range': [125, 142], 'children': [{'type': 'CallExpression', 'name': 'subscribers.discard', 'range': [137, 141], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'subscribe', 'range': [145, 193], 'children': [{'type': 'IfStatement', 'name': 'graph_id not in self.subscriptions', 'range': [161, 179], 'children': [{'type': 'AssignmentExpression', 'name': 'subscriptions[graph_id]', 'range': [170, 177], 'children': []}]}, {'type': 'CallExpression', 'name': 'subscriptions[graph_id].add', 'range': [181, 191], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'unsubscribe', 'range': [194, 248], 'children': [{'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [210, 228], 'children': [{'type': 'CallExpression', 'name': 'subscriptions[graph_id].discard', 'range': [218, 227], 'children': []}]}, {'type': 'IfStatement', 'name': 'not self.subscriptions[graph_id]', 'range': [230, 246], 'children': [{'type': 'DeleteStatement', 'name': 'del subscriptions[graph_id]', 'range': [240, 245], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'send_execution_result', 'range': [249, 328], 'children': [{'type': 'AssignmentExpression', 'name': 'graph_id', 'range': [263, 268], 'children': []}, {'type': 'IfStatement', 'name': 'graph_id in self.subscriptions', 'range': [269, 327], 'children': [{'type': 'AssignmentExpression', 'name': 'message', 'range': [277, 307], 'children': []}, {'type': 'ForStatement', 'name': 'connection in self.subscriptions[graph_id]', 'range': [309, 326], 'children': [{'type': 'AwaitExpression', 'name': 'connection.send_text', 'range': [320, 325], 'children': []}]}]}]}]}
2025-01-08 10:29:06,595 - INFO - Completed main AST analysis flow
2025-01-08 10:29:06,595 - INFO - Successfully processed chunk
2025-01-08 10:29:06,604 - INFO - Starting code generation from AST
2025-01-08 10:29:14,570 - INFO - Successfully generated code from AST
2025-01-08 10:29:14,571 - INFO - Starting static code similarity comparison
2025-01-08 10:29:14,575 - INFO - Static similarity result: {'final_score': 86.58, 'length_similarity': 98.29, 'token_similarity': 89.06, 'structure_similarity': 60.47, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
