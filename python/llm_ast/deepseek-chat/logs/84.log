2025-01-08 09:51:22,655 - INFO - Processing sample 84
2025-01-08 09:51:22,655 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:51:29,109 - INFO - Successfully split code into 9 top-level declarations
2025-01-08 09:51:29,113 - INFO - Processing chunk #0 (size=301 chars, start_index=0)
2025-01-08 09:51:29,121 - INFO - Processing chunk with 301 chars starting at index 0
2025-01-08 09:51:29,121 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,121 - INFO - Processing chunk #1 (size=95 chars, start_index=56)
2025-01-08 09:51:29,122 - INFO - Tokenized code into 56 tokens
2025-01-08 09:51:29,122 - INFO - Processing chunk with 95 chars starting at index 56
2025-01-08 09:51:29,123 - INFO - Processing chunk #2 (size=164 chars, start_index=76)
2025-01-08 09:51:29,123 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,124 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,124 - INFO - Processing chunk #3 (size=293 chars, start_index=113)
2025-01-08 09:51:29,125 - INFO - Processing chunk with 164 chars starting at index 76
2025-01-08 09:51:29,126 - INFO - Tokenized code into 20 tokens
2025-01-08 09:51:29,127 - INFO - Processing chunk #4 (size=437 chars, start_index=163)
2025-01-08 09:51:29,131 - INFO - Processing chunk with 293 chars starting at index 113
2025-01-08 09:51:29,132 - INFO - Processing chunk #5 (size=274 chars, start_index=230)
2025-01-08 09:51:29,133 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,133 - INFO - Processing chunk #6 (size=317 chars, start_index=278)
2025-01-08 09:51:29,133 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,134 - INFO - Processing chunk with 437 chars starting at index 163
2025-01-08 09:51:29,142 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,135 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,136 - INFO - Processing chunk #8 (size=754 chars, start_index=524)
2025-01-08 09:51:29,136 - INFO - Processing chunk with 274 chars starting at index 230
2025-01-08 09:51:29,137 - INFO - Tokenized code into 37 tokens
2025-01-08 09:51:29,137 - INFO - Processing chunk with 317 chars starting at index 278
2025-01-08 09:51:29,134 - INFO - Processing chunk #7 (size=1029 chars, start_index=330)
2025-01-08 09:51:29,142 - INFO - Tokenized code into 67 tokens
2025-01-08 09:51:29,144 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,143 - INFO - Processing chunk with 754 chars starting at index 524
2025-01-08 09:51:29,148 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,143 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,144 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,144 - INFO - Processing chunk with 1029 chars starting at index 330
2025-01-08 09:51:29,142 - INFO - Tokenized code into 50 tokens
2025-01-08 09:51:29,151 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,149 - INFO - Tokenized code into 136 tokens
2025-01-08 09:51:29,150 - INFO - Tokenized code into 52 tokens
2025-01-08 09:51:29,151 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,143 - INFO - Starting main AST analysis flow
2025-01-08 09:51:29,155 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,159 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,160 - INFO - Tokenized code into 194 tokens
2025-01-08 09:51:29,163 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:29,160 - INFO - Tokenized code into 48 tokens
2025-01-08 09:51:29,168 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:51:32,223 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_subscribe', 'range': [237, 275], 'children': []}
2025-01-08 09:51:32,224 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:32,226 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_unsubscribe', 'range': [278, 329], 'children': []}
2025-01-08 09:51:32,226 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:32,232 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_disconnect', 'range': [163, 229], 'children': []}
2025-01-08 09:51:32,237 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:32,243 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_connect', 'range': [120, 161], 'children': []}
2025-01-08 09:51:32,244 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:32,369 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': []}
2025-01-08 09:51:32,370 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:32,376 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': []}
2025-01-08 09:51:32,376 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:33,959 - INFO - Step 1 result: {'type': 'Program', 'name': 'mock_websocket', 'range': [76, 111], 'children': [{'type': 'FunctionDeclaration', 'name': 'mock_websocket', 'range': [81, 111], 'children': [{'type': 'ReturnStatement', 'range': [109, 111], 'children': [{'type': 'Identifier', 'name': 'websocket', 'range': [110, 111]}]}]}]}
2025-01-08 09:51:33,959 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:34,005 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [56, 74], 'children': [{'type': 'FunctionDeclaration', 'name': 'connection_manager', 'range': [61, 74], 'children': [{'type': 'ReturnStatement', 'range': [70, 73], 'children': [{'type': 'CallExpression', 'name': 'ConnectionManager', 'range': [71, 73], 'children': []}]}]}]}
2025-01-08 09:51:34,005 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:36,624 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 55], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 6], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [7, 13], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [24, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 54], 'children': []}]}
2025-01-08 09:51:36,625 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:51:37,981 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [56, 74], 'children': [{'type': 'FunctionDeclaration', 'name': 'connection_manager', 'range': [61, 74], 'children': [{'type': 'ReturnStatement', 'range': [70, 73], 'children': [{'type': 'CallExpression', 'name': 'ConnectionManager', 'range': [71, 73], 'children': []}]}]}]}
2025-01-08 09:51:37,981 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:41,312 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [56, 74], 'children': [{'type': 'FunctionDeclaration', 'name': 'connection_manager', 'range': [61, 74], 'children': [{'type': 'ReturnStatement', 'range': [70, 73], 'children': [{'type': 'CallExpression', 'name': 'ConnectionManager', 'range': [71, 73], 'children': []}]}]}]}
2025-01-08 09:51:41,312 - INFO - Starting Step 4: AST normalization
2025-01-08 09:51:41,421 - INFO - Step 2 result: {'type': 'Program', 'name': 'mock_websocket', 'range': [76, 111], 'children': [{'type': 'FunctionDeclaration', 'name': 'mock_websocket', 'range': [81, 111], 'children': [{'type': 'ReturnStatement', 'range': [109, 111], 'children': [{'type': 'Identifier', 'name': 'websocket', 'range': [110, 111]}]}, {'type': 'VariableDeclaration', 'name': 'websocket', 'range': [90, 99], 'children': [{'type': 'AssignmentExpression', 'range': [93, 99], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [94, 99]}]}]}, {'type': 'ExpressionStatement', 'range': [101, 108], 'children': [{'type': 'AssignmentExpression', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [105, 108]}]}]}]}]}
2025-01-08 09:51:41,422 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:42,741 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 174], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [167, 169], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [171, 173], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [176, 178], 'children': []}, {'type': 'FunctionBody', 'name': 'body', 'range': [180, 229], 'children': [{'type': 'ExpressionStatement', 'name': 'connection_manager.active_connections.add(mock_websocket)', 'range': [181, 188], 'children': []}, {'type': 'ExpressionStatement', 'name': 'connection_manager.subscriptions["test_graph"] = {mock_websocket}', 'range': [190, 199], 'children': []}, {'type': 'ExpressionStatement', 'name': 'connection_manager.disconnect(mock_websocket)', 'range': [202, 207], 'children': []}, {'type': 'AssertStatement', 'name': 'assert mock_websocket not in connection_manager.active_connections', 'range': [210, 217], 'children': []}, {'type': 'AssertStatement', 'name': 'assert mock_websocket not in connection_manager.subscriptions["test_graph"]', 'range': [218, 228], 'children': []}]}]}]}
2025-01-08 09:51:42,742 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:44,754 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [56, 74], 'children': [{'type': 'FunctionDecl', 'name': 'connection_manager', 'range': [61, 74], 'children': [{'type': 'ReturnStatement', 'range': [70, 73], 'children': [{'type': 'CallExpression', 'name': 'ConnectionManager', 'range': [71, 73], 'children': []}]}]}]}
2025-01-08 09:51:44,755 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:51:48,474 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionSignature', 'name': 'test_subscribe', 'range': [237, 254], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [237, 237], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [238, 238], 'children': []}, {'type': 'Identifier', 'name': 'test_subscribe', 'range': [239, 239], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [240, 249], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [242, 244], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [246, 248], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [251, 253], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [255, 275], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [256, 264], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [256, 264], 'children': [{'type': 'CallExpression', 'name': 'subscribe', 'range': [257, 264], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscribe', 'range': [257, 259], 'children': []}, {'type': 'StringLiteral', 'name': '"test_graph"', 'range': [261, 261], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [263, 263], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [266, 275], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [267, 269], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [267, 267], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [269, 274], 'children': []}]}]}]}]}]}
2025-01-08 09:51:48,474 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:48,630 - INFO - Step 3 result: {'type': 'Program', 'name': 'mock_websocket', 'range': [76, 111], 'children': [{'type': 'FunctionDeclaration', 'name': 'mock_websocket', 'range': [81, 111], 'children': [{'type': 'ReturnStatement', 'range': [109, 111], 'children': [{'type': 'Identifier', 'name': 'websocket', 'range': [110, 111]}]}, {'type': 'VariableDeclaration', 'name': 'websocket', 'range': [90, 99], 'children': [{'type': 'AssignmentExpression', 'range': [93, 99], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [94, 99]}]}]}, {'type': 'ExpressionStatement', 'range': [101, 108], 'children': [{'type': 'AssignmentExpression', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [105, 108]}]}]}]}]}
2025-01-08 09:51:48,630 - INFO - Starting Step 4: AST normalization
2025-01-08 09:51:48,646 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [56, 74], 'children': [{'type': 'FunctionDecl', 'name': 'connection_manager', 'range': [61, 74], 'children': [{'type': 'ReturnStatement', 'range': [70, 73], 'children': [{'type': 'CallExpression', 'name': 'ConnectionManager', 'range': [71, 73], 'children': []}]}]}]}
2025-01-08 09:51:48,646 - INFO - Completed main AST analysis flow
2025-01-08 09:51:48,647 - INFO - Successfully processed chunk
2025-01-08 09:51:53,016 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 174], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [167, 169], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [171, 173], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [176, 178], 'children': []}, {'type': 'FunctionBody', 'name': 'body', 'range': [180, 229], 'children': [{'type': 'ExpressionStatement', 'name': 'connection_manager.active_connections.add(mock_websocket)', 'range': [181, 188], 'children': []}, {'type': 'ExpressionStatement', 'name': 'connection_manager.subscriptions["test_graph"] = {mock_websocket}', 'range': [190, 199], 'children': []}, {'type': 'ExpressionStatement', 'name': 'connection_manager.disconnect(mock_websocket)', 'range': [202, 207], 'children': []}, {'type': 'AssertStatement', 'name': 'assert mock_websocket not in connection_manager.active_connections', 'range': [210, 217], 'children': []}, {'type': 'AssertStatement', 'name': 'assert mock_websocket not in connection_manager.subscriptions["test_graph"]', 'range': [218, 228], 'children': []}]}]}]}
2025-01-08 09:51:53,016 - INFO - Starting Step 4: AST normalization
2025-01-08 09:51:53,231 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 6], 'children': [{'type': 'FromImport', 'name': 'datetime', 'range': [0, 3], 'children': [{'type': 'Import', 'name': 'datetime', 'range': [3, 3], 'children': []}, {'type': 'Import', 'name': 'timezone', 'range': [5, 5], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [7, 13], 'children': [{'type': 'FromImport', 'name': 'unittest.mock', 'range': [7, 12], 'children': [{'type': 'Import', 'name': 'AsyncMock', 'range': [12, 12], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'Import', 'name': 'pytest', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'FromImport', 'name': 'fastapi', 'range': [18, 21], 'children': [{'type': 'Import', 'name': 'WebSocket', 'range': [21, 21], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [24, 34], 'children': [{'type': 'FromImport', 'name': 'backend.data.execution', 'range': [24, 31], 'children': [{'type': 'Import', 'name': 'ExecutionResult', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'ExecutionStatus', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromImport', 'name': 'backend.server.conn_manager', 'range': [35, 42], 'children': [{'type': 'Import', 'name': 'ConnectionManager', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 54], 'children': [{'type': 'FromImport', 'name': 'backend.server.model', 'range': [44, 51], 'children': [{'type': 'Import', 'name': 'Methods', 'range': [51, 51], 'children': []}, {'type': 'Import', 'name': 'WsMessage', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:51:53,231 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:54,193 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionSignature', 'name': 'test_connect', 'range': [120, 137], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [120, 125], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [121, 124], 'children': []}, {'type': 'Identifier', 'name': 'test_connect', 'range': [122, 133], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [123, 133], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [125, 127], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [129, 131], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [134, 136], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [138, 161], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [139, 145], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [139, 145], 'children': [{'type': 'CallExpression', 'name': 'connect', 'range': [140, 145], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.connect', 'range': [140, 142], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [140, 141], 'children': []}, {'type': 'Identifier', 'name': 'connect', 'range': [142, 143], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [147, 153], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [148, 150], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [148, 149], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [150, 152], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [150, 151], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [152, 153], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [154, 161], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once', 'range': [155, 161], 'children': [{'type': 'MemberExpression', 'name': 'mock_websocket.accept.assert_called_once', 'range': [155, 158], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [155, 156], 'children': []}, {'type': 'Identifier', 'name': 'accept', 'range': [156, 157], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once', 'range': [158, 159], 'children': []}]}]}]}]}]}]}
2025-01-08 09:51:54,193 - INFO - Starting Step 3: AST simplification
2025-01-08 09:51:56,184 - INFO - Step 4 result: {'type': 'Program', 'name': 'mock_websocket', 'range': [76, 111], 'children': [{'type': 'FunctionDecl', 'name': 'mock_websocket', 'range': [81, 111], 'children': [{'type': 'ReturnStatement', 'range': [109, 111], 'children': [{'type': 'Identifier', 'name': 'websocket', 'range': [110, 111]}]}, {'type': 'VariableDecl', 'name': 'websocket', 'range': [90, 99], 'children': [{'type': 'AssignmentExpression', 'range': [93, 99], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [94, 99]}]}]}, {'type': 'ExpressionStatement', 'range': [101, 108], 'children': [{'type': 'AssignmentExpression', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [105, 108]}]}]}]}]}
2025-01-08 09:51:56,184 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:52:03,335 - INFO - Step 5 result: {'type': 'Program', 'name': 'mock_websocket', 'range': [76, 111], 'children': [{'type': 'FunctionDecl', 'name': 'mock_websocket', 'range': [81, 111], 'children': [{'type': 'ReturnStatement', 'range': [109, 111], 'children': [{'type': 'Identifier', 'name': 'websocket', 'range': [110, 111]}]}, {'type': 'VariableDecl', 'name': 'websocket', 'range': [90, 99], 'children': [{'type': 'AssignmentExpression', 'range': [93, 99], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [94, 99]}]}]}, {'type': 'ExpressionStatement', 'range': [101, 108], 'children': [{'type': 'AssignmentExpression', 'range': [104, 108], 'children': [{'type': 'Identifier', 'name': 'AsyncMock', 'range': [105, 108]}]}]}]}]}
2025-01-08 09:52:03,336 - INFO - Completed main AST analysis flow
2025-01-08 09:52:03,336 - INFO - Successfully processed chunk
2025-01-08 09:52:03,951 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionSignature', 'name': 'test_subscribe', 'range': [237, 254], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [237, 237], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [238, 238], 'children': []}, {'type': 'Identifier', 'name': 'test_subscribe', 'range': [239, 239], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [240, 249], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [242, 244], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [246, 248], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [251, 253], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [255, 275], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [256, 264], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [256, 264], 'children': [{'type': 'CallExpression', 'name': 'subscribe', 'range': [257, 264], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscribe', 'range': [257, 259], 'children': []}, {'type': 'StringLiteral', 'name': '"test_graph"', 'range': [261, 261], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [263, 263], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [266, 275], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [267, 269], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [267, 267], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [269, 274], 'children': []}]}]}]}]}]}
2025-01-08 09:52:03,951 - INFO - Starting Step 4: AST normalization
2025-01-08 09:52:09,874 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 6], 'children': [{'type': 'FromImport', 'name': 'datetime', 'range': [0, 3], 'children': [{'type': 'Import', 'name': 'datetime', 'range': [3, 3], 'children': []}, {'type': 'Import', 'name': 'timezone', 'range': [5, 5], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [7, 13], 'children': [{'type': 'FromImport', 'name': 'unittest.mock', 'range': [7, 12], 'children': [{'type': 'Import', 'name': 'AsyncMock', 'range': [12, 12], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'Import', 'name': 'pytest', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'FromImport', 'name': 'fastapi', 'range': [18, 21], 'children': [{'type': 'Import', 'name': 'WebSocket', 'range': [21, 21], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [24, 34], 'children': [{'type': 'FromImport', 'name': 'backend.data.execution', 'range': [24, 31], 'children': [{'type': 'Import', 'name': 'ExecutionResult', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'ExecutionStatus', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromImport', 'name': 'backend.server.conn_manager', 'range': [35, 42], 'children': [{'type': 'Import', 'name': 'ConnectionManager', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 54], 'children': [{'type': 'FromImport', 'name': 'backend.server.model', 'range': [44, 51], 'children': [{'type': 'Import', 'name': 'Methods', 'range': [51, 51], 'children': []}, {'type': 'Import', 'name': 'WsMessage', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:52:09,874 - INFO - Starting Step 4: AST normalization
2025-01-08 09:52:10,750 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_unsubscribe', 'range': [278, 329], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_unsubscribe', 'range': [278, 318], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [278, 278], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [279, 279], 'children': []}, {'type': 'Identifier', 'name': 'test_unsubscribe', 'range': [280, 280], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [281, 281], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [283, 285], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [283, 283], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [284, 284], 'children': []}, {'type': 'TypeAnnotation', 'name': 'ConnectionManager', 'range': [285, 285], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [287, 289], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [287, 287], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [288, 288], 'children': []}, {'type': 'TypeAnnotation', 'name': 'AsyncMock', 'range': [289, 289], 'children': []}]}, {'type': 'Punctuation', 'name': ')', 'range': [291, 291], 'children': []}, {'type': 'ReturnType', 'name': 'None', 'range': [292, 294], 'children': [{'type': 'Punctuation', 'name': '-', 'range': [292, 292], 'children': []}, {'type': 'Punctuation', 'name': '>', 'range': [293, 293], 'children': []}, {'type': 'Keyword', 'name': 'None', 'range': [294, 294], 'children': []}]}, {'type': 'Punctuation', 'name': ':', 'range': [295, 295], 'children': []}, {'type': 'Block', 'name': '', 'range': [296, 318], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [297, 306], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [297, 299], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [297, 297], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [298, 298], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [299, 299], 'children': []}]}, {'type': 'Punctuation', 'name': '[', 'range': [300, 300], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [301, 301], 'children': []}, {'type': 'Punctuation', 'name': ']', 'range': [302, 302], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [303, 303], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [304, 306], 'children': [{'type': 'Punctuation', 'name': '{', 'range': [304, 304], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [305, 305], 'children': []}, {'type': 'Punctuation', 'name': '}', 'range': [306, 306], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [309, 317], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [309, 309], 'children': []}, {'type': 'CallExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 317], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 312], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [310, 310], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [311, 311], 'children': []}, {'type': 'Identifier', 'name': 'unsubscribe', 'range': [312, 312], 'children': []}]}, {'type': 'Punctuation', 'name': '(', 'range': [313, 313], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [314, 314], 'children': []}, {'type': 'Punctuation', 'name': ',', 'range': [315, 315], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [316, 316], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [317, 317], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [320, 327], 'children': [{'type': 'Keyword', 'name': 'assert', 'range': [320, 320], 'children': []}, {'type': 'BinaryExpression', 'name': '', 'range': [321, 326], 'children': [{'type': 'Literal', 'name': '"test_graph"', 'range': [321, 321], 'children': []}, {'type': 'Keyword', 'name': 'not', 'range': [322, 322], 'children': []}, {'type': 'Keyword', 'name': 'in', 'range': [323, 323], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [324, 326], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [324, 324], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [325, 325], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [326, 326], 'children': []}]}]}]}]}
2025-01-08 09:52:10,750 - INFO - Starting Step 3: AST simplification
2025-01-08 09:52:16,015 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionSignature', 'name': 'test_connect', 'range': [120, 137], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [120, 125], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [121, 124], 'children': []}, {'type': 'Identifier', 'name': 'test_connect', 'range': [122, 133], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [123, 133], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [125, 127], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [129, 131], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [134, 136], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [138, 161], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [139, 145], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [139, 145], 'children': [{'type': 'CallExpression', 'name': 'connect', 'range': [140, 145], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.connect', 'range': [140, 142], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [140, 141], 'children': []}, {'type': 'Identifier', 'name': 'connect', 'range': [142, 143], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [147, 153], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [148, 150], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [148, 149], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [150, 152], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [150, 151], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [152, 153], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [154, 161], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once', 'range': [155, 161], 'children': [{'type': 'MemberExpression', 'name': 'mock_websocket.accept.assert_called_once', 'range': [155, 158], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [155, 156], 'children': []}, {'type': 'Identifier', 'name': 'accept', 'range': [156, 157], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once', 'range': [158, 159], 'children': []}]}]}]}]}]}]}
2025-01-08 09:52:16,015 - INFO - Starting Step 4: AST normalization
2025-01-08 09:52:18,794 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionDecl', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionSignature', 'name': 'test_subscribe', 'range': [237, 254], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [237, 237], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [238, 238], 'children': []}, {'type': 'Identifier', 'name': 'test_subscribe', 'range': [239, 239], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [240, 249], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [242, 244], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [246, 248], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [251, 253], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [255, 275], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [256, 264], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [256, 264], 'children': [{'type': 'CallExpression', 'name': 'subscribe', 'range': [257, 264], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscribe', 'range': [257, 259], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [261, 261], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [263, 263], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [266, 275], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [267, 269], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [267, 267], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [269, 274], 'children': []}]}]}]}]}]}
2025-01-08 09:52:18,794 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:52:19,776 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'FunctionDecl', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 174], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [167, 169], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [171, 173], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [176, 178], 'children': []}, {'type': 'FunctionBody', 'name': 'body', 'range': [180, 229], 'children': [{'type': 'ExpressionStatement', 'name': 'CallExpression', 'range': [181, 188], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.active_connections.add', 'range': [181, 188], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [181, 183], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [184, 186], 'children': []}, {'type': 'Identifier', 'name': 'add', 'range': [187, 188], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [189, 190], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'AssignmentExpression', 'range': [190, 199], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [190, 199], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [190, 192], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [193, 195], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [196, 198], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{mock_websocket}', 'range': [199, 200], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [199, 200], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'CallExpression', 'range': [202, 207], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.disconnect', 'range': [202, 207], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [202, 204], 'children': []}, {'type': 'Identifier', 'name': 'disconnect', 'range': [205, 207], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [208, 209], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [210, 217], 'children': [{'type': 'BinaryExpression', 'name': 'not in', 'range': [211, 217], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [211, 213], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [214, 217], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [214, 216], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [217, 218], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [218, 228], 'children': [{'type': 'BinaryExpression', 'name': 'not in', 'range': [219, 228], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [219, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [222, 228], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [222, 224], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [225, 227], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [228, 229], 'children': []}]}]}]}]}]}]}
2025-01-08 09:52:19,776 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:52:26,023 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 6], 'children': [{'type': 'FromImport', 'name': 'datetime', 'range': [0, 3], 'children': [{'type': 'Import', 'name': 'datetime', 'range': [3, 3], 'children': []}, {'type': 'Import', 'name': 'timezone', 'range': [5, 5], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [7, 13], 'children': [{'type': 'FromImport', 'name': 'unittest.mock', 'range': [7, 12], 'children': [{'type': 'Import', 'name': 'AsyncMock', 'range': [12, 12], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'Import', 'name': 'pytest', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'FromImport', 'name': 'fastapi', 'range': [18, 21], 'children': [{'type': 'Import', 'name': 'WebSocket', 'range': [21, 21], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [24, 34], 'children': [{'type': 'FromImport', 'name': 'backend.data.execution', 'range': [24, 31], 'children': [{'type': 'Import', 'name': 'ExecutionResult', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'ExecutionStatus', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromImport', 'name': 'backend.server.conn_manager', 'range': [35, 42], 'children': [{'type': 'Import', 'name': 'ConnectionManager', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 54], 'children': [{'type': 'FromImport', 'name': 'backend.server.model', 'range': [44, 51], 'children': [{'type': 'Import', 'name': 'Methods', 'range': [51, 51], 'children': []}, {'type': 'Import', 'name': 'WsMessage', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:52:26,024 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:52:33,919 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionDecl', 'name': 'test_subscribe', 'range': [237, 275], 'children': [{'type': 'FunctionSignature', 'name': 'test_subscribe', 'range': [237, 254], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [237, 237], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [238, 238], 'children': []}, {'type': 'Identifier', 'name': 'test_subscribe', 'range': [239, 239], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [240, 249], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [242, 244], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [246, 248], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [251, 253], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [255, 275], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [256, 264], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [256, 264], 'children': [{'type': 'CallExpression', 'name': 'subscribe', 'range': [257, 264], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscribe', 'range': [257, 259], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [261, 261], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [263, 263], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [266, 275], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [267, 269], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [267, 267], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [269, 274], 'children': []}]}]}]}]}]}
2025-01-08 09:52:33,920 - INFO - Completed main AST analysis flow
2025-01-08 09:52:33,920 - INFO - Successfully processed chunk
2025-01-08 09:52:36,735 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_unsubscribe', 'range': [278, 329], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_unsubscribe', 'range': [278, 318], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [278, 278], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [279, 279], 'children': []}, {'type': 'Identifier', 'name': 'test_unsubscribe', 'range': [280, 280], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [283, 285], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [283, 283], 'children': []}, {'type': 'TypeAnnotation', 'name': 'ConnectionManager', 'range': [285, 285], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [287, 289], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [287, 287], 'children': []}, {'type': 'TypeAnnotation', 'name': 'AsyncMock', 'range': [289, 289], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [292, 294], 'children': [{'type': 'Keyword', 'name': 'None', 'range': [294, 294], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [296, 318], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [297, 306], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [297, 299], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [299, 299], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [301, 301], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [304, 306], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [305, 305], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [309, 317], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [309, 309], 'children': []}, {'type': 'CallExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 317], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 312], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'unsubscribe', 'range': [312, 312], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [314, 314], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [316, 316], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [320, 327], 'children': [{'type': 'Keyword', 'name': 'assert', 'range': [320, 320], 'children': []}, {'type': 'BinaryExpression', 'name': '', 'range': [321, 326], 'children': [{'type': 'Literal', 'name': '"test_graph"', 'range': [321, 321], 'children': []}, {'type': 'Keyword', 'name': 'not', 'range': [322, 322], 'children': []}, {'type': 'Keyword', 'name': 'in', 'range': [323, 323], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [324, 326], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [324, 324], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [326, 326], 'children': []}]}]}]}]}
2025-01-08 09:52:36,735 - INFO - Starting Step 4: AST normalization
2025-01-08 09:52:36,970 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionDecl', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionSignature', 'name': 'test_connect', 'range': [120, 137], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [120, 125], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [121, 124], 'children': []}, {'type': 'Identifier', 'name': 'test_connect', 'range': [122, 133], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [123, 133], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [125, 127], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [129, 131], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [134, 136], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [138, 161], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [139, 145], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [139, 145], 'children': [{'type': 'CallExpression', 'name': 'connect', 'range': [140, 145], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.connect', 'range': [140, 142], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [140, 141], 'children': []}, {'type': 'Identifier', 'name': 'connect', 'range': [142, 143], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [147, 153], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [148, 150], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [148, 149], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [150, 152], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [150, 151], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [152, 153], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [154, 161], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once', 'range': [155, 161], 'children': [{'type': 'MemberExpression', 'name': 'mock_websocket.accept.assert_called_once', 'range': [155, 158], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [155, 156], 'children': []}, {'type': 'Identifier', 'name': 'accept', 'range': [156, 157], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once', 'range': [158, 159], 'children': []}]}]}]}]}]}]}
2025-01-08 09:52:36,971 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:52:38,880 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionSignature', 'name': 'test_send_execution_result', 'range': [330, 347], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [330, 334], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [331, 334], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result', 'range': [332, 353], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [353, 347], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [335, 337], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [339, 341], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [344, 347], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [348, 523], 'children': [{'type': 'Assignment', 'name': '', 'range': [349, 359], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [349, 365], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [351, 365], 'children': []}, {'type': 'StringLiteral', 'name': 'test_graph', 'range': [353, 365], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [356, 358], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [357, 358], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [360, 471], 'children': [{'type': 'TypeAnnotation', 'name': 'ExecutionResult', 'range': [361, 362], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [364, 471], 'children': [{'type': 'PropertyAssignment', 'name': 'graph_id', 'range': [367, 369], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [369, 369], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_version', 'range': [372, 374], 'children': [{'type': 'NumericLiteral', 'name': '1', 'range': [374, 374], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_exec_id', 'range': [377, 379], 'children': [{'type': 'StringLiteral', 'name': 'test_exec_id', 'range': [379, 379], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_exec_id', 'range': [382, 384], 'children': [{'type': 'StringLiteral', 'name': 'test_node_exec_id', 'range': [384, 384], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_id', 'range': [387, 389], 'children': [{'type': 'StringLiteral', 'name': 'test_node_id', 'range': [389, 389], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'block_id', 'range': [392, 394], 'children': [{'type': 'StringLiteral', 'name': 'test_block_id', 'range': [394, 394], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [397, 402], 'children': [{'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [399, 402], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [401, 402], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'input_data', 'range': [404, 410], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [406, 410], 'children': [{'type': 'PropertyAssignment', 'name': 'input1', 'range': [407, 409], 'children': [{'type': 'StringLiteral', 'name': 'value1', 'range': [409, 409], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'output_data', 'range': [413, 421], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [415, 421], 'children': [{'type': 'PropertyAssignment', 'name': 'output1', 'range': [416, 420], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [418, 420], 'children': [{'type': 'StringLiteral', 'name': 'result1', 'range': [419, 420], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'add_time', 'range': [424, 435], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [426, 435], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [426, 427], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [428, 429], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [429, 435], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [430, 434], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [432, 433], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [434, 434], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'queue_time', 'range': [438, 440], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [440, 440], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'start_time', 'range': [443, 454], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [445, 454], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [445, 446], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [447, 448], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [448, 454], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [449, 453], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [451, 452], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [453, 453], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'end_time', 'range': [457, 468], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [459, 468], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [459, 460], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [461, 462], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 468], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [463, 467], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [465, 466], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [467, 467], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [474, 481], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [474, 481], 'children': [{'type': 'CallExpression', 'name': 'connection_manager.send_execution_result', 'range': [475, 480], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [475, 476], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [477, 478], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [478, 480], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [479, 480], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [483, 521], 'children': [{'type': 'CallExpression', 'name': 'mock_websocket.send_text.assert_called_once_with', 'range': [483, 520], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [483, 484], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [485, 486], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once_with', 'range': [487, 488], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [488, 520], 'children': [{'type': 'CallExpression', 'name': 'WsMessage.model_dump_json', 'range': [490, 519], 'children': [{'type': 'Identifier', 'name': 'WsMessage', 'range': [490, 491], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [491, 514], 'children': [{'type': 'PropertyAssignment', 'name': 'method', 'range': [493, 498], 'children': [{'type': 'Identifier', 'name': 'Methods', 'range': [495, 496], 'children': []}, {'type': 'Identifier', 'name': 'EXECUTION_EVENT', 'range': [497, 498], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'channel', 'range': [500, 502], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [502, 502], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'data', 'range': [505, 512], 'children': [{'type': 'CallExpression', 'name': 'result.model_dump', 'range': [507, 511], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [507, 508], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [509, 510], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'model_dump_json', 'range': [516, 519], 'children': [{'type': 'Identifier', 'name': 'model_dump_json', 'range': [517, 518], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 09:52:38,880 - INFO - Starting Step 3: AST simplification
2025-01-08 09:52:43,336 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 54], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 6], 'children': [{'type': 'FromImport', 'name': 'datetime', 'range': [0, 3], 'children': [{'type': 'Import', 'name': 'datetime', 'range': [3, 3], 'children': []}, {'type': 'Import', 'name': 'timezone', 'range': [5, 5], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [7, 13], 'children': [{'type': 'FromImport', 'name': 'unittest.mock', 'range': [7, 12], 'children': [{'type': 'Import', 'name': 'AsyncMock', 'range': [12, 12], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'Import', 'name': 'pytest', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'FromImport', 'name': 'fastapi', 'range': [18, 21], 'children': [{'type': 'Import', 'name': 'WebSocket', 'range': [21, 21], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [24, 34], 'children': [{'type': 'FromImport', 'name': 'backend.data.execution', 'range': [24, 31], 'children': [{'type': 'Import', 'name': 'ExecutionResult', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'ExecutionStatus', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromImport', 'name': 'backend.server.conn_manager', 'range': [35, 42], 'children': [{'type': 'Import', 'name': 'ConnectionManager', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 54], 'children': [{'type': 'FromImport', 'name': 'backend.server.model', 'range': [44, 51], 'children': [{'type': 'Import', 'name': 'Methods', 'range': [51, 51], 'children': []}, {'type': 'Import', 'name': 'WsMessage', 'range': [53, 53], 'children': []}]}]}]}]}
2025-01-08 09:52:43,336 - INFO - Completed main AST analysis flow
2025-01-08 09:52:43,337 - INFO - Successfully processed chunk
2025-01-08 09:52:46,367 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'FunctionDecl', 'name': 'test_disconnect', 'range': [163, 229], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [165, 174], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [167, 169], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [171, 173], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [176, 178], 'children': []}, {'type': 'FunctionBody', 'name': 'body', 'range': [180, 229], 'children': [{'type': 'ExpressionStatement', 'name': 'CallExpression', 'range': [181, 188], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.active_connections.add', 'range': [181, 188], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [181, 183], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [184, 186], 'children': []}, {'type': 'Identifier', 'name': 'add', 'range': [187, 188], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [189, 190], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'AssignmentExpression', 'range': [190, 199], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [190, 199], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [190, 192], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [193, 195], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [196, 198], 'children': []}]}, {'type': 'ObjectExpression', 'name': '{mock_websocket}', 'range': [199, 200], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [199, 200], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'CallExpression', 'range': [202, 207], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.disconnect', 'range': [202, 207], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [202, 204], 'children': []}, {'type': 'Identifier', 'name': 'disconnect', 'range': [205, 207], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [208, 209], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [210, 217], 'children': [{'type': 'BinaryExpression', 'name': 'not in', 'range': [211, 217], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [211, 213], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [214, 217], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [214, 216], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [217, 218], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [218, 228], 'children': [{'type': 'BinaryExpression', 'name': 'not in', 'range': [219, 228], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [219, 221], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions["test_graph"]', 'range': [222, 228], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [222, 224], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [225, 227], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [228, 229], 'children': []}]}]}]}]}]}]}
2025-01-08 09:52:46,367 - INFO - Completed main AST analysis flow
2025-01-08 09:52:46,367 - INFO - Successfully processed chunk
2025-01-08 09:52:55,820 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [524, 528], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [525, 528], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result_no_subscribers', 'range': [526, 527], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [527, 528], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [529, 536], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [529, 530], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [530, 531], 'children': []}, {'type': 'Type', 'name': 'ConnectionManager', 'range': [531, 532], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [533, 536], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [533, 534], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [534, 535], 'children': []}, {'type': 'Type', 'name': 'AsyncMock', 'range': [535, 536], 'children': []}]}, {'type': 'Punctuation', 'name': ')', 'range': [537, 538], 'children': []}, {'type': 'Punctuation', 'name': '-', 'range': [538, 539], 'children': []}, {'type': 'Punctuation', 'name': '>', 'range': [539, 540], 'children': []}, {'type': 'Type', 'name': 'None', 'range': [540, 541], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [541, 542], 'children': []}, {'type': 'Block', 'name': '', 'range': [542, 659], 'children': [{'type': 'VariableDeclaration', 'name': 'result', 'range': [543, 639], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [543, 544], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [544, 545], 'children': []}, {'type': 'Type', 'name': 'ExecutionResult', 'range': [545, 546], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [546, 547], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionResult', 'range': [547, 548], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [548, 549], 'children': []}, {'type': 'Argument', 'name': 'graph_id', 'range': [550, 553], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [550, 551], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [551, 552], 'children': []}, {'type': 'StringLiteral', 'name': '"test_graph"', 'range': [552, 553], 'children': []}]}, {'type': 'Argument', 'name': 'graph_version', 'range': [555, 558], 'children': [{'type': 'Identifier', 'name': 'graph_version', 'range': [555, 556], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [556, 557], 'children': []}, {'type': 'NumericLiteral', 'name': '1', 'range': [557, 558], 'children': []}]}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [560, 563], 'children': [{'type': 'Identifier', 'name': 'graph_exec_id', 'range': [560, 561], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [561, 562], 'children': []}, {'type': 'StringLiteral', 'name': '"test_exec_id"', 'range': [562, 563], 'children': []}]}, {'type': 'Argument', 'name': 'node_exec_id', 'range': [565, 568], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [565, 566], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [566, 567], 'children': []}, {'type': 'StringLiteral', 'name': '"test_node_exec_id"', 'range': [567, 568], 'children': []}]}, {'type': 'Argument', 'name': 'node_id', 'range': [570, 573], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [570, 571], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [571, 572], 'children': []}, {'type': 'StringLiteral', 'name': '"test_node_id"', 'range': [572, 573], 'children': []}]}, {'type': 'Argument', 'name': 'block_id', 'range': [575, 578], 'children': [{'type': 'Identifier', 'name': 'block_id', 'range': [575, 576], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [576, 577], 'children': []}, {'type': 'StringLiteral', 'name': '"test_block_id"', 'range': [577, 578], 'children': []}]}, {'type': 'Argument', 'name': 'status', 'range': [580, 585], 'children': [{'type': 'Identifier', 'name': 'status', 'range': [580, 581], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [581, 582], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [582, 583], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [583, 584], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [584, 585], 'children': []}]}, {'type': 'Argument', 'name': 'input_data', 'range': [587, 594], 'children': [{'type': 'Identifier', 'name': 'input_data', 'range': [587, 588], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [588, 589], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [589, 594], 'children': [{'type': 'Punctuation', 'name': '{', 'range': [589, 590], 'children': []}, {'type': 'Property', 'name': 'input1', 'range': [590, 593], 'children': [{'type': 'StringLiteral', 'name': '"input1"', 'range': [590, 591], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [591, 592], 'children': []}, {'type': 'StringLiteral', 'name': '"value1"', 'range': [592, 593], 'children': []}]}, {'type': 'Punctuation', 'name': '}', 'range': [593, 594], 'children': []}]}]}, {'type': 'Argument', 'name': 'output_data', 'range': [596, 604], 'children': [{'type': 'Identifier', 'name': 'output_data', 'range': [596, 597], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [597, 598], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [598, 604], 'children': [{'type': 'Punctuation', 'name': '{', 'range': [598, 599], 'children': []}, {'type': 'Property', 'name': 'output1', 'range': [599, 603], 'children': [{'type': 'StringLiteral', 'name': '"output1"', 'range': [599, 600], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [600, 601], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [601, 603], 'children': [{'type': 'Punctuation', 'name': '[', 'range': [601, 602], 'children': []}, {'type': 'StringLiteral', 'name': '"result1"', 'range': [602, 603], 'children': []}, {'type': 'Punctuation', 'name': ']', 'range': [603, 604], 'children': []}]}]}, {'type': 'Punctuation', 'name': '}', 'range': [603, 604], 'children': []}]}]}, {'type': 'Argument', 'name': 'add_time', 'range': [607, 614], 'children': [{'type': 'Identifier', 'name': 'add_time', 'range': [607, 608], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [608, 609], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [609, 610], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [610, 611], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [611, 612], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [612, 613], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [613, 614], 'children': []}]}, {'type': 'Argument', 'name': 'queue_time', 'range': [616, 619], 'children': [{'type': 'Identifier', 'name': 'queue_time', 'range': [616, 617], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [617, 618], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [618, 619], 'children': []}]}, {'type': 'Argument', 'name': 'start_time', 'range': [621, 628], 'children': [{'type': 'Identifier', 'name': 'start_time', 'range': [621, 622], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [622, 623], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [623, 624], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [624, 625], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [625, 626], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [626, 627], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [627, 628], 'children': []}]}, {'type': 'Argument', 'name': 'end_time', 'range': [630, 637], 'children': [{'type': 'Identifier', 'name': 'end_time', 'range': [630, 631], 'children': []}, {'type': 'Punctuation', 'name': '=', 'range': [631, 632], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [632, 633], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [633, 634], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [634, 635], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [635, 636], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [636, 637], 'children': []}]}, {'type': 'Punctuation', 'name': ')', 'range': [639, 640], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [642, 649], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [642, 643], 'children': []}, {'type': 'Identifier', 'name': 'connection_manager', 'range': [643, 644], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [644, 645], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [645, 646], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [646, 647], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [647, 648], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [648, 649], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [651, 658], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [651, 652], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [652, 653], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [653, 654], 'children': []}, {'type': 'Punctuation', 'name': '.', 'range': [654, 655], 'children': []}, {'type': 'Identifier', 'name': 'assert_not_called', 'range': [655, 656], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [656, 657], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [657, 658], 'children': []}]}]}]}]}
2025-01-08 09:52:55,821 - INFO - Starting Step 3: AST simplification
2025-01-08 09:52:58,623 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionDecl', 'name': 'test_connect', 'range': [120, 161], 'children': [{'type': 'FunctionSignature', 'name': 'test_connect', 'range': [120, 137], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [120, 125], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [121, 124], 'children': []}, {'type': 'Identifier', 'name': 'test_connect', 'range': [122, 133], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [123, 133], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [125, 127], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [129, 131], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [134, 136], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [138, 161], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [139, 145], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [139, 145], 'children': [{'type': 'CallExpression', 'name': 'connect', 'range': [140, 145], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.connect', 'range': [140, 142], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [140, 141], 'children': []}, {'type': 'Identifier', 'name': 'connect', 'range': [142, 143], 'children': []}]}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [147, 153], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [148, 150], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [148, 149], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.active_connections', 'range': [150, 152], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [150, 151], 'children': []}, {'type': 'Identifier', 'name': 'active_connections', 'range': [152, 153], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [154, 161], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once', 'range': [155, 161], 'children': [{'type': 'MemberExpression', 'name': 'mock_websocket.accept.assert_called_once', 'range': [155, 158], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [155, 156], 'children': []}, {'type': 'Identifier', 'name': 'accept', 'range': [156, 157], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once', 'range': [158, 159], 'children': []}]}]}]}]}]}]}
2025-01-08 09:52:58,623 - INFO - Completed main AST analysis flow
2025-01-08 09:52:58,624 - INFO - Successfully processed chunk
2025-01-08 09:53:03,006 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_unsubscribe', 'range': [278, 329], 'children': [{'type': 'FunctionDecl', 'name': 'test_unsubscribe', 'range': [278, 318], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [278, 278], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [279, 279], 'children': []}, {'type': 'Identifier', 'name': 'test_unsubscribe', 'range': [280, 280], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [283, 285], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [283, 283], 'children': []}, {'type': 'TypeAnnotation', 'name': 'ConnectionManager', 'range': [285, 285], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [287, 289], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [287, 287], 'children': []}, {'type': 'TypeAnnotation', 'name': 'AsyncMock', 'range': [289, 289], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [292, 294], 'children': [{'type': 'Keyword', 'name': 'None', 'range': [294, 294], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [296, 318], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [297, 306], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [297, 299], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [299, 299], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [301, 301], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [304, 306], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [305, 305], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [309, 317], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [309, 309], 'children': []}, {'type': 'CallExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 317], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 312], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'unsubscribe', 'range': [312, 312], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [314, 314], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [316, 316], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [320, 327], 'children': [{'type': 'Keyword', 'name': 'assert', 'range': [320, 320], 'children': []}, {'type': 'BinaryExpression', 'name': '', 'range': [321, 326], 'children': [{'type': 'Literal', 'name': '"test_graph"', 'range': [321, 321], 'children': []}, {'type': 'Keyword', 'name': 'not', 'range': [322, 322], 'children': []}, {'type': 'Keyword', 'name': 'in', 'range': [323, 323], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [324, 326], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [324, 324], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [326, 326], 'children': []}]}]}]}]}
2025-01-08 09:53:03,006 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:53:30,371 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_unsubscribe', 'range': [278, 329], 'children': [{'type': 'FunctionDecl', 'name': 'test_unsubscribe', 'range': [278, 318], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [278, 278], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [279, 279], 'children': []}, {'type': 'Identifier', 'name': 'test_unsubscribe', 'range': [280, 280], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [283, 285], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [283, 283], 'children': []}, {'type': 'TypeAnnotation', 'name': 'ConnectionManager', 'range': [285, 285], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [287, 289], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [287, 287], 'children': []}, {'type': 'TypeAnnotation', 'name': 'AsyncMock', 'range': [289, 289], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [292, 294], 'children': [{'type': 'Keyword', 'name': 'None', 'range': [294, 294], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [296, 318], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [297, 306], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [297, 299], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [297, 297], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [299, 299], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [301, 301], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [304, 306], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [305, 305], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [309, 317], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [309, 309], 'children': []}, {'type': 'CallExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 317], 'children': [{'type': 'MemberExpression', 'name': 'connection_manager.unsubscribe', 'range': [310, 312], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [310, 310], 'children': []}, {'type': 'Identifier', 'name': 'unsubscribe', 'range': [312, 312], 'children': []}]}, {'type': 'Literal', 'name': '"test_graph"', 'range': [314, 314], 'children': []}, {'type': 'Identifier', 'name': 'mock_websocket', 'range': [316, 316], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [320, 327], 'children': [{'type': 'Keyword', 'name': 'assert', 'range': [320, 320], 'children': []}, {'type': 'BinaryExpression', 'name': '', 'range': [321, 326], 'children': [{'type': 'Literal', 'name': '"test_graph"', 'range': [321, 321], 'children': []}, {'type': 'Keyword', 'name': 'not', 'range': [322, 322], 'children': []}, {'type': 'Keyword', 'name': 'in', 'range': [323, 323], 'children': []}, {'type': 'MemberExpression', 'name': 'connection_manager.subscriptions', 'range': [324, 326], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [324, 324], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [326, 326], 'children': []}]}]}]}]}
2025-01-08 09:53:30,371 - INFO - Completed main AST analysis flow
2025-01-08 09:53:30,372 - INFO - Successfully processed chunk
2025-01-08 09:53:46,290 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionSignature', 'name': 'test_send_execution_result', 'range': [330, 347], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [330, 334], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [331, 334], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result', 'range': [332, 353], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [353, 347], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [335, 337], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [339, 341], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [344, 347], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [348, 523], 'children': [{'type': 'Assignment', 'name': '', 'range': [349, 359], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [349, 365], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [351, 365], 'children': []}, {'type': 'StringLiteral', 'name': 'test_graph', 'range': [353, 365], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [356, 358], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [357, 358], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [360, 471], 'children': [{'type': 'TypeAnnotation', 'name': 'ExecutionResult', 'range': [361, 362], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [364, 471], 'children': [{'type': 'PropertyAssignment', 'name': 'graph_id', 'range': [367, 369], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [369, 369], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_version', 'range': [372, 374], 'children': [{'type': 'NumericLiteral', 'name': '1', 'range': [374, 374], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_exec_id', 'range': [377, 379], 'children': [{'type': 'StringLiteral', 'name': 'test_exec_id', 'range': [379, 379], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_exec_id', 'range': [382, 384], 'children': [{'type': 'StringLiteral', 'name': 'test_node_exec_id', 'range': [384, 384], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_id', 'range': [387, 389], 'children': [{'type': 'StringLiteral', 'name': 'test_node_id', 'range': [389, 389], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'block_id', 'range': [392, 394], 'children': [{'type': 'StringLiteral', 'name': 'test_block_id', 'range': [394, 394], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [397, 402], 'children': [{'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [399, 402], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [401, 402], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'input_data', 'range': [404, 410], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [406, 410], 'children': [{'type': 'PropertyAssignment', 'name': 'input1', 'range': [407, 409], 'children': [{'type': 'StringLiteral', 'name': 'value1', 'range': [409, 409], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'output_data', 'range': [413, 421], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [415, 421], 'children': [{'type': 'PropertyAssignment', 'name': 'output1', 'range': [416, 420], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [418, 420], 'children': [{'type': 'StringLiteral', 'name': 'result1', 'range': [419, 420], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'add_time', 'range': [424, 435], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [426, 435], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [426, 427], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [428, 429], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [429, 435], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [430, 434], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [432, 433], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [434, 434], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'queue_time', 'range': [438, 440], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [440, 440], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'start_time', 'range': [443, 454], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [445, 454], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [445, 446], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [447, 448], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [448, 454], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [449, 453], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [451, 452], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [453, 453], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'end_time', 'range': [457, 468], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [459, 468], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [459, 460], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [461, 462], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 468], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [463, 467], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [465, 466], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [467, 467], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [474, 481], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [474, 481], 'children': [{'type': 'CallExpression', 'name': 'connection_manager.send_execution_result', 'range': [475, 480], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [475, 476], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [477, 478], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [478, 480], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [479, 480], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [483, 521], 'children': [{'type': 'CallExpression', 'name': 'mock_websocket.send_text.assert_called_once_with', 'range': [483, 520], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [483, 484], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [485, 486], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once_with', 'range': [487, 488], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [488, 520], 'children': [{'type': 'CallExpression', 'name': 'WsMessage.model_dump_json', 'range': [490, 519], 'children': [{'type': 'Identifier', 'name': 'WsMessage', 'range': [490, 491], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [491, 514], 'children': [{'type': 'PropertyAssignment', 'name': 'method', 'range': [493, 498], 'children': [{'type': 'Identifier', 'name': 'Methods', 'range': [495, 496], 'children': []}, {'type': 'Identifier', 'name': 'EXECUTION_EVENT', 'range': [497, 498], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'channel', 'range': [500, 502], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [502, 502], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'data', 'range': [505, 512], 'children': [{'type': 'CallExpression', 'name': 'result.model_dump', 'range': [507, 511], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [507, 508], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [509, 510], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'model_dump_json', 'range': [516, 519], 'children': [{'type': 'Identifier', 'name': 'model_dump_json', 'range': [517, 518], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 09:53:46,290 - INFO - Starting Step 4: AST normalization
2025-01-08 09:53:49,013 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [524, 528], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [525, 528], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result_no_subscribers', 'range': [526, 527], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [529, 536], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [529, 530], 'children': []}, {'type': 'Type', 'name': 'ConnectionManager', 'range': [531, 532], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [533, 536], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [533, 534], 'children': []}, {'type': 'Type', 'name': 'AsyncMock', 'range': [535, 536], 'children': []}]}, {'type': 'Type', 'name': 'None', 'range': [540, 541], 'children': []}, {'type': 'Block', 'name': '', 'range': [542, 659], 'children': [{'type': 'VariableDeclaration', 'name': 'result', 'range': [543, 639], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [543, 544], 'children': []}, {'type': 'Type', 'name': 'ExecutionResult', 'range': [545, 546], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionResult', 'range': [547, 548], 'children': []}, {'type': 'Argument', 'name': 'graph_id', 'range': [550, 553], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [550, 551], 'children': []}, {'type': 'StringLiteral', 'name': '"test_graph"', 'range': [552, 553], 'children': []}]}, {'type': 'Argument', 'name': 'graph_version', 'range': [555, 558], 'children': [{'type': 'Identifier', 'name': 'graph_version', 'range': [555, 556], 'children': []}, {'type': 'NumericLiteral', 'name': '1', 'range': [557, 558], 'children': []}]}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [560, 563], 'children': [{'type': 'Identifier', 'name': 'graph_exec_id', 'range': [560, 561], 'children': []}, {'type': 'StringLiteral', 'name': '"test_exec_id"', 'range': [562, 563], 'children': []}]}, {'type': 'Argument', 'name': 'node_exec_id', 'range': [565, 568], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [565, 566], 'children': []}, {'type': 'StringLiteral', 'name': '"test_node_exec_id"', 'range': [567, 568], 'children': []}]}, {'type': 'Argument', 'name': 'node_id', 'range': [570, 573], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [570, 571], 'children': []}, {'type': 'StringLiteral', 'name': '"test_node_id"', 'range': [572, 573], 'children': []}]}, {'type': 'Argument', 'name': 'block_id', 'range': [575, 578], 'children': [{'type': 'Identifier', 'name': 'block_id', 'range': [575, 576], 'children': []}, {'type': 'StringLiteral', 'name': '"test_block_id"', 'range': [577, 578], 'children': []}]}, {'type': 'Argument', 'name': 'status', 'range': [580, 585], 'children': [{'type': 'Identifier', 'name': 'status', 'range': [580, 581], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [582, 583], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [584, 585], 'children': []}]}, {'type': 'Argument', 'name': 'input_data', 'range': [587, 594], 'children': [{'type': 'Identifier', 'name': 'input_data', 'range': [587, 588], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [589, 594], 'children': [{'type': 'Property', 'name': 'input1', 'range': [590, 593], 'children': [{'type': 'StringLiteral', 'name': '"input1"', 'range': [590, 591], 'children': []}, {'type': 'StringLiteral', 'name': '"value1"', 'range': [592, 593], 'children': []}]}]}]}, {'type': 'Argument', 'name': 'output_data', 'range': [596, 604], 'children': [{'type': 'Identifier', 'name': 'output_data', 'range': [596, 597], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [598, 604], 'children': [{'type': 'Property', 'name': 'output1', 'range': [599, 603], 'children': [{'type': 'StringLiteral', 'name': '"output1"', 'range': [599, 600], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [601, 603], 'children': [{'type': 'StringLiteral', 'name': '"result1"', 'range': [602, 603], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'add_time', 'range': [607, 614], 'children': [{'type': 'Identifier', 'name': 'add_time', 'range': [607, 608], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [609, 610], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [611, 612], 'children': []}]}, {'type': 'Argument', 'name': 'queue_time', 'range': [616, 619], 'children': [{'type': 'Identifier', 'name': 'queue_time', 'range': [616, 617], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [618, 619], 'children': []}]}, {'type': 'Argument', 'name': 'start_time', 'range': [621, 628], 'children': [{'type': 'Identifier', 'name': 'start_time', 'range': [621, 622], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [623, 624], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [625, 626], 'children': []}]}, {'type': 'Argument', 'name': 'end_time', 'range': [630, 637], 'children': [{'type': 'Identifier', 'name': 'end_time', 'range': [630, 631], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [632, 633], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [634, 635], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [642, 649], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [642, 643], 'children': []}, {'type': 'Identifier', 'name': 'connection_manager', 'range': [643, 644], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [645, 646], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [647, 648], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [651, 658], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [651, 652], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [653, 654], 'children': []}, {'type': 'Identifier', 'name': 'assert_not_called', 'range': [655, 656], 'children': []}]}]}]}]}
2025-01-08 09:53:49,014 - INFO - Starting Step 4: AST normalization
2025-01-08 09:54:40,374 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'FunctionDecl', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [524, 528], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [525, 528], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result_no_subscribers', 'range': [526, 527], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [529, 536], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [529, 530], 'children': []}, {'type': 'Type', 'name': 'ConnectionManager', 'range': [531, 532], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [533, 536], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [533, 534], 'children': []}, {'type': 'Type', 'name': 'AsyncMock', 'range': [535, 536], 'children': []}]}, {'type': 'Type', 'name': 'None', 'range': [540, 541], 'children': []}, {'type': 'Block', 'name': '', 'range': [542, 659], 'children': [{'type': 'VariableDecl', 'name': 'result', 'range': [543, 639], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [543, 544], 'children': []}, {'type': 'Type', 'name': 'ExecutionResult', 'range': [545, 546], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionResult', 'range': [547, 548], 'children': []}, {'type': 'Argument', 'name': 'graph_id', 'range': [550, 553], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [550, 551], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [552, 553], 'children': []}]}, {'type': 'Argument', 'name': 'graph_version', 'range': [555, 558], 'children': [{'type': 'Identifier', 'name': 'graph_version', 'range': [555, 556], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [557, 558], 'children': []}]}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [560, 563], 'children': [{'type': 'Identifier', 'name': 'graph_exec_id', 'range': [560, 561], 'children': []}, {'type': 'Literal', 'name': '"test_exec_id"', 'range': [562, 563], 'children': []}]}, {'type': 'Argument', 'name': 'node_exec_id', 'range': [565, 568], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [565, 566], 'children': []}, {'type': 'Literal', 'name': '"test_node_exec_id"', 'range': [567, 568], 'children': []}]}, {'type': 'Argument', 'name': 'node_id', 'range': [570, 573], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [570, 571], 'children': []}, {'type': 'Literal', 'name': '"test_node_id"', 'range': [572, 573], 'children': []}]}, {'type': 'Argument', 'name': 'block_id', 'range': [575, 578], 'children': [{'type': 'Identifier', 'name': 'block_id', 'range': [575, 576], 'children': []}, {'type': 'Literal', 'name': '"test_block_id"', 'range': [577, 578], 'children': []}]}, {'type': 'Argument', 'name': 'status', 'range': [580, 585], 'children': [{'type': 'Identifier', 'name': 'status', 'range': [580, 581], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [582, 583], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [584, 585], 'children': []}]}, {'type': 'Argument', 'name': 'input_data', 'range': [587, 594], 'children': [{'type': 'Identifier', 'name': 'input_data', 'range': [587, 588], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [589, 594], 'children': [{'type': 'Property', 'name': 'input1', 'range': [590, 593], 'children': [{'type': 'Literal', 'name': '"input1"', 'range': [590, 591], 'children': []}, {'type': 'Literal', 'name': '"value1"', 'range': [592, 593], 'children': []}]}]}]}, {'type': 'Argument', 'name': 'output_data', 'range': [596, 604], 'children': [{'type': 'Identifier', 'name': 'output_data', 'range': [596, 597], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [598, 604], 'children': [{'type': 'Property', 'name': 'output1', 'range': [599, 603], 'children': [{'type': 'Literal', 'name': '"output1"', 'range': [599, 600], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [601, 603], 'children': [{'type': 'Literal', 'name': '"result1"', 'range': [602, 603], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'add_time', 'range': [607, 614], 'children': [{'type': 'Identifier', 'name': 'add_time', 'range': [607, 608], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [609, 610], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [611, 612], 'children': []}]}, {'type': 'Argument', 'name': 'queue_time', 'range': [616, 619], 'children': [{'type': 'Identifier', 'name': 'queue_time', 'range': [616, 617], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [618, 619], 'children': []}]}, {'type': 'Argument', 'name': 'start_time', 'range': [621, 628], 'children': [{'type': 'Identifier', 'name': 'start_time', 'range': [621, 622], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [623, 624], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [625, 626], 'children': []}]}, {'type': 'Argument', 'name': 'end_time', 'range': [630, 637], 'children': [{'type': 'Identifier', 'name': 'end_time', 'range': [630, 631], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [632, 633], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [634, 635], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [642, 649], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [642, 643], 'children': []}, {'type': 'CallExpression', 'name': 'send_execution_result', 'range': [643, 648], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [643, 644], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [647, 648], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [651, 658], 'children': [{'type': 'CallExpression', 'name': 'assert_not_called', 'range': [651, 656], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [651, 652], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [653, 654], 'children': []}]}]}]}]}]}
2025-01-08 09:54:40,375 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:54:53,889 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionDecl', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionSignature', 'name': 'test_send_execution_result', 'range': [330, 347], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [330, 334], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [331, 334], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result', 'range': [332, 353], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [353, 347], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [335, 337], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [339, 341], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [344, 347], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [348, 523], 'children': [{'type': 'Assignment', 'name': '', 'range': [349, 359], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [349, 365], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [351, 365], 'children': []}, {'type': 'StringLiteral', 'name': 'test_graph', 'range': [353, 365], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [356, 358], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [357, 358], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [360, 471], 'children': [{'type': 'TypeAnnotation', 'name': 'ExecutionResult', 'range': [361, 362], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [364, 471], 'children': [{'type': 'PropertyAssignment', 'name': 'graph_id', 'range': [367, 369], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [369, 369], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_version', 'range': [372, 374], 'children': [{'type': 'NumericLiteral', 'name': '1', 'range': [374, 374], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_exec_id', 'range': [377, 379], 'children': [{'type': 'StringLiteral', 'name': 'test_exec_id', 'range': [379, 379], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_exec_id', 'range': [382, 384], 'children': [{'type': 'StringLiteral', 'name': 'test_node_exec_id', 'range': [384, 384], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_id', 'range': [387, 389], 'children': [{'type': 'StringLiteral', 'name': 'test_node_id', 'range': [389, 389], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'block_id', 'range': [392, 394], 'children': [{'type': 'StringLiteral', 'name': 'test_block_id', 'range': [394, 394], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [397, 402], 'children': [{'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [399, 402], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [401, 402], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'input_data', 'range': [404, 410], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [406, 410], 'children': [{'type': 'PropertyAssignment', 'name': 'input1', 'range': [407, 409], 'children': [{'type': 'StringLiteral', 'name': 'value1', 'range': [409, 409], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'output_data', 'range': [413, 421], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [415, 421], 'children': [{'type': 'PropertyAssignment', 'name': 'output1', 'range': [416, 420], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [418, 420], 'children': [{'type': 'StringLiteral', 'name': 'result1', 'range': [419, 420], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'add_time', 'range': [424, 435], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [426, 435], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [426, 427], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [428, 429], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [429, 435], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [430, 434], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [432, 433], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [434, 434], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'queue_time', 'range': [438, 440], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [440, 440], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'start_time', 'range': [443, 454], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [445, 454], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [445, 446], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [447, 448], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [448, 454], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [449, 453], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [451, 452], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [453, 453], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'end_time', 'range': [457, 468], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [459, 468], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [459, 460], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [461, 462], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 468], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [463, 467], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [465, 466], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [467, 467], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [474, 481], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [474, 481], 'children': [{'type': 'CallExpression', 'name': 'connection_manager.send_execution_result', 'range': [475, 480], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [475, 476], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [477, 478], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [478, 480], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [479, 480], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [483, 521], 'children': [{'type': 'CallExpression', 'name': 'mock_websocket.send_text.assert_called_once_with', 'range': [483, 520], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [483, 484], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [485, 486], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once_with', 'range': [487, 488], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [488, 520], 'children': [{'type': 'CallExpression', 'name': 'WsMessage.model_dump_json', 'range': [490, 519], 'children': [{'type': 'Identifier', 'name': 'WsMessage', 'range': [490, 491], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [491, 514], 'children': [{'type': 'PropertyAssignment', 'name': 'method', 'range': [493, 498], 'children': [{'type': 'Identifier', 'name': 'Methods', 'range': [495, 496], 'children': []}, {'type': 'Identifier', 'name': 'EXECUTION_EVENT', 'range': [497, 498], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'channel', 'range': [500, 502], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [502, 502], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'data', 'range': [505, 512], 'children': [{'type': 'CallExpression', 'name': 'result.model_dump', 'range': [507, 511], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [507, 508], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [509, 510], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'model_dump_json', 'range': [516, 519], 'children': [{'type': 'Identifier', 'name': 'model_dump_json', 'range': [517, 518], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 09:54:53,889 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:55:33,782 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'FunctionDecl', 'name': 'test_send_execution_result_no_subscribers', 'range': [524, 659], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [524, 528], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [525, 528], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result_no_subscribers', 'range': [526, 527], 'children': []}, {'type': 'Parameter', 'name': 'connection_manager', 'range': [529, 536], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [529, 530], 'children': []}, {'type': 'Type', 'name': 'ConnectionManager', 'range': [531, 532], 'children': []}]}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [533, 536], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [533, 534], 'children': []}, {'type': 'Type', 'name': 'AsyncMock', 'range': [535, 536], 'children': []}]}, {'type': 'Type', 'name': 'None', 'range': [540, 541], 'children': []}, {'type': 'Block', 'name': '', 'range': [542, 659], 'children': [{'type': 'VariableDecl', 'name': 'result', 'range': [543, 639], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [543, 544], 'children': []}, {'type': 'Type', 'name': 'ExecutionResult', 'range': [545, 546], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionResult', 'range': [547, 548], 'children': []}, {'type': 'Argument', 'name': 'graph_id', 'range': [550, 553], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [550, 551], 'children': []}, {'type': 'Literal', 'name': '"test_graph"', 'range': [552, 553], 'children': []}]}, {'type': 'Argument', 'name': 'graph_version', 'range': [555, 558], 'children': [{'type': 'Identifier', 'name': 'graph_version', 'range': [555, 556], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [557, 558], 'children': []}]}, {'type': 'Argument', 'name': 'graph_exec_id', 'range': [560, 563], 'children': [{'type': 'Identifier', 'name': 'graph_exec_id', 'range': [560, 561], 'children': []}, {'type': 'Literal', 'name': '"test_exec_id"', 'range': [562, 563], 'children': []}]}, {'type': 'Argument', 'name': 'node_exec_id', 'range': [565, 568], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [565, 566], 'children': []}, {'type': 'Literal', 'name': '"test_node_exec_id"', 'range': [567, 568], 'children': []}]}, {'type': 'Argument', 'name': 'node_id', 'range': [570, 573], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [570, 571], 'children': []}, {'type': 'Literal', 'name': '"test_node_id"', 'range': [572, 573], 'children': []}]}, {'type': 'Argument', 'name': 'block_id', 'range': [575, 578], 'children': [{'type': 'Identifier', 'name': 'block_id', 'range': [575, 576], 'children': []}, {'type': 'Literal', 'name': '"test_block_id"', 'range': [577, 578], 'children': []}]}, {'type': 'Argument', 'name': 'status', 'range': [580, 585], 'children': [{'type': 'Identifier', 'name': 'status', 'range': [580, 581], 'children': []}, {'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [582, 583], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [584, 585], 'children': []}]}, {'type': 'Argument', 'name': 'input_data', 'range': [587, 594], 'children': [{'type': 'Identifier', 'name': 'input_data', 'range': [587, 588], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [589, 594], 'children': [{'type': 'Property', 'name': 'input1', 'range': [590, 593], 'children': [{'type': 'Literal', 'name': '"input1"', 'range': [590, 591], 'children': []}, {'type': 'Literal', 'name': '"value1"', 'range': [592, 593], 'children': []}]}]}]}, {'type': 'Argument', 'name': 'output_data', 'range': [596, 604], 'children': [{'type': 'Identifier', 'name': 'output_data', 'range': [596, 597], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [598, 604], 'children': [{'type': 'Property', 'name': 'output1', 'range': [599, 603], 'children': [{'type': 'Literal', 'name': '"output1"', 'range': [599, 600], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [601, 603], 'children': [{'type': 'Literal', 'name': '"result1"', 'range': [602, 603], 'children': []}]}]}]}]}, {'type': 'Argument', 'name': 'add_time', 'range': [607, 614], 'children': [{'type': 'Identifier', 'name': 'add_time', 'range': [607, 608], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [609, 610], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [611, 612], 'children': []}]}, {'type': 'Argument', 'name': 'queue_time', 'range': [616, 619], 'children': [{'type': 'Identifier', 'name': 'queue_time', 'range': [616, 617], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [618, 619], 'children': []}]}, {'type': 'Argument', 'name': 'start_time', 'range': [621, 628], 'children': [{'type': 'Identifier', 'name': 'start_time', 'range': [621, 622], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [623, 624], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [625, 626], 'children': []}]}, {'type': 'Argument', 'name': 'end_time', 'range': [630, 637], 'children': [{'type': 'Identifier', 'name': 'end_time', 'range': [630, 631], 'children': []}, {'type': 'Identifier', 'name': 'datetime', 'range': [632, 633], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [634, 635], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [642, 649], 'children': [{'type': 'Keyword', 'name': 'await', 'range': [642, 643], 'children': []}, {'type': 'CallExpression', 'name': 'send_execution_result', 'range': [643, 648], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [643, 644], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [647, 648], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [651, 658], 'children': [{'type': 'CallExpression', 'name': 'assert_not_called', 'range': [651, 656], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [651, 652], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [653, 654], 'children': []}]}]}]}]}]}
2025-01-08 09:55:33,782 - INFO - Completed main AST analysis flow
2025-01-08 09:55:33,784 - INFO - Successfully processed chunk
2025-01-08 09:56:00,464 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionDecl', 'name': 'test_send_execution_result', 'range': [330, 523], 'children': [{'type': 'FunctionSignature', 'name': 'test_send_execution_result', 'range': [330, 347], 'children': [{'type': 'Keyword', 'name': 'async', 'range': [330, 334], 'children': []}, {'type': 'Keyword', 'name': 'def', 'range': [331, 334], 'children': []}, {'type': 'Identifier', 'name': 'test_send_execution_result', 'range': [332, 353], 'children': []}, {'type': 'ParameterList', 'name': '', 'range': [353, 347], 'children': [{'type': 'Parameter', 'name': 'connection_manager', 'range': [335, 337], 'children': []}, {'type': 'Parameter', 'name': 'mock_websocket', 'range': [339, 341], 'children': []}]}, {'type': 'ReturnType', 'name': 'None', 'range': [344, 347], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [348, 523], 'children': [{'type': 'Assignment', 'name': '', 'range': [349, 359], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [349, 365], 'children': []}, {'type': 'Identifier', 'name': 'subscriptions', 'range': [351, 365], 'children': []}, {'type': 'StringLiteral', 'name': 'test_graph', 'range': [353, 365], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [356, 358], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [357, 358], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [360, 471], 'children': [{'type': 'TypeAnnotation', 'name': 'ExecutionResult', 'range': [361, 362], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [364, 471], 'children': [{'type': 'PropertyAssignment', 'name': 'graph_id', 'range': [367, 369], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [369, 369], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_version', 'range': [372, 374], 'children': [{'type': 'NumericLiteral', 'name': '1', 'range': [374, 374], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'graph_exec_id', 'range': [377, 379], 'children': [{'type': 'StringLiteral', 'name': 'test_exec_id', 'range': [379, 379], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_exec_id', 'range': [382, 384], 'children': [{'type': 'StringLiteral', 'name': 'test_node_exec_id', 'range': [384, 384], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'node_id', 'range': [387, 389], 'children': [{'type': 'StringLiteral', 'name': 'test_node_id', 'range': [389, 389], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'block_id', 'range': [392, 394], 'children': [{'type': 'StringLiteral', 'name': 'test_block_id', 'range': [394, 394], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [397, 402], 'children': [{'type': 'Identifier', 'name': 'ExecutionStatus', 'range': [399, 402], 'children': []}, {'type': 'Identifier', 'name': 'COMPLETED', 'range': [401, 402], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'input_data', 'range': [404, 410], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [406, 410], 'children': [{'type': 'PropertyAssignment', 'name': 'input1', 'range': [407, 409], 'children': [{'type': 'StringLiteral', 'name': 'value1', 'range': [409, 409], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'output_data', 'range': [413, 421], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [415, 421], 'children': [{'type': 'PropertyAssignment', 'name': 'output1', 'range': [416, 420], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [418, 420], 'children': [{'type': 'StringLiteral', 'name': 'result1', 'range': [419, 420], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'add_time', 'range': [424, 435], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [426, 435], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [426, 427], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [428, 429], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [429, 435], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [430, 434], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [432, 433], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [434, 434], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'queue_time', 'range': [438, 440], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [440, 440], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'start_time', 'range': [443, 454], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [445, 454], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [445, 446], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [447, 448], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [448, 454], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [449, 453], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [451, 452], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [453, 453], 'children': []}]}]}]}]}, {'type': 'PropertyAssignment', 'name': 'end_time', 'range': [457, 468], 'children': [{'type': 'CallExpression', 'name': 'datetime.now', 'range': [459, 468], 'children': [{'type': 'Identifier', 'name': 'datetime', 'range': [459, 460], 'children': []}, {'type': 'Identifier', 'name': 'now', 'range': [461, 462], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [462, 468], 'children': [{'type': 'NamedArgument', 'name': 'tz', 'range': [463, 467], 'children': [{'type': 'Identifier', 'name': 'timezone', 'range': [465, 466], 'children': []}, {'type': 'Identifier', 'name': 'utc', 'range': [467, 467], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [474, 481], 'children': [{'type': 'AwaitExpression', 'name': '', 'range': [474, 481], 'children': [{'type': 'CallExpression', 'name': 'connection_manager.send_execution_result', 'range': [475, 480], 'children': [{'type': 'Identifier', 'name': 'connection_manager', 'range': [475, 476], 'children': []}, {'type': 'Identifier', 'name': 'send_execution_result', 'range': [477, 478], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [478, 480], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [479, 480], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [483, 521], 'children': [{'type': 'CallExpression', 'name': 'mock_websocket.send_text.assert_called_once_with', 'range': [483, 520], 'children': [{'type': 'Identifier', 'name': 'mock_websocket', 'range': [483, 484], 'children': []}, {'type': 'Identifier', 'name': 'send_text', 'range': [485, 486], 'children': []}, {'type': 'Identifier', 'name': 'assert_called_once_with', 'range': [487, 488], 'children': []}, {'type': 'ArgumentList', 'name': '', 'range': [488, 520], 'children': [{'type': 'CallExpression', 'name': 'WsMessage.model_dump_json', 'range': [490, 519], 'children': [{'type': 'Identifier', 'name': 'WsMessage', 'range': [490, 491], 'children': []}, {'type': 'ObjectLiteral', 'name': '', 'range': [491, 514], 'children': [{'type': 'PropertyAssignment', 'name': 'method', 'range': [493, 498], 'children': [{'type': 'Identifier', 'name': 'Methods', 'range': [495, 496], 'children': []}, {'type': 'Identifier', 'name': 'EXECUTION_EVENT', 'range': [497, 498], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'channel', 'range': [500, 502], 'children': [{'type': 'StringLiteral', 'name': 'test_graph', 'range': [502, 502], 'children': []}]}, {'type': 'PropertyAssignment', 'name': 'data', 'range': [505, 512], 'children': [{'type': 'CallExpression', 'name': 'result.model_dump', 'range': [507, 511], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [507, 508], 'children': []}, {'type': 'Identifier', 'name': 'model_dump', 'range': [509, 510], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'model_dump_json', 'range': [516, 519], 'children': [{'type': 'Identifier', 'name': 'model_dump_json', 'range': [517, 518], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 09:56:00,465 - INFO - Completed main AST analysis flow
2025-01-08 09:56:00,466 - INFO - Successfully processed chunk
2025-01-08 09:56:00,509 - INFO - Starting code generation from AST
2025-01-08 10:26:02,227 - ERROR - Error in get_code_from_ast: Expecting value: line 30 column 1 (char 29)
2025-01-08 10:26:02,228 - INFO - Starting static code similarity comparison
2025-01-08 10:26:02,230 - INFO - Static similarity result: {'final_score': 30.0, 'length_similarity': 0.0, 'token_similarity': 0.0, 'structure_similarity': 0.0, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
