2025-01-08 10:27:27,416 - INFO - Processing sample 166
2025-01-08 10:27:27,416 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:37,417 - INFO - Successfully split code into 8 top-level declarations
2025-01-08 10:27:42,259 - INFO - Processing chunk #0 (size=321 chars, start_index=0)
2025-01-08 10:27:42,268 - INFO - Processing chunk with 321 chars starting at index 0
2025-01-08 10:27:42,295 - INFO - Starting main AST analysis flow
2025-01-08 10:27:42,296 - INFO - Tokenized code into 63 tokens
2025-01-08 10:27:42,328 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,729 - INFO - Processing chunk #1 (size=107 chars, start_index=63)
2025-01-08 10:27:51,766 - INFO - Processing chunk with 107 chars starting at index 63
2025-01-08 10:27:51,767 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,767 - INFO - Tokenized code into 24 tokens
2025-01-08 10:27:51,767 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,773 - INFO - Processing chunk #2 (size=217 chars, start_index=87)
2025-01-08 10:27:51,773 - INFO - Processing chunk with 217 chars starting at index 87
2025-01-08 10:27:51,773 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,773 - INFO - Tokenized code into 55 tokens
2025-01-08 10:27:51,773 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,080 - INFO - Processing chunk #3 (size=7308 chars, start_index=142)
2025-01-08 10:27:52,121 - INFO - Processing chunk with 7308 chars starting at index 142
2025-01-08 10:27:52,122 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,166 - INFO - Processing chunk #4 (size=2735 chars, start_index=1353)
2025-01-08 10:27:52,262 - INFO - Tokenized code into 1211 tokens
2025-01-08 10:27:52,266 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,263 - INFO - Processing chunk with 2735 chars starting at index 1353
2025-01-08 10:27:52,289 - INFO - Processing chunk #5 (size=1975 chars, start_index=1847)
2025-01-08 10:27:52,298 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,353 - INFO - Processing chunk #6 (size=3019 chars, start_index=2201)
2025-01-08 10:27:52,467 - INFO - Processing chunk with 3019 chars starting at index 2201
2025-01-08 10:27:52,383 - INFO - Processing chunk #7 (size=2764 chars, start_index=2737)
2025-01-08 10:27:52,473 - INFO - Processing chunk with 2764 chars starting at index 2737
2025-01-08 10:27:52,473 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,474 - INFO - Tokenized code into 467 tokens
2025-01-08 10:27:52,474 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,370 - INFO - Processing chunk with 1975 chars starting at index 1847
2025-01-08 10:27:52,467 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,467 - INFO - Tokenized code into 494 tokens
2025-01-08 10:27:52,496 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,701 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,709 - INFO - Tokenized code into 536 tokens
2025-01-08 10:27:52,748 - INFO - Tokenized code into 354 tokens
2025-01-08 10:27:52,784 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,809 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:57,232 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 62], 'children': [{'type': 'ImportDeclaration', 'name': 'base64', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'parseaddr', 'range': [3, 9], 'children': []}, {'type': 'ImportDeclaration', 'name': 'List', 'range': [10, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Credentials', 'range': [16, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'build', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'BaseModel', 'range': [32, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Block, BlockCategory, BlockOutput, BlockSchema', 'range': [38, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'SchemaField', 'range': [53, 61], 'children': []}]}
2025-01-08 10:27:57,583 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,403 - INFO - Step 1 result: {'type': 'Program', 'name': 'Attachment', 'range': [63, 86], 'children': []}
2025-01-08 10:28:00,404 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:04,832 - INFO - Step 1 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'GmailSendBlock', 'range': [1353, 1422], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1360, 1422], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1423, 1458], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1459, 1595], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [1597, 1664], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_send_email', 'range': [1665, 1763], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_create_message', 'range': [1765, 1845], 'children': []}]}
2025-01-08 10:28:04,840 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:06,101 - INFO - Step 1 result: {'type': 'Program', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'ClassDeclaration', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'Property', 'name': 'id', 'range': [94, 96]}, {'type': 'Property', 'name': 'subject', 'range': [98, 100]}, {'type': 'Property', 'name': 'snippet', 'range': [102, 104]}, {'type': 'Property', 'name': 'from_', 'range': [106, 108]}, {'type': 'Property', 'name': 'to', 'range': [110, 112]}, {'type': 'Property', 'name': 'date', 'range': [114, 116]}, {'type': 'Property', 'name': 'body', 'range': [118, 122]}, {'type': 'Property', 'name': 'sizeEstimate', 'range': [130, 132]}, {'type': 'Property', 'name': 'attachments', 'range': [134, 139]}]}]}
2025-01-08 10:28:06,101 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:07,013 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [2737, 3203], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2737, 2784], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2786, 2820], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2822, 2961], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2963, 3025], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_remove_label', 'range': [3027, 3123], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [3125, 3202], 'children': []}]}
2025-01-08 10:28:07,104 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:07,785 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [1847, 2200], 'children': [{'type': 'ClassDeclaration', 'name': 'GmailListLabelsBlock', 'range': [1847, 1853], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1854, 1860], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1861, 1873], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1875, 1881], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [1882, 1898], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1899, 1912], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1914, 2071], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2073, 2126], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_list_labels', 'range': [2127, 2199], 'children': []}]}
2025-01-08 10:28:07,911 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:08,437 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [2201, 2736], 'children': [{'type': 'ClassDeclaration', 'name': 'GmailAddLabelBlock', 'range': [2201, 2207], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [2208, 2214], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [2215, 2227], 'children': []}, {'type': 'VariableDeclaration', 'name': 'message_id', 'range': [2228, 2241], 'children': []}, {'type': 'VariableDeclaration', 'name': 'label_name', 'range': [2242, 2255], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2257, 2263], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [2264, 2277], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [2278, 2291], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2293, 2432], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2434, 2495], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_add_label', 'range': [2496, 2575], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_get_or_create_label', 'range': [2576, 2656], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [2657, 2734], 'children': []}]}
2025-01-08 10:28:08,493 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,059 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [142, 1352], 'children': [{'type': 'ClassDeclaration', 'name': 'GmailReadBlock', 'range': [142, 147], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [149, 154], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [156, 167], 'children': []}, {'type': 'VariableDeclaration', 'name': 'query', 'range': [169, 186], 'children': []}, {'type': 'VariableDeclaration', 'name': 'max_results', 'range': [188, 205], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [208, 213], 'children': []}, {'type': 'VariableDeclaration', 'name': 'email', 'range': [215, 227], 'children': []}, {'type': 'VariableDeclaration', 'name': 'emails', 'range': [229, 244], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [246, 258], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [261, 564], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [566, 637], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_build_service', 'range': [642, 751], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_read_emails', 'range': [753, 1050], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_get_email_body', 'range': [1052, 1153], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_get_attachments', 'range': [1155, 1260], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'download_attachment', 'range': [1272, 1351], 'children': []}]}
2025-01-08 10:28:10,064 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:15,271 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'base64', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'base64', 'range': [0, 2], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'parseaddr', 'range': [3, 9], 'children': [{'type': 'ImportSpecifier', 'name': 'parseaddr', 'range': [3, 9], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'List', 'range': [10, 14], 'children': [{'type': 'ImportSpecifier', 'name': 'List', 'range': [10, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'Credentials', 'range': [16, 24], 'children': [{'type': 'ImportSpecifier', 'name': 'Credentials', 'range': [16, 24], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'build', 'range': [25, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'build', 'range': [25, 31], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'BaseModel', 'range': [32, 36], 'children': [{'type': 'ImportSpecifier', 'name': 'BaseModel', 'range': [32, 36], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'Block, BlockCategory, BlockOutput, BlockSchema', 'range': [38, 52], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [38, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [38, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [38, 52], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [38, 52], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'SchemaField', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [53, 61], 'children': []}]}]}
2025-01-08 10:28:15,271 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:17,348 - INFO - Step 2 result: {'type': 'Program', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'ClassDeclaration', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [65, 67], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [68, 86], 'children': [{'type': 'FieldDeclaration', 'name': 'filename', 'range': [70, 73], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [72, 73], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'content_type', 'range': [74, 77], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [76, 77], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'size', 'range': [78, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [80, 81], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'attachment_id', 'range': [82, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [84, 85], 'children': []}]}]}]}]}
2025-01-08 10:28:17,348 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:23,027 - INFO - Step 2 result: {'type': 'Program', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'ClassDeclaration', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'Property', 'name': 'id', 'range': [94, 96], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96]}]}, {'type': 'Property', 'name': 'subject', 'range': [98, 100], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [100, 100]}]}, {'type': 'Property', 'name': 'snippet', 'range': [102, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [104, 104]}]}, {'type': 'Property', 'name': 'from_', 'range': [106, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108]}]}, {'type': 'Property', 'name': 'to', 'range': [110, 112], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [112, 112]}]}, {'type': 'Property', 'name': 'date', 'range': [114, 116], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [116, 116]}]}, {'type': 'Property', 'name': 'body', 'range': [118, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [120, 120]}, {'type': 'DefaultValue', 'name': '""', 'range': [122, 122]}]}, {'type': 'Property', 'name': 'sizeEstimate', 'range': [130, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [132, 132]}]}, {'type': 'Property', 'name': 'attachments', 'range': [134, 139], 'children': [{'type': 'TypeAnnotation', 'name': 'List', 'range': [136, 136], 'children': [{'type': 'GenericType', 'name': 'Attachment', 'range': [138, 138]}]}]}]}]}
2025-01-08 10:28:23,027 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:26,684 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'base64', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'parseaddr', 'range': [3, 9], 'children': []}, {'type': 'ImportDeclaration', 'name': 'List', 'range': [10, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Credentials', 'range': [16, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'build', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'BaseModel', 'range': [32, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Block, BlockCategory, BlockOutput, BlockSchema', 'range': [38, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'SchemaField', 'range': [53, 61], 'children': []}]}
2025-01-08 10:28:26,684 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:28,016 - INFO - Step 3 result: {'type': 'Program', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'ClassDeclaration', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [65, 67], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [68, 86], 'children': [{'type': 'FieldDeclaration', 'name': 'filename', 'range': [70, 73], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [72, 73], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'content_type', 'range': [74, 77], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [76, 77], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'size', 'range': [78, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [80, 81], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'attachment_id', 'range': [82, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [84, 85], 'children': []}]}]}]}]}
2025-01-08 10:28:28,016 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:28,493 - INFO - Step 2 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'GmailSendBlock', 'range': [1353, 1422], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [1360, 1422], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [1367, 1378], 'children': []}, {'type': 'FieldDeclaration', 'name': 'to', 'range': [1380, 1392], 'children': []}, {'type': 'FieldDeclaration', 'name': 'subject', 'range': [1394, 1406], 'children': []}, {'type': 'FieldDeclaration', 'name': 'body', 'range': [1408, 1420], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1423, 1458], 'children': [{'type': 'FieldDeclaration', 'name': 'result', 'range': [1430, 1442], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [1444, 1456], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1459, 1595], 'children': [{'type': 'ExpressionStatement', 'name': 'super().__init__', 'range': [1466, 1594], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [1597, 1664], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [1623, 1634], 'children': []}, {'type': 'VariableDeclaration', 'name': 'send_result', 'range': [1636, 1657], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1659, 1662], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_send_email', 'range': [1665, 1763], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [1689, 1704], 'children': []}, {'type': 'VariableDeclaration', 'name': 'message', 'range': [1706, 1717], 'children': []}, {'type': 'VariableDeclaration', 'name': 'sent_message', 'range': [1719, 1747], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1750, 1762], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_create_message', 'range': [1765, 1845], 'children': [{'type': 'ImportStatement', 'name': 'import', 'range': [1787, 1788], 'children': []}, {'type': 'FromImportStatement', 'name': 'from', 'range': [1790, 1797], 'children': []}, {'type': 'VariableDeclaration', 'name': 'message', 'range': [1800, 1805], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["to"]', 'range': [1807, 1812], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["subject"]', 'range': [1814, 1819], 'children': []}, {'type': 'VariableDeclaration', 'name': 'raw_message', 'range': [1821, 1837], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1839, 1844], 'children': []}]}]}
2025-01-08 10:28:28,500 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:33,622 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': 'base64', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'parseaddr', 'range': [3, 9], 'children': []}, {'type': 'ImportDeclaration', 'name': 'List', 'range': [10, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Credentials', 'range': [16, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'build', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'BaseModel', 'range': [32, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Block, BlockCategory, BlockOutput, BlockSchema', 'range': [38, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'SchemaField', 'range': [53, 61], 'children': []}]}
2025-01-08 10:28:33,623 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:37,971 - INFO - Step 4 result: {'type': 'Program', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'ClassDecl', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [65, 67], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [68, 86], 'children': [{'type': 'FieldDecl', 'name': 'filename', 'range': [70, 73], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [72, 73], 'children': []}]}, {'type': 'FieldDecl', 'name': 'content_type', 'range': [74, 77], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [76, 77], 'children': []}]}, {'type': 'FieldDecl', 'name': 'size', 'range': [78, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [80, 81], 'children': []}]}, {'type': 'FieldDecl', 'name': 'attachment_id', 'range': [82, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [84, 85], 'children': []}]}]}]}]}
2025-01-08 10:28:37,971 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:38,808 - INFO - Step 3 result: {'type': 'Program', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'ClassDeclaration', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'Property', 'name': 'id', 'range': [94, 96], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96]}]}, {'type': 'Property', 'name': 'subject', 'range': [98, 100], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [100, 100]}]}, {'type': 'Property', 'name': 'snippet', 'range': [102, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [104, 104]}]}, {'type': 'Property', 'name': 'from_', 'range': [106, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108]}]}, {'type': 'Property', 'name': 'to', 'range': [110, 112], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [112, 112]}]}, {'type': 'Property', 'name': 'date', 'range': [114, 116], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [116, 116]}]}, {'type': 'Property', 'name': 'body', 'range': [118, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [120, 120]}, {'type': 'DefaultValue', 'name': '""', 'range': [122, 122]}]}, {'type': 'Property', 'name': 'sizeEstimate', 'range': [130, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [132, 132]}]}, {'type': 'Property', 'name': 'attachments', 'range': [134, 139], 'children': [{'type': 'TypeAnnotation', 'name': 'List', 'range': [136, 136], 'children': [{'type': 'GenericType', 'name': 'Attachment', 'range': [138, 138]}]}]}]}]}
2025-01-08 10:28:38,809 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:43,161 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 61], 'children': [{'type': 'ImportDeclaration', 'name': 'base64', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'parseaddr', 'range': [3, 9], 'children': []}, {'type': 'ImportDeclaration', 'name': 'List', 'range': [10, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Credentials', 'range': [16, 24], 'children': []}, {'type': 'ImportDeclaration', 'name': 'build', 'range': [25, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': 'BaseModel', 'range': [32, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': 'Block, BlockCategory, BlockOutput, BlockSchema', 'range': [38, 52], 'children': []}, {'type': 'ImportDeclaration', 'name': 'SchemaField', 'range': [53, 61], 'children': []}]}]}
2025-01-08 10:28:43,161 - INFO - Completed main AST analysis flow
2025-01-08 10:28:43,162 - INFO - Successfully processed chunk
2025-01-08 10:28:46,210 - INFO - Step 5 result: {'type': 'Program', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'ClassDecl', 'name': 'Attachment', 'range': [63, 86], 'children': [{'type': 'Inheritance', 'name': 'BaseModel', 'range': [65, 67], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [68, 86], 'children': [{'type': 'FieldDecl', 'name': 'filename', 'range': [70, 73], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [72, 73], 'children': []}]}, {'type': 'FieldDecl', 'name': 'content_type', 'range': [74, 77], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [76, 77], 'children': []}]}, {'type': 'FieldDecl', 'name': 'size', 'range': [78, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [80, 81], 'children': []}]}, {'type': 'FieldDecl', 'name': 'attachment_id', 'range': [82, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [84, 85], 'children': []}]}]}]}]}
2025-01-08 10:28:46,211 - INFO - Completed main AST analysis flow
2025-01-08 10:28:46,211 - INFO - Successfully processed chunk
2025-01-08 10:28:49,568 - INFO - Step 3 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'GmailSendBlock', 'range': [1353, 1422], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [1360, 1422], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [1367, 1378], 'children': []}, {'type': 'FieldDeclaration', 'name': 'to', 'range': [1380, 1392], 'children': []}, {'type': 'FieldDeclaration', 'name': 'subject', 'range': [1394, 1406], 'children': []}, {'type': 'FieldDeclaration', 'name': 'body', 'range': [1408, 1420], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1423, 1458], 'children': [{'type': 'FieldDeclaration', 'name': 'result', 'range': [1430, 1442], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [1444, 1456], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1459, 1595], 'children': [{'type': 'ExpressionStatement', 'name': 'super().__init__', 'range': [1466, 1594], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [1597, 1664], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [1623, 1634], 'children': []}, {'type': 'VariableDeclaration', 'name': 'send_result', 'range': [1636, 1657], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1659, 1662], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_send_email', 'range': [1665, 1763], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [1689, 1704], 'children': []}, {'type': 'VariableDeclaration', 'name': 'message', 'range': [1706, 1717], 'children': []}, {'type': 'VariableDeclaration', 'name': 'sent_message', 'range': [1719, 1747], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1750, 1762], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_create_message', 'range': [1765, 1845], 'children': [{'type': 'ImportStatement', 'name': 'import', 'range': [1787, 1788], 'children': []}, {'type': 'FromImportStatement', 'name': 'from', 'range': [1790, 1797], 'children': []}, {'type': 'VariableDeclaration', 'name': 'message', 'range': [1800, 1805], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["to"]', 'range': [1807, 1812], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["subject"]', 'range': [1814, 1819], 'children': []}, {'type': 'VariableDeclaration', 'name': 'raw_message', 'range': [1821, 1837], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1839, 1844], 'children': []}]}]}
2025-01-08 10:28:49,568 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:53,403 - INFO - Step 4 result: {'type': 'Program', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'ClassDecl', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'Property', 'name': 'id', 'range': [94, 96], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96]}]}, {'type': 'Property', 'name': 'subject', 'range': [98, 100], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [100, 100]}]}, {'type': 'Property', 'name': 'snippet', 'range': [102, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [104, 104]}]}, {'type': 'Property', 'name': 'from_', 'range': [106, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108]}]}, {'type': 'Property', 'name': 'to', 'range': [110, 112], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [112, 112]}]}, {'type': 'Property', 'name': 'date', 'range': [114, 116], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [116, 116]}]}, {'type': 'Property', 'name': 'body', 'range': [118, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [120, 120]}, {'type': 'DefaultValue', 'name': '""', 'range': [122, 122]}]}, {'type': 'Property', 'name': 'sizeEstimate', 'range': [130, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [132, 132]}]}, {'type': 'Property', 'name': 'attachments', 'range': [134, 139], 'children': [{'type': 'TypeAnnotation', 'name': 'List', 'range': [136, 136], 'children': [{'type': 'GenericType', 'name': 'Attachment', 'range': [138, 138]}]}]}]}]}
2025-01-08 10:28:53,403 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:03,587 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [1847, 2200], 'children': [{'type': 'ClassDeclaration', 'name': 'GmailListLabelsBlock', 'range': [1847, 1853], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1849, 1851], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1854, 1860], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1856, 1858], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1861, 1873], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [1863, 1863], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1864, 1864], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [1865, 1872], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.labels"]', 'range': [1868, 1870], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1875, 1881], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1877, 1879], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [1882, 1898], 'children': [{'type': 'TypeAnnotation', 'name': 'list[dict]', 'range': [1884, 1887], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1888, 1888], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1889, 1897], 'children': [{'type': 'Argument', 'name': 'description="List of labels"', 'range': [1892, 1894], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1899, 1912], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1901, 1901], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1902, 1902], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1903, 1911], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [1906, 1908], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1914, 2071], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1917, 1917], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [1921, 1923], 'children': []}, {'type': 'FunctionCall', 'name': '__init__', 'range': [1925, 2070], 'children': [{'type': 'Argument', 'name': 'id="3e1c2c1c-c689-4520-b956-1f3bf4e02bb7"', 'range': [1928, 1930], 'children': []}, {'type': 'Argument', 'name': 'description="This block lists all labels in Gmail."', 'range': [1933, 1935], 'children': []}, {'type': 'Argument', 'name': 'categories={BlockCategory.COMMUNICATION}', 'range': [1938, 1944], 'children': []}, {'type': 'Argument', 'name': 'input_schema=GmailListLabelsBlock.Input', 'range': [1947, 1951], 'children': []}, {'type': 'Argument', 'name': 'output_schema=GmailListLabelsBlock.Output', 'range': [1954, 1958], 'children': []}, {'type': 'Argument', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [1961, 1964], 'children': []}, {'type': 'Argument', 'name': 'test_input={"credentials": TEST_CREDENTIALS_INPUT}', 'range': [1967, 1976], 'children': []}, {'type': 'Argument', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [1979, 1981], 'children': []}, {'type': 'Argument', 'name': 'test_output=[("result", [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}])]', 'range': [1984, 2023], 'children': []}, {'type': 'Argument', 'name': 'test_mock={"_list_labels": lambda *args, **kwargs: [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}]}', 'range': [2026, 2067], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2073, 2126], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2077, 2077], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2079, 2081], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [2085, 2087], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [2091, 2091], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [2096, 2096], 'children': []}, {'type': 'VariableDeclaration', 'name': 'service', 'range': [2099, 2111], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2100, 2100], 'children': [{'type': 'FunctionCall', 'name': 'GmailReadBlock._build_service', 'range': [2101, 2110], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2105, 2105], 'children': []}, {'type': 'Argument', 'name': 'kwargs', 'range': [2109, 2109], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2112, 2120], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2113, 2113], 'children': [{'type': 'FunctionCall', 'name': 'self._list_labels', 'range': [2114, 2119], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2118, 2118], 'children': []}]}]}]}, {'type': 'Yield', 'name': 'yield', 'range': [2121, 2125], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [2122, 2122], 'children': []}, {'type': 'Argument', 'name': 'labels', 'range': [2124, 2124], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '_list_labels', 'range': [2127, 2199], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2130, 2130], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2132, 2132], 'children': []}, {'type': 'ReturnType', 'name': 'list[dict]', 'range': [2136, 2139], 'children': []}, {'type': 'VariableDeclaration', 'name': 'results', 'range': [2142, 2164], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2143, 2143], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().list', 'range': [2144, 2163], 'children': [{'type': 'Argument', 'name': 'userId="me"', 'range': [2156, 2158], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2165, 2176], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2166, 2166], 'children': [{'type': 'FunctionCall', 'name': 'results.get', 'range': [2167, 2175], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2171, 2171], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2173, 2174], 'children': []}]}]}]}, {'type': 'Return', 'name': 'return', 'range': [2177, 2199], 'children': [{'type': 'ListComprehension', 'name': '[{"id": label["id"], "name": label["name"]} for label in labels]', 'range': [2178, 2198], 'children': []}]}]}]}
2025-01-08 10:29:03,632 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:07,558 - INFO - Step 5 result: {'type': 'Program', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'ClassDecl', 'name': 'Email', 'range': [87, 141], 'children': [{'type': 'Property', 'name': 'id', 'range': [94, 96], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [96, 96]}]}, {'type': 'Property', 'name': 'subject', 'range': [98, 100], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [100, 100]}]}, {'type': 'Property', 'name': 'snippet', 'range': [102, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [104, 104]}]}, {'type': 'Property', 'name': 'from_', 'range': [106, 108], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108]}]}, {'type': 'Property', 'name': 'to', 'range': [110, 112], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [112, 112]}]}, {'type': 'Property', 'name': 'date', 'range': [114, 116], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [116, 116]}]}, {'type': 'Property', 'name': 'body', 'range': [118, 122], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [120, 120]}, {'type': 'DefaultValue', 'name': '""', 'range': [122, 122]}]}, {'type': 'Property', 'name': 'sizeEstimate', 'range': [130, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [132, 132]}]}, {'type': 'Property', 'name': 'attachments', 'range': [134, 139], 'children': [{'type': 'TypeAnnotation', 'name': 'List', 'range': [136, 136], 'children': [{'type': 'GenericType', 'name': 'Attachment', 'range': [138, 138]}]}]}]}]}
2025-01-08 10:29:07,559 - INFO - Completed main AST analysis flow
2025-01-08 10:29:07,559 - INFO - Successfully processed chunk
2025-01-08 10:29:09,279 - INFO - Step 4 result: {'top_level_declarations': [{'type': 'ClassDecl', 'name': 'GmailSendBlock', 'range': [1353, 1422], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [1360, 1422], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [1367, 1378], 'children': []}, {'type': 'FieldDecl', 'name': 'to', 'range': [1380, 1392], 'children': []}, {'type': 'FieldDecl', 'name': 'subject', 'range': [1394, 1406], 'children': []}, {'type': 'FieldDecl', 'name': 'body', 'range': [1408, 1420], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1423, 1458], 'children': [{'type': 'FieldDecl', 'name': 'result', 'range': [1430, 1442], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [1444, 1456], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1459, 1595], 'children': [{'type': 'ExpressionStatement', 'name': 'super().__init__', 'range': [1466, 1594], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [1597, 1664], 'children': [{'type': 'VariableDecl', 'name': 'service', 'range': [1623, 1634], 'children': []}, {'type': 'VariableDecl', 'name': 'send_result', 'range': [1636, 1657], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1659, 1662], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_send_email', 'range': [1665, 1763], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [1689, 1704], 'children': []}, {'type': 'VariableDecl', 'name': 'message', 'range': [1706, 1717], 'children': []}, {'type': 'VariableDecl', 'name': 'sent_message', 'range': [1719, 1747], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1750, 1762], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_create_message', 'range': [1765, 1845], 'children': [{'type': 'ImportStatement', 'name': 'import', 'range': [1787, 1788], 'children': []}, {'type': 'FromImportStatement', 'name': 'from', 'range': [1790, 1797], 'children': []}, {'type': 'VariableDecl', 'name': 'message', 'range': [1800, 1805], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["to"]', 'range': [1807, 1812], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["subject"]', 'range': [1814, 1819], 'children': []}, {'type': 'VariableDecl', 'name': 'raw_message', 'range': [1821, 1837], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1839, 1844], 'children': []}]}]}
2025-01-08 10:29:09,279 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:31,183 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [1353, 1845], 'children': [{'type': 'ClassDecl', 'name': 'GmailSendBlock', 'range': [1353, 1422], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [1360, 1422], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [1367, 1378], 'children': []}, {'type': 'FieldDecl', 'name': 'to', 'range': [1380, 1392], 'children': []}, {'type': 'FieldDecl', 'name': 'subject', 'range': [1394, 1406], 'children': []}, {'type': 'FieldDecl', 'name': 'body', 'range': [1408, 1420], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1423, 1458], 'children': [{'type': 'FieldDecl', 'name': 'result', 'range': [1430, 1442], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [1444, 1456], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1459, 1595], 'children': [{'type': 'ExpressionStatement', 'name': 'super().__init__', 'range': [1466, 1594], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [1597, 1664], 'children': [{'type': 'VariableDecl', 'name': 'service', 'range': [1623, 1634], 'children': []}, {'type': 'VariableDecl', 'name': 'send_result', 'range': [1636, 1657], 'children': []}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1659, 1662], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_send_email', 'range': [1665, 1763], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [1689, 1704], 'children': []}, {'type': 'VariableDecl', 'name': 'message', 'range': [1706, 1717], 'children': []}, {'type': 'VariableDecl', 'name': 'sent_message', 'range': [1719, 1747], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1750, 1762], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_create_message', 'range': [1765, 1845], 'children': [{'type': 'ImportStatement', 'name': 'import', 'range': [1787, 1788], 'children': []}, {'type': 'FromImportStatement', 'name': 'from', 'range': [1790, 1797], 'children': []}, {'type': 'VariableDecl', 'name': 'message', 'range': [1800, 1805], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["to"]', 'range': [1807, 1812], 'children': []}, {'type': 'AssignmentExpression', 'name': 'message["subject"]', 'range': [1814, 1819], 'children': []}, {'type': 'VariableDecl', 'name': 'raw_message', 'range': [1821, 1837], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1839, 1844], 'children': []}]}]}
2025-01-08 10:29:31,184 - INFO - Completed main AST analysis flow
2025-01-08 10:29:31,185 - INFO - Successfully processed chunk
2025-01-08 10:29:51,256 - INFO - Step 2 result: {'nodes': [{'type': 'ClassDeclaration', 'name': 'GmailAddLabelBlock', 'range': [2201, 2207], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [2203, 2205], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [2208, 2214], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2210, 2212], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [2215, 2227], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2217, 2217], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2218, 2218], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [2219, 2226], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.modify"]', 'range': [2222, 2224], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'message_id', 'range': [2228, 2241], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2230, 2230], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2231, 2231], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2232, 2240], 'children': [{'type': 'Argument', 'name': 'description="Message ID to add label to"', 'range': [2235, 2237], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'label_name', 'range': [2242, 2255], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2244, 2244], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2245, 2245], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2246, 2254], 'children': [{'type': 'Argument', 'name': 'description="Label name to add"', 'range': [2249, 2251], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2257, 2263], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2259, 2261], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [2264, 2277], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2266, 2266], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2267, 2267], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2268, 2276], 'children': [{'type': 'Argument', 'name': 'description="Label addition result"', 'range': [2271, 2273], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [2278, 2291], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2280, 2280], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2281, 2281], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2282, 2290], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [2285, 2287], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2293, 2432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2296, 2296], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [2299, 2432], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [2300, 2306], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2308, 2308], 'children': [{'type': 'StringLiteral', 'name': '"f884b2fb-04f4-4265-9658-14f433926ac9"', 'range': [2309, 2309], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2313, 2313], 'children': [{'type': 'StringLiteral', 'name': '"This block adds a label to a Gmail message."', 'range': [2314, 2314], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2318, 2318], 'children': [{'type': 'ObjectLiteral', 'name': '{BlockCategory.COMMUNICATION}', 'range': [2319, 2323], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2327, 2327], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Input', 'range': [2328, 2331], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2334, 2334], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Output', 'range': [2335, 2338], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2341, 2341], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2342, 2342], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2343, 2343], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2347, 2347], 'children': [{'type': 'ObjectLiteral', 'name': '{"message_id": "12345", "label_name": "Important", "credentials": TEST_CREDENTIALS_INPUT}', 'range': [2348, 2365], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2369, 2369], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2370, 2370], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2374, 2374], 'children': [{'type': 'ArrayLiteral', 'name': '[("result", {"status": "Label added successfully", "label_id": "Label_1"})]', 'range': [2375, 2396], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2400, 2400], 'children': [{'type': 'ObjectLiteral', 'name': '{"_add_label": lambda *args, **kwargs: {"status": "Label added successfully", "label_id": "Label_1"}}', 'range': [2401, 2428], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2434, 2495], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2438, 2438], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2440, 2440], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [2442, 2442], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [2446, 2446], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [2448, 2448], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2455, 2495], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2460, 2472], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2461, 2461], 'children': [{'type': 'FunctionCall', 'name': 'GmailReadBlock._build_service', 'range': [2462, 2471], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2466, 2466], 'children': []}, {'type': 'Argument', 'name': '**kwargs', 'range': [2469, 2470], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [2473, 2489], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2474, 2474], 'children': [{'type': 'FunctionCall', 'name': 'self._add_label', 'range': [2475, 2488], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2479, 2479], 'children': []}, {'type': 'Argument', 'name': 'input_data.message_id', 'range': [2481, 2483], 'children': []}, {'type': 'Argument', 'name': 'input_data.label_name', 'range': [2485, 2487], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [2490, 2494], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [2491, 2491], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [2493, 2493], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_add_label', 'range': [2496, 2575], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2499, 2499], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2501, 2501], 'children': []}, {'type': 'Parameter', 'name': 'message_id', 'range': [2503, 2503], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2505, 2505], 'children': []}]}, {'type': 'Parameter', 'name': 'label_name', 'range': [2507, 2507], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2509, 2509], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2514, 2575], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [2516, 2526], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2517, 2517], 'children': [{'type': 'FunctionCall', 'name': 'self._get_or_create_label', 'range': [2518, 2525], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2522, 2522], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2524, 2524], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'service.users().messages().modify(userId="me", id=message_id, body={"addLabelIds": [label_id]}).execute()', 'range': [2527, 2563], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2564, 2574], 'children': [{'type': 'ObjectLiteral', 'name': '{"status": "Label added successfully", "label_id": label_id}', 'range': [2565, 2573], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_or_create_label', 'range': [2576, 2656], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2579, 2579], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2581, 2581], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2583, 2583], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2585, 2585], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2590, 2656], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [2592, 2602], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2593, 2593], 'children': [{'type': 'FunctionCall', 'name': 'self._get_label_id', 'range': [2594, 2601], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2598, 2598], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2600, 2600], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [2603, 2607], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2604, 2604], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2605, 2605], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2608, 2656], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [2608, 2645], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2609, 2609], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().create(userId="me", body={"name": label_name}).execute()', 'range': [2610, 2644], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2646, 2646], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2647, 2651], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2653, 2655], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2654, 2654], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [2657, 2734], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2660, 2660], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2662, 2662], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2664, 2664], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2666, 2666], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2673, 2734], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [2675, 2697], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2676, 2676], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().list(userId="me").execute()', 'range': [2677, 2696], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2698, 2709], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2699, 2699], 'children': [{'type': 'FunctionCall', 'name': 'results.get', 'range': [2700, 2708], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2704, 2704], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2706, 2707], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': 'for', 'range': [2710, 2734], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [2711, 2711], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [2714, 2734], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [2716, 2724], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2721, 2722], 'children': [{'type': 'MemberExpression', 'name': 'label["name"]', 'range': [2717, 2720], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [2723, 2723], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2725, 2734], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2726, 2733], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2727, 2731], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 10:29:51,257 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:54,532 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [1847, 2200], 'children': [{'type': 'ClassDeclaration', 'name': 'GmailListLabelsBlock', 'range': [1847, 1853], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1849, 1851], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1854, 1860], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1856, 1858], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1861, 1873], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [1863, 1863], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1864, 1864], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [1865, 1872], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.labels"]', 'range': [1868, 1870], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1875, 1881], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1877, 1879], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [1882, 1898], 'children': [{'type': 'TypeAnnotation', 'name': 'list[dict]', 'range': [1884, 1887], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1888, 1888], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1889, 1897], 'children': [{'type': 'Argument', 'name': 'description="List of labels"', 'range': [1892, 1894], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1899, 1912], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1901, 1901], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1902, 1902], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1903, 1911], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [1906, 1908], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1914, 2071], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1917, 1917], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [1921, 1923], 'children': []}, {'type': 'FunctionCall', 'name': '__init__', 'range': [1925, 2070], 'children': [{'type': 'Argument', 'name': 'id="3e1c2c1c-c689-4520-b956-1f3bf4e02bb7"', 'range': [1928, 1930], 'children': []}, {'type': 'Argument', 'name': 'description="This block lists all labels in Gmail."', 'range': [1933, 1935], 'children': []}, {'type': 'Argument', 'name': 'categories={BlockCategory.COMMUNICATION}', 'range': [1938, 1944], 'children': []}, {'type': 'Argument', 'name': 'input_schema=GmailListLabelsBlock.Input', 'range': [1947, 1951], 'children': []}, {'type': 'Argument', 'name': 'output_schema=GmailListLabelsBlock.Output', 'range': [1954, 1958], 'children': []}, {'type': 'Argument', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [1961, 1964], 'children': []}, {'type': 'Argument', 'name': 'test_input={"credentials": TEST_CREDENTIALS_INPUT}', 'range': [1967, 1976], 'children': []}, {'type': 'Argument', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [1979, 1981], 'children': []}, {'type': 'Argument', 'name': 'test_output=[("result", [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}])]', 'range': [1984, 2023], 'children': []}, {'type': 'Argument', 'name': 'test_mock={"_list_labels": lambda *args, **kwargs: [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}]}', 'range': [2026, 2067], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2073, 2126], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2077, 2077], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2079, 2081], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [2085, 2087], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [2091, 2091], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [2096, 2096], 'children': []}, {'type': 'VariableDeclaration', 'name': 'service', 'range': [2099, 2111], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2100, 2100], 'children': [{'type': 'FunctionCall', 'name': 'GmailReadBlock._build_service', 'range': [2101, 2110], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2105, 2105], 'children': []}, {'type': 'Argument', 'name': 'kwargs', 'range': [2109, 2109], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2112, 2120], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2113, 2113], 'children': [{'type': 'FunctionCall', 'name': 'self._list_labels', 'range': [2114, 2119], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2118, 2118], 'children': []}]}]}]}, {'type': 'Yield', 'name': 'yield', 'range': [2121, 2125], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [2122, 2122], 'children': []}, {'type': 'Argument', 'name': 'labels', 'range': [2124, 2124], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '_list_labels', 'range': [2127, 2199], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2130, 2130], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2132, 2132], 'children': []}, {'type': 'ReturnType', 'name': 'list[dict]', 'range': [2136, 2139], 'children': []}, {'type': 'VariableDeclaration', 'name': 'results', 'range': [2142, 2164], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2143, 2143], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().list', 'range': [2144, 2163], 'children': [{'type': 'Argument', 'name': 'userId="me"', 'range': [2156, 2158], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2165, 2176], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2166, 2166], 'children': [{'type': 'FunctionCall', 'name': 'results.get', 'range': [2167, 2175], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2171, 2171], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2173, 2174], 'children': []}]}]}]}, {'type': 'Return', 'name': 'return', 'range': [2177, 2199], 'children': [{'type': 'ListComprehension', 'name': '[{"id": label["id"], "name": label["name"]} for label in labels]', 'range': [2178, 2198], 'children': []}]}]}]}
2025-01-08 10:29:54,532 - INFO - Starting Step 4: AST normalization
2025-01-08 10:30:17,266 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [2737, 3203], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2737, 2784], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [2744, 2755], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2746, 2746], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2747, 2755], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2748, 2755], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [2751, 2753], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/gmail.modify"', 'range': [2752, 2752], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'message_id', 'range': [2757, 2769], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2759, 2759], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2760, 2769], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2761, 2769], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2764, 2766], 'children': [{'type': 'Literal', 'name': '"Message ID to remove label from"', 'range': [2766, 2766], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'label_name', 'range': [2771, 2783], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2773, 2773], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2774, 2783], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2775, 2783], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2778, 2780], 'children': [{'type': 'Literal', 'name': '"Label name to remove"', 'range': [2780, 2780], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2786, 2820], 'children': [{'type': 'FieldDeclaration', 'name': 'result', 'range': [2793, 2805], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2795, 2795], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2796, 2805], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2797, 2805], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2800, 2802], 'children': [{'type': 'Literal', 'name': '"Label removal result"', 'range': [2802, 2802], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [2807, 2819], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2809, 2809], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2810, 2819], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2811, 2819], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2814, 2816], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [2816, 2816], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2822, 2961], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2828, 2961], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [2829, 2835], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2829, 2835], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2836, 2854], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2837, 2854], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [2836, 2836], 'children': []}, {'type': 'Literal', 'name': '"0afc0526-aba1-4b2b-888e-a22b7c3f359d"', 'range': [2838, 2838], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2841, 2853], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2842, 2853], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [2841, 2841], 'children': []}, {'type': 'Literal', 'name': '"This block removes a label from a Gmail message."', 'range': [2843, 2843], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2846, 2852], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2847, 2852], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [2846, 2846], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2848, 2852], 'children': [{'type': 'Property', 'name': 'BlockCategory.COMMUNICATION', 'range': [2849, 2851], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2855, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2856, 2867], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [2855, 2855], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Input', 'range': [2857, 2860], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2862, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2863, 2867], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [2862, 2862], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Output', 'range': [2864, 2867], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2869, 2873], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2870, 2873], 'children': [{'type': 'Identifier', 'name': 'disabled', 'range': [2869, 2869], 'children': []}, {'type': 'UnaryExpression', 'name': 'not', 'range': [2871, 2873], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2872, 2872], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2875, 2894], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2876, 2894], 'children': [{'type': 'Identifier', 'name': 'test_input', 'range': [2875, 2875], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2877, 2894], 'children': [{'type': 'Property', 'name': 'message_id', 'range': [2879, 2881], 'children': [{'type': 'Literal', 'name': '"12345"', 'range': [2881, 2881], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [2884, 2886], 'children': [{'type': 'Literal', 'name': '"Important"', 'range': [2886, 2886], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [2889, 2891], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [2891, 2891], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2897, 2900], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2898, 2900], 'children': [{'type': 'Identifier', 'name': 'test_credentials', 'range': [2897, 2897], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2899, 2899], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2902, 2925], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2903, 2925], 'children': [{'type': 'Identifier', 'name': 'test_output', 'range': [2902, 2902], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [2904, 2925], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2906, 2920], 'children': [{'type': 'Property', 'name': 'result', 'range': [2908, 2910], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2911, 2919], 'children': [{'type': 'Property', 'name': 'status', 'range': [2912, 2914], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2914, 2914], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2916, 2918], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2918, 2918], 'children': []}]}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2928, 2957], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2929, 2957], 'children': [{'type': 'Identifier', 'name': 'test_mock', 'range': [2928, 2928], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2930, 2957], 'children': [{'type': 'Property', 'name': '_remove_label', 'range': [2932, 2942], 'children': [{'type': 'FunctionExpression', 'name': 'lambda', 'range': [2934, 2942], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'Property', 'name': 'status', 'range': [2944, 2946], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2946, 2946], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2949, 2951], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2951, 2951], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2963, 3025], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2988, 3025], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2989, 3000], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2990, 3000], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2991, 3000], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [2995, 2995], 'children': []}, {'type': 'SpreadElement', 'name': 'kwargs', 'range': [2997, 2999], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [3002, 3019], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3003, 3019], 'children': [{'type': 'CallExpression', 'name': 'self._remove_label', 'range': [3004, 3019], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3009, 3009], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.message_id', 'range': [3011, 3013], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.label_name', 'range': [3015, 3017], 'children': []}]}]}]}, {'type': 'YieldExpression', 'name': '', 'range': [3021, 3024], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [3022, 3022], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [3024, 3024], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_remove_label', 'range': [3027, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3046, 3123], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [3047, 3057], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3048, 3057], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [3049, 3057], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3053, 3053], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3055, 3055], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [3058, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3059, 3060], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3059, 3059], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3061, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3062, 3098], 'children': [{'type': 'CallExpression', 'name': 'service.users().messages().modify', 'range': [3062, 3098], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3075, 3077], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3077, 3077], 'children': []}]}, {'type': 'Argument', 'name': 'id', 'range': [3079, 3081], 'children': [{'type': 'Identifier', 'name': 'message_id', 'range': [3081, 3081], 'children': []}]}, {'type': 'Argument', 'name': 'body', 'range': [3083, 3091], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3085, 3091], 'children': [{'type': 'Property', 'name': 'removeLabelIds', 'range': [3086, 3088], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [3088, 3090], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3089, 3089], 'children': []}]}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3099, 3109], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3100, 3108], 'children': [{'type': 'Property', 'name': 'status', 'range': [3101, 3103], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [3103, 3103], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [3105, 3107], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3107, 3107], 'children': []}]}]}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [3110, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3111, 3123], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3113, 3123], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3114, 3122], 'children': [{'type': 'Property', 'name': 'status', 'range': [3115, 3117], 'children': [{'type': 'Literal', 'name': '"Label not found"', 'range': [3117, 3117], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [3119, 3121], 'children': [{'type': 'Identifier', 'name': 'label_name', 'range': [3121, 3121], 'children': []}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [3125, 3202], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3142, 3202], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [3143, 3165], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3144, 3165], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [3145, 3165], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3157, 3159], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3159, 3159], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [3166, 3177], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3167, 3177], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [3168, 3177], 'children': [{'type': 'Literal', 'name': '"labels"', 'range': [3172, 3172], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [3174, 3176], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': '', 'range': [3178, 3199], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [3179, 3180], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [3181, 3182], 'children': [{'type': 'Identifier', 'name': 'labels', 'range': [3181, 3181], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3183, 3199], 'children': [{'type': 'IfStatement', 'name': '', 'range': [3184, 3192], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3185, 3191], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3185, 3191], 'children': [{'type': 'MemberExpression', 'name': 'label.name', 'range': [3185, 3188], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3190, 3190], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [3192, 3199], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3194, 3199], 'children': [{'type': 'MemberExpression', 'name': 'label.id', 'range': [3195, 3198], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3200, 3202], 'children': [{'type': 'Literal', 'name': 'None', 'range': [3201, 3201], 'children': []}]}]}]}]}
2025-01-08 10:30:17,266 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:36,025 - ERROR - Failed to parse Step 2 result
2025-01-08 10:30:36,026 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:44,117 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [1847, 2200], 'children': [{'type': 'ClassDecl', 'name': 'GmailListLabelsBlock', 'range': [1847, 1853], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1849, 1851], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [1854, 1860], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1856, 1858], 'children': []}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [1861, 1873], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [1863, 1863], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1864, 1864], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [1865, 1872], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.labels"]', 'range': [1868, 1870], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1875, 1881], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1877, 1879], 'children': []}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [1882, 1898], 'children': [{'type': 'TypeAnnotation', 'name': 'list[dict]', 'range': [1884, 1887], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1888, 1888], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1889, 1897], 'children': [{'type': 'Argument', 'name': 'description="List of labels"', 'range': [1892, 1894], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [1899, 1912], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1901, 1901], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1902, 1902], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1903, 1911], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [1906, 1908], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1914, 2071], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1917, 1917], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [1921, 1923], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [1925, 2070], 'children': [{'type': 'Argument', 'name': 'id="3e1c2c1c-c689-4520-b956-1f3bf4e02bb7"', 'range': [1928, 1930], 'children': []}, {'type': 'Argument', 'name': 'description="This block lists all labels in Gmail."', 'range': [1933, 1935], 'children': []}, {'type': 'Argument', 'name': 'categories={BlockCategory.COMMUNICATION}', 'range': [1938, 1944], 'children': []}, {'type': 'Argument', 'name': 'input_schema=GmailListLabelsBlock.Input', 'range': [1947, 1951], 'children': []}, {'type': 'Argument', 'name': 'output_schema=GmailListLabelsBlock.Output', 'range': [1954, 1958], 'children': []}, {'type': 'Argument', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [1961, 1964], 'children': []}, {'type': 'Argument', 'name': 'test_input={"credentials": TEST_CREDENTIALS_INPUT}', 'range': [1967, 1976], 'children': []}, {'type': 'Argument', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [1979, 1981], 'children': []}, {'type': 'Argument', 'name': 'test_output=[("result", [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}])]', 'range': [1984, 2023], 'children': []}, {'type': 'Argument', 'name': 'test_mock={"_list_labels": lambda *args, **kwargs: [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}]}', 'range': [2026, 2067], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2073, 2126], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2077, 2077], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2079, 2081], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [2085, 2087], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [2091, 2091], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [2096, 2096], 'children': []}, {'type': 'VariableDecl', 'name': 'service', 'range': [2099, 2111], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2100, 2100], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2101, 2110], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2105, 2105], 'children': []}, {'type': 'Argument', 'name': 'kwargs', 'range': [2109, 2109], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2112, 2120], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2113, 2113], 'children': [{'type': 'CallExpression', 'name': 'self._list_labels', 'range': [2114, 2119], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2118, 2118], 'children': []}]}]}]}, {'type': 'Yield', 'name': 'yield', 'range': [2121, 2125], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [2122, 2122], 'children': []}, {'type': 'Argument', 'name': 'labels', 'range': [2124, 2124], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '_list_labels', 'range': [2127, 2199], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2130, 2130], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2132, 2132], 'children': []}, {'type': 'ReturnType', 'name': 'list[dict]', 'range': [2136, 2139], 'children': []}, {'type': 'VariableDecl', 'name': 'results', 'range': [2142, 2164], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2143, 2143], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [2144, 2163], 'children': [{'type': 'Argument', 'name': 'userId="me"', 'range': [2156, 2158], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2165, 2176], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2166, 2166], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [2167, 2175], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2171, 2171], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2173, 2174], 'children': []}]}]}]}, {'type': 'Return', 'name': 'return', 'range': [2177, 2199], 'children': [{'type': 'ListComprehension', 'name': '[{"id": label["id"], "name": label["name"]} for label in labels]', 'range': [2178, 2198], 'children': []}]}]}]}
2025-01-08 10:30:44,118 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:31:30,475 - INFO - Step 3 result: {'nodes': [{'type': 'ClassDeclaration', 'name': 'GmailAddLabelBlock', 'range': [2201, 2207], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [2203, 2205], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [2208, 2214], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2210, 2212], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [2215, 2227], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2217, 2217], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2218, 2218], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [2219, 2226], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.modify"]', 'range': [2222, 2224], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'message_id', 'range': [2228, 2241], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2230, 2230], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2231, 2231], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2232, 2240], 'children': [{'type': 'Argument', 'name': 'description="Message ID to add label to"', 'range': [2235, 2237], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'label_name', 'range': [2242, 2255], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2244, 2244], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2245, 2245], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2246, 2254], 'children': [{'type': 'Argument', 'name': 'description="Label name to add"', 'range': [2249, 2251], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2257, 2263], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2259, 2261], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [2264, 2277], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2266, 2266], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2267, 2267], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2268, 2276], 'children': [{'type': 'Argument', 'name': 'description="Label addition result"', 'range': [2271, 2273], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [2278, 2291], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2280, 2280], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2281, 2281], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [2282, 2290], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [2285, 2287], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2293, 2432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2296, 2296], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [2299, 2432], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [2300, 2306], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2308, 2308], 'children': [{'type': 'StringLiteral', 'name': '"f884b2fb-04f4-4265-9658-14f433926ac9"', 'range': [2309, 2309], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2313, 2313], 'children': [{'type': 'StringLiteral', 'name': '"This block adds a label to a Gmail message."', 'range': [2314, 2314], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2318, 2318], 'children': [{'type': 'ObjectLiteral', 'name': '{BlockCategory.COMMUNICATION}', 'range': [2319, 2323], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2327, 2327], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Input', 'range': [2328, 2331], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2334, 2334], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Output', 'range': [2335, 2338], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2341, 2341], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2342, 2342], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2343, 2343], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2347, 2347], 'children': [{'type': 'ObjectLiteral', 'name': '{"message_id": "12345", "label_name": "Important", "credentials": TEST_CREDENTIALS_INPUT}', 'range': [2348, 2365], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2369, 2369], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2370, 2370], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2374, 2374], 'children': [{'type': 'ArrayLiteral', 'name': '[("result", {"status": "Label added successfully", "label_id": "Label_1"})]', 'range': [2375, 2396], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2400, 2400], 'children': [{'type': 'ObjectLiteral', 'name': '{"_add_label": lambda *args, **kwargs: {"status": "Label added successfully", "label_id": "Label_1"}}', 'range': [2401, 2428], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2434, 2495], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2438, 2438], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2440, 2440], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [2442, 2442], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [2446, 2446], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [2448, 2448], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2455, 2495], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2460, 2472], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2461, 2461], 'children': [{'type': 'FunctionCall', 'name': 'GmailReadBlock._build_service', 'range': [2462, 2471], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2466, 2466], 'children': []}, {'type': 'Argument', 'name': '**kwargs', 'range': [2469, 2470], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [2473, 2489], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2474, 2474], 'children': [{'type': 'FunctionCall', 'name': 'self._add_label', 'range': [2475, 2488], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2479, 2479], 'children': []}, {'type': 'Argument', 'name': 'input_data.message_id', 'range': [2481, 2483], 'children': []}, {'type': 'Argument', 'name': 'input_data.label_name', 'range': [2485, 2487], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [2490, 2494], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [2491, 2491], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [2493, 2493], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_add_label', 'range': [2496, 2575], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2499, 2499], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2501, 2501], 'children': []}, {'type': 'Parameter', 'name': 'message_id', 'range': [2503, 2503], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2505, 2505], 'children': []}]}, {'type': 'Parameter', 'name': 'label_name', 'range': [2507, 2507], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2509, 2509], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2514, 2575], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [2516, 2526], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2517, 2517], 'children': [{'type': 'FunctionCall', 'name': 'self._get_or_create_label', 'range': [2518, 2525], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2522, 2522], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2524, 2524], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'service.users().messages().modify(userId="me", id=message_id, body={"addLabelIds": [label_id]}).execute()', 'range': [2527, 2563], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2564, 2574], 'children': [{'type': 'ObjectLiteral', 'name': '{"status": "Label added successfully", "label_id": label_id}', 'range': [2565, 2573], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_or_create_label', 'range': [2576, 2656], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2579, 2579], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2581, 2581], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2583, 2583], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2585, 2585], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2590, 2656], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [2592, 2602], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2593, 2593], 'children': [{'type': 'FunctionCall', 'name': 'self._get_label_id', 'range': [2594, 2601], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2598, 2598], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2600, 2600], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [2603, 2607], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2604, 2604], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2605, 2605], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2608, 2656], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [2608, 2645], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2609, 2609], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().create(userId="me", body={"name": label_name}).execute()', 'range': [2610, 2644], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2646, 2646], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2647, 2651], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2653, 2655], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2654, 2654], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [2657, 2734], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2660, 2660], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2662, 2662], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2664, 2664], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2666, 2666], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2673, 2734], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [2675, 2697], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2676, 2676], 'children': [{'type': 'FunctionCall', 'name': 'service.users().labels().list(userId="me").execute()', 'range': [2677, 2696], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [2698, 2709], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2699, 2699], 'children': [{'type': 'FunctionCall', 'name': 'results.get', 'range': [2700, 2708], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2704, 2704], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2706, 2707], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': 'for', 'range': [2710, 2734], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [2711, 2711], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [2714, 2734], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [2716, 2724], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2721, 2722], 'children': [{'type': 'MemberExpression', 'name': 'label["name"]', 'range': [2717, 2720], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [2723, 2723], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2725, 2734], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2726, 2733], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2727, 2731], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 10:31:30,476 - INFO - Starting Step 4: AST normalization
2025-01-08 10:31:35,848 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [1847, 2200], 'children': [{'type': 'ClassDecl', 'name': 'GmailListLabelsBlock', 'range': [1847, 1853], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1849, 1851], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [1854, 1860], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1856, 1858], 'children': []}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [1861, 1873], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [1863, 1863], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1864, 1864], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [1865, 1872], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.labels"]', 'range': [1868, 1870], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1875, 1881], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1877, 1879], 'children': []}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [1882, 1898], 'children': [{'type': 'TypeAnnotation', 'name': 'list[dict]', 'range': [1884, 1887], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1888, 1888], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1889, 1897], 'children': [{'type': 'Argument', 'name': 'description="List of labels"', 'range': [1892, 1894], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [1899, 1912], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1901, 1901], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1902, 1902], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1903, 1911], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [1906, 1908], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1914, 2071], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1917, 1917], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [1921, 1923], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [1925, 2070], 'children': [{'type': 'Argument', 'name': 'id="3e1c2c1c-c689-4520-b956-1f3bf4e02bb7"', 'range': [1928, 1930], 'children': []}, {'type': 'Argument', 'name': 'description="This block lists all labels in Gmail."', 'range': [1933, 1935], 'children': []}, {'type': 'Argument', 'name': 'categories={BlockCategory.COMMUNICATION}', 'range': [1938, 1944], 'children': []}, {'type': 'Argument', 'name': 'input_schema=GmailListLabelsBlock.Input', 'range': [1947, 1951], 'children': []}, {'type': 'Argument', 'name': 'output_schema=GmailListLabelsBlock.Output', 'range': [1954, 1958], 'children': []}, {'type': 'Argument', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [1961, 1964], 'children': []}, {'type': 'Argument', 'name': 'test_input={"credentials": TEST_CREDENTIALS_INPUT}', 'range': [1967, 1976], 'children': []}, {'type': 'Argument', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [1979, 1981], 'children': []}, {'type': 'Argument', 'name': 'test_output=[("result", [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}])]', 'range': [1984, 2023], 'children': []}, {'type': 'Argument', 'name': 'test_mock={"_list_labels": lambda *args, **kwargs: [{"id": "Label_1", "name": "Important"}, {"id": "Label_2", "name": "Work"}]}', 'range': [2026, 2067], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2073, 2126], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2077, 2077], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2079, 2081], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [2085, 2087], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [2091, 2091], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [2096, 2096], 'children': []}, {'type': 'VariableDecl', 'name': 'service', 'range': [2099, 2111], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2100, 2100], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2101, 2110], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2105, 2105], 'children': []}, {'type': 'Argument', 'name': 'kwargs', 'range': [2109, 2109], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2112, 2120], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2113, 2113], 'children': [{'type': 'CallExpression', 'name': 'self._list_labels', 'range': [2114, 2119], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2118, 2118], 'children': []}]}]}]}, {'type': 'Yield', 'name': 'yield', 'range': [2121, 2125], 'children': [{'type': 'Argument', 'name': '"result"', 'range': [2122, 2122], 'children': []}, {'type': 'Argument', 'name': 'labels', 'range': [2124, 2124], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '_list_labels', 'range': [2127, 2199], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2130, 2130], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2132, 2132], 'children': []}, {'type': 'ReturnType', 'name': 'list[dict]', 'range': [2136, 2139], 'children': []}, {'type': 'VariableDecl', 'name': 'results', 'range': [2142, 2164], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2143, 2143], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [2144, 2163], 'children': [{'type': 'Argument', 'name': 'userId="me"', 'range': [2156, 2158], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2165, 2176], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2166, 2166], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [2167, 2175], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2171, 2171], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2173, 2174], 'children': []}]}]}]}, {'type': 'Return', 'name': 'return', 'range': [2177, 2199], 'children': [{'type': 'ListComprehension', 'name': '[{"id": label["id"], "name": label["name"]} for label in labels]', 'range': [2178, 2198], 'children': []}]}]}]}
2025-01-08 10:31:35,849 - INFO - Completed main AST analysis flow
2025-01-08 10:31:35,852 - INFO - Successfully processed chunk
2025-01-08 10:32:21,689 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [2737, 3203], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2737, 2784], 'children': [{'type': 'FieldDeclaration', 'name': 'credentials', 'range': [2744, 2755], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2746, 2746], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2747, 2755], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2748, 2755], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [2751, 2753], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/gmail.modify"', 'range': [2752, 2752], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'message_id', 'range': [2757, 2769], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2759, 2759], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2760, 2769], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2761, 2769], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2764, 2766], 'children': [{'type': 'Literal', 'name': '"Message ID to remove label from"', 'range': [2766, 2766], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'label_name', 'range': [2771, 2783], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2773, 2773], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2774, 2783], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2775, 2783], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2778, 2780], 'children': [{'type': 'Literal', 'name': '"Label name to remove"', 'range': [2780, 2780], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2786, 2820], 'children': [{'type': 'FieldDeclaration', 'name': 'result', 'range': [2793, 2805], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2795, 2795], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2796, 2805], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2797, 2805], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2800, 2802], 'children': [{'type': 'Literal', 'name': '"Label removal result"', 'range': [2802, 2802], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [2807, 2819], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2809, 2809], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2810, 2819], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2811, 2819], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2814, 2816], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [2816, 2816], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [2822, 2961], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2828, 2961], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [2829, 2835], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2829, 2835], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2836, 2854], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2837, 2854], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [2836, 2836], 'children': []}, {'type': 'Literal', 'name': '"0afc0526-aba1-4b2b-888e-a22b7c3f359d"', 'range': [2838, 2838], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2841, 2853], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2842, 2853], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [2841, 2841], 'children': []}, {'type': 'Literal', 'name': '"This block removes a label from a Gmail message."', 'range': [2843, 2843], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2846, 2852], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2847, 2852], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [2846, 2846], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2848, 2852], 'children': [{'type': 'Property', 'name': 'BlockCategory.COMMUNICATION', 'range': [2849, 2851], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2855, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2856, 2867], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [2855, 2855], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Input', 'range': [2857, 2860], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2862, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2863, 2867], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [2862, 2862], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Output', 'range': [2864, 2867], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2869, 2873], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2870, 2873], 'children': [{'type': 'Identifier', 'name': 'disabled', 'range': [2869, 2869], 'children': []}, {'type': 'UnaryExpression', 'name': 'not', 'range': [2871, 2873], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2872, 2872], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2875, 2894], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2876, 2894], 'children': [{'type': 'Identifier', 'name': 'test_input', 'range': [2875, 2875], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2877, 2894], 'children': [{'type': 'Property', 'name': 'message_id', 'range': [2879, 2881], 'children': [{'type': 'Literal', 'name': '"12345"', 'range': [2881, 2881], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [2884, 2886], 'children': [{'type': 'Literal', 'name': '"Important"', 'range': [2886, 2886], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [2889, 2891], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [2891, 2891], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2897, 2900], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2898, 2900], 'children': [{'type': 'Identifier', 'name': 'test_credentials', 'range': [2897, 2897], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2899, 2899], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2902, 2925], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2903, 2925], 'children': [{'type': 'Identifier', 'name': 'test_output', 'range': [2902, 2902], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [2904, 2925], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2906, 2920], 'children': [{'type': 'Property', 'name': 'result', 'range': [2908, 2910], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2911, 2919], 'children': [{'type': 'Property', 'name': 'status', 'range': [2912, 2914], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2914, 2914], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2916, 2918], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2918, 2918], 'children': []}]}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2928, 2957], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2929, 2957], 'children': [{'type': 'Identifier', 'name': 'test_mock', 'range': [2928, 2928], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2930, 2957], 'children': [{'type': 'Property', 'name': '_remove_label', 'range': [2932, 2942], 'children': [{'type': 'FunctionExpression', 'name': 'lambda', 'range': [2934, 2942], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'Property', 'name': 'status', 'range': [2944, 2946], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2946, 2946], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2949, 2951], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2951, 2951], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [2963, 3025], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2988, 3025], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2989, 3000], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2990, 3000], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2991, 3000], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [2995, 2995], 'children': []}, {'type': 'SpreadElement', 'name': 'kwargs', 'range': [2997, 2999], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [3002, 3019], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3003, 3019], 'children': [{'type': 'CallExpression', 'name': 'self._remove_label', 'range': [3004, 3019], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3009, 3009], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.message_id', 'range': [3011, 3013], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.label_name', 'range': [3015, 3017], 'children': []}]}]}]}, {'type': 'YieldExpression', 'name': '', 'range': [3021, 3024], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [3022, 3022], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [3024, 3024], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_remove_label', 'range': [3027, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3046, 3123], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [3047, 3057], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3048, 3057], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [3049, 3057], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3053, 3053], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3055, 3055], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [3058, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3059, 3060], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3059, 3059], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3061, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3062, 3098], 'children': [{'type': 'CallExpression', 'name': 'service.users().messages().modify', 'range': [3062, 3098], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3075, 3077], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3077, 3077], 'children': []}]}, {'type': 'Argument', 'name': 'id', 'range': [3079, 3081], 'children': [{'type': 'Identifier', 'name': 'message_id', 'range': [3081, 3081], 'children': []}]}, {'type': 'Argument', 'name': 'body', 'range': [3083, 3091], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3085, 3091], 'children': [{'type': 'Property', 'name': 'removeLabelIds', 'range': [3086, 3088], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [3088, 3090], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3089, 3089], 'children': []}]}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3099, 3109], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3100, 3108], 'children': [{'type': 'Property', 'name': 'status', 'range': [3101, 3103], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [3103, 3103], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [3105, 3107], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3107, 3107], 'children': []}]}]}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [3110, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3111, 3123], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3113, 3123], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3114, 3122], 'children': [{'type': 'Property', 'name': 'status', 'range': [3115, 3117], 'children': [{'type': 'Literal', 'name': '"Label not found"', 'range': [3117, 3117], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [3119, 3121], 'children': [{'type': 'Identifier', 'name': 'label_name', 'range': [3121, 3121], 'children': []}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_get_label_id', 'range': [3125, 3202], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3142, 3202], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [3143, 3165], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3144, 3165], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [3145, 3165], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3157, 3159], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3159, 3159], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [3166, 3177], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3167, 3177], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [3168, 3177], 'children': [{'type': 'Literal', 'name': '"labels"', 'range': [3172, 3172], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [3174, 3176], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': '', 'range': [3178, 3199], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [3179, 3180], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [3181, 3182], 'children': [{'type': 'Identifier', 'name': 'labels', 'range': [3181, 3181], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3183, 3199], 'children': [{'type': 'IfStatement', 'name': '', 'range': [3184, 3192], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3185, 3191], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3185, 3191], 'children': [{'type': 'MemberExpression', 'name': 'label.name', 'range': [3185, 3188], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3190, 3190], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [3192, 3199], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3194, 3199], 'children': [{'type': 'MemberExpression', 'name': 'label.id', 'range': [3195, 3198], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3200, 3202], 'children': [{'type': 'Literal', 'name': 'None', 'range': [3201, 3201], 'children': []}]}]}]}]}
2025-01-08 10:32:21,689 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:52,304 - ERROR - Failed to parse Step 3 result
2025-01-08 10:32:52,304 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:53,590 - INFO - Step 4 result: {'type': 'Program', 'name': 'Program', 'range': [0, 0], 'children': []}
2025-01-08 10:32:53,590 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:32:55,265 - INFO - Step 5 result: {'type': 'Program', 'name': 'Program', 'range': [0, 0], 'children': []}
2025-01-08 10:32:55,265 - INFO - Completed main AST analysis flow
2025-01-08 10:32:55,266 - INFO - Successfully processed chunk
2025-01-08 10:33:07,407 - INFO - Step 4 result: {'nodes': [{'type': 'ClassDecl', 'name': 'GmailAddLabelBlock', 'range': [2201, 2207], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [2203, 2205], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [2208, 2214], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2210, 2212], 'children': []}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [2215, 2227], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2217, 2217], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2218, 2218], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2219, 2226], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.modify"]', 'range': [2222, 2224], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'message_id', 'range': [2228, 2241], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2230, 2230], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2231, 2231], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2232, 2240], 'children': [{'type': 'Argument', 'name': 'description="Message ID to add label to"', 'range': [2235, 2237], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'label_name', 'range': [2242, 2255], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2244, 2244], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2245, 2245], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2246, 2254], 'children': [{'type': 'Argument', 'name': 'description="Label name to add"', 'range': [2249, 2251], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2257, 2263], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2259, 2261], 'children': []}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [2264, 2277], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2266, 2266], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2267, 2267], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2268, 2276], 'children': [{'type': 'Argument', 'name': 'description="Label addition result"', 'range': [2271, 2273], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [2278, 2291], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2280, 2280], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2281, 2281], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2282, 2290], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [2285, 2287], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [2293, 2432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2296, 2296], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [2299, 2432], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2300, 2306], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2308, 2308], 'children': [{'type': 'Literal', 'name': '"f884b2fb-04f4-4265-9658-14f433926ac9"', 'range': [2309, 2309], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2313, 2313], 'children': [{'type': 'Literal', 'name': '"This block adds a label to a Gmail message."', 'range': [2314, 2314], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2318, 2318], 'children': [{'type': 'ObjectLiteral', 'name': '{BlockCategory.COMMUNICATION}', 'range': [2319, 2323], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2327, 2327], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Input', 'range': [2328, 2331], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2334, 2334], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Output', 'range': [2335, 2338], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2341, 2341], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2342, 2342], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2343, 2343], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2347, 2347], 'children': [{'type': 'ObjectLiteral', 'name': '{"message_id": "12345", "label_name": "Important", "credentials": TEST_CREDENTIALS_INPUT}', 'range': [2348, 2365], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2369, 2369], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2370, 2370], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2374, 2374], 'children': [{'type': 'ArrayLiteral', 'name': '[("result", {"status": "Label added successfully", "label_id": "Label_1"})]', 'range': [2375, 2396], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2400, 2400], 'children': [{'type': 'ObjectLiteral', 'name': '{"_add_label": lambda *args, **kwargs: {"status": "Label added successfully", "label_id": "Label_1"}}', 'range': [2401, 2428], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2434, 2495], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2438, 2438], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2440, 2440], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [2442, 2442], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [2446, 2446], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [2448, 2448], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2455, 2495], 'children': [{'type': 'VariableDecl', 'name': 'service', 'range': [2460, 2472], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2461, 2461], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2462, 2471], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2466, 2466], 'children': []}, {'type': 'Argument', 'name': '**kwargs', 'range': [2469, 2470], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [2473, 2489], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2474, 2474], 'children': [{'type': 'CallExpression', 'name': 'self._add_label', 'range': [2475, 2488], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2479, 2479], 'children': []}, {'type': 'Argument', 'name': 'input_data.message_id', 'range': [2481, 2483], 'children': []}, {'type': 'Argument', 'name': 'input_data.label_name', 'range': [2485, 2487], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [2490, 2494], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [2491, 2491], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [2493, 2493], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_add_label', 'range': [2496, 2575], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2499, 2499], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2501, 2501], 'children': []}, {'type': 'Parameter', 'name': 'message_id', 'range': [2503, 2503], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2505, 2505], 'children': []}]}, {'type': 'Parameter', 'name': 'label_name', 'range': [2507, 2507], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2509, 2509], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2514, 2575], 'children': [{'type': 'VariableDecl', 'name': 'label_id', 'range': [2516, 2526], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2517, 2517], 'children': [{'type': 'CallExpression', 'name': 'self._get_or_create_label', 'range': [2518, 2525], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2522, 2522], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2524, 2524], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'service.users().messages().modify(userId="me", id=message_id, body={"addLabelIds": [label_id]}).execute()', 'range': [2527, 2563], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2564, 2574], 'children': [{'type': 'ObjectLiteral', 'name': '{"status": "Label added successfully", "label_id": label_id}', 'range': [2565, 2573], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_or_create_label', 'range': [2576, 2656], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2579, 2579], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2581, 2581], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2583, 2583], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2585, 2585], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2590, 2656], 'children': [{'type': 'VariableDecl', 'name': 'label_id', 'range': [2592, 2602], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2593, 2593], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [2594, 2601], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2598, 2598], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2600, 2600], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [2603, 2607], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2604, 2604], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2605, 2605], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2608, 2656], 'children': [{'type': 'VariableDecl', 'name': 'label', 'range': [2608, 2645], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2609, 2609], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().create(userId="me", body={"name": label_name}).execute()', 'range': [2610, 2644], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2646, 2646], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2647, 2651], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2653, 2655], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2654, 2654], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_label_id', 'range': [2657, 2734], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2660, 2660], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2662, 2662], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2664, 2664], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2666, 2666], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2673, 2734], 'children': [{'type': 'VariableDecl', 'name': 'results', 'range': [2675, 2697], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2676, 2676], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list(userId="me").execute()', 'range': [2677, 2696], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2698, 2709], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2699, 2699], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [2700, 2708], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2704, 2704], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2706, 2707], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': 'for', 'range': [2710, 2734], 'children': [{'type': 'VariableDecl', 'name': 'label', 'range': [2711, 2711], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [2714, 2734], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [2716, 2724], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2721, 2722], 'children': [{'type': 'MemberExpression', 'name': 'label["name"]', 'range': [2717, 2720], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [2723, 2723], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2725, 2734], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2726, 2733], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2727, 2731], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 10:33:07,408 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:21,751 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [2737, 3203], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [2737, 2784], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [2744, 2755], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2746, 2746], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2747, 2755], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2748, 2755], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [2751, 2753], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/gmail.modify"', 'range': [2752, 2752], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'message_id', 'range': [2757, 2769], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2759, 2759], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2760, 2769], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2761, 2769], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2764, 2766], 'children': [{'type': 'Literal', 'name': '"Message ID to remove label from"', 'range': [2766, 2766], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'label_name', 'range': [2771, 2783], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2773, 2773], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2774, 2783], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2775, 2783], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2778, 2780], 'children': [{'type': 'Literal', 'name': '"Label name to remove"', 'range': [2780, 2780], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2786, 2820], 'children': [{'type': 'FieldDecl', 'name': 'result', 'range': [2793, 2805], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2795, 2795], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2796, 2805], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2797, 2805], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2800, 2802], 'children': [{'type': 'Literal', 'name': '"Label removal result"', 'range': [2802, 2802], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [2807, 2819], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2809, 2809], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2810, 2819], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2811, 2819], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2814, 2816], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [2816, 2816], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [2822, 2961], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2828, 2961], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [2829, 2835], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2829, 2835], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2836, 2854], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2837, 2854], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [2836, 2836], 'children': []}, {'type': 'Literal', 'name': '"0afc0526-aba1-4b2b-888e-a22b7c3f359d"', 'range': [2838, 2838], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2841, 2853], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2842, 2853], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [2841, 2841], 'children': []}, {'type': 'Literal', 'name': '"This block removes a label from a Gmail message."', 'range': [2843, 2843], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2846, 2852], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2847, 2852], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [2846, 2846], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2848, 2852], 'children': [{'type': 'Property', 'name': 'BlockCategory.COMMUNICATION', 'range': [2849, 2851], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2855, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2856, 2867], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [2855, 2855], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Input', 'range': [2857, 2860], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2862, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2863, 2867], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [2862, 2862], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Output', 'range': [2864, 2867], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2869, 2873], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2870, 2873], 'children': [{'type': 'Identifier', 'name': 'disabled', 'range': [2869, 2869], 'children': []}, {'type': 'UnaryExpression', 'name': 'not', 'range': [2871, 2873], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2872, 2872], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2875, 2894], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2876, 2894], 'children': [{'type': 'Identifier', 'name': 'test_input', 'range': [2875, 2875], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2877, 2894], 'children': [{'type': 'Property', 'name': 'message_id', 'range': [2879, 2881], 'children': [{'type': 'Literal', 'name': '"12345"', 'range': [2881, 2881], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [2884, 2886], 'children': [{'type': 'Literal', 'name': '"Important"', 'range': [2886, 2886], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [2889, 2891], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [2891, 2891], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2897, 2900], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2898, 2900], 'children': [{'type': 'Identifier', 'name': 'test_credentials', 'range': [2897, 2897], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2899, 2899], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2902, 2925], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2903, 2925], 'children': [{'type': 'Identifier', 'name': 'test_output', 'range': [2902, 2902], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [2904, 2925], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2906, 2920], 'children': [{'type': 'Property', 'name': 'result', 'range': [2908, 2910], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2911, 2919], 'children': [{'type': 'Property', 'name': 'status', 'range': [2912, 2914], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2914, 2914], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2916, 2918], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2918, 2918], 'children': []}]}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2928, 2957], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2929, 2957], 'children': [{'type': 'Identifier', 'name': 'test_mock', 'range': [2928, 2928], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2930, 2957], 'children': [{'type': 'Property', 'name': '_remove_label', 'range': [2932, 2942], 'children': [{'type': 'FunctionExpression', 'name': 'lambda', 'range': [2934, 2942], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'Property', 'name': 'status', 'range': [2944, 2946], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2946, 2946], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2949, 2951], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2951, 2951], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2963, 3025], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2988, 3025], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2989, 3000], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2990, 3000], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2991, 3000], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [2995, 2995], 'children': []}, {'type': 'SpreadElement', 'name': 'kwargs', 'range': [2997, 2999], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [3002, 3019], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3003, 3019], 'children': [{'type': 'CallExpression', 'name': 'self._remove_label', 'range': [3004, 3019], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3009, 3009], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.message_id', 'range': [3011, 3013], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.label_name', 'range': [3015, 3017], 'children': []}]}]}]}, {'type': 'YieldExpression', 'name': '', 'range': [3021, 3024], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [3022, 3022], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [3024, 3024], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_remove_label', 'range': [3027, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3046, 3123], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [3047, 3057], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3048, 3057], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [3049, 3057], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3053, 3053], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3055, 3055], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [3058, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3059, 3060], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3059, 3059], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3061, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3062, 3098], 'children': [{'type': 'CallExpression', 'name': 'service.users().messages().modify', 'range': [3062, 3098], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3075, 3077], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3077, 3077], 'children': []}]}, {'type': 'Argument', 'name': 'id', 'range': [3079, 3081], 'children': [{'type': 'Identifier', 'name': 'message_id', 'range': [3081, 3081], 'children': []}]}, {'type': 'Argument', 'name': 'body', 'range': [3083, 3091], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3085, 3091], 'children': [{'type': 'Property', 'name': 'removeLabelIds', 'range': [3086, 3088], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [3088, 3090], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3089, 3089], 'children': []}]}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3099, 3109], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3100, 3108], 'children': [{'type': 'Property', 'name': 'status', 'range': [3101, 3103], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [3103, 3103], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [3105, 3107], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3107, 3107], 'children': []}]}]}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [3110, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3111, 3123], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3113, 3123], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3114, 3122], 'children': [{'type': 'Property', 'name': 'status', 'range': [3115, 3117], 'children': [{'type': 'Literal', 'name': '"Label not found"', 'range': [3117, 3117], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [3119, 3121], 'children': [{'type': 'Identifier', 'name': 'label_name', 'range': [3121, 3121], 'children': []}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_label_id', 'range': [3125, 3202], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3142, 3202], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [3143, 3165], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3144, 3165], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [3145, 3165], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3157, 3159], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3159, 3159], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [3166, 3177], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3167, 3177], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [3168, 3177], 'children': [{'type': 'Literal', 'name': '"labels"', 'range': [3172, 3172], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [3174, 3176], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': '', 'range': [3178, 3199], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [3179, 3180], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [3181, 3182], 'children': [{'type': 'Identifier', 'name': 'labels', 'range': [3181, 3181], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3183, 3199], 'children': [{'type': 'IfStatement', 'name': '', 'range': [3184, 3192], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3185, 3191], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3185, 3191], 'children': [{'type': 'MemberExpression', 'name': 'label.name', 'range': [3185, 3188], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3190, 3190], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [3192, 3199], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3194, 3199], 'children': [{'type': 'MemberExpression', 'name': 'label.id', 'range': [3195, 3198], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3200, 3202], 'children': [{'type': 'Literal', 'name': 'None', 'range': [3201, 3201], 'children': []}]}]}]}]}
2025-01-08 10:34:21,751 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:42,820 - INFO - Step 5 result: {'type': 'Program', 'name': 'GmailAddLabelBlock', 'range': [2201, 2734], 'children': [{'type': 'ClassDecl', 'name': 'GmailAddLabelBlock', 'range': [2201, 2207], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [2203, 2205], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [2208, 2214], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2210, 2212], 'children': []}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [2215, 2227], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2217, 2217], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2218, 2218], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2219, 2226], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/gmail.modify"]', 'range': [2222, 2224], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'message_id', 'range': [2228, 2241], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2230, 2230], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2231, 2231], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2232, 2240], 'children': [{'type': 'Argument', 'name': 'description="Message ID to add label to"', 'range': [2235, 2237], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'label_name', 'range': [2242, 2255], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2244, 2244], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2245, 2245], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2246, 2254], 'children': [{'type': 'Argument', 'name': 'description="Label name to add"', 'range': [2249, 2251], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2257, 2263], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [2259, 2261], 'children': []}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [2264, 2277], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2266, 2266], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2267, 2267], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2268, 2276], 'children': [{'type': 'Argument', 'name': 'description="Label addition result"', 'range': [2271, 2273], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [2278, 2291], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2280, 2280], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2281, 2281], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2282, 2290], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [2285, 2287], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [2293, 2432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2296, 2296], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [2299, 2432], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2300, 2306], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2308, 2308], 'children': [{'type': 'Literal', 'name': '"f884b2fb-04f4-4265-9658-14f433926ac9"', 'range': [2309, 2309], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2313, 2313], 'children': [{'type': 'Literal', 'name': '"This block adds a label to a Gmail message."', 'range': [2314, 2314], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2318, 2318], 'children': [{'type': 'ObjectLiteral', 'name': '{BlockCategory.COMMUNICATION}', 'range': [2319, 2323], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2327, 2327], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Input', 'range': [2328, 2331], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2334, 2334], 'children': [{'type': 'MemberExpression', 'name': 'GmailAddLabelBlock.Output', 'range': [2335, 2338], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2341, 2341], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2342, 2342], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2343, 2343], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2347, 2347], 'children': [{'type': 'ObjectLiteral', 'name': '{"message_id": "12345", "label_name": "Important", "credentials": TEST_CREDENTIALS_INPUT}', 'range': [2348, 2365], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2369, 2369], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2370, 2370], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2374, 2374], 'children': [{'type': 'ArrayLiteral', 'name': '[("result", {"status": "Label added successfully", "label_id": "Label_1"})]', 'range': [2375, 2396], 'children': []}]}, {'type': 'Assignment', 'name': '=', 'range': [2400, 2400], 'children': [{'type': 'ObjectLiteral', 'name': '{"_add_label": lambda *args, **kwargs: {"status": "Label added successfully", "label_id": "Label_1"}}', 'range': [2401, 2428], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2434, 2495], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2438, 2438], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [2440, 2440], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [2442, 2442], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [2446, 2446], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [2448, 2448], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2455, 2495], 'children': [{'type': 'VariableDecl', 'name': 'service', 'range': [2460, 2472], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2461, 2461], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2462, 2471], 'children': [{'type': 'Argument', 'name': 'credentials', 'range': [2466, 2466], 'children': []}, {'type': 'Argument', 'name': '**kwargs', 'range': [2469, 2470], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [2473, 2489], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2474, 2474], 'children': [{'type': 'CallExpression', 'name': 'self._add_label', 'range': [2475, 2488], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2479, 2479], 'children': []}, {'type': 'Argument', 'name': 'input_data.message_id', 'range': [2481, 2483], 'children': []}, {'type': 'Argument', 'name': 'input_data.label_name', 'range': [2485, 2487], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [2490, 2494], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [2491, 2491], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [2493, 2493], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_add_label', 'range': [2496, 2575], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2499, 2499], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2501, 2501], 'children': []}, {'type': 'Parameter', 'name': 'message_id', 'range': [2503, 2503], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2505, 2505], 'children': []}]}, {'type': 'Parameter', 'name': 'label_name', 'range': [2507, 2507], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2509, 2509], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2514, 2575], 'children': [{'type': 'VariableDecl', 'name': 'label_id', 'range': [2516, 2526], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2517, 2517], 'children': [{'type': 'CallExpression', 'name': 'self._get_or_create_label', 'range': [2518, 2525], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2522, 2522], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2524, 2524], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'service.users().messages().modify(userId="me", id=message_id, body={"addLabelIds": [label_id]}).execute()', 'range': [2527, 2563], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2564, 2574], 'children': [{'type': 'ObjectLiteral', 'name': '{"status": "Label added successfully", "label_id": label_id}', 'range': [2565, 2573], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_or_create_label', 'range': [2576, 2656], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2579, 2579], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2581, 2581], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2583, 2583], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2585, 2585], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2590, 2656], 'children': [{'type': 'VariableDecl', 'name': 'label_id', 'range': [2592, 2602], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2593, 2593], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [2594, 2601], 'children': [{'type': 'Argument', 'name': 'service', 'range': [2598, 2598], 'children': []}, {'type': 'Argument', 'name': 'label_name', 'range': [2600, 2600], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [2603, 2607], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [2604, 2604], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2605, 2605], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2608, 2656], 'children': [{'type': 'VariableDecl', 'name': 'label', 'range': [2608, 2645], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2609, 2609], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().create(userId="me", body={"name": label_name}).execute()', 'range': [2610, 2644], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2646, 2646], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2647, 2651], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2653, 2655], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [2654, 2654], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_label_id', 'range': [2657, 2734], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [2660, 2660], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [2662, 2662], 'children': []}, {'type': 'Parameter', 'name': 'label_name', 'range': [2664, 2664], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2666, 2666], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [2673, 2734], 'children': [{'type': 'VariableDecl', 'name': 'results', 'range': [2675, 2697], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2676, 2676], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list(userId="me").execute()', 'range': [2677, 2696], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'labels', 'range': [2698, 2709], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2699, 2699], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [2700, 2708], 'children': [{'type': 'Argument', 'name': '"labels"', 'range': [2704, 2704], 'children': []}, {'type': 'Argument', 'name': '[]', 'range': [2706, 2707], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': 'for', 'range': [2710, 2734], 'children': [{'type': 'VariableDecl', 'name': 'label', 'range': [2711, 2711], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [2714, 2734], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [2716, 2724], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2721, 2722], 'children': [{'type': 'MemberExpression', 'name': 'label["name"]', 'range': [2717, 2720], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [2723, 2723], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [2725, 2734], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2726, 2733], 'children': [{'type': 'MemberExpression', 'name': 'label["id"]', 'range': [2727, 2731], 'children': []}]}]}]}]}]}]}]}]}
2025-01-08 10:34:42,820 - INFO - Completed main AST analysis flow
2025-01-08 10:34:42,822 - INFO - Successfully processed chunk
2025-01-08 10:36:19,543 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [2737, 3203], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [2737, 2784], 'children': [{'type': 'FieldDecl', 'name': 'credentials', 'range': [2744, 2755], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [2746, 2746], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2747, 2755], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [2748, 2755], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [2751, 2753], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/gmail.modify"', 'range': [2752, 2752], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'message_id', 'range': [2757, 2769], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2759, 2759], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2760, 2769], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2761, 2769], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2764, 2766], 'children': [{'type': 'Literal', 'name': '"Message ID to remove label from"', 'range': [2766, 2766], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'label_name', 'range': [2771, 2783], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2773, 2773], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2774, 2783], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2775, 2783], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2778, 2780], 'children': [{'type': 'Literal', 'name': '"Label name to remove"', 'range': [2780, 2780], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2786, 2820], 'children': [{'type': 'FieldDecl', 'name': 'result', 'range': [2793, 2805], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [2795, 2795], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2796, 2805], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2797, 2805], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2800, 2802], 'children': [{'type': 'Literal', 'name': '"Label removal result"', 'range': [2802, 2802], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [2807, 2819], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [2809, 2809], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2810, 2819], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [2811, 2819], 'children': [{'type': 'Argument', 'name': 'description', 'range': [2814, 2816], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [2816, 2816], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [2822, 2961], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2828, 2961], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [2829, 2835], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [2829, 2835], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2836, 2854], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2837, 2854], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [2836, 2836], 'children': []}, {'type': 'Literal', 'name': '"0afc0526-aba1-4b2b-888e-a22b7c3f359d"', 'range': [2838, 2838], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2841, 2853], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2842, 2853], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [2841, 2841], 'children': []}, {'type': 'Literal', 'name': '"This block removes a label from a Gmail message."', 'range': [2843, 2843], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2846, 2852], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2847, 2852], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [2846, 2846], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2848, 2852], 'children': [{'type': 'Property', 'name': 'BlockCategory.COMMUNICATION', 'range': [2849, 2851], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2855, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2856, 2867], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [2855, 2855], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Input', 'range': [2857, 2860], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2862, 2867], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2863, 2867], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [2862, 2862], 'children': []}, {'type': 'MemberExpression', 'name': 'GmailRemoveLabelBlock.Output', 'range': [2864, 2867], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2869, 2873], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2870, 2873], 'children': [{'type': 'Identifier', 'name': 'disabled', 'range': [2869, 2869], 'children': []}, {'type': 'UnaryExpression', 'name': 'not', 'range': [2871, 2873], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [2872, 2872], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2875, 2894], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2876, 2894], 'children': [{'type': 'Identifier', 'name': 'test_input', 'range': [2875, 2875], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2877, 2894], 'children': [{'type': 'Property', 'name': 'message_id', 'range': [2879, 2881], 'children': [{'type': 'Literal', 'name': '"12345"', 'range': [2881, 2881], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [2884, 2886], 'children': [{'type': 'Literal', 'name': '"Important"', 'range': [2886, 2886], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [2889, 2891], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [2891, 2891], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2897, 2900], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2898, 2900], 'children': [{'type': 'Identifier', 'name': 'test_credentials', 'range': [2897, 2897], 'children': []}, {'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [2899, 2899], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2902, 2925], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2903, 2925], 'children': [{'type': 'Identifier', 'name': 'test_output', 'range': [2902, 2902], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [2904, 2925], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2906, 2920], 'children': [{'type': 'Property', 'name': 'result', 'range': [2908, 2910], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2911, 2919], 'children': [{'type': 'Property', 'name': 'status', 'range': [2912, 2914], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2914, 2914], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2916, 2918], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2918, 2918], 'children': []}]}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [2928, 2957], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2929, 2957], 'children': [{'type': 'Identifier', 'name': 'test_mock', 'range': [2928, 2928], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [2930, 2957], 'children': [{'type': 'Property', 'name': '_remove_label', 'range': [2932, 2942], 'children': [{'type': 'FunctionExpression', 'name': 'lambda', 'range': [2934, 2942], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [2942, 2942], 'children': [{'type': 'Property', 'name': 'status', 'range': [2944, 2946], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [2946, 2946], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [2949, 2951], 'children': [{'type': 'Literal', 'name': '"Label_1"', 'range': [2951, 2951], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [2963, 3025], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [2988, 3025], 'children': [{'type': 'VariableDeclaration', 'name': 'service', 'range': [2989, 3000], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2990, 3000], 'children': [{'type': 'CallExpression', 'name': 'GmailReadBlock._build_service', 'range': [2991, 3000], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [2995, 2995], 'children': []}, {'type': 'SpreadElement', 'name': 'kwargs', 'range': [2997, 2999], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [3002, 3019], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3003, 3019], 'children': [{'type': 'CallExpression', 'name': 'self._remove_label', 'range': [3004, 3019], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3009, 3009], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.message_id', 'range': [3011, 3013], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.label_name', 'range': [3015, 3017], 'children': []}]}]}]}, {'type': 'YieldExpression', 'name': '', 'range': [3021, 3024], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [3022, 3022], 'children': []}, {'type': 'Identifier', 'name': 'result', 'range': [3024, 3024], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_remove_label', 'range': [3027, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3046, 3123], 'children': [{'type': 'VariableDeclaration', 'name': 'label_id', 'range': [3047, 3057], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3048, 3057], 'children': [{'type': 'CallExpression', 'name': 'self._get_label_id', 'range': [3049, 3057], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [3053, 3053], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3055, 3055], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [3058, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3059, 3060], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3059, 3059], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3061, 3109], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3062, 3098], 'children': [{'type': 'CallExpression', 'name': 'service.users().messages().modify', 'range': [3062, 3098], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3075, 3077], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3077, 3077], 'children': []}]}, {'type': 'Argument', 'name': 'id', 'range': [3079, 3081], 'children': [{'type': 'Identifier', 'name': 'message_id', 'range': [3081, 3081], 'children': []}]}, {'type': 'Argument', 'name': 'body', 'range': [3083, 3091], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3085, 3091], 'children': [{'type': 'Property', 'name': 'removeLabelIds', 'range': [3086, 3088], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [3088, 3090], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3089, 3089], 'children': []}]}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3099, 3109], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3100, 3108], 'children': [{'type': 'Property', 'name': 'status', 'range': [3101, 3103], 'children': [{'type': 'Literal', 'name': '"Label removed successfully"', 'range': [3103, 3103], 'children': []}]}, {'type': 'Property', 'name': 'label_id', 'range': [3105, 3107], 'children': [{'type': 'Identifier', 'name': 'label_id', 'range': [3107, 3107], 'children': []}]}]}]}]}]}, {'type': 'ElseStatement', 'name': '', 'range': [3110, 3123], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3111, 3123], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3113, 3123], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [3114, 3122], 'children': [{'type': 'Property', 'name': 'status', 'range': [3115, 3117], 'children': [{'type': 'Literal', 'name': '"Label not found"', 'range': [3117, 3117], 'children': []}]}, {'type': 'Property', 'name': 'label_name', 'range': [3119, 3121], 'children': [{'type': 'Identifier', 'name': 'label_name', 'range': [3121, 3121], 'children': []}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_get_label_id', 'range': [3125, 3202], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [3142, 3202], 'children': [{'type': 'VariableDeclaration', 'name': 'results', 'range': [3143, 3165], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3144, 3165], 'children': [{'type': 'CallExpression', 'name': 'service.users().labels().list', 'range': [3145, 3165], 'children': [{'type': 'Argument', 'name': 'userId', 'range': [3157, 3159], 'children': [{'type': 'Literal', 'name': '"me"', 'range': [3159, 3159], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'labels', 'range': [3166, 3177], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3167, 3177], 'children': [{'type': 'CallExpression', 'name': 'results.get', 'range': [3168, 3177], 'children': [{'type': 'Literal', 'name': '"labels"', 'range': [3172, 3172], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [3174, 3176], 'children': []}]}]}]}, {'type': 'ForStatement', 'name': '', 'range': [3178, 3199], 'children': [{'type': 'VariableDeclaration', 'name': 'label', 'range': [3179, 3180], 'children': []}, {'type': 'ExpressionStatement', 'name': '', 'range': [3181, 3182], 'children': [{'type': 'Identifier', 'name': 'labels', 'range': [3181, 3181], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [3183, 3199], 'children': [{'type': 'IfStatement', 'name': '', 'range': [3184, 3192], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [3185, 3191], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3185, 3191], 'children': [{'type': 'MemberExpression', 'name': 'label.name', 'range': [3185, 3188], 'children': []}, {'type': 'Identifier', 'name': 'label_name', 'range': [3190, 3190], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [3192, 3199], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [3194, 3199], 'children': [{'type': 'MemberExpression', 'name': 'label.id', 'range': [3195, 3198], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [3200, 3202], 'children': [{'type': 'Literal', 'name': 'None', 'range': [3201, 3201], 'children': []}]}]}]}]}
2025-01-08 10:36:19,543 - INFO - Completed main AST analysis flow
2025-01-08 10:36:19,546 - INFO - Successfully processed chunk
2025-01-08 10:36:19,687 - INFO - Starting code generation from AST
2025-01-08 10:37:37,612 - INFO - Successfully generated code from AST
2025-01-08 10:37:37,612 - INFO - Starting static code similarity comparison
2025-01-08 10:37:37,724 - INFO - Static similarity result: {'final_score': 100.0, 'length_similarity': 100.0, 'token_similarity': 100.0, 'structure_similarity': 100.0, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
