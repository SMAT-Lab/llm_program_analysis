2025-01-08 09:22:44,222 - INFO - Processing sample 47
2025-01-08 09:22:44,222 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:22:56,805 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 09:22:56,806 - INFO - Processing chunk #0 (size=265 chars, start_index=0)
2025-01-08 09:22:56,807 - INFO - Processing chunk with 265 chars starting at index 0
2025-01-08 09:22:56,807 - INFO - Starting main AST analysis flow
2025-01-08 09:22:56,807 - INFO - Tokenized code into 54 tokens
2025-01-08 09:22:56,807 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:22:56,808 - INFO - Processing chunk #1 (size=365 chars, start_index=54)
2025-01-08 09:22:56,808 - INFO - Processing chunk with 365 chars starting at index 54
2025-01-08 09:22:56,808 - INFO - Starting main AST analysis flow
2025-01-08 09:22:56,809 - INFO - Tokenized code into 22 tokens
2025-01-08 09:22:56,809 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:22:56,814 - INFO - Processing chunk #2 (size=1892 chars, start_index=76)
2025-01-08 09:22:56,814 - INFO - Processing chunk with 1892 chars starting at index 76
2025-01-08 09:22:56,815 - INFO - Starting main AST analysis flow
2025-01-08 09:22:56,815 - INFO - Tokenized code into 329 tokens
2025-01-08 09:22:56,815 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:23:03,786 - INFO - Step 1 result: {'type': 'Program', 'name': '_log_prefix', 'range': [54, 75], 'children': []}
2025-01-08 09:23:03,786 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:23:08,143 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [76, 404], 'children': [{'type': 'FunctionDeclaration', 'name': 'conn_retry', 'range': [76, 129], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'on_retry', 'range': [131, 164], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'decorator', 'range': [166, 403], 'children': [{'type': 'FunctionDeclaration', 'name': 'sync_wrapper', 'range': [241, 311], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'async_wrapper', 'range': [319, 390], 'children': []}]}]}
2025-01-08 09:23:08,143 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:23:11,218 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 53], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 16], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [33, 41], 'children': []}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [43, 51], 'children': []}]}
2025-01-08 09:23:11,218 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:23:26,855 - INFO - Step 2 result: {'type': 'Program', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'FunctionDeclaration', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [56, 64], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [57, 59], 'children': []}, {'type': 'Parameter', 'name': 'conn_id', 'range': [61, 63], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [65, 65], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [67, 69], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [71, 73], 'children': [{'type': 'Expression', 'name': 'f-string', 'range': [72, 73], 'children': []}]}]}]}
2025-01-08 09:23:26,855 - INFO - Starting Step 3: AST simplification
2025-01-08 09:23:41,780 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'asyncio', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'threading', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'wraps', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'uuid4', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'retry', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'stop_after_attempt', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'wait_exponential', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [33, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'get_service_name', 'range': [40, 40], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [43, 51], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [44, 51], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [45, 50], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [49, 49], 'children': []}]}]}]}]}
2025-01-08 09:23:41,780 - INFO - Starting Step 3: AST simplification
2025-01-08 09:24:00,924 - INFO - Step 3 result: {'type': 'Program', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'FunctionDeclaration', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [56, 64], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [57, 59], 'children': []}, {'type': 'Parameter', 'name': 'conn_id', 'range': [61, 63], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [65, 65], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [67, 69], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [71, 73], 'children': [{'type': 'Expression', 'name': 'f-string', 'range': [72, 73], 'children': []}]}]}]}
2025-01-08 09:24:00,925 - INFO - Starting Step 4: AST normalization
2025-01-08 09:24:14,377 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'asyncio', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'threading', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'wraps', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'uuid4', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'retry', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'stop_after_attempt', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'wait_exponential', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [33, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'get_service_name', 'range': [40, 40], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [43, 51], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [44, 51], 'children': [{'type': 'MemberExpression', 'name': 'logging.getLogger', 'range': [45, 50], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [49, 49], 'children': []}]}]}]}]}
2025-01-08 09:24:14,377 - INFO - Starting Step 4: AST normalization
2025-01-08 09:24:27,443 - INFO - Step 4 result: {'type': 'Program', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'FunctionDecl', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [56, 64], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [57, 59], 'children': []}, {'type': 'Parameter', 'name': 'conn_id', 'range': [61, 63], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [65, 65], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [67, 69], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [71, 73], 'children': [{'type': 'Literal', 'name': 'f-string', 'range': [72, 73], 'children': []}]}]}]}
2025-01-08 09:24:27,443 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:24:43,114 - INFO - Step 5 result: {'type': 'Program', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'FunctionDecl', 'name': '_log_prefix', 'range': [54, 75], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [56, 64], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [57, 59], 'children': []}, {'type': 'Parameter', 'name': 'conn_id', 'range': [61, 63], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [65, 65], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [67, 69], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [71, 73], 'children': [{'type': 'Literal', 'name': 'f-string', 'range': [72, 73], 'children': []}]}]}]}
2025-01-08 09:24:43,114 - INFO - Completed main AST analysis flow
2025-01-08 09:24:43,114 - INFO - Successfully processed chunk
2025-01-08 09:24:50,113 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'asyncio', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'threading', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'wraps', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'uuid4', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'retry', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'stop_after_attempt', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'wait_exponential', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [33, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'get_service_name', 'range': [40, 40], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [43, 51], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [44, 51], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [45, 50], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [49, 49], 'children': []}]}]}]}]}
2025-01-08 09:24:50,113 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:25:31,350 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 51], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'asyncio', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportSpecifier', 'name': 'os', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportSpecifier', 'name': 'threading', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 16], 'children': [{'type': 'ImportSpecifier', 'name': 'wraps', 'range': [15, 15], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 21], 'children': [{'type': 'ImportSpecifier', 'name': 'uuid4', 'range': [20, 20], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 31], 'children': [{'type': 'ImportSpecifier', 'name': 'retry', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'stop_after_attempt', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'wait_exponential', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [33, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'get_service_name', 'range': [40, 40], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [43, 51], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [44, 51], 'children': [{'type': 'CallExpression', 'name': 'logging.getLogger', 'range': [45, 50], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [49, 49], 'children': []}]}]}]}]}
2025-01-08 09:25:31,350 - INFO - Completed main AST analysis flow
2025-01-08 09:25:31,351 - INFO - Successfully processed chunk
2025-01-08 09:26:23,027 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [76, 404], 'children': [{'type': 'FunctionDeclaration', 'name': 'conn_retry', 'range': [76, 129], 'children': [{'type': 'ParameterList', 'name': '', 'range': [78, 118], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [80, 82], 'children': []}, {'type': 'Parameter', 'name': 'action_name', 'range': [85, 87], 'children': []}, {'type': 'Parameter', 'name': 'max_retry', 'range': [90, 94], 'children': []}, {'type': 'Parameter', 'name': 'multiplier', 'range': [97, 101], 'children': []}, {'type': 'Parameter', 'name': 'min_wait', 'range': [104, 108], 'children': []}, {'type': 'Parameter', 'name': 'max_wait', 'range': [111, 115], 'children': []}]}, {'type': 'ReturnType', 'name': '', 'range': [119, 123], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [124, 129], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'uuid4', 'range': [125, 127], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'on_retry', 'range': [131, 164], 'children': [{'type': 'ParameterList', 'name': '', 'range': [133, 135], 'children': [{'type': 'Parameter', 'name': 'retry_state', 'range': [134, 135], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [136, 164], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [138, 146], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [138, 146], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [138, 139], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [140, 145], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [142, 143], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [147, 156], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [147, 156], 'children': [{'type': 'Identifier', 'name': 'exception', 'range': [147, 148], 'children': []}, {'type': 'CallExpression', 'name': 'exception', 'range': [153, 155], 'children': [{'type': 'MemberExpression', 'name': 'outcome', 'range': [151, 152], 'children': [{'type': 'Identifier', 'name': 'retry_state', 'range': [149, 150], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [157, 164], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [159, 163], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [157, 158], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [161, 162], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'exception', 'range': [161, 162], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'decorator', 'range': [166, 403], 'children': [{'type': 'ParameterList', 'name': '', 'range': [168, 170], 'children': [{'type': 'Parameter', 'name': 'func', 'range': [169, 170], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [171, 403], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [173, 181], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [173, 181], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [173, 174], 'children': []}, {'type': 'CallExpression', 'name': 'iscoroutinefunction', 'range': [177, 180], 'children': [{'type': 'MemberExpression', 'name': 'asyncio', 'range': [175, 176], 'children': []}, {'type': 'Identifier', 'name': 'func', 'range': [179, 180], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 226], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [182, 226], 'children': [{'type': 'Identifier', 'name': 'retry_decorator', 'range': [182, 183], 'children': []}, {'type': 'CallExpression', 'name': 'retry', 'range': [184, 225], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [186, 225], 'children': [{'type': 'Property', 'name': 'stop', 'range': [187, 194], 'children': [{'type': 'CallExpression', 'name': 'stop_after_attempt', 'range': [189, 194], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [191, 193], 'children': [{'type': 'Identifier', 'name': 'max_retry', 'range': [191, 192], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [193, 193], 'children': []}]}]}]}, {'type': 'Property', 'name': 'wait', 'range': [197, 212], 'children': [{'type': 'CallExpression', 'name': 'wait_exponential', 'range': [199, 212], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [201, 212], 'children': [{'type': 'Property', 'name': 'multiplier', 'range': [202, 203], 'children': [{'type': 'Identifier', 'name': 'multiplier', 'range': [203, 203], 'children': []}]}, {'type': 'Property', 'name': 'min', 'range': [205, 207], 'children': [{'type': 'Identifier', 'name': 'min_wait', 'range': [207, 207], 'children': []}]}, {'type': 'Property', 'name': 'max', 'range': [209, 211], 'children': [{'type': 'Identifier', 'name': 'max_wait', 'range': [211, 211], 'children': []}]}]}]}]}, {'type': 'Property', 'name': 'before_sleep', 'range': [215, 218], 'children': [{'type': 'Identifier', 'name': 'on_retry', 'range': [217, 218], 'children': []}]}, {'type': 'Property', 'name': 'reraise', 'range': [220, 222], 'children': [{'type': 'Literal', 'name': 'True', 'range': [222, 222], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [227, 233], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [227, 233], 'children': [{'type': 'Identifier', 'name': 'wrapped_func', 'range': [227, 228], 'children': []}, {'type': 'CallExpression', 'name': 'retry_decorator', 'range': [229, 232], 'children': [{'type': 'Identifier', 'name': 'func', 'range': [231, 232], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'sync_wrapper', 'range': [241, 311], 'children': [{'type': 'ParameterList', 'name': '', 'range': [243, 250], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [245, 246], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [249, 250], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [251, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [253, 261], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [253, 261], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [253, 254], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [255, 260], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [257, 258], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [259, 260], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [262, 269], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [264, 268], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [262, 263], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [266, 267], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [266, 267], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [266, 267], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [270, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [272, 292], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [273, 284], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [273, 284], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [273, 274], 'children': []}, {'type': 'CallExpression', 'name': 'wrapped_func', 'range': [275, 283], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [277, 278], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [278, 278], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [280, 281], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [281, 281], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [285, 292], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [287, 291], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [285, 286], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [289, 290], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [289, 290], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [289, 290], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [293, 295], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [294, 295], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [296, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [301, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [302, 309], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [304, 308], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [302, 303], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [306, 307], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [306, 307], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [310, 311], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'async_wrapper', 'range': [319, 390], 'children': [{'type': 'ParameterList', 'name': '', 'range': [322, 329], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [324, 325], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [328, 329], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [330, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [332, 340], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [332, 340], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [332, 333], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [334, 339], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [336, 337], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [338, 339], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [341, 348], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [343, 347], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [341, 342], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [345, 346], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [345, 346], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [345, 346], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [349, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [351, 372], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [352, 364], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [352, 364], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [352, 353], 'children': []}, {'type': 'AwaitExpression', 'name': '', 'range': [354, 363], 'children': [{'type': 'CallExpression', 'name': 'wrapped_func', 'range': [355, 363], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [357, 358], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [358, 358], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [360, 361], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [361, 361], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [365, 372], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [367, 371], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [365, 366], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [369, 370], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [369, 370], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [369, 370], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [373, 375], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [374, 375], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [376, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [381, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [382, 389], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [384, 388], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [382, 383], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [386, 387], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [386, 387], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [390, 390], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [393, 399], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [395, 398], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [396, 396], 'children': []}, {'type': 'Identifier', 'name': 'async_wrapper', 'range': [394, 394], 'children': []}, {'type': 'Identifier', 'name': 'sync_wrapper', 'range': [398, 398], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [401, 403], 'children': [{'type': 'Identifier', 'name': 'decorator', 'range': [402, 403], 'children': []}]}]}]}]}
2025-01-08 09:26:23,028 - INFO - Starting Step 3: AST simplification
2025-01-08 09:29:37,458 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [76, 404], 'children': [{'type': 'FunctionDeclaration', 'name': 'conn_retry', 'range': [76, 129], 'children': [{'type': 'ParameterList', 'name': '', 'range': [78, 118], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [80, 82], 'children': []}, {'type': 'Parameter', 'name': 'action_name', 'range': [85, 87], 'children': []}, {'type': 'Parameter', 'name': 'max_retry', 'range': [90, 94], 'children': []}, {'type': 'Parameter', 'name': 'multiplier', 'range': [97, 101], 'children': []}, {'type': 'Parameter', 'name': 'min_wait', 'range': [104, 108], 'children': []}, {'type': 'Parameter', 'name': 'max_wait', 'range': [111, 115], 'children': []}]}, {'type': 'ReturnType', 'name': '', 'range': [119, 123], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [124, 129], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'uuid4', 'range': [125, 127], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'on_retry', 'range': [131, 164], 'children': [{'type': 'ParameterList', 'name': '', 'range': [133, 135], 'children': [{'type': 'Parameter', 'name': 'retry_state', 'range': [134, 135], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [136, 164], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [138, 146], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [138, 146], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [138, 139], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [140, 145], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [142, 143], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [147, 156], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [147, 156], 'children': [{'type': 'Identifier', 'name': 'exception', 'range': [147, 148], 'children': []}, {'type': 'CallExpression', 'name': 'exception', 'range': [153, 155], 'children': [{'type': 'MemberExpression', 'name': 'outcome', 'range': [151, 152], 'children': [{'type': 'Identifier', 'name': 'retry_state', 'range': [149, 150], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [157, 164], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [159, 163], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [157, 158], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [161, 162], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'exception', 'range': [161, 162], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'decorator', 'range': [166, 403], 'children': [{'type': 'ParameterList', 'name': '', 'range': [168, 170], 'children': [{'type': 'Parameter', 'name': 'func', 'range': [169, 170], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [171, 403], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [173, 181], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [173, 181], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [173, 174], 'children': []}, {'type': 'CallExpression', 'name': 'iscoroutinefunction', 'range': [177, 180], 'children': [{'type': 'MemberExpression', 'name': 'asyncio', 'range': [175, 176], 'children': []}, {'type': 'Identifier', 'name': 'func', 'range': [179, 180], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 226], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [182, 226], 'children': [{'type': 'Identifier', 'name': 'retry_decorator', 'range': [182, 183], 'children': []}, {'type': 'CallExpression', 'name': 'retry', 'range': [184, 225], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [186, 225], 'children': [{'type': 'Property', 'name': 'stop', 'range': [187, 194], 'children': [{'type': 'CallExpression', 'name': 'stop_after_attempt', 'range': [189, 194], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [191, 193], 'children': [{'type': 'Identifier', 'name': 'max_retry', 'range': [191, 192], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [193, 193], 'children': []}]}]}]}, {'type': 'Property', 'name': 'wait', 'range': [197, 212], 'children': [{'type': 'CallExpression', 'name': 'wait_exponential', 'range': [199, 212], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [201, 212], 'children': [{'type': 'Property', 'name': 'multiplier', 'range': [202, 203], 'children': [{'type': 'Identifier', 'name': 'multiplier', 'range': [203, 203], 'children': []}]}, {'type': 'Property', 'name': 'min', 'range': [205, 207], 'children': [{'type': 'Identifier', 'name': 'min_wait', 'range': [207, 207], 'children': []}]}, {'type': 'Property', 'name': 'max', 'range': [209, 211], 'children': [{'type': 'Identifier', 'name': 'max_wait', 'range': [211, 211], 'children': []}]}]}]}]}, {'type': 'Property', 'name': 'before_sleep', 'range': [215, 218], 'children': [{'type': 'Identifier', 'name': 'on_retry', 'range': [217, 218], 'children': []}]}, {'type': 'Property', 'name': 'reraise', 'range': [220, 222], 'children': [{'type': 'Literal', 'name': 'True', 'range': [222, 222], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [227, 233], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [227, 233], 'children': [{'type': 'Identifier', 'name': 'wrapped_func', 'range': [227, 228], 'children': []}, {'type': 'CallExpression', 'name': 'retry_decorator', 'range': [229, 232], 'children': [{'type': 'Identifier', 'name': 'func', 'range': [231, 232], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'sync_wrapper', 'range': [241, 311], 'children': [{'type': 'ParameterList', 'name': '', 'range': [243, 250], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [245, 246], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [249, 250], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [251, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [253, 261], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [253, 261], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [253, 254], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [255, 260], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [257, 258], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [259, 260], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [262, 269], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [264, 268], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [262, 263], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [266, 267], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [266, 267], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [266, 267], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [270, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [272, 292], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [273, 284], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [273, 284], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [273, 274], 'children': []}, {'type': 'CallExpression', 'name': 'wrapped_func', 'range': [275, 283], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [277, 278], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [278, 278], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [280, 281], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [281, 281], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [285, 292], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [287, 291], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [285, 286], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [289, 290], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [289, 290], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [289, 290], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [293, 295], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [294, 295], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [296, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [301, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [302, 309], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [304, 308], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [302, 303], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [306, 307], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [306, 307], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [310, 311], 'children': []}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'async_wrapper', 'range': [319, 390], 'children': [{'type': 'ParameterList', 'name': '', 'range': [322, 329], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [324, 325], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [328, 329], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [330, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [332, 340], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [332, 340], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [332, 333], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [334, 339], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [336, 337], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [338, 339], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [341, 348], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [343, 347], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [341, 342], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [345, 346], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [345, 346], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [345, 346], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [349, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [351, 372], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [352, 364], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [352, 364], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [352, 353], 'children': []}, {'type': 'AwaitExpression', 'name': '', 'range': [354, 363], 'children': [{'type': 'CallExpression', 'name': 'wrapped_func', 'range': [355, 363], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [357, 358], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [358, 358], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [360, 361], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [361, 361], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [365, 372], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [367, 371], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [365, 366], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [369, 370], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [369, 370], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [369, 370], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [373, 375], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [374, 375], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [376, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [381, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [382, 389], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [384, 388], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [382, 383], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [386, 387], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [386, 387], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [390, 390], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [393, 399], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [395, 398], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [396, 396], 'children': []}, {'type': 'Identifier', 'name': 'async_wrapper', 'range': [394, 394], 'children': []}, {'type': 'Identifier', 'name': 'sync_wrapper', 'range': [398, 398], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [401, 403], 'children': [{'type': 'Identifier', 'name': 'decorator', 'range': [402, 403], 'children': []}]}]}]}]}
2025-01-08 09:29:37,458 - INFO - Starting Step 4: AST normalization
2025-01-08 09:32:54,323 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [76, 404], 'children': [{'type': 'FunctionDecl', 'name': 'conn_retry', 'range': [76, 129], 'children': [{'type': 'ParameterList', 'name': '', 'range': [78, 118], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [80, 82], 'children': []}, {'type': 'Parameter', 'name': 'action_name', 'range': [85, 87], 'children': []}, {'type': 'Parameter', 'name': 'max_retry', 'range': [90, 94], 'children': []}, {'type': 'Parameter', 'name': 'multiplier', 'range': [97, 101], 'children': []}, {'type': 'Parameter', 'name': 'min_wait', 'range': [104, 108], 'children': []}, {'type': 'Parameter', 'name': 'max_wait', 'range': [111, 115], 'children': []}]}, {'type': 'ReturnType', 'name': '', 'range': [119, 123], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [124, 129], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'uuid4', 'range': [125, 127], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'on_retry', 'range': [131, 164], 'children': [{'type': 'ParameterList', 'name': '', 'range': [133, 135], 'children': [{'type': 'Parameter', 'name': 'retry_state', 'range': [134, 135], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [136, 164], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [138, 146], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [138, 146], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [138, 139], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [140, 145], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [142, 143], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [147, 156], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [147, 156], 'children': [{'type': 'Identifier', 'name': 'exception', 'range': [147, 148], 'children': []}, {'type': 'CallExpression', 'name': 'exception', 'range': [153, 155], 'children': [{'type': 'MemberExpression', 'name': 'outcome', 'range': [151, 152], 'children': [{'type': 'Identifier', 'name': 'retry_state', 'range': [149, 150], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [157, 164], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [159, 163], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [157, 158], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [161, 162], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'exception', 'range': [161, 162], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'decorator', 'range': [166, 403], 'children': [{'type': 'ParameterList', 'name': '', 'range': [168, 170], 'children': [{'type': 'Parameter', 'name': 'func', 'range': [169, 170], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [171, 403], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [173, 181], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [173, 181], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [173, 174], 'children': []}, {'type': 'CallExpression', 'name': 'iscoroutinefunction', 'range': [177, 180], 'children': [{'type': 'MemberExpression', 'name': 'asyncio', 'range': [175, 176], 'children': []}, {'type': 'Identifier', 'name': 'func', 'range': [179, 180], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 226], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [182, 226], 'children': [{'type': 'Identifier', 'name': 'retry_decorator', 'range': [182, 183], 'children': []}, {'type': 'CallExpression', 'name': 'retry', 'range': [184, 225], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [186, 225], 'children': [{'type': 'Property', 'name': 'stop', 'range': [187, 194], 'children': [{'type': 'CallExpression', 'name': 'stop_after_attempt', 'range': [189, 194], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [191, 193], 'children': [{'type': 'Identifier', 'name': 'max_retry', 'range': [191, 192], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [193, 193], 'children': []}]}]}]}, {'type': 'Property', 'name': 'wait', 'range': [197, 212], 'children': [{'type': 'CallExpression', 'name': 'wait_exponential', 'range': [199, 212], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [201, 212], 'children': [{'type': 'Property', 'name': 'multiplier', 'range': [202, 203], 'children': [{'type': 'Identifier', 'name': 'multiplier', 'range': [203, 203], 'children': []}]}, {'type': 'Property', 'name': 'min', 'range': [205, 207], 'children': [{'type': 'Identifier', 'name': 'min_wait', 'range': [207, 207], 'children': []}]}, {'type': 'Property', 'name': 'max', 'range': [209, 211], 'children': [{'type': 'Identifier', 'name': 'max_wait', 'range': [211, 211], 'children': []}]}]}]}]}, {'type': 'Property', 'name': 'before_sleep', 'range': [215, 218], 'children': [{'type': 'Identifier', 'name': 'on_retry', 'range': [217, 218], 'children': []}]}, {'type': 'Property', 'name': 'reraise', 'range': [220, 222], 'children': [{'type': 'Literal', 'name': 'True', 'range': [222, 222], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [227, 233], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [227, 233], 'children': [{'type': 'Identifier', 'name': 'wrapped_func', 'range': [227, 228], 'children': []}, {'type': 'CallExpression', 'name': 'retry_decorator', 'range': [229, 232], 'children': [{'type': 'Identifier', 'name': 'func', 'range': [231, 232], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'sync_wrapper', 'range': [241, 311], 'children': [{'type': 'ParameterList', 'name': '', 'range': [243, 250], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [245, 246], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [249, 250], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [251, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [253, 261], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [253, 261], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [253, 254], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [255, 260], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [257, 258], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [259, 260], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [262, 269], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [264, 268], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [262, 263], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [266, 267], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [266, 267], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [266, 267], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [270, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [272, 292], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [273, 284], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [273, 284], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [273, 274], 'children': []}, {'type': 'CallExpression', 'name': 'wrapped_func', 'range': [275, 283], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [277, 278], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [278, 278], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [280, 281], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [281, 281], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [285, 292], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [287, 291], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [285, 286], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [289, 290], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [289, 290], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [289, 290], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [293, 295], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [294, 295], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [296, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [301, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [302, 309], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [304, 308], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [302, 303], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [306, 307], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [306, 307], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [310, 311], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'async_wrapper', 'range': [319, 390], 'children': [{'type': 'ParameterList', 'name': '', 'range': [322, 329], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [324, 325], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [328, 329], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [330, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [332, 340], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [332, 340], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [332, 333], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [334, 339], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [336, 337], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [338, 339], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [341, 348], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [343, 347], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [341, 342], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [345, 346], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [345, 346], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [345, 346], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [349, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [351, 372], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [352, 364], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [352, 364], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [352, 353], 'children': []}, {'type': 'AwaitExpression', 'name': '', 'range': [354, 363], 'children': [{'type': 'CallExpression', 'name': 'wrapped_func', 'range': [355, 363], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [357, 358], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [358, 358], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [360, 361], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [361, 361], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [365, 372], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [367, 371], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [365, 366], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [369, 370], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [369, 370], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [369, 370], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [373, 375], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [374, 375], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [376, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [381, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [382, 389], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [384, 388], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [382, 383], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [386, 387], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [386, 387], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [390, 390], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [393, 399], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [395, 398], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [396, 396], 'children': []}, {'type': 'Identifier', 'name': 'async_wrapper', 'range': [394, 394], 'children': []}, {'type': 'Identifier', 'name': 'sync_wrapper', 'range': [398, 398], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [401, 403], 'children': [{'type': 'Identifier', 'name': 'decorator', 'range': [402, 403], 'children': []}]}]}]}]}
2025-01-08 09:32:54,323 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:36:40,454 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [76, 404], 'children': [{'type': 'FunctionDecl', 'name': 'conn_retry', 'range': [76, 129], 'children': [{'type': 'ParameterList', 'name': '', 'range': [78, 118], 'children': [{'type': 'Parameter', 'name': 'resource_name', 'range': [80, 82], 'children': []}, {'type': 'Parameter', 'name': 'action_name', 'range': [85, 87], 'children': []}, {'type': 'Parameter', 'name': 'max_retry', 'range': [90, 94], 'children': []}, {'type': 'Parameter', 'name': 'multiplier', 'range': [97, 101], 'children': []}, {'type': 'Parameter', 'name': 'min_wait', 'range': [104, 108], 'children': []}, {'type': 'Parameter', 'name': 'max_wait', 'range': [111, 115], 'children': []}]}, {'type': 'ReturnType', 'name': '', 'range': [119, 123], 'children': []}, {'type': 'FunctionBody', 'name': '', 'range': [124, 129], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'str', 'range': [124, 128], 'children': [{'type': 'CallExpression', 'name': 'uuid4', 'range': [125, 127], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'on_retry', 'range': [131, 164], 'children': [{'type': 'ParameterList', 'name': '', 'range': [133, 135], 'children': [{'type': 'Parameter', 'name': 'retry_state', 'range': [134, 135], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [136, 164], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [138, 146], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [138, 146], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [138, 139], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [140, 145], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [142, 143], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [144, 145], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [147, 156], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [147, 156], 'children': [{'type': 'Identifier', 'name': 'exception', 'range': [147, 148], 'children': []}, {'type': 'CallExpression', 'name': 'exception', 'range': [153, 155], 'children': [{'type': 'MemberExpression', 'name': 'outcome', 'range': [151, 152], 'children': [{'type': 'Identifier', 'name': 'retry_state', 'range': [149, 150], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [157, 164], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [159, 163], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [157, 158], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [161, 162], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [161, 162], 'children': []}, {'type': 'Identifier', 'name': 'exception', 'range': [161, 162], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'decorator', 'range': [166, 403], 'children': [{'type': 'ParameterList', 'name': '', 'range': [168, 170], 'children': [{'type': 'Parameter', 'name': 'func', 'range': [169, 170], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [171, 403], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [173, 181], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [173, 181], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [173, 174], 'children': []}, {'type': 'CallExpression', 'name': 'iscoroutinefunction', 'range': [177, 180], 'children': [{'type': 'MemberExpression', 'name': 'asyncio', 'range': [175, 176], 'children': []}, {'type': 'Identifier', 'name': 'func', 'range': [179, 180], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 226], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [182, 226], 'children': [{'type': 'Identifier', 'name': 'retry_decorator', 'range': [182, 183], 'children': []}, {'type': 'CallExpression', 'name': 'retry', 'range': [184, 225], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [186, 225], 'children': [{'type': 'Property', 'name': 'stop', 'range': [187, 194], 'children': [{'type': 'CallExpression', 'name': 'stop_after_attempt', 'range': [189, 194], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [191, 193], 'children': [{'type': 'Identifier', 'name': 'max_retry', 'range': [191, 192], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [193, 193], 'children': []}]}]}]}, {'type': 'Property', 'name': 'wait', 'range': [197, 212], 'children': [{'type': 'CallExpression', 'name': 'wait_exponential', 'range': [199, 212], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [201, 212], 'children': [{'type': 'Property', 'name': 'multiplier', 'range': [202, 203], 'children': [{'type': 'Identifier', 'name': 'multiplier', 'range': [203, 203], 'children': []}]}, {'type': 'Property', 'name': 'min', 'range': [205, 207], 'children': [{'type': 'Identifier', 'name': 'min_wait', 'range': [207, 207], 'children': []}]}, {'type': 'Property', 'name': 'max', 'range': [209, 211], 'children': [{'type': 'Identifier', 'name': 'max_wait', 'range': [211, 211], 'children': []}]}]}]}]}, {'type': 'Property', 'name': 'before_sleep', 'range': [215, 218], 'children': [{'type': 'Identifier', 'name': 'on_retry', 'range': [217, 218], 'children': []}]}, {'type': 'Property', 'name': 'reraise', 'range': [220, 222], 'children': [{'type': 'Literal', 'name': 'True', 'range': [222, 222], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [227, 233], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [227, 233], 'children': [{'type': 'Identifier', 'name': 'wrapped_func', 'range': [227, 228], 'children': []}, {'type': 'CallExpression', 'name': 'retry_decorator', 'range': [229, 232], 'children': [{'type': 'Identifier', 'name': 'func', 'range': [231, 232], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'sync_wrapper', 'range': [241, 311], 'children': [{'type': 'ParameterList', 'name': '', 'range': [243, 250], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [245, 246], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [249, 250], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [251, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [253, 261], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [253, 261], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [253, 254], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [255, 260], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [257, 258], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [259, 260], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [262, 269], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [264, 268], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [262, 263], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [266, 267], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [266, 267], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [266, 267], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [270, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [272, 292], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [273, 284], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [273, 284], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [273, 274], 'children': []}, {'type': 'CallExpression', 'name': 'wrapped_func', 'range': [275, 283], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [277, 278], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [278, 278], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [280, 281], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [281, 281], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [285, 292], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [287, 291], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [285, 286], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [289, 290], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [289, 290], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [289, 290], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [293, 295], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [294, 295], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [296, 311], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [301, 311], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [302, 309], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [304, 308], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [302, 303], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [306, 307], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [306, 307], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [306, 307], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [310, 311], 'children': []}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'async_wrapper', 'range': [319, 390], 'children': [{'type': 'ParameterList', 'name': '', 'range': [322, 329], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [324, 325], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [328, 329], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [330, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [332, 340], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [332, 340], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [332, 333], 'children': []}, {'type': 'CallExpression', 'name': '_log_prefix', 'range': [334, 339], 'children': [{'type': 'Identifier', 'name': 'resource_name', 'range': [336, 337], 'children': []}, {'type': 'Identifier', 'name': 'conn_id', 'range': [338, 339], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [341, 348], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [343, 347], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [341, 342], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [345, 346], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [345, 346], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [345, 346], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [349, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [351, 372], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [352, 364], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [352, 364], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [352, 353], 'children': []}, {'type': 'AwaitExpression', 'name': '', 'range': [354, 363], 'children': [{'type': 'CallExpression', 'name': 'wrapped_func', 'range': [355, 363], 'children': [{'type': 'SpreadElement', 'name': '', 'range': [357, 358], 'children': [{'type': 'Identifier', 'name': 'args', 'range': [358, 358], 'children': []}]}, {'type': 'SpreadElement', 'name': '', 'range': [360, 361], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [361, 361], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [365, 372], 'children': [{'type': 'CallExpression', 'name': 'info', 'range': [367, 371], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [365, 366], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [369, 370], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [369, 370], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [369, 370], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [373, 375], 'children': [{'type': 'Identifier', 'name': 'result', 'range': [374, 375], 'children': []}]}]}, {'type': 'CatchClause', 'name': '', 'range': [376, 390], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [381, 390], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [382, 389], 'children': [{'type': 'CallExpression', 'name': 'error', 'range': [384, 388], 'children': [{'type': 'MemberExpression', 'name': 'logger', 'range': [382, 383], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [386, 387], 'children': [{'type': 'Identifier', 'name': 'prefix', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'action_name', 'range': [386, 387], 'children': []}, {'type': 'Identifier', 'name': 'e', 'range': [386, 387], 'children': []}]}]}]}, {'type': 'ThrowStatement', 'name': '', 'range': [390, 390], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [393, 399], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [395, 398], 'children': [{'type': 'Identifier', 'name': 'is_coroutine', 'range': [396, 396], 'children': []}, {'type': 'Identifier', 'name': 'async_wrapper', 'range': [394, 394], 'children': []}, {'type': 'Identifier', 'name': 'sync_wrapper', 'range': [398, 398], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [401, 403], 'children': [{'type': 'Identifier', 'name': 'decorator', 'range': [402, 403], 'children': []}]}]}]}]}
2025-01-08 09:36:40,455 - INFO - Completed main AST analysis flow
2025-01-08 09:36:40,456 - INFO - Successfully processed chunk
2025-01-08 09:36:40,483 - INFO - Starting code generation from AST
2025-01-08 10:06:42,001 - ERROR - Error in get_code_from_ast: Expecting value: line 30 column 1 (char 29)
2025-01-08 10:06:42,002 - INFO - Starting static code similarity comparison
2025-01-08 10:06:42,004 - INFO - Static similarity result: {'final_score': 23.33, 'length_similarity': 0.0, 'token_similarity': 0.0, 'structure_similarity': 0.0, 'function_similarity': 100, 'complexity_similarity': 33.33, 'variable_similarity': 100}
