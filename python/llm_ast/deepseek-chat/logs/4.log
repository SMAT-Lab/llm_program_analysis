2025-01-08 10:27:27,129 - INFO - Processing sample 4
2025-01-08 10:27:27,129 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:42,016 - INFO - Successfully split code into 9 top-level declarations
2025-01-08 10:27:50,301 - INFO - Processing chunk #0 (size=1478 chars, start_index=0)
2025-01-08 10:27:50,302 - INFO - Processing chunk with 1478 chars starting at index 0
2025-01-08 10:27:50,302 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,302 - INFO - Tokenized code into 271 tokens
2025-01-08 10:27:50,302 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,304 - INFO - Processing chunk #1 (size=1500 chars, start_index=271)
2025-01-08 10:27:50,304 - INFO - Processing chunk with 1500 chars starting at index 271
2025-01-08 10:27:50,304 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,305 - INFO - Tokenized code into 385 tokens
2025-01-08 10:27:50,305 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,307 - INFO - Processing chunk #2 (size=78 chars, start_index=656)
2025-01-08 10:27:50,308 - INFO - Processing chunk with 78 chars starting at index 656
2025-01-08 10:27:50,308 - INFO - Processing chunk #3 (size=5475 chars, start_index=675)
2025-01-08 10:27:50,316 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,316 - INFO - Processing chunk #4 (size=4702 chars, start_index=1521)
2025-01-08 10:27:50,317 - INFO - Processing chunk with 5475 chars starting at index 675
2025-01-08 10:27:50,320 - INFO - Tokenized code into 19 tokens
2025-01-08 10:27:50,321 - INFO - Processing chunk #5 (size=2871 chars, start_index=2213)
2025-01-08 10:27:50,322 - INFO - Processing chunk with 4702 chars starting at index 1521
2025-01-08 10:27:50,322 - INFO - Processing chunk #6 (size=10677 chars, start_index=2636)
2025-01-08 10:27:50,326 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,327 - INFO - Processing chunk #7 (size=8430 chars, start_index=4134)
2025-01-08 10:27:50,328 - INFO - Processing chunk #8 (size=740 chars, start_index=5363)
2025-01-08 10:27:50,328 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,331 - INFO - Processing chunk with 2871 chars starting at index 2213
2025-01-08 10:27:50,334 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,335 - INFO - Processing chunk with 10677 chars starting at index 2636
2025-01-08 10:27:50,341 - INFO - Tokenized code into 846 tokens
2025-01-08 10:27:50,348 - INFO - Processing chunk with 8430 chars starting at index 4134
2025-01-08 10:27:50,349 - INFO - Processing chunk with 740 chars starting at index 5363
2025-01-08 10:27:50,355 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,368 - INFO - Tokenized code into 692 tokens
2025-01-08 10:27:50,374 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,378 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,379 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,379 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,381 - INFO - Tokenized code into 423 tokens
2025-01-08 10:27:50,382 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,397 - INFO - Tokenized code into 1498 tokens
2025-01-08 10:27:50,420 - INFO - Tokenized code into 1229 tokens
2025-01-08 10:27:50,421 - INFO - Tokenized code into 166 tokens
2025-01-08 10:27:50,424 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,446 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,451 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,458 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,939 - INFO - Step 1 result: {'type': 'Program', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': []}
2025-01-08 10:27:59,940 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,183 - INFO - Step 1 result: {'type': 'Program', 'name': 'validate_exec', 'range': [2213, 2635], 'children': []}
2025-01-08 10:28:00,184 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:01,329 - INFO - Step 1 result: {'type': 'Program', 'name': 'execute_node', 'range': [675, 1520], 'children': [{'type': 'FunctionDeclaration', 'name': 'update_execution', 'range': [749, 781], 'children': []}]}
2025-01-08 10:28:01,336 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:01,524 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [656, 674], 'children': [{'type': 'VariableDeclaration', 'name': 'T', 'range': [656, 661], 'children': []}, {'type': 'VariableDeclaration', 'name': 'ExecutionStream', 'range': [663, 672], 'children': []}]}
2025-01-08 10:28:01,524 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:02,420 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [5363, 5528], 'children': [{'type': 'FunctionDeclaration', 'name': 'get_db_client', 'range': [5386, 5408], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'synchronized', 'range': [5414, 5476], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llprint', 'range': [5479, 5527], 'children': []}]}
2025-01-08 10:28:02,420 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:06,123 - INFO - Step 1 result: {'type': 'Program', 'name': 'LogMetadata', 'range': [271, 655], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [275, 364], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'info', 'range': [366, 418], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'warning', 'range': [420, 472], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'error', 'range': [474, 526], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'debug', 'range': [528, 580], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'exception', 'range': [582, 634], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_wrap', 'range': [636, 654], 'children': []}]}
2025-01-08 10:28:06,808 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:09,950 - INFO - Step 1 result: {'type': 'Program', 'name': 'ExecutionManager', 'range': [4134, 5362], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4141, 4209], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'get_port', 'range': [4211, 4230], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run_service', 'range': [4232, 4297], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'cleanup', 'range': [4390, 4424], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'db_client', 'range': [4426, 4443], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'add_execution', 'range': [4445, 4940], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'cancel_execution', 'range': [4942, 5114], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_validate_node_input_credentials', 'range': [5115, 5362], 'children': []}]}
2025-01-08 10:28:10,070 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:12,096 - INFO - Step 1 result: {'type': 'Program', 'name': 'Executor', 'range': [2636, 4132], 'children': [{'type': 'ClassMethod', 'name': 'on_node_executor_start', 'range': [2645, 2750], 'children': []}, {'type': 'ClassMethod', 'name': 'on_node_executor_stop', 'range': [2752, 2836], 'children': []}, {'type': 'ClassMethod', 'name': 'on_node_executor_sigterm', 'range': [2837, 2912], 'children': []}, {'type': 'ClassMethod', 'name': 'on_node_execution', 'range': [2914, 3060], 'children': []}, {'type': 'ClassMethod', 'name': '_on_node_execution', 'range': [3061, 3172], 'children': []}, {'type': 'ClassMethod', 'name': 'on_graph_executor_start', 'range': [3173, 3237], 'children': []}, {'type': 'ClassMethod', 'name': 'on_graph_executor_stop', 'range': [3254, 3308], 'children': []}, {'type': 'ClassMethod', 'name': '_init_node_executor_pool', 'range': [3309, 3342], 'children': []}, {'type': 'ClassMethod', 'name': 'on_graph_execution', 'range': [3343, 3496], 'children': []}, {'type': 'ClassMethod', 'name': '_on_graph_execution', 'range': [3497, 4132], 'children': []}]}
2025-01-08 10:28:12,097 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:15,471 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 270], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [21, 29], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 34], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 56], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [58, 62], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': []}, {'type': 'ConditionalImport', 'name': '', 'range': [73, 83], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [85, 93], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [104, 110], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [111, 127], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [128, 159], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [160, 172], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [173, 183], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [184, 192], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [193, 199], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [200, 210], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [211, 219], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [220, 228], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [229, 251], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [252, 260], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [261, 269], 'children': []}]}
2025-01-08 10:28:15,471 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:17,159 - INFO - Step 2 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'T', 'range': [656, 661], 'children': [{'type': 'Assignment', 'name': '=', 'range': [657, 657], 'children': [{'type': 'TypeVar', 'name': 'TypeVar', 'range': [658, 658], 'children': [{'type': 'Literal', 'name': '"T"', 'range': [660, 660], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ExecutionStream', 'range': [663, 672], 'children': [{'type': 'Assignment', 'name': '=', 'range': [664, 664], 'children': [{'type': 'Generator', 'name': 'Generator', 'range': [665, 665], 'children': [{'type': 'TypeArguments', 'name': '[', 'range': [666, 666], 'children': [{'type': 'Type', 'name': 'NodeExecutionEntry', 'range': [667, 667], 'children': []}, {'type': 'Type', 'name': 'None', 'range': [669, 669], 'children': []}, {'type': 'Type', 'name': 'None', 'range': [671, 671], 'children': []}]}]}]}]}]}
2025-01-08 10:28:17,159 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:18,233 - INFO - Step 2 result: {'type': 'Program', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'FunctionDeclaration', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [1523, 1560], 'children': [{'type': 'Parameter', 'name': 'db_client', 'range': [1525, 1527], 'children': []}, {'type': 'Parameter', 'name': 'node', 'range': [1530, 1532], 'children': []}, {'type': 'Parameter', 'name': 'output', 'range': [1535, 1537], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [1540, 1542], 'children': []}, {'type': 'Parameter', 'name': 'graph_exec_id', 'range': [1545, 1547], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [1550, 1552], 'children': []}, {'type': 'Parameter', 'name': 'log_metadata', 'range': [1555, 1557], 'children': []}]}, {'type': 'ReturnType', 'name': 'returnType', 'range': [1562, 1566], 'children': [{'type': 'Type', 'name': 'list', 'range': [1563, 1566], 'children': []}]}]}]}
2025-01-08 10:28:18,234 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:18,332 - INFO - Step 2 result: {'type': 'Program', 'name': 'execute_node', 'range': [675, 1520], 'children': [{'type': 'FunctionDeclaration', 'name': 'update_execution', 'range': [749, 781], 'children': [{'type': 'Parameter', 'name': 'status', 'range': [752, 754], 'children': []}, {'type': 'ReturnType', 'name': 'ExecutionResult', 'range': [758, 759], 'children': []}, {'type': 'Block', 'name': '', 'range': [760, 781], 'children': [{'type': 'Assignment', 'name': 'exec_update', 'range': [761, 770], 'children': [{'type': 'FunctionCall', 'name': 'update_execution_status', 'range': [763, 770], 'children': [{'type': 'Argument', 'name': 'node_exec_id', 'range': [767, 767], 'children': []}, {'type': 'Argument', 'name': 'status', 'range': [769, 769], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'send_execution_update', 'range': [772, 777], 'children': [{'type': 'Argument', 'name': 'exec_update', 'range': [776, 776], 'children': []}]}, {'type': 'ReturnStatement', 'name': '', 'range': [779, 780], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [780, 780], 'children': []}]}]}]}]}
2025-01-08 10:28:18,332 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:28,504 - INFO - Step 3 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'T', 'range': [656, 661], 'children': [{'type': 'Assignment', 'name': '=', 'range': [657, 657], 'children': [{'type': 'TypeVar', 'name': 'TypeVar', 'range': [658, 658], 'children': [{'type': 'Literal', 'name': '"T"', 'range': [660, 660], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ExecutionStream', 'range': [663, 672], 'children': [{'type': 'Assignment', 'name': '=', 'range': [664, 664], 'children': [{'type': 'Generator', 'name': 'Generator', 'range': [665, 665], 'children': [{'type': 'TypeArguments', 'name': 'TypeArguments', 'range': [666, 672], 'children': [{'type': 'Type', 'name': 'NodeExecutionEntry', 'range': [667, 667], 'children': []}, {'type': 'Type', 'name': 'None', 'range': [669, 669], 'children': []}, {'type': 'Type', 'name': 'None', 'range': [671, 671], 'children': []}]}]}]}]}]}
2025-01-08 10:28:28,517 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:29,675 - INFO - Step 3 result: {'type': 'Program', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'FunctionDeclaration', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [1523, 1560], 'children': [{'type': 'Parameter', 'name': 'db_client', 'range': [1525, 1527], 'children': []}, {'type': 'Parameter', 'name': 'node', 'range': [1530, 1532], 'children': []}, {'type': 'Parameter', 'name': 'output', 'range': [1535, 1537], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [1540, 1542], 'children': []}, {'type': 'Parameter', 'name': 'graph_exec_id', 'range': [1545, 1547], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [1550, 1552], 'children': []}, {'type': 'Parameter', 'name': 'log_metadata', 'range': [1555, 1557], 'children': []}]}, {'type': 'ReturnType', 'name': 'returnType', 'range': [1562, 1566], 'children': [{'type': 'Type', 'name': 'list', 'range': [1563, 1566], 'children': []}]}]}]}
2025-01-08 10:28:29,676 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:30,485 - INFO - Step 3 result: {'type': 'Program', 'name': 'execute_node', 'range': [675, 1520], 'children': [{'type': 'FunctionDeclaration', 'name': 'update_execution', 'range': [749, 781], 'children': [{'type': 'Parameter', 'name': 'status', 'range': [752, 754], 'children': []}, {'type': 'ReturnType', 'name': 'ExecutionResult', 'range': [758, 759], 'children': []}, {'type': 'Block', 'name': '', 'range': [760, 781], 'children': [{'type': 'Assignment', 'name': 'exec_update', 'range': [761, 770], 'children': [{'type': 'FunctionCall', 'name': 'update_execution_status', 'range': [763, 770], 'children': [{'type': 'Argument', 'name': 'node_exec_id', 'range': [767, 767], 'children': []}, {'type': 'Argument', 'name': 'status', 'range': [769, 769], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'send_execution_update', 'range': [772, 777], 'children': [{'type': 'Argument', 'name': 'exec_update', 'range': [776, 776], 'children': []}]}, {'type': 'ReturnStatement', 'name': '', 'range': [779, 780], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [780, 780], 'children': []}]}]}]}]}
2025-01-08 10:28:30,486 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:32,436 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [5363, 5528], 'children': [{'type': 'FunctionDeclaration', 'name': 'get_db_client', 'range': [5386, 5408], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [5403, 5408], 'children': [{'type': 'CallExpression', 'name': 'get_service_client', 'range': [5404, 5407], 'children': [{'type': 'Identifier', 'name': 'DatabaseManager', 'range': [5406, 5407], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'synchronized', 'range': [5414, 5476], 'children': [{'type': 'VariableDeclaration', 'name': 'lock', 'range': [5429, 5447], 'children': [{'type': 'CallExpression', 'name': 'redis.get_redis().lock', 'range': [5433, 5447], 'children': [{'type': 'Literal', 'name': 'f"lock:{key}"', 'range': [5441, 5442], 'children': []}, {'type': 'AssignmentExpression', 'name': 'timeout', 'range': [5444, 5446], 'children': [{'type': 'Identifier', 'name': 'timeout', 'range': [5446, 5446], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [5449, 5476], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [5451, 5459], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5452, 5457], 'children': [{'type': 'CallExpression', 'name': 'lock.acquire', 'range': [5452, 5456], 'children': []}]}, {'type': 'YieldExpression', 'name': '', 'range': [5458, 5459], 'children': []}]}, {'type': 'FinallyStatement', 'name': '', 'range': [5460, 5476], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5463, 5475], 'children': [{'type': 'CallExpression', 'name': 'lock.locked', 'range': [5464, 5468], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [5469, 5475], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5471, 5474], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [5471, 5474], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'llprint', 'range': [5479, 5527], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5492, 5527], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5498, 5503], 'children': [{'type': 'CallExpression', 'name': 'logger.getEffectiveLevel', 'range': [5493, 5497], 'children': []}, {'type': 'MemberExpression', 'name': 'logging.DEBUG', 'range': [5500, 5502], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [5504, 5527], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'os.write', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'sys.stdout.fileno', 'range': [5509, 5515], 'children': []}, {'type': 'CallExpression', 'name': '(message + "\\n").encode', 'range': [5517, 5525], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:32,436 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:36,699 - INFO - Step 2 result: {'type': 'Program', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'FunctionDeclaration', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [2215, 2234], 'children': [{'type': 'Parameter', 'name': 'node', 'range': [2217, 2219], 'children': []}, {'type': 'Parameter', 'name': 'data', 'range': [2222, 2224], 'children': []}, {'type': 'Parameter', 'name': 'resolve_input', 'range': [2227, 2231], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [2237, 2244], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [2247, 2249], 'children': []}, {'type': 'VariableDeclaration', 'name': 'node_block', 'range': [2251, 2262], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_node_block', 'range': [2264, 2274], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2269, 2274], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_isinstance_node_block_AgentExecutorBlock', 'range': [2276, 2324], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [2297, 2324], 'children': [{'type': 'VariableDeclaration', 'name': 'exec_data', 'range': [2300, 2311], 'children': []}, {'type': 'ExceptStatement', 'name': 'except', 'range': [2313, 2324], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2319, 2324], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'input_schema', 'range': [2330, 2335], 'children': []}, {'type': 'VariableDeclaration', 'name': 'required_fields', 'range': [2336, 2345], 'children': []}, {'type': 'VariableDeclaration', 'name': 'input_default', 'range': [2346, 2351], 'children': []}, {'type': 'ElseStatement', 'name': 'else', 'range': [2352, 2420], 'children': [{'type': 'ForStatement', 'name': 'for_name_data_type_in_node_block_input_schema___annotations___items', 'range': [2369, 2420], 'children': [{'type': 'IfStatement', 'name': 'if_value_and_type_value_is_not_data_type', 'range': [2385, 2420], 'children': [{'type': 'AssignmentExpression', 'name': 'data_name_convert_value_data_type', 'range': [2409, 2419], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'input_schema', 'range': [2426, 2435], 'children': []}, {'type': 'VariableDeclaration', 'name': 'required_fields', 'range': [2436, 2445], 'children': []}, {'type': 'VariableDeclaration', 'name': 'input_default', 'range': [2446, 2451], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_input_fields_from_nodes_issubset_data', 'range': [2487, 2502], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2497, 2502], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'data_input_default_data', 'range': [2522, 2532], 'children': []}, {'type': 'IfStatement', 'name': 'if_resolve_input', 'range': [2534, 2544], 'children': [{'type': 'AssignmentExpression', 'name': 'data_merge_execution_input_data', 'range': [2538, 2544], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_not_required_fields_issubset_data', 'range': [2562, 2577], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2572, 2577], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_error_json_validate_with_jsonschema_schema_input_schema_data_data', 'range': [2592, 2626], 'children': [{'type': 'VariableDeclaration', 'name': 'error_message', 'range': [2610, 2613], 'children': []}, {'type': 'ExpressionStatement', 'name': 'logger_error_error_message', 'range': [2615, 2620], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2622, 2626], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return_data_node_block_name', 'range': [2628, 2634], 'children': []}]}]}
2025-01-08 10:28:36,700 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:38,108 - INFO - Step 4 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'T', 'range': [656, 661], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [657, 657], 'children': [{'type': 'Identifier', 'name': 'TypeVar', 'range': [658, 658], 'children': [{'type': 'Literal', 'name': '"T"', 'range': [660, 660], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ExecutionStream', 'range': [663, 672], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [664, 664], 'children': [{'type': 'Identifier', 'name': 'Generator', 'range': [665, 665], 'children': [{'type': 'TypeArguments', 'name': 'TypeArguments', 'range': [666, 672], 'children': [{'type': 'Identifier', 'name': 'NodeExecutionEntry', 'range': [667, 667], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [669, 669], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [671, 671], 'children': []}]}]}]}]}]}
2025-01-08 10:28:38,108 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:38,803 - INFO - Step 4 result: {'type': 'Program', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'FunctionDecl', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [1523, 1560], 'children': [{'type': 'Parameter', 'name': 'db_client', 'range': [1525, 1527], 'children': []}, {'type': 'Parameter', 'name': 'node', 'range': [1530, 1532], 'children': []}, {'type': 'Parameter', 'name': 'output', 'range': [1535, 1537], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [1540, 1542], 'children': []}, {'type': 'Parameter', 'name': 'graph_exec_id', 'range': [1545, 1547], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [1550, 1552], 'children': []}, {'type': 'Parameter', 'name': 'log_metadata', 'range': [1555, 1557], 'children': []}]}, {'type': 'ReturnType', 'name': 'returnType', 'range': [1562, 1566], 'children': [{'type': 'Type', 'name': 'list', 'range': [1563, 1566], 'children': []}]}]}]}
2025-01-08 10:28:38,803 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:40,757 - INFO - Step 4 result: {'type': 'Program', 'name': 'execute_node', 'range': [675, 1520], 'children': [{'type': 'FunctionDecl', 'name': 'update_execution', 'range': [749, 781], 'children': [{'type': 'Parameter', 'name': 'status', 'range': [752, 754], 'children': []}, {'type': 'ReturnType', 'name': 'ExecutionResult', 'range': [758, 759], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [760, 781], 'children': [{'type': 'AssignmentExpression', 'name': 'exec_update', 'range': [761, 770], 'children': [{'type': 'CallExpression', 'name': 'update_execution_status', 'range': [763, 770], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [767, 767], 'children': []}, {'type': 'Identifier', 'name': 'status', 'range': [769, 769], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'send_execution_update', 'range': [772, 777], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [776, 776], 'children': []}]}, {'type': 'ReturnStatement', 'name': '', 'range': [779, 780], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [780, 780], 'children': []}]}]}]}]}
2025-01-08 10:28:40,757 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:47,228 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [656, 672], 'children': [{'type': 'VariableDeclaration', 'name': 'T', 'range': [656, 661], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [657, 657], 'children': [{'type': 'Identifier', 'name': 'TypeVar', 'range': [658, 658], 'children': [{'type': 'Literal', 'name': '"T"', 'range': [660, 660], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ExecutionStream', 'range': [663, 672], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [664, 664], 'children': [{'type': 'Identifier', 'name': 'Generator', 'range': [665, 665], 'children': [{'type': 'TypeArguments', 'name': 'TypeArguments', 'range': [666, 672], 'children': [{'type': 'Identifier', 'name': 'NodeExecutionEntry', 'range': [667, 667], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [669, 669], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [671, 671], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:47,229 - INFO - Completed main AST analysis flow
2025-01-08 10:28:47,232 - INFO - Successfully processed chunk
2025-01-08 10:28:48,246 - INFO - Step 5 result: {'type': 'Program', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'FunctionDecl', 'name': '_enqueue_next_nodes', 'range': [1521, 1568], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [1523, 1560], 'children': [{'type': 'Parameter', 'name': 'db_client', 'range': [1525, 1527], 'children': []}, {'type': 'Parameter', 'name': 'node', 'range': [1530, 1532], 'children': []}, {'type': 'Parameter', 'name': 'output', 'range': [1535, 1537], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [1540, 1542], 'children': []}, {'type': 'Parameter', 'name': 'graph_exec_id', 'range': [1545, 1547], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [1550, 1552], 'children': []}, {'type': 'Parameter', 'name': 'log_metadata', 'range': [1555, 1557], 'children': []}]}, {'type': 'ReturnType', 'name': 'returnType', 'range': [1562, 1566], 'children': [{'type': 'Type', 'name': 'list', 'range': [1563, 1566], 'children': []}]}]}]}
2025-01-08 10:28:48,256 - INFO - Completed main AST analysis flow
2025-01-08 10:28:48,256 - INFO - Successfully processed chunk
2025-01-08 10:28:50,133 - INFO - Step 5 result: {'type': 'Program', 'name': 'execute_node', 'range': [675, 1520], 'children': [{'type': 'FunctionDecl', 'name': 'update_execution', 'range': [749, 781], 'children': [{'type': 'Parameter', 'name': 'status', 'range': [752, 754], 'children': []}, {'type': 'ReturnType', 'name': 'ExecutionResult', 'range': [758, 759], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [760, 781], 'children': [{'type': 'AssignmentExpression', 'name': 'exec_update', 'range': [761, 770], 'children': [{'type': 'CallExpression', 'name': 'update_execution_status', 'range': [763, 770], 'children': [{'type': 'Identifier', 'name': 'node_exec_id', 'range': [767, 767], 'children': []}, {'type': 'Identifier', 'name': 'status', 'range': [769, 769], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'send_execution_update', 'range': [772, 777], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [776, 776], 'children': []}]}, {'type': 'ReturnStatement', 'name': '', 'range': [779, 780], 'children': [{'type': 'Identifier', 'name': 'exec_update', 'range': [780, 780], 'children': []}]}]}]}]}
2025-01-08 10:28:50,133 - INFO - Completed main AST analysis flow
2025-01-08 10:28:50,133 - INFO - Successfully processed chunk
2025-01-08 10:28:51,264 - INFO - Step 2 result: {'type': 'Program', 'name': 'ExecutionManager', 'range': [4134, 5362], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4141, 4209], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4148, 4155], 'children': []}, {'type': 'Assignment', 'name': 'use_redis', 'range': [4156, 4161], 'children': []}, {'type': 'Assignment', 'name': 'use_supabase', 'range': [4162, 4167], 'children': []}, {'type': 'Assignment', 'name': 'pool_size', 'range': [4168, 4177], 'children': []}, {'type': 'Assignment', 'name': 'queue', 'range': [4178, 4188], 'children': []}, {'type': 'Assignment', 'name': 'active_graph_runs', 'range': [4189, 4209], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'get_port', 'range': [4211, 4230], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4224, 4230], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run_service', 'range': [4232, 4297], 'children': [{'type': 'ImportStatement', 'name': 'from', 'range': [4239, 4247], 'children': []}, {'type': 'Assignment', 'name': 'credentials_store', 'range': [4249, 4256], 'children': []}, {'type': 'Assignment', 'name': 'executor', 'range': [4257, 4279], 'children': []}, {'type': 'Assignment', 'name': 'sync_manager', 'range': [4280, 4287], 'children': []}, {'type': 'LogStatement', 'name': 'logger.info', 'range': [4288, 4297], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'cleanup', 'range': [4390, 4424], 'children': [{'type': 'LogStatement', 'name': 'logger.info', 'range': [4397, 4404], 'children': []}, {'type': 'MethodCall', 'name': 'executor.shutdown', 'range': [4405, 4415], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4417, 4424], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'db_client', 'range': [4426, 4443], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4439, 4443], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'add_execution', 'range': [4445, 4940], 'children': [{'type': 'Assignment', 'name': 'graph', 'range': [4485, 4511], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4512, 4523], 'children': []}, {'type': 'MethodCall', 'name': 'graph.validate_graph', 'range': [4525, 4533], 'children': []}, {'type': 'MethodCall', 'name': '_validate_node_input_credentials', 'range': [4534, 4542], 'children': []}, {'type': 'Assignment', 'name': 'nodes_input', 'range': [4544, 4548], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [4549, 4768], 'children': []}, {'type': 'Assignment', 'name': 'graph_exec_id', 'range': [4769, 4803], 'children': []}, {'type': 'Assignment', 'name': 'starting_node_execs', 'range': [4805, 4868], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [4810, 4868], 'children': []}, {'type': 'MethodCall', 'name': 'db_client.update_execution_status', 'range': [4868, 4890], 'children': []}, {'type': 'MethodCall', 'name': 'db_client.send_execution_update', 'range': [4891, 4899], 'children': []}, {'type': 'Assignment', 'name': 'graph_exec', 'range': [4901, 4927], 'children': []}, {'type': 'MethodCall', 'name': 'queue.add', 'range': [4928, 4936], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [4938, 4940], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'cancel_execution', 'range': [4942, 5114], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [4965, 4973], 'children': []}, {'type': 'Assignment', 'name': 'future', 'range': [4986, 4996], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4997, 5003], 'children': []}, {'type': 'MethodCall', 'name': 'cancel_event.set', 'range': [5008, 5013], 'children': []}, {'type': 'MethodCall', 'name': 'future.result', 'range': [5014, 5019], 'children': []}, {'type': 'Assignment', 'name': 'node_execs', 'range': [5031, 5041], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [5042, 5114], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_validate_node_input_credentials', 'range': [5115, 5362], 'children': [{'type': 'ForLoop', 'name': 'for', 'range': [5135, 5362], 'children': []}]}]}
2025-01-08 10:28:51,264 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:55,613 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [5363, 5528], 'children': [{'type': 'FunctionDeclaration', 'name': 'get_db_client', 'range': [5386, 5408], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [5403, 5408], 'children': [{'type': 'CallExpression', 'name': 'get_service_client', 'range': [5404, 5407], 'children': [{'type': 'Identifier', 'name': 'DatabaseManager', 'range': [5406, 5407], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'synchronized', 'range': [5414, 5476], 'children': [{'type': 'VariableDeclaration', 'name': 'lock', 'range': [5429, 5447], 'children': [{'type': 'CallExpression', 'name': 'redis.get_redis().lock', 'range': [5433, 5447], 'children': [{'type': 'Literal', 'name': 'f"lock:{key}"', 'range': [5441, 5442], 'children': []}, {'type': 'AssignmentExpression', 'name': 'timeout', 'range': [5444, 5446], 'children': [{'type': 'Identifier', 'name': 'timeout', 'range': [5446, 5446], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [5449, 5476], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [5451, 5459], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5452, 5457], 'children': [{'type': 'CallExpression', 'name': 'lock.acquire', 'range': [5452, 5456], 'children': []}]}, {'type': 'YieldExpression', 'name': '', 'range': [5458, 5459], 'children': []}]}, {'type': 'FinallyStatement', 'name': '', 'range': [5460, 5476], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5463, 5475], 'children': [{'type': 'CallExpression', 'name': 'lock.locked', 'range': [5464, 5468], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [5469, 5475], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5471, 5474], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [5471, 5474], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'llprint', 'range': [5479, 5527], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5492, 5527], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5498, 5503], 'children': [{'type': 'CallExpression', 'name': 'logger.getEffectiveLevel', 'range': [5493, 5497], 'children': []}, {'type': 'MemberExpression', 'name': 'logging.DEBUG', 'range': [5500, 5502], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [5504, 5527], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'os.write', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'sys.stdout.fileno', 'range': [5509, 5515], 'children': []}, {'type': 'CallExpression', 'name': '(message + "\\n").encode', 'range': [5517, 5525], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:55,614 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:05,217 - INFO - Step 3 result: {'type': 'Program', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'FunctionDeclaration', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [2215, 2234], 'children': [{'type': 'Parameter', 'name': 'node', 'range': [2217, 2219], 'children': []}, {'type': 'Parameter', 'name': 'data', 'range': [2222, 2224], 'children': []}, {'type': 'Parameter', 'name': 'resolve_input', 'range': [2227, 2231], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [2237, 2244], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [2247, 2249], 'children': []}, {'type': 'VariableDeclaration', 'name': 'node_block', 'range': [2251, 2262], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_node_block', 'range': [2264, 2274], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2269, 2274], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_isinstance_node_block_AgentExecutorBlock', 'range': [2276, 2324], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [2297, 2324], 'children': [{'type': 'VariableDeclaration', 'name': 'exec_data', 'range': [2300, 2311], 'children': []}, {'type': 'ExceptStatement', 'name': 'except', 'range': [2313, 2324], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2319, 2324], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'input_schema', 'range': [2330, 2335], 'children': []}, {'type': 'VariableDeclaration', 'name': 'required_fields', 'range': [2336, 2345], 'children': []}, {'type': 'VariableDeclaration', 'name': 'input_default', 'range': [2346, 2351], 'children': []}, {'type': 'ElseStatement', 'name': 'else', 'range': [2352, 2420], 'children': [{'type': 'ForStatement', 'name': 'for_name_data_type_in_node_block_input_schema___annotations___items', 'range': [2369, 2420], 'children': [{'type': 'IfStatement', 'name': 'if_value_and_type_value_is_not_data_type', 'range': [2385, 2420], 'children': [{'type': 'AssignmentExpression', 'name': 'data_name_convert_value_data_type', 'range': [2409, 2419], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'input_schema', 'range': [2426, 2435], 'children': []}, {'type': 'VariableDeclaration', 'name': 'required_fields', 'range': [2436, 2445], 'children': []}, {'type': 'VariableDeclaration', 'name': 'input_default', 'range': [2446, 2451], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_input_fields_from_nodes_issubset_data', 'range': [2487, 2502], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2497, 2502], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'data_input_default_data', 'range': [2522, 2532], 'children': []}, {'type': 'IfStatement', 'name': 'if_resolve_input', 'range': [2534, 2544], 'children': [{'type': 'AssignmentExpression', 'name': 'data_merge_execution_input_data', 'range': [2538, 2544], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_not_required_fields_issubset_data', 'range': [2562, 2577], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2572, 2577], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_error_json_validate_with_jsonschema_schema_input_schema_data_data', 'range': [2592, 2626], 'children': [{'type': 'VariableDeclaration', 'name': 'error_message', 'range': [2610, 2613], 'children': []}, {'type': 'ExpressionStatement', 'name': 'logger_error_error_message', 'range': [2615, 2620], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2622, 2626], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return_data_node_block_name', 'range': [2628, 2634], 'children': []}]}]}
2025-01-08 10:29:05,217 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:17,210 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [5363, 5528], 'children': [{'type': 'FunctionDecl', 'name': 'get_db_client', 'range': [5386, 5408], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [5403, 5408], 'children': [{'type': 'CallExpression', 'name': 'get_service_client', 'range': [5404, 5407], 'children': [{'type': 'Identifier', 'name': 'DatabaseManager', 'range': [5406, 5407], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'synchronized', 'range': [5414, 5476], 'children': [{'type': 'VariableDecl', 'name': 'lock', 'range': [5429, 5447], 'children': [{'type': 'CallExpression', 'name': 'redis.get_redis().lock', 'range': [5433, 5447], 'children': [{'type': 'Literal', 'name': 'f"lock:{key}"', 'range': [5441, 5442], 'children': []}, {'type': 'AssignmentExpression', 'name': 'timeout', 'range': [5444, 5446], 'children': [{'type': 'Identifier', 'name': 'timeout', 'range': [5446, 5446], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [5449, 5476], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [5451, 5459], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5452, 5457], 'children': [{'type': 'CallExpression', 'name': 'lock.acquire', 'range': [5452, 5456], 'children': []}]}, {'type': 'YieldExpression', 'name': '', 'range': [5458, 5459], 'children': []}]}, {'type': 'FinallyStatement', 'name': '', 'range': [5460, 5476], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5463, 5475], 'children': [{'type': 'CallExpression', 'name': 'lock.locked', 'range': [5464, 5468], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [5469, 5475], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5471, 5474], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [5471, 5474], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'llprint', 'range': [5479, 5527], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5492, 5527], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5498, 5503], 'children': [{'type': 'CallExpression', 'name': 'logger.getEffectiveLevel', 'range': [5493, 5497], 'children': []}, {'type': 'MemberExpression', 'name': 'logging.DEBUG', 'range': [5500, 5502], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [5504, 5527], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'os.write', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'sys.stdout.fileno', 'range': [5509, 5515], 'children': []}, {'type': 'CallExpression', 'name': '(message + "\\n").encode', 'range': [5517, 5525], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:17,210 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:26,591 - INFO - Step 3 result: {'type': 'Program', 'name': 'ExecutionManager', 'range': [4134, 5362], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4141, 4209], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4148, 4155], 'children': []}, {'type': 'Assignment', 'name': 'use_redis', 'range': [4156, 4161], 'children': []}, {'type': 'Assignment', 'name': 'use_supabase', 'range': [4162, 4167], 'children': []}, {'type': 'Assignment', 'name': 'pool_size', 'range': [4168, 4177], 'children': []}, {'type': 'Assignment', 'name': 'queue', 'range': [4178, 4188], 'children': []}, {'type': 'Assignment', 'name': 'active_graph_runs', 'range': [4189, 4209], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'get_port', 'range': [4211, 4230], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4224, 4230], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run_service', 'range': [4232, 4297], 'children': [{'type': 'ImportStatement', 'name': 'from', 'range': [4239, 4247], 'children': []}, {'type': 'Assignment', 'name': 'credentials_store', 'range': [4249, 4256], 'children': []}, {'type': 'Assignment', 'name': 'executor', 'range': [4257, 4279], 'children': []}, {'type': 'Assignment', 'name': 'sync_manager', 'range': [4280, 4287], 'children': []}, {'type': 'LogStatement', 'name': 'logger.info', 'range': [4288, 4297], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'cleanup', 'range': [4390, 4424], 'children': [{'type': 'LogStatement', 'name': 'logger.info', 'range': [4397, 4404], 'children': []}, {'type': 'MethodCall', 'name': 'executor.shutdown', 'range': [4405, 4415], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4417, 4424], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'db_client', 'range': [4426, 4443], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4439, 4443], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'add_execution', 'range': [4445, 4940], 'children': [{'type': 'Assignment', 'name': 'graph', 'range': [4485, 4511], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4512, 4523], 'children': []}, {'type': 'MethodCall', 'name': 'graph.validate_graph', 'range': [4525, 4533], 'children': []}, {'type': 'MethodCall', 'name': '_validate_node_input_credentials', 'range': [4534, 4542], 'children': []}, {'type': 'Assignment', 'name': 'nodes_input', 'range': [4544, 4548], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [4549, 4768], 'children': []}, {'type': 'Assignment', 'name': 'graph_exec_id', 'range': [4769, 4803], 'children': []}, {'type': 'Assignment', 'name': 'starting_node_execs', 'range': [4805, 4868], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [4810, 4868], 'children': []}, {'type': 'MethodCall', 'name': 'db_client.update_execution_status', 'range': [4868, 4890], 'children': []}, {'type': 'MethodCall', 'name': 'db_client.send_execution_update', 'range': [4891, 4899], 'children': []}, {'type': 'Assignment', 'name': 'graph_exec', 'range': [4901, 4927], 'children': []}, {'type': 'MethodCall', 'name': 'queue.add', 'range': [4928, 4936], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [4938, 4940], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'cancel_execution', 'range': [4942, 5114], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [4965, 4973], 'children': []}, {'type': 'Assignment', 'name': 'future', 'range': [4986, 4996], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4997, 5003], 'children': []}, {'type': 'MethodCall', 'name': 'cancel_event.set', 'range': [5008, 5013], 'children': []}, {'type': 'MethodCall', 'name': 'future.result', 'range': [5014, 5019], 'children': []}, {'type': 'Assignment', 'name': 'node_execs', 'range': [5031, 5041], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [5042, 5114], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_validate_node_input_credentials', 'range': [5115, 5362], 'children': [{'type': 'ForLoop', 'name': 'for', 'range': [5135, 5362], 'children': []}]}]}
2025-01-08 10:29:26,591 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:33,122 - INFO - Step 4 result: {'type': 'Program', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'FunctionDecl', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [2215, 2234], 'children': [{'type': 'Parameter', 'name': 'node', 'range': [2217, 2219], 'children': []}, {'type': 'Parameter', 'name': 'data', 'range': [2222, 2224], 'children': []}, {'type': 'Parameter', 'name': 'resolve_input', 'range': [2227, 2231], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [2237, 2244], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [2247, 2249], 'children': []}, {'type': 'VariableDecl', 'name': 'node_block', 'range': [2251, 2262], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_node_block', 'range': [2264, 2274], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2269, 2274], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_isinstance_node_block_AgentExecutorBlock', 'range': [2276, 2324], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [2297, 2324], 'children': [{'type': 'VariableDecl', 'name': 'exec_data', 'range': [2300, 2311], 'children': []}, {'type': 'ExceptStatement', 'name': 'except', 'range': [2313, 2324], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2319, 2324], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'input_schema', 'range': [2330, 2335], 'children': []}, {'type': 'VariableDecl', 'name': 'required_fields', 'range': [2336, 2345], 'children': []}, {'type': 'VariableDecl', 'name': 'input_default', 'range': [2346, 2351], 'children': []}, {'type': 'ElseStatement', 'name': 'else', 'range': [2352, 2420], 'children': [{'type': 'ForStatement', 'name': 'for_name_data_type_in_node_block_input_schema___annotations___items', 'range': [2369, 2420], 'children': [{'type': 'IfStatement', 'name': 'if_value_and_type_value_is_not_data_type', 'range': [2385, 2420], 'children': [{'type': 'AssignmentExpression', 'name': 'data_name_convert_value_data_type', 'range': [2409, 2419], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'input_schema', 'range': [2426, 2435], 'children': []}, {'type': 'VariableDecl', 'name': 'required_fields', 'range': [2436, 2445], 'children': []}, {'type': 'VariableDecl', 'name': 'input_default', 'range': [2446, 2451], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_input_fields_from_nodes_issubset_data', 'range': [2487, 2502], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2497, 2502], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'data_input_default_data', 'range': [2522, 2532], 'children': []}, {'type': 'IfStatement', 'name': 'if_resolve_input', 'range': [2534, 2544], 'children': [{'type': 'AssignmentExpression', 'name': 'data_merge_execution_input_data', 'range': [2538, 2544], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_not_required_fields_issubset_data', 'range': [2562, 2577], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2572, 2577], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_error_json_validate_with_jsonschema_schema_input_schema_data_data', 'range': [2592, 2626], 'children': [{'type': 'VariableDecl', 'name': 'error_message', 'range': [2610, 2613], 'children': []}, {'type': 'ExpressionStatement', 'name': 'logger_error_error_message', 'range': [2615, 2620], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2622, 2626], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return_data_node_block_name', 'range': [2628, 2634], 'children': []}]}]}
2025-01-08 10:29:33,123 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:39,092 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [5363, 5528], 'children': [{'type': 'FunctionDecl', 'name': 'get_db_client', 'range': [5386, 5408], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [5403, 5408], 'children': [{'type': 'CallExpression', 'name': 'get_service_client', 'range': [5404, 5407], 'children': [{'type': 'Identifier', 'name': 'DatabaseManager', 'range': [5406, 5407], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'synchronized', 'range': [5414, 5476], 'children': [{'type': 'VariableDecl', 'name': 'lock', 'range': [5429, 5447], 'children': [{'type': 'CallExpression', 'name': 'redis.get_redis().lock', 'range': [5433, 5447], 'children': [{'type': 'Literal', 'name': 'f"lock:{key}"', 'range': [5441, 5442], 'children': []}, {'type': 'AssignmentExpression', 'name': 'timeout', 'range': [5444, 5446], 'children': [{'type': 'Identifier', 'name': 'timeout', 'range': [5446, 5446], 'children': []}]}]}]}, {'type': 'TryStatement', 'name': '', 'range': [5449, 5476], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [5451, 5459], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5452, 5457], 'children': [{'type': 'CallExpression', 'name': 'lock.acquire', 'range': [5452, 5456], 'children': []}]}, {'type': 'YieldExpression', 'name': '', 'range': [5458, 5459], 'children': []}]}, {'type': 'FinallyStatement', 'name': '', 'range': [5460, 5476], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5463, 5475], 'children': [{'type': 'CallExpression', 'name': 'lock.locked', 'range': [5464, 5468], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [5469, 5475], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5471, 5474], 'children': [{'type': 'CallExpression', 'name': 'lock.release', 'range': [5471, 5474], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'llprint', 'range': [5479, 5527], 'children': [{'type': 'IfStatement', 'name': '', 'range': [5492, 5527], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5498, 5503], 'children': [{'type': 'CallExpression', 'name': 'logger.getEffectiveLevel', 'range': [5493, 5497], 'children': []}, {'type': 'MemberExpression', 'name': 'logging.DEBUG', 'range': [5500, 5502], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [5504, 5527], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'os.write', 'range': [5505, 5526], 'children': [{'type': 'CallExpression', 'name': 'sys.stdout.fileno', 'range': [5509, 5515], 'children': []}, {'type': 'CallExpression', 'name': '(message + "\\n").encode', 'range': [5517, 5525], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:39,092 - INFO - Completed main AST analysis flow
2025-01-08 10:29:39,093 - INFO - Successfully processed chunk
2025-01-08 10:29:55,543 - INFO - Step 2 result: {'type': 'Program', 'name': 'LogMetadata', 'range': [271, 655], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [275, 364], 'children': [{'type': 'ParameterList', 'name': '', 'range': [277, 312], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [279, 279], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [282, 284], 'children': []}, {'type': 'Parameter', 'name': 'graph_eid', 'range': [287, 289], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [292, 294], 'children': []}, {'type': 'Parameter', 'name': 'node_eid', 'range': [297, 299], 'children': []}, {'type': 'Parameter', 'name': 'node_id', 'range': [302, 304], 'children': []}, {'type': 'Parameter', 'name': 'block_name', 'range': [307, 309], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [314, 364], 'children': [{'type': 'Assignment', 'name': '', 'range': [315, 319], 'children': [{'type': 'Variable', 'name': 'self.metadata', 'range': [315, 317], 'children': []}, {'type': 'Dictionary', 'name': '', 'range': [319, 356], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [321, 323], 'children': [{'type': 'Key', 'name': 'component', 'range': [321, 321], 'children': []}, {'type': 'Value', 'name': 'ExecutionManager', 'range': [323, 323], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [326, 328], 'children': [{'type': 'Key', 'name': 'user_id', 'range': [326, 326], 'children': []}, {'type': 'Value', 'name': 'user_id', 'range': [328, 328], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [331, 333], 'children': [{'type': 'Key', 'name': 'graph_eid', 'range': [331, 331], 'children': []}, {'type': 'Value', 'name': 'graph_eid', 'range': [333, 333], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [336, 338], 'children': [{'type': 'Key', 'name': 'graph_id', 'range': [336, 336], 'children': []}, {'type': 'Value', 'name': 'graph_id', 'range': [338, 338], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [341, 343], 'children': [{'type': 'Key', 'name': 'node_eid', 'range': [341, 341], 'children': []}, {'type': 'Value', 'name': 'node_eid', 'range': [343, 343], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [346, 348], 'children': [{'type': 'Key', 'name': 'node_id', 'range': [346, 346], 'children': []}, {'type': 'Value', 'name': 'node_id', 'range': [348, 348], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [351, 353], 'children': [{'type': 'Key', 'name': 'block_name', 'range': [351, 351], 'children': []}, {'type': 'Value', 'name': 'block_name', 'range': [353, 353], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '', 'range': [358, 363], 'children': [{'type': 'Variable', 'name': 'self.prefix', 'range': [358, 360], 'children': []}, {'type': 'StringLiteral', 'name': '', 'range': [362, 363], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'info', 'range': [366, 418], 'children': [{'type': 'ParameterList', 'name': '', 'range': [368, 378], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [369, 369], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [371, 373], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [375, 377], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [380, 418], 'children': [{'type': 'Assignment', 'name': '', 'range': [381, 392], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [381, 381], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [383, 392], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [386, 391], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [387, 387], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [389, 391], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.info', 'range': [394, 417], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [397, 416], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [398, 398], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [400, 416], 'children': [{'type': 'Dictionary', 'name': '', 'range': [402, 416], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [403, 415], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [403, 403], 'children': []}, {'type': 'Value', 'name': '', 'range': [405, 415], 'children': [{'type': 'Dictionary', 'name': '', 'range': [405, 415], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [406, 414], 'children': [{'type': 'Key', 'name': '', 'range': [406, 407], 'children': []}, {'type': 'Value', 'name': '', 'range': [408, 414], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'warning', 'range': [420, 472], 'children': [{'type': 'ParameterList', 'name': '', 'range': [422, 432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [423, 423], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [425, 427], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [429, 431], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [434, 472], 'children': [{'type': 'Assignment', 'name': '', 'range': [435, 446], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [435, 435], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [437, 446], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [440, 445], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [441, 441], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [443, 445], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.warning', 'range': [448, 471], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [451, 470], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [454, 470], 'children': [{'type': 'Dictionary', 'name': '', 'range': [456, 470], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [457, 469], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [457, 457], 'children': []}, {'type': 'Value', 'name': '', 'range': [459, 469], 'children': [{'type': 'Dictionary', 'name': '', 'range': [459, 469], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [460, 468], 'children': [{'type': 'Key', 'name': '', 'range': [460, 461], 'children': []}, {'type': 'Value', 'name': '', 'range': [462, 468], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'error', 'range': [474, 526], 'children': [{'type': 'ParameterList', 'name': '', 'range': [476, 486], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [477, 477], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [479, 481], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [483, 485], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [488, 526], 'children': [{'type': 'Assignment', 'name': '', 'range': [489, 500], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [489, 489], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [491, 500], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [494, 499], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [495, 495], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [497, 499], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.error', 'range': [502, 525], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [505, 524], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [506, 506], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [508, 524], 'children': [{'type': 'Dictionary', 'name': '', 'range': [510, 524], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [511, 523], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [511, 511], 'children': []}, {'type': 'Value', 'name': '', 'range': [513, 523], 'children': [{'type': 'Dictionary', 'name': '', 'range': [513, 523], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [514, 522], 'children': [{'type': 'Key', 'name': '', 'range': [514, 515], 'children': []}, {'type': 'Value', 'name': '', 'range': [516, 522], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'debug', 'range': [528, 580], 'children': [{'type': 'ParameterList', 'name': '', 'range': [530, 540], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [531, 531], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [533, 535], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [537, 539], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [542, 580], 'children': [{'type': 'Assignment', 'name': '', 'range': [543, 554], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [543, 543], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [545, 554], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [548, 553], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [549, 549], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [551, 553], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.debug', 'range': [556, 579], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [559, 578], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [560, 560], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [562, 578], 'children': [{'type': 'Dictionary', 'name': '', 'range': [564, 578], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [565, 577], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [565, 565], 'children': []}, {'type': 'Value', 'name': '', 'range': [567, 577], 'children': [{'type': 'Dictionary', 'name': '', 'range': [567, 577], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [568, 576], 'children': [{'type': 'Key', 'name': '', 'range': [568, 569], 'children': []}, {'type': 'Value', 'name': '', 'range': [570, 576], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'exception', 'range': [582, 634], 'children': [{'type': 'ParameterList', 'name': '', 'range': [584, 594], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [585, 585], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [587, 589], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [591, 593], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [596, 634], 'children': [{'type': 'Assignment', 'name': '', 'range': [597, 608], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [597, 597], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [599, 608], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [602, 607], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [603, 603], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [605, 607], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.exception', 'range': [610, 633], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [613, 632], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [614, 614], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [616, 632], 'children': [{'type': 'Dictionary', 'name': '', 'range': [618, 632], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [619, 631], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [619, 619], 'children': []}, {'type': 'Value', 'name': '', 'range': [621, 631], 'children': [{'type': 'Dictionary', 'name': '', 'range': [621, 631], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [622, 630], 'children': [{'type': 'Key', 'name': '', 'range': [622, 623], 'children': []}, {'type': 'Value', 'name': '', 'range': [624, 630], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_wrap', 'range': [636, 654], 'children': [{'type': 'ParameterList', 'name': '', 'range': [638, 648], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [639, 639], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [641, 643], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [645, 647], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [650, 654], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [651, 653], 'children': [{'type': 'StringLiteral', 'name': '', 'range': [652, 653], 'children': []}]}]}]}]}
2025-01-08 10:29:55,544 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:58,997 - INFO - Step 4 result: {'type': 'Program', 'name': 'ExecutionManager', 'range': [4134, 5362], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [4141, 4209], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [4148, 4155], 'children': []}, {'type': 'AssignmentExpression', 'name': 'use_redis', 'range': [4156, 4161], 'children': []}, {'type': 'AssignmentExpression', 'name': 'use_supabase', 'range': [4162, 4167], 'children': []}, {'type': 'AssignmentExpression', 'name': 'pool_size', 'range': [4168, 4177], 'children': []}, {'type': 'AssignmentExpression', 'name': 'queue', 'range': [4178, 4188], 'children': []}, {'type': 'AssignmentExpression', 'name': 'active_graph_runs', 'range': [4189, 4209], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'get_port', 'range': [4211, 4230], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4224, 4230], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run_service', 'range': [4232, 4297], 'children': [{'type': 'ImportStatement', 'name': 'from', 'range': [4239, 4247], 'children': []}, {'type': 'AssignmentExpression', 'name': 'credentials_store', 'range': [4249, 4256], 'children': []}, {'type': 'AssignmentExpression', 'name': 'executor', 'range': [4257, 4279], 'children': []}, {'type': 'AssignmentExpression', 'name': 'sync_manager', 'range': [4280, 4287], 'children': []}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [4288, 4297], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'cleanup', 'range': [4390, 4424], 'children': [{'type': 'CallExpression', 'name': 'logger.info', 'range': [4397, 4404], 'children': []}, {'type': 'CallExpression', 'name': 'executor.shutdown', 'range': [4405, 4415], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [4417, 4424], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'db_client', 'range': [4426, 4443], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4439, 4443], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'add_execution', 'range': [4445, 4940], 'children': [{'type': 'AssignmentExpression', 'name': 'graph', 'range': [4485, 4511], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4512, 4523], 'children': []}, {'type': 'CallExpression', 'name': 'graph.validate_graph', 'range': [4525, 4533], 'children': []}, {'type': 'CallExpression', 'name': '_validate_node_input_credentials', 'range': [4534, 4542], 'children': []}, {'type': 'AssignmentExpression', 'name': 'nodes_input', 'range': [4544, 4548], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [4549, 4768], 'children': []}, {'type': 'AssignmentExpression', 'name': 'graph_exec_id', 'range': [4769, 4803], 'children': []}, {'type': 'AssignmentExpression', 'name': 'starting_node_execs', 'range': [4805, 4868], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [4810, 4868], 'children': []}, {'type': 'CallExpression', 'name': 'db_client.update_execution_status', 'range': [4868, 4890], 'children': []}, {'type': 'CallExpression', 'name': 'db_client.send_execution_update', 'range': [4891, 4899], 'children': []}, {'type': 'AssignmentExpression', 'name': 'graph_exec', 'range': [4901, 4927], 'children': []}, {'type': 'CallExpression', 'name': 'queue.add', 'range': [4928, 4936], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [4938, 4940], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'cancel_execution', 'range': [4942, 5114], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [4965, 4973], 'children': []}, {'type': 'AssignmentExpression', 'name': 'future', 'range': [4986, 4996], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4997, 5003], 'children': []}, {'type': 'CallExpression', 'name': 'cancel_event.set', 'range': [5008, 5013], 'children': []}, {'type': 'CallExpression', 'name': 'future.result', 'range': [5014, 5019], 'children': []}, {'type': 'AssignmentExpression', 'name': 'node_execs', 'range': [5031, 5041], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [5042, 5114], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_validate_node_input_credentials', 'range': [5115, 5362], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5135, 5362], 'children': []}]}]}
2025-01-08 10:29:58,997 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:00,067 - INFO - Step 5 result: {'type': 'Program', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'FunctionDecl', 'name': 'validate_exec', 'range': [2213, 2635], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [2215, 2234], 'children': [{'type': 'Parameter', 'name': 'node', 'range': [2217, 2219], 'children': []}, {'type': 'Parameter', 'name': 'data', 'range': [2222, 2224], 'children': []}, {'type': 'Parameter', 'name': 'resolve_input', 'range': [2227, 2231], 'children': []}]}, {'type': 'ReturnType', 'name': 'return_type', 'range': [2237, 2244], 'children': []}, {'type': 'Docstring', 'name': 'docstring', 'range': [2247, 2249], 'children': []}, {'type': 'VariableDecl', 'name': 'node_block', 'range': [2251, 2262], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_node_block', 'range': [2264, 2274], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2269, 2274], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_isinstance_node_block_AgentExecutorBlock', 'range': [2276, 2324], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [2297, 2324], 'children': [{'type': 'VariableDecl', 'name': 'exec_data', 'range': [2300, 2311], 'children': []}, {'type': 'ExceptStatement', 'name': 'except', 'range': [2313, 2324], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2319, 2324], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'input_schema', 'range': [2330, 2335], 'children': []}, {'type': 'VariableDecl', 'name': 'required_fields', 'range': [2336, 2345], 'children': []}, {'type': 'VariableDecl', 'name': 'input_default', 'range': [2346, 2351], 'children': []}, {'type': 'ElseStatement', 'name': 'else', 'range': [2352, 2420], 'children': [{'type': 'ForStatement', 'name': 'for_name_data_type_in_node_block_input_schema___annotations___items', 'range': [2369, 2420], 'children': [{'type': 'IfStatement', 'name': 'if_value_and_type_value_is_not_data_type', 'range': [2385, 2420], 'children': [{'type': 'AssignmentExpression', 'name': 'data_name_convert_value_data_type', 'range': [2409, 2419], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'input_schema', 'range': [2426, 2435], 'children': []}, {'type': 'VariableDecl', 'name': 'required_fields', 'range': [2436, 2445], 'children': []}, {'type': 'VariableDecl', 'name': 'input_default', 'range': [2446, 2451], 'children': []}, {'type': 'IfStatement', 'name': 'if_not_input_fields_from_nodes_issubset_data', 'range': [2487, 2502], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2497, 2502], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'data_input_default_data', 'range': [2522, 2532], 'children': []}, {'type': 'IfStatement', 'name': 'if_resolve_input', 'range': [2534, 2544], 'children': [{'type': 'AssignmentExpression', 'name': 'data_merge_execution_input_data', 'range': [2538, 2544], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_not_required_fields_issubset_data', 'range': [2562, 2577], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [2572, 2577], 'children': []}]}, {'type': 'IfStatement', 'name': 'if_error_json_validate_with_jsonschema_schema_input_schema_data_data', 'range': [2592, 2626], 'children': [{'type': 'VariableDecl', 'name': 'error_message', 'range': [2610, 2613], 'children': []}, {'type': 'ExpressionStatement', 'name': 'logger_error_error_message', 'range': [2615, 2620], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2622, 2626], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return_data_node_block_name', 'range': [2628, 2634], 'children': []}]}]}
2025-01-08 10:30:00,067 - INFO - Completed main AST analysis flow
2025-01-08 10:30:00,067 - INFO - Successfully processed chunk
2025-01-08 10:30:14,265 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [0, 0], 'children': []}, {'type': 'ImportedModule', 'name': 'atexit', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [3, 3], 'children': []}, {'type': 'ImportedModule', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [6, 6], 'children': []}, {'type': 'ImportedModule', 'name': 'multiprocessing', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [9, 9], 'children': []}, {'type': 'ImportedModule', 'name': 'os', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 14], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [12, 12], 'children': []}, {'type': 'ImportedModule', 'name': 'signal', 'range': [13, 13], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [15, 15], 'children': []}, {'type': 'ImportedModule', 'name': 'sys', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 20], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [18, 18], 'children': []}, {'type': 'ImportedModule', 'name': 'threading', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [21, 29], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [21, 21], 'children': []}, {'type': 'ModulePath', 'name': 'concurrent.futures', 'range': [22, 24], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [25, 25], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [26, 28], 'children': [{'type': 'ImportedEntity', 'name': 'Future', 'range': [26, 26], 'children': []}, {'type': 'ImportedEntity', 'name': 'ProcessPoolExecutor', 'range': [28, 28], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 34], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [30, 30], 'children': []}, {'type': 'ModulePath', 'name': 'contextlib', 'range': [31, 31], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [32, 32], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [33, 33], 'children': [{'type': 'ImportedEntity', 'name': 'contextmanager', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [35, 35], 'children': []}, {'type': 'ModulePath', 'name': 'multiprocessing.pool', 'range': [36, 38], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [39, 39], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [40, 42], 'children': [{'type': 'ImportedEntity', 'name': 'AsyncResult', 'range': [40, 40], 'children': []}, {'type': 'ImportedEntity', 'name': 'Pool', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 56], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [44, 44], 'children': []}, {'type': 'ModulePath', 'name': 'typing', 'range': [45, 45], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [46, 46], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [47, 55], 'children': [{'type': 'ImportedEntity', 'name': 'TYPE_CHECKING', 'range': [47, 47], 'children': []}, {'type': 'ImportedEntity', 'name': 'Any', 'range': [49, 49], 'children': []}, {'type': 'ImportedEntity', 'name': 'Generator', 'range': [51, 51], 'children': []}, {'type': 'ImportedEntity', 'name': 'TypeVar', 'range': [53, 53], 'children': []}, {'type': 'ImportedEntity', 'name': 'cast', 'range': [55, 55], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [58, 62], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [58, 58], 'children': []}, {'type': 'ModulePath', 'name': 'pydantic', 'range': [59, 59], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [60, 60], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [61, 61], 'children': [{'type': 'ImportedEntity', 'name': 'BaseModel', 'range': [61, 61], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [63, 63], 'children': []}, {'type': 'ModulePath', 'name': 'redis.lock', 'range': [64, 66], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [67, 67], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [68, 70], 'children': [{'type': 'ImportedEntity', 'name': 'Lock', 'range': [68, 68], 'children': []}, {'type': 'Alias', 'name': 'as', 'range': [69, 69], 'children': []}, {'type': 'ImportedEntity', 'name': 'RedisLock', 'range': [70, 70], 'children': []}]}]}, {'type': 'ConditionalImport', 'name': '', 'range': [73, 83], 'children': [{'type': 'IfKeyword', 'name': 'if', 'range': [73, 73], 'children': []}, {'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [74, 74], 'children': []}, {'type': 'Colon', 'name': ':', 'range': [75, 75], 'children': []}, {'type': 'FromKeyword', 'name': 'from', 'range': [77, 77], 'children': []}, {'type': 'ModulePath', 'name': 'backend.executor', 'range': [78, 80], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [81, 81], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [82, 82], 'children': [{'type': 'ImportedEntity', 'name': 'DatabaseManager', 'range': [82, 82], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [85, 93], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [85, 85], 'children': []}, {'type': 'ModulePath', 'name': 'autogpt_libs.utils.cache', 'range': [86, 90], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [91, 91], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [92, 92], 'children': [{'type': 'ImportedEntity', 'name': 'thread_cached', 'range': [92, 92], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [95, 95], 'children': []}, {'type': 'ModulePath', 'name': 'backend.blocks.agent', 'range': [96, 100], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [101, 101], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [102, 102], 'children': [{'type': 'ImportedEntity', 'name': 'AgentExecutorBlock', 'range': [102, 102], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [104, 110], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [104, 104], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data', 'range': [105, 107], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [108, 108], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [109, 109], 'children': [{'type': 'ImportedEntity', 'name': 'redis', 'range': [109, 109], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [111, 127], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [111, 111], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.block', 'range': [112, 116], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [117, 117], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [118, 126], 'children': [{'type': 'ImportedEntity', 'name': 'Block', 'range': [118, 118], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockData', 'range': [120, 120], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockInput', 'range': [122, 122], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockType', 'range': [124, 124], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_block', 'range': [126, 126], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [128, 159], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [128, 128], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.execution', 'range': [129, 133], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [134, 134], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [135, 158], 'children': [{'type': 'ImportedEntity', 'name': 'ExecutionQueue', 'range': [137, 137], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionResult', 'range': [140, 140], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionStatus', 'range': [143, 143], 'children': []}, {'type': 'ImportedEntity', 'name': 'GraphExecutionEntry', 'range': [146, 146], 'children': []}, {'type': 'ImportedEntity', 'name': 'NodeExecutionEntry', 'range': [149, 149], 'children': []}, {'type': 'ImportedEntity', 'name': 'merge_execution_input', 'range': [152, 152], 'children': []}, {'type': 'ImportedEntity', 'name': 'parse_execution_output', 'range': [155, 155], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [160, 172], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [160, 160], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.graph', 'range': [161, 165], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [166, 166], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [167, 171], 'children': [{'type': 'ImportedEntity', 'name': 'GraphModel', 'range': [167, 167], 'children': []}, {'type': 'ImportedEntity', 'name': 'Link', 'range': [169, 169], 'children': []}, {'type': 'ImportedEntity', 'name': 'Node', 'range': [171, 171], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [173, 183], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [173, 173], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.model', 'range': [174, 178], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [179, 179], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [180, 182], 'children': [{'type': 'ImportedEntity', 'name': 'CREDENTIALS_FIELD_NAME', 'range': [180, 180], 'children': []}, {'type': 'ImportedEntity', 'name': 'CredentialsMetaInput', 'range': [182, 182], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [184, 192], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [184, 184], 'children': []}, {'type': 'ModulePath', 'name': 'backend.integrations.creds_manager', 'range': [185, 189], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [190, 190], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [191, 191], 'children': [{'type': 'ImportedEntity', 'name': 'IntegrationCredentialsManager', 'range': [191, 191], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [193, 199], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [193, 193], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util', 'range': [194, 196], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [197, 197], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [198, 198], 'children': [{'type': 'ImportedEntity', 'name': 'json', 'range': [198, 198], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [200, 210], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [200, 200], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.decorator', 'range': [201, 205], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [206, 206], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [207, 209], 'children': [{'type': 'ImportedEntity', 'name': 'error_logged', 'range': [207, 207], 'children': []}, {'type': 'ImportedEntity', 'name': 'time_measured', 'range': [209, 209], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [211, 219], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [211, 211], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.logging', 'range': [212, 216], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [217, 217], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [218, 218], 'children': [{'type': 'ImportedEntity', 'name': 'configure_logging', 'range': [218, 218], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [220, 228], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [220, 220], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.process', 'range': [221, 225], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [226, 226], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [227, 227], 'children': [{'type': 'ImportedEntity', 'name': 'set_service_name', 'range': [227, 227], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [229, 251], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [229, 229], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.service', 'range': [230, 234], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [235, 235], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [236, 250], 'children': [{'type': 'ImportedEntity', 'name': 'AppService', 'range': [238, 238], 'children': []}, {'type': 'ImportedEntity', 'name': 'close_service_client', 'range': [241, 241], 'children': []}, {'type': 'ImportedEntity', 'name': 'expose', 'range': [244, 244], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_service_client', 'range': [247, 247], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [252, 260], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [252, 252], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.settings', 'range': [253, 257], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [258, 258], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [259, 259], 'children': [{'type': 'ImportedEntity', 'name': 'Settings', 'range': [259, 259], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [261, 269], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [261, 261], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.type', 'range': [262, 266], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [267, 267], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [268, 268], 'children': [{'type': 'ImportedEntity', 'name': 'convert', 'range': [268, 268], 'children': []}]}]}]}
2025-01-08 10:30:14,265 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:31,046 - INFO - Step 5 result: {'type': 'Program', 'name': 'ExecutionManager', 'range': [4134, 5362], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [4141, 4209], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [4148, 4155], 'children': []}, {'type': 'AssignmentExpression', 'name': 'use_redis', 'range': [4156, 4161], 'children': []}, {'type': 'AssignmentExpression', 'name': 'use_supabase', 'range': [4162, 4167], 'children': []}, {'type': 'AssignmentExpression', 'name': 'pool_size', 'range': [4168, 4177], 'children': []}, {'type': 'AssignmentExpression', 'name': 'queue', 'range': [4178, 4188], 'children': []}, {'type': 'AssignmentExpression', 'name': 'active_graph_runs', 'range': [4189, 4209], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'get_port', 'range': [4211, 4230], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4224, 4230], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run_service', 'range': [4232, 4297], 'children': [{'type': 'ImportStatement', 'name': 'from', 'range': [4239, 4247], 'children': []}, {'type': 'AssignmentExpression', 'name': 'credentials_store', 'range': [4249, 4256], 'children': []}, {'type': 'AssignmentExpression', 'name': 'executor', 'range': [4257, 4279], 'children': []}, {'type': 'AssignmentExpression', 'name': 'sync_manager', 'range': [4280, 4287], 'children': []}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [4288, 4297], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'cleanup', 'range': [4390, 4424], 'children': [{'type': 'CallExpression', 'name': 'logger.info', 'range': [4397, 4404], 'children': []}, {'type': 'CallExpression', 'name': 'executor.shutdown', 'range': [4405, 4415], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [4417, 4424], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'db_client', 'range': [4426, 4443], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [4439, 4443], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'add_execution', 'range': [4445, 4940], 'children': [{'type': 'AssignmentExpression', 'name': 'graph', 'range': [4485, 4511], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4512, 4523], 'children': []}, {'type': 'CallExpression', 'name': 'graph.validate_graph', 'range': [4525, 4533], 'children': []}, {'type': 'CallExpression', 'name': '_validate_node_input_credentials', 'range': [4534, 4542], 'children': []}, {'type': 'AssignmentExpression', 'name': 'nodes_input', 'range': [4544, 4548], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [4549, 4768], 'children': []}, {'type': 'AssignmentExpression', 'name': 'graph_exec_id', 'range': [4769, 4803], 'children': []}, {'type': 'AssignmentExpression', 'name': 'starting_node_execs', 'range': [4805, 4868], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [4810, 4868], 'children': []}, {'type': 'CallExpression', 'name': 'db_client.update_execution_status', 'range': [4868, 4890], 'children': []}, {'type': 'CallExpression', 'name': 'db_client.send_execution_update', 'range': [4891, 4899], 'children': []}, {'type': 'AssignmentExpression', 'name': 'graph_exec', 'range': [4901, 4927], 'children': []}, {'type': 'CallExpression', 'name': 'queue.add', 'range': [4928, 4936], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [4938, 4940], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'cancel_execution', 'range': [4942, 5114], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [4965, 4973], 'children': []}, {'type': 'AssignmentExpression', 'name': 'future', 'range': [4986, 4996], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [4997, 5003], 'children': []}, {'type': 'CallExpression', 'name': 'cancel_event.set', 'range': [5008, 5013], 'children': []}, {'type': 'CallExpression', 'name': 'future.result', 'range': [5014, 5019], 'children': []}, {'type': 'AssignmentExpression', 'name': 'node_execs', 'range': [5031, 5041], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [5042, 5114], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_validate_node_input_credentials', 'range': [5115, 5362], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5135, 5362], 'children': []}]}]}
2025-01-08 10:30:31,046 - INFO - Completed main AST analysis flow
2025-01-08 10:30:31,048 - INFO - Successfully processed chunk
2025-01-08 10:30:34,912 - ERROR - Failed to parse Step 2 result
2025-01-08 10:30:34,912 - INFO - Starting Step 3: AST simplification
2025-01-08 10:31:39,144 - INFO - Step 3 result: {'type': 'Program', 'name': 'LogMetadata', 'range': [271, 655], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [275, 364], 'children': [{'type': 'ParameterList', 'name': '', 'range': [277, 312], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [279, 279], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [282, 284], 'children': []}, {'type': 'Parameter', 'name': 'graph_eid', 'range': [287, 289], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [292, 294], 'children': []}, {'type': 'Parameter', 'name': 'node_eid', 'range': [297, 299], 'children': []}, {'type': 'Parameter', 'name': 'node_id', 'range': [302, 304], 'children': []}, {'type': 'Parameter', 'name': 'block_name', 'range': [307, 309], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [314, 364], 'children': [{'type': 'Assignment', 'name': '', 'range': [315, 319], 'children': [{'type': 'Variable', 'name': 'self.metadata', 'range': [315, 317], 'children': []}, {'type': 'Dictionary', 'name': '', 'range': [319, 356], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [321, 323], 'children': [{'type': 'Key', 'name': 'component', 'range': [321, 321], 'children': []}, {'type': 'Value', 'name': 'ExecutionManager', 'range': [323, 323], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [326, 328], 'children': [{'type': 'Key', 'name': 'user_id', 'range': [326, 326], 'children': []}, {'type': 'Value', 'name': 'user_id', 'range': [328, 328], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [331, 333], 'children': [{'type': 'Key', 'name': 'graph_eid', 'range': [331, 331], 'children': []}, {'type': 'Value', 'name': 'graph_eid', 'range': [333, 333], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [336, 338], 'children': [{'type': 'Key', 'name': 'graph_id', 'range': [336, 336], 'children': []}, {'type': 'Value', 'name': 'graph_id', 'range': [338, 338], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [341, 343], 'children': [{'type': 'Key', 'name': 'node_eid', 'range': [341, 341], 'children': []}, {'type': 'Value', 'name': 'node_eid', 'range': [343, 343], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [346, 348], 'children': [{'type': 'Key', 'name': 'node_id', 'range': [346, 346], 'children': []}, {'type': 'Value', 'name': 'node_id', 'range': [348, 348], 'children': []}]}, {'type': 'KeyValuePair', 'name': '', 'range': [351, 353], 'children': [{'type': 'Key', 'name': 'block_name', 'range': [351, 351], 'children': []}, {'type': 'Value', 'name': 'block_name', 'range': [353, 353], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '', 'range': [358, 363], 'children': [{'type': 'Variable', 'name': 'self.prefix', 'range': [358, 360], 'children': []}, {'type': 'StringLiteral', 'name': '', 'range': [362, 363], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'info', 'range': [366, 418], 'children': [{'type': 'ParameterList', 'name': '', 'range': [368, 378], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [369, 369], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [371, 373], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [375, 377], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [380, 418], 'children': [{'type': 'Assignment', 'name': '', 'range': [381, 392], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [381, 381], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [383, 392], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [386, 391], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [387, 387], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [389, 391], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.info', 'range': [394, 417], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [397, 416], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [398, 398], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [400, 416], 'children': [{'type': 'Dictionary', 'name': '', 'range': [402, 416], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [403, 415], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [403, 403], 'children': []}, {'type': 'Value', 'name': '', 'range': [405, 415], 'children': [{'type': 'Dictionary', 'name': '', 'range': [405, 415], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [406, 414], 'children': [{'type': 'Key', 'name': '', 'range': [406, 407], 'children': []}, {'type': 'Value', 'name': '', 'range': [408, 414], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'warning', 'range': [420, 472], 'children': [{'type': 'ParameterList', 'name': '', 'range': [422, 432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [423, 423], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [425, 427], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [429, 431], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [434, 472], 'children': [{'type': 'Assignment', 'name': '', 'range': [435, 446], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [435, 435], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [437, 446], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [440, 445], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [441, 441], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [443, 445], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.warning', 'range': [448, 471], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [451, 470], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [454, 470], 'children': [{'type': 'Dictionary', 'name': '', 'range': [456, 470], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [457, 469], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [457, 457], 'children': []}, {'type': 'Value', 'name': '', 'range': [459, 469], 'children': [{'type': 'Dictionary', 'name': '', 'range': [459, 469], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [460, 468], 'children': [{'type': 'Key', 'name': '', 'range': [460, 461], 'children': []}, {'type': 'Value', 'name': '', 'range': [462, 468], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'error', 'range': [474, 526], 'children': [{'type': 'ParameterList', 'name': '', 'range': [476, 486], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [477, 477], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [479, 481], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [483, 485], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [488, 526], 'children': [{'type': 'Assignment', 'name': '', 'range': [489, 500], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [489, 489], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [491, 500], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [494, 499], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [495, 495], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [497, 499], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.error', 'range': [502, 525], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [505, 524], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [506, 506], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [508, 524], 'children': [{'type': 'Dictionary', 'name': '', 'range': [510, 524], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [511, 523], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [511, 511], 'children': []}, {'type': 'Value', 'name': '', 'range': [513, 523], 'children': [{'type': 'Dictionary', 'name': '', 'range': [513, 523], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [514, 522], 'children': [{'type': 'Key', 'name': '', 'range': [514, 515], 'children': []}, {'type': 'Value', 'name': '', 'range': [516, 522], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'debug', 'range': [528, 580], 'children': [{'type': 'ParameterList', 'name': '', 'range': [530, 540], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [531, 531], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [533, 535], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [537, 539], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [542, 580], 'children': [{'type': 'Assignment', 'name': '', 'range': [543, 554], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [543, 543], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [545, 554], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [548, 553], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [549, 549], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [551, 553], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.debug', 'range': [556, 579], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [559, 578], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [560, 560], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [562, 578], 'children': [{'type': 'Dictionary', 'name': '', 'range': [564, 578], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [565, 577], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [565, 565], 'children': []}, {'type': 'Value', 'name': '', 'range': [567, 577], 'children': [{'type': 'Dictionary', 'name': '', 'range': [567, 577], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [568, 576], 'children': [{'type': 'Key', 'name': '', 'range': [568, 569], 'children': []}, {'type': 'Value', 'name': '', 'range': [570, 576], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'exception', 'range': [582, 634], 'children': [{'type': 'ParameterList', 'name': '', 'range': [584, 594], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [585, 585], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [587, 589], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [591, 593], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [596, 634], 'children': [{'type': 'Assignment', 'name': '', 'range': [597, 608], 'children': [{'type': 'Variable', 'name': 'msg', 'range': [597, 597], 'children': []}, {'type': 'FunctionCall', 'name': 'self._wrap', 'range': [599, 608], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [602, 607], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [603, 603], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [605, 607], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'logger.exception', 'range': [610, 633], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [613, 632], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [614, 614], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [616, 632], 'children': [{'type': 'Dictionary', 'name': '', 'range': [618, 632], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [619, 631], 'children': [{'type': 'Key', 'name': 'json_fields', 'range': [619, 619], 'children': []}, {'type': 'Value', 'name': '', 'range': [621, 631], 'children': [{'type': 'Dictionary', 'name': '', 'range': [621, 631], 'children': [{'type': 'KeyValuePair', 'name': '', 'range': [622, 630], 'children': [{'type': 'Key', 'name': '', 'range': [622, 623], 'children': []}, {'type': 'Value', 'name': '', 'range': [624, 630], 'children': []}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_wrap', 'range': [636, 654], 'children': [{'type': 'ParameterList', 'name': '', 'range': [638, 648], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [639, 639], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [641, 643], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [645, 647], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [650, 654], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [651, 653], 'children': [{'type': 'StringLiteral', 'name': '', 'range': [652, 653], 'children': []}]}]}]}]}
2025-01-08 10:31:39,145 - INFO - Starting Step 4: AST normalization
2025-01-08 10:31:48,524 - INFO - Step 3 result: {'type': 'Program', 'children': [{'type': 'ClassDeclaration', 'name': 'Executor', 'range': [2636, 4132], 'children': [{'type': 'ClassMethod', 'name': 'on_node_executor_start', 'range': [2645, 2750], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [2655, 2657]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [2659, 2662]}, {'type': 'CallExpression', 'name': 'redis.connect', 'range': [2664, 2668]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [2670, 2678]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [2680, 2686]}, {'type': 'AssignmentExpression', 'name': 'cls.creds_manager', 'range': [2688, 2694]}, {'type': 'AssignmentExpression', 'name': 'cls.shutdown_lock', 'range': [2703, 2711]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [2713, 2720]}, {'type': 'CallExpression', 'name': 'signal.signal', 'range': [2726, 2747]}]}, {'type': 'ClassMethod', 'name': 'on_node_executor_stop', 'range': [2752, 2828], 'children': [{'type': 'IfStatement', 'range': [2762, 2774], 'children': [{'type': 'ReturnStatement', 'range': [2776, 2777]}]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2783, 2788]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2791, 2797]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2799, 2804]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2807, 2811]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2813, 2818]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [2821, 2826]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2828, 2833]}]}, {'type': 'ClassMethod', 'name': 'on_node_executor_sigterm', 'range': [2837, 2905], 'children': [{'type': 'CallExpression', 'name': 'llprint', 'range': [2847, 2850]}, {'type': 'IfStatement', 'range': [2853, 2865], 'children': [{'type': 'ReturnStatement', 'range': [2867, 2868]}]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2874, 2877]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2880, 2886]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2888, 2891]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2894, 2898]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2900, 2903]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [2906, 2911]}]}, {'type': 'ClassMethod', 'name': 'on_node_execution', 'range': [2914, 3059], 'children': [{'type': 'VariableDeclaration', 'name': 'log_metadata', 'range': [2951, 2996]}, {'type': 'VariableDeclaration', 'name': 'execution_stats', 'range': [2999, 3002]}, {'type': 'CallExpression', 'name': 'cls._on_node_execution', 'range': [3008, 3021]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["walltime"]', 'range': [3023, 3030]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["cputime"]', 'range': [3032, 3039]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_node_execution_stats', 'range': [3042, 3054]}, {'type': 'ReturnStatement', 'range': [3057, 3058]}]}, {'type': 'ClassMethod', 'name': '_on_node_execution', 'range': [3061, 3172], 'children': [{'type': 'TryStatement', 'range': [3109, 3172], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3112, 3117]}, {'type': 'ForStatement', 'range': [3120, 3147], 'children': [{'type': 'CallExpression', 'name': 'q.add', 'range': [3141, 3146]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3148, 3153]}, {'type': 'CatchClause', 'range': [3156, 3171], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [3162, 3168]}]}]}]}, {'type': 'ClassMethod', 'name': 'on_graph_executor_start', 'range': [3173, 3227], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [3183, 3185]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [3187, 3190]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [3193, 3199]}, {'type': 'AssignmentExpression', 'name': 'cls.pool_size', 'range': [3201, 3209]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [3211, 3218]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3221, 3225]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3227, 3233]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [3244, 3251]}]}, {'type': 'ClassMethod', 'name': 'on_graph_executor_stop', 'range': [3254, 3307], 'children': [{'type': 'VariableDeclaration', 'name': 'prefix', 'range': [3264, 3267]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3269, 3274]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3277, 3282]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3285, 3290]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [3293, 3298]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3300, 3305]}]}, {'type': 'ClassMethod', 'name': '_init_node_executor_pool', 'range': [3309, 3341], 'children': [{'type': 'AssignmentExpression', 'name': 'cls.executor', 'range': [3319, 3339]}]}, {'type': 'ClassMethod', 'name': 'on_graph_execution', 'range': [3343, 3496], 'children': [{'type': 'VariableDeclaration', 'name': 'log_metadata', 'range': [3368, 3409]}, {'type': 'CallExpression', 'name': 'cls._on_graph_execution', 'range': [3419, 3429]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["walltime"]', 'range': [3432, 3439]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["cputime"]', 'range': [3441, 3448]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["error"]', 'range': [3450, 3462]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_graph_execution_stats', 'range': [3465, 3485]}, {'type': 'CallExpression', 'name': 'cls.db_client.send_execution_update', 'range': [3488, 3494]}]}, {'type': 'ClassMethod', 'name': '_on_graph_execution', 'range': [3497, 4132], 'children': [{'type': 'VariableDeclaration', 'name': 'exec_stats', 'range': [3557, 3576]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [3578, 3580]}, {'type': 'VariableDeclaration', 'name': 'finished', 'range': [3582, 3584]}, {'type': 'FunctionDeclaration', 'name': 'cancel_handler', 'range': [3587, 3636], 'children': [{'type': 'WhileStatement', 'range': [3593, 3608], 'children': [{'type': 'IfStatement', 'range': [3610, 3614], 'children': [{'type': 'ReturnStatement', 'range': [3613, 3614]}]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3615, 3621]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3623, 3628]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3631, 3635]}]}]}, {'type': 'VariableDeclaration', 'name': 'cancel_thread', 'range': [3638, 3653]}, {'type': 'TryStatement', 'range': [3656, 4132], 'children': [{'type': 'VariableDeclaration', 'name': 'queue', 'range': [3659, 3666]}, {'type': 'ForStatement', 'range': [3668, 3682], 'children': [{'type': 'CallExpression', 'name': 'queue.add', 'range': [3676, 3681]}]}, {'type': 'VariableDeclaration', 'name': 'running_executions', 'range': [3684, 3694]}, {'type': 'FunctionDeclaration', 'name': 'make_exec_callback', 'range': [3697, 3781], 'children': [{'type': 'VariableDeclaration', 'name': 'node_id', 'range': [3706, 3710]}, {'type': 'FunctionDeclaration', 'name': 'callback', 'range': [3713, 3779], 'children': [{'type': 'CallExpression', 'name': 'running_executions.pop', 'range': [3722, 3727]}, {'type': 'IfStatement', 'range': [3732, 3778], 'children': [{'type': 'AssignmentExpression', 'name': 'exec_stats["node_count"]', 'range': [3741, 3747]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_cputime"]', 'range': [3749, 3762]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_walltime"]', 'range': [3764, 3777]}]}]}]}, {'type': 'WhileStatement', 'range': [3784, 3812], 'children': [{'type': 'IfStatement', 'range': [3794, 3807], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [3801, 3806]}, {'type': 'ReturnStatement', 'range': [3808, 3811]}]}, {'type': 'VariableDeclaration', 'name': 'exec_data', 'range': [3814, 3821]}, {'type': 'IfStatement', 'range': [3844, 3853], 'children': [{'type': 'CallExpression', 'name': 'execution.wait', 'range': [3907, 3911]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3914, 3926]}, {'type': 'AssignmentExpression', 'name': 'running_executions[exec_data.node_id]', 'range': [3928, 3962]}]}, {'type': 'WhileStatement', 'range': [3978, 4054], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3988, 3994]}, {'type': 'ForStatement', 'range': [3998, 4032], 'children': [{'type': 'IfStatement', 'range': [4014, 4027], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [4021, 4026]}, {'type': 'ReturnStatement', 'range': [4028, 4031]}]}]}, {'type': 'IfStatement', 'range': [4034, 4044], 'children': [{'type': 'BreakStatement', 'range': [4043, 4044]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [4056, 4061]}, {'type': 'CallExpression', 'name': 'execution.wait', 'range': [4064, 4069]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [4072, 4077]}, {'type': 'CatchClause', 'range': [4080, 4095], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [4086, 4092]}]}, {'type': 'FinallyClause', 'range': [4100, 4132], 'children': [{'type': 'IfStatement', 'range': [4103, 4110], 'children': [{'type': 'AssignmentExpression', 'name': 'finished', 'range': [4112, 4114]}]}, {'type': 'CallExpression', 'name': 'cancel.set', 'range': [4116, 4120]}, {'type': 'CallExpression', 'name': 'cancel_thread.join', 'range': [4122, 4126]}, {'type': 'ReturnStatement', 'range': [4128, 4131]}]}]}]}]}]}
2025-01-08 10:31:48,524 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:10,433 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [0, 0], 'children': []}, {'type': 'ImportedModule', 'name': 'atexit', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [3, 3], 'children': []}, {'type': 'ImportedModule', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [6, 6], 'children': []}, {'type': 'ImportedModule', 'name': 'multiprocessing', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [9, 9], 'children': []}, {'type': 'ImportedModule', 'name': 'os', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 14], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [12, 12], 'children': []}, {'type': 'ImportedModule', 'name': 'signal', 'range': [13, 13], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [15, 15], 'children': []}, {'type': 'ImportedModule', 'name': 'sys', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 20], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [18, 18], 'children': []}, {'type': 'ImportedModule', 'name': 'threading', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [21, 29], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [21, 21], 'children': []}, {'type': 'ModulePath', 'name': 'concurrent.futures', 'range': [22, 24], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [25, 25], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [26, 28], 'children': [{'type': 'ImportedEntity', 'name': 'Future', 'range': [26, 26], 'children': []}, {'type': 'ImportedEntity', 'name': 'ProcessPoolExecutor', 'range': [28, 28], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 34], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [30, 30], 'children': []}, {'type': 'ModulePath', 'name': 'contextlib', 'range': [31, 31], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [32, 32], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [33, 33], 'children': [{'type': 'ImportedEntity', 'name': 'contextmanager', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [35, 35], 'children': []}, {'type': 'ModulePath', 'name': 'multiprocessing.pool', 'range': [36, 38], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [39, 39], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [40, 42], 'children': [{'type': 'ImportedEntity', 'name': 'AsyncResult', 'range': [40, 40], 'children': []}, {'type': 'ImportedEntity', 'name': 'Pool', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 56], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [44, 44], 'children': []}, {'type': 'ModulePath', 'name': 'typing', 'range': [45, 45], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [46, 46], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [47, 55], 'children': [{'type': 'ImportedEntity', 'name': 'TYPE_CHECKING', 'range': [47, 47], 'children': []}, {'type': 'ImportedEntity', 'name': 'Any', 'range': [49, 49], 'children': []}, {'type': 'ImportedEntity', 'name': 'Generator', 'range': [51, 51], 'children': []}, {'type': 'ImportedEntity', 'name': 'TypeVar', 'range': [53, 53], 'children': []}, {'type': 'ImportedEntity', 'name': 'cast', 'range': [55, 55], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [58, 62], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [58, 58], 'children': []}, {'type': 'ModulePath', 'name': 'pydantic', 'range': [59, 59], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [60, 60], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [61, 61], 'children': [{'type': 'ImportedEntity', 'name': 'BaseModel', 'range': [61, 61], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [63, 63], 'children': []}, {'type': 'ModulePath', 'name': 'redis.lock', 'range': [64, 66], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [67, 67], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [68, 70], 'children': [{'type': 'ImportedEntity', 'name': 'Lock', 'range': [68, 68], 'children': []}, {'type': 'Alias', 'name': 'as', 'range': [69, 69], 'children': []}, {'type': 'ImportedEntity', 'name': 'RedisLock', 'range': [70, 70], 'children': []}]}]}, {'type': 'ConditionalImport', 'name': '', 'range': [73, 83], 'children': [{'type': 'IfKeyword', 'name': 'if', 'range': [73, 73], 'children': []}, {'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [74, 74], 'children': []}, {'type': 'Colon', 'name': ':', 'range': [75, 75], 'children': []}, {'type': 'FromKeyword', 'name': 'from', 'range': [77, 77], 'children': []}, {'type': 'ModulePath', 'name': 'backend.executor', 'range': [78, 80], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [81, 81], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [82, 82], 'children': [{'type': 'ImportedEntity', 'name': 'DatabaseManager', 'range': [82, 82], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [85, 93], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [85, 85], 'children': []}, {'type': 'ModulePath', 'name': 'autogpt_libs.utils.cache', 'range': [86, 90], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [91, 91], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [92, 92], 'children': [{'type': 'ImportedEntity', 'name': 'thread_cached', 'range': [92, 92], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [95, 95], 'children': []}, {'type': 'ModulePath', 'name': 'backend.blocks.agent', 'range': [96, 100], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [101, 101], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [102, 102], 'children': [{'type': 'ImportedEntity', 'name': 'AgentExecutorBlock', 'range': [102, 102], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [104, 110], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [104, 104], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data', 'range': [105, 107], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [108, 108], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [109, 109], 'children': [{'type': 'ImportedEntity', 'name': 'redis', 'range': [109, 109], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [111, 127], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [111, 111], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.block', 'range': [112, 116], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [117, 117], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [118, 126], 'children': [{'type': 'ImportedEntity', 'name': 'Block', 'range': [118, 118], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockData', 'range': [120, 120], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockInput', 'range': [122, 122], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockType', 'range': [124, 124], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_block', 'range': [126, 126], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [128, 159], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [128, 128], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.execution', 'range': [129, 133], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [134, 134], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [135, 158], 'children': [{'type': 'ImportedEntity', 'name': 'ExecutionQueue', 'range': [137, 137], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionResult', 'range': [140, 140], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionStatus', 'range': [143, 143], 'children': []}, {'type': 'ImportedEntity', 'name': 'GraphExecutionEntry', 'range': [146, 146], 'children': []}, {'type': 'ImportedEntity', 'name': 'NodeExecutionEntry', 'range': [149, 149], 'children': []}, {'type': 'ImportedEntity', 'name': 'merge_execution_input', 'range': [152, 152], 'children': []}, {'type': 'ImportedEntity', 'name': 'parse_execution_output', 'range': [155, 155], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [160, 172], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [160, 160], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.graph', 'range': [161, 165], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [166, 166], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [167, 171], 'children': [{'type': 'ImportedEntity', 'name': 'GraphModel', 'range': [167, 167], 'children': []}, {'type': 'ImportedEntity', 'name': 'Link', 'range': [169, 169], 'children': []}, {'type': 'ImportedEntity', 'name': 'Node', 'range': [171, 171], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [173, 183], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [173, 173], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.model', 'range': [174, 178], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [179, 179], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [180, 182], 'children': [{'type': 'ImportedEntity', 'name': 'CREDENTIALS_FIELD_NAME', 'range': [180, 180], 'children': []}, {'type': 'ImportedEntity', 'name': 'CredentialsMetaInput', 'range': [182, 182], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [184, 192], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [184, 184], 'children': []}, {'type': 'ModulePath', 'name': 'backend.integrations.creds_manager', 'range': [185, 189], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [190, 190], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [191, 191], 'children': [{'type': 'ImportedEntity', 'name': 'IntegrationCredentialsManager', 'range': [191, 191], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [193, 199], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [193, 193], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util', 'range': [194, 196], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [197, 197], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [198, 198], 'children': [{'type': 'ImportedEntity', 'name': 'json', 'range': [198, 198], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [200, 210], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [200, 200], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.decorator', 'range': [201, 205], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [206, 206], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [207, 209], 'children': [{'type': 'ImportedEntity', 'name': 'error_logged', 'range': [207, 207], 'children': []}, {'type': 'ImportedEntity', 'name': 'time_measured', 'range': [209, 209], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [211, 219], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [211, 211], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.logging', 'range': [212, 216], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [217, 217], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [218, 218], 'children': [{'type': 'ImportedEntity', 'name': 'configure_logging', 'range': [218, 218], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [220, 228], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [220, 220], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.process', 'range': [221, 225], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [226, 226], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [227, 227], 'children': [{'type': 'ImportedEntity', 'name': 'set_service_name', 'range': [227, 227], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [229, 251], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [229, 229], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.service', 'range': [230, 234], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [235, 235], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [236, 250], 'children': [{'type': 'ImportedEntity', 'name': 'AppService', 'range': [238, 238], 'children': []}, {'type': 'ImportedEntity', 'name': 'close_service_client', 'range': [241, 241], 'children': []}, {'type': 'ImportedEntity', 'name': 'expose', 'range': [244, 244], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_service_client', 'range': [247, 247], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [252, 260], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [252, 252], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.settings', 'range': [253, 257], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [258, 258], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [259, 259], 'children': [{'type': 'ImportedEntity', 'name': 'Settings', 'range': [259, 259], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [261, 269], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [261, 261], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.type', 'range': [262, 266], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [267, 267], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [268, 268], 'children': [{'type': 'ImportedEntity', 'name': 'convert', 'range': [268, 268], 'children': []}]}]}]}
2025-01-08 10:32:10,434 - INFO - Starting Step 4: AST normalization
2025-01-08 10:33:05,228 - INFO - Step 4 result: {'type': 'Program', 'children': [{'type': 'ClassDecl', 'name': 'Executor', 'range': [2636, 4132], 'children': [{'type': 'FunctionDecl', 'name': 'on_node_executor_start', 'range': [2645, 2750], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [2655, 2657]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [2659, 2662]}, {'type': 'CallExpression', 'name': 'redis.connect', 'range': [2664, 2668]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [2670, 2678]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [2680, 2686]}, {'type': 'AssignmentExpression', 'name': 'cls.creds_manager', 'range': [2688, 2694]}, {'type': 'AssignmentExpression', 'name': 'cls.shutdown_lock', 'range': [2703, 2711]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [2713, 2720]}, {'type': 'CallExpression', 'name': 'signal.signal', 'range': [2726, 2747]}]}, {'type': 'FunctionDecl', 'name': 'on_node_executor_stop', 'range': [2752, 2828], 'children': [{'type': 'IfStatement', 'range': [2762, 2774], 'children': [{'type': 'ReturnStatement', 'range': [2776, 2777]}]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2783, 2788]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2791, 2797]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2799, 2804]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2807, 2811]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2813, 2818]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [2821, 2826]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2828, 2833]}]}, {'type': 'FunctionDecl', 'name': 'on_node_executor_sigterm', 'range': [2837, 2905], 'children': [{'type': 'CallExpression', 'name': 'llprint', 'range': [2847, 2850]}, {'type': 'IfStatement', 'range': [2853, 2865], 'children': [{'type': 'ReturnStatement', 'range': [2867, 2868]}]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2874, 2877]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2880, 2886]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2888, 2891]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2894, 2898]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2900, 2903]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [2906, 2911]}]}, {'type': 'FunctionDecl', 'name': 'on_node_execution', 'range': [2914, 3059], 'children': [{'type': 'VariableDecl', 'name': 'log_metadata', 'range': [2951, 2996]}, {'type': 'VariableDecl', 'name': 'execution_stats', 'range': [2999, 3002]}, {'type': 'CallExpression', 'name': 'cls._on_node_execution', 'range': [3008, 3021]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["walltime"]', 'range': [3023, 3030]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["cputime"]', 'range': [3032, 3039]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_node_execution_stats', 'range': [3042, 3054]}, {'type': 'ReturnStatement', 'range': [3057, 3058]}]}, {'type': 'FunctionDecl', 'name': '_on_node_execution', 'range': [3061, 3172], 'children': [{'type': 'TryStatement', 'range': [3109, 3172], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3112, 3117]}, {'type': 'ForStatement', 'range': [3120, 3147], 'children': [{'type': 'CallExpression', 'name': 'q.add', 'range': [3141, 3146]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3148, 3153]}, {'type': 'CatchClause', 'range': [3156, 3171], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [3162, 3168]}]}]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_executor_start', 'range': [3173, 3227], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [3183, 3185]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [3187, 3190]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [3193, 3199]}, {'type': 'AssignmentExpression', 'name': 'cls.pool_size', 'range': [3201, 3209]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [3211, 3218]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3221, 3225]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3227, 3233]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [3244, 3251]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_executor_stop', 'range': [3254, 3307], 'children': [{'type': 'VariableDecl', 'name': 'prefix', 'range': [3264, 3267]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3269, 3274]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3277, 3282]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3285, 3290]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [3293, 3298]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3300, 3305]}]}, {'type': 'FunctionDecl', 'name': '_init_node_executor_pool', 'range': [3309, 3341], 'children': [{'type': 'AssignmentExpression', 'name': 'cls.executor', 'range': [3319, 3339]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_execution', 'range': [3343, 3496], 'children': [{'type': 'VariableDecl', 'name': 'log_metadata', 'range': [3368, 3409]}, {'type': 'CallExpression', 'name': 'cls._on_graph_execution', 'range': [3419, 3429]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["walltime"]', 'range': [3432, 3439]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["cputime"]', 'range': [3441, 3448]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["error"]', 'range': [3450, 3462]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_graph_execution_stats', 'range': [3465, 3485]}, {'type': 'CallExpression', 'name': 'cls.db_client.send_execution_update', 'range': [3488, 3494]}]}, {'type': 'FunctionDecl', 'name': '_on_graph_execution', 'range': [3497, 4132], 'children': [{'type': 'VariableDecl', 'name': 'exec_stats', 'range': [3557, 3576]}, {'type': 'VariableDecl', 'name': 'error', 'range': [3578, 3580]}, {'type': 'VariableDecl', 'name': 'finished', 'range': [3582, 3584]}, {'type': 'FunctionDecl', 'name': 'cancel_handler', 'range': [3587, 3636], 'children': [{'type': 'WhileStatement', 'range': [3593, 3608], 'children': [{'type': 'IfStatement', 'range': [3610, 3614], 'children': [{'type': 'ReturnStatement', 'range': [3613, 3614]}]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3615, 3621]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3623, 3628]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3631, 3635]}]}]}, {'type': 'VariableDecl', 'name': 'cancel_thread', 'range': [3638, 3653]}, {'type': 'TryStatement', 'range': [3656, 4132], 'children': [{'type': 'VariableDecl', 'name': 'queue', 'range': [3659, 3666]}, {'type': 'ForStatement', 'range': [3668, 3682], 'children': [{'type': 'CallExpression', 'name': 'queue.add', 'range': [3676, 3681]}]}, {'type': 'VariableDecl', 'name': 'running_executions', 'range': [3684, 3694]}, {'type': 'FunctionDecl', 'name': 'make_exec_callback', 'range': [3697, 3781], 'children': [{'type': 'VariableDecl', 'name': 'node_id', 'range': [3706, 3710]}, {'type': 'FunctionDecl', 'name': 'callback', 'range': [3713, 3779], 'children': [{'type': 'CallExpression', 'name': 'running_executions.pop', 'range': [3722, 3727]}, {'type': 'IfStatement', 'range': [3732, 3778], 'children': [{'type': 'AssignmentExpression', 'name': 'exec_stats["node_count"]', 'range': [3741, 3747]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_cputime"]', 'range': [3749, 3762]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_walltime"]', 'range': [3764, 3777]}]}]}]}, {'type': 'WhileStatement', 'range': [3784, 3812], 'children': [{'type': 'IfStatement', 'range': [3794, 3807], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [3801, 3806]}, {'type': 'ReturnStatement', 'range': [3808, 3811]}]}, {'type': 'VariableDecl', 'name': 'exec_data', 'range': [3814, 3821]}, {'type': 'IfStatement', 'range': [3844, 3853], 'children': [{'type': 'CallExpression', 'name': 'execution.wait', 'range': [3907, 3911]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3914, 3926]}, {'type': 'AssignmentExpression', 'name': 'running_executions[exec_data.node_id]', 'range': [3928, 3962]}]}, {'type': 'WhileStatement', 'range': [3978, 4054], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3988, 3994]}, {'type': 'ForStatement', 'range': [3998, 4032], 'children': [{'type': 'IfStatement', 'range': [4014, 4027], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [4021, 4026]}, {'type': 'ReturnStatement', 'range': [4028, 4031]}]}]}, {'type': 'IfStatement', 'range': [4034, 4044], 'children': [{'type': 'BreakStatement', 'range': [4043, 4044]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [4056, 4061]}, {'type': 'CallExpression', 'name': 'execution.wait', 'range': [4064, 4069]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [4072, 4077]}, {'type': 'CatchClause', 'range': [4080, 4095], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [4086, 4092]}]}, {'type': 'FinallyClause', 'range': [4100, 4132], 'children': [{'type': 'IfStatement', 'range': [4103, 4110], 'children': [{'type': 'AssignmentExpression', 'name': 'finished', 'range': [4112, 4114]}]}, {'type': 'CallExpression', 'name': 'cancel.set', 'range': [4116, 4120]}, {'type': 'CallExpression', 'name': 'cancel_thread.join', 'range': [4122, 4126]}, {'type': 'ReturnStatement', 'range': [4128, 4131]}]}]}]}]}]}
2025-01-08 10:33:05,228 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:33:13,192 - INFO - Step 4 result: {'type': 'Program', 'name': 'LogMetadata', 'range': [271, 655], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [275, 364], 'children': [{'type': 'ParameterList', 'name': '', 'range': [277, 312], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [279, 279], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [282, 284], 'children': []}, {'type': 'Parameter', 'name': 'graph_eid', 'range': [287, 289], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [292, 294], 'children': []}, {'type': 'Parameter', 'name': 'node_eid', 'range': [297, 299], 'children': []}, {'type': 'Parameter', 'name': 'node_id', 'range': [302, 304], 'children': []}, {'type': 'Parameter', 'name': 'block_name', 'range': [307, 309], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [314, 364], 'children': [{'type': 'Assignment', 'name': '', 'range': [315, 319], 'children': [{'type': 'Identifier', 'name': 'self.metadata', 'range': [315, 317], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [319, 356], 'children': [{'type': 'Property', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'component', 'range': [321, 321], 'children': []}, {'type': 'Literal', 'name': 'ExecutionManager', 'range': [323, 323], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [326, 328], 'children': [{'type': 'Identifier', 'name': 'user_id', 'range': [326, 326], 'children': []}, {'type': 'Identifier', 'name': 'user_id', 'range': [328, 328], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [331, 333], 'children': [{'type': 'Identifier', 'name': 'graph_eid', 'range': [331, 331], 'children': []}, {'type': 'Identifier', 'name': 'graph_eid', 'range': [333, 333], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [336, 338], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [336, 336], 'children': []}, {'type': 'Identifier', 'name': 'graph_id', 'range': [338, 338], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [341, 343], 'children': [{'type': 'Identifier', 'name': 'node_eid', 'range': [341, 341], 'children': []}, {'type': 'Identifier', 'name': 'node_eid', 'range': [343, 343], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [346, 348], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [346, 346], 'children': []}, {'type': 'Identifier', 'name': 'node_id', 'range': [348, 348], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'block_name', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'block_name', 'range': [353, 353], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '', 'range': [358, 363], 'children': [{'type': 'Identifier', 'name': 'self.prefix', 'range': [358, 360], 'children': []}, {'type': 'Literal', 'name': '', 'range': [362, 363], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'info', 'range': [366, 418], 'children': [{'type': 'ParameterList', 'name': '', 'range': [368, 378], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [369, 369], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [371, 373], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [375, 377], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [380, 418], 'children': [{'type': 'Assignment', 'name': '', 'range': [381, 392], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [381, 381], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [383, 392], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [386, 391], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [387, 387], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [389, 391], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [394, 417], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [397, 416], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [398, 398], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [400, 416], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [402, 416], 'children': [{'type': 'Property', 'name': '', 'range': [403, 415], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [403, 403], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [405, 415], 'children': [{'type': 'Property', 'name': '', 'range': [406, 414], 'children': [{'type': 'Identifier', 'name': '', 'range': [406, 407], 'children': []}, {'type': 'Literal', 'name': '', 'range': [408, 414], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'warning', 'range': [420, 472], 'children': [{'type': 'ParameterList', 'name': '', 'range': [422, 432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [423, 423], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [425, 427], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [429, 431], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [434, 472], 'children': [{'type': 'Assignment', 'name': '', 'range': [435, 446], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [435, 435], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [437, 446], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [440, 445], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [441, 441], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [443, 445], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.warning', 'range': [448, 471], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [451, 470], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [454, 470], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [456, 470], 'children': [{'type': 'Property', 'name': '', 'range': [457, 469], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [457, 457], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [459, 469], 'children': [{'type': 'Property', 'name': '', 'range': [460, 468], 'children': [{'type': 'Identifier', 'name': '', 'range': [460, 461], 'children': []}, {'type': 'Literal', 'name': '', 'range': [462, 468], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'error', 'range': [474, 526], 'children': [{'type': 'ParameterList', 'name': '', 'range': [476, 486], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [477, 477], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [479, 481], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [483, 485], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [488, 526], 'children': [{'type': 'Assignment', 'name': '', 'range': [489, 500], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [489, 489], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [491, 500], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [494, 499], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [495, 495], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [497, 499], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.error', 'range': [502, 525], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [505, 524], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [506, 506], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [508, 524], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [510, 524], 'children': [{'type': 'Property', 'name': '', 'range': [511, 523], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [511, 511], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [513, 523], 'children': [{'type': 'Property', 'name': '', 'range': [514, 522], 'children': [{'type': 'Identifier', 'name': '', 'range': [514, 515], 'children': []}, {'type': 'Literal', 'name': '', 'range': [516, 522], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'debug', 'range': [528, 580], 'children': [{'type': 'ParameterList', 'name': '', 'range': [530, 540], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [531, 531], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [533, 535], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [537, 539], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [542, 580], 'children': [{'type': 'Assignment', 'name': '', 'range': [543, 554], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [543, 543], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [545, 554], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [548, 553], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [549, 549], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [551, 553], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.debug', 'range': [556, 579], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [559, 578], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [560, 560], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [562, 578], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [564, 578], 'children': [{'type': 'Property', 'name': '', 'range': [565, 577], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [565, 565], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [567, 577], 'children': [{'type': 'Property', 'name': '', 'range': [568, 576], 'children': [{'type': 'Identifier', 'name': '', 'range': [568, 569], 'children': []}, {'type': 'Literal', 'name': '', 'range': [570, 576], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'exception', 'range': [582, 634], 'children': [{'type': 'ParameterList', 'name': '', 'range': [584, 594], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [585, 585], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [587, 589], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [591, 593], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [596, 634], 'children': [{'type': 'Assignment', 'name': '', 'range': [597, 608], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [597, 597], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [599, 608], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [602, 607], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [603, 603], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [605, 607], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.exception', 'range': [610, 633], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [613, 632], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [614, 614], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [616, 632], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [618, 632], 'children': [{'type': 'Property', 'name': '', 'range': [619, 631], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [619, 619], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [621, 631], 'children': [{'type': 'Property', 'name': '', 'range': [622, 630], 'children': [{'type': 'Identifier', 'name': '', 'range': [622, 623], 'children': []}, {'type': 'Literal', 'name': '', 'range': [624, 630], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_wrap', 'range': [636, 654], 'children': [{'type': 'ParameterList', 'name': '', 'range': [638, 648], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [639, 639], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [641, 643], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [645, 647], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [650, 654], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [651, 653], 'children': [{'type': 'Literal', 'name': '', 'range': [652, 653], 'children': []}]}]}]}]}
2025-01-08 10:33:13,193 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:04,257 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [0, 0], 'children': []}, {'type': 'ImportedModule', 'name': 'atexit', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [3, 3], 'children': []}, {'type': 'ImportedModule', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [6, 6], 'children': []}, {'type': 'ImportedModule', 'name': 'multiprocessing', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [9, 9], 'children': []}, {'type': 'ImportedModule', 'name': 'os', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 14], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [12, 12], 'children': []}, {'type': 'ImportedModule', 'name': 'signal', 'range': [13, 13], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [15, 15], 'children': []}, {'type': 'ImportedModule', 'name': 'sys', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 20], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [18, 18], 'children': []}, {'type': 'ImportedModule', 'name': 'threading', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [21, 29], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [21, 21], 'children': []}, {'type': 'ModulePath', 'name': 'concurrent.futures', 'range': [22, 24], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [25, 25], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [26, 28], 'children': [{'type': 'ImportedEntity', 'name': 'Future', 'range': [26, 26], 'children': []}, {'type': 'ImportedEntity', 'name': 'ProcessPoolExecutor', 'range': [28, 28], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 34], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [30, 30], 'children': []}, {'type': 'ModulePath', 'name': 'contextlib', 'range': [31, 31], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [32, 32], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [33, 33], 'children': [{'type': 'ImportedEntity', 'name': 'contextmanager', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [35, 35], 'children': []}, {'type': 'ModulePath', 'name': 'multiprocessing.pool', 'range': [36, 38], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [39, 39], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [40, 42], 'children': [{'type': 'ImportedEntity', 'name': 'AsyncResult', 'range': [40, 40], 'children': []}, {'type': 'ImportedEntity', 'name': 'Pool', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 56], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [44, 44], 'children': []}, {'type': 'ModulePath', 'name': 'typing', 'range': [45, 45], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [46, 46], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [47, 55], 'children': [{'type': 'ImportedEntity', 'name': 'TYPE_CHECKING', 'range': [47, 47], 'children': []}, {'type': 'ImportedEntity', 'name': 'Any', 'range': [49, 49], 'children': []}, {'type': 'ImportedEntity', 'name': 'Generator', 'range': [51, 51], 'children': []}, {'type': 'ImportedEntity', 'name': 'TypeVar', 'range': [53, 53], 'children': []}, {'type': 'ImportedEntity', 'name': 'cast', 'range': [55, 55], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [58, 62], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [58, 58], 'children': []}, {'type': 'ModulePath', 'name': 'pydantic', 'range': [59, 59], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [60, 60], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [61, 61], 'children': [{'type': 'ImportedEntity', 'name': 'BaseModel', 'range': [61, 61], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [63, 63], 'children': []}, {'type': 'ModulePath', 'name': 'redis.lock', 'range': [64, 66], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [67, 67], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [68, 70], 'children': [{'type': 'ImportedEntity', 'name': 'Lock', 'range': [68, 68], 'children': []}, {'type': 'Alias', 'name': 'as', 'range': [69, 69], 'children': []}, {'type': 'ImportedEntity', 'name': 'RedisLock', 'range': [70, 70], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [73, 83], 'children': [{'type': 'IfKeyword', 'name': 'if', 'range': [73, 73], 'children': []}, {'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [74, 74], 'children': []}, {'type': 'Colon', 'name': ':', 'range': [75, 75], 'children': []}, {'type': 'FromKeyword', 'name': 'from', 'range': [77, 77], 'children': []}, {'type': 'ModulePath', 'name': 'backend.executor', 'range': [78, 80], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [81, 81], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [82, 82], 'children': [{'type': 'ImportedEntity', 'name': 'DatabaseManager', 'range': [82, 82], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [85, 93], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [85, 85], 'children': []}, {'type': 'ModulePath', 'name': 'autogpt_libs.utils.cache', 'range': [86, 90], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [91, 91], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [92, 92], 'children': [{'type': 'ImportedEntity', 'name': 'thread_cached', 'range': [92, 92], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [95, 95], 'children': []}, {'type': 'ModulePath', 'name': 'backend.blocks.agent', 'range': [96, 100], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [101, 101], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [102, 102], 'children': [{'type': 'ImportedEntity', 'name': 'AgentExecutorBlock', 'range': [102, 102], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [104, 110], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [104, 104], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data', 'range': [105, 107], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [108, 108], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [109, 109], 'children': [{'type': 'ImportedEntity', 'name': 'redis', 'range': [109, 109], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [111, 127], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [111, 111], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.block', 'range': [112, 116], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [117, 117], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [118, 126], 'children': [{'type': 'ImportedEntity', 'name': 'Block', 'range': [118, 118], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockData', 'range': [120, 120], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockInput', 'range': [122, 122], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockType', 'range': [124, 124], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_block', 'range': [126, 126], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [128, 159], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [128, 128], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.execution', 'range': [129, 133], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [134, 134], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [135, 158], 'children': [{'type': 'ImportedEntity', 'name': 'ExecutionQueue', 'range': [137, 137], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionResult', 'range': [140, 140], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionStatus', 'range': [143, 143], 'children': []}, {'type': 'ImportedEntity', 'name': 'GraphExecutionEntry', 'range': [146, 146], 'children': []}, {'type': 'ImportedEntity', 'name': 'NodeExecutionEntry', 'range': [149, 149], 'children': []}, {'type': 'ImportedEntity', 'name': 'merge_execution_input', 'range': [152, 152], 'children': []}, {'type': 'ImportedEntity', 'name': 'parse_execution_output', 'range': [155, 155], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [160, 172], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [160, 160], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.graph', 'range': [161, 165], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [166, 166], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [167, 171], 'children': [{'type': 'ImportedEntity', 'name': 'GraphModel', 'range': [167, 167], 'children': []}, {'type': 'ImportedEntity', 'name': 'Link', 'range': [169, 169], 'children': []}, {'type': 'ImportedEntity', 'name': 'Node', 'range': [171, 171], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [173, 183], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [173, 173], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.model', 'range': [174, 178], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [179, 179], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [180, 182], 'children': [{'type': 'ImportedEntity', 'name': 'CREDENTIALS_FIELD_NAME', 'range': [180, 180], 'children': []}, {'type': 'ImportedEntity', 'name': 'CredentialsMetaInput', 'range': [182, 182], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [184, 192], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [184, 184], 'children': []}, {'type': 'ModulePath', 'name': 'backend.integrations.creds_manager', 'range': [185, 189], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [190, 190], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [191, 191], 'children': [{'type': 'ImportedEntity', 'name': 'IntegrationCredentialsManager', 'range': [191, 191], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [193, 199], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [193, 193], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util', 'range': [194, 196], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [197, 197], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [198, 198], 'children': [{'type': 'ImportedEntity', 'name': 'json', 'range': [198, 198], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [200, 210], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [200, 200], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.decorator', 'range': [201, 205], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [206, 206], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [207, 209], 'children': [{'type': 'ImportedEntity', 'name': 'error_logged', 'range': [207, 207], 'children': []}, {'type': 'ImportedEntity', 'name': 'time_measured', 'range': [209, 209], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [211, 219], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [211, 211], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.logging', 'range': [212, 216], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [217, 217], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [218, 218], 'children': [{'type': 'ImportedEntity', 'name': 'configure_logging', 'range': [218, 218], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [220, 228], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [220, 220], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.process', 'range': [221, 225], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [226, 226], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [227, 227], 'children': [{'type': 'ImportedEntity', 'name': 'set_service_name', 'range': [227, 227], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [229, 251], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [229, 229], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.service', 'range': [230, 234], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [235, 235], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [236, 250], 'children': [{'type': 'ImportedEntity', 'name': 'AppService', 'range': [238, 238], 'children': []}, {'type': 'ImportedEntity', 'name': 'close_service_client', 'range': [241, 241], 'children': []}, {'type': 'ImportedEntity', 'name': 'expose', 'range': [244, 244], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_service_client', 'range': [247, 247], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [252, 260], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [252, 252], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.settings', 'range': [253, 257], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [258, 258], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [259, 259], 'children': [{'type': 'ImportedEntity', 'name': 'Settings', 'range': [259, 259], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [261, 269], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [261, 261], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.type', 'range': [262, 266], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [267, 267], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [268, 268], 'children': [{'type': 'ImportedEntity', 'name': 'convert', 'range': [268, 268], 'children': []}]}]}]}
2025-01-08 10:34:04,258 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:21,359 - INFO - Step 5 result: {'type': 'Program', 'name': 'Executor', 'range': [2636, 4132], 'children': [{'type': 'FunctionDecl', 'name': 'on_node_executor_start', 'range': [2645, 2750], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [2655, 2657]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [2659, 2662]}, {'type': 'CallExpression', 'name': 'redis.connect', 'range': [2664, 2668]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [2670, 2678]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [2680, 2686]}, {'type': 'AssignmentExpression', 'name': 'cls.creds_manager', 'range': [2688, 2694]}, {'type': 'AssignmentExpression', 'name': 'cls.shutdown_lock', 'range': [2703, 2711]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [2713, 2720]}, {'type': 'CallExpression', 'name': 'signal.signal', 'range': [2726, 2747]}]}, {'type': 'FunctionDecl', 'name': 'on_node_executor_stop', 'range': [2752, 2828], 'children': [{'type': 'IfStatement', 'range': [2762, 2774], 'children': [{'type': 'ReturnStatement', 'range': [2776, 2777]}]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2783, 2788]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2791, 2797]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2799, 2804]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2807, 2811]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2813, 2818]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [2821, 2826]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [2828, 2833]}]}, {'type': 'FunctionDecl', 'name': 'on_node_executor_sigterm', 'range': [2837, 2905], 'children': [{'type': 'CallExpression', 'name': 'llprint', 'range': [2847, 2850]}, {'type': 'IfStatement', 'range': [2853, 2865], 'children': [{'type': 'ReturnStatement', 'range': [2867, 2868]}]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2874, 2877]}, {'type': 'CallExpression', 'name': 'cls.creds_manager.release_all_locks', 'range': [2880, 2886]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2888, 2891]}, {'type': 'CallExpression', 'name': 'redis.disconnect', 'range': [2894, 2898]}, {'type': 'CallExpression', 'name': 'llprint', 'range': [2900, 2903]}, {'type': 'CallExpression', 'name': 'sys.exit', 'range': [2906, 2911]}]}, {'type': 'FunctionDecl', 'name': 'on_node_execution', 'range': [2914, 3059], 'children': [{'type': 'VariableDecl', 'name': 'log_metadata', 'range': [2951, 2996]}, {'type': 'VariableDecl', 'name': 'execution_stats', 'range': [2999, 3002]}, {'type': 'CallExpression', 'name': 'cls._on_node_execution', 'range': [3008, 3021]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["walltime"]', 'range': [3023, 3030]}, {'type': 'AssignmentExpression', 'name': 'execution_stats["cputime"]', 'range': [3032, 3039]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_node_execution_stats', 'range': [3042, 3054]}, {'type': 'ReturnStatement', 'range': [3057, 3058]}]}, {'type': 'FunctionDecl', 'name': '_on_node_execution', 'range': [3061, 3172], 'children': [{'type': 'TryStatement', 'range': [3109, 3172], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3112, 3117]}, {'type': 'ForStatement', 'range': [3120, 3147], 'children': [{'type': 'CallExpression', 'name': 'q.add', 'range': [3141, 3146]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3148, 3153]}, {'type': 'CatchClause', 'range': [3156, 3171], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [3162, 3168]}]}]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_executor_start', 'range': [3173, 3227], 'children': [{'type': 'CallExpression', 'name': 'configure_logging', 'range': [3183, 3185]}, {'type': 'CallExpression', 'name': 'set_service_name', 'range': [3187, 3190]}, {'type': 'AssignmentExpression', 'name': 'cls.db_client', 'range': [3193, 3199]}, {'type': 'AssignmentExpression', 'name': 'cls.pool_size', 'range': [3201, 3209]}, {'type': 'AssignmentExpression', 'name': 'cls.pid', 'range': [3211, 3218]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3221, 3225]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3227, 3233]}, {'type': 'CallExpression', 'name': 'atexit.register', 'range': [3244, 3251]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_executor_stop', 'range': [3254, 3307], 'children': [{'type': 'VariableDecl', 'name': 'prefix', 'range': [3264, 3267]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3269, 3274]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3277, 3282]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3285, 3290]}, {'type': 'CallExpression', 'name': 'close_service_client', 'range': [3293, 3298]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [3300, 3305]}]}, {'type': 'FunctionDecl', 'name': '_init_node_executor_pool', 'range': [3309, 3341], 'children': [{'type': 'AssignmentExpression', 'name': 'cls.executor', 'range': [3319, 3339]}]}, {'type': 'FunctionDecl', 'name': 'on_graph_execution', 'range': [3343, 3496], 'children': [{'type': 'VariableDecl', 'name': 'log_metadata', 'range': [3368, 3409]}, {'type': 'CallExpression', 'name': 'cls._on_graph_execution', 'range': [3419, 3429]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["walltime"]', 'range': [3432, 3439]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["cputime"]', 'range': [3441, 3448]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["error"]', 'range': [3450, 3462]}, {'type': 'CallExpression', 'name': 'cls.db_client.update_graph_execution_stats', 'range': [3465, 3485]}, {'type': 'CallExpression', 'name': 'cls.db_client.send_execution_update', 'range': [3488, 3494]}]}, {'type': 'FunctionDecl', 'name': '_on_graph_execution', 'range': [3497, 4132], 'children': [{'type': 'VariableDecl', 'name': 'exec_stats', 'range': [3557, 3576]}, {'type': 'VariableDecl', 'name': 'error', 'range': [3578, 3580]}, {'type': 'VariableDecl', 'name': 'finished', 'range': [3582, 3584]}, {'type': 'FunctionDecl', 'name': 'cancel_handler', 'range': [3587, 3636], 'children': [{'type': 'WhileStatement', 'range': [3593, 3608], 'children': [{'type': 'IfStatement', 'range': [3610, 3614], 'children': [{'type': 'ReturnStatement', 'range': [3613, 3614]}]}, {'type': 'CallExpression', 'name': 'cls.executor.terminate', 'range': [3615, 3621]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [3623, 3628]}, {'type': 'CallExpression', 'name': 'cls._init_node_executor_pool', 'range': [3631, 3635]}]}]}, {'type': 'VariableDecl', 'name': 'cancel_thread', 'range': [3638, 3653]}, {'type': 'TryStatement', 'range': [3656, 4132], 'children': [{'type': 'VariableDecl', 'name': 'queue', 'range': [3659, 3666]}, {'type': 'ForStatement', 'range': [3668, 3682], 'children': [{'type': 'CallExpression', 'name': 'queue.add', 'range': [3676, 3681]}]}, {'type': 'VariableDecl', 'name': 'running_executions', 'range': [3684, 3694]}, {'type': 'FunctionDecl', 'name': 'make_exec_callback', 'range': [3697, 3781], 'children': [{'type': 'VariableDecl', 'name': 'node_id', 'range': [3706, 3710]}, {'type': 'FunctionDecl', 'name': 'callback', 'range': [3713, 3779], 'children': [{'type': 'CallExpression', 'name': 'running_executions.pop', 'range': [3722, 3727]}, {'type': 'IfStatement', 'range': [3732, 3778], 'children': [{'type': 'AssignmentExpression', 'name': 'exec_stats["node_count"]', 'range': [3741, 3747]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_cputime"]', 'range': [3749, 3762]}, {'type': 'AssignmentExpression', 'name': 'exec_stats["nodes_walltime"]', 'range': [3764, 3777]}]}]}]}, {'type': 'WhileStatement', 'range': [3784, 3812], 'children': [{'type': 'IfStatement', 'range': [3794, 3807], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [3801, 3806]}, {'type': 'ReturnStatement', 'range': [3808, 3811]}]}, {'type': 'VariableDecl', 'name': 'exec_data', 'range': [3814, 3821]}, {'type': 'IfStatement', 'range': [3844, 3853], 'children': [{'type': 'CallExpression', 'name': 'execution.wait', 'range': [3907, 3911]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3914, 3926]}, {'type': 'AssignmentExpression', 'name': 'running_executions[exec_data.node_id]', 'range': [3928, 3962]}]}, {'type': 'WhileStatement', 'range': [3978, 4054], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [3988, 3994]}, {'type': 'ForStatement', 'range': [3998, 4032], 'children': [{'type': 'IfStatement', 'range': [4014, 4027], 'children': [{'type': 'AssignmentExpression', 'name': 'error', 'range': [4021, 4026]}, {'type': 'ReturnStatement', 'range': [4028, 4031]}]}]}, {'type': 'IfStatement', 'range': [4034, 4044], 'children': [{'type': 'BreakStatement', 'range': [4043, 4044]}]}, {'type': 'CallExpression', 'name': 'log_metadata.debug', 'range': [4056, 4061]}, {'type': 'CallExpression', 'name': 'execution.wait', 'range': [4064, 4069]}]}, {'type': 'CallExpression', 'name': 'log_metadata.info', 'range': [4072, 4077]}, {'type': 'CatchClause', 'range': [4080, 4095], 'children': [{'type': 'CallExpression', 'name': 'log_metadata.exception', 'range': [4086, 4092]}]}, {'type': 'FinallyClause', 'range': [4100, 4132], 'children': [{'type': 'IfStatement', 'range': [4103, 4110], 'children': [{'type': 'AssignmentExpression', 'name': 'finished', 'range': [4112, 4114]}]}, {'type': 'CallExpression', 'name': 'cancel.set', 'range': [4116, 4120]}, {'type': 'CallExpression', 'name': 'cancel_thread.join', 'range': [4122, 4126]}, {'type': 'ReturnStatement', 'range': [4128, 4131]}]}]}]}]}
2025-01-08 10:34:21,359 - INFO - Completed main AST analysis flow
2025-01-08 10:34:21,360 - INFO - Successfully processed chunk
2025-01-08 10:34:50,300 - INFO - Step 5 result: {'type': 'Program', 'name': 'LogMetadata', 'range': [271, 655], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [275, 364], 'children': [{'type': 'ParameterList', 'name': '', 'range': [277, 312], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [279, 279], 'children': []}, {'type': 'Parameter', 'name': 'user_id', 'range': [282, 284], 'children': []}, {'type': 'Parameter', 'name': 'graph_eid', 'range': [287, 289], 'children': []}, {'type': 'Parameter', 'name': 'graph_id', 'range': [292, 294], 'children': []}, {'type': 'Parameter', 'name': 'node_eid', 'range': [297, 299], 'children': []}, {'type': 'Parameter', 'name': 'node_id', 'range': [302, 304], 'children': []}, {'type': 'Parameter', 'name': 'block_name', 'range': [307, 309], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [314, 364], 'children': [{'type': 'Assignment', 'name': '', 'range': [315, 319], 'children': [{'type': 'Identifier', 'name': 'self.metadata', 'range': [315, 317], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [319, 356], 'children': [{'type': 'Property', 'name': '', 'range': [321, 323], 'children': [{'type': 'Identifier', 'name': 'component', 'range': [321, 321], 'children': []}, {'type': 'Literal', 'name': 'ExecutionManager', 'range': [323, 323], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [326, 328], 'children': [{'type': 'Identifier', 'name': 'user_id', 'range': [326, 326], 'children': []}, {'type': 'Identifier', 'name': 'user_id', 'range': [328, 328], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [331, 333], 'children': [{'type': 'Identifier', 'name': 'graph_eid', 'range': [331, 331], 'children': []}, {'type': 'Identifier', 'name': 'graph_eid', 'range': [333, 333], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [336, 338], 'children': [{'type': 'Identifier', 'name': 'graph_id', 'range': [336, 336], 'children': []}, {'type': 'Identifier', 'name': 'graph_id', 'range': [338, 338], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [341, 343], 'children': [{'type': 'Identifier', 'name': 'node_eid', 'range': [341, 341], 'children': []}, {'type': 'Identifier', 'name': 'node_eid', 'range': [343, 343], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [346, 348], 'children': [{'type': 'Identifier', 'name': 'node_id', 'range': [346, 346], 'children': []}, {'type': 'Identifier', 'name': 'node_id', 'range': [348, 348], 'children': []}]}, {'type': 'Property', 'name': '', 'range': [351, 353], 'children': [{'type': 'Identifier', 'name': 'block_name', 'range': [351, 351], 'children': []}, {'type': 'Identifier', 'name': 'block_name', 'range': [353, 353], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '', 'range': [358, 363], 'children': [{'type': 'Identifier', 'name': 'self.prefix', 'range': [358, 360], 'children': []}, {'type': 'Literal', 'name': '', 'range': [362, 363], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'info', 'range': [366, 418], 'children': [{'type': 'ParameterList', 'name': '', 'range': [368, 378], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [369, 369], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [371, 373], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [375, 377], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [380, 418], 'children': [{'type': 'Assignment', 'name': '', 'range': [381, 392], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [381, 381], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [383, 392], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [386, 391], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [387, 387], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [389, 391], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.info', 'range': [394, 417], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [397, 416], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [398, 398], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [400, 416], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [402, 416], 'children': [{'type': 'Property', 'name': '', 'range': [403, 415], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [403, 403], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [405, 415], 'children': [{'type': 'Property', 'name': '', 'range': [406, 414], 'children': [{'type': 'Identifier', 'name': '', 'range': [406, 407], 'children': []}, {'type': 'Literal', 'name': '', 'range': [408, 414], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'warning', 'range': [420, 472], 'children': [{'type': 'ParameterList', 'name': '', 'range': [422, 432], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [423, 423], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [425, 427], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [429, 431], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [434, 472], 'children': [{'type': 'Assignment', 'name': '', 'range': [435, 446], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [435, 435], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [437, 446], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [440, 445], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [441, 441], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [443, 445], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.warning', 'range': [448, 471], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [451, 470], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [452, 452], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [454, 470], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [456, 470], 'children': [{'type': 'Property', 'name': '', 'range': [457, 469], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [457, 457], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [459, 469], 'children': [{'type': 'Property', 'name': '', 'range': [460, 468], 'children': [{'type': 'Identifier', 'name': '', 'range': [460, 461], 'children': []}, {'type': 'Literal', 'name': '', 'range': [462, 468], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'error', 'range': [474, 526], 'children': [{'type': 'ParameterList', 'name': '', 'range': [476, 486], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [477, 477], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [479, 481], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [483, 485], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [488, 526], 'children': [{'type': 'Assignment', 'name': '', 'range': [489, 500], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [489, 489], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [491, 500], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [494, 499], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [495, 495], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [497, 499], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.error', 'range': [502, 525], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [505, 524], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [506, 506], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [508, 524], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [510, 524], 'children': [{'type': 'Property', 'name': '', 'range': [511, 523], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [511, 511], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [513, 523], 'children': [{'type': 'Property', 'name': '', 'range': [514, 522], 'children': [{'type': 'Identifier', 'name': '', 'range': [514, 515], 'children': []}, {'type': 'Literal', 'name': '', 'range': [516, 522], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'debug', 'range': [528, 580], 'children': [{'type': 'ParameterList', 'name': '', 'range': [530, 540], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [531, 531], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [533, 535], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [537, 539], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [542, 580], 'children': [{'type': 'Assignment', 'name': '', 'range': [543, 554], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [543, 543], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [545, 554], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [548, 553], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [549, 549], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [551, 553], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.debug', 'range': [556, 579], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [559, 578], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [560, 560], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [562, 578], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [564, 578], 'children': [{'type': 'Property', 'name': '', 'range': [565, 577], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [565, 565], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [567, 577], 'children': [{'type': 'Property', 'name': '', 'range': [568, 576], 'children': [{'type': 'Identifier', 'name': '', 'range': [568, 569], 'children': []}, {'type': 'Literal', 'name': '', 'range': [570, 576], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'exception', 'range': [582, 634], 'children': [{'type': 'ParameterList', 'name': '', 'range': [584, 594], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [585, 585], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [587, 589], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [591, 593], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [596, 634], 'children': [{'type': 'Assignment', 'name': '', 'range': [597, 608], 'children': [{'type': 'Identifier', 'name': 'msg', 'range': [597, 597], 'children': []}, {'type': 'CallExpression', 'name': 'self._wrap', 'range': [599, 608], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [602, 607], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [603, 603], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [605, 607], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'logger.exception', 'range': [610, 633], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [613, 632], 'children': [{'type': 'Argument', 'name': 'msg', 'range': [614, 614], 'children': []}, {'type': 'Argument', 'name': 'extra', 'range': [616, 632], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [618, 632], 'children': [{'type': 'Property', 'name': '', 'range': [619, 631], 'children': [{'type': 'Identifier', 'name': 'json_fields', 'range': [619, 619], 'children': []}, {'type': 'ObjectExpression', 'name': '', 'range': [621, 631], 'children': [{'type': 'Property', 'name': '', 'range': [622, 630], 'children': [{'type': 'Identifier', 'name': '', 'range': [622, 623], 'children': []}, {'type': 'Literal', 'name': '', 'range': [624, 630], 'children': []}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_wrap', 'range': [636, 654], 'children': [{'type': 'ParameterList', 'name': '', 'range': [638, 648], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [639, 639], 'children': []}, {'type': 'Parameter', 'name': 'msg', 'range': [641, 643], 'children': []}, {'type': 'Parameter', 'name': 'extra', 'range': [645, 647], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [650, 654], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [651, 653], 'children': [{'type': 'Literal', 'name': '', 'range': [652, 653], 'children': []}]}]}]}]}
2025-01-08 10:34:50,300 - INFO - Completed main AST analysis flow
2025-01-08 10:34:50,304 - INFO - Successfully processed chunk
2025-01-08 10:35:52,656 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [0, 269], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [0, 0], 'children': []}, {'type': 'ImportedModule', 'name': 'atexit', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [3, 3], 'children': []}, {'type': 'ImportedModule', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 8], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [6, 6], 'children': []}, {'type': 'ImportedModule', 'name': 'multiprocessing', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 11], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [9, 9], 'children': []}, {'type': 'ImportedModule', 'name': 'os', 'range': [10, 10], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [12, 14], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [12, 12], 'children': []}, {'type': 'ImportedModule', 'name': 'signal', 'range': [13, 13], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 17], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [15, 15], 'children': []}, {'type': 'ImportedModule', 'name': 'sys', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 20], 'children': [{'type': 'ImportKeyword', 'name': 'import', 'range': [18, 18], 'children': []}, {'type': 'ImportedModule', 'name': 'threading', 'range': [19, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [21, 29], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [21, 21], 'children': []}, {'type': 'ModulePath', 'name': 'concurrent.futures', 'range': [22, 24], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [25, 25], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [26, 28], 'children': [{'type': 'ImportedEntity', 'name': 'Future', 'range': [26, 26], 'children': []}, {'type': 'ImportedEntity', 'name': 'ProcessPoolExecutor', 'range': [28, 28], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [30, 34], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [30, 30], 'children': []}, {'type': 'ModulePath', 'name': 'contextlib', 'range': [31, 31], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [32, 32], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [33, 33], 'children': [{'type': 'ImportedEntity', 'name': 'contextmanager', 'range': [33, 33], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [35, 43], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [35, 35], 'children': []}, {'type': 'ModulePath', 'name': 'multiprocessing.pool', 'range': [36, 38], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [39, 39], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [40, 42], 'children': [{'type': 'ImportedEntity', 'name': 'AsyncResult', 'range': [40, 40], 'children': []}, {'type': 'ImportedEntity', 'name': 'Pool', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [44, 56], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [44, 44], 'children': []}, {'type': 'ModulePath', 'name': 'typing', 'range': [45, 45], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [46, 46], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [47, 55], 'children': [{'type': 'ImportedEntity', 'name': 'TYPE_CHECKING', 'range': [47, 47], 'children': []}, {'type': 'ImportedEntity', 'name': 'Any', 'range': [49, 49], 'children': []}, {'type': 'ImportedEntity', 'name': 'Generator', 'range': [51, 51], 'children': []}, {'type': 'ImportedEntity', 'name': 'TypeVar', 'range': [53, 53], 'children': []}, {'type': 'ImportedEntity', 'name': 'cast', 'range': [55, 55], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [58, 62], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [58, 58], 'children': []}, {'type': 'ModulePath', 'name': 'pydantic', 'range': [59, 59], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [60, 60], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [61, 61], 'children': [{'type': 'ImportedEntity', 'name': 'BaseModel', 'range': [61, 61], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 71], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [63, 63], 'children': []}, {'type': 'ModulePath', 'name': 'redis.lock', 'range': [64, 66], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [67, 67], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [68, 70], 'children': [{'type': 'ImportedEntity', 'name': 'Lock', 'range': [68, 68], 'children': []}, {'type': 'Alias', 'name': 'as', 'range': [69, 69], 'children': []}, {'type': 'ImportedEntity', 'name': 'RedisLock', 'range': [70, 70], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [73, 83], 'children': [{'type': 'IfKeyword', 'name': 'if', 'range': [73, 73], 'children': []}, {'type': 'Condition', 'name': 'TYPE_CHECKING', 'range': [74, 74], 'children': []}, {'type': 'Colon', 'name': ':', 'range': [75, 75], 'children': []}, {'type': 'FromKeyword', 'name': 'from', 'range': [77, 77], 'children': []}, {'type': 'ModulePath', 'name': 'backend.executor', 'range': [78, 80], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [81, 81], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [82, 82], 'children': [{'type': 'ImportedEntity', 'name': 'DatabaseManager', 'range': [82, 82], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [85, 93], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [85, 85], 'children': []}, {'type': 'ModulePath', 'name': 'autogpt_libs.utils.cache', 'range': [86, 90], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [91, 91], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [92, 92], 'children': [{'type': 'ImportedEntity', 'name': 'thread_cached', 'range': [92, 92], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [95, 103], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [95, 95], 'children': []}, {'type': 'ModulePath', 'name': 'backend.blocks.agent', 'range': [96, 100], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [101, 101], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [102, 102], 'children': [{'type': 'ImportedEntity', 'name': 'AgentExecutorBlock', 'range': [102, 102], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [104, 110], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [104, 104], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data', 'range': [105, 107], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [108, 108], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [109, 109], 'children': [{'type': 'ImportedEntity', 'name': 'redis', 'range': [109, 109], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [111, 127], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [111, 111], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.block', 'range': [112, 116], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [117, 117], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [118, 126], 'children': [{'type': 'ImportedEntity', 'name': 'Block', 'range': [118, 118], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockData', 'range': [120, 120], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockInput', 'range': [122, 122], 'children': []}, {'type': 'ImportedEntity', 'name': 'BlockType', 'range': [124, 124], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_block', 'range': [126, 126], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [128, 159], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [128, 128], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.execution', 'range': [129, 133], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [134, 134], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [135, 158], 'children': [{'type': 'ImportedEntity', 'name': 'ExecutionQueue', 'range': [137, 137], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionResult', 'range': [140, 140], 'children': []}, {'type': 'ImportedEntity', 'name': 'ExecutionStatus', 'range': [143, 143], 'children': []}, {'type': 'ImportedEntity', 'name': 'GraphExecutionEntry', 'range': [146, 146], 'children': []}, {'type': 'ImportedEntity', 'name': 'NodeExecutionEntry', 'range': [149, 149], 'children': []}, {'type': 'ImportedEntity', 'name': 'merge_execution_input', 'range': [152, 152], 'children': []}, {'type': 'ImportedEntity', 'name': 'parse_execution_output', 'range': [155, 155], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [160, 172], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [160, 160], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.graph', 'range': [161, 165], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [166, 166], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [167, 171], 'children': [{'type': 'ImportedEntity', 'name': 'GraphModel', 'range': [167, 167], 'children': []}, {'type': 'ImportedEntity', 'name': 'Link', 'range': [169, 169], 'children': []}, {'type': 'ImportedEntity', 'name': 'Node', 'range': [171, 171], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [173, 183], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [173, 173], 'children': []}, {'type': 'ModulePath', 'name': 'backend.data.model', 'range': [174, 178], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [179, 179], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [180, 182], 'children': [{'type': 'ImportedEntity', 'name': 'CREDENTIALS_FIELD_NAME', 'range': [180, 180], 'children': []}, {'type': 'ImportedEntity', 'name': 'CredentialsMetaInput', 'range': [182, 182], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [184, 192], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [184, 184], 'children': []}, {'type': 'ModulePath', 'name': 'backend.integrations.creds_manager', 'range': [185, 189], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [190, 190], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [191, 191], 'children': [{'type': 'ImportedEntity', 'name': 'IntegrationCredentialsManager', 'range': [191, 191], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [193, 199], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [193, 193], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util', 'range': [194, 196], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [197, 197], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [198, 198], 'children': [{'type': 'ImportedEntity', 'name': 'json', 'range': [198, 198], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [200, 210], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [200, 200], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.decorator', 'range': [201, 205], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [206, 206], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [207, 209], 'children': [{'type': 'ImportedEntity', 'name': 'error_logged', 'range': [207, 207], 'children': []}, {'type': 'ImportedEntity', 'name': 'time_measured', 'range': [209, 209], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [211, 219], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [211, 211], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.logging', 'range': [212, 216], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [217, 217], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [218, 218], 'children': [{'type': 'ImportedEntity', 'name': 'configure_logging', 'range': [218, 218], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [220, 228], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [220, 220], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.process', 'range': [221, 225], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [226, 226], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [227, 227], 'children': [{'type': 'ImportedEntity', 'name': 'set_service_name', 'range': [227, 227], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [229, 251], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [229, 229], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.service', 'range': [230, 234], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [235, 235], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [236, 250], 'children': [{'type': 'ImportedEntity', 'name': 'AppService', 'range': [238, 238], 'children': []}, {'type': 'ImportedEntity', 'name': 'close_service_client', 'range': [241, 241], 'children': []}, {'type': 'ImportedEntity', 'name': 'expose', 'range': [244, 244], 'children': []}, {'type': 'ImportedEntity', 'name': 'get_service_client', 'range': [247, 247], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [252, 260], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [252, 252], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.settings', 'range': [253, 257], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [258, 258], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [259, 259], 'children': [{'type': 'ImportedEntity', 'name': 'Settings', 'range': [259, 259], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [261, 269], 'children': [{'type': 'FromKeyword', 'name': 'from', 'range': [261, 261], 'children': []}, {'type': 'ModulePath', 'name': 'backend.util.type', 'range': [262, 266], 'children': []}, {'type': 'ImportKeyword', 'name': 'import', 'range': [267, 267], 'children': []}, {'type': 'ImportedEntities', 'name': '', 'range': [268, 268], 'children': [{'type': 'ImportedEntity', 'name': 'convert', 'range': [268, 268], 'children': []}]}]}]}
2025-01-08 10:35:52,657 - INFO - Completed main AST analysis flow
2025-01-08 10:35:52,658 - INFO - Successfully processed chunk
2025-01-08 10:35:52,911 - INFO - Starting code generation from AST
2025-01-08 10:38:13,669 - INFO - Successfully generated code from AST
2025-01-08 10:38:13,669 - INFO - Starting static code similarity comparison
2025-01-08 10:38:13,985 - INFO - Static similarity result: {'final_score': 99.33, 'length_similarity': 99.75, 'token_similarity': 99.7, 'structure_similarity': 97.82, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
