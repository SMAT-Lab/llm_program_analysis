2025-01-08 10:27:27,305 - INFO - Processing sample 85
2025-01-08 10:27:27,305 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:32,721 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 10:27:32,723 - INFO - Processing chunk #0 (size=403 chars, start_index=0)
2025-01-08 10:27:32,724 - INFO - Processing chunk with 403 chars starting at index 0
2025-01-08 10:27:32,724 - INFO - Processing chunk #1 (size=3055 chars, start_index=70)
2025-01-08 10:27:32,724 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,725 - INFO - Processing chunk with 3055 chars starting at index 70
2025-01-08 10:27:32,725 - INFO - Processing chunk #2 (size=2862 chars, start_index=566)
2025-01-08 10:27:32,725 - INFO - Tokenized code into 70 tokens
2025-01-08 10:27:32,725 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,725 - INFO - Processing chunk with 2862 chars starting at index 566
2025-01-08 10:27:32,730 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,731 - INFO - Tokenized code into 496 tokens
2025-01-08 10:27:32,741 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,735 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,747 - INFO - Tokenized code into 447 tokens
2025-01-08 10:27:32,747 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:38,454 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 69], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 7], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 31], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [32, 40], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [42, 66], 'children': []}]}
2025-01-08 10:27:38,455 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:38,924 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [566, 1012], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsWriteBlock', 'range': [566, 572], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [573, 579], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [642, 648], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [678, 847], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [849, 920], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_write_sheet', 'range': [921, 1011], 'children': []}]}
2025-01-08 10:27:38,924 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:39,225 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [70, 565], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsReadBlock', 'range': [70, 76], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [77, 83], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [168, 319], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [321, 382], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_build_service', 'range': [386, 496], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_read_sheet', 'range': [497, 565], 'children': []}]}
2025-01-08 10:27:39,225 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:58,636 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 7], 'children': [{'type': 'ImportFrom', 'name': 'google.oauth2.credentials', 'range': [0, 5], 'children': []}, {'type': 'ImportedItem', 'name': 'Credentials', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 14], 'children': [{'type': 'ImportFrom', 'name': 'googleapiclient.discovery', 'range': [9, 12], 'children': []}, {'type': 'ImportedItem', 'name': 'build', 'range': [14, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 31], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [17, 22], 'children': []}, {'type': 'ImportedItem', 'name': 'Block', 'range': [24, 24], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockCategory', 'range': [26, 26], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockOutput', 'range': [28, 28], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockSchema', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [32, 40], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [32, 37], 'children': []}, {'type': 'ImportedItem', 'name': 'SchemaField', 'range': [39, 39], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [42, 66], 'children': [{'type': 'ImportFrom', 'name': '._auth', 'range': [42, 44], 'children': []}, {'type': 'ImportedItem', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [48, 48], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS', 'range': [51, 51], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [54, 54], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentials', 'range': [57, 57], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsField', 'range': [60, 60], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsInput', 'range': [63, 63], 'children': []}]}]}
2025-01-08 10:27:58,651 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:25,359 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 7], 'children': [{'type': 'ImportFrom', 'name': 'google.oauth2.credentials', 'range': [0, 5], 'children': []}, {'type': 'ImportedItem', 'name': 'Credentials', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 14], 'children': [{'type': 'ImportFrom', 'name': 'googleapiclient.discovery', 'range': [9, 12], 'children': []}, {'type': 'ImportedItem', 'name': 'build', 'range': [14, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 31], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [17, 22], 'children': []}, {'type': 'ImportedItem', 'name': 'Block', 'range': [24, 24], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockCategory', 'range': [26, 26], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockOutput', 'range': [28, 28], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockSchema', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [32, 40], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [32, 37], 'children': []}, {'type': 'ImportedItem', 'name': 'SchemaField', 'range': [39, 39], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [42, 66], 'children': [{'type': 'ImportFrom', 'name': '._auth', 'range': [42, 44], 'children': []}, {'type': 'ImportedItem', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [48, 48], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS', 'range': [51, 51], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [54, 54], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentials', 'range': [57, 57], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsField', 'range': [60, 60], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsInput', 'range': [63, 63], 'children': []}]}]}
2025-01-08 10:28:25,359 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:30,906 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [566, 1012], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsWriteBlock', 'range': [566, 572], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [568, 570], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [573, 579], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [575, 577], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [580, 591], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [582, 582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [583, 583], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [584, 591], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/spreadsheets"]', 'range': [587, 589], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'spreadsheet_id', 'range': [593, 605], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [595, 595], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [596, 596], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [597, 605], 'children': [{'type': 'Argument', 'name': 'description="The ID of the spreadsheet to write to"', 'range': [600, 602], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'range', 'range': [607, 619], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [609, 609], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [610, 610], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [611, 619], 'children': [{'type': 'Argument', 'name': 'description="The A1 notation of the range to write"', 'range': [614, 616], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'values', 'range': [621, 639], 'children': [{'type': 'TypeAnnotation', 'name': 'list[list[str]]', 'range': [623, 629], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [630, 630], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [631, 639], 'children': [{'type': 'Argument', 'name': 'description="The data to write to the spreadsheet"', 'range': [634, 636], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [642, 648], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [644, 646], 'children': []}, {'type': 'FieldDeclaration', 'name': 'result', 'range': [649, 661], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [651, 651], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [652, 652], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [653, 661], 'children': [{'type': 'Argument', 'name': 'description="The result of the write operation"', 'range': [656, 658], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [663, 675], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [665, 665], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [666, 666], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [667, 675], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [670, 672], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [678, 847], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [681, 681], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [685, 691], 'children': []}, {'type': 'Assignment', 'name': 'id="d9291e87-301d-47a8-91fe-907fb55460e5"', 'range': [692, 694], 'children': []}, {'type': 'Assignment', 'name': 'description="This block writes data to a Google Sheets spreadsheet."', 'range': [697, 699], 'children': []}, {'type': 'Assignment', 'name': 'categories={BlockCategory.DATA}', 'range': [702, 708], 'children': []}, {'type': 'Assignment', 'name': 'input_schema=GoogleSheetsWriteBlock.Input', 'range': [711, 716], 'children': []}, {'type': 'Assignment', 'name': 'output_schema=GoogleSheetsWriteBlock.Output', 'range': [718, 722], 'children': []}, {'type': 'Assignment', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [725, 728], 'children': []}, {'type': 'Assignment', 'name': 'test_input={"spreadsheet_id":"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms","range":"Sheet1!A1:B2","values":[["Name","Score"],["Bob","90"]],"credentials":TEST_CREDENTIALS_INPUT}', 'range': [731, 769], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [774, 776], 'children': []}, {'type': 'Assignment', 'name': 'test_output=[("result",{"updatedCells":4,"updatedColumns":2,"updatedRows":2})]', 'range': [779, 806], 'children': []}, {'type': 'Assignment', 'name': 'test_mock={"_write_sheet":lambda *args,**kwargs:{"updatedCells":4,"updatedColumns":2,"updatedRows":2}}', 'range': [809, 843], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [849, 920], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [853, 853], 'children': []}, {'type': 'Parameter', 'name': 'input_data:Input', 'range': [855, 857], 'children': []}, {'type': 'Parameter', 'name': 'credentials:GoogleCredentials', 'range': [861, 863], 'children': []}, {'type': 'VariableDeclaration', 'name': 'service=GoogleSheetsReadBlock._build_service(credentials,**kwargs)', 'range': [875, 886], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result=self._write_sheet(service,input_data.spreadsheet_id,input_data.range,input_data.values)', 'range': [888, 913], 'children': []}, {'type': 'Yield', 'name': 'yield "result",result', 'range': [915, 918], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_write_sheet', 'range': [921, 1011], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [925, 925], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [927, 927], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id:str', 'range': [929, 931], 'children': []}, {'type': 'Parameter', 'name': 'range:str', 'range': [933, 935], 'children': []}, {'type': 'Parameter', 'name': 'values:list[list[str]]', 'range': [937, 945], 'children': []}, {'type': 'VariableDeclaration', 'name': 'body={"values":values}', 'range': [953, 959], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result=service.spreadsheets().values().update(spreadsheetId=spreadsheet_id,range=range,valueInputOption="USER_ENTERED",body=body).execute()', 'range': [961, 1006], 'children': []}, {'type': 'Return', 'name': 'return result', 'range': [1009, 1010], 'children': []}]}]}
2025-01-08 10:28:30,906 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:41,909 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 7], 'children': [{'type': 'ImportFrom', 'name': 'google.oauth2.credentials', 'range': [0, 5], 'children': []}, {'type': 'ImportedItem', 'name': 'Credentials', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 14], 'children': [{'type': 'ImportFrom', 'name': 'googleapiclient.discovery', 'range': [9, 12], 'children': []}, {'type': 'ImportedItem', 'name': 'build', 'range': [14, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 31], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [17, 22], 'children': []}, {'type': 'ImportedItem', 'name': 'Block', 'range': [24, 24], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockCategory', 'range': [26, 26], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockOutput', 'range': [28, 28], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockSchema', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [32, 40], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [32, 37], 'children': []}, {'type': 'ImportedItem', 'name': 'SchemaField', 'range': [39, 39], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [42, 66], 'children': [{'type': 'ImportFrom', 'name': '._auth', 'range': [42, 44], 'children': []}, {'type': 'ImportedItem', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [48, 48], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS', 'range': [51, 51], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [54, 54], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentials', 'range': [57, 57], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsField', 'range': [60, 60], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsInput', 'range': [63, 63], 'children': []}]}]}
2025-01-08 10:28:41,909 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:59,186 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 66], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 7], 'children': [{'type': 'ImportFrom', 'name': 'google.oauth2.credentials', 'range': [0, 5], 'children': []}, {'type': 'ImportedItem', 'name': 'Credentials', 'range': [7, 7], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [9, 14], 'children': [{'type': 'ImportFrom', 'name': 'googleapiclient.discovery', 'range': [9, 12], 'children': []}, {'type': 'ImportedItem', 'name': 'build', 'range': [14, 14], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [17, 31], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [17, 22], 'children': []}, {'type': 'ImportedItem', 'name': 'Block', 'range': [24, 24], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockCategory', 'range': [26, 26], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockOutput', 'range': [28, 28], 'children': []}, {'type': 'ImportedItem', 'name': 'BlockSchema', 'range': [30, 30], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [32, 40], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [32, 37], 'children': []}, {'type': 'ImportedItem', 'name': 'SchemaField', 'range': [39, 39], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [42, 66], 'children': [{'type': 'ImportFrom', 'name': '._auth', 'range': [42, 44], 'children': []}, {'type': 'ImportedItem', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [48, 48], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS', 'range': [51, 51], 'children': []}, {'type': 'ImportedItem', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [54, 54], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentials', 'range': [57, 57], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsField', 'range': [60, 60], 'children': []}, {'type': 'ImportedItem', 'name': 'GoogleCredentialsInput', 'range': [63, 63], 'children': []}]}]}]}
2025-01-08 10:28:59,187 - INFO - Completed main AST analysis flow
2025-01-08 10:28:59,187 - INFO - Successfully processed chunk
2025-01-08 10:29:21,217 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [566, 1012], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsWriteBlock', 'range': [566, 572], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [568, 570], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [573, 579], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [575, 577], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [580, 591], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [582, 582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [583, 583], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [584, 591], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/spreadsheets"]', 'range': [587, 589], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'spreadsheet_id', 'range': [593, 605], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [595, 595], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [596, 596], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [597, 605], 'children': [{'type': 'Argument', 'name': 'description="The ID of the spreadsheet to write to"', 'range': [600, 602], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'range', 'range': [607, 619], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [609, 609], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [610, 610], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [611, 619], 'children': [{'type': 'Argument', 'name': 'description="The A1 notation of the range to write"', 'range': [614, 616], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'values', 'range': [621, 639], 'children': [{'type': 'TypeAnnotation', 'name': 'list[list[str]]', 'range': [623, 629], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [630, 630], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [631, 639], 'children': [{'type': 'Argument', 'name': 'description="The data to write to the spreadsheet"', 'range': [634, 636], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [642, 648], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [644, 646], 'children': []}, {'type': 'FieldDeclaration', 'name': 'result', 'range': [649, 661], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [651, 651], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [652, 652], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [653, 661], 'children': [{'type': 'Argument', 'name': 'description="The result of the write operation"', 'range': [656, 658], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [663, 675], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [665, 665], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [666, 666], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [667, 675], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [670, 672], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [678, 847], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [681, 681], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [685, 691], 'children': []}, {'type': 'Assignment', 'name': 'id="d9291e87-301d-47a8-91fe-907fb55460e5"', 'range': [692, 694], 'children': []}, {'type': 'Assignment', 'name': 'description="This block writes data to a Google Sheets spreadsheet."', 'range': [697, 699], 'children': []}, {'type': 'Assignment', 'name': 'categories={BlockCategory.DATA}', 'range': [702, 708], 'children': []}, {'type': 'Assignment', 'name': 'input_schema=GoogleSheetsWriteBlock.Input', 'range': [711, 716], 'children': []}, {'type': 'Assignment', 'name': 'output_schema=GoogleSheetsWriteBlock.Output', 'range': [718, 722], 'children': []}, {'type': 'Assignment', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [725, 728], 'children': []}, {'type': 'Assignment', 'name': 'test_input={"spreadsheet_id":"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms","range":"Sheet1!A1:B2","values":[["Name","Score"],["Bob","90"]],"credentials":TEST_CREDENTIALS_INPUT}', 'range': [731, 769], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [774, 776], 'children': []}, {'type': 'Assignment', 'name': 'test_output=[("result",{"updatedCells":4,"updatedColumns":2,"updatedRows":2})]', 'range': [779, 806], 'children': []}, {'type': 'Assignment', 'name': 'test_mock={"_write_sheet":lambda *args,**kwargs:{"updatedCells":4,"updatedColumns":2,"updatedRows":2}}', 'range': [809, 843], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [849, 920], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [853, 853], 'children': []}, {'type': 'Parameter', 'name': 'input_data:Input', 'range': [855, 857], 'children': []}, {'type': 'Parameter', 'name': 'credentials:GoogleCredentials', 'range': [861, 863], 'children': []}, {'type': 'VariableDeclaration', 'name': 'service=GoogleSheetsReadBlock._build_service(credentials,**kwargs)', 'range': [875, 886], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result=self._write_sheet(service,input_data.spreadsheet_id,input_data.range,input_data.values)', 'range': [888, 913], 'children': []}, {'type': 'Yield', 'name': 'yield "result",result', 'range': [915, 918], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '_write_sheet', 'range': [921, 1011], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [925, 925], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [927, 927], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id:str', 'range': [929, 931], 'children': []}, {'type': 'Parameter', 'name': 'range:str', 'range': [933, 935], 'children': []}, {'type': 'Parameter', 'name': 'values:list[list[str]]', 'range': [937, 945], 'children': []}, {'type': 'VariableDeclaration', 'name': 'body={"values":values}', 'range': [953, 959], 'children': []}, {'type': 'VariableDeclaration', 'name': 'result=service.spreadsheets().values().update(spreadsheetId=spreadsheet_id,range=range,valueInputOption="USER_ENTERED",body=body).execute()', 'range': [961, 1006], 'children': []}, {'type': 'Return', 'name': 'return result', 'range': [1009, 1010], 'children': []}]}]}
2025-01-08 10:29:21,218 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:56,786 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [70, 565], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsReadBlock', 'range': [70, 76], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [72, 74], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [77, 83], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [79, 81], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [84, 95], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [86, 86], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [87, 87], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [88, 95], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [89, 95], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [91, 93], 'children': [{'type': 'StringLiteral', 'name': '"https://www.googleapis.com/auth/spreadsheets.readonly"', 'range': [92, 92], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'spreadsheet_id', 'range': [97, 109], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [99, 99], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [100, 100], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [101, 109], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [102, 109], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [104, 106], 'children': [{'type': 'StringLiteral', 'name': '"The ID of the spreadsheet to read from"', 'range': [106, 106], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'range', 'range': [111, 123], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [113, 113], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [114, 114], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [115, 123], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [116, 123], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [118, 120], 'children': [{'type': 'StringLiteral', 'name': '"The A1 notation of the range to read"', 'range': [120, 120], 'children': []}]}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [128, 130], 'children': []}, {'type': 'FieldDeclaration', 'name': 'result', 'range': [133, 151], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [137, 137], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [139, 139], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [142, 142], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [143, 151], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [144, 151], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [146, 148], 'children': [{'type': 'StringLiteral', 'name': '"The data read from the spreadsheet"', 'range': [148, 148], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [153, 165], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [155, 155], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [156, 156], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [157, 165], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [158, 165], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [160, 162], 'children': [{'type': 'StringLiteral', 'name': '"Error message if any"', 'range': [162, 162], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [168, 319], 'children': [{'type': 'ParameterList', 'name': '', 'range': [170, 172], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [171, 171], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [173, 319], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [175, 181], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [175, 181], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [176, 181], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 213], 'children': [{'type': 'Assignment', 'name': '=', 'range': [183, 183], 'children': [{'type': 'StringLiteral', 'name': '"5724e902-3635-47e9-a108-aaa0263a4988"', 'range': [184, 184], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [187, 189], 'children': [{'type': 'Assignment', 'name': '=', 'range': [188, 188], 'children': [{'type': 'StringLiteral', 'name': '"This block reads data from a Google Sheets spreadsheet."', 'range': [189, 189], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [192, 198], 'children': [{'type': 'Assignment', 'name': '=', 'range': [193, 193], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [194, 198], 'children': [{'type': 'Property', 'name': 'BlockCategory.DATA', 'range': [195, 197], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [201, 206], 'children': [{'type': 'Assignment', 'name': '=', 'range': [202, 202], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Input', 'range': [203, 205], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [208, 212], 'children': [{'type': 'Assignment', 'name': '=', 'range': [209, 209], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Output', 'range': [210, 212], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [215, 219], 'children': [{'type': 'Assignment', 'name': '=', 'range': [216, 216], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [217, 217], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [218, 218], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [221, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [222, 222], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [223, 240], 'children': [{'type': 'Property', 'name': 'spreadsheet_id', 'range': [225, 227], 'children': [{'type': 'StringLiteral', 'name': '"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"', 'range': [227, 227], 'children': []}]}, {'type': 'Property', 'name': 'range', 'range': [230, 232], 'children': [{'type': 'StringLiteral', 'name': '"Sheet1!A1:B2"', 'range': [232, 232], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [235, 237], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [237, 237], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [243, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [244, 244], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [245, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [248, 279], 'children': [{'type': 'Assignment', 'name': '=', 'range': [249, 249], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [250, 279], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [252, 276], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [254, 254], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [257, 273], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [259, 263], 'children': [{'type': 'StringLiteral', 'name': '"Name"', 'range': [260, 260], 'children': []}, {'type': 'StringLiteral', 'name': '"Score"', 'range': [262, 262], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [266, 270], 'children': [{'type': 'StringLiteral', 'name': '"Alice"', 'range': [267, 267], 'children': []}, {'type': 'StringLiteral', 'name': '"85"', 'range': [269, 269], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [282, 315], 'children': [{'type': 'Assignment', 'name': '=', 'range': [283, 283], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [284, 315], 'children': [{'type': 'Property', 'name': '_read_sheet', 'range': [286, 288], 'children': [{'type': 'LambdaExpression', 'name': '', 'range': [288, 296], 'children': [{'type': 'ParameterList', 'name': '', 'range': [289, 291], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [290, 290], 'children': []}]}, {'type': 'ParameterList', 'name': '', 'range': [292, 294], 'children': [{'type': 'Parameter', 'name': 'kwargs', 'range': [293, 293], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [295, 296], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [296, 296], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [297, 312], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [298, 302], 'children': [{'type': 'StringLiteral', 'name': '"Name"', 'range': [299, 299], 'children': []}, {'type': 'StringLiteral', 'name': '"Score"', 'range': [301, 301], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [305, 309], 'children': [{'type': 'StringLiteral', 'name': '"Alice"', 'range': [306, 306], 'children': []}, {'type': 'StringLiteral', 'name': '"85"', 'range': [308, 308], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [321, 382], 'children': [{'type': 'ParameterList', 'name': '', 'range': [323, 340], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [325, 325], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [327, 329], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [329, 329], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [333, 335], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [335, 335], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [339, 339], 'children': []}]}, {'type': 'ReturnTypeAnnotation', 'name': 'BlockOutput', 'range': [342, 344], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [345, 382], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [347, 358], 'children': [{'type': 'Assignment', 'name': '=', 'range': [348, 348], 'children': [{'type': 'FunctionCall', 'name': 'self._build_service', 'range': [349, 358], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [352, 358], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [353, 353], 'children': []}, {'type': 'SpreadElement', 'name': '', 'range': [355, 357], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [356, 356], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [360, 375], 'children': [{'type': 'Assignment', 'name': '=', 'range': [361, 361], 'children': [{'type': 'FunctionCall', 'name': 'self._read_sheet', 'range': [362, 375], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [365, 375], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [366, 366], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.spreadsheet_id', 'range': [369, 370], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.range', 'range': [373, 374], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [377, 381], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [378, 378], 'children': []}, {'type': 'Identifier', 'name': 'data', 'range': [380, 380], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_build_service', 'range': [386, 496], 'children': [{'type': 'ParameterList', 'name': '', 'range': [388, 396], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [389, 391], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [391, 391], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [395, 395], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [397, 496], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [399, 482], 'children': [{'type': 'Assignment', 'name': '=', 'range': [400, 400], 'children': [{'type': 'FunctionCall', 'name': 'Credentials', 'range': [401, 482], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [402, 482], 'children': [{'type': 'KeywordArgument', 'name': 'token', 'range': [404, 424], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [406, 423], 'children': [{'type': 'MemberExpression', 'name': 'credentials.access_token.get_secret_value', 'range': [408, 414], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [422, 422], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'refresh_token', 'range': [427, 447], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [429, 446], 'children': [{'type': 'MemberExpression', 'name': 'credentials.refresh_token.get_secret_value', 'range': [431, 437], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [445, 445], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'token_uri', 'range': [450, 452], 'children': [{'type': 'StringLiteral', 'name': '"https://oauth2.googleapis.com/token"', 'range': [452, 452], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'client_id', 'range': [455, 462], 'children': [{'type': 'FunctionCall', 'name': 'kwargs.get', 'range': [459, 462], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [460, 462], 'children': [{'type': 'StringLiteral', 'name': '"client_id"', 'range': [461, 461], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'client_secret', 'range': [465, 472], 'children': [{'type': 'FunctionCall', 'name': 'kwargs.get', 'range': [469, 472], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [470, 472], 'children': [{'type': 'StringLiteral', 'name': '"client_secret"', 'range': [471, 471], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'scopes', 'range': [475, 480], 'children': [{'type': 'MemberExpression', 'name': 'credentials.scopes', 'range': [477, 479], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [484, 495], 'children': [{'type': 'FunctionCall', 'name': 'build', 'range': [485, 495], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [486, 495], 'children': [{'type': 'StringLiteral', 'name': '"sheets"', 'range': [487, 487], 'children': []}, {'type': 'StringLiteral', 'name': '"v4"', 'range': [489, 489], 'children': []}, {'type': 'KeywordArgument', 'name': 'credentials', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'creds', 'range': [493, 493], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_read_sheet', 'range': [497, 565], 'children': [{'type': 'ParameterList', 'name': '', 'range': [499, 511], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [500, 500], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [502, 502], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id', 'range': [504, 506], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [506, 506], 'children': []}]}, {'type': 'Parameter', 'name': 'range', 'range': [508, 510], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [510, 510], 'children': []}]}]}, {'type': 'ReturnTypeAnnotation', 'name': 'list', 'range': [512, 520], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [514, 516], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [518, 518], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [521, 565], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [523, 530], 'children': [{'type': 'Assignment', 'name': '=', 'range': [524, 524], 'children': [{'type': 'FunctionCall', 'name': 'service.spreadsheets', 'range': [525, 530], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [528, 530], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [531, 553], 'children': [{'type': 'Assignment', 'name': '=', 'range': [532, 532], 'children': [{'type': 'FunctionCall', 'name': 'sheet.values.get', 'range': [533, 553], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [536, 553], 'children': [{'type': 'KeywordArgument', 'name': 'spreadsheetId', 'range': [541, 543], 'children': [{'type': 'Identifier', 'name': 'spreadsheet_id', 'range': [543, 543], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'range', 'range': [545, 547], 'children': [{'type': 'Identifier', 'name': 'range', 'range': [547, 547], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [554, 564], 'children': [{'type': 'FunctionCall', 'name': 'result.get', 'range': [555, 564], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [558, 564], 'children': [{'type': 'StringLiteral', 'name': '"values"', 'range': [559, 559], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [561, 563], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:56,786 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:09,497 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [566, 1012], 'children': [{'type': 'ClassDecl', 'name': 'GoogleSheetsWriteBlock', 'range': [566, 572], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [568, 570], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [573, 579], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [575, 577], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [580, 591], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [582, 582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [583, 583], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [584, 591], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/spreadsheets"]', 'range': [587, 589], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'spreadsheet_id', 'range': [593, 605], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [595, 595], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [596, 596], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [597, 605], 'children': [{'type': 'Argument', 'name': 'description="The ID of the spreadsheet to write to"', 'range': [600, 602], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'range', 'range': [607, 619], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [609, 609], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [610, 610], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [611, 619], 'children': [{'type': 'Argument', 'name': 'description="The A1 notation of the range to write"', 'range': [614, 616], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'values', 'range': [621, 639], 'children': [{'type': 'TypeAnnotation', 'name': 'list[list[str]]', 'range': [623, 629], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [630, 630], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [631, 639], 'children': [{'type': 'Argument', 'name': 'description="The data to write to the spreadsheet"', 'range': [634, 636], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [642, 648], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [644, 646], 'children': []}, {'type': 'FieldDecl', 'name': 'result', 'range': [649, 661], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [651, 651], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [652, 652], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [653, 661], 'children': [{'type': 'Argument', 'name': 'description="The result of the write operation"', 'range': [656, 658], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [663, 675], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [665, 665], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [666, 666], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [667, 675], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [670, 672], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [678, 847], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [681, 681], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [685, 691], 'children': []}, {'type': 'Assignment', 'name': 'id="d9291e87-301d-47a8-91fe-907fb55460e5"', 'range': [692, 694], 'children': []}, {'type': 'Assignment', 'name': 'description="This block writes data to a Google Sheets spreadsheet."', 'range': [697, 699], 'children': []}, {'type': 'Assignment', 'name': 'categories={BlockCategory.DATA}', 'range': [702, 708], 'children': []}, {'type': 'Assignment', 'name': 'input_schema=GoogleSheetsWriteBlock.Input', 'range': [711, 716], 'children': []}, {'type': 'Assignment', 'name': 'output_schema=GoogleSheetsWriteBlock.Output', 'range': [718, 722], 'children': []}, {'type': 'Assignment', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [725, 728], 'children': []}, {'type': 'Assignment', 'name': 'test_input={"spreadsheet_id":"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms","range":"Sheet1!A1:B2","values":[["Name","Score"],["Bob","90"]],"credentials":TEST_CREDENTIALS_INPUT}', 'range': [731, 769], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [774, 776], 'children': []}, {'type': 'Assignment', 'name': 'test_output=[("result",{"updatedCells":4,"updatedColumns":2,"updatedRows":2})]', 'range': [779, 806], 'children': []}, {'type': 'Assignment', 'name': 'test_mock={"_write_sheet":lambda *args,**kwargs:{"updatedCells":4,"updatedColumns":2,"updatedRows":2}}', 'range': [809, 843], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [849, 920], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [853, 853], 'children': []}, {'type': 'Parameter', 'name': 'input_data:Input', 'range': [855, 857], 'children': []}, {'type': 'Parameter', 'name': 'credentials:GoogleCredentials', 'range': [861, 863], 'children': []}, {'type': 'VariableDecl', 'name': 'service=GoogleSheetsReadBlock._build_service(credentials,**kwargs)', 'range': [875, 886], 'children': []}, {'type': 'VariableDecl', 'name': 'result=self._write_sheet(service,input_data.spreadsheet_id,input_data.range,input_data.values)', 'range': [888, 913], 'children': []}, {'type': 'Yield', 'name': 'yield "result",result', 'range': [915, 918], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_write_sheet', 'range': [921, 1011], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [925, 925], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [927, 927], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id:str', 'range': [929, 931], 'children': []}, {'type': 'Parameter', 'name': 'range:str', 'range': [933, 935], 'children': []}, {'type': 'Parameter', 'name': 'values:list[list[str]]', 'range': [937, 945], 'children': []}, {'type': 'VariableDecl', 'name': 'body={"values":values}', 'range': [953, 959], 'children': []}, {'type': 'VariableDecl', 'name': 'result=service.spreadsheets().values().update(spreadsheetId=spreadsheet_id,range=range,valueInputOption="USER_ENTERED",body=body).execute()', 'range': [961, 1006], 'children': []}, {'type': 'Return', 'name': 'return result', 'range': [1009, 1010], 'children': []}]}]}
2025-01-08 10:30:09,497 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:59,422 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [566, 1012], 'children': [{'type': 'ClassDecl', 'name': 'GoogleSheetsWriteBlock', 'range': [566, 572], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [568, 570], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [573, 579], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [575, 577], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [580, 591], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [582, 582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [583, 583], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [584, 591], 'children': [{'type': 'Argument', 'name': '["https://www.googleapis.com/auth/spreadsheets"]', 'range': [587, 589], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'spreadsheet_id', 'range': [593, 605], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [595, 595], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [596, 596], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [597, 605], 'children': [{'type': 'Argument', 'name': 'description="The ID of the spreadsheet to write to"', 'range': [600, 602], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'range', 'range': [607, 619], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [609, 609], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [610, 610], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [611, 619], 'children': [{'type': 'Argument', 'name': 'description="The A1 notation of the range to write"', 'range': [614, 616], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'values', 'range': [621, 639], 'children': [{'type': 'TypeAnnotation', 'name': 'list[list[str]]', 'range': [623, 629], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [630, 630], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [631, 639], 'children': [{'type': 'Argument', 'name': 'description="The data to write to the spreadsheet"', 'range': [634, 636], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [642, 648], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [644, 646], 'children': []}, {'type': 'FieldDecl', 'name': 'result', 'range': [649, 661], 'children': [{'type': 'TypeAnnotation', 'name': 'dict', 'range': [651, 651], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [652, 652], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [653, 661], 'children': [{'type': 'Argument', 'name': 'description="The result of the write operation"', 'range': [656, 658], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [663, 675], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [665, 665], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [666, 666], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [667, 675], 'children': [{'type': 'Argument', 'name': 'description="Error message if any"', 'range': [670, 672], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [678, 847], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [681, 681], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [685, 691], 'children': []}, {'type': 'Assignment', 'name': 'id="d9291e87-301d-47a8-91fe-907fb55460e5"', 'range': [692, 694], 'children': []}, {'type': 'Assignment', 'name': 'description="This block writes data to a Google Sheets spreadsheet."', 'range': [697, 699], 'children': []}, {'type': 'Assignment', 'name': 'categories={BlockCategory.DATA}', 'range': [702, 708], 'children': []}, {'type': 'Assignment', 'name': 'input_schema=GoogleSheetsWriteBlock.Input', 'range': [711, 716], 'children': []}, {'type': 'Assignment', 'name': 'output_schema=GoogleSheetsWriteBlock.Output', 'range': [718, 722], 'children': []}, {'type': 'Assignment', 'name': 'disabled=not GOOGLE_OAUTH_IS_CONFIGURED', 'range': [725, 728], 'children': []}, {'type': 'Assignment', 'name': 'test_input={"spreadsheet_id":"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms","range":"Sheet1!A1:B2","values":[["Name","Score"],["Bob","90"]],"credentials":TEST_CREDENTIALS_INPUT}', 'range': [731, 769], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials=TEST_CREDENTIALS', 'range': [774, 776], 'children': []}, {'type': 'Assignment', 'name': 'test_output=[("result",{"updatedCells":4,"updatedColumns":2,"updatedRows":2})]', 'range': [779, 806], 'children': []}, {'type': 'Assignment', 'name': 'test_mock={"_write_sheet":lambda *args,**kwargs:{"updatedCells":4,"updatedColumns":2,"updatedRows":2}}', 'range': [809, 843], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [849, 920], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [853, 853], 'children': []}, {'type': 'Parameter', 'name': 'input_data:Input', 'range': [855, 857], 'children': []}, {'type': 'Parameter', 'name': 'credentials:GoogleCredentials', 'range': [861, 863], 'children': []}, {'type': 'VariableDecl', 'name': 'service=GoogleSheetsReadBlock._build_service(credentials,**kwargs)', 'range': [875, 886], 'children': []}, {'type': 'VariableDecl', 'name': 'result=self._write_sheet(service,input_data.spreadsheet_id,input_data.range,input_data.values)', 'range': [888, 913], 'children': []}, {'type': 'Yield', 'name': 'yield "result",result', 'range': [915, 918], 'children': []}]}, {'type': 'FunctionDecl', 'name': '_write_sheet', 'range': [921, 1011], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [925, 925], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [927, 927], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id:str', 'range': [929, 931], 'children': []}, {'type': 'Parameter', 'name': 'range:str', 'range': [933, 935], 'children': []}, {'type': 'Parameter', 'name': 'values:list[list[str]]', 'range': [937, 945], 'children': []}, {'type': 'VariableDecl', 'name': 'body={"values":values}', 'range': [953, 959], 'children': []}, {'type': 'VariableDecl', 'name': 'result=service.spreadsheets().values().update(spreadsheetId=spreadsheet_id,range=range,valueInputOption="USER_ENTERED",body=body).execute()', 'range': [961, 1006], 'children': []}, {'type': 'Return', 'name': 'return result', 'range': [1009, 1010], 'children': []}]}]}
2025-01-08 10:30:59,423 - INFO - Completed main AST analysis flow
2025-01-08 10:30:59,424 - INFO - Successfully processed chunk
2025-01-08 10:32:11,452 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [70, 565], 'children': [{'type': 'ClassDeclaration', 'name': 'GoogleSheetsReadBlock', 'range': [70, 76], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [72, 74], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [77, 83], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [79, 81], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [84, 95], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [86, 86], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [87, 87], 'children': [{'type': 'FunctionCall', 'name': 'GoogleCredentialsField', 'range': [88, 95], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [89, 95], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [91, 93], 'children': [{'type': 'StringLiteral', 'name': '"https://www.googleapis.com/auth/spreadsheets.readonly"', 'range': [92, 92], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'spreadsheet_id', 'range': [97, 109], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [99, 99], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [100, 100], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [101, 109], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [102, 109], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [104, 106], 'children': [{'type': 'StringLiteral', 'name': '"The ID of the spreadsheet to read from"', 'range': [106, 106], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'range', 'range': [111, 123], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [113, 113], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [114, 114], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [115, 123], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [116, 123], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [118, 120], 'children': [{'type': 'StringLiteral', 'name': '"The A1 notation of the range to read"', 'range': [120, 120], 'children': []}]}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [128, 130], 'children': []}, {'type': 'FieldDeclaration', 'name': 'result', 'range': [133, 151], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [137, 137], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [139, 139], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [142, 142], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [143, 151], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [144, 151], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [146, 148], 'children': [{'type': 'StringLiteral', 'name': '"The data read from the spreadsheet"', 'range': [148, 148], 'children': []}]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [153, 165], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [155, 155], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [156, 156], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [157, 165], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [158, 165], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [160, 162], 'children': [{'type': 'StringLiteral', 'name': '"Error message if any"', 'range': [162, 162], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [168, 319], 'children': [{'type': 'ParameterList', 'name': '', 'range': [170, 172], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [171, 171], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [173, 319], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [175, 181], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [175, 181], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [176, 181], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 213], 'children': [{'type': 'Assignment', 'name': '=', 'range': [183, 183], 'children': [{'type': 'StringLiteral', 'name': '"5724e902-3635-47e9-a108-aaa0263a4988"', 'range': [184, 184], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [187, 189], 'children': [{'type': 'Assignment', 'name': '=', 'range': [188, 188], 'children': [{'type': 'StringLiteral', 'name': '"This block reads data from a Google Sheets spreadsheet."', 'range': [189, 189], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [192, 198], 'children': [{'type': 'Assignment', 'name': '=', 'range': [193, 193], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [194, 198], 'children': [{'type': 'Property', 'name': 'BlockCategory.DATA', 'range': [195, 197], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [201, 206], 'children': [{'type': 'Assignment', 'name': '=', 'range': [202, 202], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Input', 'range': [203, 205], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [208, 212], 'children': [{'type': 'Assignment', 'name': '=', 'range': [209, 209], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Output', 'range': [210, 212], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [215, 219], 'children': [{'type': 'Assignment', 'name': '=', 'range': [216, 216], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [217, 217], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [218, 218], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [221, 240], 'children': [{'type': 'Assignment', 'name': '=', 'range': [222, 222], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [223, 240], 'children': [{'type': 'Property', 'name': 'spreadsheet_id', 'range': [225, 227], 'children': [{'type': 'StringLiteral', 'name': '"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"', 'range': [227, 227], 'children': []}]}, {'type': 'Property', 'name': 'range', 'range': [230, 232], 'children': [{'type': 'StringLiteral', 'name': '"Sheet1!A1:B2"', 'range': [232, 232], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [235, 237], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [237, 237], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [243, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [244, 244], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [245, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [248, 279], 'children': [{'type': 'Assignment', 'name': '=', 'range': [249, 249], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [250, 279], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [252, 276], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [254, 254], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [257, 273], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [259, 263], 'children': [{'type': 'StringLiteral', 'name': '"Name"', 'range': [260, 260], 'children': []}, {'type': 'StringLiteral', 'name': '"Score"', 'range': [262, 262], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [266, 270], 'children': [{'type': 'StringLiteral', 'name': '"Alice"', 'range': [267, 267], 'children': []}, {'type': 'StringLiteral', 'name': '"85"', 'range': [269, 269], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [282, 315], 'children': [{'type': 'Assignment', 'name': '=', 'range': [283, 283], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [284, 315], 'children': [{'type': 'Property', 'name': '_read_sheet', 'range': [286, 288], 'children': [{'type': 'LambdaExpression', 'name': '', 'range': [288, 296], 'children': [{'type': 'ParameterList', 'name': '', 'range': [289, 291], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [290, 290], 'children': []}]}, {'type': 'ParameterList', 'name': '', 'range': [292, 294], 'children': [{'type': 'Parameter', 'name': 'kwargs', 'range': [293, 293], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [295, 296], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [296, 296], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [297, 312], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [298, 302], 'children': [{'type': 'StringLiteral', 'name': '"Name"', 'range': [299, 299], 'children': []}, {'type': 'StringLiteral', 'name': '"Score"', 'range': [301, 301], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [305, 309], 'children': [{'type': 'StringLiteral', 'name': '"Alice"', 'range': [306, 306], 'children': []}, {'type': 'StringLiteral', 'name': '"85"', 'range': [308, 308], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [321, 382], 'children': [{'type': 'ParameterList', 'name': '', 'range': [323, 340], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [325, 325], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [327, 329], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [329, 329], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [333, 335], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [335, 335], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [339, 339], 'children': []}]}, {'type': 'ReturnTypeAnnotation', 'name': 'BlockOutput', 'range': [342, 344], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [345, 382], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [347, 358], 'children': [{'type': 'Assignment', 'name': '=', 'range': [348, 348], 'children': [{'type': 'FunctionCall', 'name': 'self._build_service', 'range': [349, 358], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [352, 358], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [353, 353], 'children': []}, {'type': 'SpreadElement', 'name': '', 'range': [355, 357], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [356, 356], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [360, 375], 'children': [{'type': 'Assignment', 'name': '=', 'range': [361, 361], 'children': [{'type': 'FunctionCall', 'name': 'self._read_sheet', 'range': [362, 375], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [365, 375], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [366, 366], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.spreadsheet_id', 'range': [369, 370], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.range', 'range': [373, 374], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [377, 381], 'children': [{'type': 'StringLiteral', 'name': '"result"', 'range': [378, 378], 'children': []}, {'type': 'Identifier', 'name': 'data', 'range': [380, 380], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_build_service', 'range': [386, 496], 'children': [{'type': 'ParameterList', 'name': '', 'range': [388, 396], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [389, 391], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [391, 391], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [395, 395], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [397, 496], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [399, 482], 'children': [{'type': 'Assignment', 'name': '=', 'range': [400, 400], 'children': [{'type': 'FunctionCall', 'name': 'Credentials', 'range': [401, 482], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [402, 482], 'children': [{'type': 'KeywordArgument', 'name': 'token', 'range': [404, 424], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [406, 423], 'children': [{'type': 'MemberExpression', 'name': 'credentials.access_token.get_secret_value', 'range': [408, 414], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [422, 422], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'refresh_token', 'range': [427, 447], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [429, 446], 'children': [{'type': 'MemberExpression', 'name': 'credentials.refresh_token.get_secret_value', 'range': [431, 437], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [445, 445], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'token_uri', 'range': [450, 452], 'children': [{'type': 'StringLiteral', 'name': '"https://oauth2.googleapis.com/token"', 'range': [452, 452], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'client_id', 'range': [455, 462], 'children': [{'type': 'FunctionCall', 'name': 'kwargs.get', 'range': [459, 462], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [460, 462], 'children': [{'type': 'StringLiteral', 'name': '"client_id"', 'range': [461, 461], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'client_secret', 'range': [465, 472], 'children': [{'type': 'FunctionCall', 'name': 'kwargs.get', 'range': [469, 472], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [470, 472], 'children': [{'type': 'StringLiteral', 'name': '"client_secret"', 'range': [471, 471], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'scopes', 'range': [475, 480], 'children': [{'type': 'MemberExpression', 'name': 'credentials.scopes', 'range': [477, 479], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [484, 495], 'children': [{'type': 'FunctionCall', 'name': 'build', 'range': [485, 495], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [486, 495], 'children': [{'type': 'StringLiteral', 'name': '"sheets"', 'range': [487, 487], 'children': []}, {'type': 'StringLiteral', 'name': '"v4"', 'range': [489, 489], 'children': []}, {'type': 'KeywordArgument', 'name': 'credentials', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'creds', 'range': [493, 493], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '_read_sheet', 'range': [497, 565], 'children': [{'type': 'ParameterList', 'name': '', 'range': [499, 511], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [500, 500], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [502, 502], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id', 'range': [504, 506], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [506, 506], 'children': []}]}, {'type': 'Parameter', 'name': 'range', 'range': [508, 510], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [510, 510], 'children': []}]}]}, {'type': 'ReturnTypeAnnotation', 'name': 'list', 'range': [512, 520], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [514, 516], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [518, 518], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [521, 565], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [523, 530], 'children': [{'type': 'Assignment', 'name': '=', 'range': [524, 524], 'children': [{'type': 'FunctionCall', 'name': 'service.spreadsheets', 'range': [525, 530], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [528, 530], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [531, 553], 'children': [{'type': 'Assignment', 'name': '=', 'range': [532, 532], 'children': [{'type': 'FunctionCall', 'name': 'sheet.values.get', 'range': [533, 553], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [536, 553], 'children': [{'type': 'KeywordArgument', 'name': 'spreadsheetId', 'range': [541, 543], 'children': [{'type': 'Identifier', 'name': 'spreadsheet_id', 'range': [543, 543], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'range', 'range': [545, 547], 'children': [{'type': 'Identifier', 'name': 'range', 'range': [547, 547], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [554, 564], 'children': [{'type': 'FunctionCall', 'name': 'result.get', 'range': [555, 564], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [558, 564], 'children': [{'type': 'StringLiteral', 'name': '"values"', 'range': [559, 559], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [561, 563], 'children': []}]}]}]}]}]}]}
2025-01-08 10:32:11,452 - INFO - Starting Step 4: AST normalization
2025-01-08 10:34:18,965 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [70, 565], 'children': [{'type': 'ClassDecl', 'name': 'GoogleSheetsReadBlock', 'range': [70, 76], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [72, 74], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [77, 83], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [79, 81], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [84, 95], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [86, 86], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [87, 87], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [88, 95], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [89, 95], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [91, 93], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/spreadsheets.readonly"', 'range': [92, 92], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'spreadsheet_id', 'range': [97, 109], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [99, 99], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [100, 100], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [101, 109], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [102, 109], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [104, 106], 'children': [{'type': 'Literal', 'name': '"The ID of the spreadsheet to read from"', 'range': [106, 106], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'range', 'range': [111, 123], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [113, 113], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [114, 114], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [115, 123], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [116, 123], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [118, 120], 'children': [{'type': 'Literal', 'name': '"The A1 notation of the range to read"', 'range': [120, 120], 'children': []}]}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [128, 130], 'children': []}, {'type': 'FieldDecl', 'name': 'result', 'range': [133, 151], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [137, 137], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [139, 139], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [142, 142], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [143, 151], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [144, 151], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [146, 148], 'children': [{'type': 'Literal', 'name': '"The data read from the spreadsheet"', 'range': [148, 148], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [153, 165], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [155, 155], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [156, 156], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [157, 165], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [158, 165], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [160, 162], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [162, 162], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [168, 319], 'children': [{'type': 'ParameterList', 'name': '', 'range': [170, 172], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [171, 171], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [173, 319], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [175, 181], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [175, 181], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [176, 181], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 213], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [183, 183], 'children': [{'type': 'Literal', 'name': '"5724e902-3635-47e9-a108-aaa0263a4988"', 'range': [184, 184], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [187, 189], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [188, 188], 'children': [{'type': 'Literal', 'name': '"This block reads data from a Google Sheets spreadsheet."', 'range': [189, 189], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [192, 198], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [193, 193], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [194, 198], 'children': [{'type': 'Property', 'name': 'BlockCategory.DATA', 'range': [195, 197], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [201, 206], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [202, 202], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Input', 'range': [203, 205], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [208, 212], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [209, 209], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Output', 'range': [210, 212], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [215, 219], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [216, 216], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [217, 217], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [218, 218], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [221, 240], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [222, 222], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [223, 240], 'children': [{'type': 'Property', 'name': 'spreadsheet_id', 'range': [225, 227], 'children': [{'type': 'Literal', 'name': '"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"', 'range': [227, 227], 'children': []}]}, {'type': 'Property', 'name': 'range', 'range': [230, 232], 'children': [{'type': 'Literal', 'name': '"Sheet1!A1:B2"', 'range': [232, 232], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [235, 237], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [237, 237], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [243, 245], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [244, 244], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [245, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [248, 279], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [249, 249], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [250, 279], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [252, 276], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [254, 254], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [257, 273], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [259, 263], 'children': [{'type': 'Literal', 'name': '"Name"', 'range': [260, 260], 'children': []}, {'type': 'Literal', 'name': '"Score"', 'range': [262, 262], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [266, 270], 'children': [{'type': 'Literal', 'name': '"Alice"', 'range': [267, 267], 'children': []}, {'type': 'Literal', 'name': '"85"', 'range': [269, 269], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [282, 315], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [283, 283], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [284, 315], 'children': [{'type': 'Property', 'name': '_read_sheet', 'range': [286, 288], 'children': [{'type': 'LambdaExpression', 'name': '', 'range': [288, 296], 'children': [{'type': 'ParameterList', 'name': '', 'range': [289, 291], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [290, 290], 'children': []}]}, {'type': 'ParameterList', 'name': '', 'range': [292, 294], 'children': [{'type': 'Parameter', 'name': 'kwargs', 'range': [293, 293], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [295, 296], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [296, 296], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [297, 312], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [298, 302], 'children': [{'type': 'Literal', 'name': '"Name"', 'range': [299, 299], 'children': []}, {'type': 'Literal', 'name': '"Score"', 'range': [301, 301], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [305, 309], 'children': [{'type': 'Literal', 'name': '"Alice"', 'range': [306, 306], 'children': []}, {'type': 'Literal', 'name': '"85"', 'range': [308, 308], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [321, 382], 'children': [{'type': 'ParameterList', 'name': '', 'range': [323, 340], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [325, 325], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [327, 329], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [329, 329], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [333, 335], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [335, 335], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [339, 339], 'children': []}]}, {'type': 'ReturnTypeAnnotation', 'name': 'BlockOutput', 'range': [342, 344], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [345, 382], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [347, 358], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [348, 348], 'children': [{'type': 'CallExpression', 'name': 'self._build_service', 'range': [349, 358], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [352, 358], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [353, 353], 'children': []}, {'type': 'SpreadElement', 'name': '', 'range': [355, 357], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [356, 356], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [360, 375], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [361, 361], 'children': [{'type': 'CallExpression', 'name': 'self._read_sheet', 'range': [362, 375], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [365, 375], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [366, 366], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.spreadsheet_id', 'range': [369, 370], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.range', 'range': [373, 374], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [377, 381], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [378, 378], 'children': []}, {'type': 'Identifier', 'name': 'data', 'range': [380, 380], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_build_service', 'range': [386, 496], 'children': [{'type': 'ParameterList', 'name': '', 'range': [388, 396], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [389, 391], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [391, 391], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [395, 395], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [397, 496], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [399, 482], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [400, 400], 'children': [{'type': 'CallExpression', 'name': 'Credentials', 'range': [401, 482], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [402, 482], 'children': [{'type': 'KeywordArgument', 'name': 'token', 'range': [404, 424], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [406, 423], 'children': [{'type': 'MemberExpression', 'name': 'credentials.access_token.get_secret_value', 'range': [408, 414], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [422, 422], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'refresh_token', 'range': [427, 447], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [429, 446], 'children': [{'type': 'MemberExpression', 'name': 'credentials.refresh_token.get_secret_value', 'range': [431, 437], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [445, 445], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'token_uri', 'range': [450, 452], 'children': [{'type': 'Literal', 'name': '"https://oauth2.googleapis.com/token"', 'range': [452, 452], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'client_id', 'range': [455, 462], 'children': [{'type': 'CallExpression', 'name': 'kwargs.get', 'range': [459, 462], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [460, 462], 'children': [{'type': 'Literal', 'name': '"client_id"', 'range': [461, 461], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'client_secret', 'range': [465, 472], 'children': [{'type': 'CallExpression', 'name': 'kwargs.get', 'range': [469, 472], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [470, 472], 'children': [{'type': 'Literal', 'name': '"client_secret"', 'range': [471, 471], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'scopes', 'range': [475, 480], 'children': [{'type': 'MemberExpression', 'name': 'credentials.scopes', 'range': [477, 479], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [484, 495], 'children': [{'type': 'CallExpression', 'name': 'build', 'range': [485, 495], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [486, 495], 'children': [{'type': 'Literal', 'name': '"sheets"', 'range': [487, 487], 'children': []}, {'type': 'Literal', 'name': '"v4"', 'range': [489, 489], 'children': []}, {'type': 'KeywordArgument', 'name': 'credentials', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'creds', 'range': [493, 493], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_read_sheet', 'range': [497, 565], 'children': [{'type': 'ParameterList', 'name': '', 'range': [499, 511], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [500, 500], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [502, 502], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id', 'range': [504, 506], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [506, 506], 'children': []}]}, {'type': 'Parameter', 'name': 'range', 'range': [508, 510], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [510, 510], 'children': []}]}]}, {'type': 'ReturnTypeAnnotation', 'name': 'list', 'range': [512, 520], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [514, 516], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [518, 518], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [521, 565], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [523, 530], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [524, 524], 'children': [{'type': 'CallExpression', 'name': 'service.spreadsheets', 'range': [525, 530], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [528, 530], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [531, 553], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [532, 532], 'children': [{'type': 'CallExpression', 'name': 'sheet.values.get', 'range': [533, 553], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [536, 553], 'children': [{'type': 'KeywordArgument', 'name': 'spreadsheetId', 'range': [541, 543], 'children': [{'type': 'Identifier', 'name': 'spreadsheet_id', 'range': [543, 543], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'range', 'range': [545, 547], 'children': [{'type': 'Identifier', 'name': 'range', 'range': [547, 547], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [554, 564], 'children': [{'type': 'CallExpression', 'name': 'result.get', 'range': [555, 564], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [558, 564], 'children': [{'type': 'Literal', 'name': '"values"', 'range': [559, 559], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [561, 563], 'children': []}]}]}]}]}]}]}
2025-01-08 10:34:18,966 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:36:29,486 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [70, 565], 'children': [{'type': 'ClassDecl', 'name': 'GoogleSheetsReadBlock', 'range': [70, 76], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [72, 74], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [77, 83], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [79, 81], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [84, 95], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentialsInput', 'range': [86, 86], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [87, 87], 'children': [{'type': 'CallExpression', 'name': 'GoogleCredentialsField', 'range': [88, 95], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [89, 95], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [91, 93], 'children': [{'type': 'Literal', 'name': '"https://www.googleapis.com/auth/spreadsheets.readonly"', 'range': [92, 92], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'spreadsheet_id', 'range': [97, 109], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [99, 99], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [100, 100], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [101, 109], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [102, 109], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [104, 106], 'children': [{'type': 'Literal', 'name': '"The ID of the spreadsheet to read from"', 'range': [106, 106], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'range', 'range': [111, 123], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [113, 113], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [114, 114], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [115, 123], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [116, 123], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [118, 120], 'children': [{'type': 'Literal', 'name': '"The A1 notation of the range to read"', 'range': [120, 120], 'children': []}]}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [128, 130], 'children': []}, {'type': 'FieldDecl', 'name': 'result', 'range': [133, 151], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [137, 137], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [139, 139], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [142, 142], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [143, 151], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [144, 151], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [146, 148], 'children': [{'type': 'Literal', 'name': '"The data read from the spreadsheet"', 'range': [148, 148], 'children': []}]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [153, 165], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [155, 155], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [156, 156], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [157, 165], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [158, 165], 'children': [{'type': 'KeywordArgument', 'name': 'description', 'range': [160, 162], 'children': [{'type': 'Literal', 'name': '"Error message if any"', 'range': [162, 162], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [168, 319], 'children': [{'type': 'ParameterList', 'name': '', 'range': [170, 172], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [171, 171], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [173, 319], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [175, 181], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [175, 181], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [176, 181], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [182, 213], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [183, 183], 'children': [{'type': 'Literal', 'name': '"5724e902-3635-47e9-a108-aaa0263a4988"', 'range': [184, 184], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [187, 189], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [188, 188], 'children': [{'type': 'Literal', 'name': '"This block reads data from a Google Sheets spreadsheet."', 'range': [189, 189], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [192, 198], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [193, 193], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [194, 198], 'children': [{'type': 'Property', 'name': 'BlockCategory.DATA', 'range': [195, 197], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [201, 206], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [202, 202], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Input', 'range': [203, 205], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [208, 212], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [209, 209], 'children': [{'type': 'MemberExpression', 'name': 'GoogleSheetsReadBlock.Output', 'range': [210, 212], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [215, 219], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [216, 216], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [217, 217], 'children': [{'type': 'Identifier', 'name': 'GOOGLE_OAUTH_IS_CONFIGURED', 'range': [218, 218], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [221, 240], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [222, 222], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [223, 240], 'children': [{'type': 'Property', 'name': 'spreadsheet_id', 'range': [225, 227], 'children': [{'type': 'Literal', 'name': '"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"', 'range': [227, 227], 'children': []}]}, {'type': 'Property', 'name': 'range', 'range': [230, 232], 'children': [{'type': 'Literal', 'name': '"Sheet1!A1:B2"', 'range': [232, 232], 'children': []}]}, {'type': 'Property', 'name': 'credentials', 'range': [235, 237], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [237, 237], 'children': []}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [243, 245], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [244, 244], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [245, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [248, 279], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [249, 249], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [250, 279], 'children': [{'type': 'TupleLiteral', 'name': '', 'range': [252, 276], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [254, 254], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [257, 273], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [259, 263], 'children': [{'type': 'Literal', 'name': '"Name"', 'range': [260, 260], 'children': []}, {'type': 'Literal', 'name': '"Score"', 'range': [262, 262], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [266, 270], 'children': [{'type': 'Literal', 'name': '"Alice"', 'range': [267, 267], 'children': []}, {'type': 'Literal', 'name': '"85"', 'range': [269, 269], 'children': []}]}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [282, 315], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [283, 283], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [284, 315], 'children': [{'type': 'Property', 'name': '_read_sheet', 'range': [286, 288], 'children': [{'type': 'LambdaExpression', 'name': '', 'range': [288, 296], 'children': [{'type': 'ParameterList', 'name': '', 'range': [289, 291], 'children': [{'type': 'Parameter', 'name': 'args', 'range': [290, 290], 'children': []}]}, {'type': 'ParameterList', 'name': '', 'range': [292, 294], 'children': [{'type': 'Parameter', 'name': 'kwargs', 'range': [293, 293], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [295, 296], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [296, 296], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [297, 312], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [298, 302], 'children': [{'type': 'Literal', 'name': '"Name"', 'range': [299, 299], 'children': []}, {'type': 'Literal', 'name': '"Score"', 'range': [301, 301], 'children': []}]}, {'type': 'ArrayLiteral', 'name': '', 'range': [305, 309], 'children': [{'type': 'Literal', 'name': '"Alice"', 'range': [306, 306], 'children': []}, {'type': 'Literal', 'name': '"85"', 'range': [308, 308], 'children': []}]}]}]}]}]}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [321, 382], 'children': [{'type': 'ParameterList', 'name': '', 'range': [323, 340], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [325, 325], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [327, 329], 'children': [{'type': 'TypeAnnotation', 'name': 'Input', 'range': [329, 329], 'children': []}]}, {'type': 'Parameter', 'name': 'credentials', 'range': [333, 335], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [335, 335], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [339, 339], 'children': []}]}, {'type': 'ReturnTypeAnnotation', 'name': 'BlockOutput', 'range': [342, 344], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [345, 382], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [347, 358], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [348, 348], 'children': [{'type': 'CallExpression', 'name': 'self._build_service', 'range': [349, 358], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [352, 358], 'children': [{'type': 'Identifier', 'name': 'credentials', 'range': [353, 353], 'children': []}, {'type': 'SpreadElement', 'name': '', 'range': [355, 357], 'children': [{'type': 'Identifier', 'name': 'kwargs', 'range': [356, 356], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [360, 375], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [361, 361], 'children': [{'type': 'CallExpression', 'name': 'self._read_sheet', 'range': [362, 375], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [365, 375], 'children': [{'type': 'Identifier', 'name': 'service', 'range': [366, 366], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.spreadsheet_id', 'range': [369, 370], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.range', 'range': [373, 374], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [377, 381], 'children': [{'type': 'Literal', 'name': '"result"', 'range': [378, 378], 'children': []}, {'type': 'Identifier', 'name': 'data', 'range': [380, 380], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '_build_service', 'range': [386, 496], 'children': [{'type': 'ParameterList', 'name': '', 'range': [388, 396], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [389, 391], 'children': [{'type': 'TypeAnnotation', 'name': 'GoogleCredentials', 'range': [391, 391], 'children': []}]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [395, 395], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [397, 496], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [399, 482], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [400, 400], 'children': [{'type': 'CallExpression', 'name': 'Credentials', 'range': [401, 482], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [402, 482], 'children': [{'type': 'KeywordArgument', 'name': 'token', 'range': [404, 424], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [406, 423], 'children': [{'type': 'MemberExpression', 'name': 'credentials.access_token.get_secret_value', 'range': [408, 414], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [422, 422], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'refresh_token', 'range': [427, 447], 'children': [{'type': 'ConditionalExpression', 'name': '', 'range': [429, 446], 'children': [{'type': 'MemberExpression', 'name': 'credentials.refresh_token.get_secret_value', 'range': [431, 437], 'children': []}, {'type': 'Identifier', 'name': 'None', 'range': [445, 445], 'children': []}]}]}, {'type': 'KeywordArgument', 'name': 'token_uri', 'range': [450, 452], 'children': [{'type': 'Literal', 'name': '"https://oauth2.googleapis.com/token"', 'range': [452, 452], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'client_id', 'range': [455, 462], 'children': [{'type': 'CallExpression', 'name': 'kwargs.get', 'range': [459, 462], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [460, 462], 'children': [{'type': 'Literal', 'name': '"client_id"', 'range': [461, 461], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'client_secret', 'range': [465, 472], 'children': [{'type': 'CallExpression', 'name': 'kwargs.get', 'range': [469, 472], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [470, 472], 'children': [{'type': 'Literal', 'name': '"client_secret"', 'range': [471, 471], 'children': []}]}]}]}, {'type': 'KeywordArgument', 'name': 'scopes', 'range': [475, 480], 'children': [{'type': 'MemberExpression', 'name': 'credentials.scopes', 'range': [477, 479], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [484, 495], 'children': [{'type': 'CallExpression', 'name': 'build', 'range': [485, 495], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [486, 495], 'children': [{'type': 'Literal', 'name': '"sheets"', 'range': [487, 487], 'children': []}, {'type': 'Literal', 'name': '"v4"', 'range': [489, 489], 'children': []}, {'type': 'KeywordArgument', 'name': 'credentials', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'creds', 'range': [493, 493], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '_read_sheet', 'range': [497, 565], 'children': [{'type': 'ParameterList', 'name': '', 'range': [499, 511], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [500, 500], 'children': []}, {'type': 'Parameter', 'name': 'service', 'range': [502, 502], 'children': []}, {'type': 'Parameter', 'name': 'spreadsheet_id', 'range': [504, 506], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [506, 506], 'children': []}]}, {'type': 'Parameter', 'name': 'range', 'range': [508, 510], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [510, 510], 'children': []}]}]}, {'type': 'ReturnTypeAnnotation', 'name': 'list', 'range': [512, 520], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [514, 516], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [518, 518], 'children': []}]}]}, {'type': 'BlockStatement', 'name': '', 'range': [521, 565], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [523, 530], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [524, 524], 'children': [{'type': 'CallExpression', 'name': 'service.spreadsheets', 'range': [525, 530], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [528, 530], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [531, 553], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [532, 532], 'children': [{'type': 'CallExpression', 'name': 'sheet.values.get', 'range': [533, 553], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [536, 553], 'children': [{'type': 'KeywordArgument', 'name': 'spreadsheetId', 'range': [541, 543], 'children': [{'type': 'Identifier', 'name': 'spreadsheet_id', 'range': [543, 543], 'children': []}]}, {'type': 'KeywordArgument', 'name': 'range', 'range': [545, 547], 'children': [{'type': 'Identifier', 'name': 'range', 'range': [547, 547], 'children': []}]}]}]}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [554, 564], 'children': [{'type': 'CallExpression', 'name': 'result.get', 'range': [555, 564], 'children': [{'type': 'ArgumentList', 'name': '', 'range': [558, 564], 'children': [{'type': 'Literal', 'name': '"values"', 'range': [559, 559], 'children': []}, {'type': 'ArrayLiteral', 'name': '', 'range': [561, 563], 'children': []}]}]}]}]}]}]}
2025-01-08 10:36:29,486 - INFO - Completed main AST analysis flow
2025-01-08 10:36:29,490 - INFO - Successfully processed chunk
2025-01-08 10:36:29,537 - INFO - Starting code generation from AST
2025-01-08 10:36:55,335 - INFO - Successfully generated code from AST
2025-01-08 10:36:55,336 - INFO - Starting static code similarity comparison
2025-01-08 10:36:55,360 - INFO - Static similarity result: {'final_score': 91.99, 'length_similarity': 93.4, 'token_similarity': 82.5, 'structure_similarity': 92.9, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
