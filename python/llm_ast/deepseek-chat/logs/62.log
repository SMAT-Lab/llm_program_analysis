2025-01-08 10:27:27,292 - INFO - Processing sample 62
2025-01-08 10:27:27,292 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:35,662 - INFO - Successfully split code into 8 top-level declarations
2025-01-08 10:27:35,675 - INFO - Processing chunk #0 (size=285 chars, start_index=0)
2025-01-08 10:27:35,676 - INFO - Processing chunk with 285 chars starting at index 0
2025-01-08 10:27:35,676 - INFO - Processing chunk #1 (size=3197 chars, start_index=49)
2025-01-08 10:27:35,676 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,678 - INFO - Processing chunk #2 (size=254 chars, start_index=541)
2025-01-08 10:27:35,678 - INFO - Processing chunk with 3197 chars starting at index 49
2025-01-08 10:27:35,679 - INFO - Processing chunk #3 (size=315 chars, start_index=572)
2025-01-08 10:27:35,679 - INFO - Tokenized code into 49 tokens
2025-01-08 10:27:35,680 - INFO - Processing chunk #4 (size=883 chars, start_index=614)
2025-01-08 10:27:35,680 - INFO - Processing chunk with 254 chars starting at index 541
2025-01-08 10:27:35,680 - INFO - Processing chunk #5 (size=609 chars, start_index=728)
2025-01-08 10:27:35,680 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,681 - INFO - Processing chunk with 315 chars starting at index 572
2025-01-08 10:27:35,681 - INFO - Processing chunk #6 (size=690 chars, start_index=863)
2025-01-08 10:27:35,681 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,682 - INFO - Processing chunk with 883 chars starting at index 614
2025-01-08 10:27:35,682 - INFO - Processing chunk #7 (size=363 chars, start_index=949)
2025-01-08 10:27:35,684 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,692 - INFO - Processing chunk with 609 chars starting at index 728
2025-01-08 10:27:35,697 - INFO - Tokenized code into 492 tokens
2025-01-08 10:27:35,698 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,704 - INFO - Processing chunk with 690 chars starting at index 863
2025-01-08 10:27:35,723 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,778 - INFO - Tokenized code into 114 tokens
2025-01-08 10:27:35,760 - INFO - Tokenized code into 31 tokens
2025-01-08 10:27:35,800 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,762 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,771 - INFO - Tokenized code into 42 tokens
2025-01-08 10:27:35,772 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,778 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,738 - INFO - Processing chunk with 363 chars starting at index 949
2025-01-08 10:27:35,835 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,836 - INFO - Tokenized code into 66 tokens
2025-01-08 10:27:35,814 - INFO - Tokenized code into 86 tokens
2025-01-08 10:27:35,761 - INFO - Starting main AST analysis flow
2025-01-08 10:27:35,840 - INFO - Tokenized code into 135 tokens
2025-01-08 10:27:35,841 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,840 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,804 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:35,836 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:42,811 - INFO - Step 1 result: {'type': 'Program', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': []}
2025-01-08 10:27:42,815 - INFO - Step 1 result: {'type': 'Program', 'name': 'extract_video_id', 'range': [728, 862], 'children': []}
2025-01-08 10:27:42,855 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:42,868 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:43,331 - INFO - Step 1 result: {'type': 'Program', 'name': 'get_transcript', 'range': [863, 948], 'children': []}
2025-01-08 10:27:43,332 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:43,337 - INFO - Step 1 result: {'type': 'Program', 'name': '__init__', 'range': [614, 727], 'children': []}
2025-01-08 10:27:43,360 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:45,379 - INFO - Step 1 result: {'type': 'Program', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'FieldDeclaration', 'name': 'video_id', 'range': [579, 588], 'children': []}, {'type': 'FieldDeclaration', 'name': 'transcript', 'range': [590, 599], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [601, 612], 'children': []}]}]}
2025-01-08 10:27:45,725 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:46,498 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 48], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 8], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [10, 14], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 37], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 46], 'children': []}]}
2025-01-08 10:27:46,498 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:48,075 - INFO - Step 1 result: {'type': 'Program', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'BlockSchema', 'name': '', 'range': [543, 545], 'children': []}, {'type': 'FieldDeclaration', 'name': 'youtube_url', 'range': [548, 570], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [549, 550], 'children': []}, {'type': 'SchemaField', 'name': '', 'range': [552, 570], 'children': [{'type': 'Argument', 'name': 'title', 'range': [555, 557], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [560, 562], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [565, 567], 'children': []}]}]}]}]}
2025-01-08 10:27:48,330 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:50,147 - INFO - Step 1 result: {'type': 'Program', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'FunctionDeclaration', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [952, 952]}, {'type': 'Parameter', 'name': 'input_data', 'range': [954, 954]}, {'type': 'Parameter', 'name': 'kwargs', 'range': [960, 960]}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [964, 964]}, {'type': 'Statement', 'name': 'video_id', 'range': [967, 976]}, {'type': 'Statement', 'name': 'yield', 'range': [978, 981]}, {'type': 'Statement', 'name': 'transcript', 'range': [984, 991]}, {'type': 'Statement', 'name': 'formatter', 'range': [993, 997]}, {'type': 'Statement', 'name': 'transcript_text', 'range': [999, 1006]}, {'type': 'Statement', 'name': 'yield', 'range': [1009, 1012]}]}]}
2025-01-08 10:27:50,187 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:01,678 - INFO - Step 2 result: {'type': 'Program', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'FunctionDeclaration', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'Parameter', 'name': 'video_id', 'range': [866, 868], 'children': []}, {'type': 'TryStatement', 'name': '', 'range': [872, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [874, 937], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript_list', 'range': [875, 882], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [885, 896], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [886, 887], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [889, 896], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [890, 895], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [898, 936], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript', 'range': [899, 901], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [903, 936], 'children': [{'type': 'VariableDeclaration', 'name': 'first_transcript', 'range': [904, 917], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [919, 935], 'children': []}]}]}]}, {'type': 'CatchClause', 'name': '', 'range': [938, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [941, 948], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [942, 947], 'children': []}]}]}]}]}]}
2025-01-08 10:28:01,679 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:05,586 - INFO - Step 2 result: {'type': 'Program', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'BlockSchema', 'name': '', 'range': [543, 545], 'children': []}, {'type': 'FieldDeclaration', 'name': 'youtube_url', 'range': [548, 570], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [549, 550], 'children': []}, {'type': 'SchemaField', 'name': '', 'range': [552, 570], 'children': [{'type': 'Argument', 'name': 'title', 'range': [555, 557], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [560, 562], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [565, 567], 'children': []}]}]}]}]}
2025-01-08 10:28:07,067 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:07,711 - INFO - Step 2 result: {'type': 'Program', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'ParameterList', 'name': '', 'range': [616, 618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [617, 617], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [619, 727], 'children': [{'type': 'SuperCall', 'name': '', 'range': [621, 626], 'children': [{'type': 'CallExpression', 'name': '', 'range': [622, 625], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [628, 630], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [633, 638], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [640, 645], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [647, 650], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [652, 659], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [661, 668], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [670, 693], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [695, 724], 'children': []}]}]}]}
2025-01-08 10:28:07,731 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:10,285 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 8], 'children': [{'type': 'ImportFrom', 'name': 'urllib.parse', 'range': [0, 3], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [4, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'parse_qs', 'range': [5, 5], 'children': []}, {'type': 'ImportSpecifier', 'name': 'urlparse', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [10, 14], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api', 'range': [10, 11], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [12, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'YouTubeTranscriptApi', 'range': [13, 13], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api.formatters', 'range': [15, 18], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [19, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'TextFormatter', 'range': [20, 20], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 37], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [23, 28], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [29, 36], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [34, 34], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [36, 36], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 46], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [38, 43], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [44, 45], 'children': [{'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [45, 45], 'children': []}]}]}]}
2025-01-08 10:28:10,285 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:10,473 - INFO - Step 2 result: {'type': 'Program', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'FieldDeclaration', 'name': 'video_id', 'range': [579, 588], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [581, 581], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [582, 582], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [583, 588], 'children': [{'type': 'Argument', 'name': 'description', 'range': [585, 587], 'children': [{'type': 'StringLiteral', 'name': '"The extracted YouTube video ID"', 'range': [587, 587], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'transcript', 'range': [590, 599], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [592, 592], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [593, 593], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [594, 599], 'children': [{'type': 'Argument', 'name': 'description', 'range': [596, 598], 'children': [{'type': 'StringLiteral', 'name': '"The transcribed text of the video"', 'range': [598, 598], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [601, 612], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [603, 603], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [604, 604], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [605, 612], 'children': [{'type': 'Argument', 'name': 'description', 'range': [608, 610], 'children': [{'type': 'StringLiteral', 'name': '"Any error message if the transcription fails"', 'range': [610, 610], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:10,473 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:19,249 - INFO - Step 3 result: {'type': 'Program', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'BlockSchema', 'name': '', 'range': [543, 545], 'children': []}, {'type': 'FieldDeclaration', 'name': 'youtube_url', 'range': [548, 570], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [549, 550], 'children': []}, {'type': 'SchemaField', 'name': '', 'range': [552, 570], 'children': [{'type': 'Argument', 'name': 'title', 'range': [555, 557], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [560, 562], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [565, 567], 'children': []}]}]}]}]}
2025-01-08 10:28:19,250 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:20,608 - INFO - Step 3 result: {'type': 'Program', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'FunctionDeclaration', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'Parameter', 'name': 'video_id', 'range': [866, 868], 'children': []}, {'type': 'TryStatement', 'name': '', 'range': [872, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [874, 937], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript_list', 'range': [875, 882], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [885, 896], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [886, 887], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [889, 896], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [890, 895], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [898, 936], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript', 'range': [899, 901], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [903, 936], 'children': [{'type': 'VariableDeclaration', 'name': 'first_transcript', 'range': [904, 917], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [919, 935], 'children': []}]}]}]}, {'type': 'CatchClause', 'name': '', 'range': [938, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [941, 948], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [942, 947], 'children': []}]}]}]}]}]}
2025-01-08 10:28:20,608 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:23,311 - INFO - Step 3 result: {'type': 'Program', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'ParameterList', 'name': '', 'range': [616, 618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [617, 617], 'children': []}]}, {'type': 'Block', 'name': '', 'range': [619, 727], 'children': [{'type': 'SuperCall', 'name': '', 'range': [621, 626], 'children': [{'type': 'CallExpression', 'name': '', 'range': [622, 625], 'children': []}]}, {'type': 'Assignment', 'name': 'id', 'range': [628, 630], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [633, 638], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [640, 645], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [647, 650], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [652, 659], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [661, 668], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [670, 693], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [695, 724], 'children': []}]}]}]}
2025-01-08 10:28:23,312 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:27,350 - INFO - Step 4 result: {'type': 'Program', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'Block', 'name': '', 'range': [543, 545], 'children': []}, {'type': 'FieldDecl', 'name': 'youtube_url', 'range': [548, 570], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [549, 550], 'children': []}, {'type': 'SchemaField', 'name': '', 'range': [552, 570], 'children': [{'type': 'Argument', 'name': 'title', 'range': [555, 557], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [560, 562], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [565, 567], 'children': []}]}]}]}]}
2025-01-08 10:28:27,350 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:27,727 - INFO - Step 2 result: {'type': 'Program', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'FunctionDeclaration', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'Parameter', 'name': 'url', 'range': [731, 733], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [737, 737], 'children': []}, {'type': 'Block', 'name': '', 'range': [739, 862], 'children': [{'type': 'VariableDeclaration', 'name': 'parsed_url', 'range': [740, 745], 'children': [{'type': 'FunctionCall', 'name': 'urlparse', 'range': [742, 745], 'children': [{'type': 'Argument', 'name': 'url', 'range': [744, 744], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [747, 764], 'children': [{'type': 'Condition', 'name': '', 'range': [748, 753], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [751, 752], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [748, 750], 'children': []}, {'type': 'Literal', 'name': '"youtu.be"', 'range': [753, 753], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [755, 764], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [756, 763], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [757, 759], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [761, 761], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [765, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [766, 774], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [769, 769], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [766, 768], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [770, 774], 'children': [{'type': 'Literal', 'name': '"www.youtube.com"', 'range': [771, 771], 'children': []}, {'type': 'Literal', 'name': '"youtube.com"', 'range': [773, 773], 'children': []}]}]}]}, {'type': 'Block', 'name': '', 'range': [776, 803], 'children': [{'type': 'IfStatement', 'name': '', 'range': [777, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [778, 783], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [781, 782], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [778, 780], 'children': []}, {'type': 'Literal', 'name': '"/watch"', 'range': [783, 783], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [785, 803], 'children': [{'type': 'VariableDeclaration', 'name': 'p', 'range': [786, 793], 'children': [{'type': 'FunctionCall', 'name': 'parse_qs', 'range': [788, 793], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [790, 792], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [795, 802], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [796, 799], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [801, 801], 'children': []}]}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [804, 829], 'children': [{'type': 'Condition', 'name': '', 'range': [805, 814], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [812, 813], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:7]', 'range': [805, 811], 'children': []}, {'type': 'Literal', 'name': '"/embed/"', 'range': [814, 814], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [816, 829], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [817, 828], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [818, 827], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [830, 855], 'children': [{'type': 'Condition', 'name': '', 'range': [831, 840], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [838, 839], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:3]', 'range': [831, 837], 'children': []}, {'type': 'Literal', 'name': '"/v/"', 'range': [840, 840], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [842, 855], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [843, 854], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [844, 853], 'children': []}]}]}]}, {'type': 'RaiseStatement', 'name': '', 'range': [856, 861], 'children': [{'type': 'FunctionCall', 'name': 'ValueError', 'range': [857, 861], 'children': [{'type': 'Argument', 'name': 'f"Invalid YouTube URL: {url}"', 'range': [859, 860], 'children': []}]}]}]}]}]}
2025-01-08 10:28:27,728 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:27,870 - INFO - Step 2 result: {'type': 'Program', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'FunctionDeclaration', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [952, 952], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [954, 954], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [960, 960], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [964, 964], 'children': []}, {'type': 'Statement', 'name': 'video_id', 'range': [967, 976], 'children': [{'type': 'Assignment', 'name': '=', 'range': [968, 968], 'children': [{'type': 'Identifier', 'name': 'video_id', 'range': [967, 967], 'children': []}, {'type': 'MethodCall', 'name': 'extract_video_id', 'range': [971, 976], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [969, 969], 'children': []}, {'type': 'PropertyAccess', 'name': '.', 'range': [970, 970], 'children': []}, {'type': 'Identifier', 'name': 'extract_video_id', 'range': [971, 971], 'children': []}, {'type': 'ArgumentList', 'name': '(', 'range': [972, 976], 'children': [{'type': 'PropertyAccess', 'name': '.', 'range': [974, 974], 'children': []}, {'type': 'Identifier', 'name': 'youtube_url', 'range': [975, 975], 'children': []}]}]}]}]}, {'type': 'Statement', 'name': 'yield', 'range': [978, 981], 'children': [{'type': 'Yield', 'name': 'yield', 'range': [978, 978], 'children': [{'type': 'StringLiteral', 'name': '"video_id"', 'range': [979, 979], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [981, 981], 'children': []}]}]}, {'type': 'Statement', 'name': 'transcript', 'range': [984, 991], 'children': [{'type': 'Assignment', 'name': '=', 'range': [985, 985], 'children': [{'type': 'Identifier', 'name': 'transcript', 'range': [984, 984], 'children': []}, {'type': 'MethodCall', 'name': 'get_transcript', 'range': [988, 991], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [986, 986], 'children': []}, {'type': 'PropertyAccess', 'name': '.', 'range': [987, 987], 'children': []}, {'type': 'Identifier', 'name': 'get_transcript', 'range': [988, 988], 'children': []}, {'type': 'ArgumentList', 'name': '(', 'range': [989, 991], 'children': [{'type': 'Identifier', 'name': 'video_id', 'range': [990, 990], 'children': []}]}]}]}]}, {'type': 'Statement', 'name': 'formatter', 'range': [993, 997], 'children': [{'type': 'Assignment', 'name': '=', 'range': [994, 994], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [993, 993], 'children': []}, {'type': 'ConstructorCall', 'name': 'TextFormatter', 'range': [995, 997], 'children': [{'type': 'Identifier', 'name': 'TextFormatter', 'range': [995, 995], 'children': []}, {'type': 'ArgumentList', 'name': '(', 'range': [996, 997], 'children': []}]}]}]}, {'type': 'Statement', 'name': 'transcript_text', 'range': [999, 1006], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1000, 1000], 'children': [{'type': 'Identifier', 'name': 'transcript_text', 'range': [999, 999], 'children': []}, {'type': 'MethodCall', 'name': 'format_transcript', 'range': [1003, 1006], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [1001, 1001], 'children': []}, {'type': 'PropertyAccess', 'name': '.', 'range': [1002, 1002], 'children': []}, {'type': 'Identifier', 'name': 'format_transcript', 'range': [1003, 1003], 'children': []}, {'type': 'ArgumentList', 'name': '(', 'range': [1004, 1006], 'children': [{'type': 'Identifier', 'name': 'transcript', 'range': [1005, 1005], 'children': []}]}]}]}]}, {'type': 'Statement', 'name': 'yield', 'range': [1009, 1012], 'children': [{'type': 'Yield', 'name': 'yield', 'range': [1009, 1009], 'children': [{'type': 'StringLiteral', 'name': '"transcript"', 'range': [1010, 1010], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [1012, 1012], 'children': []}]}]}]}]}
2025-01-08 10:28:27,870 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:31,228 - INFO - Step 3 result: {'type': 'Program', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'FieldDeclaration', 'name': 'video_id', 'range': [579, 588], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [581, 581]}, {'type': 'Assignment', 'name': '=', 'range': [582, 582], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [583, 588], 'children': [{'type': 'Argument', 'name': 'description', 'range': [585, 587], 'children': [{'type': 'StringLiteral', 'name': '"The extracted YouTube video ID"', 'range': [587, 587]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'transcript', 'range': [590, 599], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [592, 592]}, {'type': 'Assignment', 'name': '=', 'range': [593, 593], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [594, 599], 'children': [{'type': 'Argument', 'name': 'description', 'range': [596, 598], 'children': [{'type': 'StringLiteral', 'name': '"The transcribed text of the video"', 'range': [598, 598]}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [601, 612], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [603, 603]}, {'type': 'Assignment', 'name': '=', 'range': [604, 604], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [605, 612], 'children': [{'type': 'Argument', 'name': 'description', 'range': [608, 610], 'children': [{'type': 'StringLiteral', 'name': '"Any error message if the transcription fails"', 'range': [610, 610]}]}]}]}]}]}]}
2025-01-08 10:28:31,228 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:33,545 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 8], 'children': [{'type': 'ImportFrom', 'name': 'urllib.parse', 'range': [0, 3], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [4, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'parse_qs', 'range': [5, 5], 'children': []}, {'type': 'ImportSpecifier', 'name': 'urlparse', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [10, 14], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api', 'range': [10, 11], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [12, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'YouTubeTranscriptApi', 'range': [13, 13], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api.formatters', 'range': [15, 18], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [19, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'TextFormatter', 'range': [20, 20], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 37], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [23, 28], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [29, 36], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [34, 34], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [36, 36], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 46], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [38, 43], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [44, 45], 'children': [{'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [45, 45], 'children': []}]}]}]}
2025-01-08 10:28:33,545 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:34,970 - INFO - Step 4 result: {'type': 'Program', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'FunctionDecl', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'Parameter', 'name': 'video_id', 'range': [866, 868], 'children': []}, {'type': 'TryStatement', 'name': '', 'range': [872, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [874, 937], 'children': [{'type': 'VariableDecl', 'name': 'transcript_list', 'range': [875, 882], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [885, 896], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [886, 887], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [889, 896], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [890, 895], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [898, 936], 'children': [{'type': 'VariableDecl', 'name': 'transcript', 'range': [899, 901], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [903, 936], 'children': [{'type': 'VariableDecl', 'name': 'first_transcript', 'range': [904, 917], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [919, 935], 'children': []}]}]}]}, {'type': 'CatchClause', 'name': '', 'range': [938, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [941, 948], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [942, 947], 'children': []}]}]}]}]}]}
2025-01-08 10:28:34,970 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:35,213 - INFO - Step 5 result: {'type': 'Program', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [541, 571], 'children': [{'type': 'Block', 'name': '', 'range': [543, 545], 'children': []}, {'type': 'FieldDecl', 'name': 'youtube_url', 'range': [548, 570], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [549, 550], 'children': []}, {'type': 'SchemaField', 'name': '', 'range': [552, 570], 'children': [{'type': 'Argument', 'name': 'title', 'range': [555, 557], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [560, 562], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [565, 567], 'children': []}]}]}]}]}
2025-01-08 10:28:35,213 - INFO - Completed main AST analysis flow
2025-01-08 10:28:35,213 - INFO - Successfully processed chunk
2025-01-08 10:28:39,667 - INFO - Step 4 result: {'type': 'Program', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'ParameterList', 'name': '', 'range': [616, 618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [617, 617], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [619, 727], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [621, 626], 'children': [{'type': 'CallExpression', 'name': '', 'range': [622, 625], 'children': [{'type': 'Super', 'name': '', 'range': [622, 625], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [628, 630], 'children': [{'type': 'AssignmentExpression', 'name': 'id', 'range': [628, 630], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [633, 638], 'children': [{'type': 'AssignmentExpression', 'name': 'input_schema', 'range': [633, 638], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [640, 645], 'children': [{'type': 'AssignmentExpression', 'name': 'output_schema', 'range': [640, 645], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [647, 650], 'children': [{'type': 'AssignmentExpression', 'name': 'description', 'range': [647, 650], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [652, 659], 'children': [{'type': 'AssignmentExpression', 'name': 'categories', 'range': [652, 659], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [661, 668], 'children': [{'type': 'AssignmentExpression', 'name': 'test_input', 'range': [661, 668], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [670, 693], 'children': [{'type': 'AssignmentExpression', 'name': 'test_output', 'range': [670, 693], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [695, 724], 'children': [{'type': 'AssignmentExpression', 'name': 'test_mock', 'range': [695, 724], 'children': []}]}]}]}]}
2025-01-08 10:28:39,667 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:46,254 - INFO - Step 4 result: {'type': 'Program', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'ClassDecl', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'FieldDecl', 'name': 'video_id', 'range': [579, 588], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [581, 581]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [582, 582], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [583, 588], 'children': [{'type': 'Argument', 'name': 'description', 'range': [585, 587], 'children': [{'type': 'Literal', 'name': '"The extracted YouTube video ID"', 'range': [587, 587]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'transcript', 'range': [590, 599], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [592, 592]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [593, 593], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [594, 599], 'children': [{'type': 'Argument', 'name': 'description', 'range': [596, 598], 'children': [{'type': 'Literal', 'name': '"The transcribed text of the video"', 'range': [598, 598]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [601, 612], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [603, 603]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [604, 604], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [605, 612], 'children': [{'type': 'Argument', 'name': 'description', 'range': [608, 610], 'children': [{'type': 'Literal', 'name': '"Any error message if the transcription fails"', 'range': [610, 610]}]}]}]}]}]}]}
2025-01-08 10:28:46,254 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:47,666 - INFO - Step 5 result: {'type': 'Program', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'FunctionDecl', 'name': 'get_transcript', 'range': [863, 948], 'children': [{'type': 'Parameter', 'name': 'video_id', 'range': [866, 868], 'children': []}, {'type': 'TryStatement', 'name': '', 'range': [872, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [874, 937], 'children': [{'type': 'VariableDecl', 'name': 'transcript_list', 'range': [875, 882], 'children': []}, {'type': 'IfStatement', 'name': '', 'range': [885, 896], 'children': [{'type': 'UnaryExpression', 'name': 'not', 'range': [886, 887], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [889, 896], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [890, 895], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [898, 936], 'children': [{'type': 'VariableDecl', 'name': 'transcript', 'range': [899, 901], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [903, 936], 'children': [{'type': 'VariableDecl', 'name': 'first_transcript', 'range': [904, 917], 'children': []}, {'type': 'ReturnStatement', 'name': '', 'range': [919, 935], 'children': []}]}]}]}, {'type': 'CatchClause', 'name': '', 'range': [938, 948], 'children': [{'type': 'BlockStatement', 'name': '', 'range': [941, 948], 'children': [{'type': 'ThrowStatement', 'name': '', 'range': [942, 947], 'children': []}]}]}]}]}]}
2025-01-08 10:28:47,666 - INFO - Completed main AST analysis flow
2025-01-08 10:28:47,666 - INFO - Successfully processed chunk
2025-01-08 10:28:51,007 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 8], 'children': [{'type': 'ImportFrom', 'name': 'urllib.parse', 'range': [0, 3], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [4, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'parse_qs', 'range': [5, 5], 'children': []}, {'type': 'ImportSpecifier', 'name': 'urlparse', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [10, 14], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api', 'range': [10, 11], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [12, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'YouTubeTranscriptApi', 'range': [13, 13], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api.formatters', 'range': [15, 18], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [19, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'TextFormatter', 'range': [20, 20], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 37], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [23, 28], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [29, 36], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [34, 34], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [36, 36], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 46], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [38, 43], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [44, 45], 'children': [{'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [45, 45], 'children': []}]}]}]}
2025-01-08 10:28:51,007 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:55,547 - INFO - Step 3 result: {'type': 'Program', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'FunctionDeclaration', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [952, 952], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [954, 954], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [960, 960], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [964, 964], 'children': []}, {'type': 'Statement', 'name': 'video_id', 'range': [967, 976], 'children': [{'type': 'Assignment', 'name': '=', 'range': [968, 968], 'children': [{'type': 'Identifier', 'name': 'video_id', 'range': [967, 967], 'children': []}, {'type': 'MethodCall', 'name': 'extract_video_id', 'range': [971, 976], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [969, 969], 'children': []}, {'type': 'Identifier', 'name': 'extract_video_id', 'range': [971, 971], 'children': []}, {'type': 'Identifier', 'name': 'youtube_url', 'range': [975, 975], 'children': []}]}]}]}, {'type': 'Statement', 'name': 'yield', 'range': [978, 981], 'children': [{'type': 'Yield', 'name': 'yield', 'range': [978, 978], 'children': [{'type': 'StringLiteral', 'name': '"video_id"', 'range': [979, 979], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [981, 981], 'children': []}]}]}, {'type': 'Statement', 'name': 'transcript', 'range': [984, 991], 'children': [{'type': 'Assignment', 'name': '=', 'range': [985, 985], 'children': [{'type': 'Identifier', 'name': 'transcript', 'range': [984, 984], 'children': []}, {'type': 'MethodCall', 'name': 'get_transcript', 'range': [988, 991], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [986, 986], 'children': []}, {'type': 'Identifier', 'name': 'get_transcript', 'range': [988, 988], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [990, 990], 'children': []}]}]}]}, {'type': 'Statement', 'name': 'formatter', 'range': [993, 997], 'children': [{'type': 'Assignment', 'name': '=', 'range': [994, 994], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [993, 993], 'children': []}, {'type': 'ConstructorCall', 'name': 'TextFormatter', 'range': [995, 997], 'children': [{'type': 'Identifier', 'name': 'TextFormatter', 'range': [995, 995], 'children': []}]}]}]}, {'type': 'Statement', 'name': 'transcript_text', 'range': [999, 1006], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1000, 1000], 'children': [{'type': 'Identifier', 'name': 'transcript_text', 'range': [999, 999], 'children': []}, {'type': 'MethodCall', 'name': 'format_transcript', 'range': [1003, 1006], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [1001, 1001], 'children': []}, {'type': 'Identifier', 'name': 'format_transcript', 'range': [1003, 1003], 'children': []}, {'type': 'Identifier', 'name': 'transcript', 'range': [1005, 1005], 'children': []}]}]}]}, {'type': 'Statement', 'name': 'yield', 'range': [1009, 1012], 'children': [{'type': 'Yield', 'name': 'yield', 'range': [1009, 1009], 'children': [{'type': 'StringLiteral', 'name': '"transcript"', 'range': [1010, 1010], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [1012, 1012], 'children': []}]}]}]}]}
2025-01-08 10:28:55,547 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:55,807 - INFO - Step 5 result: {'type': 'Program', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [614, 727], 'children': [{'type': 'ParameterList', 'name': '', 'range': [616, 618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [617, 617], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [619, 727], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [621, 626], 'children': [{'type': 'CallExpression', 'name': '', 'range': [622, 625], 'children': [{'type': 'Super', 'name': '', 'range': [622, 625], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [628, 630], 'children': [{'type': 'AssignmentExpression', 'name': 'id', 'range': [628, 630], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [633, 638], 'children': [{'type': 'AssignmentExpression', 'name': 'input_schema', 'range': [633, 638], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [640, 645], 'children': [{'type': 'AssignmentExpression', 'name': 'output_schema', 'range': [640, 645], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [647, 650], 'children': [{'type': 'AssignmentExpression', 'name': 'description', 'range': [647, 650], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [652, 659], 'children': [{'type': 'AssignmentExpression', 'name': 'categories', 'range': [652, 659], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [661, 668], 'children': [{'type': 'AssignmentExpression', 'name': 'test_input', 'range': [661, 668], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [670, 693], 'children': [{'type': 'AssignmentExpression', 'name': 'test_output', 'range': [670, 693], 'children': []}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [695, 724], 'children': [{'type': 'AssignmentExpression', 'name': 'test_mock', 'range': [695, 724], 'children': []}]}]}]}]}
2025-01-08 10:28:55,807 - INFO - Completed main AST analysis flow
2025-01-08 10:28:55,807 - INFO - Successfully processed chunk
2025-01-08 10:29:00,574 - INFO - Step 5 result: {'type': 'Program', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'ClassDecl', 'name': 'Output', 'range': [572, 613], 'children': [{'type': 'FieldDecl', 'name': 'video_id', 'range': [579, 588], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [581, 581]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [582, 582], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [583, 588], 'children': [{'type': 'Argument', 'name': 'description', 'range': [585, 587], 'children': [{'type': 'Literal', 'name': '"The extracted YouTube video ID"', 'range': [587, 587]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'transcript', 'range': [590, 599], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [592, 592]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [593, 593], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [594, 599], 'children': [{'type': 'Argument', 'name': 'description', 'range': [596, 598], 'children': [{'type': 'Literal', 'name': '"The transcribed text of the video"', 'range': [598, 598]}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [601, 612], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [603, 603]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [604, 604], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [605, 612], 'children': [{'type': 'Argument', 'name': 'description', 'range': [608, 610], 'children': [{'type': 'Literal', 'name': '"Any error message if the transcription fails"', 'range': [610, 610]}]}]}]}]}]}]}
2025-01-08 10:29:00,575 - INFO - Completed main AST analysis flow
2025-01-08 10:29:00,575 - INFO - Successfully processed chunk
2025-01-08 10:29:05,904 - INFO - Step 3 result: {'type': 'Program', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'FunctionDeclaration', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'Parameter', 'name': 'url', 'range': [731, 733], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [737, 737], 'children': []}, {'type': 'Block', 'name': '', 'range': [739, 862], 'children': [{'type': 'VariableDeclaration', 'name': 'parsed_url', 'range': [740, 745], 'children': [{'type': 'FunctionCall', 'name': 'urlparse', 'range': [742, 745], 'children': [{'type': 'Argument', 'name': 'url', 'range': [744, 744], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [747, 764], 'children': [{'type': 'Condition', 'name': '', 'range': [748, 753], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [751, 752], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [748, 750], 'children': []}, {'type': 'Literal', 'name': '"youtu.be"', 'range': [753, 753], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [755, 764], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [756, 763], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [757, 759], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [761, 761], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [765, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [766, 774], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [769, 769], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [766, 768], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [770, 774], 'children': [{'type': 'Literal', 'name': '"www.youtube.com"', 'range': [771, 771], 'children': []}, {'type': 'Literal', 'name': '"youtube.com"', 'range': [773, 773], 'children': []}]}]}]}, {'type': 'Block', 'name': '', 'range': [776, 803], 'children': [{'type': 'IfStatement', 'name': '', 'range': [777, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [778, 783], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [781, 782], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [778, 780], 'children': []}, {'type': 'Literal', 'name': '"/watch"', 'range': [783, 783], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [785, 803], 'children': [{'type': 'VariableDeclaration', 'name': 'p', 'range': [786, 793], 'children': [{'type': 'FunctionCall', 'name': 'parse_qs', 'range': [788, 793], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [790, 792], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [795, 802], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [796, 799], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [801, 801], 'children': []}]}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [804, 829], 'children': [{'type': 'Condition', 'name': '', 'range': [805, 814], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [812, 813], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:7]', 'range': [805, 811], 'children': []}, {'type': 'Literal', 'name': '"/embed/"', 'range': [814, 814], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [816, 829], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [817, 828], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [818, 827], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [830, 855], 'children': [{'type': 'Condition', 'name': '', 'range': [831, 840], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [838, 839], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:3]', 'range': [831, 837], 'children': []}, {'type': 'Literal', 'name': '"/v/"', 'range': [840, 840], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [842, 855], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [843, 854], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [844, 853], 'children': []}]}]}]}, {'type': 'RaiseStatement', 'name': '', 'range': [856, 861], 'children': [{'type': 'FunctionCall', 'name': 'ValueError', 'range': [857, 861], 'children': [{'type': 'Argument', 'name': 'f"Invalid YouTube URL: {url}"', 'range': [859, 860], 'children': []}]}]}]}]}]}
2025-01-08 10:29:05,904 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:07,890 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 46], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 8], 'children': [{'type': 'ImportFrom', 'name': 'urllib.parse', 'range': [0, 3], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [4, 7], 'children': [{'type': 'ImportSpecifier', 'name': 'parse_qs', 'range': [5, 5], 'children': []}, {'type': 'ImportSpecifier', 'name': 'urlparse', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [10, 14], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api', 'range': [10, 11], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [12, 13], 'children': [{'type': 'ImportSpecifier', 'name': 'YouTubeTranscriptApi', 'range': [13, 13], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'ImportFrom', 'name': 'youtube_transcript_api.formatters', 'range': [15, 18], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [19, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'TextFormatter', 'range': [20, 20], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 37], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.block', 'range': [23, 28], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [29, 36], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [34, 34], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [36, 36], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [38, 46], 'children': [{'type': 'ImportFrom', 'name': 'backend.data.model', 'range': [38, 43], 'children': []}, {'type': 'ImportSpecifiers', 'name': '', 'range': [44, 45], 'children': [{'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [45, 45], 'children': []}]}]}]}]}
2025-01-08 10:29:07,890 - INFO - Completed main AST analysis flow
2025-01-08 10:29:07,890 - INFO - Successfully processed chunk
2025-01-08 10:29:20,789 - INFO - Step 2 result: {'type': 'Program', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassDeclaration', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassBody', 'range': [55, 540], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [56, 61], 'children': [{'type': 'ClassBody', 'range': [62, 86], 'children': [{'type': 'FieldDeclaration', 'name': 'youtube_url', 'range': [63, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [65, 65], 'children': []}, {'type': 'Assignment', 'range': [66, 85], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [67, 85], 'children': [{'type': 'Argument', 'name': 'title', 'range': [70, 72], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [75, 77], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [80, 82], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [88, 93], 'children': [{'type': 'ClassBody', 'range': [94, 129], 'children': [{'type': 'FieldDeclaration', 'name': 'video_id', 'range': [95, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [97, 97], 'children': []}, {'type': 'Assignment', 'range': [98, 104], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [99, 104], 'children': [{'type': 'Argument', 'name': 'description', 'range': [101, 103], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'transcript', 'range': [106, 115], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108], 'children': []}, {'type': 'Assignment', 'range': [109, 115], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [110, 115], 'children': [{'type': 'Argument', 'name': 'description', 'range': [112, 114], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [117, 128], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'range': [120, 128], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 128], 'children': [{'type': 'Argument', 'name': 'description', 'range': [124, 126], 'children': []}]}]}]}]}]}, {'type': 'MethodDeclaration', 'name': '__init__', 'range': [131, 244], 'children': [{'type': 'BlockStatement', 'range': [137, 244], 'children': [{'type': 'ExpressionStatement', 'range': [138, 143], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [138, 143], 'children': []}]}, {'type': 'ExpressionStatement', 'range': [144, 243], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [144, 243], 'children': [{'type': 'Argument', 'name': 'id', 'range': [145, 147], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [150, 155], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [157, 162], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [164, 166], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [169, 175], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [178, 184], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [187, 209], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [212, 240], 'children': []}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'extract_video_id', 'range': [246, 383], 'children': [{'type': 'BlockStatement', 'range': [260, 383], 'children': [{'type': 'VariableDeclaration', 'name': 'parsed_url', 'range': [261, 267], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [263, 267], 'children': [{'type': 'Argument', 'name': 'url', 'range': [265, 265], 'children': []}]}]}, {'type': 'IfStatement', 'range': [268, 285], 'children': [{'type': 'BinaryExpression', 'range': [269, 274], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [269, 271], 'children': []}, {'type': 'Literal', 'value': '"youtu.be"', 'range': [273, 274], 'children': []}]}, {'type': 'BlockStatement', 'range': [276, 285], 'children': [{'type': 'ReturnStatement', 'range': [277, 285], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [278, 280], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [286, 376], 'children': [{'type': 'BinaryExpression', 'range': [287, 295], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [287, 289], 'children': []}, {'type': 'Literal', 'value': '("www.youtube.com","youtube.com")', 'range': [291, 295], 'children': []}]}, {'type': 'BlockStatement', 'range': [297, 376], 'children': [{'type': 'IfStatement', 'range': [298, 324], 'children': [{'type': 'BinaryExpression', 'range': [299, 304], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [299, 301], 'children': []}, {'type': 'Literal', 'value': '"/watch"', 'range': [303, 304], 'children': []}]}, {'type': 'BlockStatement', 'range': [306, 324], 'children': [{'type': 'VariableDeclaration', 'name': 'p', 'range': [307, 315], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [309, 315], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [311, 313], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [316, 324], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [317, 320], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [325, 350], 'children': [{'type': 'BinaryExpression', 'range': [326, 335], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [326, 328], 'children': []}, {'type': 'Literal', 'value': '"/embed/"', 'range': [334, 335], 'children': []}]}, {'type': 'BlockStatement', 'range': [337, 350], 'children': [{'type': 'ReturnStatement', 'range': [338, 350], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [339, 341], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [351, 376], 'children': [{'type': 'BinaryExpression', 'range': [352, 361], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [352, 354], 'children': []}, {'type': 'Literal', 'value': '"/v/"', 'range': [360, 361], 'children': []}]}, {'type': 'BlockStatement', 'range': [363, 376], 'children': [{'type': 'ReturnStatement', 'range': [364, 376], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [365, 367], 'children': []}]}]}]}]}]}, {'type': 'ThrowStatement', 'range': [377, 383], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [378, 383], 'children': [{'type': 'Literal', 'value': 'f"Invalid YouTube URL: {url}"', 'range': [380, 382], 'children': []}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'get_transcript', 'range': [385, 473], 'children': [{'type': 'BlockStatement', 'range': [396, 473], 'children': [{'type': 'TryStatement', 'range': [397, 473], 'children': [{'type': 'BlockStatement', 'range': [399, 462], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript_list', 'range': [400, 408], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.list_transcripts', 'range': [402, 408], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [406, 406], 'children': []}]}]}, {'type': 'IfStatement', 'range': [410, 421], 'children': [{'type': 'UnaryExpression', 'operator': 'not', 'range': [411, 412], 'children': [{'type': 'Identifier', 'name': 'transcript_list', 'range': [412, 412], 'children': []}]}, {'type': 'BlockStatement', 'range': [414, 421], 'children': [{'type': 'ThrowStatement', 'range': [415, 421], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [416, 421], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [418, 420], 'children': []}]}]}]}]}, {'type': 'ForStatement', 'range': [423, 461], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript', 'range': [424, 426], 'children': []}, {'type': 'BlockStatement', 'range': [428, 461], 'children': [{'type': 'VariableDeclaration', 'name': 'first_transcript', 'range': [429, 442], 'children': [{'type': 'CallExpression', 'name': 'transcript_list.find_transcript', 'range': [433, 442], 'children': [{'type': 'Argument', 'name': '[transcript.language_code]', 'range': [436, 440], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [444, 461], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.get_transcript', 'range': [447, 461], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [450, 450], 'children': []}, {'type': 'Argument', 'name': 'languages', 'range': [453, 458], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'range': [463, 473], 'children': [{'type': 'BlockStatement', 'range': [466, 473], 'children': [{'type': 'ThrowStatement', 'range': [467, 473], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [468, 473], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [470, 472], 'children': []}]}]}]}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'run', 'range': [475, 540], 'children': [{'type': 'BlockStatement', 'range': [492, 540], 'children': [{'type': 'VariableDeclaration', 'name': 'video_id', 'range': [493, 503], 'children': [{'type': 'CallExpression', 'name': 'self.extract_video_id', 'range': [497, 503], 'children': [{'type': 'Argument', 'name': 'input_data.youtube_url', 'range': [499, 501], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [504, 508], 'children': [{'type': 'Literal', 'value': '"video_id"', 'range': [505, 505], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [507, 507], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'transcript', 'range': [510, 518], 'children': [{'type': 'CallExpression', 'name': 'self.get_transcript', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [516, 516], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'formatter', 'range': [519, 524], 'children': [{'type': 'NewExpression', 'name': 'TextFormatter', 'range': [521, 524], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'transcript_text', 'range': [525, 533], 'children': [{'type': 'CallExpression', 'name': 'formatter.format_transcript', 'range': [529, 533], 'children': [{'type': 'Argument', 'name': 'transcript', 'range': [531, 531], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [535, 539], 'children': [{'type': 'Literal', 'value': '"transcript"', 'range': [536, 536], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [538, 538], 'children': []}]}]}]}]}]}]}
2025-01-08 10:29:20,789 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:22,218 - INFO - Step 4 result: {'type': 'Program', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'FunctionDecl', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [952, 952], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [954, 954], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [960, 960], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [964, 964], 'children': []}, {'type': 'VariableDecl', 'name': 'video_id', 'range': [967, 976], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [968, 968], 'children': [{'type': 'Identifier', 'name': 'video_id', 'range': [967, 967], 'children': []}, {'type': 'CallExpression', 'name': 'extract_video_id', 'range': [971, 976], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [969, 969], 'children': []}, {'type': 'Identifier', 'name': 'extract_video_id', 'range': [971, 971], 'children': []}, {'type': 'Identifier', 'name': 'youtube_url', 'range': [975, 975], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [978, 981], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [978, 978], 'children': [{'type': 'Literal', 'name': '"video_id"', 'range': [979, 979], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [981, 981], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'transcript', 'range': [984, 991], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [985, 985], 'children': [{'type': 'Identifier', 'name': 'transcript', 'range': [984, 984], 'children': []}, {'type': 'CallExpression', 'name': 'get_transcript', 'range': [988, 991], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [986, 986], 'children': []}, {'type': 'Identifier', 'name': 'get_transcript', 'range': [988, 988], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [990, 990], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'formatter', 'range': [993, 997], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [994, 994], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [993, 993], 'children': []}, {'type': 'NewExpression', 'name': 'TextFormatter', 'range': [995, 997], 'children': [{'type': 'Identifier', 'name': 'TextFormatter', 'range': [995, 995], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'transcript_text', 'range': [999, 1006], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1000, 1000], 'children': [{'type': 'Identifier', 'name': 'transcript_text', 'range': [999, 999], 'children': []}, {'type': 'CallExpression', 'name': 'format_transcript', 'range': [1003, 1006], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [1001, 1001], 'children': []}, {'type': 'Identifier', 'name': 'format_transcript', 'range': [1003, 1003], 'children': []}, {'type': 'Identifier', 'name': 'transcript', 'range': [1005, 1005], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1009, 1012], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [1009, 1009], 'children': [{'type': 'Literal', 'name': '"transcript"', 'range': [1010, 1010], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [1012, 1012], 'children': []}]}]}]}]}
2025-01-08 10:29:22,218 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:41,814 - INFO - Step 4 result: {'type': 'Program', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'FunctionDecl', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'Parameter', 'name': 'url', 'range': [731, 733], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [737, 737], 'children': []}, {'type': 'Block', 'name': '', 'range': [739, 862], 'children': [{'type': 'VariableDecl', 'name': 'parsed_url', 'range': [740, 745], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [742, 745], 'children': [{'type': 'Argument', 'name': 'url', 'range': [744, 744], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [747, 764], 'children': [{'type': 'Condition', 'name': '', 'range': [748, 753], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [751, 752], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [748, 750], 'children': []}, {'type': 'Literal', 'name': '"youtu.be"', 'range': [753, 753], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [755, 764], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [756, 763], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [757, 759], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [761, 761], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [765, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [766, 774], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [769, 769], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [766, 768], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [770, 774], 'children': [{'type': 'Literal', 'name': '"www.youtube.com"', 'range': [771, 771], 'children': []}, {'type': 'Literal', 'name': '"youtube.com"', 'range': [773, 773], 'children': []}]}]}]}, {'type': 'Block', 'name': '', 'range': [776, 803], 'children': [{'type': 'IfStatement', 'name': '', 'range': [777, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [778, 783], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [781, 782], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [778, 780], 'children': []}, {'type': 'Literal', 'name': '"/watch"', 'range': [783, 783], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [785, 803], 'children': [{'type': 'VariableDecl', 'name': 'p', 'range': [786, 793], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [788, 793], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [790, 792], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [795, 802], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [796, 799], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [801, 801], 'children': []}]}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [804, 829], 'children': [{'type': 'Condition', 'name': '', 'range': [805, 814], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [812, 813], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:7]', 'range': [805, 811], 'children': []}, {'type': 'Literal', 'name': '"/embed/"', 'range': [814, 814], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [816, 829], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [817, 828], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [818, 827], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [830, 855], 'children': [{'type': 'Condition', 'name': '', 'range': [831, 840], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [838, 839], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:3]', 'range': [831, 837], 'children': []}, {'type': 'Literal', 'name': '"/v/"', 'range': [840, 840], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [842, 855], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [843, 854], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [844, 853], 'children': []}]}]}]}, {'type': 'RaiseStatement', 'name': '', 'range': [856, 861], 'children': [{'type': 'CallExpression', 'name': 'ValueError', 'range': [857, 861], 'children': [{'type': 'Argument', 'name': 'f"Invalid YouTube URL: {url}"', 'range': [859, 860], 'children': []}]}]}]}]}]}
2025-01-08 10:29:41,814 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:48,186 - INFO - Step 5 result: {'type': 'Program', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'FunctionDecl', 'name': 'run', 'range': [949, 1014], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [952, 952], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [954, 954], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [960, 960], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [964, 964], 'children': []}, {'type': 'VariableDecl', 'name': 'video_id', 'range': [967, 976], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [968, 968], 'children': [{'type': 'Identifier', 'name': 'video_id', 'range': [967, 967], 'children': []}, {'type': 'CallExpression', 'name': 'extract_video_id', 'range': [971, 976], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [969, 969], 'children': []}, {'type': 'Identifier', 'name': 'extract_video_id', 'range': [971, 971], 'children': []}, {'type': 'Identifier', 'name': 'youtube_url', 'range': [975, 975], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [978, 981], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [978, 978], 'children': [{'type': 'Literal', 'name': '"video_id"', 'range': [979, 979], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [981, 981], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'transcript', 'range': [984, 991], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [985, 985], 'children': [{'type': 'Identifier', 'name': 'transcript', 'range': [984, 984], 'children': []}, {'type': 'CallExpression', 'name': 'get_transcript', 'range': [988, 991], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [986, 986], 'children': []}, {'type': 'Identifier', 'name': 'get_transcript', 'range': [988, 988], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [990, 990], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'formatter', 'range': [993, 997], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [994, 994], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [993, 993], 'children': []}, {'type': 'NewExpression', 'name': 'TextFormatter', 'range': [995, 997], 'children': [{'type': 'Identifier', 'name': 'TextFormatter', 'range': [995, 995], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'transcript_text', 'range': [999, 1006], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1000, 1000], 'children': [{'type': 'Identifier', 'name': 'transcript_text', 'range': [999, 999], 'children': []}, {'type': 'CallExpression', 'name': 'format_transcript', 'range': [1003, 1006], 'children': [{'type': 'Identifier', 'name': 'formatter', 'range': [1001, 1001], 'children': []}, {'type': 'Identifier', 'name': 'format_transcript', 'range': [1003, 1003], 'children': []}, {'type': 'Identifier', 'name': 'transcript', 'range': [1005, 1005], 'children': []}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [1009, 1012], 'children': [{'type': 'YieldExpression', 'name': 'yield', 'range': [1009, 1009], 'children': [{'type': 'Literal', 'name': '"transcript"', 'range': [1010, 1010], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [1012, 1012], 'children': []}]}]}]}]}
2025-01-08 10:29:48,186 - INFO - Completed main AST analysis flow
2025-01-08 10:29:48,187 - INFO - Successfully processed chunk
2025-01-08 10:30:18,803 - INFO - Step 5 result: {'type': 'Program', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'FunctionDecl', 'name': 'extract_video_id', 'range': [728, 862], 'children': [{'type': 'Parameter', 'name': 'url', 'range': [731, 733], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [737, 737], 'children': []}, {'type': 'Block', 'name': '', 'range': [739, 862], 'children': [{'type': 'VariableDecl', 'name': 'parsed_url', 'range': [740, 745], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [742, 745], 'children': [{'type': 'Argument', 'name': 'url', 'range': [744, 744], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [747, 764], 'children': [{'type': 'Condition', 'name': '', 'range': [748, 753], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [751, 752], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [748, 750], 'children': []}, {'type': 'Literal', 'name': '"youtu.be"', 'range': [753, 753], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [755, 764], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [756, 763], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [757, 759], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [761, 761], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [765, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [766, 774], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [769, 769], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.netloc', 'range': [766, 768], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [770, 774], 'children': [{'type': 'Literal', 'name': '"www.youtube.com"', 'range': [771, 771], 'children': []}, {'type': 'Literal', 'name': '"youtube.com"', 'range': [773, 773], 'children': []}]}]}]}, {'type': 'Block', 'name': '', 'range': [776, 803], 'children': [{'type': 'IfStatement', 'name': '', 'range': [777, 803], 'children': [{'type': 'Condition', 'name': '', 'range': [778, 783], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [781, 782], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path', 'range': [778, 780], 'children': []}, {'type': 'Literal', 'name': '"/watch"', 'range': [783, 783], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [785, 803], 'children': [{'type': 'VariableDecl', 'name': 'p', 'range': [786, 793], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [788, 793], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [790, 792], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': '', 'range': [795, 802], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [796, 799], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [801, 801], 'children': []}]}]}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [804, 829], 'children': [{'type': 'Condition', 'name': '', 'range': [805, 814], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [812, 813], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:7]', 'range': [805, 811], 'children': []}, {'type': 'Literal', 'name': '"/embed/"', 'range': [814, 814], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [816, 829], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [817, 828], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [818, 827], 'children': []}]}]}]}, {'type': 'IfStatement', 'name': '', 'range': [830, 855], 'children': [{'type': 'Condition', 'name': '', 'range': [831, 840], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [838, 839], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path[:3]', 'range': [831, 837], 'children': []}, {'type': 'Literal', 'name': '"/v/"', 'range': [840, 840], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [842, 855], 'children': [{'type': 'ReturnStatement', 'name': '', 'range': [843, 854], 'children': [{'type': 'MemberExpression', 'name': 'parsed_url.path.split("/")[2]', 'range': [844, 853], 'children': []}]}]}]}, {'type': 'RaiseStatement', 'name': '', 'range': [856, 861], 'children': [{'type': 'CallExpression', 'name': 'ValueError', 'range': [857, 861], 'children': [{'type': 'Argument', 'name': 'f"Invalid YouTube URL: {url}"', 'range': [859, 860], 'children': []}]}]}]}]}]}
2025-01-08 10:30:18,803 - INFO - Completed main AST analysis flow
2025-01-08 10:30:18,806 - INFO - Successfully processed chunk
2025-01-08 10:30:45,409 - INFO - Step 3 result: {'type': 'Program', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassDeclaration', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassBody', 'range': [55, 540], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [56, 61], 'children': [{'type': 'ClassBody', 'range': [62, 86], 'children': [{'type': 'FieldDeclaration', 'name': 'youtube_url', 'range': [63, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [65, 65], 'children': []}, {'type': 'Assignment', 'range': [66, 85], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [67, 85], 'children': [{'type': 'Argument', 'name': 'title', 'range': [70, 72], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [75, 77], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [80, 82], 'children': []}]}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [88, 93], 'children': [{'type': 'ClassBody', 'range': [94, 129], 'children': [{'type': 'FieldDeclaration', 'name': 'video_id', 'range': [95, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [97, 97], 'children': []}, {'type': 'Assignment', 'range': [98, 104], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [99, 104], 'children': [{'type': 'Argument', 'name': 'description', 'range': [101, 103], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'transcript', 'range': [106, 115], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108], 'children': []}, {'type': 'Assignment', 'range': [109, 115], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [110, 115], 'children': [{'type': 'Argument', 'name': 'description', 'range': [112, 114], 'children': []}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [117, 128], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'range': [120, 128], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 128], 'children': [{'type': 'Argument', 'name': 'description', 'range': [124, 126], 'children': []}]}]}]}]}]}, {'type': 'MethodDeclaration', 'name': '__init__', 'range': [131, 244], 'children': [{'type': 'BlockStatement', 'range': [137, 244], 'children': [{'type': 'ExpressionStatement', 'range': [138, 143], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [138, 143], 'children': []}]}, {'type': 'ExpressionStatement', 'range': [144, 243], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [144, 243], 'children': [{'type': 'Argument', 'name': 'id', 'range': [145, 147], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [150, 155], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [157, 162], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [164, 166], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [169, 175], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [178, 184], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [187, 209], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [212, 240], 'children': []}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'extract_video_id', 'range': [246, 383], 'children': [{'type': 'BlockStatement', 'range': [260, 383], 'children': [{'type': 'VariableDeclaration', 'name': 'parsed_url', 'range': [261, 267], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [263, 267], 'children': [{'type': 'Argument', 'name': 'url', 'range': [265, 265], 'children': []}]}]}, {'type': 'IfStatement', 'range': [268, 285], 'children': [{'type': 'BinaryExpression', 'range': [269, 274], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [269, 271], 'children': []}, {'type': 'Literal', 'value': '"youtu.be"', 'range': [273, 274], 'children': []}]}, {'type': 'BlockStatement', 'range': [276, 285], 'children': [{'type': 'ReturnStatement', 'range': [277, 285], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [278, 280], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [286, 376], 'children': [{'type': 'BinaryExpression', 'range': [287, 295], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [287, 289], 'children': []}, {'type': 'Literal', 'value': '("www.youtube.com","youtube.com")', 'range': [291, 295], 'children': []}]}, {'type': 'BlockStatement', 'range': [297, 376], 'children': [{'type': 'IfStatement', 'range': [298, 324], 'children': [{'type': 'BinaryExpression', 'range': [299, 304], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [299, 301], 'children': []}, {'type': 'Literal', 'value': '"/watch"', 'range': [303, 304], 'children': []}]}, {'type': 'BlockStatement', 'range': [306, 324], 'children': [{'type': 'VariableDeclaration', 'name': 'p', 'range': [307, 315], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [309, 315], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [311, 313], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [316, 324], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [317, 320], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [325, 350], 'children': [{'type': 'BinaryExpression', 'range': [326, 335], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [326, 328], 'children': []}, {'type': 'Literal', 'value': '"/embed/"', 'range': [334, 335], 'children': []}]}, {'type': 'BlockStatement', 'range': [337, 350], 'children': [{'type': 'ReturnStatement', 'range': [338, 350], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [339, 341], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [351, 376], 'children': [{'type': 'BinaryExpression', 'range': [352, 361], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [352, 354], 'children': []}, {'type': 'Literal', 'value': '"/v/"', 'range': [360, 361], 'children': []}]}, {'type': 'BlockStatement', 'range': [363, 376], 'children': [{'type': 'ReturnStatement', 'range': [364, 376], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [365, 367], 'children': []}]}]}]}]}]}, {'type': 'ThrowStatement', 'range': [377, 383], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [378, 383], 'children': [{'type': 'Literal', 'value': 'f"Invalid YouTube URL: {url}"', 'range': [380, 382], 'children': []}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'get_transcript', 'range': [385, 473], 'children': [{'type': 'BlockStatement', 'range': [396, 473], 'children': [{'type': 'TryStatement', 'range': [397, 473], 'children': [{'type': 'BlockStatement', 'range': [399, 462], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript_list', 'range': [400, 408], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.list_transcripts', 'range': [402, 408], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [406, 406], 'children': []}]}]}, {'type': 'IfStatement', 'range': [410, 421], 'children': [{'type': 'UnaryExpression', 'operator': 'not', 'range': [411, 412], 'children': [{'type': 'Identifier', 'name': 'transcript_list', 'range': [412, 412], 'children': []}]}, {'type': 'BlockStatement', 'range': [414, 421], 'children': [{'type': 'ThrowStatement', 'range': [415, 421], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [416, 421], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [418, 420], 'children': []}]}]}]}]}, {'type': 'ForStatement', 'range': [423, 461], 'children': [{'type': 'VariableDeclaration', 'name': 'transcript', 'range': [424, 426], 'children': []}, {'type': 'BlockStatement', 'range': [428, 461], 'children': [{'type': 'VariableDeclaration', 'name': 'first_transcript', 'range': [429, 442], 'children': [{'type': 'CallExpression', 'name': 'transcript_list.find_transcript', 'range': [433, 442], 'children': [{'type': 'Argument', 'name': '[transcript.language_code]', 'range': [436, 440], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [444, 461], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.get_transcript', 'range': [447, 461], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [450, 450], 'children': []}, {'type': 'Argument', 'name': 'languages', 'range': [453, 458], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'range': [463, 473], 'children': [{'type': 'BlockStatement', 'range': [466, 473], 'children': [{'type': 'ThrowStatement', 'range': [467, 473], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [468, 473], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [470, 472], 'children': []}]}]}]}]}]}]}]}, {'type': 'MethodDeclaration', 'name': 'run', 'range': [475, 540], 'children': [{'type': 'BlockStatement', 'range': [492, 540], 'children': [{'type': 'VariableDeclaration', 'name': 'video_id', 'range': [493, 503], 'children': [{'type': 'CallExpression', 'name': 'self.extract_video_id', 'range': [497, 503], 'children': [{'type': 'Argument', 'name': 'input_data.youtube_url', 'range': [499, 501], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [504, 508], 'children': [{'type': 'Literal', 'value': '"video_id"', 'range': [505, 505], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [507, 507], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'transcript', 'range': [510, 518], 'children': [{'type': 'CallExpression', 'name': 'self.get_transcript', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [516, 516], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'formatter', 'range': [519, 524], 'children': [{'type': 'NewExpression', 'name': 'TextFormatter', 'range': [521, 524], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'transcript_text', 'range': [525, 533], 'children': [{'type': 'CallExpression', 'name': 'formatter.format_transcript', 'range': [529, 533], 'children': [{'type': 'Argument', 'name': 'transcript', 'range': [531, 531], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [535, 539], 'children': [{'type': 'Literal', 'value': '"transcript"', 'range': [536, 536], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [538, 538], 'children': []}]}]}]}]}]}]}
2025-01-08 10:30:45,409 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:09,841 - INFO - Step 4 result: {'type': 'Program', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassDecl', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 54], 'children': [{'type': 'ClassBody', 'range': [55, 540], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [56, 61], 'children': [{'type': 'ClassBody', 'range': [62, 86], 'children': [{'type': 'FieldDecl', 'name': 'youtube_url', 'range': [63, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [65, 65], 'children': []}, {'type': 'Assignment', 'range': [66, 85], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [67, 85], 'children': [{'type': 'Argument', 'name': 'title', 'range': [70, 72], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [75, 77], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [80, 82], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [88, 93], 'children': [{'type': 'ClassBody', 'range': [94, 129], 'children': [{'type': 'FieldDecl', 'name': 'video_id', 'range': [95, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [97, 97], 'children': []}, {'type': 'Assignment', 'range': [98, 104], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [99, 104], 'children': [{'type': 'Argument', 'name': 'description', 'range': [101, 103], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'transcript', 'range': [106, 115], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108], 'children': []}, {'type': 'Assignment', 'range': [109, 115], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [110, 115], 'children': [{'type': 'Argument', 'name': 'description', 'range': [112, 114], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [117, 128], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'range': [120, 128], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 128], 'children': [{'type': 'Argument', 'name': 'description', 'range': [124, 126], 'children': []}]}]}]}]}]}, {'type': 'MethodDecl', 'name': '__init__', 'range': [131, 244], 'children': [{'type': 'BlockStatement', 'range': [137, 244], 'children': [{'type': 'ExpressionStatement', 'range': [138, 143], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [138, 143], 'children': []}]}, {'type': 'ExpressionStatement', 'range': [144, 243], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [144, 243], 'children': [{'type': 'Argument', 'name': 'id', 'range': [145, 147], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [150, 155], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [157, 162], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [164, 166], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [169, 175], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [178, 184], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [187, 209], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [212, 240], 'children': []}]}]}]}]}, {'type': 'MethodDecl', 'name': 'extract_video_id', 'range': [246, 383], 'children': [{'type': 'BlockStatement', 'range': [260, 383], 'children': [{'type': 'VariableDecl', 'name': 'parsed_url', 'range': [261, 267], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [263, 267], 'children': [{'type': 'Argument', 'name': 'url', 'range': [265, 265], 'children': []}]}]}, {'type': 'IfStatement', 'range': [268, 285], 'children': [{'type': 'BinaryExpression', 'range': [269, 274], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [269, 271], 'children': []}, {'type': 'Literal', 'value': '"youtu.be"', 'range': [273, 274], 'children': []}]}, {'type': 'BlockStatement', 'range': [276, 285], 'children': [{'type': 'ReturnStatement', 'range': [277, 285], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [278, 280], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [286, 376], 'children': [{'type': 'BinaryExpression', 'range': [287, 295], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [287, 289], 'children': []}, {'type': 'Literal', 'value': '("www.youtube.com","youtube.com")', 'range': [291, 295], 'children': []}]}, {'type': 'BlockStatement', 'range': [297, 376], 'children': [{'type': 'IfStatement', 'range': [298, 324], 'children': [{'type': 'BinaryExpression', 'range': [299, 304], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [299, 301], 'children': []}, {'type': 'Literal', 'value': '"/watch"', 'range': [303, 304], 'children': []}]}, {'type': 'BlockStatement', 'range': [306, 324], 'children': [{'type': 'VariableDecl', 'name': 'p', 'range': [307, 315], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [309, 315], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [311, 313], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [316, 324], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [317, 320], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [325, 350], 'children': [{'type': 'BinaryExpression', 'range': [326, 335], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [326, 328], 'children': []}, {'type': 'Literal', 'value': '"/embed/"', 'range': [334, 335], 'children': []}]}, {'type': 'BlockStatement', 'range': [337, 350], 'children': [{'type': 'ReturnStatement', 'range': [338, 350], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [339, 341], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [351, 376], 'children': [{'type': 'BinaryExpression', 'range': [352, 361], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [352, 354], 'children': []}, {'type': 'Literal', 'value': '"/v/"', 'range': [360, 361], 'children': []}]}, {'type': 'BlockStatement', 'range': [363, 376], 'children': [{'type': 'ReturnStatement', 'range': [364, 376], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [365, 367], 'children': []}]}]}]}]}]}, {'type': 'ThrowStatement', 'range': [377, 383], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [378, 383], 'children': [{'type': 'Literal', 'value': 'f"Invalid YouTube URL: {url}"', 'range': [380, 382], 'children': []}]}]}]}]}, {'type': 'MethodDecl', 'name': 'get_transcript', 'range': [385, 473], 'children': [{'type': 'BlockStatement', 'range': [396, 473], 'children': [{'type': 'TryStatement', 'range': [397, 473], 'children': [{'type': 'BlockStatement', 'range': [399, 462], 'children': [{'type': 'VariableDecl', 'name': 'transcript_list', 'range': [400, 408], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.list_transcripts', 'range': [402, 408], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [406, 406], 'children': []}]}]}, {'type': 'IfStatement', 'range': [410, 421], 'children': [{'type': 'UnaryExpression', 'operator': 'not', 'range': [411, 412], 'children': [{'type': 'Identifier', 'name': 'transcript_list', 'range': [412, 412], 'children': []}]}, {'type': 'BlockStatement', 'range': [414, 421], 'children': [{'type': 'ThrowStatement', 'range': [415, 421], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [416, 421], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [418, 420], 'children': []}]}]}]}]}, {'type': 'ForStatement', 'range': [423, 461], 'children': [{'type': 'VariableDecl', 'name': 'transcript', 'range': [424, 426], 'children': []}, {'type': 'BlockStatement', 'range': [428, 461], 'children': [{'type': 'VariableDecl', 'name': 'first_transcript', 'range': [429, 442], 'children': [{'type': 'CallExpression', 'name': 'transcript_list.find_transcript', 'range': [433, 442], 'children': [{'type': 'Argument', 'name': '[transcript.language_code]', 'range': [436, 440], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [444, 461], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.get_transcript', 'range': [447, 461], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [450, 450], 'children': []}, {'type': 'Argument', 'name': 'languages', 'range': [453, 458], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'range': [463, 473], 'children': [{'type': 'BlockStatement', 'range': [466, 473], 'children': [{'type': 'ThrowStatement', 'range': [467, 473], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [468, 473], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [470, 472], 'children': []}]}]}]}]}]}]}]}, {'type': 'MethodDecl', 'name': 'run', 'range': [475, 540], 'children': [{'type': 'BlockStatement', 'range': [492, 540], 'children': [{'type': 'VariableDecl', 'name': 'video_id', 'range': [493, 503], 'children': [{'type': 'CallExpression', 'name': 'self.extract_video_id', 'range': [497, 503], 'children': [{'type': 'Argument', 'name': 'input_data.youtube_url', 'range': [499, 501], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [504, 508], 'children': [{'type': 'Literal', 'value': '"video_id"', 'range': [505, 505], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [507, 507], 'children': []}]}, {'type': 'VariableDecl', 'name': 'transcript', 'range': [510, 518], 'children': [{'type': 'CallExpression', 'name': 'self.get_transcript', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [516, 516], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'formatter', 'range': [519, 524], 'children': [{'type': 'NewExpression', 'name': 'TextFormatter', 'range': [521, 524], 'children': []}]}, {'type': 'VariableDecl', 'name': 'transcript_text', 'range': [525, 533], 'children': [{'type': 'CallExpression', 'name': 'formatter.format_transcript', 'range': [529, 533], 'children': [{'type': 'Argument', 'name': 'transcript', 'range': [531, 531], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [535, 539], 'children': [{'type': 'Literal', 'value': '"transcript"', 'range': [536, 536], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [538, 538], 'children': []}]}]}]}]}]}]}
2025-01-08 10:32:09,842 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:33:32,587 - INFO - Step 5 result: {'type': 'Program', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 540], 'children': [{'type': 'ClassDecl', 'name': 'TranscribeYoutubeVideoBlock', 'range': [49, 540], 'children': [{'type': 'ClassBody', 'range': [55, 540], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [56, 86], 'children': [{'type': 'ClassBody', 'range': [62, 86], 'children': [{'type': 'FieldDecl', 'name': 'youtube_url', 'range': [63, 85], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [65, 65], 'children': []}, {'type': 'Assignment', 'range': [66, 85], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [67, 85], 'children': [{'type': 'Argument', 'name': 'title', 'range': [70, 72], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [75, 77], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [80, 82], 'children': []}]}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [88, 129], 'children': [{'type': 'ClassBody', 'range': [94, 129], 'children': [{'type': 'FieldDecl', 'name': 'video_id', 'range': [95, 104], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [97, 97], 'children': []}, {'type': 'Assignment', 'range': [98, 104], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [99, 104], 'children': [{'type': 'Argument', 'name': 'description', 'range': [101, 103], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'transcript', 'range': [106, 115], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [108, 108], 'children': []}, {'type': 'Assignment', 'range': [109, 115], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [110, 115], 'children': [{'type': 'Argument', 'name': 'description', 'range': [112, 114], 'children': []}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [117, 128], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [119, 119], 'children': []}, {'type': 'Assignment', 'range': [120, 128], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [121, 128], 'children': [{'type': 'Argument', 'name': 'description', 'range': [124, 126], 'children': []}]}]}]}]}]}, {'type': 'MethodDecl', 'name': '__init__', 'range': [131, 244], 'children': [{'type': 'BlockStatement', 'range': [137, 244], 'children': [{'type': 'ExpressionStatement', 'range': [138, 143], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [138, 143], 'children': []}]}, {'type': 'ExpressionStatement', 'range': [144, 243], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [144, 243], 'children': [{'type': 'Argument', 'name': 'id', 'range': [145, 147], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [150, 155], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [157, 162], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [164, 166], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [169, 175], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [178, 184], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [187, 209], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [212, 240], 'children': []}]}]}]}]}, {'type': 'MethodDecl', 'name': 'extract_video_id', 'range': [246, 383], 'children': [{'type': 'BlockStatement', 'range': [260, 383], 'children': [{'type': 'VariableDecl', 'name': 'parsed_url', 'range': [261, 267], 'children': [{'type': 'CallExpression', 'name': 'urlparse', 'range': [263, 267], 'children': [{'type': 'Argument', 'name': 'url', 'range': [265, 265], 'children': []}]}]}, {'type': 'IfStatement', 'range': [268, 285], 'children': [{'type': 'BinaryExpression', 'range': [269, 274], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [269, 271], 'children': []}, {'type': 'Literal', 'value': '"youtu.be"', 'range': [273, 274], 'children': []}]}, {'type': 'BlockStatement', 'range': [276, 285], 'children': [{'type': 'ReturnStatement', 'range': [277, 285], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [278, 280], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [286, 376], 'children': [{'type': 'BinaryExpression', 'range': [287, 295], 'children': [{'type': 'MemberExpression', 'name': 'netloc', 'range': [287, 289], 'children': []}, {'type': 'Literal', 'value': '("www.youtube.com","youtube.com")', 'range': [291, 295], 'children': []}]}, {'type': 'BlockStatement', 'range': [297, 376], 'children': [{'type': 'IfStatement', 'range': [298, 324], 'children': [{'type': 'BinaryExpression', 'range': [299, 304], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [299, 301], 'children': []}, {'type': 'Literal', 'value': '"/watch"', 'range': [303, 304], 'children': []}]}, {'type': 'BlockStatement', 'range': [306, 324], 'children': [{'type': 'VariableDecl', 'name': 'p', 'range': [307, 315], 'children': [{'type': 'CallExpression', 'name': 'parse_qs', 'range': [309, 315], 'children': [{'type': 'Argument', 'name': 'parsed_url.query', 'range': [311, 313], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [316, 324], 'children': [{'type': 'MemberExpression', 'name': 'p["v"]', 'range': [317, 320], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [325, 350], 'children': [{'type': 'BinaryExpression', 'range': [326, 335], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [326, 328], 'children': []}, {'type': 'Literal', 'value': '"/embed/"', 'range': [334, 335], 'children': []}]}, {'type': 'BlockStatement', 'range': [337, 350], 'children': [{'type': 'ReturnStatement', 'range': [338, 350], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [339, 341], 'children': []}]}]}]}, {'type': 'IfStatement', 'range': [351, 376], 'children': [{'type': 'BinaryExpression', 'range': [352, 361], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [352, 354], 'children': []}, {'type': 'Literal', 'value': '"/v/"', 'range': [360, 361], 'children': []}]}, {'type': 'BlockStatement', 'range': [363, 376], 'children': [{'type': 'ReturnStatement', 'range': [364, 376], 'children': [{'type': 'MemberExpression', 'name': 'path', 'range': [365, 367], 'children': []}]}]}]}]}]}, {'type': 'ThrowStatement', 'range': [377, 383], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [378, 383], 'children': [{'type': 'Literal', 'value': 'f"Invalid YouTube URL: {url}"', 'range': [380, 382], 'children': []}]}]}]}]}, {'type': 'MethodDecl', 'name': 'get_transcript', 'range': [385, 473], 'children': [{'type': 'BlockStatement', 'range': [396, 473], 'children': [{'type': 'TryStatement', 'range': [397, 473], 'children': [{'type': 'BlockStatement', 'range': [399, 462], 'children': [{'type': 'VariableDecl', 'name': 'transcript_list', 'range': [400, 408], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.list_transcripts', 'range': [402, 408], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [406, 406], 'children': []}]}]}, {'type': 'IfStatement', 'range': [410, 421], 'children': [{'type': 'UnaryExpression', 'operator': 'not', 'range': [411, 412], 'children': [{'type': 'Identifier', 'name': 'transcript_list', 'range': [412, 412], 'children': []}]}, {'type': 'BlockStatement', 'range': [414, 421], 'children': [{'type': 'ThrowStatement', 'range': [415, 421], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [416, 421], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [418, 420], 'children': []}]}]}]}]}, {'type': 'ForStatement', 'range': [423, 461], 'children': [{'type': 'VariableDecl', 'name': 'transcript', 'range': [424, 426], 'children': []}, {'type': 'BlockStatement', 'range': [428, 461], 'children': [{'type': 'VariableDecl', 'name': 'first_transcript', 'range': [429, 442], 'children': [{'type': 'CallExpression', 'name': 'transcript_list.find_transcript', 'range': [433, 442], 'children': [{'type': 'Argument', 'name': '[transcript.language_code]', 'range': [436, 440], 'children': []}]}]}, {'type': 'ReturnStatement', 'range': [444, 461], 'children': [{'type': 'CallExpression', 'name': 'YouTubeTranscriptApi.get_transcript', 'range': [447, 461], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [450, 450], 'children': []}, {'type': 'Argument', 'name': 'languages', 'range': [453, 458], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'range': [463, 473], 'children': [{'type': 'BlockStatement', 'range': [466, 473], 'children': [{'type': 'ThrowStatement', 'range': [467, 473], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [468, 473], 'children': [{'type': 'Literal', 'value': 'f"No transcripts found for the video: {video_id}"', 'range': [470, 472], 'children': []}]}]}]}]}]}]}]}, {'type': 'MethodDecl', 'name': 'run', 'range': [475, 540], 'children': [{'type': 'BlockStatement', 'range': [492, 540], 'children': [{'type': 'VariableDecl', 'name': 'video_id', 'range': [493, 503], 'children': [{'type': 'CallExpression', 'name': 'self.extract_video_id', 'range': [497, 503], 'children': [{'type': 'Argument', 'name': 'input_data.youtube_url', 'range': [499, 501], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [504, 508], 'children': [{'type': 'Literal', 'value': '"video_id"', 'range': [505, 505], 'children': []}, {'type': 'Identifier', 'name': 'video_id', 'range': [507, 507], 'children': []}]}, {'type': 'VariableDecl', 'name': 'transcript', 'range': [510, 518], 'children': [{'type': 'CallExpression', 'name': 'self.get_transcript', 'range': [514, 518], 'children': [{'type': 'Argument', 'name': 'video_id', 'range': [516, 516], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'formatter', 'range': [519, 524], 'children': [{'type': 'NewExpression', 'name': 'TextFormatter', 'range': [521, 524], 'children': []}]}, {'type': 'VariableDecl', 'name': 'transcript_text', 'range': [525, 533], 'children': [{'type': 'CallExpression', 'name': 'formatter.format_transcript', 'range': [529, 533], 'children': [{'type': 'Argument', 'name': 'transcript', 'range': [531, 531], 'children': []}]}]}, {'type': 'YieldStatement', 'range': [535, 539], 'children': [{'type': 'Literal', 'value': '"transcript"', 'range': [536, 536], 'children': []}, {'type': 'Identifier', 'name': 'transcript_text', 'range': [538, 538], 'children': []}]}]}]}]}]}]}
2025-01-08 10:33:32,588 - INFO - Completed main AST analysis flow
2025-01-08 10:33:32,591 - INFO - Successfully processed chunk
2025-01-08 10:33:32,639 - INFO - Starting code generation from AST
2025-01-08 10:33:49,231 - INFO - Successfully generated code from AST
2025-01-08 10:33:49,233 - INFO - Starting static code similarity comparison
2025-01-08 10:33:49,242 - INFO - Static similarity result: {'final_score': 91.51, 'length_similarity': 88.81, 'token_similarity': 89.36, 'structure_similarity': 85.53, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100.0}
