2025-01-08 09:56:33,874 - INFO - Processing sample 100
2025-01-08 09:56:33,874 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 09:56:39,273 - INFO - Successfully split code into 6 top-level declarations
2025-01-08 09:56:39,276 - INFO - Processing chunk #0 (size=280 chars, start_index=0)
2025-01-08 09:56:39,281 - INFO - Processing chunk #1 (size=2075 chars, start_index=57)
2025-01-08 09:56:39,282 - INFO - Processing chunk with 280 chars starting at index 0
2025-01-08 09:56:39,283 - INFO - Processing chunk #2 (size=425 chars, start_index=404)
2025-01-08 09:56:39,283 - INFO - Processing chunk with 2075 chars starting at index 57
2025-01-08 09:56:39,284 - INFO - Processing chunk #3 (size=232 chars, start_index=466)
2025-01-08 09:56:39,284 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,285 - INFO - Processing chunk #4 (size=358 chars, start_index=502)
2025-01-08 09:56:39,285 - INFO - Processing chunk with 425 chars starting at index 404
2025-01-08 09:56:39,286 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,286 - INFO - Processing chunk #5 (size=1028 chars, start_index=556)
2025-01-08 09:56:39,287 - INFO - Processing chunk with 232 chars starting at index 466
2025-01-08 09:56:39,287 - INFO - Tokenized code into 57 tokens
2025-01-08 09:56:39,288 - INFO - Processing chunk with 358 chars starting at index 502
2025-01-08 09:56:39,288 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,289 - INFO - Tokenized code into 347 tokens
2025-01-08 09:56:39,291 - INFO - Processing chunk with 1028 chars starting at index 556
2025-01-08 09:56:39,291 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,291 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:39,292 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,292 - INFO - Tokenized code into 62 tokens
2025-01-08 09:56:39,292 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:39,293 - INFO - Starting main AST analysis flow
2025-01-08 09:56:39,293 - INFO - Tokenized code into 36 tokens
2025-01-08 09:56:39,297 - INFO - Tokenized code into 54 tokens
2025-01-08 09:56:39,298 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:39,300 - INFO - Tokenized code into 188 tokens
2025-01-08 09:56:39,306 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:39,305 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:39,304 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 09:56:41,510 - INFO - Step 1 result: {'type': 'Program', 'name': 'run', 'range': [556, 743], 'children': []}
2025-01-08 09:56:41,510 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:43,390 - INFO - Step 1 result: {'type': 'Program', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'SchemaField', 'name': 'chunks', 'range': [473, 482], 'children': []}, {'type': 'SchemaField', 'name': 'tokens', 'range': [484, 499], 'children': []}]}]}
2025-01-08 09:56:43,391 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:44,371 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 56], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': []}]}
2025-01-08 09:56:44,372 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:45,111 - INFO - Step 1 result: {'type': 'Program', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'PropertyDeclaration', 'name': 'texts', 'range': [411, 420], 'children': []}, {'type': 'PropertyDeclaration', 'name': 'credentials', 'range': [423, 429], 'children': []}, {'type': 'PropertyDeclaration', 'name': 'max_chunk_length', 'range': [431, 446], 'children': []}, {'type': 'PropertyDeclaration', 'name': 'return_tokens', 'range': [448, 463], 'children': []}]}]}
2025-01-08 09:56:45,111 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:49,368 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [502, 555], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [502, 553], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [505, 505]}, {'type': 'CallExpression', 'name': 'super', 'range': [509, 511], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [513, 553], 'children': [{'type': 'Literal', 'value': '806fb15e-830f-4796-8692-557d300ff43c', 'range': [518, 518]}, {'type': 'Literal', 'value': "Chunks texts using Jina AI's segmentation service", 'range': [523, 523]}, {'type': 'ObjectExpression', 'range': [528, 536], 'children': [{'type': 'Property', 'key': 'BlockCategory.AI', 'value': 'BlockCategory.AI', 'range': [529, 531]}, {'type': 'Property', 'key': 'BlockCategory.TEXT', 'value': 'BlockCategory.TEXT', 'range': [533, 535]}]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Input', 'range': [541, 543]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Output', 'range': [548, 550]}]}]}]}]}
2025-01-08 09:56:49,368 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:50,240 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [57, 403], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaChunkingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 70], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 81], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [83, 90], 'children': []}, {'type': 'VariableDeclaration', 'name': 'max_chunk_length', 'range': [91, 107], 'children': []}, {'type': 'VariableDeclaration', 'name': 'return_tokens', 'range': [108, 124], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'VariableDeclaration', 'name': 'chunks', 'range': [133, 143], 'children': []}, {'type': 'VariableDeclaration', 'name': 'tokens', 'range': [144, 160], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [162, 214], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [216, 403], 'children': []}]}
2025-01-08 09:56:50,241 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 09:56:56,077 - INFO - Step 2 result: {'type': 'Program', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'SchemaField', 'name': 'chunks', 'range': [473, 482], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [475, 476], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [476, 477], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [477, 482], 'children': [{'type': 'Argument', 'name': 'description', 'range': [479, 481], 'children': [{'type': 'StringLiteral', 'name': '"List of chunked texts"', 'range': [481, 481], 'children': []}]}]}]}]}, {'type': 'SchemaField', 'name': 'tokens', 'range': [484, 499], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [486, 487], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [487, 488], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [488, 499], 'children': [{'type': 'Argument', 'name': 'description', 'range': [491, 493], 'children': [{'type': 'StringLiteral', 'name': '"List of token information for each chunk"', 'range': [493, 493], 'children': []}]}, {'type': 'Argument', 'name': 'optional', 'range': [495, 497], 'children': [{'type': 'BooleanLiteral', 'name': 'True', 'range': [497, 497], 'children': []}]}]}]}]}]}]}
2025-01-08 09:56:56,078 - INFO - Starting Step 3: AST simplification
2025-01-08 09:56:58,537 - INFO - Step 2 result: {'type': 'Program', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'FunctionDeclaration', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [558, 576], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [560, 560], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [562, 564], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [568, 570], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [574, 574], 'children': []}]}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [579, 579], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [581, 743], 'children': [{'type': 'Assignment', 'name': 'url', 'range': [582, 584], 'children': []}, {'type': 'Assignment', 'name': 'headers', 'range': [586, 601], 'children': []}, {'type': 'Assignment', 'name': 'all_chunks', 'range': [604, 607], 'children': []}, {'type': 'Assignment', 'name': 'all_tokens', 'range': [609, 612], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [615, 725], 'children': [{'type': 'Assignment', 'name': 'data', 'range': [623, 661], 'children': []}, {'type': 'FunctionCall', 'name': 'requests.post', 'range': [664, 679], 'children': []}, {'type': 'Assignment', 'name': 'result', 'range': [681, 687], 'children': []}, {'type': 'FunctionCall', 'name': 'all_chunks.extend', 'range': [690, 703], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [705, 724], 'children': [{'type': 'FunctionCall', 'name': 'all_tokens.extend', 'range': [711, 724], 'children': []}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [727, 731], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [732, 741], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [738, 741], 'children': []}]}]}]}]}
2025-01-08 09:56:58,537 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:05,743 - INFO - Step 2 result: {'type': 'Program', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'PropertyDeclaration', 'name': 'texts', 'range': [411, 420], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [413, 413], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [414, 414], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [415, 420], 'children': [{'type': 'Argument', 'name': 'description', 'range': [417, 419], 'children': [{'type': 'StringLiteral', 'name': '"List of texts to chunk"', 'range': [419, 419], 'children': []}]}]}]}]}, {'type': 'PropertyDeclaration', 'name': 'credentials', 'range': [423, 429], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [425, 425], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [426, 426], 'children': [{'type': 'JinaCredentialsFieldCall', 'name': 'JinaCredentialsField', 'range': [427, 429], 'children': []}]}]}, {'type': 'PropertyDeclaration', 'name': 'max_chunk_length', 'range': [431, 446], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [433, 433], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [434, 434], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [435, 446], 'children': [{'type': 'Argument', 'name': 'description', 'range': [438, 440], 'children': [{'type': 'StringLiteral', 'name': '"Maximum length of each chunk"', 'range': [440, 440], 'children': []}]}, {'type': 'Argument', 'name': 'default', 'range': [442, 444], 'children': [{'type': 'NumericLiteral', 'name': '1000', 'range': [444, 444], 'children': []}]}]}]}]}, {'type': 'PropertyDeclaration', 'name': 'return_tokens', 'range': [448, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [450, 450], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [451, 451], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [452, 463], 'children': [{'type': 'Argument', 'name': 'description', 'range': [455, 457], 'children': [{'type': 'StringLiteral', 'name': '"Whether to return token information"', 'range': [457, 457], 'children': []}]}, {'type': 'Argument', 'name': 'default', 'range': [459, 461], 'children': [{'type': 'BooleanLiteral', 'name': 'False', 'range': [461, 461], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:05,743 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:06,366 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [502, 555], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [502, 553], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [505, 505]}, {'type': 'CallExpression', 'name': 'super', 'range': [509, 511], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [513, 553], 'children': [{'type': 'AssignmentExpression', 'operator': '=', 'range': [516, 518], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [516, 516]}, {'type': 'Literal', 'value': '806fb15e-830f-4796-8692-557d300ff43c', 'range': [518, 518]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [521, 523], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [521, 521]}, {'type': 'Literal', 'value': "Chunks texts using Jina AI's segmentation service", 'range': [523, 523]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [526, 536], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [526, 526]}, {'type': 'ObjectExpression', 'range': [528, 536], 'children': [{'type': 'Property', 'key': 'BlockCategory.AI', 'value': 'BlockCategory.AI', 'range': [529, 531]}, {'type': 'Property', 'key': 'BlockCategory.TEXT', 'value': 'BlockCategory.TEXT', 'range': [533, 535]}]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [539, 543], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [539, 539]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Input', 'range': [541, 543]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [546, 550], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [546, 546]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Output', 'range': [548, 550]}]}]}]}]}]}
2025-01-08 09:57:06,366 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:08,719 - INFO - Step 3 result: {'type': 'Program', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'ClassDeclaration', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'SchemaField', 'name': 'chunks', 'range': [473, 482], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [475, 476], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [476, 477], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [477, 482], 'children': [{'type': 'Argument', 'name': 'description', 'range': [479, 481], 'children': [{'type': 'StringLiteral', 'name': '"List of chunked texts"', 'range': [481, 481], 'children': []}]}]}]}]}, {'type': 'SchemaField', 'name': 'tokens', 'range': [484, 499], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [486, 487], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [487, 488], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [488, 499], 'children': [{'type': 'Argument', 'name': 'description', 'range': [491, 493], 'children': [{'type': 'StringLiteral', 'name': '"List of token information for each chunk"', 'range': [493, 493], 'children': []}]}, {'type': 'Argument', 'name': 'optional', 'range': [495, 497], 'children': [{'type': 'BooleanLiteral', 'name': 'True', 'range': [497, 497], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:08,719 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:11,299 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': '', 'range': [0, 7], 'children': [{'type': 'ModulePath', 'name': '', 'range': [1, 7], 'children': [{'type': 'Module', 'name': 'backend', 'range': [1, 1], 'children': []}, {'type': 'Module', 'name': 'blocks', 'range': [3, 3], 'children': []}, {'type': 'Module', 'name': 'jina', 'range': [5, 5], 'children': []}, {'type': 'Module', 'name': '_auth', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [9, 20], 'children': [{'type': 'Import', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': '', 'range': [22, 27], 'children': [{'type': 'ModulePath', 'name': '', 'range': [23, 27], 'children': [{'type': 'Module', 'name': 'backend', 'range': [23, 23], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [25, 25], 'children': []}, {'type': 'Module', 'name': 'block', 'range': [27, 27], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [29, 36], 'children': [{'type': 'Import', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'Import', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': '', 'range': [37, 42], 'children': [{'type': 'ModulePath', 'name': '', 'range': [38, 42], 'children': [{'type': 'Module', 'name': 'backend', 'range': [38, 38], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [40, 40], 'children': []}, {'type': 'Module', 'name': 'model', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [44, 45], 'children': [{'type': 'Import', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': '', 'range': [46, 51], 'children': [{'type': 'ModulePath', 'name': '', 'range': [47, 51], 'children': [{'type': 'Module', 'name': 'backend', 'range': [47, 47], 'children': []}, {'type': 'Module', 'name': 'util', 'range': [49, 49], 'children': []}, {'type': 'Module', 'name': 'request', 'range': [51, 51], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [53, 54], 'children': [{'type': 'Import', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:57:11,299 - INFO - Starting Step 3: AST simplification
2025-01-08 09:57:16,003 - INFO - Step 3 result: {'type': 'Program', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'FunctionDeclaration', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [558, 576], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [560, 560], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [562, 564], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [568, 570], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [574, 574], 'children': []}]}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [579, 579], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [581, 743], 'children': [{'type': 'Assignment', 'name': 'url', 'range': [582, 584], 'children': []}, {'type': 'Assignment', 'name': 'headers', 'range': [586, 601], 'children': []}, {'type': 'Assignment', 'name': 'all_chunks', 'range': [604, 607], 'children': []}, {'type': 'Assignment', 'name': 'all_tokens', 'range': [609, 612], 'children': []}, {'type': 'ForLoop', 'name': 'for', 'range': [615, 725], 'children': [{'type': 'Assignment', 'name': 'data', 'range': [623, 661], 'children': []}, {'type': 'FunctionCall', 'name': 'requests.post', 'range': [664, 679], 'children': []}, {'type': 'Assignment', 'name': 'result', 'range': [681, 687], 'children': []}, {'type': 'FunctionCall', 'name': 'all_chunks.extend', 'range': [690, 703], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [705, 724], 'children': [{'type': 'FunctionCall', 'name': 'all_tokens.extend', 'range': [711, 724], 'children': []}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [727, 731], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [732, 741], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [738, 741], 'children': []}]}]}]}]}
2025-01-08 09:57:16,003 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:20,624 - INFO - Step 4 result: {'type': 'Program', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'ClassDecl', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'SchemaField', 'name': 'chunks', 'range': [473, 482], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [475, 476], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [476, 477], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [477, 482], 'children': [{'type': 'Argument', 'name': 'description', 'range': [479, 481], 'children': [{'type': 'Literal', 'name': '"List of chunked texts"', 'range': [481, 481], 'children': []}]}]}]}]}, {'type': 'SchemaField', 'name': 'tokens', 'range': [484, 499], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [486, 487], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [487, 488], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [488, 499], 'children': [{'type': 'Argument', 'name': 'description', 'range': [491, 493], 'children': [{'type': 'Literal', 'name': '"List of token information for each chunk"', 'range': [493, 493], 'children': []}]}, {'type': 'Argument', 'name': 'optional', 'range': [495, 497], 'children': [{'type': 'Literal', 'name': 'True', 'range': [497, 497], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:20,625 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:57:22,153 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [502, 555], 'children': [{'type': 'FunctionDeclaration', 'name': '__init__', 'range': [502, 553], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [505, 505]}, {'type': 'CallExpression', 'name': 'super', 'range': [509, 511], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [513, 553], 'children': [{'type': 'AssignmentExpression', 'operator': '=', 'range': [516, 518], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [516, 516]}, {'type': 'Literal', 'value': '806fb15e-830f-4796-8692-557d300ff43c', 'range': [518, 518]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [521, 523], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [521, 521]}, {'type': 'Literal', 'value': "Chunks texts using Jina AI's segmentation service", 'range': [523, 523]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [526, 536], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [526, 526]}, {'type': 'ObjectExpression', 'range': [528, 536], 'children': [{'type': 'Property', 'key': 'BlockCategory.AI', 'value': 'BlockCategory.AI', 'range': [529, 531]}, {'type': 'Property', 'key': 'BlockCategory.TEXT', 'value': 'BlockCategory.TEXT', 'range': [533, 535]}]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [539, 543], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [539, 539]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Input', 'range': [541, 543]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [546, 550], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [546, 546]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Output', 'range': [548, 550]}]}]}]}]}]}
2025-01-08 09:57:22,154 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:25,689 - INFO - Step 3 result: {'type': 'Program', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'PropertyDeclaration', 'name': 'texts', 'range': [411, 420], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [413, 413]}, {'type': 'Assignment', 'name': '=', 'range': [414, 414], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [415, 420], 'children': [{'type': 'Argument', 'name': 'description', 'range': [417, 419], 'children': [{'type': 'StringLiteral', 'name': '"List of texts to chunk"', 'range': [419, 419]}]}]}]}]}, {'type': 'PropertyDeclaration', 'name': 'credentials', 'range': [423, 429], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [425, 425]}, {'type': 'Assignment', 'name': '=', 'range': [426, 426], 'children': [{'type': 'JinaCredentialsFieldCall', 'name': 'JinaCredentialsField', 'range': [427, 429]}]}]}, {'type': 'PropertyDeclaration', 'name': 'max_chunk_length', 'range': [431, 446], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [433, 433]}, {'type': 'Assignment', 'name': '=', 'range': [434, 434], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [435, 446], 'children': [{'type': 'Argument', 'name': 'description', 'range': [438, 440], 'children': [{'type': 'StringLiteral', 'name': '"Maximum length of each chunk"', 'range': [440, 440]}]}, {'type': 'Argument', 'name': 'default', 'range': [442, 444], 'children': [{'type': 'NumericLiteral', 'name': '1000', 'range': [444, 444]}]}]}]}]}, {'type': 'PropertyDeclaration', 'name': 'return_tokens', 'range': [448, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [450, 450]}, {'type': 'Assignment', 'name': '=', 'range': [451, 451], 'children': [{'type': 'SchemaFieldCall', 'name': 'SchemaField', 'range': [452, 463], 'children': [{'type': 'Argument', 'name': 'description', 'range': [455, 457], 'children': [{'type': 'StringLiteral', 'name': '"Whether to return token information"', 'range': [457, 457]}]}, {'type': 'Argument', 'name': 'default', 'range': [459, 461], 'children': [{'type': 'BooleanLiteral', 'name': 'False', 'range': [461, 461]}]}]}]}]}]}]}
2025-01-08 09:57:25,690 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:32,218 - INFO - Step 4 result: {'type': 'Program', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'FunctionDecl', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [558, 576], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [560, 560], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [562, 564], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [568, 570], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [574, 574], 'children': []}]}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [579, 579], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [581, 743], 'children': [{'type': 'Assignment', 'name': 'url', 'range': [582, 584], 'children': []}, {'type': 'Assignment', 'name': 'headers', 'range': [586, 601], 'children': []}, {'type': 'Assignment', 'name': 'all_chunks', 'range': [604, 607], 'children': []}, {'type': 'Assignment', 'name': 'all_tokens', 'range': [609, 612], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [615, 725], 'children': [{'type': 'Assignment', 'name': 'data', 'range': [623, 661], 'children': []}, {'type': 'CallExpression', 'name': 'requests.post', 'range': [664, 679], 'children': []}, {'type': 'Assignment', 'name': 'result', 'range': [681, 687], 'children': []}, {'type': 'CallExpression', 'name': 'all_chunks.extend', 'range': [690, 703], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [705, 724], 'children': [{'type': 'CallExpression', 'name': 'all_tokens.extend', 'range': [711, 724], 'children': []}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [727, 731], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [732, 741], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [738, 741], 'children': []}]}]}]}]}
2025-01-08 09:57:32,218 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:57:33,028 - INFO - Step 5 result: {'type': 'Program', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'ClassDecl', 'name': 'Output', 'range': [466, 501], 'children': [{'type': 'SchemaField', 'name': 'chunks', 'range': [473, 482], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [475, 476], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [476, 477], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [477, 482], 'children': [{'type': 'Argument', 'name': 'description', 'range': [479, 481], 'children': [{'type': 'Literal', 'name': '"List of chunked texts"', 'range': [481, 481], 'children': []}]}]}]}]}, {'type': 'SchemaField', 'name': 'tokens', 'range': [484, 499], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [486, 487], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [487, 488], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [488, 499], 'children': [{'type': 'Argument', 'name': 'description', 'range': [491, 493], 'children': [{'type': 'Literal', 'name': '"List of token information for each chunk"', 'range': [493, 493], 'children': []}]}, {'type': 'Argument', 'name': 'optional', 'range': [495, 497], 'children': [{'type': 'Literal', 'name': 'True', 'range': [497, 497], 'children': []}]}]}]}]}]}]}
2025-01-08 09:57:33,028 - INFO - Completed main AST analysis flow
2025-01-08 09:57:33,029 - INFO - Successfully processed chunk
2025-01-08 09:57:36,922 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': '', 'range': [0, 7], 'children': [{'type': 'ModulePath', 'name': '', 'range': [1, 7], 'children': [{'type': 'Module', 'name': 'backend', 'range': [1, 1], 'children': []}, {'type': 'Module', 'name': 'blocks', 'range': [3, 3], 'children': []}, {'type': 'Module', 'name': 'jina', 'range': [5, 5], 'children': []}, {'type': 'Module', 'name': '_auth', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [9, 20], 'children': [{'type': 'Import', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': '', 'range': [22, 27], 'children': [{'type': 'ModulePath', 'name': '', 'range': [23, 27], 'children': [{'type': 'Module', 'name': 'backend', 'range': [23, 23], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [25, 25], 'children': []}, {'type': 'Module', 'name': 'block', 'range': [27, 27], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [29, 36], 'children': [{'type': 'Import', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'Import', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': '', 'range': [37, 42], 'children': [{'type': 'ModulePath', 'name': '', 'range': [38, 42], 'children': [{'type': 'Module', 'name': 'backend', 'range': [38, 38], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [40, 40], 'children': []}, {'type': 'Module', 'name': 'model', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [44, 45], 'children': [{'type': 'Import', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': '', 'range': [46, 51], 'children': [{'type': 'ModulePath', 'name': '', 'range': [47, 51], 'children': [{'type': 'Module', 'name': 'backend', 'range': [47, 47], 'children': []}, {'type': 'Module', 'name': 'util', 'range': [49, 49], 'children': []}, {'type': 'Module', 'name': 'request', 'range': [51, 51], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [53, 54], 'children': [{'type': 'Import', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:57:36,922 - INFO - Starting Step 4: AST normalization
2025-01-08 09:57:37,814 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [502, 555], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [502, 553], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [505, 505]}, {'type': 'CallExpression', 'name': 'super', 'range': [509, 511], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [513, 553], 'children': [{'type': 'AssignmentExpression', 'operator': '=', 'range': [516, 518], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [516, 516]}, {'type': 'Literal', 'value': '806fb15e-830f-4796-8692-557d300ff43c', 'range': [518, 518]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [521, 523], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [521, 521]}, {'type': 'Literal', 'value': "Chunks texts using Jina AI's segmentation service", 'range': [523, 523]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [526, 536], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [526, 526]}, {'type': 'ObjectExpression', 'range': [528, 536], 'children': [{'type': 'Property', 'key': 'BlockCategory.AI', 'value': 'BlockCategory.AI', 'range': [529, 531]}, {'type': 'Property', 'key': 'BlockCategory.TEXT', 'value': 'BlockCategory.TEXT', 'range': [533, 535]}]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [539, 543], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [539, 539]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Input', 'range': [541, 543]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [546, 550], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [546, 546]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Output', 'range': [548, 550]}]}]}]}]}]}
2025-01-08 09:57:37,814 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:57:44,978 - INFO - Step 4 result: {'type': 'Program', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'PropertyDecl', 'name': 'texts', 'range': [411, 420], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [413, 413]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [414, 414], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [415, 420], 'children': [{'type': 'Argument', 'name': 'description', 'range': [417, 419], 'children': [{'type': 'Literal', 'name': '"List of texts to chunk"', 'range': [419, 419]}]}]}]}]}, {'type': 'PropertyDecl', 'name': 'credentials', 'range': [423, 429], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [425, 425]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [426, 426], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [427, 429]}]}]}, {'type': 'PropertyDecl', 'name': 'max_chunk_length', 'range': [431, 446], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [433, 433]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [434, 434], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [435, 446], 'children': [{'type': 'Argument', 'name': 'description', 'range': [438, 440], 'children': [{'type': 'Literal', 'name': '"Maximum length of each chunk"', 'range': [440, 440]}]}, {'type': 'Argument', 'name': 'default', 'range': [442, 444], 'children': [{'type': 'Literal', 'name': '1000', 'range': [444, 444]}]}]}]}]}, {'type': 'PropertyDecl', 'name': 'return_tokens', 'range': [448, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [450, 450]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [451, 451], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [452, 463], 'children': [{'type': 'Argument', 'name': 'description', 'range': [455, 457], 'children': [{'type': 'Literal', 'name': '"Whether to return token information"', 'range': [457, 457]}]}, {'type': 'Argument', 'name': 'default', 'range': [459, 461], 'children': [{'type': 'Literal', 'name': 'False', 'range': [461, 461]}]}]}]}]}]}]}
2025-01-08 09:57:44,979 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:57:48,075 - INFO - Step 5 result: {'type': 'Program', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'FunctionDecl', 'name': 'run', 'range': [556, 743], 'children': [{'type': 'ParameterList', 'name': 'parameters', 'range': [558, 576], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [560, 560], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [562, 564], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [568, 570], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [574, 574], 'children': []}]}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [579, 579], 'children': []}, {'type': 'Block', 'name': 'body', 'range': [581, 743], 'children': [{'type': 'Assignment', 'name': 'url', 'range': [582, 584], 'children': []}, {'type': 'Assignment', 'name': 'headers', 'range': [586, 601], 'children': []}, {'type': 'Assignment', 'name': 'all_chunks', 'range': [604, 607], 'children': []}, {'type': 'Assignment', 'name': 'all_tokens', 'range': [609, 612], 'children': []}, {'type': 'ForStatement', 'name': 'for', 'range': [615, 725], 'children': [{'type': 'Assignment', 'name': 'data', 'range': [623, 661], 'children': []}, {'type': 'CallExpression', 'name': 'requests.post', 'range': [664, 679], 'children': []}, {'type': 'Assignment', 'name': 'result', 'range': [681, 687], 'children': []}, {'type': 'CallExpression', 'name': 'all_chunks.extend', 'range': [690, 703], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [705, 724], 'children': [{'type': 'CallExpression', 'name': 'all_tokens.extend', 'range': [711, 724], 'children': []}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [727, 731], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [732, 741], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [738, 741], 'children': []}]}]}]}]}
2025-01-08 09:57:48,075 - INFO - Completed main AST analysis flow
2025-01-08 09:57:48,076 - INFO - Successfully processed chunk
2025-01-08 09:57:53,073 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [502, 555], 'children': [{'type': 'FunctionDecl', 'name': '__init__', 'range': [502, 553], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [505, 505]}, {'type': 'CallExpression', 'name': 'super', 'range': [509, 511], 'children': [{'type': 'CallExpression', 'name': '__init__', 'range': [513, 553], 'children': [{'type': 'AssignmentExpression', 'operator': '=', 'range': [516, 518], 'children': [{'type': 'Identifier', 'name': 'id', 'range': [516, 516]}, {'type': 'Literal', 'value': '806fb15e-830f-4796-8692-557d300ff43c', 'range': [518, 518]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [521, 523], 'children': [{'type': 'Identifier', 'name': 'description', 'range': [521, 521]}, {'type': 'Literal', 'value': "Chunks texts using Jina AI's segmentation service", 'range': [523, 523]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [526, 536], 'children': [{'type': 'Identifier', 'name': 'categories', 'range': [526, 526]}, {'type': 'ObjectExpression', 'range': [528, 536], 'children': [{'type': 'Property', 'key': 'BlockCategory.AI', 'value': 'BlockCategory.AI', 'range': [529, 531]}, {'type': 'Property', 'key': 'BlockCategory.TEXT', 'value': 'BlockCategory.TEXT', 'range': [533, 535]}]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [539, 543], 'children': [{'type': 'Identifier', 'name': 'input_schema', 'range': [539, 539]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Input', 'range': [541, 543]}]}, {'type': 'AssignmentExpression', 'operator': '=', 'range': [546, 550], 'children': [{'type': 'Identifier', 'name': 'output_schema', 'range': [546, 546]}, {'type': 'MemberExpression', 'object': 'JinaChunkingBlock', 'property': 'Output', 'range': [548, 550]}]}]}]}]}]}
2025-01-08 09:57:53,073 - INFO - Completed main AST analysis flow
2025-01-08 09:57:53,074 - INFO - Successfully processed chunk
2025-01-08 09:57:57,094 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [57, 403], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaChunkingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 70], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [83, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [85, 85], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [86, 86], 'children': [{'type': 'FunctionCall', 'name': 'JinaCredentialsField', 'range': [87, 89], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'max_chunk_length', 'range': [91, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [93, 93], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [94, 94], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [95, 106], 'children': [{'type': 'Argument', 'name': 'description', 'range': [98, 100], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'return_tokens', 'range': [108, 124], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [110, 110], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [111, 111], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [112, 123], 'children': [{'type': 'Argument', 'name': 'description', 'range': [115, 117], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [119, 121], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'VariableDeclaration', 'name': 'chunks', 'range': [133, 143], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [136, 136], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [137, 142], 'children': [{'type': 'Argument', 'name': 'description', 'range': [139, 141], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'tokens', 'range': [144, 160], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [146, 146], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [147, 147], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [148, 159], 'children': [{'type': 'Argument', 'name': 'description', 'range': [151, 153], 'children': []}, {'type': 'Argument', 'name': 'optional', 'range': [155, 157], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [162, 214], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [169, 213], 'children': [{'type': 'Argument', 'name': 'id', 'range': [176, 178], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [181, 183], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [186, 196], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [199, 204], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [206, 211], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [216, 403], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [242, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'StringLiteral', 'name': '"https://segment.jina.ai/"', 'range': [244, 244], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [246, 262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [247, 247], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [248, 261], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [250, 252], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [255, 259], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'all_chunks', 'range': [264, 268], 'children': [{'type': 'Assignment', 'name': '=', 'range': [265, 265], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [266, 267], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'all_tokens', 'range': [269, 273], 'children': [{'type': 'Assignment', 'name': '=', 'range': [270, 270], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [271, 272], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [275, 385], 'children': [{'type': 'VariableDeclaration', 'name': 'text', 'range': [276, 276], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.texts', 'range': [278, 280], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [282, 385], 'children': [{'type': 'VariableDeclaration', 'name': 'data', 'range': [283, 322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [284, 284], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [285, 321], 'children': [{'type': 'Property', 'name': '"content"', 'range': [287, 289], 'children': []}, {'type': 'Property', 'name': '"return_tokens"', 'range': [292, 304], 'children': []}, {'type': 'Property', 'name': '"return_chunks"', 'range': [306, 308], 'children': []}, {'type': 'Property', 'name': '"max_chunk_length"', 'range': [311, 319], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [324, 340], 'children': [{'type': 'Assignment', 'name': '=', 'range': [325, 325], 'children': [{'type': 'FunctionCall', 'name': 'requests.post', 'range': [326, 339], 'children': [{'type': 'Argument', 'name': 'url', 'range': [330, 330], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [332, 334], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [336, 338], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [341, 348], 'children': [{'type': 'Assignment', 'name': '=', 'range': [342, 342], 'children': [{'type': 'FunctionCall', 'name': 'response.json', 'range': [343, 347], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [350, 364], 'children': [{'type': 'FunctionCall', 'name': 'all_chunks.extend', 'range': [351, 363], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [354, 362], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [365, 385], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [366, 368], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [370, 385], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [371, 384], 'children': [{'type': 'FunctionCall', 'name': 'all_tokens.extend', 'range': [372, 383], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [375, 382], 'children': []}]}]}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [387, 391], 'children': [{'type': 'StringLiteral', 'name': '"chunks"', 'range': [388, 388], 'children': []}, {'type': 'Identifier', 'name': 'all_chunks', 'range': [390, 390], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [392, 402], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [393, 395], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [397, 402], 'children': [{'type': 'YieldStatement', 'name': '', 'range': [398, 401], 'children': [{'type': 'StringLiteral', 'name': '"tokens"', 'range': [399, 399], 'children': []}, {'type': 'Identifier', 'name': 'all_tokens', 'range': [401, 401], 'children': []}]}]}]}]}]}
2025-01-08 09:57:57,095 - INFO - Starting Step 3: AST simplification
2025-01-08 09:58:01,988 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': '', 'range': [0, 7], 'children': [{'type': 'ModulePath', 'name': '', 'range': [1, 7], 'children': [{'type': 'Module', 'name': 'backend', 'range': [1, 1], 'children': []}, {'type': 'Module', 'name': 'blocks', 'range': [3, 3], 'children': []}, {'type': 'Module', 'name': 'jina', 'range': [5, 5], 'children': []}, {'type': 'Module', 'name': '_auth', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [9, 20], 'children': [{'type': 'Import', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': '', 'range': [22, 27], 'children': [{'type': 'ModulePath', 'name': '', 'range': [23, 27], 'children': [{'type': 'Module', 'name': 'backend', 'range': [23, 23], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [25, 25], 'children': []}, {'type': 'Module', 'name': 'block', 'range': [27, 27], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [29, 36], 'children': [{'type': 'Import', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'Import', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': '', 'range': [37, 42], 'children': [{'type': 'ModulePath', 'name': '', 'range': [38, 42], 'children': [{'type': 'Module', 'name': 'backend', 'range': [38, 38], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [40, 40], 'children': []}, {'type': 'Module', 'name': 'model', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [44, 45], 'children': [{'type': 'Import', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': '', 'range': [46, 51], 'children': [{'type': 'ModulePath', 'name': '', 'range': [47, 51], 'children': [{'type': 'Module', 'name': 'backend', 'range': [47, 47], 'children': []}, {'type': 'Module', 'name': 'util', 'range': [49, 49], 'children': []}, {'type': 'Module', 'name': 'request', 'range': [51, 51], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [53, 54], 'children': [{'type': 'Import', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}
2025-01-08 09:58:01,988 - INFO - Starting Step 5: Final AST combination
2025-01-08 09:58:04,327 - INFO - Step 5 result: {'type': 'Program', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [404, 465], 'children': [{'type': 'PropertyDecl', 'name': 'texts', 'range': [411, 420], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [413, 413]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [414, 414], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [415, 420], 'children': [{'type': 'Argument', 'name': 'description', 'range': [417, 419], 'children': [{'type': 'Literal', 'name': '"List of texts to chunk"', 'range': [419, 419]}]}]}]}]}, {'type': 'PropertyDecl', 'name': 'credentials', 'range': [423, 429], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [425, 425]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [426, 426], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [427, 429]}]}]}, {'type': 'PropertyDecl', 'name': 'max_chunk_length', 'range': [431, 446], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [433, 433]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [434, 434], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [435, 446], 'children': [{'type': 'Argument', 'name': 'description', 'range': [438, 440], 'children': [{'type': 'Literal', 'name': '"Maximum length of each chunk"', 'range': [440, 440]}]}, {'type': 'Argument', 'name': 'default', 'range': [442, 444], 'children': [{'type': 'Literal', 'name': '1000', 'range': [444, 444]}]}]}]}]}, {'type': 'PropertyDecl', 'name': 'return_tokens', 'range': [448, 463], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [450, 450]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [451, 451], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [452, 463], 'children': [{'type': 'Argument', 'name': 'description', 'range': [455, 457], 'children': [{'type': 'Literal', 'name': '"Whether to return token information"', 'range': [457, 457]}]}, {'type': 'Argument', 'name': 'default', 'range': [459, 461], 'children': [{'type': 'Literal', 'name': 'False', 'range': [461, 461]}]}]}]}]}]}]}
2025-01-08 09:58:04,327 - INFO - Completed main AST analysis flow
2025-01-08 09:58:04,327 - INFO - Successfully processed chunk
2025-01-08 09:58:28,723 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 54], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 20], 'children': [{'type': 'FromImport', 'name': '', 'range': [0, 7], 'children': [{'type': 'ModulePath', 'name': '', 'range': [1, 7], 'children': [{'type': 'Module', 'name': 'backend', 'range': [1, 1], 'children': []}, {'type': 'Module', 'name': 'blocks', 'range': [3, 3], 'children': []}, {'type': 'Module', 'name': 'jina', 'range': [5, 5], 'children': []}, {'type': 'Module', 'name': '_auth', 'range': [7, 7], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [9, 20], 'children': [{'type': 'Import', 'name': 'JinaCredentials', 'range': [11, 11], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsField', 'range': [14, 14], 'children': []}, {'type': 'Import', 'name': 'JinaCredentialsInput', 'range': [17, 17], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 36], 'children': [{'type': 'FromImport', 'name': '', 'range': [22, 27], 'children': [{'type': 'ModulePath', 'name': '', 'range': [23, 27], 'children': [{'type': 'Module', 'name': 'backend', 'range': [23, 23], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [25, 25], 'children': []}, {'type': 'Module', 'name': 'block', 'range': [27, 27], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [29, 36], 'children': [{'type': 'Import', 'name': 'Block', 'range': [29, 29], 'children': []}, {'type': 'Import', 'name': 'BlockCategory', 'range': [31, 31], 'children': []}, {'type': 'Import', 'name': 'BlockOutput', 'range': [33, 33], 'children': []}, {'type': 'Import', 'name': 'BlockSchema', 'range': [35, 35], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 45], 'children': [{'type': 'FromImport', 'name': '', 'range': [37, 42], 'children': [{'type': 'ModulePath', 'name': '', 'range': [38, 42], 'children': [{'type': 'Module', 'name': 'backend', 'range': [38, 38], 'children': []}, {'type': 'Module', 'name': 'data', 'range': [40, 40], 'children': []}, {'type': 'Module', 'name': 'model', 'range': [42, 42], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [44, 45], 'children': [{'type': 'Import', 'name': 'SchemaField', 'range': [44, 44], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [46, 54], 'children': [{'type': 'FromImport', 'name': '', 'range': [46, 51], 'children': [{'type': 'ModulePath', 'name': '', 'range': [47, 51], 'children': [{'type': 'Module', 'name': 'backend', 'range': [47, 47], 'children': []}, {'type': 'Module', 'name': 'util', 'range': [49, 49], 'children': []}, {'type': 'Module', 'name': 'request', 'range': [51, 51], 'children': []}]}]}, {'type': 'ImportList', 'name': '', 'range': [53, 54], 'children': [{'type': 'Import', 'name': 'requests', 'range': [53, 53], 'children': []}]}]}]}]}
2025-01-08 09:58:28,723 - INFO - Completed main AST analysis flow
2025-01-08 09:58:28,723 - INFO - Successfully processed chunk
2025-01-08 09:59:05,099 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [57, 403], 'children': [{'type': 'ClassDeclaration', 'name': 'JinaChunkingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [64, 70], 'children': [{'type': 'VariableDeclaration', 'name': 'texts', 'range': [71, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [83, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [85, 85], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [86, 86], 'children': [{'type': 'FunctionCall', 'name': 'JinaCredentialsField', 'range': [87, 89], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'max_chunk_length', 'range': [91, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [93, 93], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [94, 94], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [95, 106], 'children': [{'type': 'Argument', 'name': 'description', 'range': [98, 100], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'return_tokens', 'range': [108, 124], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [110, 110], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [111, 111], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [112, 123], 'children': [{'type': 'Argument', 'name': 'description', 'range': [115, 117], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [119, 121], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'VariableDeclaration', 'name': 'chunks', 'range': [133, 143], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [136, 136], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [137, 142], 'children': [{'type': 'Argument', 'name': 'description', 'range': [139, 141], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'tokens', 'range': [144, 160], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [146, 146], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [147, 147], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [148, 159], 'children': [{'type': 'Argument', 'name': 'description', 'range': [151, 153], 'children': []}, {'type': 'Argument', 'name': 'optional', 'range': [155, 157], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [162, 214], 'children': [{'type': 'FunctionCall', 'name': 'super', 'range': [169, 213], 'children': [{'type': 'Argument', 'name': 'id', 'range': [176, 178], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [181, 183], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [186, 196], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [199, 204], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [206, 211], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [216, 403], 'children': [{'type': 'VariableDeclaration', 'name': 'url', 'range': [242, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'StringLiteral', 'name': '"https://segment.jina.ai/"', 'range': [244, 244], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'headers', 'range': [246, 262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [247, 247], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [248, 261], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [250, 252], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [255, 259], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'all_chunks', 'range': [264, 268], 'children': [{'type': 'Assignment', 'name': '=', 'range': [265, 265], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [266, 267], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'all_tokens', 'range': [269, 273], 'children': [{'type': 'Assignment', 'name': '=', 'range': [270, 270], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [271, 272], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [275, 385], 'children': [{'type': 'VariableDeclaration', 'name': 'text', 'range': [276, 276], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.texts', 'range': [278, 280], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [282, 385], 'children': [{'type': 'VariableDeclaration', 'name': 'data', 'range': [283, 322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [284, 284], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [285, 321], 'children': [{'type': 'Property', 'name': '"content"', 'range': [287, 289], 'children': []}, {'type': 'Property', 'name': '"return_tokens"', 'range': [292, 304], 'children': []}, {'type': 'Property', 'name': '"return_chunks"', 'range': [306, 308], 'children': []}, {'type': 'Property', 'name': '"max_chunk_length"', 'range': [311, 319], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [324, 340], 'children': [{'type': 'Assignment', 'name': '=', 'range': [325, 325], 'children': [{'type': 'FunctionCall', 'name': 'requests.post', 'range': [326, 339], 'children': [{'type': 'Argument', 'name': 'url', 'range': [330, 330], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [332, 334], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [336, 338], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'result', 'range': [341, 348], 'children': [{'type': 'Assignment', 'name': '=', 'range': [342, 342], 'children': [{'type': 'FunctionCall', 'name': 'response.json', 'range': [343, 347], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [350, 364], 'children': [{'type': 'FunctionCall', 'name': 'all_chunks.extend', 'range': [351, 363], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [354, 362], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [365, 385], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [366, 368], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [370, 385], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [371, 384], 'children': [{'type': 'FunctionCall', 'name': 'all_tokens.extend', 'range': [372, 383], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [375, 382], 'children': []}]}]}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [387, 391], 'children': [{'type': 'StringLiteral', 'name': '"chunks"', 'range': [388, 388], 'children': []}, {'type': 'Identifier', 'name': 'all_chunks', 'range': [390, 390], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [392, 402], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [393, 395], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [397, 402], 'children': [{'type': 'YieldStatement', 'name': '', 'range': [398, 401], 'children': [{'type': 'StringLiteral', 'name': '"tokens"', 'range': [399, 399], 'children': []}, {'type': 'Identifier', 'name': 'all_tokens', 'range': [401, 401], 'children': []}]}]}]}]}]}
2025-01-08 09:59:05,100 - INFO - Starting Step 4: AST normalization
2025-01-08 10:00:09,777 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [57, 403], 'children': [{'type': 'ClassDecl', 'name': 'JinaChunkingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [64, 70], 'children': [{'type': 'VariableDecl', 'name': 'texts', 'range': [71, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [83, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [85, 85], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [86, 86], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [87, 89], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'max_chunk_length', 'range': [91, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [93, 93], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [94, 94], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [95, 106], 'children': [{'type': 'Argument', 'name': 'description', 'range': [98, 100], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'return_tokens', 'range': [108, 124], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [110, 110], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [111, 111], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [112, 123], 'children': [{'type': 'Argument', 'name': 'description', 'range': [115, 117], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [119, 121], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'VariableDecl', 'name': 'chunks', 'range': [133, 143], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [136, 136], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [137, 142], 'children': [{'type': 'Argument', 'name': 'description', 'range': [139, 141], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'tokens', 'range': [144, 160], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [146, 146], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [147, 147], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [148, 159], 'children': [{'type': 'Argument', 'name': 'description', 'range': [151, 153], 'children': []}, {'type': 'Argument', 'name': 'optional', 'range': [155, 157], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [162, 214], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [169, 213], 'children': [{'type': 'Argument', 'name': 'id', 'range': [176, 178], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [181, 183], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [186, 196], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [199, 204], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [206, 211], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [216, 403], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [242, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'Literal', 'name': '"https://segment.jina.ai/"', 'range': [244, 244], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [246, 262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [247, 247], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [248, 261], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [250, 252], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [255, 259], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'all_chunks', 'range': [264, 268], 'children': [{'type': 'Assignment', 'name': '=', 'range': [265, 265], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [266, 267], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'all_tokens', 'range': [269, 273], 'children': [{'type': 'Assignment', 'name': '=', 'range': [270, 270], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [271, 272], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [275, 385], 'children': [{'type': 'VariableDecl', 'name': 'text', 'range': [276, 276], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.texts', 'range': [278, 280], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [282, 385], 'children': [{'type': 'VariableDecl', 'name': 'data', 'range': [283, 322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [284, 284], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [285, 321], 'children': [{'type': 'Property', 'name': '"content"', 'range': [287, 289], 'children': []}, {'type': 'Property', 'name': '"return_tokens"', 'range': [292, 304], 'children': []}, {'type': 'Property', 'name': '"return_chunks"', 'range': [306, 308], 'children': []}, {'type': 'Property', 'name': '"max_chunk_length"', 'range': [311, 319], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [324, 340], 'children': [{'type': 'Assignment', 'name': '=', 'range': [325, 325], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [326, 339], 'children': [{'type': 'Argument', 'name': 'url', 'range': [330, 330], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [332, 334], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [336, 338], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [341, 348], 'children': [{'type': 'Assignment', 'name': '=', 'range': [342, 342], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [343, 347], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [350, 364], 'children': [{'type': 'CallExpression', 'name': 'all_chunks.extend', 'range': [351, 363], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [354, 362], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [365, 385], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [366, 368], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [370, 385], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [371, 384], 'children': [{'type': 'CallExpression', 'name': 'all_tokens.extend', 'range': [372, 383], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [375, 382], 'children': []}]}]}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [387, 391], 'children': [{'type': 'Literal', 'name': '"chunks"', 'range': [388, 388], 'children': []}, {'type': 'Identifier', 'name': 'all_chunks', 'range': [390, 390], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [392, 402], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [393, 395], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [397, 402], 'children': [{'type': 'YieldStatement', 'name': '', 'range': [398, 401], 'children': [{'type': 'Literal', 'name': '"tokens"', 'range': [399, 399], 'children': []}, {'type': 'Identifier', 'name': 'all_tokens', 'range': [401, 401], 'children': []}]}]}]}]}]}
2025-01-08 10:00:09,777 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:01:16,185 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [57, 403], 'children': [{'type': 'ClassDecl', 'name': 'JinaChunkingBlock', 'range': [57, 63], 'children': []}, {'type': 'ClassDecl', 'name': 'Input', 'range': [64, 70], 'children': [{'type': 'VariableDecl', 'name': 'texts', 'range': [71, 81], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [73, 73], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [74, 74], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [75, 80], 'children': [{'type': 'Argument', 'name': 'description', 'range': [77, 79], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [83, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'JinaCredentialsInput', 'range': [85, 85], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [86, 86], 'children': [{'type': 'CallExpression', 'name': 'JinaCredentialsField', 'range': [87, 89], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'max_chunk_length', 'range': [91, 107], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [93, 93], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [94, 94], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [95, 106], 'children': [{'type': 'Argument', 'name': 'description', 'range': [98, 100], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [102, 104], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'return_tokens', 'range': [108, 124], 'children': [{'type': 'TypeAnnotation', 'name': 'bool', 'range': [110, 110], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [111, 111], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [112, 123], 'children': [{'type': 'Argument', 'name': 'description', 'range': [115, 117], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [119, 121], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [126, 132], 'children': [{'type': 'VariableDecl', 'name': 'chunks', 'range': [133, 143], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [135, 135], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [136, 136], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [137, 142], 'children': [{'type': 'Argument', 'name': 'description', 'range': [139, 141], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'tokens', 'range': [144, 160], 'children': [{'type': 'TypeAnnotation', 'name': 'list', 'range': [146, 146], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [147, 147], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [148, 159], 'children': [{'type': 'Argument', 'name': 'description', 'range': [151, 153], 'children': []}, {'type': 'Argument', 'name': 'optional', 'range': [155, 157], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [162, 214], 'children': [{'type': 'CallExpression', 'name': 'super', 'range': [169, 213], 'children': [{'type': 'Argument', 'name': 'id', 'range': [176, 178], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [181, 183], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [186, 196], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [199, 204], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [206, 211], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [216, 403], 'children': [{'type': 'VariableDecl', 'name': 'url', 'range': [242, 245], 'children': [{'type': 'Assignment', 'name': '=', 'range': [243, 243], 'children': [{'type': 'Literal', 'name': '"https://segment.jina.ai/"', 'range': [244, 244], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'headers', 'range': [246, 262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [247, 247], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [248, 261], 'children': [{'type': 'Property', 'name': '"Content-Type"', 'range': [250, 252], 'children': []}, {'type': 'Property', 'name': '"Authorization"', 'range': [255, 259], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'all_chunks', 'range': [264, 268], 'children': [{'type': 'Assignment', 'name': '=', 'range': [265, 265], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [266, 267], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'all_tokens', 'range': [269, 273], 'children': [{'type': 'Assignment', 'name': '=', 'range': [270, 270], 'children': [{'type': 'ArrayLiteral', 'name': '', 'range': [271, 272], 'children': []}]}]}, {'type': 'ForStatement', 'name': '', 'range': [275, 385], 'children': [{'type': 'VariableDecl', 'name': 'text', 'range': [276, 276], 'children': []}, {'type': 'MemberExpression', 'name': 'input_data.texts', 'range': [278, 280], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [282, 385], 'children': [{'type': 'VariableDecl', 'name': 'data', 'range': [283, 322], 'children': [{'type': 'Assignment', 'name': '=', 'range': [284, 284], 'children': [{'type': 'ObjectLiteral', 'name': '', 'range': [285, 321], 'children': [{'type': 'Property', 'name': '"content"', 'range': [287, 289], 'children': []}, {'type': 'Property', 'name': '"return_tokens"', 'range': [292, 304], 'children': []}, {'type': 'Property', 'name': '"return_chunks"', 'range': [306, 308], 'children': []}, {'type': 'Property', 'name': '"max_chunk_length"', 'range': [311, 319], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [324, 340], 'children': [{'type': 'Assignment', 'name': '=', 'range': [325, 325], 'children': [{'type': 'CallExpression', 'name': 'requests.post', 'range': [326, 339], 'children': [{'type': 'Argument', 'name': 'url', 'range': [330, 330], 'children': []}, {'type': 'Argument', 'name': 'headers', 'range': [332, 334], 'children': []}, {'type': 'Argument', 'name': 'json', 'range': [336, 338], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'result', 'range': [341, 348], 'children': [{'type': 'Assignment', 'name': '=', 'range': [342, 342], 'children': [{'type': 'CallExpression', 'name': 'response.json', 'range': [343, 347], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': '', 'range': [350, 364], 'children': [{'type': 'CallExpression', 'name': 'all_chunks.extend', 'range': [351, 363], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [354, 362], 'children': []}]}]}, {'type': 'IfStatement', 'name': '', 'range': [365, 385], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [366, 368], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [370, 385], 'children': [{'type': 'ExpressionStatement', 'name': '', 'range': [371, 384], 'children': [{'type': 'CallExpression', 'name': 'all_tokens.extend', 'range': [372, 383], 'children': [{'type': 'Argument', 'name': 'result.get', 'range': [375, 382], 'children': []}]}]}]}]}]}]}, {'type': 'YieldStatement', 'name': '', 'range': [387, 391], 'children': [{'type': 'Literal', 'name': '"chunks"', 'range': [388, 388], 'children': []}, {'type': 'Identifier', 'name': 'all_chunks', 'range': [390, 390], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [392, 402], 'children': [{'type': 'MemberExpression', 'name': 'input_data.return_tokens', 'range': [393, 395], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [397, 402], 'children': [{'type': 'YieldStatement', 'name': '', 'range': [398, 401], 'children': [{'type': 'Literal', 'name': '"tokens"', 'range': [399, 399], 'children': []}, {'type': 'Identifier', 'name': 'all_tokens', 'range': [401, 401], 'children': []}]}]}]}]}]}
2025-01-08 10:01:16,185 - INFO - Completed main AST analysis flow
2025-01-08 10:01:16,186 - INFO - Successfully processed chunk
2025-01-08 10:01:16,213 - INFO - Starting code generation from AST
2025-01-08 10:01:26,767 - INFO - Successfully generated code from AST
2025-01-08 10:01:26,767 - INFO - Starting static code similarity comparison
2025-01-08 10:01:26,772 - INFO - Static similarity result: {'final_score': 86.87, 'length_similarity': 84.59, 'token_similarity': 87.76, 'structure_similarity': 71.43, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
