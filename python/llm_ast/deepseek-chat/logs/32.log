2025-01-08 10:27:27,196 - INFO - Processing sample 32
2025-01-08 10:27:27,201 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:46,505 - INFO - Successfully split code into 21 top-level declarations
2025-01-08 10:27:50,389 - INFO - Processing chunk #0 (size=243 chars, start_index=0)
2025-01-08 10:27:50,389 - INFO - Processing chunk with 243 chars starting at index 0
2025-01-08 10:27:50,389 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,389 - INFO - Tokenized code into 58 tokens
2025-01-08 10:27:50,390 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:50,398 - INFO - Processing chunk #1 (size=128 chars, start_index=58)
2025-01-08 10:27:50,399 - INFO - Processing chunk with 128 chars starting at index 58
2025-01-08 10:27:50,402 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,406 - INFO - Tokenized code into 38 tokens
2025-01-08 10:27:50,407 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,472 - INFO - Processing chunk #2 (size=114 chars, start_index=96)
2025-01-08 10:27:51,473 - INFO - Processing chunk with 114 chars starting at index 96
2025-01-08 10:27:51,473 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,473 - INFO - Tokenized code into 17 tokens
2025-01-08 10:27:51,473 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,793 - INFO - Processing chunk #3 (size=97 chars, start_index=113)
2025-01-08 10:27:51,795 - INFO - Processing chunk with 97 chars starting at index 113
2025-01-08 10:27:51,795 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,795 - INFO - Tokenized code into 13 tokens
2025-01-08 10:27:51,795 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,861 - INFO - Processing chunk #4 (size=193 chars, start_index=126)
2025-01-08 10:27:51,861 - INFO - Processing chunk with 193 chars starting at index 126
2025-01-08 10:27:51,865 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,865 - INFO - Tokenized code into 34 tokens
2025-01-08 10:27:51,865 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,884 - INFO - Processing chunk #5 (size=926 chars, start_index=160)
2025-01-08 10:27:51,892 - INFO - Processing chunk with 926 chars starting at index 160
2025-01-08 10:27:51,893 - INFO - Starting main AST analysis flow
2025-01-08 10:27:51,893 - INFO - Tokenized code into 192 tokens
2025-01-08 10:27:51,934 - INFO - Processing chunk #6 (size=1405 chars, start_index=352)
2025-01-08 10:27:51,934 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:51,956 - INFO - Processing chunk with 1405 chars starting at index 352
2025-01-08 10:27:52,008 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,015 - INFO - Processing chunk #7 (size=1437 chars, start_index=611)
2025-01-08 10:27:52,104 - INFO - Processing chunk with 1437 chars starting at index 611
2025-01-08 10:27:52,105 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,120 - INFO - Tokenized code into 259 tokens
2025-01-08 10:27:52,120 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,160 - INFO - Tokenized code into 259 tokens
2025-01-08 10:27:52,189 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,508 - INFO - Processing chunk #8 (size=1371 chars, start_index=870)
2025-01-08 10:27:52,645 - INFO - Processing chunk #9 (size=1424 chars, start_index=1129)
2025-01-08 10:27:52,716 - INFO - Processing chunk with 1371 chars starting at index 870
2025-01-08 10:27:52,766 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,766 - INFO - Tokenized code into 259 tokens
2025-01-08 10:27:52,766 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,764 - INFO - Processing chunk with 1424 chars starting at index 1129
2025-01-08 10:27:52,776 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,767 - INFO - Processing chunk #10 (size=1374 chars, start_index=1391)
2025-01-08 10:27:52,793 - INFO - Processing chunk with 1374 chars starting at index 1391
2025-01-08 10:27:52,810 - INFO - Starting main AST analysis flow
2025-01-08 10:27:52,777 - INFO - Tokenized code into 262 tokens
2025-01-08 10:27:52,814 - INFO - Tokenized code into 246 tokens
2025-01-08 10:27:52,839 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:52,843 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:54,245 - INFO - Processing chunk #11 (size=1466 chars, start_index=1637)
2025-01-08 10:27:54,248 - INFO - Processing chunk with 1466 chars starting at index 1637
2025-01-08 10:27:54,249 - INFO - Starting main AST analysis flow
2025-01-08 10:27:55,199 - INFO - Processing chunk #12 (size=604 chars, start_index=1918)
2025-01-08 10:27:55,199 - INFO - Processing chunk with 604 chars starting at index 1918
2025-01-08 10:27:55,199 - INFO - Starting main AST analysis flow
2025-01-08 10:27:55,199 - INFO - Tokenized code into 112 tokens
2025-01-08 10:27:55,453 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:55,523 - INFO - Tokenized code into 281 tokens
2025-01-08 10:27:55,538 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,859 - INFO - Processing chunk #13 (size=1159 chars, start_index=2030)
2025-01-08 10:27:58,861 - INFO - Processing chunk with 1159 chars starting at index 2030
2025-01-08 10:27:58,861 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,862 - INFO - Tokenized code into 208 tokens
2025-01-08 10:27:58,862 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,862 - INFO - Processing chunk #14 (size=854 chars, start_index=2238)
2025-01-08 10:27:58,868 - INFO - Processing chunk #15 (size=1334 chars, start_index=2417)
2025-01-08 10:27:58,869 - INFO - Processing chunk with 854 chars starting at index 2238
2025-01-08 10:27:58,877 - INFO - Processing chunk #16 (size=614 chars, start_index=2678)
2025-01-08 10:27:58,892 - INFO - Processing chunk with 1334 chars starting at index 2417
2025-01-08 10:27:58,897 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,898 - INFO - Processing chunk with 614 chars starting at index 2678
2025-01-08 10:27:58,915 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,932 - INFO - Tokenized code into 179 tokens
2025-01-08 10:27:58,936 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,962 - INFO - Tokenized code into 261 tokens
2025-01-08 10:27:58,962 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,966 - INFO - Tokenized code into 112 tokens
2025-01-08 10:27:58,969 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,990 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,410 - INFO - Processing chunk #17 (size=862 chars, start_index=2790)
2025-01-08 10:27:59,419 - INFO - Processing chunk with 862 chars starting at index 2790
2025-01-08 10:27:59,419 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,419 - INFO - Tokenized code into 162 tokens
2025-01-08 10:27:59,419 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,431 - INFO - Processing chunk #18 (size=1447 chars, start_index=2952)
2025-01-08 10:27:59,450 - INFO - Processing chunk #19 (size=873 chars, start_index=3223)
2025-01-08 10:27:59,451 - INFO - Processing chunk with 1447 chars starting at index 2952
2025-01-08 10:27:59,456 - INFO - Processing chunk #20 (size=628 chars, start_index=3393)
2025-01-08 10:27:59,470 - INFO - Processing chunk with 873 chars starting at index 3223
2025-01-08 10:27:59,503 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,508 - INFO - Processing chunk with 628 chars starting at index 3393
2025-01-08 10:27:59,509 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,510 - INFO - Tokenized code into 271 tokens
2025-01-08 10:27:59,511 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,512 - INFO - Tokenized code into 170 tokens
2025-01-08 10:27:59,517 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,519 - INFO - Tokenized code into 111 tokens
2025-01-08 10:27:59,520 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,537 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:28:00,279 - INFO - Step 1 result: {'type': 'Program', 'name': 'override_get_user_id', 'range': [113, 125], 'children': []}
2025-01-08 10:28:00,280 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,479 - INFO - Step 1 result: {'type': 'Program', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': []}
2025-01-08 10:28:00,479 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,484 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': []}
2025-01-08 10:28:00,485 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,490 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': []}
2025-01-08 10:28:00,490 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,523 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': []}
2025-01-08 10:28:00,523 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,602 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': []}
2025-01-08 10:28:00,602 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,927 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': []}
2025-01-08 10:28:00,927 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,971 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': []}
2025-01-08 10:28:00,976 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:00,973 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': []}
2025-01-08 10:28:01,055 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:03,020 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [58, 95], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [58, 64], 'children': []}, {'type': 'MethodCall', 'name': 'include_router', 'range': [66, 81], 'children': []}, {'type': 'VariableDeclaration', 'name': 'client', 'range': [84, 93], 'children': []}]}
2025-01-08 10:28:03,054 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:04,849 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': []}
2025-01-08 10:28:04,849 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:06,464 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 57], 'children': [{'type': 'ImportDeclaration', 'name': 'datetime', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.depends', 'range': [4, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.middleware', 'range': [11, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [18, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.testclient', 'range': [21, 25], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma.enums', 'range': [26, 30], 'children': []}, {'type': 'ImportDeclaration', 'name': 'pytest_mock', 'range': [31, 33], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.model', 'range': [35, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [46, 56], 'children': []}]}
2025-01-08 10:28:06,464 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:08,996 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': []}
2025-01-08 10:28:08,996 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:09,964 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': []}
2025-01-08 10:28:09,990 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:09,993 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': []}
2025-01-08 10:28:10,090 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_creator_details', 'range': [2790, 2951], 'children': []}
2025-01-08 10:28:10,176 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,132 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': []}
2025-01-08 10:28:10,103 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,184 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,320 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': []}
2025-01-08 10:28:10,326 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,615 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': []}
2025-01-08 10:28:10,615 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,754 - INFO - Step 1 result: {'type': 'Program', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': []}
2025-01-08 10:28:10,755 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:11,740 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [126, 159], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [126, 143], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [126, 137], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [128, 128], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [130, 130], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'auth_middleware', 'range': [136, 136], 'children': []}]}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [141, 141], 'children': []}]}, {'type': 'AssignmentExpression', 'name': '', 'range': [145, 159], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [145, 156], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [145, 145], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [147, 147], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [149, 149], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'depends', 'range': [153, 153], 'children': []}, {'type': 'Identifier', 'name': 'get_user_id', 'range': [155, 155], 'children': []}]}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [158, 158], 'children': []}]}]}
2025-01-08 10:28:11,740 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:19,932 - INFO - Step 2 result: {'type': 'Program', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionDeclaration', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionSignature', 'name': 'override_get_user_id', 'range': [113, 117], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [114, 114], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [115, 115], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [116, 116], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [117, 117], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_get_user_id', 'range': [118, 125], 'children': [{'type': 'Docstring', 'name': 'Override get_user_id for testing', 'range': [119, 121], 'children': [{'type': 'String', 'name': '""', 'range': [119, 119], 'children': []}, {'type': 'String', 'name': '"Override get_user_id for testing"', 'range': [120, 120], 'children': []}, {'type': 'String', 'name': '""', 'range': [121, 121], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [123, 124], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [123, 123], 'children': []}, {'type': 'String', 'name': '"test-user-id"', 'range': [124, 124], 'children': []}]}]}]}]}
2025-01-08 10:28:19,932 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:21,987 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1921, 1925], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [1929, 1935], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=-1")', 'range': [1936, 1944], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1945, 1952], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [1954, 1960], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page_size=0")', 'range': [1961, 1969], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1970, 1977], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [1979, 1986], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=abc&page_size=def")', 'range': [1987, 1995], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1996, 2003], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2005, 2012], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_agents")', 'range': [2013, 2021], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [2022, 2027], 'children': []}]}]}
2025-01-08 10:28:21,993 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:22,320 - INFO - Step 2 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [58, 64], 'children': [{'type': 'Assignment', 'name': '=', 'range': [59, 64], 'children': [{'type': 'ModuleAccess', 'name': 'fastapi.FastAPI', 'range': [60, 62], 'children': [{'type': 'Module', 'name': 'fastapi', 'range': [60, 60], 'children': []}, {'type': 'ClassInstantiation', 'name': 'FastAPI', 'range': [62, 64], 'children': []}]}]}]}, {'type': 'MethodCall', 'name': 'include_router', 'range': [66, 81], 'children': [{'type': 'ModuleAccess', 'name': 'backend.server.v2.store.routes.router', 'range': [70, 80], 'children': [{'type': 'Module', 'name': 'backend', 'range': [70, 70], 'children': []}, {'type': 'Module', 'name': 'server', 'range': [72, 72], 'children': []}, {'type': 'Module', 'name': 'v2', 'range': [74, 74], 'children': []}, {'type': 'Module', 'name': 'store', 'range': [76, 76], 'children': []}, {'type': 'Module', 'name': 'routes', 'range': [78, 78], 'children': []}, {'type': 'Router', 'name': 'router', 'range': [80, 80], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'client', 'range': [84, 93], 'children': [{'type': 'Assignment', 'name': '=', 'range': [85, 93], 'children': [{'type': 'ModuleAccess', 'name': 'fastapi.testclient.TestClient', 'range': [86, 90], 'children': [{'type': 'Module', 'name': 'fastapi', 'range': [86, 86], 'children': []}, {'type': 'Module', 'name': 'testclient', 'range': [88, 88], 'children': []}, {'type': 'ClassInstantiation', 'name': 'TestClient', 'range': [90, 93], 'children': [{'type': 'VariableReference', 'name': 'app', 'range': [92, 92], 'children': []}]}]}]}]}]}
2025-01-08 10:28:22,330 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:24,798 - INFO - Step 2 result: {'type': 'Program', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionDeclaration', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionSignature', 'name': 'override_auth_middleware', 'range': [96, 100], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [96, 96], 'children': []}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [97, 97], 'children': []}, {'type': 'Punctuation', 'name': '(', 'range': [98, 98], 'children': []}, {'type': 'Punctuation', 'name': ')', 'range': [99, 99], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [100, 100], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_auth_middleware', 'range': [101, 112], 'children': [{'type': 'Docstring', 'name': 'Override auth middleware for testing', 'range': [102, 104], 'children': [{'type': 'String', 'name': '""', 'range': [102, 102], 'children': []}, {'type': 'String', 'name': '"Override auth middleware for testing"', 'range': [103, 103], 'children': []}, {'type': 'String', 'name': '""', 'range': [104, 104], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [106, 111], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [106, 106], 'children': []}, {'type': 'ObjectLiteral', 'name': '{"sub": "test-user-id"}', 'range': [107, 111], 'children': [{'type': 'Punctuation', 'name': '{', 'range': [107, 107], 'children': []}, {'type': 'Property', 'name': '"sub": "test-user-id"', 'range': [108, 110], 'children': [{'type': 'String', 'name': '"sub"', 'range': [108, 108], 'children': []}, {'type': 'Punctuation', 'name': ':', 'range': [109, 109], 'children': []}, {'type': 'String', 'name': '"test-user-id"', 'range': [110, 110], 'children': []}]}, {'type': 'Punctuation', 'name': '}', 'range': [111, 111], 'children': []}]}]}]}]}]}
2025-01-08 10:28:24,798 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:27,431 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [873, 877], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [880, 1128], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [881, 1003], 'children': [{'type': 'Assignment', 'name': '=', 'range': [882, 1003], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [883, 1003], 'children': [{'type': 'List', 'name': 'agents', 'range': [896, 962], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [900, 960], 'children': []}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [965, 1000], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1005, 1018], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1006, 1018], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1007, 1012], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1014, 1018], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1015, 1018], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1020, 1028], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1021, 1028], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1022, 1027], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1029, 1036], 'children': []}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1037, 1061], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1038, 1061], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1048, 1060], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1062, 1072], 'children': []}, {'type': 'Assert', 'name': 'assert', 'range': [1073, 1085], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1086, 1126], 'children': []}]}]}]}
2025-01-08 10:28:27,431 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:29,497 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1640, 1644], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [1647, 1917], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1648, 1785], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1649, 1785], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1650, 1785], 'children': [{'type': 'ListInitialization', 'name': 'agents', 'range': [1663, 1744], 'children': [{'type': 'Loop', 'name': 'for', 'range': [1736, 1743], 'children': [{'type': 'Range', 'name': 'range', 'range': [1739, 1742], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1747, 1782], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'mock_db_call', 'range': [1787, 1801], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1788, 1801], 'children': [{'type': 'FunctionCall', 'name': 'mocker.patch', 'range': [1789, 1794], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'response', 'range': [1802, 1810], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1803, 1810], 'children': [{'type': 'FunctionCall', 'name': 'client.get', 'range': [1804, 1809], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1811, 1818], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1815, 1817], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1819, 1842], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1820, 1842], 'children': [{'type': 'FunctionCall', 'name': 'StoreAgentsResponse.model_validate', 'range': [1821, 1841], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1844, 1854], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1851, 1853], 'children': []}]}, {'type': 'Assert', 'name': 'assert', 'range': [1855, 1864], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1861, 1863], 'children': []}]}, {'type': 'Assert', 'name': 'assert', 'range': [1865, 1874], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1871, 1873], 'children': []}]}, {'type': 'FunctionCall', 'name': 'mock_db_call.assert_called_once_with', 'range': [1875, 1915], 'children': []}]}]}]}
2025-01-08 10:28:29,497 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:30,135 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2681, 2685], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [2689, 2695], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/creators?page=-1")', 'range': [2696, 2703], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2705, 2712], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [2714, 2720], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/creators?page_size=0")', 'range': [2721, 2728], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2730, 2737], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [2739, 2746], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/creators?page=abc&page_size=def")', 'range': [2747, 2754], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2756, 2763], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2765, 2772], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_creators")', 'range': [2773, 2780], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [2782, 2787], 'children': []}]}]}
2025-01-08 10:28:30,135 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:30,374 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3396, 3400], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [3404, 3410], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/submissions?page=-1")', 'range': [3411, 3418], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3420, 3427], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [3429, 3435], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/submissions?page_size=0")', 'range': [3436, 3443], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3445, 3452], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [3454, 3461], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/submissions?page=abc&page_size=def")', 'range': [3462, 3469], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3471, 3478], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [3480, 3487], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_submissions")', 'range': [3488, 3495], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [3497, 3502], 'children': []}]}]}
2025-01-08 10:28:30,374 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:30,948 - INFO - Step 3 result: {'type': 'Program', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionDeclaration', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionSignature', 'name': 'override_get_user_id', 'range': [113, 117], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [114, 114], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_get_user_id', 'range': [118, 125], 'children': [{'type': 'Docstring', 'name': 'Override get_user_id for testing', 'range': [119, 121], 'children': [{'type': 'String', 'name': '"Override get_user_id for testing"', 'range': [120, 120], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [123, 124], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [123, 123], 'children': []}, {'type': 'String', 'name': '"test-user-id"', 'range': [124, 124], 'children': []}]}]}]}]}
2025-01-08 10:28:30,948 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:32,947 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [355, 359], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [363, 485], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [365, 485], 'children': [{'type': 'ArrayLiteral', 'name': 'agents', 'range': [378, 444], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [382, 442], 'children': [{'type': 'PropertyAssignment', 'name': 'slug', 'range': [395, 397], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_name', 'range': [400, 402], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_image', 'range': [405, 407], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator', 'range': [410, 412], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator_avatar', 'range': [415, 417], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [420, 422], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [425, 427], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [430, 432], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [435, 439], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [449, 482], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [462, 464], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [467, 469], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [472, 474], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [477, 479], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [487, 494], 'children': []}, {'type': 'Assignment', 'name': 'mock_db_call.return_value', 'range': [496, 500], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [502, 509], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [511, 517], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [519, 541], 'children': []}, {'type': 'AssertStatement', 'name': 'len(data.agents)', 'range': [544, 553], 'children': []}, {'type': 'AssertStatement', 'name': 'data.agents[0].slug', 'range': [555, 566], 'children': []}, {'type': 'MethodCall', 'name': 'mock_db_call.assert_called_once_with', 'range': [568, 608], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [573, 575], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [578, 580], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [583, 585], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [588, 590], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [593, 595], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [598, 600], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [603, 605], 'children': []}]}]}]}
2025-01-08 10:28:32,947 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:35,149 - INFO - Step 3 result: {'type': 'Program', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionDeclaration', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionSignature', 'name': 'override_auth_middleware', 'range': [96, 100], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [96, 96], 'children': []}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [97, 97], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_auth_middleware', 'range': [101, 112], 'children': [{'type': 'Docstring', 'name': 'Override auth middleware for testing', 'range': [102, 104], 'children': [{'type': 'String', 'name': '"Override auth middleware for testing"', 'range': [103, 103], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [106, 111], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [106, 106], 'children': []}, {'type': 'ObjectLiteral', 'name': '{"sub": "test-user-id"}', 'range': [107, 111], 'children': [{'type': 'Property', 'name': '"sub": "test-user-id"', 'range': [108, 110], 'children': [{'type': 'String', 'name': '"sub"', 'range': [108, 108], 'children': []}, {'type': 'String', 'name': '"test-user-id"', 'range': [110, 110], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:35,149 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:35,523 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [0, 57], 'children': [{'type': 'ImportDeclaration', 'name': 'datetime', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'datetime', 'range': [0, 2], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.depends', 'range': [4, 10], 'children': [{'type': 'ImportSpecifier', 'name': 'autogpt_libs', 'range': [4, 5], 'children': []}, {'type': 'ImportSpecifier', 'name': 'auth', 'range': [6, 7], 'children': []}, {'type': 'ImportSpecifier', 'name': 'depends', 'range': [8, 9], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.middleware', 'range': [11, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'autogpt_libs', 'range': [11, 12], 'children': []}, {'type': 'ImportSpecifier', 'name': 'auth', 'range': [13, 14], 'children': []}, {'type': 'ImportSpecifier', 'name': 'middleware', 'range': [15, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [18, 20], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [18, 19], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'fastapi.testclient', 'range': [21, 25], 'children': [{'type': 'ImportSpecifier', 'name': 'fastapi', 'range': [21, 22], 'children': []}, {'type': 'ImportSpecifier', 'name': 'testclient', 'range': [23, 24], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'prisma.enums', 'range': [26, 30], 'children': [{'type': 'ImportSpecifier', 'name': 'prisma', 'range': [26, 27], 'children': []}, {'type': 'ImportSpecifier', 'name': 'enums', 'range': [28, 29], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'pytest_mock', 'range': [31, 33], 'children': [{'type': 'ImportSpecifier', 'name': 'pytest_mock', 'range': [31, 32], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.model', 'range': [35, 45], 'children': [{'type': 'ImportSpecifier', 'name': 'backend', 'range': [35, 36], 'children': []}, {'type': 'ImportSpecifier', 'name': 'server', 'range': [37, 38], 'children': []}, {'type': 'ImportSpecifier', 'name': 'v2', 'range': [39, 40], 'children': []}, {'type': 'ImportSpecifier', 'name': 'store', 'range': [41, 42], 'children': []}, {'type': 'ImportSpecifier', 'name': 'model', 'range': [43, 44], 'children': []}]}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [46, 56], 'children': [{'type': 'ImportSpecifier', 'name': 'backend', 'range': [46, 47], 'children': []}, {'type': 'ImportSpecifier', 'name': 'server', 'range': [48, 49], 'children': []}, {'type': 'ImportSpecifier', 'name': 'v2', 'range': [50, 51], 'children': []}, {'type': 'ImportSpecifier', 'name': 'store', 'range': [52, 53], 'children': []}, {'type': 'ImportSpecifier', 'name': 'routes', 'range': [54, 55], 'children': []}]}]}
2025-01-08 10:28:35,524 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:35,873 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1921, 1925], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [1929, 1935], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=-1")', 'range': [1936, 1944], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1945, 1952], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [1954, 1960], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page_size=0")', 'range': [1961, 1969], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1970, 1977], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [1979, 1986], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=abc&page_size=def")', 'range': [1987, 1995], 'children': []}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1996, 2003], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2005, 2012], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_agents")', 'range': [2013, 2021], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [2022, 2027], 'children': []}]}]}
2025-01-08 10:28:35,873 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:37,014 - INFO - Step 3 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [58, 64], 'children': [{'type': 'Assignment', 'name': '=', 'range': [59, 64], 'children': [{'type': 'ModuleAccess', 'name': 'fastapi.FastAPI', 'range': [60, 62], 'children': [{'type': 'Module', 'name': 'fastapi', 'range': [60, 60], 'children': []}, {'type': 'ClassInstantiation', 'name': 'FastAPI', 'range': [62, 64], 'children': []}]}]}]}, {'type': 'MethodCall', 'name': 'include_router', 'range': [66, 81], 'children': [{'type': 'ModuleAccess', 'name': 'backend.server.v2.store.routes.router', 'range': [70, 80], 'children': [{'type': 'Module', 'name': 'backend', 'range': [70, 70], 'children': []}, {'type': 'Module', 'name': 'server', 'range': [72, 72], 'children': []}, {'type': 'Module', 'name': 'v2', 'range': [74, 74], 'children': []}, {'type': 'Module', 'name': 'store', 'range': [76, 76], 'children': []}, {'type': 'Module', 'name': 'routes', 'range': [78, 78], 'children': []}, {'type': 'Router', 'name': 'router', 'range': [80, 80], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'client', 'range': [84, 93], 'children': [{'type': 'Assignment', 'name': '=', 'range': [85, 93], 'children': [{'type': 'ModuleAccess', 'name': 'fastapi.testclient.TestClient', 'range': [86, 90], 'children': [{'type': 'Module', 'name': 'fastapi', 'range': [86, 86], 'children': []}, {'type': 'Module', 'name': 'testclient', 'range': [88, 88], 'children': []}, {'type': 'ClassInstantiation', 'name': 'TestClient', 'range': [90, 93], 'children': [{'type': 'VariableReference', 'name': 'app', 'range': [92, 92], 'children': []}]}]}]}]}]}
2025-01-08 10:28:37,014 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:39,978 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [163, 167], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [170, 351], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [171, 230], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [172, 230], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse', 'range': [173, 230], 'children': [{'type': 'Argument', 'name': 'agents', 'range': [186, 189], 'children': []}, {'type': 'Argument', 'name': 'pagination', 'range': [192, 227], 'children': [{'type': 'CallExpression', 'name': 'Pagination', 'range': [194, 227], 'children': [{'type': 'Argument', 'name': 'current_page', 'range': [207, 209], 'children': []}, {'type': 'Argument', 'name': 'total_items', 'range': [212, 214], 'children': []}, {'type': 'Argument', 'name': 'total_pages', 'range': [217, 219], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [222, 224], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [232, 246], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [233, 246], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [234, 239], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [238, 238], 'children': []}]}, {'type': 'MemberExpression', 'name': 'return_value', 'range': [242, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [247, 263], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [248, 263], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [249, 254], 'children': [{'type': 'Argument', 'name': '"/agents"', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [256, 263], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [260, 262], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [258, 259], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [262, 262], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [265, 289], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [266, 289], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [267, 288], 'children': [{'type': 'Argument', 'name': 'response', 'range': [282, 286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [290, 299], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [296, 298], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [294, 295], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [298, 298], 'children': []}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [300, 308], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [305, 307], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [303, 304], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [306, 307], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [309, 350], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [310, 349], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [314, 316], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [319, 321], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [324, 326], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [329, 331], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [334, 336], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [339, 341], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [344, 346], 'children': []}]}]}]}]}]}
2025-01-08 10:28:39,979 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:40,172 - INFO - Step 4 result: {'type': 'Program', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionDecl', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionSignature', 'name': 'override_get_user_id', 'range': [113, 117], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [114, 114], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_get_user_id', 'range': [118, 125], 'children': [{'type': 'Docstring', 'name': 'Override get_user_id for testing', 'range': [119, 121], 'children': [{'type': 'Literal', 'name': '"Override get_user_id for testing"', 'range': [120, 120], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [123, 124], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [123, 123], 'children': []}, {'type': 'Literal', 'name': '"test-user-id"', 'range': [124, 124], 'children': []}]}]}]}]}
2025-01-08 10:28:40,176 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:40,204 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2033, 2037], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2041, 2146], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentDetails', 'range': [2043, 2146], 'children': [{'type': 'Argument', 'name': 'store_listing_version_id', 'range': [2056, 2058], 'children': []}, {'type': 'Argument', 'name': 'slug', 'range': [2061, 2063], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2066, 2068], 'children': []}, {'type': 'Argument', 'name': 'agent_video', 'range': [2071, 2073], 'children': []}, {'type': 'Argument', 'name': 'agent_image', 'range': [2076, 2082], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [2085, 2087], 'children': []}, {'type': 'Argument', 'name': 'creator_avatar', 'range': [2090, 2092], 'children': []}, {'type': 'Argument', 'name': 'sub_heading', 'range': [2095, 2097], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [2100, 2102], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [2105, 2111], 'children': []}, {'type': 'Argument', 'name': 'runs', 'range': [2114, 2116], 'children': []}, {'type': 'Argument', 'name': 'rating', 'range': [2119, 2123], 'children': []}, {'type': 'Argument', 'name': 'versions', 'range': [2126, 2132], 'children': []}, {'type': 'Argument', 'name': 'last_updated', 'range': [2135, 2143], 'children': []}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [2148, 2162], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2150, 2155], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [2164, 2172], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2166, 2171], 'children': []}]}, {'type': 'Assertion', 'name': 'response.status_code', 'range': [2173, 2180], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [2182, 2206], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2184, 2205], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2199, 2203], 'children': []}]}]}, {'type': 'Assertion', 'name': 'data.agent_name', 'range': [2207, 2214], 'children': []}, {'type': 'Assertion', 'name': 'data.creator', 'range': [2215, 2222], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2223, 2234], 'children': [{'type': 'Argument', 'name': 'username', 'range': [2227, 2229], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2231, 2233], 'children': []}]}]}]}
2025-01-08 10:28:40,204 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:40,362 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_creator_details', 'range': [2790, 2951], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creator_details', 'range': [2790, 2951], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2793, 2797], 'children': []}, {'type': 'Block', 'name': '', 'range': [2800, 2951], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [2801, 2866], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2802, 2866], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorDetails', 'range': [2803, 2866], 'children': [{'type': 'PropertyAssignment', 'name': 'name', 'range': [2816, 2818], 'children': []}, {'type': 'PropertyAssignment', 'name': 'username', 'range': [2821, 2823], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [2826, 2828], 'children': []}, {'type': 'PropertyAssignment', 'name': 'links', 'range': [2831, 2837], 'children': []}, {'type': 'PropertyAssignment', 'name': 'avatar_url', 'range': [2840, 2842], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_rating', 'range': [2845, 2850], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_runs', 'range': [2852, 2854], 'children': []}, {'type': 'PropertyAssignment', 'name': 'top_categories', 'range': [2857, 2863], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [2868, 2882], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2869, 2882], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2870, 2875], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2877, 2882], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [2878, 2882], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [2884, 2892], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2885, 2892], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [2886, 2891], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2893, 2900], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2894, 2899], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [2902, 2924], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2903, 2924], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2904, 2923], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2925, 2932], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2926, 2931], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2933, 2940], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2934, 2939], 'children': []}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2941, 2949], 'children': []}]}]}]}
2025-01-08 10:28:40,362 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:40,456 - INFO - Step 2 result: {'nodes': [{'type': 'AssignmentExpression', 'name': '', 'range': [126, 143], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [126, 137], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [126, 126], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [127, 127], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [128, 128], 'children': []}, {'type': 'Literal', 'name': '[', 'range': [129, 129], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [130, 130], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [131, 131], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [132, 132], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [133, 133], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [134, 134], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [135, 135], 'children': []}, {'type': 'Identifier', 'name': 'auth_middleware', 'range': [136, 136], 'children': []}, {'type': 'Literal', 'name': ']', 'range': [137, 137], 'children': []}]}, {'type': 'Literal', 'name': '=', 'range': [138, 138], 'children': []}, {'type': 'Literal', 'name': '(', 'range': [139, 139], 'children': []}, {'type': 'Literal', 'name': '\n', 'range': [140, 140], 'children': []}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [141, 141], 'children': []}, {'type': 'Literal', 'name': '\n', 'range': [142, 142], 'children': []}, {'type': 'Literal', 'name': ')', 'range': [143, 143], 'children': []}]}, {'type': 'AssignmentExpression', 'name': '', 'range': [145, 159], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [145, 156], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [145, 145], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [146, 146], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [147, 147], 'children': []}, {'type': 'Literal', 'name': '[', 'range': [148, 148], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [149, 149], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [150, 150], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [151, 151], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [152, 152], 'children': []}, {'type': 'Identifier', 'name': 'depends', 'range': [153, 153], 'children': []}, {'type': 'Literal', 'name': '.', 'range': [154, 154], 'children': []}, {'type': 'Identifier', 'name': 'get_user_id', 'range': [155, 155], 'children': []}, {'type': 'Literal', 'name': ']', 'range': [156, 156], 'children': []}]}, {'type': 'Literal', 'name': '=', 'range': [157, 157], 'children': []}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [158, 158], 'children': []}, {'type': 'Literal', 'name': '\n', 'range': [159, 159], 'children': []}]}]}
2025-01-08 10:28:40,456 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:41,131 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2955, 2959], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2963, 3109], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmissionsResponse', 'range': [2965, 3109], 'children': [{'type': 'Array', 'name': 'submissions', 'range': [2978, 3068], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmission', 'range': [2982, 3066], 'children': [{'type': 'PropertyAssignment', 'name': 'name', 'range': [2995, 2997], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [3000, 3002], 'children': []}, {'type': 'PropertyAssignment', 'name': 'image_urls', 'range': [3005, 3009], 'children': []}, {'type': 'PropertyAssignment', 'name': 'date_submitted', 'range': [3012, 3021], 'children': []}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [3023, 3032], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [3034, 3036], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [3039, 3044], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_id', 'range': [3046, 3048], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_version', 'range': [3051, 3053], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [3056, 3058], 'children': []}, {'type': 'PropertyAssignment', 'name': 'slug', 'range': [3061, 3063], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [3071, 3106], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [3086, 3088], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [3091, 3093], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [3096, 3098], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [3101, 3103], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [3111, 3125], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [3113, 3118], 'children': []}]}, {'type': 'FunctionCall', 'name': 'get', 'range': [3127, 3135], 'children': []}, {'type': 'Assert', 'name': 'status_code', 'range': [3136, 3143], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [3145, 3169], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [3157, 3168], 'children': []}]}, {'type': 'Assert', 'name': 'len', 'range': [3170, 3180], 'children': []}, {'type': 'Assert', 'name': 'name', 'range': [3181, 3193], 'children': []}, {'type': 'Assert', 'name': 'current_page', 'range': [3194, 3203], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [3204, 3219], 'children': []}]}]}
2025-01-08 10:28:41,131 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:42,550 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2420, 2424], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2428, 2557], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorsResponse', 'range': [2430, 2557], 'children': [{'type': 'ListInitialization', 'name': 'creators', 'range': [2443, 2516], 'children': [{'type': 'ObjectCreation', 'name': 'Creator', 'range': [2447, 2506], 'children': [{'type': 'Assignment', 'name': 'name', 'range': [2460, 2463], 'children': []}, {'type': 'Assignment', 'name': 'username', 'range': [2466, 2469], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [2472, 2475], 'children': []}, {'type': 'Assignment', 'name': 'avatar_url', 'range': [2478, 2481], 'children': []}, {'type': 'Assignment', 'name': 'num_agents', 'range': [2484, 2486], 'children': []}, {'type': 'Assignment', 'name': 'agent_rating', 'range': [2489, 2493], 'children': []}, {'type': 'Assignment', 'name': 'agent_runs', 'range': [2496, 2498], 'children': []}, {'type': 'Assignment', 'name': 'is_featured', 'range': [2501, 2503], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [2519, 2554], 'children': [{'type': 'Assignment', 'name': 'current_page', 'range': [2534, 2536], 'children': []}, {'type': 'Assignment', 'name': 'total_items', 'range': [2539, 2541], 'children': []}, {'type': 'Assignment', 'name': 'total_pages', 'range': [2544, 2546], 'children': []}, {'type': 'Assignment', 'name': 'page_size', 'range': [2549, 2551], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [2559, 2573], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2561, 2566], 'children': []}]}, {'type': 'FunctionCall', 'name': 'get', 'range': [2575, 2582], 'children': []}, {'type': 'Assert', 'name': 'response.status_code', 'range': [2584, 2590], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [2593, 2616], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2605, 2615], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [2610, 2614], 'children': []}]}]}, {'type': 'Assert', 'name': 'len(data.creators)', 'range': [2618, 2627], 'children': []}, {'type': 'Assert', 'name': 'data.pagination.current_page', 'range': [2629, 2637], 'children': []}, {'type': 'Assert', 'name': 'data.pagination.page_size', 'range': [2639, 2647], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2649, 2674], 'children': [{'type': 'Assignment', 'name': 'featured', 'range': [2654, 2656], 'children': []}, {'type': 'Assignment', 'name': 'search_query', 'range': [2658, 2660], 'children': []}, {'type': 'Assignment', 'name': 'sorted_by', 'range': [2662, 2664], 'children': []}, {'type': 'Assignment', 'name': 'page', 'range': [2666, 2668], 'children': []}, {'type': 'Assignment', 'name': 'page_size', 'range': [2670, 2672], 'children': []}]}]}]}
2025-01-08 10:28:42,550 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:44,648 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [0, 57], 'children': [{'type': 'ImportDeclaration', 'name': 'datetime', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.depends', 'range': [4, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.middleware', 'range': [11, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [18, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.testclient', 'range': [21, 25], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma.enums', 'range': [26, 30], 'children': []}, {'type': 'ImportDeclaration', 'name': 'pytest_mock', 'range': [31, 33], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.model', 'range': [35, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [46, 56], 'children': []}]}
2025-01-08 10:28:44,648 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:45,813 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1394, 1398], 'children': []}, {'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1402, 1524], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1403, 1524], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1404, 1524], 'children': [{'type': 'PropertyAssignment', 'name': 'agents', 'range': [1417, 1483], 'children': [{'type': 'ArrayCreation', 'name': '[', 'range': [1419, 1483], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [1421, 1481], 'children': [{'type': 'PropertyAssignment', 'name': 'slug', 'range': [1434, 1436], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_name', 'range': [1439, 1441], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_image', 'range': [1444, 1446], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator', 'range': [1449, 1451], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator_avatar', 'range': [1454, 1456], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [1459, 1461], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [1464, 1466], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [1469, 1471], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [1474, 1478], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'pagination', 'range': [1486, 1521], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1488, 1521], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [1501, 1503], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [1506, 1508], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [1511, 1513], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [1516, 1518], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1526, 1540], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1527, 1540], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1528, 1533], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1535, 1540], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1536, 1537], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [1539, 1540], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1541, 1549], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1542, 1549], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1543, 1548], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1550, 1557], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1554, 1556], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [1552, 1553], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [1556, 1557], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1558, 1582], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1559, 1582], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1560, 1581], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [1575, 1579], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1583, 1593], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1590, 1592], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [1584, 1589], 'children': [{'type': 'PropertyAccess', 'name': 'agents', 'range': [1587, 1588], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [1592, 1593], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1594, 1634], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [1599, 1601], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [1604, 1606], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [1609, 1611], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [1614, 1616], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [1619, 1621], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [1624, 1626], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [1629, 1631], 'children': []}]}]}]}
2025-01-08 10:28:45,814 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:45,954 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2681, 2685], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [2689, 2695], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2696, 2703], 'children': [{'type': 'Literal', 'name': '"/creators?page=-1"', 'range': [2702, 2702], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2705, 2712], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [2714, 2720], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2721, 2728], 'children': [{'type': 'Literal', 'name': '"/creators?page_size=0"', 'range': [2727, 2727], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2730, 2737], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [2739, 2746], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2747, 2754], 'children': [{'type': 'Literal', 'name': '"/creators?page=abc&page_size=def"', 'range': [2753, 2753], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2756, 2763], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2765, 2772], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [2773, 2780], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_creators"', 'range': [2779, 2779], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [2782, 2787], 'children': []}]}]}
2025-01-08 10:28:45,954 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:46,505 - INFO - Step 4 result: {'type': 'Program', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionDecl', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionSignature', 'name': 'override_auth_middleware', 'range': [96, 100], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [96, 96], 'children': []}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [97, 97], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_auth_middleware', 'range': [101, 112], 'children': [{'type': 'Docstring', 'name': 'Override auth middleware for testing', 'range': [102, 104], 'children': [{'type': 'Literal', 'name': '"Override auth middleware for testing"', 'range': [103, 103], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [106, 111], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [106, 106], 'children': []}, {'type': 'ObjectLiteral', 'name': '{"sub": "test-user-id"}', 'range': [107, 111], 'children': [{'type': 'Property', 'name': '"sub": "test-user-id"', 'range': [108, 110], 'children': [{'type': 'Literal', 'name': '"sub"', 'range': [108, 108], 'children': []}, {'type': 'Literal', 'name': '"test-user-id"', 'range': [110, 110], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:46,505 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:46,593 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3396, 3400], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [3404, 3410], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3411, 3418], 'children': [{'type': 'Literal', 'name': '"/submissions?page=-1"', 'range': [3417, 3417], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3420, 3427], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [3429, 3435], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3436, 3443], 'children': [{'type': 'Literal', 'name': '"/submissions?page_size=0"', 'range': [3442, 3442], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3445, 3452], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [3454, 3461], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3462, 3469], 'children': [{'type': 'Literal', 'name': '"/submissions?page=abc&page_size=def"', 'range': [3468, 3468], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3471, 3478], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [3480, 3487], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [3488, 3495], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3494, 3494], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [3497, 3502], 'children': []}]}]}
2025-01-08 10:28:46,593 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:47,215 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [873, 877], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [880, 1128], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [881, 1003], 'children': [{'type': 'Assignment', 'name': '=', 'range': [882, 1003], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [883, 1003], 'children': [{'type': 'List', 'name': 'agents', 'range': [896, 962], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [900, 960], 'children': []}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [965, 1000], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1005, 1018], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1006, 1018], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1007, 1012], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1014, 1018], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1015, 1018], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1020, 1028], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1021, 1028], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1022, 1027], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1029, 1036], 'children': []}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1037, 1061], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1038, 1061], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1048, 1060], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1062, 1072], 'children': []}, {'type': 'Assert', 'name': 'assert', 'range': [1073, 1085], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1086, 1126], 'children': []}]}]}]}
2025-01-08 10:28:47,215 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:47,405 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3226, 3230], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [3233, 3392], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [3234, 3293], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3235, 3293], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmissionsResponse', 'range': [3236, 3293], 'children': [{'type': 'Property', 'name': 'submissions', 'range': [3249, 3252], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [3255, 3290], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [3257, 3290], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3270, 3272], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3275, 3277], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3280, 3282], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3285, 3287], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [3295, 3309], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3296, 3309], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [3297, 3302], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3301, 3301], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [3304, 3309], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [3305, 3306], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [3308, 3308], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [3311, 3327], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3312, 3327], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [3313, 3318], 'children': [{'type': 'Argument', 'name': '"/submissions?page=2&page_size=5"', 'range': [3317, 3317], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3320, 3327], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3324, 3326], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [3322, 3323], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [3326, 3326], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [3329, 3353], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3330, 3353], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [3331, 3352], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [3345, 3351], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3354, 3363], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3360, 3362], 'children': [{'type': 'PropertyAccess', 'name': 'current_page', 'range': [3358, 3359], 'children': []}, {'type': 'Literal', 'name': '2', 'range': [3362, 3362], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3364, 3373], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3370, 3372], 'children': [{'type': 'PropertyAccess', 'name': 'page_size', 'range': [3368, 3369], 'children': []}, {'type': 'Literal', 'name': '5', 'range': [3372, 3372], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [3374, 3389], 'children': [{'type': 'Argument', 'name': 'user_id="test-user-id"', 'range': [3378, 3380], 'children': []}, {'type': 'Argument', 'name': 'page=2', 'range': [3382, 3384], 'children': []}, {'type': 'Argument', 'name': 'page_size=5', 'range': [3386, 3388], 'children': []}]}]}]}]}
2025-01-08 10:28:47,405 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:47,714 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2241, 2245], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [2248, 2414], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [2249, 2308], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2250, 2308], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorsResponse', 'range': [2251, 2308], 'children': [{'type': 'Property', 'name': 'creators', 'range': [2264, 2267], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [2270, 2305], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [2272, 2305], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [2285, 2287], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [2290, 2292], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [2295, 2297], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [2300, 2302], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2310, 2324], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2311, 2324], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2312, 2317], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2322, 2324], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [2323, 2324], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [2326, 2334], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2327, 2334], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [2328, 2333], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2335, 2342], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2339, 2341], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [2337, 2338], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [2341, 2341], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'data', 'range': [2344, 2368], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2345, 2368], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2358, 2367], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [2363, 2365], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2369, 2378], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2375, 2377], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [2373, 2374], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [2377, 2377], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2379, 2387], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2383, 2385], 'children': [{'type': 'MemberExpression', 'name': 'creators', 'range': [2381, 2382], 'children': []}, {'type': 'ArrayExpression', 'name': '[]', 'range': [2385, 2386], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2388, 2413], 'children': [{'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2390, 2413], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [2393, 2395], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [2397, 2399], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [2401, 2403], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [2405, 2407], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [2409, 2411], 'children': []}]}]}]}]}]}
2025-01-08 10:28:47,714 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:48,825 - INFO - Step 5 result: {'type': 'Program', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionDecl', 'name': 'override_get_user_id', 'range': [113, 125], 'children': [{'type': 'FunctionSignature', 'name': 'override_get_user_id', 'range': [113, 117], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [113, 113], 'children': []}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [114, 114], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_get_user_id', 'range': [118, 125], 'children': [{'type': 'Docstring', 'name': 'Override get_user_id for testing', 'range': [119, 121], 'children': [{'type': 'Literal', 'name': '"Override get_user_id for testing"', 'range': [120, 120], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [123, 124], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [123, 123], 'children': []}, {'type': 'Literal', 'name': '"test-user-id"', 'range': [124, 124], 'children': []}]}]}]}]}
2025-01-08 10:28:48,825 - INFO - Completed main AST analysis flow
2025-01-08 10:28:48,825 - INFO - Successfully processed chunk
2025-01-08 10:28:49,923 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1640, 1644], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [1647, 1917], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1648, 1785], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1649, 1785], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1650, 1785], 'children': [{'type': 'ListInitialization', 'name': 'agents', 'range': [1663, 1744], 'children': [{'type': 'Loop', 'name': 'for', 'range': [1736, 1743], 'children': [{'type': 'Range', 'name': 'range', 'range': [1739, 1742], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1747, 1782], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'mock_db_call', 'range': [1787, 1801], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1788, 1801], 'children': [{'type': 'FunctionCall', 'name': 'mocker.patch', 'range': [1789, 1794], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'response', 'range': [1802, 1810], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1803, 1810], 'children': [{'type': 'FunctionCall', 'name': 'client.get', 'range': [1804, 1809], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1811, 1818], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1815, 1817], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1819, 1842], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1820, 1842], 'children': [{'type': 'FunctionCall', 'name': 'StoreAgentsResponse.model_validate', 'range': [1821, 1841], 'children': []}]}]}, {'type': 'Assert', 'name': 'assert', 'range': [1844, 1854], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1851, 1853], 'children': []}]}, {'type': 'Assert', 'name': 'assert', 'range': [1855, 1864], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1861, 1863], 'children': []}]}, {'type': 'Assert', 'name': 'assert', 'range': [1865, 1874], 'children': [{'type': 'Comparison', 'name': '==', 'range': [1871, 1873], 'children': []}]}, {'type': 'FunctionCall', 'name': 'mock_db_call.assert_called_once_with', 'range': [1875, 1915], 'children': []}]}]}]}
2025-01-08 10:28:49,923 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:50,026 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [614, 618], 'children': []}, {'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [622, 744], 'children': [{'type': 'Assignment', 'name': '=', 'range': [623, 744], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [624, 744], 'children': [{'type': 'Property', 'name': 'agents', 'range': [637, 703], 'children': [{'type': 'Array', 'name': '', 'range': [639, 703], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [641, 701], 'children': [{'type': 'Property', 'name': 'slug', 'range': [654, 656], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [659, 661], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [664, 666], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [669, 671], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [674, 676], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [679, 681], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [684, 686], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [689, 691], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [694, 698], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [706, 741], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [708, 741], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [721, 723], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [726, 728], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [731, 733], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [736, 738], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [746, 760], 'children': [{'type': 'Assignment', 'name': '=', 'range': [747, 760], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [748, 753], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [755, 760], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [756, 757], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [759, 759], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [761, 769], 'children': [{'type': 'Assignment', 'name': '=', 'range': [762, 769], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [763, 768], 'children': [{'type': 'Argument', 'name': '"/agents?creator=specific-creator"', 'range': [767, 767], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [770, 776], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [774, 775], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [772, 773], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [776, 776], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [778, 802], 'children': [{'type': 'Assignment', 'name': '=', 'range': [779, 802], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [780, 801], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [794, 799], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [803, 812], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [810, 811], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [804, 809], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [806, 808], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [812, 812], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [814, 826], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [823, 824], 'children': [{'type': 'PropertyAccess', 'name': 'creator', 'range': [821, 822], 'children': []}, {'type': 'Literal', 'name': '"specific-creator"', 'range': [825, 825], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [827, 868], 'children': [{'type': 'Argument', 'name': 'featured=False', 'range': [832, 834], 'children': []}, {'type': 'Argument', 'name': 'creator="specific-creator"', 'range': [837, 839], 'children': []}, {'type': 'Argument', 'name': 'sorted_by=None', 'range': [842, 844], 'children': []}, {'type': 'Argument', 'name': 'search_query=None', 'range': [847, 849], 'children': []}, {'type': 'Argument', 'name': 'category=None', 'range': [852, 854], 'children': []}, {'type': 'Argument', 'name': 'page=1', 'range': [857, 859], 'children': []}, {'type': 'Argument', 'name': 'page_size=20', 'range': [862, 864], 'children': []}]}]}]}
2025-01-08 10:28:50,027 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:51,469 - INFO - Step 4 result: {'nodes': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [58, 64], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [59, 64], 'children': [{'type': 'MemberExpression', 'name': 'fastapi.FastAPI', 'range': [60, 62], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [60, 60], 'children': []}, {'type': 'NewExpression', 'name': 'FastAPI', 'range': [62, 64], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [66, 81], 'children': [{'type': 'MemberExpression', 'name': 'backend.server.v2.store.routes.router', 'range': [70, 80], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [70, 70], 'children': []}, {'type': 'Identifier', 'name': 'server', 'range': [72, 72], 'children': []}, {'type': 'Identifier', 'name': 'v2', 'range': [74, 74], 'children': []}, {'type': 'Identifier', 'name': 'store', 'range': [76, 76], 'children': []}, {'type': 'Identifier', 'name': 'routes', 'range': [78, 78], 'children': []}, {'type': 'Identifier', 'name': 'router', 'range': [80, 80], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'client', 'range': [84, 93], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [85, 93], 'children': [{'type': 'MemberExpression', 'name': 'fastapi.testclient.TestClient', 'range': [86, 90], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [86, 86], 'children': []}, {'type': 'Identifier', 'name': 'testclient', 'range': [88, 88], 'children': []}, {'type': 'NewExpression', 'name': 'TestClient', 'range': [90, 93], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [92, 92], 'children': []}]}]}]}]}]}
2025-01-08 10:28:51,469 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:53,168 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [0, 57], 'children': [{'type': 'ImportDeclaration', 'name': 'datetime', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.depends', 'range': [4, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.middleware', 'range': [11, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [18, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.testclient', 'range': [21, 25], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma.enums', 'range': [26, 30], 'children': []}, {'type': 'ImportDeclaration', 'name': 'pytest_mock', 'range': [31, 33], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.model', 'range': [35, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [46, 56], 'children': []}]}
2025-01-08 10:28:53,168 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:53,279 - INFO - Step 3 result: {'nodes': [{'type': 'AssignmentExpression', 'name': '', 'range': [126, 143], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [126, 137], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [128, 128], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [130, 130], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'auth_middleware', 'range': [136, 136], 'children': []}]}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [141, 141], 'children': []}]}, {'type': 'AssignmentExpression', 'name': '', 'range': [145, 159], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [145, 156], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [145, 145], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [147, 147], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [149, 149], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'depends', 'range': [153, 153], 'children': []}, {'type': 'Identifier', 'name': 'get_user_id', 'range': [155, 155], 'children': []}]}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [158, 158], 'children': []}]}]}
2025-01-08 10:28:53,280 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:57,259 - INFO - Step 5 result: {'type': 'Program', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionDecl', 'name': 'override_auth_middleware', 'range': [96, 112], 'children': [{'type': 'FunctionSignature', 'name': 'override_auth_middleware', 'range': [96, 100], 'children': [{'type': 'Keyword', 'name': 'def', 'range': [96, 96], 'children': []}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [97, 97], 'children': []}]}, {'type': 'FunctionBody', 'name': 'override_auth_middleware', 'range': [101, 112], 'children': [{'type': 'Docstring', 'name': 'Override auth middleware for testing', 'range': [102, 104], 'children': [{'type': 'Literal', 'name': '"Override auth middleware for testing"', 'range': [103, 103], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [106, 111], 'children': [{'type': 'Keyword', 'name': 'return', 'range': [106, 106], 'children': []}, {'type': 'ObjectLiteral', 'name': '{"sub": "test-user-id"}', 'range': [107, 111], 'children': [{'type': 'Property', 'name': '"sub": "test-user-id"', 'range': [108, 110], 'children': [{'type': 'Literal', 'name': '"sub"', 'range': [108, 108], 'children': []}, {'type': 'Literal', 'name': '"test-user-id"', 'range': [110, 110], 'children': []}]}]}]}]}]}]}
2025-01-08 10:28:57,259 - INFO - Completed main AST analysis flow
2025-01-08 10:28:57,260 - INFO - Successfully processed chunk
2025-01-08 10:28:57,433 - INFO - Step 2 result: {'type': 'Program', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1132, 1136], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [1139, 1390], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1140, 1262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1141, 1262], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1142, 1262], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1155, 1221], 'children': [{'type': 'Array', 'name': '', 'range': [1157, 1221], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [1159, 1219], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1172, 1174], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1177, 1179], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1182, 1184], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1187, 1189], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1192, 1194], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1197, 1199], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1202, 1204], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1207, 1209], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1212, 1216], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1224, 1259], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1226, 1259], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1239, 1241], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1244, 1246], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1249, 1251], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1254, 1256], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1264, 1278], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1265, 1278], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1266, 1271], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [1270, 1271], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1273, 1278], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1274, 1278], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [1277, 1278], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1279, 1287], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1280, 1287], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1281, 1286], 'children': [{'type': 'Argument', 'name': '"/agents?search_query=specific"', 'range': [1285, 1286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1288, 1295], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1289, 1294], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [1290, 1292], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1289, 1290], 'children': []}]}, {'type': 'Literal', 'name': '200', 'range': [1294, 1294], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1296, 1320], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1297, 1320], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1298, 1319], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [1313, 1318], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [1315, 1317], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1321, 1331], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1322, 1330], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [1323, 1327], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [1324, 1327], 'children': [{'type': 'PropertyAccess', 'name': 'agents', 'range': [1325, 1327], 'children': [{'type': 'Identifier', 'name': 'data', 'range': [1324, 1325], 'children': []}]}]}]}, {'type': 'Literal', 'name': '1', 'range': [1330, 1330], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1332, 1347], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [1333, 1345], 'children': [{'type': 'Literal', 'name': '"specific"', 'range': [1333, 1333], 'children': []}, {'type': 'PropertyAccess', 'name': 'description.lower()', 'range': [1335, 1345], 'children': [{'type': 'PropertyAccess', 'name': 'description', 'range': [1336, 1342], 'children': [{'type': 'ArrayAccess', 'name': '', 'range': [1337, 1340], 'children': [{'type': 'Literal', 'name': '0', 'range': [1339, 1339], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'lower', 'range': [1344, 1345], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1348, 1388], 'children': [{'type': 'Argument', 'name': 'featured=False', 'range': [1353, 1356], 'children': []}, {'type': 'Argument', 'name': 'creator=None', 'range': [1358, 1361], 'children': []}, {'type': 'Argument', 'name': 'sorted_by=None', 'range': [1363, 1366], 'children': []}, {'type': 'Argument', 'name': 'search_query="specific"', 'range': [1368, 1371], 'children': []}, {'type': 'Argument', 'name': 'category=None', 'range': [1373, 1376], 'children': []}, {'type': 'Argument', 'name': 'page=1', 'range': [1378, 1381], 'children': []}, {'type': 'Argument', 'name': 'page_size=20', 'range': [1383, 1386], 'children': []}]}]}]}]}
2025-01-08 10:28:57,433 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:59,244 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [355, 359], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [363, 485], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [365, 485], 'children': [{'type': 'ArrayLiteral', 'name': 'agents', 'range': [378, 444], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [382, 442], 'children': [{'type': 'PropertyAssignment', 'name': 'slug', 'range': [395, 397], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_name', 'range': [400, 402], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_image', 'range': [405, 407], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator', 'range': [410, 412], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator_avatar', 'range': [415, 417], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [420, 422], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [425, 427], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [430, 432], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [435, 439], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [449, 482], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [462, 464], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [467, 469], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [472, 474], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [477, 479], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [487, 494], 'children': []}, {'type': 'Assignment', 'name': 'mock_db_call.return_value', 'range': [496, 500], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [502, 509], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [511, 517], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [519, 541], 'children': []}, {'type': 'AssertStatement', 'name': 'len(data.agents)', 'range': [544, 553], 'children': []}, {'type': 'AssertStatement', 'name': 'data.agents[0].slug', 'range': [555, 566], 'children': []}, {'type': 'MethodCall', 'name': 'mock_db_call.assert_called_once_with', 'range': [568, 608], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [573, 575], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [578, 580], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [583, 585], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [588, 590], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [593, 595], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [598, 600], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [603, 605], 'children': []}]}]}]}
2025-01-08 10:28:59,244 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:01,211 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [0, 57], 'children': [{'type': 'ImportDeclaration', 'name': 'datetime', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.depends', 'range': [4, 10], 'children': []}, {'type': 'ImportDeclaration', 'name': 'autogpt_libs.auth.middleware', 'range': [11, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi', 'range': [18, 20], 'children': []}, {'type': 'ImportDeclaration', 'name': 'fastapi.testclient', 'range': [21, 25], 'children': []}, {'type': 'ImportDeclaration', 'name': 'prisma.enums', 'range': [26, 30], 'children': []}, {'type': 'ImportDeclaration', 'name': 'pytest_mock', 'range': [31, 33], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.model', 'range': [35, 45], 'children': []}, {'type': 'ImportDeclaration', 'name': 'backend.server.v2.store.routes', 'range': [46, 56], 'children': []}]}
2025-01-08 10:29:01,212 - INFO - Completed main AST analysis flow
2025-01-08 10:29:01,212 - INFO - Successfully processed chunk
2025-01-08 10:29:02,817 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2033, 2037], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2041, 2146], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentDetails', 'range': [2043, 2146], 'children': [{'type': 'Argument', 'name': 'store_listing_version_id', 'range': [2056, 2058], 'children': []}, {'type': 'Argument', 'name': 'slug', 'range': [2061, 2063], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2066, 2068], 'children': []}, {'type': 'Argument', 'name': 'agent_video', 'range': [2071, 2073], 'children': []}, {'type': 'Argument', 'name': 'agent_image', 'range': [2076, 2082], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [2085, 2087], 'children': []}, {'type': 'Argument', 'name': 'creator_avatar', 'range': [2090, 2092], 'children': []}, {'type': 'Argument', 'name': 'sub_heading', 'range': [2095, 2097], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [2100, 2102], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [2105, 2111], 'children': []}, {'type': 'Argument', 'name': 'runs', 'range': [2114, 2116], 'children': []}, {'type': 'Argument', 'name': 'rating', 'range': [2119, 2123], 'children': []}, {'type': 'Argument', 'name': 'versions', 'range': [2126, 2132], 'children': []}, {'type': 'Argument', 'name': 'last_updated', 'range': [2135, 2143], 'children': []}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [2148, 2162], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2150, 2155], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [2164, 2172], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2166, 2171], 'children': []}]}, {'type': 'Assertion', 'name': 'response.status_code', 'range': [2173, 2180], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [2182, 2206], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2184, 2205], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2199, 2203], 'children': []}]}]}, {'type': 'Assertion', 'name': 'data.agent_name', 'range': [2207, 2214], 'children': []}, {'type': 'Assertion', 'name': 'data.creator', 'range': [2215, 2222], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2223, 2234], 'children': [{'type': 'Argument', 'name': 'username', 'range': [2227, 2229], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2231, 2233], 'children': []}]}]}]}
2025-01-08 10:29:02,817 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:03,992 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2681, 2685], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [2689, 2695], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2696, 2703], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2696, 2703], 'children': [{'type': 'Literal', 'name': '"/creators?page=-1"', 'range': [2702, 2702], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2705, 2712], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [2714, 2720], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2721, 2728], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2721, 2728], 'children': [{'type': 'Literal', 'name': '"/creators?page_size=0"', 'range': [2727, 2727], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2730, 2737], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [2739, 2746], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2747, 2754], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2747, 2754], 'children': [{'type': 'Literal', 'name': '"/creators?page=abc&page_size=def"', 'range': [2753, 2753], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2756, 2763], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2765, 2772], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [2773, 2780], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [2773, 2780], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_creators"', 'range': [2779, 2779], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [2782, 2787], 'children': []}]}]}
2025-01-08 10:29:03,993 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:04,046 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_creator_details', 'range': [2790, 2951], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creator_details', 'range': [2790, 2951], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2793, 2797], 'children': []}, {'type': 'Block', 'name': '', 'range': [2800, 2951], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [2801, 2866], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2802, 2866], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorDetails', 'range': [2803, 2866], 'children': [{'type': 'PropertyAssignment', 'name': 'name', 'range': [2816, 2818], 'children': []}, {'type': 'PropertyAssignment', 'name': 'username', 'range': [2821, 2823], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [2826, 2828], 'children': []}, {'type': 'PropertyAssignment', 'name': 'links', 'range': [2831, 2837], 'children': []}, {'type': 'PropertyAssignment', 'name': 'avatar_url', 'range': [2840, 2842], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_rating', 'range': [2845, 2850], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_runs', 'range': [2852, 2854], 'children': []}, {'type': 'PropertyAssignment', 'name': 'top_categories', 'range': [2857, 2863], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [2868, 2882], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2869, 2882], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2870, 2875], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [2877, 2882], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [2878, 2882], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [2884, 2892], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2885, 2892], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [2886, 2891], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2893, 2900], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2894, 2899], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [2902, 2924], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2903, 2924], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2904, 2923], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2925, 2932], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2926, 2931], 'children': []}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2933, 2940], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2934, 2939], 'children': []}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2941, 2949], 'children': []}]}]}]}
2025-01-08 10:29:04,046 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:04,711 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [873, 877], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [880, 1128], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [881, 1003], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [882, 1003], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [883, 1003], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [896, 962], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [900, 960], 'children': []}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [965, 1000], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1005, 1018], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1006, 1018], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1007, 1012], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1014, 1018], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1015, 1018], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1020, 1028], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1021, 1028], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1022, 1027], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1029, 1036], 'children': []}, {'type': 'VariableDecl', 'name': 'data', 'range': [1037, 1061], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1038, 1061], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1048, 1060], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1062, 1072], 'children': []}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1073, 1085], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1086, 1126], 'children': []}]}]}]}
2025-01-08 10:29:04,711 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:04,883 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3396, 3400], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [3404, 3410], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3411, 3418], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3411, 3418], 'children': [{'type': 'Literal', 'name': '"/submissions?page=-1"', 'range': [3417, 3417], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3420, 3427], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [3429, 3435], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3436, 3443], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3436, 3443], 'children': [{'type': 'Literal', 'name': '"/submissions?page_size=0"', 'range': [3442, 3442], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3445, 3452], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [3454, 3461], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3462, 3469], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3462, 3469], 'children': [{'type': 'Literal', 'name': '"/submissions?page=abc&page_size=def"', 'range': [3468, 3468], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3471, 3478], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [3480, 3487], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [3488, 3495], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [3488, 3495], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3494, 3494], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [3497, 3502], 'children': []}]}]}
2025-01-08 10:29:04,884 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:05,952 - INFO - Step 4 result: {'nodes': [{'type': 'AssignmentExpression', 'name': '', 'range': [126, 143], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [126, 137], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [128, 128], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [130, 130], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'auth_middleware', 'range': [136, 136], 'children': []}]}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [141, 141], 'children': []}]}, {'type': 'AssignmentExpression', 'name': '', 'range': [145, 159], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [145, 156], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [145, 145], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [147, 147], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [149, 149], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'depends', 'range': [153, 153], 'children': []}, {'type': 'Identifier', 'name': 'get_user_id', 'range': [155, 155], 'children': []}]}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [158, 158], 'children': []}]}]}
2025-01-08 10:29:05,952 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:06,000 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainProgram', 'range': [58, 93], 'children': [{'type': 'VariableDeclaration', 'name': 'app', 'range': [58, 64], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [59, 64], 'children': [{'type': 'MemberExpression', 'name': 'fastapi.FastAPI', 'range': [60, 62], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [60, 60], 'children': []}, {'type': 'NewExpression', 'name': 'FastAPI', 'range': [62, 64], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'include_router', 'range': [66, 81], 'children': [{'type': 'MemberExpression', 'name': 'backend.server.v2.store.routes.router', 'range': [70, 80], 'children': [{'type': 'Identifier', 'name': 'backend', 'range': [70, 70], 'children': []}, {'type': 'Identifier', 'name': 'server', 'range': [72, 72], 'children': []}, {'type': 'Identifier', 'name': 'v2', 'range': [74, 74], 'children': []}, {'type': 'Identifier', 'name': 'store', 'range': [76, 76], 'children': []}, {'type': 'Identifier', 'name': 'routes', 'range': [78, 78], 'children': []}, {'type': 'Identifier', 'name': 'router', 'range': [80, 80], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'client', 'range': [84, 93], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [85, 93], 'children': [{'type': 'MemberExpression', 'name': 'fastapi.testclient.TestClient', 'range': [86, 90], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [86, 86], 'children': []}, {'type': 'Identifier', 'name': 'testclient', 'range': [88, 88], 'children': []}, {'type': 'NewExpression', 'name': 'TestClient', 'range': [90, 93], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [92, 92], 'children': []}]}]}]}]}]}
2025-01-08 10:29:06,000 - INFO - Completed main AST analysis flow
2025-01-08 10:29:06,000 - INFO - Successfully processed chunk
2025-01-08 10:29:06,018 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2955, 2959], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2963, 3109], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmissionsResponse', 'range': [2965, 3109], 'children': [{'type': 'Array', 'name': 'submissions', 'range': [2978, 3068], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmission', 'range': [2982, 3066], 'children': [{'type': 'PropertyAssignment', 'name': 'name', 'range': [2995, 2997], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [3000, 3002], 'children': []}, {'type': 'PropertyAssignment', 'name': 'image_urls', 'range': [3005, 3009], 'children': []}, {'type': 'PropertyAssignment', 'name': 'date_submitted', 'range': [3012, 3021], 'children': []}, {'type': 'PropertyAssignment', 'name': 'status', 'range': [3023, 3032], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [3034, 3036], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [3039, 3044], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_id', 'range': [3046, 3048], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_version', 'range': [3051, 3053], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [3056, 3058], 'children': []}, {'type': 'PropertyAssignment', 'name': 'slug', 'range': [3061, 3063], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [3071, 3106], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [3086, 3088], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [3091, 3093], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [3096, 3098], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [3101, 3103], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [3111, 3125], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [3113, 3118], 'children': []}]}, {'type': 'FunctionCall', 'name': 'get', 'range': [3127, 3135], 'children': []}, {'type': 'Assert', 'name': 'status_code', 'range': [3136, 3143], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [3145, 3169], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [3157, 3168], 'children': []}]}, {'type': 'Assert', 'name': 'len', 'range': [3170, 3180], 'children': []}, {'type': 'Assert', 'name': 'name', 'range': [3181, 3193], 'children': []}, {'type': 'Assert', 'name': 'current_page', 'range': [3194, 3203], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [3204, 3219], 'children': []}]}]}
2025-01-08 10:29:06,018 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:07,921 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2420, 2424], 'children': []}, {'type': 'Assignment', 'name': 'mocked_value', 'range': [2428, 2557], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorsResponse', 'range': [2430, 2557], 'children': [{'type': 'ListInitialization', 'name': 'creators', 'range': [2443, 2516], 'children': [{'type': 'ObjectCreation', 'name': 'Creator', 'range': [2447, 2506], 'children': [{'type': 'Assignment', 'name': 'name', 'range': [2460, 2463], 'children': []}, {'type': 'Assignment', 'name': 'username', 'range': [2466, 2469], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [2472, 2475], 'children': []}, {'type': 'Assignment', 'name': 'avatar_url', 'range': [2478, 2481], 'children': []}, {'type': 'Assignment', 'name': 'num_agents', 'range': [2484, 2486], 'children': []}, {'type': 'Assignment', 'name': 'agent_rating', 'range': [2489, 2493], 'children': []}, {'type': 'Assignment', 'name': 'agent_runs', 'range': [2496, 2498], 'children': []}, {'type': 'Assignment', 'name': 'is_featured', 'range': [2501, 2503], 'children': []}]}]}, {'type': 'ObjectCreation', 'name': 'Pagination', 'range': [2519, 2554], 'children': [{'type': 'Assignment', 'name': 'current_page', 'range': [2534, 2536], 'children': []}, {'type': 'Assignment', 'name': 'total_items', 'range': [2539, 2541], 'children': []}, {'type': 'Assignment', 'name': 'total_pages', 'range': [2544, 2546], 'children': []}, {'type': 'Assignment', 'name': 'page_size', 'range': [2549, 2551], 'children': []}]}]}]}, {'type': 'Assignment', 'name': 'mock_db_call', 'range': [2559, 2573], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2561, 2566], 'children': []}]}, {'type': 'FunctionCall', 'name': 'get', 'range': [2575, 2582], 'children': []}, {'type': 'Assert', 'name': 'response.status_code', 'range': [2584, 2590], 'children': []}, {'type': 'Assignment', 'name': 'data', 'range': [2593, 2616], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2605, 2615], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [2610, 2614], 'children': []}]}]}, {'type': 'Assert', 'name': 'len(data.creators)', 'range': [2618, 2627], 'children': []}, {'type': 'Assert', 'name': 'data.pagination.current_page', 'range': [2629, 2637], 'children': []}, {'type': 'Assert', 'name': 'data.pagination.page_size', 'range': [2639, 2647], 'children': []}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2649, 2674], 'children': [{'type': 'Assignment', 'name': 'featured', 'range': [2654, 2656], 'children': []}, {'type': 'Assignment', 'name': 'search_query', 'range': [2658, 2660], 'children': []}, {'type': 'Assignment', 'name': 'sorted_by', 'range': [2662, 2664], 'children': []}, {'type': 'Assignment', 'name': 'page', 'range': [2666, 2668], 'children': []}, {'type': 'Assignment', 'name': 'page_size', 'range': [2670, 2672], 'children': []}]}]}]}
2025-01-08 10:29:07,922 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:11,030 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [163, 167], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [170, 351], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [171, 230], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [172, 230], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse', 'range': [173, 230], 'children': [{'type': 'Argument', 'name': 'agents', 'range': [186, 189], 'children': []}, {'type': 'Argument', 'name': 'pagination', 'range': [192, 227], 'children': [{'type': 'CallExpression', 'name': 'Pagination', 'range': [194, 227], 'children': [{'type': 'Argument', 'name': 'current_page', 'range': [207, 209], 'children': []}, {'type': 'Argument', 'name': 'total_items', 'range': [212, 214], 'children': []}, {'type': 'Argument', 'name': 'total_pages', 'range': [217, 219], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [222, 224], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [232, 246], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [233, 246], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [234, 239], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [238, 238], 'children': []}]}, {'type': 'MemberExpression', 'name': 'return_value', 'range': [242, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [247, 263], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [248, 263], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [249, 254], 'children': [{'type': 'Argument', 'name': '/agents', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [256, 263], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [260, 262], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [258, 259], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [262, 262], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [265, 289], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [266, 289], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [267, 288], 'children': [{'type': 'Argument', 'name': 'response', 'range': [282, 286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [290, 299], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [296, 298], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [294, 295], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [298, 298], 'children': []}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [300, 308], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [305, 307], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [303, 304], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [306, 307], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [309, 350], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [310, 349], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [314, 316], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [319, 321], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [324, 326], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [329, 331], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [334, 336], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [339, 341], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [344, 346], 'children': []}]}]}]}]}]}
2025-01-08 10:29:11,030 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:11,541 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1640, 1644], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [1647, 1917], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1648, 1785], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1649, 1785], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1650, 1785], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [1663, 1744], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [1736, 1743], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [1739, 1742], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [1747, 1782], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [1787, 1801], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1788, 1801], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [1789, 1794], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [1802, 1810], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1803, 1810], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [1804, 1809], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1811, 1818], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1815, 1817], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1819, 1842], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1820, 1842], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse.model_validate', 'range': [1821, 1841], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1844, 1854], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1851, 1853], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1855, 1864], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1861, 1863], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1865, 1874], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1871, 1873], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_called_once_with', 'range': [1875, 1915], 'children': []}]}]}]}
2025-01-08 10:29:11,541 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:12,243 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1921, 1925], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [1929, 1935], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=-1")', 'range': [1936, 1944], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1936, 1944], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1936, 1944], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1936, 1944], 'children': [{'type': 'Literal', 'name': '"/agents?page=-1"', 'range': [1936, 1944], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1945, 1952], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1945, 1952], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1945, 1952], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1945, 1952], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1945, 1952], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1945, 1952], 'children': []}]}]}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [1954, 1960], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page_size=0")', 'range': [1961, 1969], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1961, 1969], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1961, 1969], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1961, 1969], 'children': [{'type': 'Literal', 'name': '"/agents?page_size=0"', 'range': [1961, 1969], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1970, 1977], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1970, 1977], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1970, 1977], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1970, 1977], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1970, 1977], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1970, 1977], 'children': []}]}]}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [1979, 1986], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=abc&page_size=def")', 'range': [1987, 1995], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1987, 1995], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1987, 1995], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1987, 1995], 'children': [{'type': 'Literal', 'name': '"/agents?page=abc&page_size=def"', 'range': [1987, 1995], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1996, 2003], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1996, 2003], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1996, 2003], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1996, 2003], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1996, 2003], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1996, 2003], 'children': []}]}]}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2005, 2012], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_agents")', 'range': [2013, 2021], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2013, 2021], 'children': [{'type': 'Identifier', 'name': 'mock_db_call', 'range': [2013, 2021], 'children': []}, {'type': 'CallExpression', 'name': 'mocker.patch', 'range': [2013, 2021], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [2013, 2021], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [2022, 2027], 'children': [{'type': 'CallExpression', 'name': 'mock_db_call.assert_not_called', 'range': [2022, 2027], 'children': []}]}]}]}
2025-01-08 10:29:12,244 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:13,553 - ERROR - Failed to parse Step 4 result
2025-01-08 10:29:13,553 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:15,071 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainOrSomething', 'range': [0, 200], 'children': []}
2025-01-08 10:29:15,071 - INFO - Completed main AST analysis flow
2025-01-08 10:29:15,072 - INFO - Successfully processed chunk
2025-01-08 10:29:18,709 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2241, 2245], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [2248, 2414], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [2249, 2308], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2250, 2308], 'children': [{'type': 'ObjectCreation', 'name': 'CreatorsResponse', 'range': [2251, 2308], 'children': [{'type': 'Property', 'name': 'creators', 'range': [2264, 2267], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [2270, 2305], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [2272, 2305], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [2285, 2287], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [2290, 2292], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [2295, 2297], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [2300, 2302], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2310, 2324], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2311, 2324], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [2312, 2317], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [2322, 2324], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [2323, 2324], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [2326, 2334], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2327, 2334], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [2328, 2333], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2335, 2342], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2339, 2341], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [2337, 2338], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [2341, 2341], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'data', 'range': [2344, 2368], 'children': [{'type': 'Assignment', 'name': '=', 'range': [2345, 2368], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [2358, 2367], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [2363, 2365], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2369, 2378], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2375, 2377], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [2373, 2374], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [2377, 2377], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2379, 2387], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2383, 2385], 'children': [{'type': 'MemberExpression', 'name': 'creators', 'range': [2381, 2382], 'children': []}, {'type': 'ArrayExpression', 'name': '[]', 'range': [2385, 2386], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2388, 2413], 'children': [{'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [2390, 2413], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [2393, 2395], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [2397, 2399], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [2401, 2403], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [2405, 2407], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [2409, 2411], 'children': []}]}]}]}]}]}
2025-01-08 10:29:18,709 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:19,209 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3226, 3230], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [3233, 3392], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [3234, 3293], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3235, 3293], 'children': [{'type': 'ObjectCreation', 'name': 'StoreSubmissionsResponse', 'range': [3236, 3293], 'children': [{'type': 'Property', 'name': 'submissions', 'range': [3249, 3252], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [3255, 3290], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [3257, 3290], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3270, 3272], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3275, 3277], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3280, 3282], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3285, 3287], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [3295, 3309], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3296, 3309], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [3297, 3302], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3301, 3301], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [3304, 3309], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [3305, 3306], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [3308, 3308], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [3311, 3327], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3312, 3327], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [3313, 3318], 'children': [{'type': 'Argument', 'name': '"/submissions?page=2&page_size=5"', 'range': [3317, 3317], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3320, 3327], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3324, 3326], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [3322, 3323], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [3326, 3326], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [3329, 3353], 'children': [{'type': 'Assignment', 'name': '=', 'range': [3330, 3353], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [3331, 3352], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [3345, 3351], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3354, 3363], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3360, 3362], 'children': [{'type': 'PropertyAccess', 'name': 'current_page', 'range': [3358, 3359], 'children': []}, {'type': 'Literal', 'name': '2', 'range': [3362, 3362], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [3364, 3373], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3370, 3372], 'children': [{'type': 'PropertyAccess', 'name': 'page_size', 'range': [3368, 3369], 'children': []}, {'type': 'Literal', 'name': '5', 'range': [3372, 3372], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [3374, 3389], 'children': [{'type': 'Argument', 'name': 'user_id="test-user-id"', 'range': [3378, 3380], 'children': []}, {'type': 'Argument', 'name': 'page=2', 'range': [3382, 3384], 'children': []}, {'type': 'Argument', 'name': 'page_size=5', 'range': [3386, 3388], 'children': []}]}]}]}]}
2025-01-08 10:29:19,706 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:19,764 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainOrSomething', 'range': [126, 159], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [126, 143], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [126, 137], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [126, 126], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [128, 128], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [130, 130], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [132, 132], 'children': []}, {'type': 'Identifier', 'name': 'middleware', 'range': [134, 134], 'children': []}, {'type': 'Identifier', 'name': 'auth_middleware', 'range': [136, 136], 'children': []}]}, {'type': 'Identifier', 'name': 'override_auth_middleware', 'range': [141, 141], 'children': []}]}, {'type': 'AssignmentExpression', 'name': '', 'range': [145, 159], 'children': [{'type': 'MemberExpression', 'name': '', 'range': [145, 156], 'children': [{'type': 'Identifier', 'name': 'app', 'range': [145, 145], 'children': []}, {'type': 'Identifier', 'name': 'dependency_overrides', 'range': [147, 147], 'children': []}, {'type': 'Identifier', 'name': 'autogpt_libs', 'range': [149, 149], 'children': []}, {'type': 'Identifier', 'name': 'auth', 'range': [151, 151], 'children': []}, {'type': 'Identifier', 'name': 'depends', 'range': [153, 153], 'children': []}, {'type': 'Identifier', 'name': 'get_user_id', 'range': [155, 155], 'children': []}]}, {'type': 'Identifier', 'name': 'override_get_user_id', 'range': [158, 158], 'children': []}]}]}]}
2025-01-08 10:29:19,765 - INFO - Completed main AST analysis flow
2025-01-08 10:29:19,765 - INFO - Successfully processed chunk
2025-01-08 10:29:21,980 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_malformed_request', 'range': [2678, 2789], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2681, 2685], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [2689, 2695], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2696, 2703], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2696, 2703], 'children': [{'type': 'Literal', 'name': '"/creators?page=-1"', 'range': [2702, 2702], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2705, 2712], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [2714, 2720], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2721, 2728], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2721, 2728], 'children': [{'type': 'Literal', 'name': '"/creators?page_size=0"', 'range': [2727, 2727], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2730, 2737], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [2739, 2746], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [2747, 2754], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [2747, 2754], 'children': [{'type': 'Literal', 'name': '"/creators?page=abc&page_size=def"', 'range': [2753, 2753], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [2756, 2763], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2765, 2772], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [2773, 2780], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [2773, 2780], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_creators"', 'range': [2779, 2779], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [2782, 2787], 'children': []}]}]}
2025-01-08 10:29:21,981 - INFO - Completed main AST analysis flow
2025-01-08 10:29:21,981 - INFO - Successfully processed chunk
2025-01-08 10:29:22,746 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_sorted', 'range': [870, 1128], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [873, 877], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [880, 1128], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [881, 1003], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [882, 1003], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [883, 1003], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [896, 962], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [900, 960], 'children': []}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [965, 1000], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1005, 1018], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1006, 1018], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1007, 1012], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1014, 1018], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1015, 1018], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1020, 1028], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1021, 1028], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1022, 1027], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1029, 1036], 'children': []}, {'type': 'VariableDecl', 'name': 'data', 'range': [1037, 1061], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1038, 1061], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1048, 1060], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1062, 1072], 'children': []}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1073, 1085], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1086, 1126], 'children': []}]}]}]}
2025-01-08 10:29:22,746 - INFO - Completed main AST analysis flow
2025-01-08 10:29:22,746 - INFO - Successfully processed chunk
2025-01-08 10:29:23,713 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_malformed_request', 'range': [3393, 3502], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3396, 3400], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [3404, 3410], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3411, 3418], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3411, 3418], 'children': [{'type': 'Literal', 'name': '"/submissions?page=-1"', 'range': [3417, 3417], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3420, 3427], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [3429, 3435], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3436, 3443], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3436, 3443], 'children': [{'type': 'Literal', 'name': '"/submissions?page_size=0"', 'range': [3442, 3442], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3445, 3452], 'children': []}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [3454, 3461], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get', 'range': [3462, 3469], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [3462, 3469], 'children': [{'type': 'Literal', 'name': '"/submissions?page=abc&page_size=def"', 'range': [3468, 3468], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [3471, 3478], 'children': []}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [3480, 3487], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch', 'range': [3488, 3495], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [3488, 3495], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3494, 3494], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called', 'range': [3497, 3502], 'children': []}]}]}
2025-01-08 10:29:23,714 - INFO - Completed main AST analysis flow
2025-01-08 10:29:23,714 - INFO - Successfully processed chunk
2025-01-08 10:29:24,192 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1394, 1398], 'children': []}, {'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1402, 1524], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1403, 1524], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1404, 1524], 'children': [{'type': 'PropertyAssignment', 'name': 'agents', 'range': [1417, 1483], 'children': [{'type': 'ArrayCreation', 'name': '[', 'range': [1419, 1483], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [1421, 1481], 'children': [{'type': 'PropertyAssignment', 'name': 'slug', 'range': [1434, 1436], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_name', 'range': [1439, 1441], 'children': []}, {'type': 'PropertyAssignment', 'name': 'agent_image', 'range': [1444, 1446], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator', 'range': [1449, 1451], 'children': []}, {'type': 'PropertyAssignment', 'name': 'creator_avatar', 'range': [1454, 1456], 'children': []}, {'type': 'PropertyAssignment', 'name': 'sub_heading', 'range': [1459, 1461], 'children': []}, {'type': 'PropertyAssignment', 'name': 'description', 'range': [1464, 1466], 'children': []}, {'type': 'PropertyAssignment', 'name': 'runs', 'range': [1469, 1471], 'children': []}, {'type': 'PropertyAssignment', 'name': 'rating', 'range': [1474, 1478], 'children': []}]}]}]}, {'type': 'PropertyAssignment', 'name': 'pagination', 'range': [1486, 1521], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1488, 1521], 'children': [{'type': 'PropertyAssignment', 'name': 'current_page', 'range': [1501, 1503], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_items', 'range': [1506, 1508], 'children': []}, {'type': 'PropertyAssignment', 'name': 'total_pages', 'range': [1511, 1513], 'children': []}, {'type': 'PropertyAssignment', 'name': 'page_size', 'range': [1516, 1518], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1526, 1540], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1527, 1540], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1528, 1533], 'children': []}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1535, 1540], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1536, 1537], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [1539, 1540], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1541, 1549], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1542, 1549], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1543, 1548], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1550, 1557], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1554, 1556], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [1552, 1553], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [1556, 1557], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1558, 1582], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1559, 1582], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1560, 1581], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [1575, 1579], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1583, 1593], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1590, 1592], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [1584, 1589], 'children': [{'type': 'PropertyAccess', 'name': 'agents', 'range': [1587, 1588], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [1592, 1593], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1594, 1634], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [1599, 1601], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [1604, 1606], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [1609, 1611], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [1614, 1616], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [1619, 1621], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [1624, 1626], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [1629, 1631], 'children': []}]}]}]}
2025-01-08 10:29:24,193 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:25,034 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2033, 2037], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2041, 2146], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentDetails', 'range': [2043, 2146], 'children': [{'type': 'Argument', 'name': 'store_listing_version_id', 'range': [2056, 2058], 'children': []}, {'type': 'Argument', 'name': 'slug', 'range': [2061, 2063], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2066, 2068], 'children': []}, {'type': 'Argument', 'name': 'agent_video', 'range': [2071, 2073], 'children': []}, {'type': 'Argument', 'name': 'agent_image', 'range': [2076, 2082], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [2085, 2087], 'children': []}, {'type': 'Argument', 'name': 'creator_avatar', 'range': [2090, 2092], 'children': []}, {'type': 'Argument', 'name': 'sub_heading', 'range': [2095, 2097], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [2100, 2102], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [2105, 2111], 'children': []}, {'type': 'Argument', 'name': 'runs', 'range': [2114, 2116], 'children': []}, {'type': 'Argument', 'name': 'rating', 'range': [2119, 2123], 'children': []}, {'type': 'Argument', 'name': 'versions', 'range': [2126, 2132], 'children': []}, {'type': 'Argument', 'name': 'last_updated', 'range': [2135, 2143], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [2148, 2162], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2150, 2155], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'response', 'range': [2164, 2172], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2166, 2171], 'children': []}]}, {'type': 'Assertion', 'name': 'response.status_code', 'range': [2173, 2180], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [2182, 2206], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2184, 2205], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2199, 2203], 'children': []}]}]}, {'type': 'Assertion', 'name': 'data.agent_name', 'range': [2207, 2214], 'children': []}, {'type': 'Assertion', 'name': 'data.creator', 'range': [2215, 2222], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2223, 2234], 'children': [{'type': 'Argument', 'name': 'username', 'range': [2227, 2229], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2231, 2233], 'children': []}]}]}]}
2025-01-08 10:29:25,034 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:25,134 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [355, 359], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [363, 485], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [365, 485], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [378, 444], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [382, 442], 'children': [{'type': 'Property', 'name': 'slug', 'range': [395, 397], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [400, 402], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [405, 407], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [410, 412], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [415, 417], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [420, 422], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [425, 427], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [430, 432], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [435, 439], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [449, 482], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [462, 464], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [467, 469], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [472, 474], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [477, 479], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [487, 494], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mock_db_call.return_value', 'range': [496, 500], 'children': []}, {'type': 'AssignmentExpression', 'name': 'response', 'range': [502, 509], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [511, 517], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [519, 541], 'children': []}, {'type': 'AssertStatement', 'name': 'len(data.agents)', 'range': [544, 553], 'children': []}, {'type': 'AssertStatement', 'name': 'data.agents[0].slug', 'range': [555, 566], 'children': []}, {'type': 'CallExpression', 'name': 'mock_db_call.assert_called_once_with', 'range': [568, 608], 'children': [{'type': 'Identifier', 'name': 'featured', 'range': [573, 575], 'children': []}, {'type': 'Identifier', 'name': 'creator', 'range': [578, 580], 'children': []}, {'type': 'Identifier', 'name': 'sorted_by', 'range': [583, 585], 'children': []}, {'type': 'Identifier', 'name': 'search_query', 'range': [588, 590], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [593, 595], 'children': []}, {'type': 'Identifier', 'name': 'page', 'range': [598, 600], 'children': []}, {'type': 'Identifier', 'name': 'page_size', 'range': [603, 605], 'children': []}]}]}]}
2025-01-08 10:29:25,134 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:28,472 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [614, 618], 'children': []}, {'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [622, 744], 'children': [{'type': 'Assignment', 'name': '=', 'range': [623, 744], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [624, 744], 'children': [{'type': 'Property', 'name': 'agents', 'range': [637, 703], 'children': [{'type': 'Array', 'name': '', 'range': [639, 703], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [641, 701], 'children': [{'type': 'Property', 'name': 'slug', 'range': [654, 656], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [659, 661], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [664, 666], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [669, 671], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [674, 676], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [679, 681], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [684, 686], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [689, 691], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [694, 698], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [706, 741], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [708, 741], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [721, 723], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [726, 728], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [731, 733], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [736, 738], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [746, 760], 'children': [{'type': 'Assignment', 'name': '=', 'range': [747, 760], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [748, 753], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [755, 760], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [756, 757], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [759, 759], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [761, 769], 'children': [{'type': 'Assignment', 'name': '=', 'range': [762, 769], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [763, 768], 'children': [{'type': 'Argument', 'name': '/agents?creator=specific-creator', 'range': [767, 767], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [770, 776], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [774, 775], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [772, 773], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [776, 776], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [778, 802], 'children': [{'type': 'Assignment', 'name': '=', 'range': [779, 802], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [780, 801], 'children': [{'type': 'Argument', 'name': 'response.json', 'range': [794, 799], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [803, 812], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [810, 811], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [804, 809], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [806, 808], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [812, 812], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [814, 826], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [823, 824], 'children': [{'type': 'PropertyAccess', 'name': 'creator', 'range': [821, 822], 'children': []}, {'type': 'Literal', 'name': 'specific-creator', 'range': [825, 825], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [827, 868], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [832, 834], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [837, 839], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [842, 844], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [847, 849], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [852, 854], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [857, 859], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [862, 864], 'children': []}]}]}]}
2025-01-08 10:29:28,472 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:29,160 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2955, 2959], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2963, 3109], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmissionsResponse', 'range': [2965, 3109], 'children': [{'type': 'ArrayExpression', 'name': 'submissions', 'range': [2978, 3068], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmission', 'range': [2982, 3066], 'children': [{'type': 'Property', 'name': 'name', 'range': [2995, 2997], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [3000, 3002], 'children': []}, {'type': 'Property', 'name': 'image_urls', 'range': [3005, 3009], 'children': []}, {'type': 'Property', 'name': 'date_submitted', 'range': [3012, 3021], 'children': []}, {'type': 'Property', 'name': 'status', 'range': [3023, 3032], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [3034, 3036], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [3039, 3044], 'children': []}, {'type': 'Property', 'name': 'agent_id', 'range': [3046, 3048], 'children': []}, {'type': 'Property', 'name': 'agent_version', 'range': [3051, 3053], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [3056, 3058], 'children': []}, {'type': 'Property', 'name': 'slug', 'range': [3061, 3063], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [3071, 3106], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3086, 3088], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3091, 3093], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3096, 3098], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3101, 3103], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [3111, 3125], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [3113, 3118], 'children': []}]}, {'type': 'CallExpression', 'name': 'get', 'range': [3127, 3135], 'children': []}, {'type': 'AssertStatement', 'name': 'status_code', 'range': [3136, 3143], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [3145, 3169], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [3157, 3168], 'children': []}]}, {'type': 'AssertStatement', 'name': 'len', 'range': [3170, 3180], 'children': []}, {'type': 'AssertStatement', 'name': 'name', 'range': [3181, 3193], 'children': []}, {'type': 'AssertStatement', 'name': 'current_page', 'range': [3194, 3203], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [3204, 3219], 'children': []}]}]}
2025-01-08 10:29:29,160 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:33,188 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_pagination', 'range': [1637, 1917], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1640, 1644], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [1647, 1917], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1648, 1785], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1649, 1785], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1650, 1785], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [1663, 1744], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [1736, 1743], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [1739, 1742], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [1747, 1782], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [1787, 1801], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1788, 1801], 'children': [{'type': 'CallExpression', 'name': 'mocker.patch', 'range': [1789, 1794], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [1802, 1810], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1803, 1810], 'children': [{'type': 'CallExpression', 'name': 'client.get', 'range': [1804, 1809], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1811, 1818], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1815, 1817], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1819, 1842], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1820, 1842], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse.model_validate', 'range': [1821, 1841], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1844, 1854], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1851, 1853], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1855, 1864], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1861, 1863], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [1865, 1874], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1871, 1873], 'children': []}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_called_once_with', 'range': [1875, 1915], 'children': []}]}]}]}
2025-01-08 10:29:33,188 - INFO - Completed main AST analysis flow
2025-01-08 10:29:33,189 - INFO - Successfully processed chunk
2025-01-08 10:29:34,261 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2420, 2424], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2428, 2557], 'children': [{'type': 'NewExpression', 'name': 'CreatorsResponse', 'range': [2430, 2557], 'children': [{'type': 'ArrayExpression', 'name': 'creators', 'range': [2443, 2516], 'children': [{'type': 'NewExpression', 'name': 'Creator', 'range': [2447, 2506], 'children': [{'type': 'AssignmentExpression', 'name': 'name', 'range': [2460, 2463], 'children': []}, {'type': 'AssignmentExpression', 'name': 'username', 'range': [2466, 2469], 'children': []}, {'type': 'AssignmentExpression', 'name': 'description', 'range': [2472, 2475], 'children': []}, {'type': 'AssignmentExpression', 'name': 'avatar_url', 'range': [2478, 2481], 'children': []}, {'type': 'AssignmentExpression', 'name': 'num_agents', 'range': [2484, 2486], 'children': []}, {'type': 'AssignmentExpression', 'name': 'agent_rating', 'range': [2489, 2493], 'children': []}, {'type': 'AssignmentExpression', 'name': 'agent_runs', 'range': [2496, 2498], 'children': []}, {'type': 'AssignmentExpression', 'name': 'is_featured', 'range': [2501, 2503], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [2519, 2554], 'children': [{'type': 'AssignmentExpression', 'name': 'current_page', 'range': [2534, 2536], 'children': []}, {'type': 'AssignmentExpression', 'name': 'total_items', 'range': [2539, 2541], 'children': []}, {'type': 'AssignmentExpression', 'name': 'total_pages', 'range': [2544, 2546], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page_size', 'range': [2549, 2551], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [2559, 2573], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2561, 2566], 'children': []}]}, {'type': 'CallExpression', 'name': 'get', 'range': [2575, 2582], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [2584, 2590], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [2593, 2616], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2605, 2615], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2610, 2614], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'len(data.creators)', 'range': [2618, 2627], 'children': []}, {'type': 'AssertStatement', 'name': 'data.pagination.current_page', 'range': [2629, 2637], 'children': []}, {'type': 'AssertStatement', 'name': 'data.pagination.page_size', 'range': [2639, 2647], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2649, 2674], 'children': [{'type': 'AssignmentExpression', 'name': 'featured', 'range': [2654, 2656], 'children': []}, {'type': 'AssignmentExpression', 'name': 'search_query', 'range': [2658, 2660], 'children': []}, {'type': 'AssignmentExpression', 'name': 'sorted_by', 'range': [2662, 2664], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page', 'range': [2666, 2668], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page_size', 'range': [2670, 2672], 'children': []}]}]}]}
2025-01-08 10:29:34,262 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:41,837 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [163, 167], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [170, 351], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [171, 230], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [172, 230], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse', 'range': [173, 230], 'children': [{'type': 'Argument', 'name': 'agents', 'range': [186, 189], 'children': []}, {'type': 'Argument', 'name': 'pagination', 'range': [192, 227], 'children': [{'type': 'CallExpression', 'name': 'Pagination', 'range': [194, 227], 'children': [{'type': 'Argument', 'name': 'current_page', 'range': [207, 209], 'children': []}, {'type': 'Argument', 'name': 'total_items', 'range': [212, 214], 'children': []}, {'type': 'Argument', 'name': 'total_pages', 'range': [217, 219], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [222, 224], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [232, 246], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [233, 246], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [234, 239], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [238, 238], 'children': []}]}, {'type': 'MemberExpression', 'name': 'return_value', 'range': [242, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [247, 263], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [248, 263], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [249, 254], 'children': [{'type': 'Argument', 'name': '/agents', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [256, 263], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [260, 262], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [258, 259], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [262, 262], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [265, 289], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [266, 289], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [267, 288], 'children': [{'type': 'Argument', 'name': 'response', 'range': [282, 286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [290, 299], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [296, 298], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [294, 295], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [298, 298], 'children': []}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [300, 308], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [305, 307], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [303, 304], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [306, 307], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [309, 350], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [310, 349], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [314, 316], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [319, 321], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [324, 326], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [329, 331], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [334, 336], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [339, 341], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [344, 346], 'children': []}]}]}]}]}]}
2025-01-08 10:29:41,837 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:46,181 - INFO - Step 3 result: {'type': 'Program', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'FunctionDeclaration', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1132, 1136], 'children': []}, {'type': 'Block', 'name': 'FunctionBody', 'range': [1139, 1390], 'children': [{'type': 'VariableDeclaration', 'name': 'mocked_value', 'range': [1140, 1262], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1141, 1262], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgentsResponse', 'range': [1142, 1262], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1155, 1221], 'children': [{'type': 'Array', 'name': '', 'range': [1157, 1221], 'children': [{'type': 'ObjectCreation', 'name': 'StoreAgent', 'range': [1159, 1219], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1172, 1174], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1177, 1179], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1182, 1184], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1187, 1189], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1192, 1194], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1197, 1199], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1202, 1204], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1207, 1209], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1212, 1216], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1224, 1259], 'children': [{'type': 'ObjectCreation', 'name': 'Pagination', 'range': [1226, 1259], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1239, 1241], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1244, 1246], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1249, 1251], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1254, 1256], 'children': []}]}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'mock_db_call', 'range': [1264, 1278], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1265, 1278], 'children': [{'type': 'FunctionCall', 'name': 'patch', 'range': [1266, 1271], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [1270, 1271], 'children': []}]}]}]}, {'type': 'Assignment', 'name': '=', 'range': [1273, 1278], 'children': [{'type': 'PropertyAccess', 'name': 'return_value', 'range': [1274, 1278], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [1277, 1278], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1279, 1287], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1280, 1287], 'children': [{'type': 'FunctionCall', 'name': 'get', 'range': [1281, 1286], 'children': [{'type': 'Argument', 'name': '"/agents?search_query=specific"', 'range': [1285, 1286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1288, 1295], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1289, 1294], 'children': [{'type': 'PropertyAccess', 'name': 'status_code', 'range': [1290, 1292], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1289, 1290], 'children': []}]}, {'type': 'Literal', 'name': '200', 'range': [1294, 1294], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'data', 'range': [1296, 1320], 'children': [{'type': 'Assignment', 'name': '=', 'range': [1297, 1320], 'children': [{'type': 'FunctionCall', 'name': 'model_validate', 'range': [1298, 1319], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [1313, 1318], 'children': [{'type': 'FunctionCall', 'name': 'json', 'range': [1315, 1317], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1321, 1331], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1322, 1330], 'children': [{'type': 'FunctionCall', 'name': 'len', 'range': [1323, 1327], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [1324, 1327], 'children': [{'type': 'PropertyAccess', 'name': 'agents', 'range': [1325, 1327], 'children': [{'type': 'Identifier', 'name': 'data', 'range': [1324, 1325], 'children': []}]}]}]}, {'type': 'Literal', 'name': '1', 'range': [1330, 1330], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1332, 1347], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [1333, 1345], 'children': [{'type': 'Literal', 'name': '"specific"', 'range': [1333, 1333], 'children': []}, {'type': 'PropertyAccess', 'name': 'description.lower()', 'range': [1335, 1345], 'children': [{'type': 'PropertyAccess', 'name': 'description', 'range': [1336, 1342], 'children': [{'type': 'ArrayAccess', 'name': '', 'range': [1337, 1340], 'children': [{'type': 'Literal', 'name': '0', 'range': [1339, 1339], 'children': []}]}]}, {'type': 'FunctionCall', 'name': 'lower', 'range': [1344, 1345], 'children': []}]}]}]}, {'type': 'FunctionCall', 'name': 'assert_called_once_with', 'range': [1348, 1388], 'children': [{'type': 'Argument', 'name': 'featured=False', 'range': [1353, 1356], 'children': []}, {'type': 'Argument', 'name': 'creator=None', 'range': [1358, 1361], 'children': []}, {'type': 'Argument', 'name': 'sorted_by=None', 'range': [1363, 1366], 'children': []}, {'type': 'Argument', 'name': 'search_query="specific"', 'range': [1368, 1371], 'children': []}, {'type': 'Argument', 'name': 'category=None', 'range': [1373, 1376], 'children': []}, {'type': 'Argument', 'name': 'page=1', 'range': [1378, 1381], 'children': []}, {'type': 'Argument', 'name': 'page_size=20', 'range': [1383, 1386], 'children': []}]}]}]}]}
2025-01-08 10:29:46,181 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:46,937 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agent_details', 'range': [2030, 2237], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2033, 2037], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2041, 2146], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentDetails', 'range': [2043, 2146], 'children': [{'type': 'Argument', 'name': 'store_listing_version_id', 'range': [2056, 2058], 'children': []}, {'type': 'Argument', 'name': 'slug', 'range': [2061, 2063], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2066, 2068], 'children': []}, {'type': 'Argument', 'name': 'agent_video', 'range': [2071, 2073], 'children': []}, {'type': 'Argument', 'name': 'agent_image', 'range': [2076, 2082], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [2085, 2087], 'children': []}, {'type': 'Argument', 'name': 'creator_avatar', 'range': [2090, 2092], 'children': []}, {'type': 'Argument', 'name': 'sub_heading', 'range': [2095, 2097], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [2100, 2102], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [2105, 2111], 'children': []}, {'type': 'Argument', 'name': 'runs', 'range': [2114, 2116], 'children': []}, {'type': 'Argument', 'name': 'rating', 'range': [2119, 2123], 'children': []}, {'type': 'Argument', 'name': 'versions', 'range': [2126, 2132], 'children': []}, {'type': 'Argument', 'name': 'last_updated', 'range': [2135, 2143], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [2148, 2162], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2150, 2155], 'children': []}]}, {'type': 'AssignmentExpression', 'name': 'response', 'range': [2164, 2172], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2166, 2171], 'children': []}]}, {'type': 'Assertion', 'name': 'response.status_code', 'range': [2173, 2180], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [2182, 2206], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2184, 2205], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2199, 2203], 'children': []}]}]}, {'type': 'Assertion', 'name': 'data.agent_name', 'range': [2207, 2214], 'children': []}, {'type': 'Assertion', 'name': 'data.creator', 'range': [2215, 2222], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2223, 2234], 'children': [{'type': 'Argument', 'name': 'username', 'range': [2227, 2229], 'children': []}, {'type': 'Argument', 'name': 'agent_name', 'range': [2231, 2233], 'children': []}]}]}]}
2025-01-08 10:29:46,938 - INFO - Completed main AST analysis flow
2025-01-08 10:29:46,939 - INFO - Successfully processed chunk
2025-01-08 10:29:48,120 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_malformed_request', 'range': [1918, 2029], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1921, 1925], 'children': []}, {'type': 'Comment', 'name': '# Test with invalid page number', 'range': [1929, 1935], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=-1")', 'range': [1936, 1944], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1936, 1944], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1936, 1944], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1936, 1944], 'children': [{'type': 'Literal', 'name': '"/agents?page=-1"', 'range': [1936, 1944], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1945, 1952], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1945, 1952], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1945, 1952], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1945, 1952], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1945, 1952], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1945, 1952], 'children': []}]}]}, {'type': 'Comment', 'name': '# Test with invalid page size', 'range': [1954, 1960], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page_size=0")', 'range': [1961, 1969], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1961, 1969], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1961, 1969], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1961, 1969], 'children': [{'type': 'Literal', 'name': '"/agents?page_size=0"', 'range': [1961, 1969], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1970, 1977], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1970, 1977], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1970, 1977], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1970, 1977], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1970, 1977], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1970, 1977], 'children': []}]}]}, {'type': 'Comment', 'name': '# Test with non-numeric values', 'range': [1979, 1986], 'children': []}, {'type': 'ExpressionStatement', 'name': 'response = client.get("/agents?page=abc&page_size=def")', 'range': [1987, 1995], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1987, 1995], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1987, 1995], 'children': []}, {'type': 'CallExpression', 'name': 'client.get', 'range': [1987, 1995], 'children': [{'type': 'Literal', 'name': '"/agents?page=abc&page_size=def"', 'range': [1987, 1995], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert response.status_code == 422', 'range': [1996, 2003], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1996, 2003], 'children': [{'type': 'MemberExpression', 'name': 'response.status_code', 'range': [1996, 2003], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1996, 2003], 'children': []}, {'type': 'Identifier', 'name': 'status_code', 'range': [1996, 2003], 'children': []}]}, {'type': 'Literal', 'name': '422', 'range': [1996, 2003], 'children': []}]}]}, {'type': 'Comment', 'name': '# Verify no DB calls were made', 'range': [2005, 2012], 'children': []}, {'type': 'ExpressionStatement', 'name': 'mock_db_call = mocker.patch("backend.server.v2.store.db.get_store_agents")', 'range': [2013, 2021], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2013, 2021], 'children': [{'type': 'Identifier', 'name': 'mock_db_call', 'range': [2013, 2021], 'children': []}, {'type': 'CallExpression', 'name': 'mocker.patch', 'range': [2013, 2021], 'children': [{'type': 'Literal', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [2013, 2021], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call.assert_not_called()', 'range': [2022, 2027], 'children': [{'type': 'CallExpression', 'name': 'mock_db_call.assert_not_called', 'range': [2022, 2027], 'children': []}]}]}]}
2025-01-08 10:29:48,121 - INFO - Completed main AST analysis flow
2025-01-08 10:29:48,122 - INFO - Successfully processed chunk
2025-01-08 10:29:49,148 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_featured', 'range': [352, 610], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [355, 359], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [363, 485], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [365, 485], 'children': [{'type': 'ArrayExpression', 'name': 'agents', 'range': [378, 444], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [382, 442], 'children': [{'type': 'Property', 'name': 'slug', 'range': [395, 397], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [400, 402], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [405, 407], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [410, 412], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [415, 417], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [420, 422], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [425, 427], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [430, 432], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [435, 439], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [449, 482], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [462, 464], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [467, 469], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [472, 474], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [477, 479], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [487, 494], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mock_db_call.return_value', 'range': [496, 500], 'children': []}, {'type': 'AssignmentExpression', 'name': 'response', 'range': [502, 509], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [511, 517], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [519, 541], 'children': []}, {'type': 'AssertStatement', 'name': 'len(data.agents)', 'range': [544, 553], 'children': []}, {'type': 'AssertStatement', 'name': 'data.agents[0].slug', 'range': [555, 566], 'children': []}, {'type': 'CallExpression', 'name': 'mock_db_call.assert_called_once_with', 'range': [568, 608], 'children': [{'type': 'Identifier', 'name': 'featured', 'range': [573, 575], 'children': []}, {'type': 'Identifier', 'name': 'creator', 'range': [578, 580], 'children': []}, {'type': 'Identifier', 'name': 'sorted_by', 'range': [583, 585], 'children': []}, {'type': 'Identifier', 'name': 'search_query', 'range': [588, 590], 'children': []}, {'type': 'Identifier', 'name': 'category', 'range': [593, 595], 'children': []}, {'type': 'Identifier', 'name': 'page', 'range': [598, 600], 'children': []}, {'type': 'Identifier', 'name': 'page_size', 'range': [603, 605], 'children': []}]}]}]}
2025-01-08 10:29:49,148 - INFO - Completed main AST analysis flow
2025-01-08 10:29:49,149 - INFO - Successfully processed chunk
2025-01-08 10:29:51,482 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3226, 3230], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [3233, 3392], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [3234, 3293], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3235, 3293], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmissionsResponse', 'range': [3236, 3293], 'children': [{'type': 'Property', 'name': 'submissions', 'range': [3249, 3252], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [3255, 3290], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [3257, 3290], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3270, 3272], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3275, 3277], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3280, 3282], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3285, 3287], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [3295, 3309], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3296, 3309], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [3297, 3302], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3301, 3301], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [3304, 3309], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [3305, 3306], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [3308, 3308], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [3311, 3327], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3312, 3327], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [3313, 3318], 'children': [{'type': 'Argument', 'name': '"/submissions?page=2&page_size=5"', 'range': [3317, 3317], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3320, 3327], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3324, 3326], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [3322, 3323], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [3326, 3326], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [3329, 3353], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3330, 3353], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [3331, 3352], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [3345, 3351], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3354, 3363], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3360, 3362], 'children': [{'type': 'MemberExpression', 'name': 'current_page', 'range': [3358, 3359], 'children': []}, {'type': 'Literal', 'name': '2', 'range': [3362, 3362], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3364, 3373], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3370, 3372], 'children': [{'type': 'MemberExpression', 'name': 'page_size', 'range': [3368, 3369], 'children': []}, {'type': 'Literal', 'name': '5', 'range': [3372, 3372], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert_called_once_with', 'range': [3374, 3389], 'children': [{'type': 'Argument', 'name': 'user_id="test-user-id"', 'range': [3378, 3380], 'children': []}, {'type': 'Argument', 'name': 'page=2', 'range': [3382, 3384], 'children': []}, {'type': 'Argument', 'name': 'page_size=5', 'range': [3386, 3388], 'children': []}]}]}]}]}
2025-01-08 10:29:51,482 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:51,549 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2241, 2245], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [2248, 2414], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [2249, 2308], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2250, 2308], 'children': [{'type': 'NewExpression', 'name': 'CreatorsResponse', 'range': [2251, 2308], 'children': [{'type': 'Property', 'name': 'creators', 'range': [2264, 2267], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [2270, 2305], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [2272, 2305], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [2285, 2287], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [2290, 2292], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [2295, 2297], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [2300, 2302], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2310, 2324], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2311, 2324], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2312, 2317], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2322, 2324], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [2323, 2324], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [2326, 2334], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2327, 2334], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2328, 2333], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2335, 2342], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2339, 2341], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [2337, 2338], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [2341, 2341], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'data', 'range': [2344, 2368], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2345, 2368], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2358, 2367], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2363, 2365], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2369, 2378], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2375, 2377], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [2373, 2374], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [2377, 2377], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2379, 2387], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2383, 2385], 'children': [{'type': 'MemberExpression', 'name': 'creators', 'range': [2381, 2382], 'children': []}, {'type': 'ArrayExpression', 'name': '[]', 'range': [2385, 2386], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2388, 2413], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2390, 2413], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [2393, 2395], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [2397, 2399], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [2401, 2403], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [2405, 2407], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [2409, 2411], 'children': []}]}]}]}]}]}
2025-01-08 10:29:51,549 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:51,781 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_success', 'range': [2952, 3222], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2955, 2959], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2963, 3109], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmissionsResponse', 'range': [2965, 3109], 'children': [{'type': 'ArrayExpression', 'name': 'submissions', 'range': [2978, 3068], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmission', 'range': [2982, 3066], 'children': [{'type': 'Property', 'name': 'name', 'range': [2995, 2997], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [3000, 3002], 'children': []}, {'type': 'Property', 'name': 'image_urls', 'range': [3005, 3009], 'children': []}, {'type': 'Property', 'name': 'date_submitted', 'range': [3012, 3021], 'children': []}, {'type': 'Property', 'name': 'status', 'range': [3023, 3032], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [3034, 3036], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [3039, 3044], 'children': []}, {'type': 'Property', 'name': 'agent_id', 'range': [3046, 3048], 'children': []}, {'type': 'Property', 'name': 'agent_version', 'range': [3051, 3053], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [3056, 3058], 'children': []}, {'type': 'Property', 'name': 'slug', 'range': [3061, 3063], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [3071, 3106], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3086, 3088], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3091, 3093], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3096, 3098], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3101, 3103], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [3111, 3125], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [3113, 3118], 'children': []}]}, {'type': 'CallExpression', 'name': 'get', 'range': [3127, 3135], 'children': []}, {'type': 'AssertStatement', 'name': 'status_code', 'range': [3136, 3143], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [3145, 3169], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [3157, 3168], 'children': []}]}, {'type': 'AssertStatement', 'name': 'len', 'range': [3170, 3180], 'children': []}, {'type': 'AssertStatement', 'name': 'name', 'range': [3181, 3193], 'children': []}, {'type': 'AssertStatement', 'name': 'current_page', 'range': [3194, 3203], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [3204, 3219], 'children': []}]}]}
2025-01-08 10:29:51,781 - INFO - Completed main AST analysis flow
2025-01-08 10:29:51,783 - INFO - Successfully processed chunk
2025-01-08 10:29:59,242 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_pagination', 'range': [2417, 2677], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2420, 2424], 'children': []}, {'type': 'AssignmentExpression', 'name': 'mocked_value', 'range': [2428, 2557], 'children': [{'type': 'NewExpression', 'name': 'CreatorsResponse', 'range': [2430, 2557], 'children': [{'type': 'ArrayExpression', 'name': 'creators', 'range': [2443, 2516], 'children': [{'type': 'NewExpression', 'name': 'Creator', 'range': [2447, 2506], 'children': [{'type': 'AssignmentExpression', 'name': 'name', 'range': [2460, 2463], 'children': []}, {'type': 'AssignmentExpression', 'name': 'username', 'range': [2466, 2469], 'children': []}, {'type': 'AssignmentExpression', 'name': 'description', 'range': [2472, 2475], 'children': []}, {'type': 'AssignmentExpression', 'name': 'avatar_url', 'range': [2478, 2481], 'children': []}, {'type': 'AssignmentExpression', 'name': 'num_agents', 'range': [2484, 2486], 'children': []}, {'type': 'AssignmentExpression', 'name': 'agent_rating', 'range': [2489, 2493], 'children': []}, {'type': 'AssignmentExpression', 'name': 'agent_runs', 'range': [2496, 2498], 'children': []}, {'type': 'AssignmentExpression', 'name': 'is_featured', 'range': [2501, 2503], 'children': []}]}]}, {'type': 'NewExpression', 'name': 'Pagination', 'range': [2519, 2554], 'children': [{'type': 'AssignmentExpression', 'name': 'current_page', 'range': [2534, 2536], 'children': []}, {'type': 'AssignmentExpression', 'name': 'total_items', 'range': [2539, 2541], 'children': []}, {'type': 'AssignmentExpression', 'name': 'total_pages', 'range': [2544, 2546], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page_size', 'range': [2549, 2551], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': 'mock_db_call', 'range': [2559, 2573], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2561, 2566], 'children': []}]}, {'type': 'CallExpression', 'name': 'get', 'range': [2575, 2582], 'children': []}, {'type': 'AssertStatement', 'name': 'response.status_code', 'range': [2584, 2590], 'children': []}, {'type': 'AssignmentExpression', 'name': 'data', 'range': [2593, 2616], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2605, 2615], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2610, 2614], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'len(data.creators)', 'range': [2618, 2627], 'children': []}, {'type': 'AssertStatement', 'name': 'data.pagination.current_page', 'range': [2629, 2637], 'children': []}, {'type': 'AssertStatement', 'name': 'data.pagination.page_size', 'range': [2639, 2647], 'children': []}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2649, 2674], 'children': [{'type': 'AssignmentExpression', 'name': 'featured', 'range': [2654, 2656], 'children': []}, {'type': 'AssignmentExpression', 'name': 'search_query', 'range': [2658, 2660], 'children': []}, {'type': 'AssignmentExpression', 'name': 'sorted_by', 'range': [2662, 2664], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page', 'range': [2666, 2668], 'children': []}, {'type': 'AssignmentExpression', 'name': 'page_size', 'range': [2670, 2672], 'children': []}]}]}]}
2025-01-08 10:29:59,242 - INFO - Completed main AST analysis flow
2025-01-08 10:29:59,242 - INFO - Successfully processed chunk
2025-01-08 10:30:00,953 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1394, 1398], 'children': []}, {'type': 'VariableDecl', 'name': 'mocked_value', 'range': [1402, 1524], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1403, 1524], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1404, 1524], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1417, 1483], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [1419, 1483], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [1421, 1481], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1434, 1436], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1439, 1441], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1444, 1446], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1449, 1451], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1454, 1456], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1459, 1461], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1464, 1466], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1469, 1471], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1474, 1478], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1486, 1521], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [1488, 1521], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1501, 1503], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1506, 1508], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1511, 1513], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1516, 1518], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1526, 1540], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1527, 1540], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1528, 1533], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1535, 1540], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1536, 1537], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [1539, 1540], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1541, 1549], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1542, 1549], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1543, 1548], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1550, 1557], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1554, 1556], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [1552, 1553], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [1556, 1557], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [1558, 1582], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1559, 1582], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1560, 1581], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [1575, 1579], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1583, 1593], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1590, 1592], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [1584, 1589], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [1587, 1588], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [1592, 1593], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1594, 1634], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [1599, 1601], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [1604, 1606], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [1609, 1611], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [1614, 1616], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [1619, 1621], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [1624, 1626], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [1629, 1631], 'children': []}]}]}]}
2025-01-08 10:30:00,953 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:07,814 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [614, 618], 'children': []}, {'type': 'VariableDecl', 'name': 'mocked_value', 'range': [622, 744], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [623, 744], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [624, 744], 'children': [{'type': 'Property', 'name': 'agents', 'range': [637, 703], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [639, 703], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [641, 701], 'children': [{'type': 'Property', 'name': 'slug', 'range': [654, 656], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [659, 661], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [664, 666], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [669, 671], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [674, 676], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [679, 681], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [684, 686], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [689, 691], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [694, 698], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [706, 741], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [708, 741], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [721, 723], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [726, 728], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [731, 733], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [736, 738], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [746, 760], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [747, 760], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [748, 753], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [755, 760], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [756, 757], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [759, 759], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [761, 769], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [762, 769], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [763, 768], 'children': [{'type': 'Argument', 'name': '/agents?creator=specific-creator', 'range': [767, 767], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [770, 776], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [774, 775], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [772, 773], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [776, 776], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [778, 802], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [779, 802], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [780, 801], 'children': [{'type': 'Argument', 'name': 'response.json', 'range': [794, 799], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [803, 812], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [810, 811], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [804, 809], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [806, 808], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [812, 812], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [814, 826], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [823, 824], 'children': [{'type': 'MemberExpression', 'name': 'creator', 'range': [821, 822], 'children': []}, {'type': 'Literal', 'name': 'specific-creator', 'range': [825, 825], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [827, 868], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [832, 834], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [837, 839], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [842, 844], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [847, 849], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [852, 854], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [857, 859], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [862, 864], 'children': []}]}]}]}
2025-01-08 10:30:07,814 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:13,141 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_defaults', 'range': [160, 351], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [163, 167], 'children': []}, {'type': 'BlockStatement', 'name': '', 'range': [170, 351], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [171, 230], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [172, 230], 'children': [{'type': 'CallExpression', 'name': 'StoreAgentsResponse', 'range': [173, 230], 'children': [{'type': 'Argument', 'name': 'agents', 'range': [186, 189], 'children': []}, {'type': 'Argument', 'name': 'pagination', 'range': [192, 227], 'children': [{'type': 'CallExpression', 'name': 'Pagination', 'range': [194, 227], 'children': [{'type': 'Argument', 'name': 'current_page', 'range': [207, 209], 'children': []}, {'type': 'Argument', 'name': 'total_items', 'range': [212, 214], 'children': []}, {'type': 'Argument', 'name': 'total_pages', 'range': [217, 219], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [222, 224], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [232, 246], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [233, 246], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [234, 239], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [238, 238], 'children': []}]}, {'type': 'MemberExpression', 'name': 'return_value', 'range': [242, 245], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [247, 263], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [248, 263], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [249, 254], 'children': [{'type': 'Argument', 'name': '/agents', 'range': [253, 253], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [256, 263], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [260, 262], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [258, 259], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [262, 262], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [265, 289], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [266, 289], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [267, 288], 'children': [{'type': 'Argument', 'name': 'response', 'range': [282, 286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [290, 299], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [296, 298], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [294, 295], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [298, 298], 'children': []}]}]}, {'type': 'AssertStatement', 'name': '', 'range': [300, 308], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [305, 307], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [303, 304], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [306, 307], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [309, 350], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [310, 349], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [314, 316], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [319, 321], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [324, 326], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [329, 331], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [334, 336], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [339, 341], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [344, 346], 'children': []}]}]}]}]}]}
2025-01-08 10:30:13,141 - INFO - Completed main AST analysis flow
2025-01-08 10:30:13,142 - INFO - Successfully processed chunk
2025-01-08 10:30:22,653 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_submissions_pagination', 'range': [3223, 3392], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [3226, 3230], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [3233, 3392], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [3234, 3293], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3235, 3293], 'children': [{'type': 'NewExpression', 'name': 'StoreSubmissionsResponse', 'range': [3236, 3293], 'children': [{'type': 'Property', 'name': 'submissions', 'range': [3249, 3252], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [3255, 3290], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [3257, 3290], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [3270, 3272], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [3275, 3277], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [3280, 3282], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [3285, 3287], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [3295, 3309], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3296, 3309], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [3297, 3302], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_submissions"', 'range': [3301, 3301], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [3304, 3309], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [3305, 3306], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [3308, 3308], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [3311, 3327], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3312, 3327], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [3313, 3318], 'children': [{'type': 'Argument', 'name': '"/submissions?page=2&page_size=5"', 'range': [3317, 3317], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3320, 3327], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3324, 3326], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [3322, 3323], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [3326, 3326], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [3329, 3353], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [3330, 3353], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [3331, 3352], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [3345, 3351], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3354, 3363], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3360, 3362], 'children': [{'type': 'MemberExpression', 'name': 'current_page', 'range': [3358, 3359], 'children': []}, {'type': 'Literal', 'name': '2', 'range': [3362, 3362], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert', 'range': [3364, 3373], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [3370, 3372], 'children': [{'type': 'MemberExpression', 'name': 'page_size', 'range': [3368, 3369], 'children': []}, {'type': 'Literal', 'name': '5', 'range': [3372, 3372], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'assert_called_once_with', 'range': [3374, 3389], 'children': [{'type': 'Argument', 'name': 'user_id="test-user-id"', 'range': [3378, 3380], 'children': []}, {'type': 'Argument', 'name': 'page=2', 'range': [3382, 3384], 'children': []}, {'type': 'Argument', 'name': 'page_size=5', 'range': [3386, 3388], 'children': []}]}]}]}]}
2025-01-08 10:30:22,653 - INFO - Completed main AST analysis flow
2025-01-08 10:30:22,655 - INFO - Successfully processed chunk
2025-01-08 10:30:22,835 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_creators_defaults', 'range': [2238, 2414], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [2241, 2245], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [2248, 2414], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [2249, 2308], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2250, 2308], 'children': [{'type': 'NewExpression', 'name': 'CreatorsResponse', 'range': [2251, 2308], 'children': [{'type': 'Property', 'name': 'creators', 'range': [2264, 2267], 'children': []}, {'type': 'Property', 'name': 'pagination', 'range': [2270, 2305], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [2272, 2305], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [2285, 2287], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [2290, 2292], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [2295, 2297], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [2300, 2302], 'children': []}]}]}]}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2310, 2324], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2311, 2324], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [2312, 2317], 'children': []}, {'type': 'AssignmentExpression', 'name': '=', 'range': [2322, 2324], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [2323, 2324], 'children': []}]}]}]}, {'type': 'ExpressionStatement', 'name': 'response', 'range': [2326, 2334], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2327, 2334], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [2328, 2333], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2335, 2342], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2339, 2341], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [2337, 2338], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [2341, 2341], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'data', 'range': [2344, 2368], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [2345, 2368], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [2358, 2367], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [2363, 2365], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2369, 2378], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2375, 2377], 'children': [{'type': 'MemberExpression', 'name': 'total_pages', 'range': [2373, 2374], 'children': []}, {'type': 'Literal', 'name': '0', 'range': [2377, 2377], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [2379, 2387], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [2383, 2385], 'children': [{'type': 'MemberExpression', 'name': 'creators', 'range': [2381, 2382], 'children': []}, {'type': 'ArrayExpression', 'name': '[]', 'range': [2385, 2386], 'children': []}]}]}, {'type': 'ExpressionStatement', 'name': 'mock_db_call', 'range': [2388, 2413], 'children': [{'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [2390, 2413], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [2393, 2395], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [2397, 2399], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [2401, 2403], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [2405, 2407], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [2409, 2411], 'children': []}]}]}]}]}]}
2025-01-08 10:30:22,835 - INFO - Completed main AST analysis flow
2025-01-08 10:30:22,836 - INFO - Successfully processed chunk
2025-01-08 10:30:33,241 - INFO - Step 4 result: {'type': 'Program', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1132, 1136], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [1139, 1390], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [1140, 1262], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1141, 1262], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1142, 1262], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1155, 1221], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [1157, 1221], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [1159, 1219], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1172, 1174], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1177, 1179], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1182, 1184], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1187, 1189], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1192, 1194], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1197, 1199], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1202, 1204], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1207, 1209], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1212, 1216], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1224, 1259], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [1226, 1259], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1239, 1241], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1244, 1246], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1249, 1251], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1254, 1256], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1264, 1278], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1265, 1278], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1266, 1271], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [1270, 1271], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1273, 1278], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1274, 1278], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [1277, 1278], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1279, 1287], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1280, 1287], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1281, 1286], 'children': [{'type': 'Argument', 'name': '"/agents?search_query=specific"', 'range': [1285, 1286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1288, 1295], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1289, 1294], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [1290, 1292], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1289, 1290], 'children': []}]}, {'type': 'Literal', 'name': '200', 'range': [1294, 1294], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [1296, 1320], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1297, 1320], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1298, 1319], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [1313, 1318], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [1315, 1317], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1321, 1331], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1322, 1330], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [1323, 1327], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [1324, 1327], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [1325, 1327], 'children': [{'type': 'Identifier', 'name': 'data', 'range': [1324, 1325], 'children': []}]}]}]}, {'type': 'Literal', 'name': '1', 'range': [1330, 1330], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1332, 1347], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [1333, 1345], 'children': [{'type': 'Literal', 'name': '"specific"', 'range': [1333, 1333], 'children': []}, {'type': 'MemberExpression', 'name': 'description.lower()', 'range': [1335, 1345], 'children': [{'type': 'MemberExpression', 'name': 'description', 'range': [1336, 1342], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [1337, 1340], 'children': [{'type': 'Literal', 'name': '0', 'range': [1339, 1339], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [1344, 1345], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1348, 1388], 'children': [{'type': 'Argument', 'name': 'featured=False', 'range': [1353, 1356], 'children': []}, {'type': 'Argument', 'name': 'creator=None', 'range': [1358, 1361], 'children': []}, {'type': 'Argument', 'name': 'sorted_by=None', 'range': [1363, 1366], 'children': []}, {'type': 'Argument', 'name': 'search_query="specific"', 'range': [1368, 1371], 'children': []}, {'type': 'Argument', 'name': 'category=None', 'range': [1373, 1376], 'children': []}, {'type': 'Argument', 'name': 'page=1', 'range': [1378, 1381], 'children': []}, {'type': 'Argument', 'name': 'page_size=20', 'range': [1383, 1386], 'children': []}]}]}]}]}
2025-01-08 10:30:33,241 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:38,143 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_category', 'range': [1391, 1636], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1394, 1398], 'children': []}, {'type': 'VariableDecl', 'name': 'mocked_value', 'range': [1402, 1524], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1403, 1524], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1404, 1524], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1417, 1483], 'children': [{'type': 'ArrayExpression', 'name': '[', 'range': [1419, 1483], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [1421, 1481], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1434, 1436], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1439, 1441], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1444, 1446], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1449, 1451], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1454, 1456], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1459, 1461], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1464, 1466], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1469, 1471], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1474, 1478], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1486, 1521], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [1488, 1521], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1501, 1503], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1506, 1508], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1511, 1513], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1516, 1518], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1526, 1540], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1527, 1540], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1528, 1533], 'children': []}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1535, 1540], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1536, 1537], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [1539, 1540], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1541, 1549], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1542, 1549], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1543, 1548], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1550, 1557], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1554, 1556], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [1552, 1553], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [1556, 1557], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [1558, 1582], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1559, 1582], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1560, 1581], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [1575, 1579], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1583, 1593], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1590, 1592], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [1584, 1589], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [1587, 1588], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [1592, 1593], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1594, 1634], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [1599, 1601], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [1604, 1606], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [1609, 1611], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [1614, 1616], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [1619, 1621], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [1624, 1626], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [1629, 1631], 'children': []}]}]}]}
2025-01-08 10:30:38,143 - INFO - Completed main AST analysis flow
2025-01-08 10:30:38,145 - INFO - Successfully processed chunk
2025-01-08 10:30:48,123 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_by_creator', 'range': [611, 869], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [614, 618], 'children': []}, {'type': 'VariableDecl', 'name': 'mocked_value', 'range': [622, 744], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [623, 744], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [624, 744], 'children': [{'type': 'Property', 'name': 'agents', 'range': [637, 703], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [639, 703], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [641, 701], 'children': [{'type': 'Property', 'name': 'slug', 'range': [654, 656], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [659, 661], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [664, 666], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [669, 671], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [674, 676], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [679, 681], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [684, 686], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [689, 691], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [694, 698], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [706, 741], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [708, 741], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [721, 723], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [726, 728], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [731, 733], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [736, 738], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [746, 760], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [747, 760], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [748, 753], 'children': [{'type': 'Argument', 'name': 'backend.server.v2.store.db.get_store_agents', 'range': [752, 752], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [755, 760], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [756, 757], 'children': []}, {'type': 'Identifier', 'name': 'mocked_value', 'range': [759, 759], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [761, 769], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [762, 769], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [763, 768], 'children': [{'type': 'Argument', 'name': '/agents?creator=specific-creator', 'range': [767, 767], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [770, 776], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [774, 775], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [772, 773], 'children': []}, {'type': 'Literal', 'name': '200', 'range': [776, 776], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [778, 802], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [779, 802], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [780, 801], 'children': [{'type': 'Argument', 'name': 'response.json', 'range': [794, 799], 'children': []}]}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [803, 812], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [810, 811], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [804, 809], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [806, 808], 'children': []}]}, {'type': 'Literal', 'name': '1', 'range': [812, 812], 'children': []}]}]}, {'type': 'Assertion', 'name': 'assert', 'range': [814, 826], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [823, 824], 'children': [{'type': 'MemberExpression', 'name': 'creator', 'range': [821, 822], 'children': []}, {'type': 'Literal', 'name': 'specific-creator', 'range': [825, 825], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [827, 868], 'children': [{'type': 'Argument', 'name': 'featured', 'range': [832, 834], 'children': []}, {'type': 'Argument', 'name': 'creator', 'range': [837, 839], 'children': []}, {'type': 'Argument', 'name': 'sorted_by', 'range': [842, 844], 'children': []}, {'type': 'Argument', 'name': 'search_query', 'range': [847, 849], 'children': []}, {'type': 'Argument', 'name': 'category', 'range': [852, 854], 'children': []}, {'type': 'Argument', 'name': 'page', 'range': [857, 859], 'children': []}, {'type': 'Argument', 'name': 'page_size', 'range': [862, 864], 'children': []}]}]}]}
2025-01-08 10:30:48,123 - INFO - Completed main AST analysis flow
2025-01-08 10:30:48,125 - INFO - Successfully processed chunk
2025-01-08 10:31:21,168 - INFO - Step 5 result: {'type': 'Program', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'FunctionDecl', 'name': 'test_get_agents_search', 'range': [1129, 1390], 'children': [{'type': 'Parameter', 'name': 'mocker', 'range': [1132, 1136], 'children': []}, {'type': 'BlockStatement', 'name': 'FunctionBody', 'range': [1139, 1390], 'children': [{'type': 'VariableDecl', 'name': 'mocked_value', 'range': [1140, 1262], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1141, 1262], 'children': [{'type': 'NewExpression', 'name': 'StoreAgentsResponse', 'range': [1142, 1262], 'children': [{'type': 'Property', 'name': 'agents', 'range': [1155, 1221], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [1157, 1221], 'children': [{'type': 'NewExpression', 'name': 'StoreAgent', 'range': [1159, 1219], 'children': [{'type': 'Property', 'name': 'slug', 'range': [1172, 1174], 'children': []}, {'type': 'Property', 'name': 'agent_name', 'range': [1177, 1179], 'children': []}, {'type': 'Property', 'name': 'agent_image', 'range': [1182, 1184], 'children': []}, {'type': 'Property', 'name': 'creator', 'range': [1187, 1189], 'children': []}, {'type': 'Property', 'name': 'creator_avatar', 'range': [1192, 1194], 'children': []}, {'type': 'Property', 'name': 'sub_heading', 'range': [1197, 1199], 'children': []}, {'type': 'Property', 'name': 'description', 'range': [1202, 1204], 'children': []}, {'type': 'Property', 'name': 'runs', 'range': [1207, 1209], 'children': []}, {'type': 'Property', 'name': 'rating', 'range': [1212, 1216], 'children': []}]}]}]}, {'type': 'Property', 'name': 'pagination', 'range': [1224, 1259], 'children': [{'type': 'NewExpression', 'name': 'Pagination', 'range': [1226, 1259], 'children': [{'type': 'Property', 'name': 'current_page', 'range': [1239, 1241], 'children': []}, {'type': 'Property', 'name': 'total_items', 'range': [1244, 1246], 'children': []}, {'type': 'Property', 'name': 'total_pages', 'range': [1249, 1251], 'children': []}, {'type': 'Property', 'name': 'page_size', 'range': [1254, 1256], 'children': []}]}]}]}]}]}, {'type': 'VariableDecl', 'name': 'mock_db_call', 'range': [1264, 1278], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1265, 1278], 'children': [{'type': 'CallExpression', 'name': 'patch', 'range': [1266, 1271], 'children': [{'type': 'Argument', 'name': '"backend.server.v2.store.db.get_store_agents"', 'range': [1270, 1271], 'children': []}]}]}]}, {'type': 'AssignmentExpression', 'name': '=', 'range': [1273, 1278], 'children': [{'type': 'MemberExpression', 'name': 'return_value', 'range': [1274, 1278], 'children': [{'type': 'Identifier', 'name': 'mocked_value', 'range': [1277, 1278], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1279, 1287], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1280, 1287], 'children': [{'type': 'CallExpression', 'name': 'get', 'range': [1281, 1286], 'children': [{'type': 'Argument', 'name': '"/agents?search_query=specific"', 'range': [1285, 1286], 'children': []}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1288, 1295], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1289, 1294], 'children': [{'type': 'MemberExpression', 'name': 'status_code', 'range': [1290, 1292], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [1289, 1290], 'children': []}]}, {'type': 'Literal', 'name': '200', 'range': [1294, 1294], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'data', 'range': [1296, 1320], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [1297, 1320], 'children': [{'type': 'CallExpression', 'name': 'model_validate', 'range': [1298, 1319], 'children': [{'type': 'Argument', 'name': 'response.json()', 'range': [1313, 1318], 'children': [{'type': 'CallExpression', 'name': 'json', 'range': [1315, 1317], 'children': []}]}]}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1321, 1331], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [1322, 1330], 'children': [{'type': 'CallExpression', 'name': 'len', 'range': [1323, 1327], 'children': [{'type': 'Argument', 'name': 'data.agents', 'range': [1324, 1327], 'children': [{'type': 'MemberExpression', 'name': 'agents', 'range': [1325, 1327], 'children': [{'type': 'Identifier', 'name': 'data', 'range': [1324, 1325], 'children': []}]}]}]}, {'type': 'Literal', 'name': '1', 'range': [1330, 1330], 'children': []}]}]}, {'type': 'AssertStatement', 'name': 'assert', 'range': [1332, 1347], 'children': [{'type': 'BinaryExpression', 'name': 'in', 'range': [1333, 1345], 'children': [{'type': 'Literal', 'name': '"specific"', 'range': [1333, 1333], 'children': []}, {'type': 'MemberExpression', 'name': 'description.lower()', 'range': [1335, 1345], 'children': [{'type': 'MemberExpression', 'name': 'description', 'range': [1336, 1342], 'children': [{'type': 'ArrayExpression', 'name': '', 'range': [1337, 1340], 'children': [{'type': 'Literal', 'name': '0', 'range': [1339, 1339], 'children': []}]}]}, {'type': 'CallExpression', 'name': 'lower', 'range': [1344, 1345], 'children': []}]}]}]}, {'type': 'CallExpression', 'name': 'assert_called_once_with', 'range': [1348, 1388], 'children': [{'type': 'Argument', 'name': 'featured=False', 'range': [1353, 1356], 'children': []}, {'type': 'Argument', 'name': 'creator=None', 'range': [1358, 1361], 'children': []}, {'type': 'Argument', 'name': 'sorted_by=None', 'range': [1363, 1366], 'children': []}, {'type': 'Argument', 'name': 'search_query="specific"', 'range': [1368, 1371], 'children': []}, {'type': 'Argument', 'name': 'category=None', 'range': [1373, 1376], 'children': []}, {'type': 'Argument', 'name': 'page=1', 'range': [1378, 1381], 'children': []}, {'type': 'Argument', 'name': 'page_size=20', 'range': [1383, 1386], 'children': []}]}]}]}]}
2025-01-08 10:31:21,168 - INFO - Completed main AST analysis flow
2025-01-08 10:31:21,170 - INFO - Successfully processed chunk
2025-01-08 10:31:21,367 - INFO - Starting code generation from AST
2025-01-08 10:32:48,873 - INFO - Successfully generated code from AST
2025-01-08 10:32:48,874 - INFO - Starting static code similarity comparison
2025-01-08 10:32:48,987 - INFO - Static similarity result: {'final_score': 98.27, 'length_similarity': 99.41, 'token_similarity': 100.0, 'structure_similarity': 93.44, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
