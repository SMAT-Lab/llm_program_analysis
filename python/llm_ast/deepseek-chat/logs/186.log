2025-01-08 10:27:27,576 - INFO - Processing sample 186
2025-01-08 10:27:27,577 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:45,891 - INFO - Successfully split code into 19 top-level declarations
2025-01-08 10:27:50,331 - INFO - Processing chunk #0 (size=724 chars, start_index=0)
2025-01-08 10:27:50,333 - INFO - Processing chunk with 724 chars starting at index 0
2025-01-08 10:27:50,333 - INFO - Starting main AST analysis flow
2025-01-08 10:27:50,333 - INFO - Tokenized code into 144 tokens
2025-01-08 10:27:50,333 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,553 - INFO - Processing chunk #1 (size=160 chars, start_index=144)
2025-01-08 10:27:58,578 - INFO - Processing chunk with 160 chars starting at index 144
2025-01-08 10:27:58,583 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,588 - INFO - Tokenized code into 32 tokens
2025-01-08 10:27:58,588 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,637 - INFO - Processing chunk #2 (size=74 chars, start_index=176)
2025-01-08 10:27:58,676 - INFO - Processing chunk with 74 chars starting at index 176
2025-01-08 10:27:58,690 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,728 - INFO - Tokenized code into 12 tokens
2025-01-08 10:27:58,729 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,790 - INFO - Processing chunk #3 (size=210 chars, start_index=188)
2025-01-08 10:27:58,792 - INFO - Processing chunk with 210 chars starting at index 188
2025-01-08 10:27:58,792 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,792 - INFO - Tokenized code into 35 tokens
2025-01-08 10:27:58,792 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,818 - INFO - Processing chunk #4 (size=175 chars, start_index=223)
2025-01-08 10:27:58,820 - INFO - Processing chunk with 175 chars starting at index 223
2025-01-08 10:27:58,820 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,821 - INFO - Processing chunk #5 (size=276 chars, start_index=257)
2025-01-08 10:27:58,822 - INFO - Tokenized code into 34 tokens
2025-01-08 10:27:58,830 - INFO - Processing chunk with 276 chars starting at index 257
2025-01-08 10:27:58,838 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,839 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,856 - INFO - Tokenized code into 46 tokens
2025-01-08 10:27:58,856 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,885 - INFO - Processing chunk #6 (size=76 chars, start_index=303)
2025-01-08 10:27:58,887 - INFO - Processing chunk with 76 chars starting at index 303
2025-01-08 10:27:58,887 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,887 - INFO - Tokenized code into 16 tokens
2025-01-08 10:27:58,887 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,891 - INFO - Processing chunk #7 (size=626 chars, start_index=319)
2025-01-08 10:27:58,893 - INFO - Processing chunk with 626 chars starting at index 319
2025-01-08 10:27:58,893 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,893 - INFO - Tokenized code into 115 tokens
2025-01-08 10:27:58,893 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,897 - INFO - Processing chunk #8 (size=2092 chars, start_index=434)
2025-01-08 10:27:58,897 - INFO - Processing chunk with 2092 chars starting at index 434
2025-01-08 10:27:58,897 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,902 - INFO - Tokenized code into 249 tokens
2025-01-08 10:27:58,902 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,903 - INFO - Processing chunk #9 (size=2349 chars, start_index=683)
2025-01-08 10:27:58,903 - INFO - Processing chunk with 2349 chars starting at index 683
2025-01-08 10:27:58,903 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,903 - INFO - Tokenized code into 436 tokens
2025-01-08 10:27:58,903 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,904 - INFO - Processing chunk #10 (size=140 chars, start_index=1119)
2025-01-08 10:27:58,904 - INFO - Processing chunk with 140 chars starting at index 1119
2025-01-08 10:27:58,904 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,904 - INFO - Tokenized code into 21 tokens
2025-01-08 10:27:58,904 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,907 - INFO - Processing chunk #11 (size=99 chars, start_index=1140)
2025-01-08 10:27:58,910 - INFO - Processing chunk #12 (size=68 chars, start_index=1162)
2025-01-08 10:27:58,911 - INFO - Processing chunk with 99 chars starting at index 1140
2025-01-08 10:27:58,916 - INFO - Processing chunk with 68 chars starting at index 1162
2025-01-08 10:27:58,918 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,944 - INFO - Starting main AST analysis flow
2025-01-08 10:27:58,959 - INFO - Tokenized code into 22 tokens
2025-01-08 10:27:58,960 - INFO - Tokenized code into 16 tokens
2025-01-08 10:27:58,962 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:58,966 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,473 - INFO - Processing chunk #13 (size=9699 chars, start_index=1178)
2025-01-08 10:27:59,490 - INFO - Processing chunk with 9699 chars starting at index 1178
2025-01-08 10:27:59,495 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,497 - INFO - Tokenized code into 1461 tokens
2025-01-08 10:27:59,498 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,503 - INFO - Processing chunk #14 (size=3288 chars, start_index=2639)
2025-01-08 10:27:59,503 - INFO - Processing chunk with 3288 chars starting at index 2639
2025-01-08 10:27:59,506 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,507 - INFO - Processing chunk #15 (size=149 chars, start_index=3103)
2025-01-08 10:27:59,508 - INFO - Processing chunk #16 (size=6395 chars, start_index=3127)
2025-01-08 10:27:59,509 - INFO - Processing chunk #17 (size=3360 chars, start_index=4065)
2025-01-08 10:27:59,511 - INFO - Tokenized code into 464 tokens
2025-01-08 10:27:59,519 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,513 - INFO - Processing chunk with 149 chars starting at index 3103
2025-01-08 10:27:59,514 - INFO - Processing chunk with 6395 chars starting at index 3127
2025-01-08 10:27:59,515 - INFO - Processing chunk with 3360 chars starting at index 4065
2025-01-08 10:27:59,512 - INFO - Processing chunk #18 (size=10311 chars, start_index=4533)
2025-01-08 10:27:59,597 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,611 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,638 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,655 - INFO - Processing chunk with 10311 chars starting at index 4533
2025-01-08 10:27:59,668 - INFO - Tokenized code into 24 tokens
2025-01-08 10:27:59,670 - INFO - Tokenized code into 938 tokens
2025-01-08 10:27:59,676 - INFO - Tokenized code into 468 tokens
2025-01-08 10:27:59,676 - INFO - Starting main AST analysis flow
2025-01-08 10:27:59,678 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,679 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,682 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:59,684 - INFO - Tokenized code into 1070 tokens
2025-01-08 10:27:59,704 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:28:09,952 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 143], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 12], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 35], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 41], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [43, 51], 'children': []}, {'type': 'ConditionalImport', 'name': '', 'range': [53, 61], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 65], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [66, 68], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [69, 71], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 76], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [78, 92], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [93, 115], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [116, 122], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [123, 133], 'children': []}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [135, 143], 'children': []}]}
2025-01-08 10:28:09,952 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,104 - INFO - Step 1 result: {'type': 'Program', 'name': 'Message', 'range': [1162, 1177], 'children': []}
2025-01-08 10:28:10,122 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,399 - INFO - Step 1 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [188, 222], 'children': []}
2025-01-08 10:28:10,399 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:10,580 - INFO - Step 1 result: {'type': 'Program', 'name': 'ModelMetadata', 'range': [303, 318], 'children': []}
2025-01-08 10:28:10,580 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:12,296 - INFO - Step 1 result: {'type': 'Program', 'name': 'LlmModelMeta', 'range': [319, 433], 'children': [{'type': 'ClassDeclaration', 'name': 'LlmModelMeta', 'range': [319, 325], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__members__', 'range': [329, 377], 'children': []}, {'type': 'FunctionDeclaration', 'name': '', 'range': [378, 432], 'children': []}]}
2025-01-08 10:28:12,379 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:12,377 - INFO - Step 1 result: {'type': 'Program', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'ClassDeclaration', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'EnumMember', 'name': 'SYSTEM', 'range': [1149, 1151]}, {'type': 'EnumMember', 'name': 'USER', 'range': [1153, 1155]}, {'type': 'EnumMember', 'name': 'ASSISTANT', 'range': [1157, 1159]}]}]}
2025-01-08 10:28:12,452 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:12,704 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [223, 256], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [223, 255], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [225, 255], 'children': [{'type': 'Property', 'name': 'provider', 'range': [227, 231], 'children': []}, {'type': 'Property', 'name': 'id', 'range': [234, 238], 'children': []}, {'type': 'Property', 'name': 'type', 'range': [241, 245], 'children': []}, {'type': 'Property', 'name': 'title', 'range': [248, 252], 'children': []}]}]}]}
2025-01-08 10:28:12,776 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:13,932 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [176, 187], 'children': [{'type': 'VariableDeclaration', 'name': 'AICredentials', 'range': [176, 186], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [177, 186], 'children': [{'type': 'Identifier', 'name': 'CredentialsMetaInput', 'range': [178, 178], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [179, 186], 'children': [{'type': 'Identifier', 'name': 'LLMProviderName', 'range': [180, 180], 'children': []}, {'type': 'Literal', 'name': '', 'range': [182, 182], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [183, 185], 'children': [{'type': 'Literal', 'name': '', 'range': [184, 184], 'children': []}]}]}]}]}]}
2025-01-08 10:28:13,998 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:14,351 - INFO - Step 1 result: {'type': 'Program', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumDeclaration', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumMember', 'name': 'CONCISE', 'range': [3110, 3112], 'children': []}, {'type': 'EnumMember', 'name': 'DETAILED', 'range': [3114, 3116], 'children': []}, {'type': 'EnumMember', 'name': 'BULLET_POINTS', 'range': [3118, 3120], 'children': []}, {'type': 'EnumMember', 'name': 'NUMBERED_LIST', 'range': [3122, 3124], 'children': []}]}]}
2025-01-08 10:28:14,653 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:14,852 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [2639, 3102], 'children': [{'type': 'ClassDeclaration', 'name': 'AITextGeneratorBlock', 'range': [2639, 2836], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2646, 2758], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2837, 2868], 'children': []}, {'type': 'MethodDeclaration', 'name': '__init__', 'range': [2869, 2965], 'children': []}, {'type': 'MethodDeclaration', 'name': 'llm_call', 'range': [2967, 3028], 'children': []}, {'type': 'MethodDeclaration', 'name': 'run', 'range': [3029, 3102], 'children': []}]}]}
2025-01-08 10:28:14,852 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:15,291 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [4533, 5602], 'children': [{'type': 'ClassDeclaration', 'name': 'AIListGeneratorBlock', 'range': [4533, 4577], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4540, 4647], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4728, 4775], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4777, 4968], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4973, 5023], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'string_to_list', 'range': [5028, 5131], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [5133, 5602], 'children': []}]}
2025-01-08 10:28:15,308 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:15,345 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [1119, 1139], 'children': [{'type': 'ForStatement', 'name': '', 'range': [1119, 1124], 'children': [{'type': 'VariableDeclaration', 'name': 'model', 'range': [1120, 1120], 'children': []}, {'type': 'Identifier', 'name': 'LlmModel', 'range': [1122, 1122], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [1125, 1138], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [1126, 1129], 'children': [{'type': 'Identifier', 'name': 'model', 'range': [1126, 1126], 'children': []}, {'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [1129, 1129], 'children': []}]}, {'type': 'RaiseStatement', 'name': '', 'range': [1132, 1137], 'children': [{'type': 'Identifier', 'name': 'ValueError', 'range': [1133, 1133], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [1135, 1136], 'children': [{'type': 'TemplateElement', 'name': '', 'range': [1136, 1136], 'children': []}]}]}]}]}
2025-01-08 10:28:15,346 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:16,541 - INFO - Step 1 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'AITextSummarizerBlock', 'range': [3127, 3133], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [3134, 3140], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [3334, 3340], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [3364, 3487], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [3489, 3531], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_run', 'range': [3532, 3622], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_split_text', 'range': [3626, 3712], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [3713, 3771], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_summarize_chunk', 'range': [3772, 3859], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_combine_summaries', 'range': [3860, 4063], 'children': []}]}
2025-01-08 10:28:16,722 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:18,849 - INFO - Step 1 result: {'type': 'Program', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'FunctionDeclaration', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'ReturnStatement', 'range': [266, 301], 'children': [{'type': 'CallExpression', 'range': [267, 301], 'children': [{'type': 'Identifier', 'name': 'CredentialsField', 'range': [267, 267]}, {'type': 'ObjectExpression', 'range': [268, 301], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'description', 'range': [270, 270]}, 'value': {'type': 'Literal', 'value': 'API key for the LLM provider.', 'range': [272, 272]}, 'range': [270, 272]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator', 'range': [275, 275]}, 'value': {'type': 'Literal', 'value': 'model', 'range': [277, 277]}, 'range': [275, 277]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator_mapping', 'range': [280, 280]}, 'value': {'type': 'ObjectExpression', 'range': [282, 298], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'model', 'range': [284, 284]}, 'value': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'model', 'range': [288, 288]}, 'property': {'type': 'Identifier', 'name': 'metadata', 'range': [290, 290]}, 'computed': False, 'range': [288, 290]}, 'range': [284, 290]}]}, 'range': [280, 298]}]}]}]}]}]}
2025-01-08 10:28:18,849 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:19,082 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [144, 175], 'children': [{'type': 'VariableDeclaration', 'name': 'LLMProviderName', 'range': [144, 174], 'children': [{'type': 'Literal', 'value': 'Literal', 'range': [146, 146]}, {'type': 'ArrayExpression', 'range': [147, 174], 'children': [{'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [149, 149]}, 'property': {'type': 'Identifier', 'name': 'ANTHROPIC', 'range': [151, 151]}, 'range': [149, 151]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [154, 154]}, 'property': {'type': 'Identifier', 'name': 'GROQ', 'range': [156, 156]}, 'range': [154, 156]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [159, 159]}, 'property': {'type': 'Identifier', 'name': 'OLLAMA', 'range': [161, 161]}, 'range': [159, 161]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [164, 164]}, 'property': {'type': 'Identifier', 'name': 'OPENAI', 'range': [166, 166]}, 'range': [164, 166]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [169, 169]}, 'property': {'type': 'Identifier', 'name': 'OPEN_ROUTER', 'range': [171, 171]}, 'range': [169, 171]}]}]}]}
2025-01-08 10:28:19,082 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:19,817 - INFO - Step 1 result: {'type': 'Program', 'name': 'AIConversationBlock', 'range': [4065, 4375], 'children': [{'type': 'ClassDeclaration', 'name': 'AIConversationBlock', 'range': [4065, 4071], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4072, 4078], 'children': []}, {'type': 'VariableDeclaration', 'name': 'messages', 'range': [4079, 4098], 'children': []}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [4099, 4124], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [4125, 4132], 'children': []}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [4133, 4158], 'children': []}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [4159, 4182], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4184, 4190], 'children': []}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [4191, 4203], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [4204, 4214], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4216, 4375], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4377, 4437], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [4439, 4532], 'children': []}]}
2025-01-08 10:28:19,817 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:22,878 - INFO - Step 2 result: {'type': 'Program', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'ClassDeclaration', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1164, 1166], 'children': []}, {'type': 'PropertyDeclaration', 'name': 'role', 'range': [1169, 1171], 'children': [{'type': 'TypeAnnotation', 'name': 'MessageRole', 'range': [1171, 1171], 'children': []}]}, {'type': 'PropertyDeclaration', 'name': 'content', 'range': [1173, 1175], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1175, 1175], 'children': []}]}]}]}
2025-01-08 10:28:22,879 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:23,108 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [1178, 2638], 'children': [{'type': 'ClassDeclaration', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [1178, 1184], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1185, 1191], 'children': []}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [1192, 1209], 'children': []}, {'type': 'VariableDeclaration', 'name': 'expected_format', 'range': [1211, 1230], 'children': []}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [1232, 1261], 'children': []}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1263, 1269], 'children': []}, {'type': 'VariableDeclaration', 'name': 'sys_prompt', 'range': [1271, 1293], 'children': []}, {'type': 'VariableDeclaration', 'name': 'conversation_history', 'range': [1295, 1316], 'children': []}, {'type': 'VariableDeclaration', 'name': 'retry', 'range': [1318, 1340], 'children': []}, {'type': 'VariableDeclaration', 'name': 'prompt_values', 'range': [1342, 1367], 'children': []}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [1369, 1393], 'children': []}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [1396, 1418], 'children': []}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1421, 1427], 'children': []}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1428, 1444], 'children': []}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1446, 1455], 'children': []}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1458, 1618], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [1623, 2638], 'children': []}]}
2025-01-08 10:28:23,109 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:23,492 - INFO - Step 2 result: {'type': 'Program', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'ClassDeclaration', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'Inheritance', 'name': 'NamedTuple', 'range': [305, 307], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [308, 318], 'children': [{'type': 'FieldDeclaration', 'name': 'provider', 'range': [310, 312], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [312, 312], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'context_window', 'range': [314, 316], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [316, 316], 'children': []}]}]}]}]}
2025-01-08 10:28:23,492 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:24,363 - INFO - Step 2 result: {'type': 'Program', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'ClassDeclaration', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'EnumMember', 'name': 'SYSTEM', 'range': [1149, 1151], 'children': [{'type': 'Literal', 'value': '"system"', 'range': [1151, 1151]}]}, {'type': 'EnumMember', 'name': 'USER', 'range': [1153, 1155], 'children': [{'type': 'Literal', 'value': '"user"', 'range': [1155, 1155]}]}, {'type': 'EnumMember', 'name': 'ASSISTANT', 'range': [1157, 1159], 'children': [{'type': 'Literal', 'value': '"assistant"', 'range': [1159, 1159]}]}]}]}
2025-01-08 10:28:24,363 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:25,217 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [176, 187], 'children': [{'type': 'VariableDeclaration', 'name': 'AICredentials', 'range': [176, 186], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [177, 186], 'children': [{'type': 'Identifier', 'name': 'CredentialsMetaInput', 'range': [178, 178], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [179, 186], 'children': [{'type': 'Identifier', 'name': 'LLMProviderName', 'range': [180, 180], 'children': []}, {'type': 'Literal', 'name': '', 'range': [182, 182], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [183, 185], 'children': [{'type': 'Literal', 'name': '', 'range': [184, 184], 'children': []}]}]}]}]}]}
2025-01-08 10:28:25,217 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:26,743 - INFO - Step 2 result: {'type': 'Program', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumDeclaration', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumMember', 'name': 'CONCISE', 'range': [3110, 3112], 'children': [{'type': 'Literal', 'value': '"concise"', 'range': [3112, 3112], 'children': []}]}, {'type': 'EnumMember', 'name': 'DETAILED', 'range': [3114, 3116], 'children': [{'type': 'Literal', 'value': '"detailed"', 'range': [3116, 3116], 'children': []}]}, {'type': 'EnumMember', 'name': 'BULLET_POINTS', 'range': [3118, 3120], 'children': [{'type': 'Literal', 'value': '"bullet points"', 'range': [3120, 3120], 'children': []}]}, {'type': 'EnumMember', 'name': 'NUMBERED_LIST', 'range': [3122, 3124], 'children': [{'type': 'Literal', 'value': '"numbered list"', 'range': [3124, 3124], 'children': []}]}]}]}
2025-01-08 10:28:26,745 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:27,584 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [1119, 1139], 'children': [{'type': 'ForStatement', 'name': '', 'range': [1119, 1124], 'children': [{'type': 'VariableDeclaration', 'name': 'model', 'range': [1120, 1120], 'children': []}, {'type': 'Identifier', 'name': 'LlmModel', 'range': [1122, 1122], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [1125, 1138], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [1126, 1129], 'children': [{'type': 'Identifier', 'name': 'model', 'range': [1126, 1126], 'children': []}, {'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [1129, 1129], 'children': []}]}, {'type': 'RaiseStatement', 'name': '', 'range': [1132, 1137], 'children': [{'type': 'Identifier', 'name': 'ValueError', 'range': [1133, 1133], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [1135, 1136], 'children': [{'type': 'TemplateElement', 'name': '', 'range': [1136, 1136], 'children': []}]}]}]}]}
2025-01-08 10:28:27,585 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:28,407 - INFO - Step 2 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [188, 222], 'children': [{'type': 'Assignment', 'name': '=', 'range': [188, 222], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [188, 188], 'children': []}, {'type': 'FunctionCall', 'name': 'APIKeyCredentials', 'range': [190, 221], 'children': [{'type': 'Argument', 'name': 'id', 'range': [193, 195], 'children': [{'type': 'StringLiteral', 'name': '"ed55ac19-356e-4243-a6cb-bc599e9b716f"', 'range': [195, 195], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [198, 200], 'children': [{'type': 'StringLiteral', 'name': '"openai"', 'range': [200, 200], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [203, 208], 'children': [{'type': 'FunctionCall', 'name': 'SecretStr', 'range': [205, 208], 'children': [{'type': 'StringLiteral', 'name': '"mock-openai-api-key"', 'range': [207, 207], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [211, 213], 'children': [{'type': 'StringLiteral', 'name': '"Mock OpenAI API key"', 'range': [213, 213], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [216, 218], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [218, 218], 'children': []}]}]}]}]}
2025-01-08 10:28:28,420 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:28,526 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [2639, 3102], 'children': [{'type': 'ClassDeclaration', 'name': 'AITextGeneratorBlock', 'range': [2639, 2836], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2646, 2758], 'children': [{'type': 'FieldDeclaration', 'name': 'prompt', 'range': [2653, 2670], 'children': []}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [2672, 2701], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [2703, 2710], 'children': []}, {'type': 'FieldDeclaration', 'name': 'sys_prompt', 'range': [2711, 2734], 'children': []}, {'type': 'FieldDeclaration', 'name': 'retry', 'range': [2735, 2758], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2837, 2868], 'children': [{'type': 'FieldDeclaration', 'name': 'response', 'range': [2844, 2856], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [2857, 2867], 'children': []}]}, {'type': 'MethodDeclaration', 'name': '__init__', 'range': [2869, 2965], 'children': []}, {'type': 'MethodDeclaration', 'name': 'llm_call', 'range': [2967, 3028], 'children': []}, {'type': 'MethodDeclaration', 'name': 'run', 'range': [3029, 3102], 'children': []}]}]}
2025-01-08 10:28:28,530 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:29,151 - INFO - Step 3 result: {'type': 'Program', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'ClassDeclaration', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1164, 1166], 'children': []}, {'type': 'PropertyDeclaration', 'name': 'role', 'range': [1169, 1171], 'children': [{'type': 'TypeAnnotation', 'name': 'MessageRole', 'range': [1171, 1171], 'children': []}]}, {'type': 'PropertyDeclaration', 'name': 'content', 'range': [1173, 1175], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1175, 1175], 'children': []}]}]}]}
2025-01-08 10:28:29,151 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:30,986 - INFO - Step 3 result: {'type': 'Program', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'ClassDeclaration', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'Inheritance', 'name': 'NamedTuple', 'range': [305, 307], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [308, 318], 'children': [{'type': 'FieldDeclaration', 'name': 'provider', 'range': [310, 312], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [312, 312], 'children': []}]}, {'type': 'FieldDeclaration', 'name': 'context_window', 'range': [314, 316], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [316, 316], 'children': []}]}]}]}]}
2025-01-08 10:28:30,986 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:31,075 - INFO - Step 3 result: {'type': 'Program', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'ClassDeclaration', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'EnumMember', 'name': 'SYSTEM', 'range': [1149, 1151], 'children': [{'type': 'Literal', 'value': '"system"', 'range': [1151, 1151]}]}, {'type': 'EnumMember', 'name': 'USER', 'range': [1153, 1155], 'children': [{'type': 'Literal', 'value': '"user"', 'range': [1155, 1155]}]}, {'type': 'EnumMember', 'name': 'ASSISTANT', 'range': [1157, 1159], 'children': [{'type': 'Literal', 'value': '"assistant"', 'range': [1159, 1159]}]}]}]}
2025-01-08 10:28:31,075 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:31,082 - INFO - Step 2 result: {'type': 'Program', 'name': 'LlmModelMeta', 'range': [319, 433], 'children': [{'type': 'ClassDeclaration', 'name': 'LlmModelMeta', 'range': [319, 325], 'children': [{'type': 'Inheritance', 'name': 'EnumMeta', 'range': [321, 323], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__members__', 'range': [329, 377], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [333, 335], 'children': []}, {'type': 'ReturnType', 'name': 'MappingProxyType[str, _EnumMemberT]', 'range': [344, 349], 'children': []}, {'type': 'Conditional', 'name': 'if', 'range': [352, 365], 'children': [{'type': 'Expression', 'name': 'Settings().config.behave_as == BehaveAs.LOCAL', 'range': [353, 364], 'children': []}, {'type': 'Block', 'name': '', 'range': [366, 376], 'children': [{'type': 'Assignment', 'name': 'members = super().__members__', 'range': [367, 373], 'children': []}, {'type': 'Return', 'name': 'return members', 'range': [375, 376], 'children': []}]}]}, {'type': 'Conditional', 'name': 'else', 'range': [378, 432], 'children': [{'type': 'Block', 'name': '', 'range': [380, 432], 'children': [{'type': 'Assignment', 'name': 'removed_providers = ["ollama"]', 'range': [381, 385], 'children': []}, {'type': 'Assignment', 'name': 'existing_members = super().__members__', 'range': [387, 393], 'children': []}, {'type': 'Assignment', 'name': 'members = {name: member for name, member in existing_members.items() if LlmModel[name].provider not in removed_providers}', 'range': [395, 424], 'children': []}, {'type': 'Return', 'name': 'return MappingProxyType(members)', 'range': [427, 431], 'children': []}]}]}]}]}
2025-01-08 10:28:31,084 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:32,134 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [176, 187], 'children': [{'type': 'VariableDeclaration', 'name': 'AICredentials', 'range': [176, 186], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [177, 186], 'children': [{'type': 'Identifier', 'name': 'CredentialsMetaInput', 'range': [178, 178], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [179, 186], 'children': [{'type': 'Identifier', 'name': 'LLMProviderName', 'range': [180, 180], 'children': []}, {'type': 'Literal', 'name': '', 'range': [182, 182], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [183, 185], 'children': [{'type': 'Literal', 'name': '', 'range': [184, 184], 'children': []}]}]}]}]}]}
2025-01-08 10:28:32,134 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:33,243 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [144, 175], 'children': [{'type': 'VariableDeclaration', 'name': 'LLMProviderName', 'range': [144, 174], 'children': [{'type': 'Literal', 'value': 'Literal', 'range': [146, 146]}, {'type': 'ArrayExpression', 'range': [147, 174], 'children': [{'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [149, 149]}, 'property': {'type': 'Identifier', 'name': 'ANTHROPIC', 'range': [151, 151]}, 'range': [149, 151]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [154, 154]}, 'property': {'type': 'Identifier', 'name': 'GROQ', 'range': [156, 156]}, 'range': [154, 156]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [159, 159]}, 'property': {'type': 'Identifier', 'name': 'OLLAMA', 'range': [161, 161]}, 'range': [159, 161]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [164, 164]}, 'property': {'type': 'Identifier', 'name': 'OPENAI', 'range': [166, 166]}, 'range': [164, 166]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [169, 169]}, 'property': {'type': 'Identifier', 'name': 'OPEN_ROUTER', 'range': [171, 171]}, 'range': [169, 171]}]}]}]}
2025-01-08 10:28:33,244 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:33,295 - INFO - Step 2 result: {'type': 'Program', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'FunctionDeclaration', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'ReturnStatement', 'range': [266, 301], 'children': [{'type': 'CallExpression', 'range': [267, 301], 'children': [{'type': 'Identifier', 'name': 'CredentialsField', 'range': [267, 267]}, {'type': 'ObjectExpression', 'range': [268, 301], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'description', 'range': [270, 270]}, 'value': {'type': 'Literal', 'value': 'API key for the LLM provider.', 'range': [272, 272]}, 'range': [270, 272]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator', 'range': [275, 275]}, 'value': {'type': 'Literal', 'value': 'model', 'range': [277, 277]}, 'range': [275, 277]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator_mapping', 'range': [280, 280]}, 'value': {'type': 'ObjectExpression', 'range': [282, 298], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'model', 'range': [284, 284]}, 'value': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'model', 'range': [288, 288]}, 'property': {'type': 'Identifier', 'name': 'metadata', 'range': [290, 290]}, 'computed': False, 'range': [288, 290]}, 'range': [284, 290]}]}, 'range': [280, 298]}]}]}]}]}]}
2025-01-08 10:28:33,296 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:33,540 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [223, 256], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [223, 255], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [225, 255], 'children': [{'type': 'Property', 'name': 'provider', 'range': [227, 231], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [227, 227], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.provider', 'range': [229, 231], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [229, 229], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [231, 231], 'children': []}]}]}, {'type': 'Property', 'name': 'id', 'range': [234, 238], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [234, 234], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.id', 'range': [236, 238], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [236, 236], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [238, 238], 'children': []}]}]}, {'type': 'Property', 'name': 'type', 'range': [241, 245], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [241, 241], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.type', 'range': [243, 245], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [243, 243], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [245, 245], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [248, 252], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [248, 248], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.title', 'range': [250, 252], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [250, 250], 'children': []}, {'type': 'Identifier', 'name': 'title', 'range': [252, 252], 'children': []}]}]}]}]}]}
2025-01-08 10:28:33,540 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:35,058 - INFO - Step 2 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'AITextSummarizerBlock', 'range': [3127, 3133], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [3134, 3140], 'children': [{'type': 'FieldDeclaration', 'name': 'text', 'range': [3141, 3159], 'children': []}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [3160, 3185], 'children': []}, {'type': 'FieldDeclaration', 'name': 'focus', 'range': [3186, 3209], 'children': []}, {'type': 'FieldDeclaration', 'name': 'style', 'range': [3210, 3235], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [3236, 3243], 'children': []}, {'type': 'FieldDeclaration', 'name': 'max_tokens', 'range': [3251, 3279], 'children': []}, {'type': 'FieldDeclaration', 'name': 'chunk_overlap', 'range': [3280, 3308], 'children': []}, {'type': 'FieldDeclaration', 'name': 'ollama_host', 'range': [3309, 3332], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [3334, 3340], 'children': [{'type': 'FieldDeclaration', 'name': 'summary', 'range': [3341, 3351], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [3352, 3362], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [3364, 3487], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [3489, 3531], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_run', 'range': [3532, 3622], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_split_text', 'range': [3626, 3712], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [3713, 3771], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_summarize_chunk', 'range': [3772, 3859], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_combine_summaries', 'range': [3860, 4063], 'children': []}]}]}
2025-01-08 10:28:35,059 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:35,250 - INFO - Step 3 result: {'type': 'Program', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumDeclaration', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumMember', 'name': 'CONCISE', 'range': [3110, 3112], 'children': [{'type': 'Literal', 'value': '"concise"', 'range': [3112, 3112]}]}, {'type': 'EnumMember', 'name': 'DETAILED', 'range': [3114, 3116], 'children': [{'type': 'Literal', 'value': '"detailed"', 'range': [3116, 3116]}]}, {'type': 'EnumMember', 'name': 'BULLET_POINTS', 'range': [3118, 3120], 'children': [{'type': 'Literal', 'value': '"bullet points"', 'range': [3120, 3120]}]}, {'type': 'EnumMember', 'name': 'NUMBERED_LIST', 'range': [3122, 3124], 'children': [{'type': 'Literal', 'value': '"numbered list"', 'range': [3124, 3124]}]}]}]}
2025-01-08 10:28:35,250 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:36,024 - INFO - Step 4 result: {'type': 'Program', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'ClassDecl', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1164, 1166], 'children': []}, {'type': 'PropertyDecl', 'name': 'role', 'range': [1169, 1171], 'children': [{'type': 'TypeAnnotation', 'name': 'MessageRole', 'range': [1171, 1171], 'children': []}]}, {'type': 'PropertyDecl', 'name': 'content', 'range': [1173, 1175], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1175, 1175], 'children': []}]}]}]}
2025-01-08 10:28:36,024 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:37,487 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [1119, 1139], 'children': [{'type': 'ForStatement', 'name': '', 'range': [1119, 1124], 'children': [{'type': 'VariableDeclaration', 'name': 'model', 'range': [1120, 1120], 'children': []}, {'type': 'Identifier', 'name': 'LlmModel', 'range': [1122, 1122], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [1125, 1138], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [1126, 1129], 'children': [{'type': 'Identifier', 'name': 'model', 'range': [1126, 1126], 'children': []}, {'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [1129, 1129], 'children': []}]}, {'type': 'RaiseStatement', 'name': '', 'range': [1132, 1137], 'children': [{'type': 'Identifier', 'name': 'ValueError', 'range': [1133, 1133], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [1135, 1136], 'children': [{'type': 'TemplateElement', 'name': '', 'range': [1136, 1136], 'children': []}]}]}]}]}
2025-01-08 10:28:37,487 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:38,119 - INFO - Step 4 result: {'type': 'Program', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'ClassDecl', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'EnumMember', 'name': 'SYSTEM', 'range': [1149, 1151], 'children': [{'type': 'Literal', 'value': '"system"', 'range': [1151, 1151]}]}, {'type': 'EnumMember', 'name': 'USER', 'range': [1153, 1155], 'children': [{'type': 'Literal', 'value': '"user"', 'range': [1155, 1155]}]}, {'type': 'EnumMember', 'name': 'ASSISTANT', 'range': [1157, 1159], 'children': [{'type': 'Literal', 'value': '"assistant"', 'range': [1159, 1159]}]}]}]}
2025-01-08 10:28:38,119 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:38,421 - INFO - Step 4 result: {'type': 'Program', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'ClassDecl', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'Inheritance', 'name': 'NamedTuple', 'range': [305, 307], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [308, 318], 'children': [{'type': 'FieldDecl', 'name': 'provider', 'range': [310, 312], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [312, 312], 'children': []}]}, {'type': 'FieldDecl', 'name': 'context_window', 'range': [314, 316], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [316, 316], 'children': []}]}]}]}]}
2025-01-08 10:28:38,421 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:39,402 - INFO - Step 1 result: {'type': 'Program', 'name': 'LlmModel', 'range': [434, 682], 'children': [{'type': 'ClassDeclaration', 'name': 'LlmModel', 'range': [434, 444], 'children': []}, {'type': 'VariableDeclaration', 'name': 'O1_PREVIEW', 'range': [451, 453], 'children': []}, {'type': 'VariableDeclaration', 'name': 'O1_MINI', 'range': [455, 457], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GPT4O_MINI', 'range': [459, 461], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GPT4O', 'range': [463, 465], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GPT4_TURBO', 'range': [467, 469], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GPT3_5_TURBO', 'range': [471, 473], 'children': []}, {'type': 'VariableDeclaration', 'name': 'CLAUDE_3_5_SONNET', 'range': [479, 481], 'children': []}, {'type': 'VariableDeclaration', 'name': 'CLAUDE_3_HAIKU', 'range': [483, 485], 'children': []}, {'type': 'VariableDeclaration', 'name': 'LLAMA3_8B', 'range': [491, 493], 'children': []}, {'type': 'VariableDeclaration', 'name': 'LLAMA3_70B', 'range': [495, 497], 'children': []}, {'type': 'VariableDeclaration', 'name': 'MIXTRAL_8X7B', 'range': [499, 501], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GEMMA_7B', 'range': [503, 505], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GEMMA2_9B', 'range': [507, 509], 'children': []}, {'type': 'VariableDeclaration', 'name': 'LLAMA3_1_405B', 'range': [519, 521], 'children': []}, {'type': 'VariableDeclaration', 'name': 'LLAMA3_1_70B', 'range': [523, 525], 'children': []}, {'type': 'VariableDeclaration', 'name': 'LLAMA3_1_8B', 'range': [527, 529], 'children': []}, {'type': 'VariableDeclaration', 'name': 'OLLAMA_LLAMA3_8B', 'range': [535, 537], 'children': []}, {'type': 'VariableDeclaration', 'name': 'OLLAMA_LLAMA3_405B', 'range': [539, 541], 'children': []}, {'type': 'VariableDeclaration', 'name': 'OLLAMA_DOLPHIN', 'range': [543, 545], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GEMINI_FLASH_1_5_8B', 'range': [551, 553], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GROK_BETA', 'range': [555, 557], 'children': []}, {'type': 'VariableDeclaration', 'name': 'MISTRAL_NEMO', 'range': [559, 561], 'children': []}, {'type': 'VariableDeclaration', 'name': 'COHERE_COMMAND_R_08_2024', 'range': [563, 565], 'children': []}, {'type': 'VariableDeclaration', 'name': 'COHERE_COMMAND_R_PLUS_08_2024', 'range': [567, 569], 'children': []}, {'type': 'VariableDeclaration', 'name': 'EVA_QWEN_2_5_32B', 'range': [571, 573], 'children': []}, {'type': 'VariableDeclaration', 'name': 'DEEPSEEK_CHAT', 'range': [575, 577], 'children': []}, {'type': 'VariableDeclaration', 'name': 'PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [579, 585], 'children': []}, {'type': 'VariableDeclaration', 'name': 'QWEN_QWQ_32B_PREVIEW', 'range': [587, 589], 'children': []}, {'type': 'VariableDeclaration', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [591, 593], 'children': []}, {'type': 'VariableDeclaration', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [595, 597], 'children': []}, {'type': 'VariableDeclaration', 'name': 'AMAZON_NOVA_LITE_V1', 'range': [599, 601], 'children': []}, {'type': 'VariableDeclaration', 'name': 'AMAZON_NOVA_MICRO_V1', 'range': [603, 605], 'children': []}, {'type': 'VariableDeclaration', 'name': 'AMAZON_NOVA_PRO_V1', 'range': [607, 609], 'children': []}, {'type': 'VariableDeclaration', 'name': 'MICROSOFT_WIZARDLM_2_8X22B', 'range': [611, 613], 'children': []}, {'type': 'VariableDeclaration', 'name': 'GRYPHE_MYTHOMAX_L2_13B', 'range': [615, 617], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'metadata', 'range': [623, 638], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'provider', 'range': [643, 659], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'context_window', 'range': [664, 680], 'children': []}]}
2025-01-08 10:28:39,402 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:28:39,762 - INFO - Step 3 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [188, 222], 'children': [{'type': 'Assignment', 'name': '=', 'range': [188, 222], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [188, 188], 'children': []}, {'type': 'FunctionCall', 'name': 'APIKeyCredentials', 'range': [190, 221], 'children': [{'type': 'Argument', 'name': 'id', 'range': [193, 195], 'children': [{'type': 'StringLiteral', 'name': '"ed55ac19-356e-4243-a6cb-bc599e9b716f"', 'range': [195, 195], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [198, 200], 'children': [{'type': 'StringLiteral', 'name': '"openai"', 'range': [200, 200], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [203, 208], 'children': [{'type': 'FunctionCall', 'name': 'SecretStr', 'range': [205, 208], 'children': [{'type': 'StringLiteral', 'name': '"mock-openai-api-key"', 'range': [207, 207], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [211, 213], 'children': [{'type': 'StringLiteral', 'name': '"Mock OpenAI API key"', 'range': [213, 213], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [216, 218], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [218, 218], 'children': []}]}]}]}]}
2025-01-08 10:28:39,762 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:40,170 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [2639, 3102], 'children': [{'type': 'ClassDeclaration', 'name': 'AITextGeneratorBlock', 'range': [2639, 2836], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [2646, 2758], 'children': [{'type': 'FieldDeclaration', 'name': 'prompt', 'range': [2653, 2670], 'children': []}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [2672, 2701], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [2703, 2710], 'children': []}, {'type': 'FieldDeclaration', 'name': 'sys_prompt', 'range': [2711, 2734], 'children': []}, {'type': 'FieldDeclaration', 'name': 'retry', 'range': [2735, 2758], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [2837, 2868], 'children': [{'type': 'FieldDeclaration', 'name': 'response', 'range': [2844, 2856], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [2857, 2867], 'children': []}]}, {'type': 'MethodDeclaration', 'name': '__init__', 'range': [2869, 2965], 'children': []}, {'type': 'MethodDeclaration', 'name': 'llm_call', 'range': [2967, 3028], 'children': []}, {'type': 'MethodDeclaration', 'name': 'run', 'range': [3029, 3102], 'children': []}]}]}
2025-01-08 10:28:40,172 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:40,178 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [176, 187], 'children': [{'type': 'VariableDeclaration', 'name': 'AICredentials', 'range': [176, 186], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [177, 186], 'children': [{'type': 'Identifier', 'name': 'CredentialsMetaInput', 'range': [178, 178], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [179, 186], 'children': [{'type': 'Identifier', 'name': 'LLMProviderName', 'range': [180, 180], 'children': []}, {'type': 'Literal', 'name': '', 'range': [182, 182], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [183, 185], 'children': [{'type': 'Literal', 'name': '', 'range': [184, 184], 'children': []}]}]}]}]}]}
2025-01-08 10:28:40,182 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:42,510 - INFO - Step 5 result: {'type': 'Program', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'ClassDecl', 'name': 'Message', 'range': [1162, 1177], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1164, 1166], 'children': []}, {'type': 'PropertyDecl', 'name': 'role', 'range': [1169, 1171], 'children': [{'type': 'TypeAnnotation', 'name': 'MessageRole', 'range': [1171, 1171], 'children': []}]}, {'type': 'PropertyDecl', 'name': 'content', 'range': [1173, 1175], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1175, 1175], 'children': []}]}]}]}
2025-01-08 10:28:42,510 - INFO - Completed main AST analysis flow
2025-01-08 10:28:42,511 - INFO - Successfully processed chunk
2025-01-08 10:28:44,206 - INFO - Step 4 result: {'type': 'Program', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumDeclaration', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumMember', 'name': 'CONCISE', 'range': [3110, 3112], 'children': [{'type': 'Literal', 'value': '"concise"', 'range': [3112, 3112]}]}, {'type': 'EnumMember', 'name': 'DETAILED', 'range': [3114, 3116], 'children': [{'type': 'Literal', 'value': '"detailed"', 'range': [3116, 3116]}]}, {'type': 'EnumMember', 'name': 'BULLET_POINTS', 'range': [3118, 3120], 'children': [{'type': 'Literal', 'value': '"bullet points"', 'range': [3120, 3120]}]}, {'type': 'EnumMember', 'name': 'NUMBERED_LIST', 'range': [3122, 3124], 'children': [{'type': 'Literal', 'value': '"numbered list"', 'range': [3124, 3124]}]}]}]}
2025-01-08 10:28:44,206 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:44,454 - INFO - Step 5 result: {'type': 'Program', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'ClassDecl', 'name': 'MessageRole', 'range': [1140, 1161], 'children': [{'type': 'EnumMember', 'name': 'SYSTEM', 'range': [1149, 1151], 'children': [{'type': 'Literal', 'value': '"system"', 'range': [1151, 1151]}]}, {'type': 'EnumMember', 'name': 'USER', 'range': [1153, 1155], 'children': [{'type': 'Literal', 'value': '"user"', 'range': [1155, 1155]}]}, {'type': 'EnumMember', 'name': 'ASSISTANT', 'range': [1157, 1159], 'children': [{'type': 'Literal', 'value': '"assistant"', 'range': [1159, 1159]}]}]}]}
2025-01-08 10:28:44,454 - INFO - Completed main AST analysis flow
2025-01-08 10:28:44,454 - INFO - Successfully processed chunk
2025-01-08 10:28:44,615 - INFO - Step 3 result: {'type': 'Program', 'name': 'LlmModelMeta', 'range': [319, 433], 'children': [{'type': 'ClassDeclaration', 'name': 'LlmModelMeta', 'range': [319, 325], 'children': [{'type': 'Inheritance', 'name': 'EnumMeta', 'range': [321, 323], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__members__', 'range': [329, 377], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [333, 335], 'children': []}, {'type': 'ReturnType', 'name': 'MappingProxyType[str, _EnumMemberT]', 'range': [344, 349], 'children': []}, {'type': 'Conditional', 'name': 'if', 'range': [352, 365], 'children': [{'type': 'Expression', 'name': 'Settings().config.behave_as == BehaveAs.LOCAL', 'range': [353, 364], 'children': []}, {'type': 'Block', 'name': '', 'range': [366, 376], 'children': [{'type': 'Assignment', 'name': 'members = super().__members__', 'range': [367, 373], 'children': []}, {'type': 'Return', 'name': 'return members', 'range': [375, 376], 'children': []}]}]}, {'type': 'Conditional', 'name': 'else', 'range': [378, 432], 'children': [{'type': 'Block', 'name': '', 'range': [380, 432], 'children': [{'type': 'Assignment', 'name': 'removed_providers = ["ollama"]', 'range': [381, 385], 'children': []}, {'type': 'Assignment', 'name': 'existing_members = super().__members__', 'range': [387, 393], 'children': []}, {'type': 'Assignment', 'name': 'members = {name: member for name, member in existing_members.items() if LlmModel[name].provider not in removed_providers}', 'range': [395, 424], 'children': []}, {'type': 'Return', 'name': 'return MappingProxyType(members)', 'range': [427, 431], 'children': []}]}]}]}]}
2025-01-08 10:28:44,615 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:45,808 - INFO - Step 5 result: {'type': 'Program', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'ClassDecl', 'name': 'ModelMetadata', 'range': [303, 318], 'children': [{'type': 'Inheritance', 'name': 'NamedTuple', 'range': [305, 307], 'children': []}, {'type': 'ClassBody', 'name': '', 'range': [308, 318], 'children': [{'type': 'FieldDecl', 'name': 'provider', 'range': [310, 312], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [312, 312], 'children': []}]}, {'type': 'FieldDecl', 'name': 'context_window', 'range': [314, 316], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [316, 316], 'children': []}]}]}]}]}
2025-01-08 10:28:45,808 - INFO - Completed main AST analysis flow
2025-01-08 10:28:45,808 - INFO - Successfully processed chunk
2025-01-08 10:28:45,824 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [144, 175], 'children': [{'type': 'VariableDeclaration', 'name': 'LLMProviderName', 'range': [144, 174], 'children': [{'type': 'Literal', 'value': 'Literal', 'range': [146, 146]}, {'type': 'ArrayExpression', 'range': [147, 174], 'children': [{'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [149, 149]}, 'property': {'type': 'Identifier', 'name': 'ANTHROPIC', 'range': [151, 151]}, 'range': [149, 151]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [154, 154]}, 'property': {'type': 'Identifier', 'name': 'GROQ', 'range': [156, 156]}, 'range': [154, 156]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [159, 159]}, 'property': {'type': 'Identifier', 'name': 'OLLAMA', 'range': [161, 161]}, 'range': [159, 161]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [164, 164]}, 'property': {'type': 'Identifier', 'name': 'OPENAI', 'range': [166, 166]}, 'range': [164, 166]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [169, 169]}, 'property': {'type': 'Identifier', 'name': 'OPEN_ROUTER', 'range': [171, 171]}, 'range': [169, 171]}]}]}]}
2025-01-08 10:28:45,824 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:46,329 - INFO - Step 3 result: {'type': 'Program', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'FunctionDeclaration', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'ReturnStatement', 'range': [266, 301], 'children': [{'type': 'CallExpression', 'range': [267, 301], 'children': [{'type': 'Identifier', 'name': 'CredentialsField', 'range': [267, 267]}, {'type': 'ObjectExpression', 'range': [268, 301], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'description', 'range': [270, 270]}, 'value': {'type': 'Literal', 'value': 'API key for the LLM provider.', 'range': [272, 272]}, 'range': [270, 272]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator', 'range': [275, 275]}, 'value': {'type': 'Literal', 'value': 'model', 'range': [277, 277]}, 'range': [275, 277]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator_mapping', 'range': [280, 280]}, 'value': {'type': 'ObjectExpression', 'range': [282, 298], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'model', 'range': [284, 284]}, 'value': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'model', 'range': [288, 288]}, 'property': {'type': 'Identifier', 'name': 'metadata', 'range': [290, 290]}, 'computed': False, 'range': [288, 290]}, 'range': [284, 290]}]}, 'range': [280, 298]}]}]}]}]}]}
2025-01-08 10:28:46,329 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:46,383 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [176, 187], 'children': [{'type': 'VariableDeclaration', 'name': 'AICredentials', 'range': [176, 186], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [177, 186], 'children': [{'type': 'Identifier', 'name': 'CredentialsMetaInput', 'range': [178, 178], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [179, 186], 'children': [{'type': 'Identifier', 'name': 'LLMProviderName', 'range': [180, 180], 'children': []}, {'type': 'Literal', 'name': '', 'range': [182, 182], 'children': []}, {'type': 'ArrayExpression', 'name': '', 'range': [183, 185], 'children': [{'type': 'Literal', 'name': '', 'range': [184, 184], 'children': []}]}]}]}]}]}
2025-01-08 10:28:46,383 - INFO - Completed main AST analysis flow
2025-01-08 10:28:46,383 - INFO - Successfully processed chunk
2025-01-08 10:28:46,718 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [1119, 1139], 'children': [{'type': 'ForStatement', 'name': '', 'range': [1119, 1124], 'children': [{'type': 'VariableDeclaration', 'name': 'model', 'range': [1120, 1120], 'children': []}, {'type': 'Identifier', 'name': 'LlmModel', 'range': [1122, 1122], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [1125, 1138], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [1126, 1129], 'children': [{'type': 'Identifier', 'name': 'model', 'range': [1126, 1126], 'children': []}, {'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [1129, 1129], 'children': []}]}, {'type': 'RaiseStatement', 'name': '', 'range': [1132, 1137], 'children': [{'type': 'Identifier', 'name': 'ValueError', 'range': [1133, 1133], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [1135, 1136], 'children': [{'type': 'TemplateElement', 'name': '', 'range': [1136, 1136], 'children': []}]}]}]}]}
2025-01-08 10:28:46,718 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:50,123 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [223, 256], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [223, 255], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [225, 255], 'children': [{'type': 'Property', 'name': 'provider', 'range': [227, 231], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [227, 227], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.provider', 'range': [229, 231], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [229, 229], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [231, 231], 'children': []}]}]}, {'type': 'Property', 'name': 'id', 'range': [234, 238], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [234, 234], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.id', 'range': [236, 238], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [236, 236], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [238, 238], 'children': []}]}]}, {'type': 'Property', 'name': 'type', 'range': [241, 245], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [241, 241], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.type', 'range': [243, 245], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [243, 243], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [245, 245], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [248, 252], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [248, 248], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.title', 'range': [250, 252], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [250, 250], 'children': []}, {'type': 'Identifier', 'name': 'title', 'range': [252, 252], 'children': []}]}]}]}]}]}
2025-01-08 10:28:50,124 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:50,242 - INFO - Step 4 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [188, 222], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [188, 222], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [188, 188], 'children': []}, {'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [190, 221], 'children': [{'type': 'Argument', 'name': 'id', 'range': [193, 195], 'children': [{'type': 'Literal', 'name': '"ed55ac19-356e-4243-a6cb-bc599e9b716f"', 'range': [195, 195], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [198, 200], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [200, 200], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [203, 208], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [205, 208], 'children': [{'type': 'Literal', 'name': '"mock-openai-api-key"', 'range': [207, 207], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '"Mock OpenAI API key"', 'range': [213, 213], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [216, 218], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [218, 218], 'children': []}]}]}]}]}
2025-01-08 10:28:50,242 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:50,597 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'ast', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [9, 9], 'children': []}, {'type': 'ImportSpecifier', 'name': 'EnumMeta', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'JSONDecodeError', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'ImportSpecifier', 'name': 'MappingProxyType', 'range': [21, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'TYPE_CHECKING', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Any', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'List', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Literal', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'NamedTuple', 'range': [34, 34], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [40, 40], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [43, 51], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [50, 50], 'children': []}]}, {'type': 'ConditionalImport', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': '_EnumMemberT', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 65], 'children': [{'type': 'ImportSpecifier', 'name': 'anthropic', 'range': [64, 64], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [66, 68], 'children': [{'type': 'ImportSpecifier', 'name': 'ollama', 'range': [67, 67], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [69, 71], 'children': [{'type': 'ImportSpecifier', 'name': 'openai', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'Groq', 'range': [75, 75], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [78, 92], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [85, 85], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [87, 87], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [89, 89], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [91, 91], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [93, 115], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [102, 102], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [105, 105], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [108, 108], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [111, 111], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [116, 122], 'children': [{'type': 'ImportSpecifier', 'name': 'json', 'range': [121, 121], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [123, 133], 'children': [{'type': 'ImportSpecifier', 'name': 'BehaveAs', 'range': [130, 130], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Settings', 'range': [132, 132], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [135, 143], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [136, 143], 'children': [{'type': 'CallExpression', 'name': 'getLogger', 'range': [139, 142], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [141, 141], 'children': []}]}]}]}]}
2025-01-08 10:28:50,597 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:50,699 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [2639, 3102], 'children': [{'type': 'ClassDecl', 'name': 'AITextGeneratorBlock', 'range': [2639, 2836], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [2646, 2758], 'children': [{'type': 'FieldDecl', 'name': 'prompt', 'range': [2653, 2670], 'children': []}, {'type': 'FieldDecl', 'name': 'model', 'range': [2672, 2701], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [2703, 2710], 'children': []}, {'type': 'FieldDecl', 'name': 'sys_prompt', 'range': [2711, 2734], 'children': []}, {'type': 'FieldDecl', 'name': 'retry', 'range': [2735, 2758], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2837, 2868], 'children': [{'type': 'FieldDecl', 'name': 'response', 'range': [2844, 2856], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [2857, 2867], 'children': []}]}, {'type': 'MethodDecl', 'name': '__init__', 'range': [2869, 2965], 'children': []}, {'type': 'MethodDecl', 'name': 'llm_call', 'range': [2967, 3028], 'children': []}, {'type': 'MethodDecl', 'name': 'run', 'range': [3029, 3102], 'children': []}]}]}
2025-01-08 10:28:50,699 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:51,491 - INFO - Step 3 result: {'top_level_declarations': [{'type': 'ClassDeclaration', 'name': 'AITextSummarizerBlock', 'range': [3127, 3133], 'children': [{'type': 'ClassDeclaration', 'name': 'Input', 'range': [3134, 3140], 'children': [{'type': 'FieldDeclaration', 'name': 'text', 'range': [3141, 3159], 'children': []}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [3160, 3185], 'children': []}, {'type': 'FieldDeclaration', 'name': 'focus', 'range': [3186, 3209], 'children': []}, {'type': 'FieldDeclaration', 'name': 'style', 'range': [3210, 3235], 'children': []}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [3236, 3243], 'children': []}, {'type': 'FieldDeclaration', 'name': 'max_tokens', 'range': [3251, 3279], 'children': []}, {'type': 'FieldDeclaration', 'name': 'chunk_overlap', 'range': [3280, 3308], 'children': []}, {'type': 'FieldDeclaration', 'name': 'ollama_host', 'range': [3309, 3332], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [3334, 3340], 'children': [{'type': 'FieldDeclaration', 'name': 'summary', 'range': [3341, 3351], 'children': []}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [3352, 3362], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [3364, 3487], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [3489, 3531], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_run', 'range': [3532, 3622], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_split_text', 'range': [3626, 3712], 'children': []}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [3713, 3771], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_summarize_chunk', 'range': [3772, 3859], 'children': []}, {'type': 'FunctionDeclaration', 'name': '_combine_summaries', 'range': [3860, 4063], 'children': []}]}]}
2025-01-08 10:28:51,491 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:52,088 - INFO - Step 5 result: {'type': 'Program', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumDeclaration', 'name': 'SummaryStyle', 'range': [3103, 3126], 'children': [{'type': 'EnumMember', 'name': 'CONCISE', 'range': [3110, 3112], 'children': [{'type': 'Literal', 'value': '"concise"', 'range': [3112, 3112]}]}, {'type': 'EnumMember', 'name': 'DETAILED', 'range': [3114, 3116], 'children': [{'type': 'Literal', 'value': '"detailed"', 'range': [3116, 3116]}]}, {'type': 'EnumMember', 'name': 'BULLET_POINTS', 'range': [3118, 3120], 'children': [{'type': 'Literal', 'value': '"bullet points"', 'range': [3120, 3120]}]}, {'type': 'EnumMember', 'name': 'NUMBERED_LIST', 'range': [3122, 3124], 'children': [{'type': 'Literal', 'value': '"numbered list"', 'range': [3124, 3124]}]}]}]}
2025-01-08 10:28:52,088 - INFO - Completed main AST analysis flow
2025-01-08 10:28:52,088 - INFO - Successfully processed chunk
2025-01-08 10:28:55,686 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [1119, 1139], 'children': [{'type': 'ForStatement', 'name': '', 'range': [1119, 1124], 'children': [{'type': 'VariableDeclaration', 'name': 'model', 'range': [1120, 1120], 'children': []}, {'type': 'Identifier', 'name': 'LlmModel', 'range': [1122, 1122], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [1125, 1138], 'children': [{'type': 'BinaryExpression', 'name': '', 'range': [1126, 1129], 'children': [{'type': 'Identifier', 'name': 'model', 'range': [1126, 1126], 'children': []}, {'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [1129, 1129], 'children': []}]}, {'type': 'RaiseStatement', 'name': '', 'range': [1132, 1137], 'children': [{'type': 'Identifier', 'name': 'ValueError', 'range': [1133, 1133], 'children': []}, {'type': 'TemplateLiteral', 'name': '', 'range': [1135, 1136], 'children': [{'type': 'TemplateElement', 'name': '', 'range': [1136, 1136], 'children': []}]}]}]}]}
2025-01-08 10:28:55,686 - INFO - Completed main AST analysis flow
2025-01-08 10:28:55,687 - INFO - Successfully processed chunk
2025-01-08 10:28:56,911 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [144, 175], 'children': [{'type': 'VariableDeclaration', 'name': 'LLMProviderName', 'range': [144, 174], 'children': [{'type': 'Literal', 'value': 'Literal', 'range': [146, 146]}, {'type': 'ArrayExpression', 'range': [147, 174], 'children': [{'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [149, 149]}, 'property': {'type': 'Identifier', 'name': 'ANTHROPIC', 'range': [151, 151]}, 'range': [149, 151]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [154, 154]}, 'property': {'type': 'Identifier', 'name': 'GROQ', 'range': [156, 156]}, 'range': [154, 156]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [159, 159]}, 'property': {'type': 'Identifier', 'name': 'OLLAMA', 'range': [161, 161]}, 'range': [159, 161]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [164, 164]}, 'property': {'type': 'Identifier', 'name': 'OPENAI', 'range': [166, 166]}, 'range': [164, 166]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [169, 169]}, 'property': {'type': 'Identifier', 'name': 'OPEN_ROUTER', 'range': [171, 171]}, 'range': [169, 171]}]}]}]}
2025-01-08 10:28:56,911 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:57,392 - INFO - Step 4 result: {'type': 'Program', 'name': 'LlmModelMeta', 'range': [319, 433], 'children': [{'type': 'ClassDecl', 'name': 'LlmModelMeta', 'range': [319, 325], 'children': [{'type': 'Inheritance', 'name': 'EnumMeta', 'range': [321, 323], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__members__', 'range': [329, 377], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [333, 335], 'children': []}, {'type': 'ReturnType', 'name': 'MappingProxyType[str, _EnumMemberT]', 'range': [344, 349], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [352, 365], 'children': [{'type': 'BinaryExpression', 'name': 'Settings().config.behave_as == BehaveAs.LOCAL', 'range': [353, 364], 'children': []}, {'type': 'Block', 'name': '', 'range': [366, 376], 'children': [{'type': 'Assignment', 'name': 'members = super().__members__', 'range': [367, 373], 'children': []}, {'type': 'Return', 'name': 'return members', 'range': [375, 376], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [378, 432], 'children': [{'type': 'Block', 'name': '', 'range': [380, 432], 'children': [{'type': 'Assignment', 'name': 'removed_providers = ["ollama"]', 'range': [381, 385], 'children': []}, {'type': 'Assignment', 'name': 'existing_members = super().__members__', 'range': [387, 393], 'children': []}, {'type': 'Assignment', 'name': 'members = {name: member for name, member in existing_members.items() if LlmModel[name].provider not in removed_providers}', 'range': [395, 424], 'children': []}, {'type': 'Return', 'name': 'return MappingProxyType(members)', 'range': [427, 431], 'children': []}]}]}]}]}
2025-01-08 10:28:57,393 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:58,409 - INFO - Step 4 result: {'type': 'Program', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'FunctionDecl', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'ReturnStatement', 'range': [266, 301], 'children': [{'type': 'CallExpression', 'range': [267, 301], 'children': [{'type': 'Identifier', 'name': 'CredentialsField', 'range': [267, 267]}, {'type': 'ObjectExpression', 'range': [268, 301], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'description', 'range': [270, 270]}, 'value': {'type': 'Literal', 'value': 'API key for the LLM provider.', 'range': [272, 272]}, 'range': [270, 272]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator', 'range': [275, 275]}, 'value': {'type': 'Literal', 'value': 'model', 'range': [277, 277]}, 'range': [275, 277]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator_mapping', 'range': [280, 280]}, 'value': {'type': 'ObjectExpression', 'range': [282, 298], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'model', 'range': [284, 284]}, 'value': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'model', 'range': [288, 288]}, 'property': {'type': 'Identifier', 'name': 'metadata', 'range': [290, 290]}, 'computed': False, 'range': [288, 290]}, 'range': [284, 290]}]}, 'range': [280, 298]}]}]}]}]}]}
2025-01-08 10:28:58,410 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:01,032 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [2639, 3102], 'children': [{'type': 'ClassDecl', 'name': 'AITextGeneratorBlock', 'range': [2639, 2836], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [2646, 2758], 'children': [{'type': 'FieldDecl', 'name': 'prompt', 'range': [2653, 2670], 'children': []}, {'type': 'FieldDecl', 'name': 'model', 'range': [2672, 2701], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [2703, 2710], 'children': []}, {'type': 'FieldDecl', 'name': 'sys_prompt', 'range': [2711, 2734], 'children': []}, {'type': 'FieldDecl', 'name': 'retry', 'range': [2735, 2758], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [2837, 2868], 'children': [{'type': 'FieldDecl', 'name': 'response', 'range': [2844, 2856], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [2857, 2867], 'children': []}]}, {'type': 'MethodDecl', 'name': '__init__', 'range': [2869, 2965], 'children': []}, {'type': 'MethodDecl', 'name': 'llm_call', 'range': [2967, 3028], 'children': []}, {'type': 'MethodDecl', 'name': 'run', 'range': [3029, 3102], 'children': []}]}]}
2025-01-08 10:29:01,032 - INFO - Completed main AST analysis flow
2025-01-08 10:29:01,033 - INFO - Successfully processed chunk
2025-01-08 10:29:01,136 - INFO - Step 5 result: {'type': 'Program', 'name': 'TEST_CREDENTIALS', 'range': [188, 222], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [188, 222], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [188, 188], 'children': []}, {'type': 'CallExpression', 'name': 'APIKeyCredentials', 'range': [190, 221], 'children': [{'type': 'Argument', 'name': 'id', 'range': [193, 195], 'children': [{'type': 'Literal', 'name': '"ed55ac19-356e-4243-a6cb-bc599e9b716f"', 'range': [195, 195], 'children': []}]}, {'type': 'Argument', 'name': 'provider', 'range': [198, 200], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [200, 200], 'children': []}]}, {'type': 'Argument', 'name': 'api_key', 'range': [203, 208], 'children': [{'type': 'CallExpression', 'name': 'SecretStr', 'range': [205, 208], 'children': [{'type': 'Literal', 'name': '"mock-openai-api-key"', 'range': [207, 207], 'children': []}]}]}, {'type': 'Argument', 'name': 'title', 'range': [211, 213], 'children': [{'type': 'Literal', 'name': '"Mock OpenAI API key"', 'range': [213, 213], 'children': []}]}, {'type': 'Argument', 'name': 'expires_at', 'range': [216, 218], 'children': [{'type': 'Identifier', 'name': 'None', 'range': [218, 218], 'children': []}]}]}]}]}
2025-01-08 10:29:01,136 - INFO - Completed main AST analysis flow
2025-01-08 10:29:01,136 - INFO - Successfully processed chunk
2025-01-08 10:29:06,742 - INFO - Step 4 result: {'top_level_declarations': [{'type': 'ClassDecl', 'name': 'AITextSummarizerBlock', 'range': [3127, 3133], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [3134, 3140], 'children': [{'type': 'FieldDecl', 'name': 'text', 'range': [3141, 3159], 'children': []}, {'type': 'FieldDecl', 'name': 'model', 'range': [3160, 3185], 'children': []}, {'type': 'FieldDecl', 'name': 'focus', 'range': [3186, 3209], 'children': []}, {'type': 'FieldDecl', 'name': 'style', 'range': [3210, 3235], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [3236, 3243], 'children': []}, {'type': 'FieldDecl', 'name': 'max_tokens', 'range': [3251, 3279], 'children': []}, {'type': 'FieldDecl', 'name': 'chunk_overlap', 'range': [3280, 3308], 'children': []}, {'type': 'FieldDecl', 'name': 'ollama_host', 'range': [3309, 3332], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [3334, 3340], 'children': [{'type': 'FieldDecl', 'name': 'summary', 'range': [3341, 3351], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [3352, 3362], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [3364, 3487], 'children': []}, {'type': 'FunctionDecl', 'name': 'run', 'range': [3489, 3531], 'children': []}, {'type': 'FunctionDecl', 'name': '_run', 'range': [3532, 3622], 'children': []}, {'type': 'FunctionDecl', 'name': '_split_text', 'range': [3626, 3712], 'children': []}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [3713, 3771], 'children': []}, {'type': 'FunctionDecl', 'name': '_summarize_chunk', 'range': [3772, 3859], 'children': []}, {'type': 'FunctionDecl', 'name': '_combine_summaries', 'range': [3860, 4063], 'children': []}]}]}
2025-01-08 10:29:06,742 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:07,014 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [223, 256], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [223, 255], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [225, 255], 'children': [{'type': 'Property', 'name': 'provider', 'range': [227, 231], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [227, 227], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.provider', 'range': [229, 231], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [229, 229], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [231, 231], 'children': []}]}]}, {'type': 'Property', 'name': 'id', 'range': [234, 238], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [234, 234], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.id', 'range': [236, 238], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [236, 236], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [238, 238], 'children': []}]}]}, {'type': 'Property', 'name': 'type', 'range': [241, 245], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [241, 241], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.type', 'range': [243, 245], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [243, 243], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [245, 245], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [248, 252], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [248, 248], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.title', 'range': [250, 252], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [250, 250], 'children': []}, {'type': 'Identifier', 'name': 'title', 'range': [252, 252], 'children': []}]}]}]}]}]}
2025-01-08 10:29:07,014 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:08,827 - INFO - Step 2 result: {'type': 'Program', 'name': 'AIConversationBlock', 'range': [4065, 4375], 'children': [{'type': 'ClassDeclaration', 'name': 'AIConversationBlock', 'range': [4065, 4071], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [4067, 4069], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4072, 4078], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4074, 4076], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'messages', 'range': [4079, 4098], 'children': [{'type': 'TypeAnnotation', 'name': 'List[Message]', 'range': [4081, 4084], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4086, 4097], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4089, 4091], 'children': []}, {'type': 'Argument', 'name': 'min_length', 'range': [4093, 4095], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [4099, 4124], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4101, 4101], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4103, 4123], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4106, 4108], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4111, 4115], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4118, 4120], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [4125, 4132], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4127, 4127], 'children': []}, {'type': 'Assignment', 'name': 'AICredentialsField', 'range': [4129, 4131], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [4133, 4158], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [4135, 4137], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4139, 4157], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4142, 4144], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4147, 4149], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4152, 4154], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [4159, 4182], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4161, 4161], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4163, 4181], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4166, 4168], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4171, 4173], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4176, 4178], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4184, 4190], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4186, 4188], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [4191, 4203], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4193, 4193], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4195, 4202], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4198, 4200], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [4204, 4214], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4206, 4206], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4208, 4213], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4210, 4212], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4216, 4375], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4219, 4219], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4223, 4227], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [4230, 4232], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [4235, 4237], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [4240, 4246], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [4249, 4253], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [4256, 4260], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [4263, 4334], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials', 'range': [4337, 4339], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [4342, 4352], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [4355, 4371], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4377, 4437], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4381, 4381], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4384, 4388], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4391, 4393], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [4399, 4399], 'children': []}, {'type': 'Assignment', 'name': 'block', 'range': [4402, 4406], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4408, 4421], 'children': []}, {'type': 'MethodCall', 'name': 'merge_stats', 'range': [4423, 4430], 'children': []}, {'type': 'ReturnStatement', 'name': 'response', 'range': [4432, 4436], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [4439, 4532], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4443, 4443], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4445, 4447], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4451, 4453], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [4462, 4462], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4465, 4524], 'children': []}, {'type': 'YieldStatement', 'name': 'response', 'range': [4527, 4531], 'children': []}]}]}
2025-01-08 10:29:08,828 - INFO - Starting Step 3: AST simplification
2025-01-08 10:29:08,838 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [144, 175], 'children': [{'type': 'VariableDeclaration', 'name': 'LLMProviderName', 'range': [144, 174], 'children': [{'type': 'Literal', 'value': 'Literal', 'range': [146, 146]}, {'type': 'ArrayExpression', 'range': [147, 174], 'children': [{'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [149, 149]}, 'property': {'type': 'Identifier', 'name': 'ANTHROPIC', 'range': [151, 151]}, 'range': [149, 151]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [154, 154]}, 'property': {'type': 'Identifier', 'name': 'GROQ', 'range': [156, 156]}, 'range': [154, 156]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [159, 159]}, 'property': {'type': 'Identifier', 'name': 'OLLAMA', 'range': [161, 161]}, 'range': [159, 161]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [164, 164]}, 'property': {'type': 'Identifier', 'name': 'OPENAI', 'range': [166, 166]}, 'range': [164, 166]}, {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'ProviderName', 'range': [169, 169]}, 'property': {'type': 'Identifier', 'name': 'OPEN_ROUTER', 'range': [171, 171]}, 'range': [169, 171]}]}]}]}
2025-01-08 10:29:08,838 - INFO - Completed main AST analysis flow
2025-01-08 10:29:08,839 - INFO - Successfully processed chunk
2025-01-08 10:29:10,030 - INFO - Step 5 result: {'type': 'Program', 'name': 'LlmModelMeta', 'range': [319, 433], 'children': [{'type': 'ClassDecl', 'name': 'LlmModelMeta', 'range': [319, 325], 'children': [{'type': 'Inheritance', 'name': 'EnumMeta', 'range': [321, 323], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__members__', 'range': [329, 377], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [333, 335], 'children': []}, {'type': 'ReturnType', 'name': 'MappingProxyType[str, _EnumMemberT]', 'range': [344, 349], 'children': []}, {'type': 'IfStatement', 'name': 'if', 'range': [352, 365], 'children': [{'type': 'BinaryExpression', 'name': 'Settings().config.behave_as == BehaveAs.LOCAL', 'range': [353, 364], 'children': []}, {'type': 'Block', 'name': '', 'range': [366, 376], 'children': [{'type': 'Assignment', 'name': 'members = super().__members__', 'range': [367, 373], 'children': []}, {'type': 'Return', 'name': 'return members', 'range': [375, 376], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [378, 432], 'children': [{'type': 'Block', 'name': '', 'range': [380, 432], 'children': [{'type': 'Assignment', 'name': 'removed_providers = ["ollama"]', 'range': [381, 385], 'children': []}, {'type': 'Assignment', 'name': 'existing_members = super().__members__', 'range': [387, 393], 'children': []}, {'type': 'Assignment', 'name': 'members = {name: member for name, member in existing_members.items() if LlmModel[name].provider not in removed_providers}', 'range': [395, 424], 'children': []}, {'type': 'Return', 'name': 'return MappingProxyType(members)', 'range': [427, 431], 'children': []}]}]}]}]}
2025-01-08 10:29:10,030 - INFO - Completed main AST analysis flow
2025-01-08 10:29:10,030 - INFO - Successfully processed chunk
2025-01-08 10:29:11,174 - INFO - Step 5 result: {'type': 'Program', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'FunctionDecl', 'name': 'AICredentialsField', 'range': [257, 302], 'children': [{'type': 'ReturnStatement', 'range': [266, 301], 'children': [{'type': 'CallExpression', 'range': [267, 301], 'children': [{'type': 'Identifier', 'name': 'CredentialsField', 'range': [267, 267]}, {'type': 'ObjectExpression', 'range': [268, 301], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'description', 'range': [270, 270]}, 'value': {'type': 'Literal', 'value': 'API key for the LLM provider.', 'range': [272, 272]}, 'range': [270, 272]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator', 'range': [275, 275]}, 'value': {'type': 'Literal', 'value': 'model', 'range': [277, 277]}, 'range': [275, 277]}, {'type': 'Property', 'key': {'type': 'Identifier', 'name': 'discriminator_mapping', 'range': [280, 280]}, 'value': {'type': 'ObjectExpression', 'range': [282, 298], 'children': [{'type': 'Property', 'key': {'type': 'Identifier', 'name': 'model', 'range': [284, 284]}, 'value': {'type': 'MemberExpression', 'object': {'type': 'Identifier', 'name': 'model', 'range': [288, 288]}, 'property': {'type': 'Identifier', 'name': 'metadata', 'range': [290, 290]}, 'computed': False, 'range': [288, 290]}, 'range': [284, 290]}]}, 'range': [280, 298]}]}]}]}]}]}
2025-01-08 10:29:11,174 - INFO - Completed main AST analysis flow
2025-01-08 10:29:11,175 - INFO - Successfully processed chunk
2025-01-08 10:29:22,284 - INFO - Step 5 result: {'type': 'Program', 'name': 'AITextSummarizerBlock', 'range': [3127, 4063], 'children': [{'type': 'ClassDecl', 'name': 'Input', 'range': [3134, 3332], 'children': [{'type': 'FieldDecl', 'name': 'text', 'range': [3141, 3159], 'children': []}, {'type': 'FieldDecl', 'name': 'model', 'range': [3160, 3185], 'children': []}, {'type': 'FieldDecl', 'name': 'focus', 'range': [3186, 3209], 'children': []}, {'type': 'FieldDecl', 'name': 'style', 'range': [3210, 3235], 'children': []}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [3236, 3243], 'children': []}, {'type': 'FieldDecl', 'name': 'max_tokens', 'range': [3251, 3279], 'children': []}, {'type': 'FieldDecl', 'name': 'chunk_overlap', 'range': [3280, 3308], 'children': []}, {'type': 'FieldDecl', 'name': 'ollama_host', 'range': [3309, 3332], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [3334, 3362], 'children': [{'type': 'FieldDecl', 'name': 'summary', 'range': [3341, 3351], 'children': []}, {'type': 'FieldDecl', 'name': 'error', 'range': [3352, 3362], 'children': []}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [3364, 3487], 'children': []}, {'type': 'FunctionDecl', 'name': 'run', 'range': [3489, 3531], 'children': []}, {'type': 'FunctionDecl', 'name': '_run', 'range': [3532, 3622], 'children': []}, {'type': 'FunctionDecl', 'name': '_split_text', 'range': [3626, 3712], 'children': []}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [3713, 3771], 'children': []}, {'type': 'FunctionDecl', 'name': '_summarize_chunk', 'range': [3772, 3859], 'children': []}, {'type': 'FunctionDecl', 'name': '_combine_summaries', 'range': [3860, 4063], 'children': []}]}
2025-01-08 10:29:22,284 - INFO - Completed main AST analysis flow
2025-01-08 10:29:22,285 - INFO - Successfully processed chunk
2025-01-08 10:29:23,749 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'ast', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [9, 9], 'children': []}, {'type': 'ImportSpecifier', 'name': 'EnumMeta', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'JSONDecodeError', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'ImportSpecifier', 'name': 'MappingProxyType', 'range': [21, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'TYPE_CHECKING', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Any', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'List', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Literal', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'NamedTuple', 'range': [34, 34], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [40, 40], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [43, 51], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [50, 50], 'children': []}]}, {'type': 'ConditionalImport', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': '_EnumMemberT', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 65], 'children': [{'type': 'ImportSpecifier', 'name': 'anthropic', 'range': [64, 64], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [66, 68], 'children': [{'type': 'ImportSpecifier', 'name': 'ollama', 'range': [67, 67], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [69, 71], 'children': [{'type': 'ImportSpecifier', 'name': 'openai', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'Groq', 'range': [75, 75], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [78, 92], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [85, 85], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [87, 87], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [89, 89], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [91, 91], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [93, 115], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [102, 102], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [105, 105], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [108, 108], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [111, 111], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [116, 122], 'children': [{'type': 'ImportSpecifier', 'name': 'json', 'range': [121, 121], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [123, 133], 'children': [{'type': 'ImportSpecifier', 'name': 'BehaveAs', 'range': [130, 130], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Settings', 'range': [132, 132], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [135, 143], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [136, 143], 'children': [{'type': 'CallExpression', 'name': 'getLogger', 'range': [139, 142], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [141, 141], 'children': []}]}]}]}]}
2025-01-08 10:29:23,749 - INFO - Starting Step 4: AST normalization
2025-01-08 10:29:23,879 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [223, 256], 'children': [{'type': 'VariableDeclaration', 'name': 'TEST_CREDENTIALS_INPUT', 'range': [223, 255], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [225, 255], 'children': [{'type': 'Property', 'name': 'provider', 'range': [227, 231], 'children': [{'type': 'Literal', 'name': '"provider"', 'range': [227, 227], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.provider', 'range': [229, 231], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [229, 229], 'children': []}, {'type': 'Identifier', 'name': 'provider', 'range': [231, 231], 'children': []}]}]}, {'type': 'Property', 'name': 'id', 'range': [234, 238], 'children': [{'type': 'Literal', 'name': '"id"', 'range': [234, 234], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.id', 'range': [236, 238], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [236, 236], 'children': []}, {'type': 'Identifier', 'name': 'id', 'range': [238, 238], 'children': []}]}]}, {'type': 'Property', 'name': 'type', 'range': [241, 245], 'children': [{'type': 'Literal', 'name': '"type"', 'range': [241, 241], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.type', 'range': [243, 245], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [243, 243], 'children': []}, {'type': 'Identifier', 'name': 'type', 'range': [245, 245], 'children': []}]}]}, {'type': 'Property', 'name': 'title', 'range': [248, 252], 'children': [{'type': 'Literal', 'name': '"title"', 'range': [248, 248], 'children': []}, {'type': 'MemberExpression', 'name': 'TEST_CREDENTIALS.title', 'range': [250, 252], 'children': [{'type': 'Identifier', 'name': 'TEST_CREDENTIALS', 'range': [250, 250], 'children': []}, {'type': 'Identifier', 'name': 'title', 'range': [252, 252], 'children': []}]}]}]}]}]}
2025-01-08 10:29:23,879 - INFO - Completed main AST analysis flow
2025-01-08 10:29:23,880 - INFO - Successfully processed chunk
2025-01-08 10:29:41,346 - INFO - Step 1 result: {'type': 'Program', 'name': 'MODEL_METADATA', 'range': [683, 1118], 'children': [{'type': 'Assignment', 'name': '', 'range': [683, 1117], 'children': [{'type': 'Object', 'name': '', 'range': [685, 1117], 'children': [{'type': 'Property', 'name': 'LlmModel.O1_PREVIEW', 'range': [687, 696], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [691, 696], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [693, 693], 'children': []}, {'type': 'Literal', 'name': '32000', 'range': [695, 695], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.O1_MINI', 'range': [699, 708], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [703, 708], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [705, 705], 'children': []}, {'type': 'Literal', 'name': '62000', 'range': [707, 707], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O_MINI', 'range': [711, 720], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [715, 720], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [717, 717], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [719, 719], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O', 'range': [723, 732], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [727, 732], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [729, 729], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [731, 731], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4_TURBO', 'range': [735, 744], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [739, 744], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [741, 741], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [743, 743], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT3_5_TURBO', 'range': [747, 756], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [751, 756], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [753, 753], 'children': []}, {'type': 'Literal', 'name': '16385', 'range': [755, 755], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_5_SONNET', 'range': [759, 768], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [763, 768], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [765, 765], 'children': []}, {'type': 'Literal', 'name': '200000', 'range': [767, 767], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_HAIKU', 'range': [771, 780], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [775, 780], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [777, 777], 'children': []}, {'type': 'Literal', 'name': '200000', 'range': [779, 779], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_8B', 'range': [783, 792], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [787, 792], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [789, 789], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [791, 791], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_70B', 'range': [795, 804], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [799, 804], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [801, 801], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [803, 803], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MIXTRAL_8X7B', 'range': [807, 816], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [811, 816], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [813, 813], 'children': []}, {'type': 'Literal', 'name': '32768', 'range': [815, 815], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA_7B', 'range': [819, 828], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [823, 828], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [825, 825], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [827, 827], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA2_9B', 'range': [831, 840], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [835, 840], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [837, 837], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [839, 839], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_405B', 'range': [843, 852], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [847, 852], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [849, 849], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [851, 851], 'children': []}]}]}, {'type': 'Comment', 'name': '# Limited to 16 k during preview', 'range': [855, 861], 'children': []}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_70B', 'range': [863, 872], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [867, 872], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [869, 869], 'children': []}, {'type': 'Literal', 'name': '131072', 'range': [871, 871], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_8B', 'range': [875, 884], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [879, 884], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [881, 881], 'children': []}, {'type': 'Literal', 'name': '131072', 'range': [883, 883], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_8B', 'range': [887, 896], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [891, 896], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [893, 893], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [895, 895], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_405B', 'range': [899, 908], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [903, 908], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [905, 905], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [907, 907], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_DOLPHIN', 'range': [911, 920], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [915, 920], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [917, 917], 'children': []}, {'type': 'Literal', 'name': '32768', 'range': [919, 919], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMINI_FLASH_1_5_8B', 'range': [923, 932], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [927, 932], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [929, 929], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [931, 931], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GROK_BETA', 'range': [935, 944], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [939, 944], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [941, 941], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [943, 943], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MISTRAL_NEMO', 'range': [947, 956], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [951, 956], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [953, 953], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [955, 955], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_08_2024', 'range': [959, 968], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [963, 968], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [965, 965], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [967, 967], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_PLUS_08_2024', 'range': [971, 980], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [975, 980], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [977, 977], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [979, 979], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.EVA_QWEN_2_5_32B', 'range': [983, 992], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [987, 992], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [989, 989], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [991, 991], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.DEEPSEEK_CHAT', 'range': [995, 1004], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [999, 1004], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1001, 1001], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [1003, 1003], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [1007, 1018], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1011, 1018], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1014, 1014], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [1016, 1016], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.QWEN_QWQ_32B_PREVIEW', 'range': [1021, 1030], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1025, 1030], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1027, 1027], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1029, 1029], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [1033, 1042], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1037, 1042], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1039, 1039], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1041, 1041], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [1045, 1054], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1049, 1054], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1051, 1051], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1053, 1053], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_LITE_V1', 'range': [1057, 1066], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1061, 1066], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1063, 1063], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1065, 1065], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_MICRO_V1', 'range': [1069, 1078], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1073, 1078], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1075, 1075], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1077, 1077], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_PRO_V1', 'range': [1081, 1090], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1085, 1090], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1087, 1087], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1089, 1089], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MICROSOFT_WIZARDLM_2_8X22B', 'range': [1093, 1102], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1097, 1102], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1099, 1099], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1101, 1101], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GRYPHE_MYTHOMAX_L2_13B', 'range': [1105, 1114], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1109, 1114], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1111, 1111], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1113, 1113], 'children': []}]}]}]}]}]}
2025-01-08 10:29:41,347 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:29:55,562 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'ast', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [9, 9], 'children': []}, {'type': 'ImportSpecifier', 'name': 'EnumMeta', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'JSONDecodeError', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'ImportSpecifier', 'name': 'MappingProxyType', 'range': [21, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'TYPE_CHECKING', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Any', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'List', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Literal', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'NamedTuple', 'range': [34, 34], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [40, 40], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [43, 51], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [50, 50], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': '_EnumMemberT', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 65], 'children': [{'type': 'ImportSpecifier', 'name': 'anthropic', 'range': [64, 64], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [66, 68], 'children': [{'type': 'ImportSpecifier', 'name': 'ollama', 'range': [67, 67], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [69, 71], 'children': [{'type': 'ImportSpecifier', 'name': 'openai', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'Groq', 'range': [75, 75], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [78, 92], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [85, 85], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [87, 87], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [89, 89], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [91, 91], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [93, 115], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [102, 102], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [105, 105], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [108, 108], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [111, 111], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [116, 122], 'children': [{'type': 'ImportSpecifier', 'name': 'json', 'range': [121, 121], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [123, 133], 'children': [{'type': 'ImportSpecifier', 'name': 'BehaveAs', 'range': [130, 130], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Settings', 'range': [132, 132], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [135, 143], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [136, 143], 'children': [{'type': 'CallExpression', 'name': 'getLogger', 'range': [139, 142], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [141, 141], 'children': []}]}]}]}]}
2025-01-08 10:29:55,562 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:56,723 - INFO - Step 3 result: {'type': 'Program', 'name': 'AIConversationBlock', 'range': [4065, 4375], 'children': [{'type': 'ClassDeclaration', 'name': 'AIConversationBlock', 'range': [4065, 4071], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [4067, 4069], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4072, 4078], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4074, 4076], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'messages', 'range': [4079, 4098], 'children': [{'type': 'TypeAnnotation', 'name': 'List[Message]', 'range': [4081, 4084], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4086, 4097], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4089, 4091], 'children': []}, {'type': 'Argument', 'name': 'min_length', 'range': [4093, 4095], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [4099, 4124], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4101, 4101], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4103, 4123], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4106, 4108], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4111, 4115], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4118, 4120], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [4125, 4132], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4127, 4127], 'children': []}, {'type': 'Assignment', 'name': 'AICredentialsField', 'range': [4129, 4131], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [4133, 4158], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [4135, 4137], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4139, 4157], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4142, 4144], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4147, 4149], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4152, 4154], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [4159, 4182], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4161, 4161], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4163, 4181], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4166, 4168], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4171, 4173], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4176, 4178], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4184, 4190], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4186, 4188], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [4191, 4203], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4193, 4193], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4195, 4202], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4198, 4200], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [4204, 4214], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4206, 4206], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4208, 4213], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4210, 4212], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4216, 4375], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4219, 4219], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4223, 4227], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [4230, 4232], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [4235, 4237], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [4240, 4246], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [4249, 4253], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [4256, 4260], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [4263, 4334], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials', 'range': [4337, 4339], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [4342, 4352], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [4355, 4371], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4377, 4437], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4381, 4381], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4384, 4388], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4391, 4393], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [4399, 4399], 'children': []}, {'type': 'Assignment', 'name': 'block', 'range': [4402, 4406], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4408, 4421], 'children': []}, {'type': 'MethodCall', 'name': 'merge_stats', 'range': [4423, 4430], 'children': []}, {'type': 'ReturnStatement', 'name': 'response', 'range': [4432, 4436], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [4439, 4532], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4443, 4443], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4445, 4447], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4451, 4453], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [4462, 4462], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4465, 4524], 'children': []}, {'type': 'YieldStatement', 'name': 'response', 'range': [4527, 4531], 'children': []}]}]}
2025-01-08 10:29:56,724 - INFO - Starting Step 4: AST normalization
2025-01-08 10:30:04,615 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [1178, 2638], 'children': [{'type': 'ClassDeclaration', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [1178, 1184], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1180, 1182], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1185, 1191], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1187, 1189], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [1192, 1209], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1193, 1194], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1195, 1196], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1196, 1209], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1199, 1201], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [1204, 1206], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'expected_format', 'range': [1211, 1230], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1212, 1218], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1219, 1220], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1220, 1230], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1223, 1227], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [1232, 1261], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [1233, 1234], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1235, 1236], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1236, 1261], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1239, 1241], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1244, 1248], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1251, 1253], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [1256, 1258], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1263, 1269], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [1264, 1265], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1266, 1267], 'children': [{'type': 'FunctionCall', 'name': 'AICredentialsField', 'range': [1267, 1269], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'sys_prompt', 'range': [1271, 1293], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1272, 1273], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1274, 1275], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1275, 1293], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1278, 1280], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1283, 1285], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1288, 1290], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'conversation_history', 'range': [1295, 1316], 'children': [{'type': 'TypeAnnotation', 'name': 'list[Message]', 'range': [1296, 1300], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1301, 1302], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1302, 1316], 'children': [{'type': 'Argument', 'name': 'default', 'range': [1305, 1308], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1311, 1313], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'retry', 'range': [1318, 1340], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [1319, 1320], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1321, 1322], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1322, 1340], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1325, 1327], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1330, 1332], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1335, 1337], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'prompt_values', 'range': [1342, 1367], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1343, 1348], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1349, 1350], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1350, 1367], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1354, 1356], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1358, 1360], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1363, 1365], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [1369, 1393], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [1370, 1373], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1374, 1375], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1375, 1393], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1378, 1380], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1383, 1385], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1388, 1390], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [1396, 1418], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1397, 1398], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1399, 1400], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1400, 1418], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1403, 1405], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1408, 1410], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1413, 1415], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1421, 1427], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1423, 1425], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1428, 1444], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, Any]', 'range': [1429, 1434], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1435, 1436], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1436, 1444], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1440, 1442], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1446, 1455], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1447, 1448], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1449, 1450], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1450, 1455], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1452, 1454], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1458, 1618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1461, 1462], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [1465, 1470], 'children': []}, {'type': 'FunctionCall', 'name': '__init__', 'range': [1469, 1618], 'children': [{'type': 'Argument', 'name': 'id', 'range': [1472, 1474], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1477, 1479], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [1482, 1488], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [1491, 1495], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [1498, 1502], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [1505, 1543], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [1546, 1548], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [1551, 1565], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [1568, 1614], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [1623, 2638], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [1627, 1629], 'children': []}, {'type': 'Parameter', 'name': 'llm_model', 'range': [1632, 1634], 'children': []}, {'type': 'Parameter', 'name': 'prompt', 'range': [1637, 1642], 'children': []}, {'type': 'Parameter', 'name': 'json_format', 'range': [1645, 1647], 'children': []}, {'type': 'Parameter', 'name': 'max_tokens', 'range': [1650, 1654], 'children': []}, {'type': 'Parameter', 'name': 'ollama_host', 'range': [1659, 1663], 'children': []}, {'type': 'ReturnType', 'name': 'tuple[str, int, int]', 'range': [1668, 1676], 'children': []}, {'type': 'Docstring', 'name': '', 'range': [1679, 1681], 'children': []}, {'type': 'Assignment', 'name': 'provider', 'range': [1683, 1690], 'children': []}, {'type': 'IfStatement', 'name': 'provider == "openai"', 'range': [1692, 1916], 'children': [{'type': 'Assignment', 'name': 'oai_client', 'range': [1699, 1714], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [1716, 1718], 'children': []}, {'type': 'IfStatement', 'name': 'llm_model in [LlmModel.O1_MINI, LlmModel.O1_PREVIEW]', 'range': [1721, 1814], 'children': [{'type': 'Assignment', 'name': 'sys_messages', 'range': [1735, 1754], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [1756, 1775], 'children': []}, {'type': 'Assignment', 'name': 'prompt', 'range': [1777, 1813], 'children': []}]}, {'type': 'IfStatement', 'name': 'json_format', 'range': [1816, 1826], 'children': [{'type': 'Assignment', 'name': 'response_format', 'range': [1819, 1825], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [1828, 1869], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1872, 1915], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "anthropic"', 'range': [1918, 2187], 'children': [{'type': 'Assignment', 'name': 'system_messages', 'range': [1924, 1943], 'children': []}, {'type': 'Assignment', 'name': 'sysprompt', 'range': [1945, 1952], 'children': []}, {'type': 'Assignment', 'name': 'messages', 'range': [1955, 2056], 'children': []}, {'type': 'Assignment', 'name': 'client', 'range': [2058, 2073], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [2075, 2187], 'children': [{'type': 'Assignment', 'name': 'resp', 'range': [2078, 2111], 'children': []}, {'type': 'IfStatement', 'name': 'not resp.content', 'range': [2114, 2126], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2121, 2125], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2128, 2186], 'children': []}]}, {'type': 'ExceptStatement', 'name': 'except anthropic.APIError as e', 'range': [2188, 2213], 'children': [{'type': 'Assignment', 'name': 'error_message', 'range': [2196, 2200], 'children': []}, {'type': 'FunctionCall', 'name': 'logger.error', 'range': [2201, 2207], 'children': []}, {'type': 'RaiseStatement', 'name': 'raise', 'range': [2208, 2212], 'children': []}]}]}, {'type': 'IfStatement', 'name': 'provider == "groq"', 'range': [2215, 2335], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2221, 2234], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [2236, 2246], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2248, 2289], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2291, 2334], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "ollama"', 'range': [2337, 2457], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2343, 2352], 'children': []}, {'type': 'Assignment', 'name': 'sys_messages', 'range': [2354, 2373], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [2375, 2394], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2396, 2421], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2423, 2456], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "open_router"', 'range': [2459, 2627], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2465, 2488], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2491, 2540], 'children': []}, {'type': 'IfStatement', 'name': 'not response.choices', 'range': [2543, 2581], 'children': [{'type': 'IfStatement', 'name': 'response', 'range': [2556, 2572], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2566, 2571], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2573, 2580], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2576, 2579], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2583, 2626], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2628, 2637], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2631, 2636], 'children': []}]}]}]}
2025-01-08 10:30:04,616 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:19,744 - INFO - Step 2 result: {'type': 'Program', 'name': '', 'range': [4533, 5602], 'children': [{'type': 'ClassDeclaration', 'name': 'AIListGeneratorBlock', 'range': [4533, 4577], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4535, 4577], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [4535, 4537], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4540, 4647], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4542, 4647], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4542, 4544], 'children': []}, {'type': 'FieldDeclaration', 'name': 'focus', 'range': [4547, 4576], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4549, 4551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4552, 4576], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4553, 4576], 'children': [{'type': 'Arguments', 'name': '', 'range': [4554, 4576], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4556, 4558], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4561, 4563], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4566, 4568], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4571, 4573], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'source_data', 'range': [4578, 4607], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4580, 4582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4583, 4607], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4584, 4607], 'children': [{'type': 'Arguments', 'name': '', 'range': [4585, 4607], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4587, 4589], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4592, 4594], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4597, 4599], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4602, 4604], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [4609, 4639], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4611, 4611], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4612, 4639], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4613, 4639], 'children': [{'type': 'Arguments', 'name': '', 'range': [4614, 4639], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4616, 4618], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4621, 4626], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4628, 4630], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4633, 4635], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [4640, 4647], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4642, 4642], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4643, 4647], 'children': [{'type': 'AICredentialsField', 'name': 'AICredentialsField', 'range': [4644, 4647], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4728, 4775], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4730, 4775], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4730, 4732], 'children': []}, {'type': 'FieldDeclaration', 'name': 'generated_list', 'range': [4735, 4747], 'children': [{'type': 'TypeAnnotation', 'name': 'List[str]', 'range': [4737, 4740], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4741, 4747], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4742, 4747], 'children': [{'type': 'Arguments', 'name': '', 'range': [4743, 4747], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4745, 4746], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'list_item', 'range': [4749, 4761], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4751, 4751], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4752, 4761], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4753, 4761], 'children': [{'type': 'Arguments', 'name': '', 'range': [4754, 4761], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4756, 4758], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [4763, 4774], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4765, 4765], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4766, 4774], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4767, 4774], 'children': [{'type': 'Arguments', 'name': '', 'range': [4768, 4774], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4770, 4772], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4777, 4968], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4779, 4781], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4780, 4780], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4782, 4968], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4784, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4785, 4786], 'children': []}]}, {'type': 'MethodCall', 'name': '__init__', 'range': [4787, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4788, 4790], 'children': [{'type': 'Argument', 'name': 'id', 'range': [4791, 4793], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4796, 4798], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [4801, 4811], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [4814, 4818], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [4821, 4825], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [4828, 4873], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [4876, 4878], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [4881, 4941], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [4944, 4964], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4973, 5023], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4975, 4989], 'children': [{'type': 'Parameter', 'name': 'input_data', 'range': [4977, 4981], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4984, 4986], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4990, 5023], 'children': [{'type': 'VariableDeclaration', 'name': 'llm_block', 'range': [5000, 5005], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5001, 5005], 'children': [{'type': 'NewExpression', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [5002, 5005], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [5006, 5020], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5007, 5020], 'children': [{'type': 'MethodCall', 'name': 'run_once', 'range': [5008, 5019], 'children': [{'type': 'Arguments', 'name': '', 'range': [5009, 5019], 'children': [{'type': 'Argument', 'name': 'input_data', 'range': [5012, 5012], 'children': []}, {'type': 'Argument', 'name': 'response', 'range': [5014, 5014], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5016, 5018], 'children': []}]}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [5021, 5023], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [5022, 5022], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'string_to_list', 'range': [5028, 5131], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5030, 5032], 'children': [{'type': 'Parameter', 'name': 'string', 'range': [5031, 5031], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5033, 5131], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5047, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5048, 5107], 'children': [{'type': 'VariableDeclaration', 'name': 'python_list', 'range': [5061, 5069], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5062, 5069], 'children': [{'type': 'CallExpression', 'name': 'literal_eval', 'range': [5063, 5068], 'children': [{'type': 'Arguments', 'name': '', 'range': [5064, 5068], 'children': [{'type': 'Argument', 'name': 'string', 'range': [5067, 5067], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [5070, 5101], 'children': [{'type': 'Condition', 'name': 'isinstance', 'range': [5071, 5076], 'children': [{'type': 'Arguments', 'name': '', 'range': [5072, 5076], 'children': [{'type': 'Argument', 'name': 'python_list', 'range': [5073, 5073], 'children': []}, {'type': 'Argument', 'name': 'list', 'range': [5075, 5075], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5077, 5089], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [5087, 5089], 'children': [{'type': 'Identifier', 'name': 'python_list', 'range': [5088, 5088], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5090, 5101], 'children': [{'type': 'Block', 'name': '', 'range': [5091, 5101], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5101, 5101], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5102, 5106], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5108, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5117, 5131], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5126, 5131], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5127, 5130], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [5133, 5602], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5135, 5152], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [5137, 5137], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [5139, 5141], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [5145, 5147], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [5151, 5151], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5153, 5602], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5320, 5518], 'children': [{'type': 'VariableDeclaration', 'name': 'attempt', 'range': [5321, 5328], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5322, 5328], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [5323, 5328], 'children': [{'type': 'Arguments', 'name': '', 'range': [5324, 5328], 'children': [{'type': 'Argument', 'name': 'input_data.max_retries', 'range': [5325, 5327], 'children': []}]}]}]}]}, {'type': 'Block', 'name': '', 'range': [5329, 5518], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5331, 5517], 'children': [{'type': 'Block', 'name': '', 'range': [5332, 5496], 'children': [{'type': 'VariableDeclaration', 'name': 'llm_response', 'range': [5341, 5405], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5342, 5405], 'children': [{'type': 'MethodCall', 'name': 'llm_call', 'range': [5343, 5404], 'children': [{'type': 'Arguments', 'name': '', 'range': [5344, 5404], 'children': [{'type': 'Argument', 'name': 'AIStructuredResponseGeneratorBlock.Input', 'range': [5348, 5396], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5399, 5403], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response_string', 'range': [5421, 5427], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5422, 5427], 'children': [{'type': 'MemberExpression', 'name': 'llm_response', 'range': [5423, 5426], 'children': [{'type': 'Property', 'name': 'response', 'range': [5425, 5425], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'parsed_list', 'range': [5453, 5461], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5454, 5461], 'children': [{'type': 'MethodCall', 'name': 'string_to_list', 'range': [5455, 5460], 'children': [{'type': 'Arguments', 'name': '', 'range': [5456, 5460], 'children': [{'type': 'Argument', 'name': 'response_string', 'range': [5459, 5459], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [5491, 5495], 'children': [{'type': 'StringLiteral', 'name': 'generated_list', 'range': [5492, 5492], 'children': []}, {'type': 'Identifier', 'name': 'parsed_list', 'range': [5494, 5494], 'children': []}]}, {'type': 'ForStatement', 'name': 'for', 'range': [5505, 5516], 'children': [{'type': 'VariableDeclaration', 'name': 'item', 'range': [5506, 5508], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5507, 5508], 'children': [{'type': 'Identifier', 'name': 'parsed_list', 'range': [5508, 5508], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5509, 5516], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [5511, 5515], 'children': [{'type': 'StringLiteral', 'name': 'list_item', 'range': [5512, 5512], 'children': []}, {'type': 'Identifier', 'name': 'item', 'range': [5514, 5514], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5519, 5563], 'children': [{'type': 'Block', 'name': '', 'range': [5525, 5563], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [5533, 5542], 'children': [{'type': 'Condition', 'name': 'attempt', 'range': [5534, 5536], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5537, 5539], 'children': [{'type': 'Identifier', 'name': 'input_data.max_retries', 'range': [5538, 5538], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [5540, 5540], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5543, 5563], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5554, 5563], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [5555, 5562], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5564, 5594], 'children': [{'type': 'Block', 'name': '', 'range': [5565, 5594], 'children': [{'type': 'VariableDeclaration', 'name': 'prompt', 'range': [5579, 5585], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5580, 5585], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [5581, 5584], 'children': []}]}]}]}]}]}]}]}]}]}]}]}]}
2025-01-08 10:30:19,744 - INFO - Starting Step 3: AST simplification
2025-01-08 10:30:28,540 - INFO - Step 5 result: {'nodes': [{'type': 'Program', 'name': 'MainProgram', 'range': [0, 143], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [0, 2], 'children': [{'type': 'ImportSpecifier', 'name': 'ast', 'range': [1, 1], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [3, 5], 'children': [{'type': 'ImportSpecifier', 'name': 'logging', 'range': [4, 4], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [6, 12], 'children': [{'type': 'ImportSpecifier', 'name': 'Enum', 'range': [9, 9], 'children': []}, {'type': 'ImportSpecifier', 'name': 'EnumMeta', 'range': [11, 11], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [13, 17], 'children': [{'type': 'ImportSpecifier', 'name': 'JSONDecodeError', 'range': [16, 16], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [18, 22], 'children': [{'type': 'ImportSpecifier', 'name': 'MappingProxyType', 'range': [21, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [23, 35], 'children': [{'type': 'ImportSpecifier', 'name': 'TYPE_CHECKING', 'range': [26, 26], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Any', 'range': [28, 28], 'children': []}, {'type': 'ImportSpecifier', 'name': 'List', 'range': [30, 30], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Literal', 'range': [32, 32], 'children': []}, {'type': 'ImportSpecifier', 'name': 'NamedTuple', 'range': [34, 34], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [37, 41], 'children': [{'type': 'ImportSpecifier', 'name': 'SecretStr', 'range': [40, 40], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [43, 51], 'children': [{'type': 'ImportSpecifier', 'name': 'ProviderName', 'range': [50, 50], 'children': []}]}, {'type': 'IfStatement', 'name': '', 'range': [53, 61], 'children': [{'type': 'ImportSpecifier', 'name': '_EnumMemberT', 'range': [60, 60], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [63, 65], 'children': [{'type': 'ImportSpecifier', 'name': 'anthropic', 'range': [64, 64], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [66, 68], 'children': [{'type': 'ImportSpecifier', 'name': 'ollama', 'range': [67, 67], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [69, 71], 'children': [{'type': 'ImportSpecifier', 'name': 'openai', 'range': [70, 70], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [72, 76], 'children': [{'type': 'ImportSpecifier', 'name': 'Groq', 'range': [75, 75], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [78, 92], 'children': [{'type': 'ImportSpecifier', 'name': 'Block', 'range': [85, 85], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockCategory', 'range': [87, 87], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockOutput', 'range': [89, 89], 'children': []}, {'type': 'ImportSpecifier', 'name': 'BlockSchema', 'range': [91, 91], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [93, 115], 'children': [{'type': 'ImportSpecifier', 'name': 'APIKeyCredentials', 'range': [102, 102], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsField', 'range': [105, 105], 'children': []}, {'type': 'ImportSpecifier', 'name': 'CredentialsMetaInput', 'range': [108, 108], 'children': []}, {'type': 'ImportSpecifier', 'name': 'SchemaField', 'range': [111, 111], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [116, 122], 'children': [{'type': 'ImportSpecifier', 'name': 'json', 'range': [121, 121], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [123, 133], 'children': [{'type': 'ImportSpecifier', 'name': 'BehaveAs', 'range': [130, 130], 'children': []}, {'type': 'ImportSpecifier', 'name': 'Settings', 'range': [132, 132], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'logger', 'range': [135, 143], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [136, 143], 'children': [{'type': 'CallExpression', 'name': 'getLogger', 'range': [139, 142], 'children': [{'type': 'Identifier', 'name': '__name__', 'range': [141, 141], 'children': []}]}]}]}]}]}
2025-01-08 10:30:28,541 - INFO - Completed main AST analysis flow
2025-01-08 10:30:28,543 - INFO - Successfully processed chunk
2025-01-08 10:30:43,015 - INFO - Step 4 result: {'type': 'Program', 'name': 'AIConversationBlock', 'range': [4065, 4375], 'children': [{'type': 'ClassDecl', 'name': 'AIConversationBlock', 'range': [4065, 4071], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [4067, 4069], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [4072, 4078], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4074, 4076], 'children': []}]}, {'type': 'VariableDecl', 'name': 'messages', 'range': [4079, 4098], 'children': [{'type': 'TypeAnnotation', 'name': 'List[Message]', 'range': [4081, 4084], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4086, 4097], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4089, 4091], 'children': []}, {'type': 'Argument', 'name': 'min_length', 'range': [4093, 4095], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [4099, 4124], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4101, 4101], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4103, 4123], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4106, 4108], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4111, 4115], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4118, 4120], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [4125, 4132], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4127, 4127], 'children': []}, {'type': 'Assignment', 'name': 'AICredentialsField', 'range': [4129, 4131], 'children': []}]}, {'type': 'VariableDecl', 'name': 'max_tokens', 'range': [4133, 4158], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [4135, 4137], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4139, 4157], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4142, 4144], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4147, 4149], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4152, 4154], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'ollama_host', 'range': [4159, 4182], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4161, 4161], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4163, 4181], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4166, 4168], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4171, 4173], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4176, 4178], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [4184, 4190], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4186, 4188], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [4191, 4203], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4193, 4193], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4195, 4202], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4198, 4200], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [4204, 4214], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4206, 4206], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4208, 4213], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4210, 4212], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [4216, 4375], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4219, 4219], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4223, 4227], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [4230, 4232], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [4235, 4237], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [4240, 4246], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [4249, 4253], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [4256, 4260], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [4263, 4334], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials', 'range': [4337, 4339], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [4342, 4352], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [4355, 4371], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [4377, 4437], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4381, 4381], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4384, 4388], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4391, 4393], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [4399, 4399], 'children': []}, {'type': 'Assignment', 'name': 'block', 'range': [4402, 4406], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4408, 4421], 'children': []}, {'type': 'MethodCall', 'name': 'merge_stats', 'range': [4423, 4430], 'children': []}, {'type': 'ReturnStatement', 'name': 'response', 'range': [4432, 4436], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [4439, 4532], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4443, 4443], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4445, 4447], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4451, 4453], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [4462, 4462], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4465, 4524], 'children': []}, {'type': 'YieldStatement', 'name': 'response', 'range': [4527, 4531], 'children': []}]}]}
2025-01-08 10:30:43,015 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:30:55,751 - ERROR - Failed to parse Step 2 result
2025-01-08 10:30:55,751 - INFO - Starting Step 3: AST simplification
2025-01-08 10:31:24,080 - INFO - Step 2 result: {'type': 'Program', 'name': 'MODEL_METADATA', 'range': [683, 1118], 'children': [{'type': 'Assignment', 'name': '', 'range': [683, 1117], 'children': [{'type': 'Object', 'name': '', 'range': [685, 1117], 'children': [{'type': 'Property', 'name': 'LlmModel.O1_PREVIEW', 'range': [687, 696], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [691, 696], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [693, 693], 'children': []}, {'type': 'Literal', 'name': '32000', 'range': [695, 695], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.O1_MINI', 'range': [699, 708], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [703, 708], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [705, 705], 'children': []}, {'type': 'Literal', 'name': '62000', 'range': [707, 707], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O_MINI', 'range': [711, 720], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [715, 720], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [717, 717], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [719, 719], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O', 'range': [723, 732], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [727, 732], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [729, 729], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [731, 731], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4_TURBO', 'range': [735, 744], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [739, 744], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [741, 741], 'children': []}, {'type': 'Literal', 'name': '128000', 'range': [743, 743], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT3_5_TURBO', 'range': [747, 756], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [751, 756], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [753, 753], 'children': []}, {'type': 'Literal', 'name': '16385', 'range': [755, 755], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_5_SONNET', 'range': [759, 768], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [763, 768], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [765, 765], 'children': []}, {'type': 'Literal', 'name': '200000', 'range': [767, 767], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_HAIKU', 'range': [771, 780], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [775, 780], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [777, 777], 'children': []}, {'type': 'Literal', 'name': '200000', 'range': [779, 779], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_8B', 'range': [783, 792], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [787, 792], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [789, 789], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [791, 791], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_70B', 'range': [795, 804], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [799, 804], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [801, 801], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [803, 803], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MIXTRAL_8X7B', 'range': [807, 816], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [811, 816], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [813, 813], 'children': []}, {'type': 'Literal', 'name': '32768', 'range': [815, 815], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA_7B', 'range': [819, 828], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [823, 828], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [825, 825], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [827, 827], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA2_9B', 'range': [831, 840], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [835, 840], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [837, 837], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [839, 839], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_405B', 'range': [843, 852], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [847, 852], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [849, 849], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [851, 851], 'children': []}]}]}, {'type': 'Comment', 'name': '# Limited to 16 k during preview', 'range': [855, 861], 'children': []}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_70B', 'range': [863, 872], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [867, 872], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [869, 869], 'children': []}, {'type': 'Literal', 'name': '131072', 'range': [871, 871], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_8B', 'range': [875, 884], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [879, 884], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [881, 881], 'children': []}, {'type': 'Literal', 'name': '131072', 'range': [883, 883], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_8B', 'range': [887, 896], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [891, 896], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [893, 893], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [895, 895], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_405B', 'range': [899, 908], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [903, 908], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [905, 905], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [907, 907], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_DOLPHIN', 'range': [911, 920], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [915, 920], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [917, 917], 'children': []}, {'type': 'Literal', 'name': '32768', 'range': [919, 919], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMINI_FLASH_1_5_8B', 'range': [923, 932], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [927, 932], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [929, 929], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [931, 931], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GROK_BETA', 'range': [935, 944], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [939, 944], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [941, 941], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [943, 943], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MISTRAL_NEMO', 'range': [947, 956], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [951, 956], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [953, 953], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [955, 955], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_08_2024', 'range': [959, 968], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [963, 968], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [965, 965], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [967, 967], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_PLUS_08_2024', 'range': [971, 980], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [975, 980], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [977, 977], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [979, 979], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.EVA_QWEN_2_5_32B', 'range': [983, 992], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [987, 992], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [989, 989], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [991, 991], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.DEEPSEEK_CHAT', 'range': [995, 1004], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [999, 1004], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1001, 1001], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [1003, 1003], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [1007, 1018], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1011, 1018], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1014, 1014], 'children': []}, {'type': 'Literal', 'name': '8192', 'range': [1016, 1016], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.QWEN_QWQ_32B_PREVIEW', 'range': [1021, 1030], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1025, 1030], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1027, 1027], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1029, 1029], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [1033, 1042], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1037, 1042], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1039, 1039], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1041, 1041], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [1045, 1054], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1049, 1054], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1051, 1051], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1053, 1053], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_LITE_V1', 'range': [1057, 1066], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1061, 1066], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1063, 1063], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1065, 1065], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_MICRO_V1', 'range': [1069, 1078], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1073, 1078], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1075, 1075], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1077, 1077], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_PRO_V1', 'range': [1081, 1090], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1085, 1090], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1087, 1087], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1089, 1089], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.MICROSOFT_WIZARDLM_2_8X22B', 'range': [1093, 1102], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1097, 1102], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1099, 1099], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1101, 1101], 'children': []}]}]}, {'type': 'Property', 'name': 'LlmModel.GRYPHE_MYTHOMAX_L2_13B', 'range': [1105, 1114], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1109, 1114], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1111, 1111], 'children': []}, {'type': 'Literal', 'name': '4000', 'range': [1113, 1113], 'children': []}]}]}]}]}]}
2025-01-08 10:31:24,080 - INFO - Starting Step 3: AST simplification
2025-01-08 10:31:30,371 - INFO - Step 5 result: {'type': 'Program', 'name': 'AIConversationBlock', 'range': [4065, 4532], 'children': [{'type': 'ClassDecl', 'name': 'AIConversationBlock', 'range': [4065, 4071], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [4067, 4069], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [4072, 4078], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4074, 4076], 'children': []}]}, {'type': 'VariableDecl', 'name': 'messages', 'range': [4079, 4098], 'children': [{'type': 'TypeAnnotation', 'name': 'List[Message]', 'range': [4081, 4084], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4086, 4097], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4089, 4091], 'children': []}, {'type': 'Argument', 'name': 'min_length', 'range': [4093, 4095], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [4099, 4124], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4101, 4101], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4103, 4123], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4106, 4108], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4111, 4115], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4118, 4120], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [4125, 4132], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4127, 4127], 'children': []}, {'type': 'Assignment', 'name': 'AICredentialsField', 'range': [4129, 4131], 'children': []}]}, {'type': 'VariableDecl', 'name': 'max_tokens', 'range': [4133, 4158], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [4135, 4137], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4139, 4157], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4142, 4144], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4147, 4149], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4152, 4154], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'ollama_host', 'range': [4159, 4182], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4161, 4161], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4163, 4181], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [4166, 4168], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4171, 4173], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4176, 4178], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [4184, 4190], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [4186, 4188], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [4191, 4203], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4193, 4193], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4195, 4202], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4198, 4200], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [4204, 4214], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4206, 4206], 'children': []}, {'type': 'Assignment', 'name': 'SchemaField', 'range': [4208, 4213], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4210, 4212], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [4216, 4375], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4219, 4219], 'children': []}, {'type': 'SuperCall', 'name': 'super', 'range': [4223, 4227], 'children': []}, {'type': 'Assignment', 'name': 'id', 'range': [4230, 4232], 'children': []}, {'type': 'Assignment', 'name': 'description', 'range': [4235, 4237], 'children': []}, {'type': 'Assignment', 'name': 'categories', 'range': [4240, 4246], 'children': []}, {'type': 'Assignment', 'name': 'input_schema', 'range': [4249, 4253], 'children': []}, {'type': 'Assignment', 'name': 'output_schema', 'range': [4256, 4260], 'children': []}, {'type': 'Assignment', 'name': 'test_input', 'range': [4263, 4334], 'children': []}, {'type': 'Assignment', 'name': 'test_credentials', 'range': [4337, 4339], 'children': []}, {'type': 'Assignment', 'name': 'test_output', 'range': [4342, 4352], 'children': []}, {'type': 'Assignment', 'name': 'test_mock', 'range': [4355, 4371], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [4377, 4437], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4381, 4381], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4384, 4388], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4391, 4393], 'children': []}, {'type': 'ReturnType', 'name': 'str', 'range': [4399, 4399], 'children': []}, {'type': 'Assignment', 'name': 'block', 'range': [4402, 4406], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4408, 4421], 'children': []}, {'type': 'MethodCall', 'name': 'merge_stats', 'range': [4423, 4430], 'children': []}, {'type': 'ReturnStatement', 'name': 'response', 'range': [4432, 4436], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [4439, 4532], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4443, 4443], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [4445, 4447], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4451, 4453], 'children': []}, {'type': 'ReturnType', 'name': 'BlockOutput', 'range': [4462, 4462], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [4465, 4524], 'children': []}, {'type': 'YieldStatement', 'name': 'response', 'range': [4527, 4531], 'children': []}]}]}
2025-01-08 10:31:30,371 - INFO - Completed main AST analysis flow
2025-01-08 10:31:30,373 - INFO - Successfully processed chunk
2025-01-08 10:31:48,147 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [1178, 2638], 'children': [{'type': 'ClassDeclaration', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [1178, 1184], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1180, 1182], 'children': []}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [1185, 1191], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1187, 1189], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'prompt', 'range': [1192, 1209], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1193, 1194], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1195, 1196], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1196, 1209], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1199, 1201], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [1204, 1206], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'expected_format', 'range': [1211, 1230], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1212, 1218], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1219, 1220], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1220, 1230], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1223, 1227], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'model', 'range': [1232, 1261], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [1233, 1234], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1235, 1236], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1236, 1261], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1239, 1241], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1244, 1248], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1251, 1253], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [1256, 1258], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'credentials', 'range': [1263, 1269], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [1264, 1265], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1266, 1267], 'children': [{'type': 'FunctionCall', 'name': 'AICredentialsField', 'range': [1267, 1269], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'sys_prompt', 'range': [1271, 1293], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1272, 1273], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1274, 1275], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1275, 1293], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1278, 1280], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1283, 1285], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1288, 1290], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'conversation_history', 'range': [1295, 1316], 'children': [{'type': 'TypeAnnotation', 'name': 'list[Message]', 'range': [1296, 1300], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1301, 1302], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1302, 1316], 'children': [{'type': 'Argument', 'name': 'default', 'range': [1305, 1308], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1311, 1313], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'retry', 'range': [1318, 1340], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [1319, 1320], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1321, 1322], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1322, 1340], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1325, 1327], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1330, 1332], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1335, 1337], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'prompt_values', 'range': [1342, 1367], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1343, 1348], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1349, 1350], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1350, 1367], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1354, 1356], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1358, 1360], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1363, 1365], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'max_tokens', 'range': [1369, 1393], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [1370, 1373], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1374, 1375], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1375, 1393], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1378, 1380], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1383, 1385], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1388, 1390], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'ollama_host', 'range': [1396, 1418], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1397, 1398], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1399, 1400], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1400, 1418], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1403, 1405], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1408, 1410], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1413, 1415], 'children': []}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [1421, 1427], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1423, 1425], 'children': []}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [1428, 1444], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, Any]', 'range': [1429, 1434], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1435, 1436], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1436, 1444], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1440, 1442], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'error', 'range': [1446, 1455], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1447, 1448], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1449, 1450], 'children': [{'type': 'FunctionCall', 'name': 'SchemaField', 'range': [1450, 1455], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1452, 1454], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [1458, 1618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1461, 1462], 'children': []}, {'type': 'FunctionCall', 'name': 'super', 'range': [1465, 1470], 'children': []}, {'type': 'FunctionCall', 'name': '__init__', 'range': [1469, 1618], 'children': [{'type': 'Argument', 'name': 'id', 'range': [1472, 1474], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1477, 1479], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [1482, 1488], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [1491, 1495], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [1498, 1502], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [1505, 1543], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [1546, 1548], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [1551, 1565], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [1568, 1614], 'children': []}]}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [1623, 2638], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [1627, 1629], 'children': []}, {'type': 'Parameter', 'name': 'llm_model', 'range': [1632, 1634], 'children': []}, {'type': 'Parameter', 'name': 'prompt', 'range': [1637, 1642], 'children': []}, {'type': 'Parameter', 'name': 'json_format', 'range': [1645, 1647], 'children': []}, {'type': 'Parameter', 'name': 'max_tokens', 'range': [1650, 1654], 'children': []}, {'type': 'Parameter', 'name': 'ollama_host', 'range': [1659, 1663], 'children': []}, {'type': 'ReturnType', 'name': 'tuple[str, int, int]', 'range': [1668, 1676], 'children': []}, {'type': 'Docstring', 'name': '', 'range': [1679, 1681], 'children': []}, {'type': 'Assignment', 'name': 'provider', 'range': [1683, 1690], 'children': []}, {'type': 'IfStatement', 'name': 'provider == "openai"', 'range': [1692, 1916], 'children': [{'type': 'Assignment', 'name': 'oai_client', 'range': [1699, 1714], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [1716, 1718], 'children': []}, {'type': 'IfStatement', 'name': 'llm_model in [LlmModel.O1_MINI, LlmModel.O1_PREVIEW]', 'range': [1721, 1814], 'children': [{'type': 'Assignment', 'name': 'sys_messages', 'range': [1735, 1754], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [1756, 1775], 'children': []}, {'type': 'Assignment', 'name': 'prompt', 'range': [1777, 1813], 'children': []}]}, {'type': 'IfStatement', 'name': 'json_format', 'range': [1816, 1826], 'children': [{'type': 'Assignment', 'name': 'response_format', 'range': [1819, 1825], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [1828, 1869], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1872, 1915], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "anthropic"', 'range': [1918, 2187], 'children': [{'type': 'Assignment', 'name': 'system_messages', 'range': [1924, 1943], 'children': []}, {'type': 'Assignment', 'name': 'sysprompt', 'range': [1945, 1952], 'children': []}, {'type': 'Assignment', 'name': 'messages', 'range': [1955, 2056], 'children': []}, {'type': 'Assignment', 'name': 'client', 'range': [2058, 2073], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [2075, 2187], 'children': [{'type': 'Assignment', 'name': 'resp', 'range': [2078, 2111], 'children': []}, {'type': 'IfStatement', 'name': 'not resp.content', 'range': [2114, 2126], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2121, 2125], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2128, 2186], 'children': []}]}, {'type': 'ExceptStatement', 'name': 'except anthropic.APIError as e', 'range': [2188, 2213], 'children': [{'type': 'Assignment', 'name': 'error_message', 'range': [2196, 2200], 'children': []}, {'type': 'FunctionCall', 'name': 'logger.error', 'range': [2201, 2207], 'children': []}, {'type': 'RaiseStatement', 'name': 'raise', 'range': [2208, 2212], 'children': []}]}]}, {'type': 'IfStatement', 'name': 'provider == "groq"', 'range': [2215, 2335], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2221, 2234], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [2236, 2246], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2248, 2289], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2291, 2334], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "ollama"', 'range': [2337, 2457], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2343, 2352], 'children': []}, {'type': 'Assignment', 'name': 'sys_messages', 'range': [2354, 2373], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [2375, 2394], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2396, 2421], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2423, 2456], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "open_router"', 'range': [2459, 2627], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2465, 2488], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2491, 2540], 'children': []}, {'type': 'IfStatement', 'name': 'not response.choices', 'range': [2543, 2581], 'children': [{'type': 'IfStatement', 'name': 'response', 'range': [2556, 2572], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2566, 2571], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2573, 2580], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2576, 2579], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2583, 2626], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2628, 2637], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2631, 2636], 'children': []}]}]}]}
2025-01-08 10:31:48,148 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:16,147 - INFO - Step 3 result: {'type': 'Module', 'name': 'Module', 'range': [434, 682], 'children': [{'type': 'ClassDef', 'name': 'LlmModel', 'range': [434, 445], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [436, 444], 'children': [{'type': 'arg', 'name': 'str', 'range': [437, 437]}, {'type': 'arg', 'name': 'Enum', 'range': [439, 439]}, {'type': 'keyword', 'name': 'metaclass', 'range': [441, 443], 'children': [{'type': 'Name', 'name': 'LlmModelMeta', 'range': [443, 443]}]}]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [451, 453], 'children': [{'type': 'Name', 'name': 'O1_PREVIEW', 'range': [451, 451]}, {'type': 'Str', 'name': 'o1-preview', 'range': [453, 453]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [455, 457], 'children': [{'type': 'Name', 'name': 'O1_MINI', 'range': [455, 455]}, {'type': 'Str', 'name': 'o1-mini', 'range': [457, 457]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [459, 461], 'children': [{'type': 'Name', 'name': 'GPT4O_MINI', 'range': [459, 459]}, {'type': 'Str', 'name': 'gpt-4o-mini', 'range': [461, 461]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [463, 465], 'children': [{'type': 'Name', 'name': 'GPT4O', 'range': [463, 463]}, {'type': 'Str', 'name': 'gpt-4o', 'range': [465, 465]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [467, 469], 'children': [{'type': 'Name', 'name': 'GPT4_TURBO', 'range': [467, 467]}, {'type': 'Str', 'name': 'gpt-4-turbo', 'range': [469, 469]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [471, 473], 'children': [{'type': 'Name', 'name': 'GPT3_5_TURBO', 'range': [471, 471]}, {'type': 'Str', 'name': 'gpt-3.5-turbo', 'range': [473, 473]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [479, 481], 'children': [{'type': 'Name', 'name': 'CLAUDE_3_5_SONNET', 'range': [479, 479]}, {'type': 'Str', 'name': 'claude-3-5-sonnet-latest', 'range': [481, 481]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [483, 485], 'children': [{'type': 'Name', 'name': 'CLAUDE_3_HAIKU', 'range': [483, 483]}, {'type': 'Str', 'name': 'claude-3-haiku-20240307', 'range': [485, 485]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [491, 493], 'children': [{'type': 'Name', 'name': 'LLAMA3_8B', 'range': [491, 491]}, {'type': 'Str', 'name': 'llama3-8b-8192', 'range': [493, 493]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [495, 497], 'children': [{'type': 'Name', 'name': 'LLAMA3_70B', 'range': [495, 495]}, {'type': 'Str', 'name': 'llama3-70b-8192', 'range': [497, 497]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [499, 501], 'children': [{'type': 'Name', 'name': 'MIXTRAL_8X7B', 'range': [499, 499]}, {'type': 'Str', 'name': 'mixtral-8x7b-32768', 'range': [501, 501]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [503, 505], 'children': [{'type': 'Name', 'name': 'GEMMA_7B', 'range': [503, 503]}, {'type': 'Str', 'name': 'gemma-7b-it', 'range': [505, 505]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [507, 509], 'children': [{'type': 'Name', 'name': 'GEMMA2_9B', 'range': [507, 507]}, {'type': 'Str', 'name': 'gemma2-9b-it', 'range': [509, 509]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [519, 521], 'children': [{'type': 'Name', 'name': 'LLAMA3_1_405B', 'range': [519, 519]}, {'type': 'Str', 'name': 'llama-3.1-405b-reasoning', 'range': [521, 521]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [523, 525], 'children': [{'type': 'Name', 'name': 'LLAMA3_1_70B', 'range': [523, 523]}, {'type': 'Str', 'name': 'llama-3.1-70b-versatile', 'range': [525, 525]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [527, 529], 'children': [{'type': 'Name', 'name': 'LLAMA3_1_8B', 'range': [527, 527]}, {'type': 'Str', 'name': 'llama-3.1-8b-instant', 'range': [529, 529]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [535, 537], 'children': [{'type': 'Name', 'name': 'OLLAMA_LLAMA3_8B', 'range': [535, 535]}, {'type': 'Str', 'name': 'llama3', 'range': [537, 537]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [539, 541], 'children': [{'type': 'Name', 'name': 'OLLAMA_LLAMA3_405B', 'range': [539, 539]}, {'type': 'Str', 'name': 'llama3.1:405b', 'range': [541, 541]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [543, 545], 'children': [{'type': 'Name', 'name': 'OLLAMA_DOLPHIN', 'range': [543, 543]}, {'type': 'Str', 'name': 'dolphin-mistral:latest', 'range': [545, 545]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [551, 553], 'children': [{'type': 'Name', 'name': 'GEMINI_FLASH_1_5_8B', 'range': [551, 551]}, {'type': 'Str', 'name': 'google/gemini-flash-1.5', 'range': [553, 553]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [555, 557], 'children': [{'type': 'Name', 'name': 'GROK_BETA', 'range': [555, 555]}, {'type': 'Str', 'name': 'x-ai/grok-beta', 'range': [557, 557]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [559, 561], 'children': [{'type': 'Name', 'name': 'MISTRAL_NEMO', 'range': [559, 559]}, {'type': 'Str', 'name': 'mistralai/mistral-nemo', 'range': [561, 561]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [563, 565], 'children': [{'type': 'Name', 'name': 'COHERE_COMMAND_R_08_2024', 'range': [563, 563]}, {'type': 'Str', 'name': 'cohere/command-r-08-2024', 'range': [565, 565]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [567, 569], 'children': [{'type': 'Name', 'name': 'COHERE_COMMAND_R_PLUS_08_2024', 'range': [567, 567]}, {'type': 'Str', 'name': 'cohere/command-r-plus-08-2024', 'range': [569, 569]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [571, 573], 'children': [{'type': 'Name', 'name': 'EVA_QWEN_2_5_32B', 'range': [571, 571]}, {'type': 'Str', 'name': 'eva-unit-01/eva-qwen-2.5-32b', 'range': [573, 573]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [575, 577], 'children': [{'type': 'Name', 'name': 'DEEPSEEK_CHAT', 'range': [575, 575]}, {'type': 'Str', 'name': 'deepseek/deepseek-chat', 'range': [577, 577]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [579, 581], 'children': [{'type': 'Name', 'name': 'PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [579, 579]}, {'type': 'Str', 'name': 'perplexity/llama-3.1-sonar-large-128k-online', 'range': [581, 581]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [587, 589], 'children': [{'type': 'Name', 'name': 'QWEN_QWQ_32B_PREVIEW', 'range': [587, 587]}, {'type': 'Str', 'name': 'qwen/qwq-32b-preview', 'range': [589, 589]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [591, 593], 'children': [{'type': 'Name', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [591, 591]}, {'type': 'Str', 'name': 'nousresearch/hermes-3-llama-3.1-405b', 'range': [593, 593]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [595, 597], 'children': [{'type': 'Name', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [595, 595]}, {'type': 'Str', 'name': 'nousresearch/hermes-3-llama-3.1-70b', 'range': [597, 597]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [599, 601], 'children': [{'type': 'Name', 'name': 'AMAZON_NOVA_LITE_V1', 'range': [599, 599]}, {'type': 'Str', 'name': 'amazon/nova-lite-v1', 'range': [601, 601]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [603, 605], 'children': [{'type': 'Name', 'name': 'AMAZON_NOVA_MICRO_V1', 'range': [603, 603]}, {'type': 'Str', 'name': 'amazon/nova-micro-v1', 'range': [605, 605]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [607, 609], 'children': [{'type': 'Name', 'name': 'AMAZON_NOVA_PRO_V1', 'range': [607, 607]}, {'type': 'Str', 'name': 'amazon/nova-pro-v1', 'range': [609, 609]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [611, 613], 'children': [{'type': 'Name', 'name': 'MICROSOFT_WIZARDLM_2_8X22B', 'range': [611, 611]}, {'type': 'Str', 'name': 'microsoft/wizardlm-2-8x22b', 'range': [613, 613]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [615, 617], 'children': [{'type': 'Name', 'name': 'GRYPHE_MYTHOMAX_L2_13B', 'range': [615, 615]}, {'type': 'Str', 'name': 'gryphe/mythomax-l2-13b', 'range': [617, 617]}]}, {'type': 'FunctionDef', 'name': 'metadata', 'range': [623, 638], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [625, 627], 'children': [{'type': 'arg', 'name': 'self', 'range': [626, 626]}]}, {'type': 'Return', 'name': 'Return', 'range': [633, 634], 'children': [{'type': 'Subscript', 'name': 'Subscript', 'range': [634, 637], 'children': [{'type': 'Name', 'name': 'MODEL_METADATA', 'range': [634, 634]}, {'type': 'Name', 'name': 'self', 'range': [636, 636]}]}]}]}, {'type': 'FunctionDef', 'name': 'provider', 'range': [643, 659], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [645, 647], 'children': [{'type': 'arg', 'name': 'self', 'range': [646, 646]}]}, {'type': 'Return', 'name': 'Return', 'range': [653, 654], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [654, 658], 'children': [{'type': 'Name', 'name': 'self', 'range': [654, 654]}, {'type': 'Name', 'name': 'metadata', 'range': [656, 656]}, {'type': 'Name', 'name': 'provider', 'range': [658, 658]}]}]}]}, {'type': 'FunctionDef', 'name': 'context_window', 'range': [664, 680], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [666, 668], 'children': [{'type': 'arg', 'name': 'self', 'range': [667, 667]}]}, {'type': 'Return', 'name': 'Return', 'range': [674, 675], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [675, 679], 'children': [{'type': 'Name', 'name': 'self', 'range': [675, 675]}, {'type': 'Name', 'name': 'metadata', 'range': [677, 677]}, {'type': 'Name', 'name': 'context_window', 'range': [679, 679]}]}]}]}]}
2025-01-08 10:32:16,147 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:19,825 - INFO - Step 3 result: {'type': 'Program', 'name': '', 'range': [4533, 5602], 'children': [{'type': 'ClassDeclaration', 'name': 'AIListGeneratorBlock', 'range': [4533, 4577], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4535, 4577], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [4535, 4537], 'children': []}]}]}, {'type': 'ClassDeclaration', 'name': 'Input', 'range': [4540, 4647], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4542, 4647], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4542, 4544], 'children': []}, {'type': 'FieldDeclaration', 'name': 'focus', 'range': [4547, 4576], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4549, 4551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4552, 4576], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4553, 4576], 'children': [{'type': 'Arguments', 'name': '', 'range': [4554, 4576], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4556, 4558], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4561, 4563], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4566, 4568], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4571, 4573], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'source_data', 'range': [4578, 4607], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4580, 4582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4583, 4607], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4584, 4607], 'children': [{'type': 'Arguments', 'name': '', 'range': [4585, 4607], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4587, 4589], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4592, 4594], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4597, 4599], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4602, 4604], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'model', 'range': [4609, 4639], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4611, 4611], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4612, 4639], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4613, 4639], 'children': [{'type': 'Arguments', 'name': '', 'range': [4614, 4639], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4616, 4618], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4621, 4626], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4628, 4630], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4633, 4635], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'credentials', 'range': [4640, 4647], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4642, 4642], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4643, 4647], 'children': [{'type': 'AICredentialsField', 'name': 'AICredentialsField', 'range': [4644, 4647], 'children': []}]}]}]}]}, {'type': 'ClassDeclaration', 'name': 'Output', 'range': [4728, 4775], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4730, 4775], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4730, 4732], 'children': []}, {'type': 'FieldDeclaration', 'name': 'generated_list', 'range': [4735, 4747], 'children': [{'type': 'TypeAnnotation', 'name': 'List[str]', 'range': [4737, 4740], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4741, 4747], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4742, 4747], 'children': [{'type': 'Arguments', 'name': '', 'range': [4743, 4747], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4745, 4746], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'list_item', 'range': [4749, 4761], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4751, 4751], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4752, 4761], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4753, 4761], 'children': [{'type': 'Arguments', 'name': '', 'range': [4754, 4761], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4756, 4758], 'children': []}]}]}]}]}, {'type': 'FieldDeclaration', 'name': 'error', 'range': [4763, 4774], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4765, 4765], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4766, 4774], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4767, 4774], 'children': [{'type': 'Arguments', 'name': '', 'range': [4768, 4774], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4770, 4772], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': '__init__', 'range': [4777, 4968], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4779, 4781], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4780, 4780], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4782, 4968], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4784, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4785, 4786], 'children': []}]}, {'type': 'MethodCall', 'name': '__init__', 'range': [4787, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4788, 4790], 'children': [{'type': 'Argument', 'name': 'id', 'range': [4791, 4793], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4796, 4798], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [4801, 4811], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [4814, 4818], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [4821, 4825], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [4828, 4873], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [4876, 4878], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [4881, 4941], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [4944, 4964], 'children': []}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'llm_call', 'range': [4973, 5023], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4975, 4989], 'children': [{'type': 'Parameter', 'name': 'input_data', 'range': [4977, 4981], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4984, 4986], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4990, 5023], 'children': [{'type': 'VariableDeclaration', 'name': 'llm_block', 'range': [5000, 5005], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5001, 5005], 'children': [{'type': 'NewExpression', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [5002, 5005], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'response', 'range': [5006, 5020], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5007, 5020], 'children': [{'type': 'MethodCall', 'name': 'run_once', 'range': [5008, 5019], 'children': [{'type': 'Arguments', 'name': '', 'range': [5009, 5019], 'children': [{'type': 'Argument', 'name': 'input_data', 'range': [5012, 5012], 'children': []}, {'type': 'Argument', 'name': 'response', 'range': [5014, 5014], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5016, 5018], 'children': []}]}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [5021, 5023], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [5022, 5022], 'children': []}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'string_to_list', 'range': [5028, 5131], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5030, 5032], 'children': [{'type': 'Parameter', 'name': 'string', 'range': [5031, 5031], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5033, 5131], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5047, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5048, 5107], 'children': [{'type': 'VariableDeclaration', 'name': 'python_list', 'range': [5061, 5069], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5062, 5069], 'children': [{'type': 'CallExpression', 'name': 'literal_eval', 'range': [5063, 5068], 'children': [{'type': 'Arguments', 'name': '', 'range': [5064, 5068], 'children': [{'type': 'Argument', 'name': 'string', 'range': [5067, 5067], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [5070, 5101], 'children': [{'type': 'Condition', 'name': 'isinstance', 'range': [5071, 5076], 'children': [{'type': 'Arguments', 'name': '', 'range': [5072, 5076], 'children': [{'type': 'Argument', 'name': 'python_list', 'range': [5073, 5073], 'children': []}, {'type': 'Argument', 'name': 'list', 'range': [5075, 5075], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5077, 5089], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [5087, 5089], 'children': [{'type': 'Identifier', 'name': 'python_list', 'range': [5088, 5088], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5090, 5101], 'children': [{'type': 'Block', 'name': '', 'range': [5091, 5101], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5101, 5101], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5102, 5106], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5108, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5117, 5131], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5126, 5131], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5127, 5130], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDeclaration', 'name': 'run', 'range': [5133, 5602], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5135, 5152], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [5137, 5137], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [5139, 5141], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [5145, 5147], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [5151, 5151], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5153, 5602], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5320, 5518], 'children': [{'type': 'VariableDeclaration', 'name': 'attempt', 'range': [5321, 5328], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5322, 5328], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [5323, 5328], 'children': [{'type': 'Arguments', 'name': '', 'range': [5324, 5328], 'children': [{'type': 'Argument', 'name': 'input_data.max_retries', 'range': [5325, 5327], 'children': []}]}]}]}]}, {'type': 'Block', 'name': '', 'range': [5329, 5518], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5331, 5517], 'children': [{'type': 'Block', 'name': '', 'range': [5332, 5496], 'children': [{'type': 'VariableDeclaration', 'name': 'llm_response', 'range': [5341, 5405], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5342, 5405], 'children': [{'type': 'MethodCall', 'name': 'llm_call', 'range': [5343, 5404], 'children': [{'type': 'Arguments', 'name': '', 'range': [5344, 5404], 'children': [{'type': 'Argument', 'name': 'AIStructuredResponseGeneratorBlock.Input', 'range': [5348, 5396], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5399, 5403], 'children': []}]}]}]}]}, {'type': 'VariableDeclaration', 'name': 'response_string', 'range': [5421, 5427], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5422, 5427], 'children': [{'type': 'MemberExpression', 'name': 'llm_response', 'range': [5423, 5426], 'children': [{'type': 'Property', 'name': 'response', 'range': [5425, 5425], 'children': []}]}]}]}, {'type': 'VariableDeclaration', 'name': 'parsed_list', 'range': [5453, 5461], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5454, 5461], 'children': [{'type': 'MethodCall', 'name': 'string_to_list', 'range': [5455, 5460], 'children': [{'type': 'Arguments', 'name': '', 'range': [5456, 5460], 'children': [{'type': 'Argument', 'name': 'response_string', 'range': [5459, 5459], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [5491, 5495], 'children': [{'type': 'StringLiteral', 'name': 'generated_list', 'range': [5492, 5492], 'children': []}, {'type': 'Identifier', 'name': 'parsed_list', 'range': [5494, 5494], 'children': []}]}, {'type': 'ForStatement', 'name': 'for', 'range': [5505, 5516], 'children': [{'type': 'VariableDeclaration', 'name': 'item', 'range': [5506, 5508], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5507, 5508], 'children': [{'type': 'Identifier', 'name': 'parsed_list', 'range': [5508, 5508], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5509, 5516], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [5511, 5515], 'children': [{'type': 'StringLiteral', 'name': 'list_item', 'range': [5512, 5512], 'children': []}, {'type': 'Identifier', 'name': 'item', 'range': [5514, 5514], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5519, 5563], 'children': [{'type': 'Block', 'name': '', 'range': [5525, 5563], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [5533, 5542], 'children': [{'type': 'Condition', 'name': 'attempt', 'range': [5534, 5536], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5537, 5539], 'children': [{'type': 'Identifier', 'name': 'input_data.max_retries', 'range': [5538, 5538], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [5540, 5540], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5543, 5563], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5554, 5563], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [5555, 5562], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5564, 5594], 'children': [{'type': 'Block', 'name': '', 'range': [5565, 5594], 'children': [{'type': 'VariableDeclaration', 'name': 'prompt', 'range': [5579, 5585], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5580, 5585], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [5581, 5584], 'children': []}]}]}]}]}]}]}]}]}]}]}]}]}
2025-01-08 10:32:19,826 - INFO - Starting Step 4: AST normalization
2025-01-08 10:32:59,393 - INFO - Step 3 result: {'type': 'Program', 'name': 'MODEL_METADATA', 'range': [683, 1118], 'children': [{'type': 'Assignment', 'name': '', 'range': [683, 1117], 'children': [{'type': 'Object', 'name': '', 'range': [685, 1117], 'children': [{'type': 'Property', 'name': 'LlmModel.O1_PREVIEW', 'range': [687, 696], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [691, 696], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [693, 693]}, {'type': 'Literal', 'name': '32000', 'range': [695, 695]}]}]}, {'type': 'Property', 'name': 'LlmModel.O1_MINI', 'range': [699, 708], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [703, 708], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [705, 705]}, {'type': 'Literal', 'name': '62000', 'range': [707, 707]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O_MINI', 'range': [711, 720], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [715, 720], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [717, 717]}, {'type': 'Literal', 'name': '128000', 'range': [719, 719]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O', 'range': [723, 732], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [727, 732], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [729, 729]}, {'type': 'Literal', 'name': '128000', 'range': [731, 731]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4_TURBO', 'range': [735, 744], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [739, 744], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [741, 741]}, {'type': 'Literal', 'name': '128000', 'range': [743, 743]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT3_5_TURBO', 'range': [747, 756], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [751, 756], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [753, 753]}, {'type': 'Literal', 'name': '16385', 'range': [755, 755]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_5_SONNET', 'range': [759, 768], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [763, 768], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [765, 765]}, {'type': 'Literal', 'name': '200000', 'range': [767, 767]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_HAIKU', 'range': [771, 780], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [775, 780], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [777, 777]}, {'type': 'Literal', 'name': '200000', 'range': [779, 779]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_8B', 'range': [783, 792], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [787, 792], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [789, 789]}, {'type': 'Literal', 'name': '8192', 'range': [791, 791]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_70B', 'range': [795, 804], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [799, 804], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [801, 801]}, {'type': 'Literal', 'name': '8192', 'range': [803, 803]}]}]}, {'type': 'Property', 'name': 'LlmModel.MIXTRAL_8X7B', 'range': [807, 816], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [811, 816], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [813, 813]}, {'type': 'Literal', 'name': '32768', 'range': [815, 815]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA_7B', 'range': [819, 828], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [823, 828], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [825, 825]}, {'type': 'Literal', 'name': '8192', 'range': [827, 827]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA2_9B', 'range': [831, 840], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [835, 840], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [837, 837]}, {'type': 'Literal', 'name': '8192', 'range': [839, 839]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_405B', 'range': [843, 852], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [847, 852], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [849, 849]}, {'type': 'Literal', 'name': '8192', 'range': [851, 851]}]}]}, {'type': 'Comment', 'name': '# Limited to 16 k during preview', 'range': [855, 861]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_70B', 'range': [863, 872], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [867, 872], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [869, 869]}, {'type': 'Literal', 'name': '131072', 'range': [871, 871]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_8B', 'range': [875, 884], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [879, 884], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [881, 881]}, {'type': 'Literal', 'name': '131072', 'range': [883, 883]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_8B', 'range': [887, 896], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [891, 896], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [893, 893]}, {'type': 'Literal', 'name': '8192', 'range': [895, 895]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_405B', 'range': [899, 908], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [903, 908], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [905, 905]}, {'type': 'Literal', 'name': '8192', 'range': [907, 907]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_DOLPHIN', 'range': [911, 920], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [915, 920], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [917, 917]}, {'type': 'Literal', 'name': '32768', 'range': [919, 919]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMINI_FLASH_1_5_8B', 'range': [923, 932], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [927, 932], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [929, 929]}, {'type': 'Literal', 'name': '8192', 'range': [931, 931]}]}]}, {'type': 'Property', 'name': 'LlmModel.GROK_BETA', 'range': [935, 944], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [939, 944], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [941, 941]}, {'type': 'Literal', 'name': '8192', 'range': [943, 943]}]}]}, {'type': 'Property', 'name': 'LlmModel.MISTRAL_NEMO', 'range': [947, 956], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [951, 956], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [953, 953]}, {'type': 'Literal', 'name': '4000', 'range': [955, 955]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_08_2024', 'range': [959, 968], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [963, 968], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [965, 965]}, {'type': 'Literal', 'name': '4000', 'range': [967, 967]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_PLUS_08_2024', 'range': [971, 980], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [975, 980], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [977, 977]}, {'type': 'Literal', 'name': '4000', 'range': [979, 979]}]}]}, {'type': 'Property', 'name': 'LlmModel.EVA_QWEN_2_5_32B', 'range': [983, 992], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [987, 992], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [989, 989]}, {'type': 'Literal', 'name': '4000', 'range': [991, 991]}]}]}, {'type': 'Property', 'name': 'LlmModel.DEEPSEEK_CHAT', 'range': [995, 1004], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [999, 1004], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1001, 1001]}, {'type': 'Literal', 'name': '8192', 'range': [1003, 1003]}]}]}, {'type': 'Property', 'name': 'LlmModel.PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [1007, 1018], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1011, 1018], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1014, 1014]}, {'type': 'Literal', 'name': '8192', 'range': [1016, 1016]}]}]}, {'type': 'Property', 'name': 'LlmModel.QWEN_QWQ_32B_PREVIEW', 'range': [1021, 1030], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1025, 1030], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1027, 1027]}, {'type': 'Literal', 'name': '4000', 'range': [1029, 1029]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [1033, 1042], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1037, 1042], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1039, 1039]}, {'type': 'Literal', 'name': '4000', 'range': [1041, 1041]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [1045, 1054], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1049, 1054], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1051, 1051]}, {'type': 'Literal', 'name': '4000', 'range': [1053, 1053]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_LITE_V1', 'range': [1057, 1066], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1061, 1066], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1063, 1063]}, {'type': 'Literal', 'name': '4000', 'range': [1065, 1065]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_MICRO_V1', 'range': [1069, 1078], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1073, 1078], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1075, 1075]}, {'type': 'Literal', 'name': '4000', 'range': [1077, 1077]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_PRO_V1', 'range': [1081, 1090], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1085, 1090], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1087, 1087]}, {'type': 'Literal', 'name': '4000', 'range': [1089, 1089]}]}]}, {'type': 'Property', 'name': 'LlmModel.MICROSOFT_WIZARDLM_2_8X22B', 'range': [1093, 1102], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1097, 1102], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1099, 1099]}, {'type': 'Literal', 'name': '4000', 'range': [1101, 1101]}]}]}, {'type': 'Property', 'name': 'LlmModel.GRYPHE_MYTHOMAX_L2_13B', 'range': [1105, 1114], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1109, 1114], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1111, 1111]}, {'type': 'Literal', 'name': '4000', 'range': [1113, 1113]}]}]}]}]}]}
2025-01-08 10:32:59,393 - INFO - Starting Step 4: AST normalization
2025-01-08 10:33:28,404 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [1178, 2638], 'children': [{'type': 'ClassDecl', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [1178, 1184], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1180, 1182], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [1185, 1191], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1187, 1189], 'children': []}]}, {'type': 'VariableDecl', 'name': 'prompt', 'range': [1192, 1209], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1193, 1194], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1195, 1196], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1196, 1209], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1199, 1201], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [1204, 1206], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'expected_format', 'range': [1211, 1230], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1212, 1218], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1219, 1220], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1220, 1230], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1223, 1227], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [1232, 1261], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [1233, 1234], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1235, 1236], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1236, 1261], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1239, 1241], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1244, 1248], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1251, 1253], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [1256, 1258], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [1263, 1269], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [1264, 1265], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1266, 1267], 'children': [{'type': 'CallExpression', 'name': 'AICredentialsField', 'range': [1267, 1269], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'sys_prompt', 'range': [1271, 1293], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1272, 1273], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1274, 1275], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1275, 1293], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1278, 1280], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1283, 1285], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1288, 1290], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'conversation_history', 'range': [1295, 1316], 'children': [{'type': 'TypeAnnotation', 'name': 'list[Message]', 'range': [1296, 1300], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1301, 1302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1302, 1316], 'children': [{'type': 'Argument', 'name': 'default', 'range': [1305, 1308], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1311, 1313], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'retry', 'range': [1318, 1340], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [1319, 1320], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1321, 1322], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1322, 1340], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1325, 1327], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1330, 1332], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1335, 1337], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'prompt_values', 'range': [1342, 1367], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1343, 1348], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1349, 1350], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1350, 1367], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1354, 1356], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1358, 1360], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1363, 1365], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'max_tokens', 'range': [1369, 1393], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [1370, 1373], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1374, 1375], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1375, 1393], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1378, 1380], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1383, 1385], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1388, 1390], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'ollama_host', 'range': [1396, 1418], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1397, 1398], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1399, 1400], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1400, 1418], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1403, 1405], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1408, 1410], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1413, 1415], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1421, 1427], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1423, 1425], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1428, 1444], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, Any]', 'range': [1429, 1434], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1435, 1436], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1436, 1444], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1440, 1442], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [1446, 1455], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1447, 1448], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1449, 1450], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1450, 1455], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1452, 1454], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1458, 1618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1461, 1462], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [1465, 1470], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [1469, 1618], 'children': [{'type': 'Argument', 'name': 'id', 'range': [1472, 1474], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1477, 1479], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [1482, 1488], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [1491, 1495], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [1498, 1502], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [1505, 1543], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [1546, 1548], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [1551, 1565], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [1568, 1614], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [1623, 2638], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [1627, 1629], 'children': []}, {'type': 'Parameter', 'name': 'llm_model', 'range': [1632, 1634], 'children': []}, {'type': 'Parameter', 'name': 'prompt', 'range': [1637, 1642], 'children': []}, {'type': 'Parameter', 'name': 'json_format', 'range': [1645, 1647], 'children': []}, {'type': 'Parameter', 'name': 'max_tokens', 'range': [1650, 1654], 'children': []}, {'type': 'Parameter', 'name': 'ollama_host', 'range': [1659, 1663], 'children': []}, {'type': 'ReturnType', 'name': 'tuple[str, int, int]', 'range': [1668, 1676], 'children': []}, {'type': 'Docstring', 'name': '', 'range': [1679, 1681], 'children': []}, {'type': 'Assignment', 'name': 'provider', 'range': [1683, 1690], 'children': []}, {'type': 'IfStatement', 'name': 'provider == "openai"', 'range': [1692, 1916], 'children': [{'type': 'Assignment', 'name': 'oai_client', 'range': [1699, 1714], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [1716, 1718], 'children': []}, {'type': 'IfStatement', 'name': 'llm_model in [LlmModel.O1_MINI, LlmModel.O1_PREVIEW]', 'range': [1721, 1814], 'children': [{'type': 'Assignment', 'name': 'sys_messages', 'range': [1735, 1754], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [1756, 1775], 'children': []}, {'type': 'Assignment', 'name': 'prompt', 'range': [1777, 1813], 'children': []}]}, {'type': 'IfStatement', 'name': 'json_format', 'range': [1816, 1826], 'children': [{'type': 'Assignment', 'name': 'response_format', 'range': [1819, 1825], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [1828, 1869], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1872, 1915], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "anthropic"', 'range': [1918, 2187], 'children': [{'type': 'Assignment', 'name': 'system_messages', 'range': [1924, 1943], 'children': []}, {'type': 'Assignment', 'name': 'sysprompt', 'range': [1945, 1952], 'children': []}, {'type': 'Assignment', 'name': 'messages', 'range': [1955, 2056], 'children': []}, {'type': 'Assignment', 'name': 'client', 'range': [2058, 2073], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [2075, 2187], 'children': [{'type': 'Assignment', 'name': 'resp', 'range': [2078, 2111], 'children': []}, {'type': 'IfStatement', 'name': 'not resp.content', 'range': [2114, 2126], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2121, 2125], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2128, 2186], 'children': []}]}, {'type': 'ExceptStatement', 'name': 'except anthropic.APIError as e', 'range': [2188, 2213], 'children': [{'type': 'Assignment', 'name': 'error_message', 'range': [2196, 2200], 'children': []}, {'type': 'CallExpression', 'name': 'logger.error', 'range': [2201, 2207], 'children': []}, {'type': 'RaiseStatement', 'name': 'raise', 'range': [2208, 2212], 'children': []}]}]}, {'type': 'IfStatement', 'name': 'provider == "groq"', 'range': [2215, 2335], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2221, 2234], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [2236, 2246], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2248, 2289], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2291, 2334], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "ollama"', 'range': [2337, 2457], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2343, 2352], 'children': []}, {'type': 'Assignment', 'name': 'sys_messages', 'range': [2354, 2373], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [2375, 2394], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2396, 2421], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2423, 2456], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "open_router"', 'range': [2459, 2627], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2465, 2488], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2491, 2540], 'children': []}, {'type': 'IfStatement', 'name': 'not response.choices', 'range': [2543, 2581], 'children': [{'type': 'IfStatement', 'name': 'response', 'range': [2556, 2572], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2566, 2571], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2573, 2580], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2576, 2579], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2583, 2626], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2628, 2637], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2631, 2636], 'children': []}]}]}]}
2025-01-08 10:33:28,404 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:33:41,256 - INFO - Step 4 result: {'type': 'Module', 'name': 'Module', 'range': [434, 682], 'children': [{'type': 'ClassDecl', 'name': 'LlmModel', 'range': [434, 445], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [436, 444], 'children': [{'type': 'arg', 'name': 'str', 'range': [437, 437]}, {'type': 'arg', 'name': 'Enum', 'range': [439, 439]}, {'type': 'keyword', 'name': 'metaclass', 'range': [441, 443], 'children': [{'type': 'Identifier', 'name': 'LlmModelMeta', 'range': [443, 443]}]}]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [451, 453], 'children': [{'type': 'Identifier', 'name': 'O1_PREVIEW', 'range': [451, 451]}, {'type': 'Literal', 'name': 'o1-preview', 'range': [453, 453]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [455, 457], 'children': [{'type': 'Identifier', 'name': 'O1_MINI', 'range': [455, 455]}, {'type': 'Literal', 'name': 'o1-mini', 'range': [457, 457]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [459, 461], 'children': [{'type': 'Identifier', 'name': 'GPT4O_MINI', 'range': [459, 459]}, {'type': 'Literal', 'name': 'gpt-4o-mini', 'range': [461, 461]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [463, 465], 'children': [{'type': 'Identifier', 'name': 'GPT4O', 'range': [463, 463]}, {'type': 'Literal', 'name': 'gpt-4o', 'range': [465, 465]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [467, 469], 'children': [{'type': 'Identifier', 'name': 'GPT4_TURBO', 'range': [467, 467]}, {'type': 'Literal', 'name': 'gpt-4-turbo', 'range': [469, 469]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [471, 473], 'children': [{'type': 'Identifier', 'name': 'GPT3_5_TURBO', 'range': [471, 471]}, {'type': 'Literal', 'name': 'gpt-3.5-turbo', 'range': [473, 473]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [479, 481], 'children': [{'type': 'Identifier', 'name': 'CLAUDE_3_5_SONNET', 'range': [479, 479]}, {'type': 'Literal', 'name': 'claude-3-5-sonnet-latest', 'range': [481, 481]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [483, 485], 'children': [{'type': 'Identifier', 'name': 'CLAUDE_3_HAIKU', 'range': [483, 483]}, {'type': 'Literal', 'name': 'claude-3-haiku-20240307', 'range': [485, 485]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_8B', 'range': [491, 491]}, {'type': 'Literal', 'name': 'llama3-8b-8192', 'range': [493, 493]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [495, 497], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_70B', 'range': [495, 495]}, {'type': 'Literal', 'name': 'llama3-70b-8192', 'range': [497, 497]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [499, 501], 'children': [{'type': 'Identifier', 'name': 'MIXTRAL_8X7B', 'range': [499, 499]}, {'type': 'Literal', 'name': 'mixtral-8x7b-32768', 'range': [501, 501]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [503, 505], 'children': [{'type': 'Identifier', 'name': 'GEMMA_7B', 'range': [503, 503]}, {'type': 'Literal', 'name': 'gemma-7b-it', 'range': [505, 505]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [507, 509], 'children': [{'type': 'Identifier', 'name': 'GEMMA2_9B', 'range': [507, 507]}, {'type': 'Literal', 'name': 'gemma2-9b-it', 'range': [509, 509]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [519, 521], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_405B', 'range': [519, 519]}, {'type': 'Literal', 'name': 'llama-3.1-405b-reasoning', 'range': [521, 521]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [523, 525], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_70B', 'range': [523, 523]}, {'type': 'Literal', 'name': 'llama-3.1-70b-versatile', 'range': [525, 525]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [527, 529], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_8B', 'range': [527, 527]}, {'type': 'Literal', 'name': 'llama-3.1-8b-instant', 'range': [529, 529]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [535, 537], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_LLAMA3_8B', 'range': [535, 535]}, {'type': 'Literal', 'name': 'llama3', 'range': [537, 537]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [539, 541], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_LLAMA3_405B', 'range': [539, 539]}, {'type': 'Literal', 'name': 'llama3.1:405b', 'range': [541, 541]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [543, 545], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_DOLPHIN', 'range': [543, 543]}, {'type': 'Literal', 'name': 'dolphin-mistral:latest', 'range': [545, 545]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [551, 553], 'children': [{'type': 'Identifier', 'name': 'GEMINI_FLASH_1_5_8B', 'range': [551, 551]}, {'type': 'Literal', 'name': 'google/gemini-flash-1.5', 'range': [553, 553]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [555, 557], 'children': [{'type': 'Identifier', 'name': 'GROK_BETA', 'range': [555, 555]}, {'type': 'Literal', 'name': 'x-ai/grok-beta', 'range': [557, 557]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [559, 561], 'children': [{'type': 'Identifier', 'name': 'MISTRAL_NEMO', 'range': [559, 559]}, {'type': 'Literal', 'name': 'mistralai/mistral-nemo', 'range': [561, 561]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [563, 565], 'children': [{'type': 'Identifier', 'name': 'COHERE_COMMAND_R_08_2024', 'range': [563, 563]}, {'type': 'Literal', 'name': 'cohere/command-r-08-2024', 'range': [565, 565]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [567, 569], 'children': [{'type': 'Identifier', 'name': 'COHERE_COMMAND_R_PLUS_08_2024', 'range': [567, 567]}, {'type': 'Literal', 'name': 'cohere/command-r-plus-08-2024', 'range': [569, 569]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [571, 573], 'children': [{'type': 'Identifier', 'name': 'EVA_QWEN_2_5_32B', 'range': [571, 571]}, {'type': 'Literal', 'name': 'eva-unit-01/eva-qwen-2.5-32b', 'range': [573, 573]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [575, 577], 'children': [{'type': 'Identifier', 'name': 'DEEPSEEK_CHAT', 'range': [575, 575]}, {'type': 'Literal', 'name': 'deepseek/deepseek-chat', 'range': [577, 577]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [579, 581], 'children': [{'type': 'Identifier', 'name': 'PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [579, 579]}, {'type': 'Literal', 'name': 'perplexity/llama-3.1-sonar-large-128k-online', 'range': [581, 581]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [587, 589], 'children': [{'type': 'Identifier', 'name': 'QWEN_QWQ_32B_PREVIEW', 'range': [587, 587]}, {'type': 'Literal', 'name': 'qwen/qwq-32b-preview', 'range': [589, 589]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [591, 593], 'children': [{'type': 'Identifier', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [591, 591]}, {'type': 'Literal', 'name': 'nousresearch/hermes-3-llama-3.1-405b', 'range': [593, 593]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [595, 597], 'children': [{'type': 'Identifier', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [595, 595]}, {'type': 'Literal', 'name': 'nousresearch/hermes-3-llama-3.1-70b', 'range': [597, 597]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [599, 601], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_LITE_V1', 'range': [599, 599]}, {'type': 'Literal', 'name': 'amazon/nova-lite-v1', 'range': [601, 601]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [603, 605], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_MICRO_V1', 'range': [603, 603]}, {'type': 'Literal', 'name': 'amazon/nova-micro-v1', 'range': [605, 605]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [607, 609], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_PRO_V1', 'range': [607, 607]}, {'type': 'Literal', 'name': 'amazon/nova-pro-v1', 'range': [609, 609]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [611, 613], 'children': [{'type': 'Identifier', 'name': 'MICROSOFT_WIZARDLM_2_8X22B', 'range': [611, 611]}, {'type': 'Literal', 'name': 'microsoft/wizardlm-2-8x22b', 'range': [613, 613]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [615, 617], 'children': [{'type': 'Identifier', 'name': 'GRYPHE_MYTHOMAX_L2_13B', 'range': [615, 615]}, {'type': 'Literal', 'name': 'gryphe/mythomax-l2-13b', 'range': [617, 617]}]}, {'type': 'FunctionDecl', 'name': 'metadata', 'range': [623, 638], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [625, 627], 'children': [{'type': 'arg', 'name': 'self', 'range': [626, 626]}]}, {'type': 'Return', 'name': 'Return', 'range': [633, 634], 'children': [{'type': 'Subscript', 'name': 'Subscript', 'range': [634, 637], 'children': [{'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [634, 634]}, {'type': 'Identifier', 'name': 'self', 'range': [636, 636]}]}]}]}, {'type': 'FunctionDecl', 'name': 'provider', 'range': [643, 659], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [645, 647], 'children': [{'type': 'arg', 'name': 'self', 'range': [646, 646]}]}, {'type': 'Return', 'name': 'Return', 'range': [653, 654], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [654, 658], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [654, 654]}, {'type': 'Identifier', 'name': 'metadata', 'range': [656, 656]}, {'type': 'Identifier', 'name': 'provider', 'range': [658, 658]}]}]}]}, {'type': 'FunctionDecl', 'name': 'context_window', 'range': [664, 680], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [666, 668], 'children': [{'type': 'arg', 'name': 'self', 'range': [667, 667]}]}, {'type': 'Return', 'name': 'Return', 'range': [674, 675], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [675, 679], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [675, 675]}, {'type': 'Identifier', 'name': 'metadata', 'range': [677, 677]}, {'type': 'Identifier', 'name': 'context_window', 'range': [679, 679]}]}]}]}]}
2025-01-08 10:33:41,256 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:17,047 - INFO - Step 4 result: {'type': 'Program', 'name': '', 'range': [4533, 5602], 'children': [{'type': 'ClassDecl', 'name': 'AIListGeneratorBlock', 'range': [4533, 4577], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4535, 4577], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [4535, 4537], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [4540, 4647], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4542, 4647], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4542, 4544], 'children': []}, {'type': 'FieldDecl', 'name': 'focus', 'range': [4547, 4576], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4549, 4551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4552, 4576], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4553, 4576], 'children': [{'type': 'Arguments', 'name': '', 'range': [4554, 4576], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4556, 4558], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4561, 4563], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4566, 4568], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4571, 4573], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'source_data', 'range': [4578, 4607], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4580, 4582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4583, 4607], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4584, 4607], 'children': [{'type': 'Arguments', 'name': '', 'range': [4585, 4607], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4587, 4589], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4592, 4594], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4597, 4599], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4602, 4604], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'model', 'range': [4609, 4639], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4611, 4611], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4612, 4639], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4613, 4639], 'children': [{'type': 'Arguments', 'name': '', 'range': [4614, 4639], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4616, 4618], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4621, 4626], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4628, 4630], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4633, 4635], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [4640, 4647], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4642, 4642], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4643, 4647], 'children': [{'type': 'AICredentialsField', 'name': 'AICredentialsField', 'range': [4644, 4647], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [4728, 4775], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4730, 4775], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4730, 4732], 'children': []}, {'type': 'FieldDecl', 'name': 'generated_list', 'range': [4735, 4747], 'children': [{'type': 'TypeAnnotation', 'name': 'List[str]', 'range': [4737, 4740], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4741, 4747], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4742, 4747], 'children': [{'type': 'Arguments', 'name': '', 'range': [4743, 4747], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4745, 4746], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'list_item', 'range': [4749, 4761], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4751, 4751], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4752, 4761], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4753, 4761], 'children': [{'type': 'Arguments', 'name': '', 'range': [4754, 4761], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4756, 4758], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [4763, 4774], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4765, 4765], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4766, 4774], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4767, 4774], 'children': [{'type': 'Arguments', 'name': '', 'range': [4768, 4774], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4770, 4772], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [4777, 4968], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4779, 4781], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4780, 4780], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4782, 4968], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4784, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4785, 4786], 'children': []}]}, {'type': 'MethodCall', 'name': '__init__', 'range': [4787, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4788, 4790], 'children': [{'type': 'Argument', 'name': 'id', 'range': [4791, 4793], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4796, 4798], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [4801, 4811], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [4814, 4818], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [4821, 4825], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [4828, 4873], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [4876, 4878], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [4881, 4941], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [4944, 4964], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [4973, 5023], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4975, 4989], 'children': [{'type': 'Parameter', 'name': 'input_data', 'range': [4977, 4981], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4984, 4986], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4990, 5023], 'children': [{'type': 'VariableDecl', 'name': 'llm_block', 'range': [5000, 5005], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5001, 5005], 'children': [{'type': 'NewExpression', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [5002, 5005], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [5006, 5020], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5007, 5020], 'children': [{'type': 'MethodCall', 'name': 'run_once', 'range': [5008, 5019], 'children': [{'type': 'Arguments', 'name': '', 'range': [5009, 5019], 'children': [{'type': 'Argument', 'name': 'input_data', 'range': [5012, 5012], 'children': []}, {'type': 'Argument', 'name': 'response', 'range': [5014, 5014], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5016, 5018], 'children': []}]}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [5021, 5023], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [5022, 5022], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'string_to_list', 'range': [5028, 5131], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5030, 5032], 'children': [{'type': 'Parameter', 'name': 'string', 'range': [5031, 5031], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5033, 5131], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5047, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5048, 5107], 'children': [{'type': 'VariableDecl', 'name': 'python_list', 'range': [5061, 5069], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5062, 5069], 'children': [{'type': 'CallExpression', 'name': 'literal_eval', 'range': [5063, 5068], 'children': [{'type': 'Arguments', 'name': '', 'range': [5064, 5068], 'children': [{'type': 'Argument', 'name': 'string', 'range': [5067, 5067], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [5070, 5101], 'children': [{'type': 'Condition', 'name': 'isinstance', 'range': [5071, 5076], 'children': [{'type': 'Arguments', 'name': '', 'range': [5072, 5076], 'children': [{'type': 'Argument', 'name': 'python_list', 'range': [5073, 5073], 'children': []}, {'type': 'Argument', 'name': 'list', 'range': [5075, 5075], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5077, 5089], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [5087, 5089], 'children': [{'type': 'Identifier', 'name': 'python_list', 'range': [5088, 5088], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5090, 5101], 'children': [{'type': 'Block', 'name': '', 'range': [5091, 5101], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5101, 5101], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5102, 5106], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5108, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5117, 5131], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5126, 5131], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5127, 5130], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [5133, 5602], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5135, 5152], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [5137, 5137], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [5139, 5141], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [5145, 5147], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [5151, 5151], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5153, 5602], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5320, 5518], 'children': [{'type': 'VariableDecl', 'name': 'attempt', 'range': [5321, 5328], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5322, 5328], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [5323, 5328], 'children': [{'type': 'Arguments', 'name': '', 'range': [5324, 5328], 'children': [{'type': 'Argument', 'name': 'input_data.max_retries', 'range': [5325, 5327], 'children': []}]}]}]}]}, {'type': 'Block', 'name': '', 'range': [5329, 5518], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5331, 5517], 'children': [{'type': 'Block', 'name': '', 'range': [5332, 5496], 'children': [{'type': 'VariableDecl', 'name': 'llm_response', 'range': [5341, 5405], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5342, 5405], 'children': [{'type': 'MethodCall', 'name': 'llm_call', 'range': [5343, 5404], 'children': [{'type': 'Arguments', 'name': '', 'range': [5344, 5404], 'children': [{'type': 'Argument', 'name': 'AIStructuredResponseGeneratorBlock.Input', 'range': [5348, 5396], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5399, 5403], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response_string', 'range': [5421, 5427], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5422, 5427], 'children': [{'type': 'MemberExpression', 'name': 'llm_response', 'range': [5423, 5426], 'children': [{'type': 'Property', 'name': 'response', 'range': [5425, 5425], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'parsed_list', 'range': [5453, 5461], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5454, 5461], 'children': [{'type': 'MethodCall', 'name': 'string_to_list', 'range': [5455, 5460], 'children': [{'type': 'Arguments', 'name': '', 'range': [5456, 5460], 'children': [{'type': 'Argument', 'name': 'response_string', 'range': [5459, 5459], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [5491, 5495], 'children': [{'type': 'StringLiteral', 'name': 'generated_list', 'range': [5492, 5492], 'children': []}, {'type': 'Identifier', 'name': 'parsed_list', 'range': [5494, 5494], 'children': []}]}, {'type': 'ForStatement', 'name': 'for', 'range': [5505, 5516], 'children': [{'type': 'VariableDecl', 'name': 'item', 'range': [5506, 5508], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5507, 5508], 'children': [{'type': 'Identifier', 'name': 'parsed_list', 'range': [5508, 5508], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5509, 5516], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [5511, 5515], 'children': [{'type': 'StringLiteral', 'name': 'list_item', 'range': [5512, 5512], 'children': []}, {'type': 'Identifier', 'name': 'item', 'range': [5514, 5514], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5519, 5563], 'children': [{'type': 'Block', 'name': '', 'range': [5525, 5563], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [5533, 5542], 'children': [{'type': 'Condition', 'name': 'attempt', 'range': [5534, 5536], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5537, 5539], 'children': [{'type': 'Identifier', 'name': 'input_data.max_retries', 'range': [5538, 5538], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [5540, 5540], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5543, 5563], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5554, 5563], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [5555, 5562], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5564, 5594], 'children': [{'type': 'Block', 'name': '', 'range': [5565, 5594], 'children': [{'type': 'VariableDecl', 'name': 'prompt', 'range': [5579, 5585], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5580, 5585], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [5581, 5584], 'children': []}]}]}]}]}]}]}]}]}]}]}]}]}
2025-01-08 10:34:17,047 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:34:34,068 - INFO - Step 4 result: {'type': 'Program', 'name': 'MODEL_METADATA', 'range': [683, 1118], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [683, 1117], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [685, 1117], 'children': [{'type': 'Property', 'name': 'LlmModel.O1_PREVIEW', 'range': [687, 696], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [691, 696], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [693, 693]}, {'type': 'Literal', 'name': '32000', 'range': [695, 695]}]}]}, {'type': 'Property', 'name': 'LlmModel.O1_MINI', 'range': [699, 708], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [703, 708], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [705, 705]}, {'type': 'Literal', 'name': '62000', 'range': [707, 707]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O_MINI', 'range': [711, 720], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [715, 720], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [717, 717]}, {'type': 'Literal', 'name': '128000', 'range': [719, 719]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O', 'range': [723, 732], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [727, 732], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [729, 729]}, {'type': 'Literal', 'name': '128000', 'range': [731, 731]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4_TURBO', 'range': [735, 744], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [739, 744], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [741, 741]}, {'type': 'Literal', 'name': '128000', 'range': [743, 743]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT3_5_TURBO', 'range': [747, 756], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [751, 756], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [753, 753]}, {'type': 'Literal', 'name': '16385', 'range': [755, 755]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_5_SONNET', 'range': [759, 768], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [763, 768], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [765, 765]}, {'type': 'Literal', 'name': '200000', 'range': [767, 767]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_HAIKU', 'range': [771, 780], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [775, 780], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [777, 777]}, {'type': 'Literal', 'name': '200000', 'range': [779, 779]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_8B', 'range': [783, 792], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [787, 792], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [789, 789]}, {'type': 'Literal', 'name': '8192', 'range': [791, 791]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_70B', 'range': [795, 804], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [799, 804], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [801, 801]}, {'type': 'Literal', 'name': '8192', 'range': [803, 803]}]}]}, {'type': 'Property', 'name': 'LlmModel.MIXTRAL_8X7B', 'range': [807, 816], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [811, 816], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [813, 813]}, {'type': 'Literal', 'name': '32768', 'range': [815, 815]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA_7B', 'range': [819, 828], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [823, 828], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [825, 825]}, {'type': 'Literal', 'name': '8192', 'range': [827, 827]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA2_9B', 'range': [831, 840], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [835, 840], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [837, 837]}, {'type': 'Literal', 'name': '8192', 'range': [839, 839]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_405B', 'range': [843, 852], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [847, 852], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [849, 849]}, {'type': 'Literal', 'name': '8192', 'range': [851, 851]}]}]}, {'type': 'Comment', 'name': '# Limited to 16 k during preview', 'range': [855, 861]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_70B', 'range': [863, 872], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [867, 872], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [869, 869]}, {'type': 'Literal', 'name': '131072', 'range': [871, 871]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_8B', 'range': [875, 884], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [879, 884], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [881, 881]}, {'type': 'Literal', 'name': '131072', 'range': [883, 883]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_8B', 'range': [887, 896], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [891, 896], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [893, 893]}, {'type': 'Literal', 'name': '8192', 'range': [895, 895]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_405B', 'range': [899, 908], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [903, 908], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [905, 905]}, {'type': 'Literal', 'name': '8192', 'range': [907, 907]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_DOLPHIN', 'range': [911, 920], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [915, 920], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [917, 917]}, {'type': 'Literal', 'name': '32768', 'range': [919, 919]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMINI_FLASH_1_5_8B', 'range': [923, 932], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [927, 932], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [929, 929]}, {'type': 'Literal', 'name': '8192', 'range': [931, 931]}]}]}, {'type': 'Property', 'name': 'LlmModel.GROK_BETA', 'range': [935, 944], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [939, 944], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [941, 941]}, {'type': 'Literal', 'name': '8192', 'range': [943, 943]}]}]}, {'type': 'Property', 'name': 'LlmModel.MISTRAL_NEMO', 'range': [947, 956], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [951, 956], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [953, 953]}, {'type': 'Literal', 'name': '4000', 'range': [955, 955]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_08_2024', 'range': [959, 968], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [963, 968], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [965, 965]}, {'type': 'Literal', 'name': '4000', 'range': [967, 967]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_PLUS_08_2024', 'range': [971, 980], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [975, 980], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [977, 977]}, {'type': 'Literal', 'name': '4000', 'range': [979, 979]}]}]}, {'type': 'Property', 'name': 'LlmModel.EVA_QWEN_2_5_32B', 'range': [983, 992], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [987, 992], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [989, 989]}, {'type': 'Literal', 'name': '4000', 'range': [991, 991]}]}]}, {'type': 'Property', 'name': 'LlmModel.DEEPSEEK_CHAT', 'range': [995, 1004], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [999, 1004], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1001, 1001]}, {'type': 'Literal', 'name': '8192', 'range': [1003, 1003]}]}]}, {'type': 'Property', 'name': 'LlmModel.PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [1007, 1018], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1011, 1018], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1014, 1014]}, {'type': 'Literal', 'name': '8192', 'range': [1016, 1016]}]}]}, {'type': 'Property', 'name': 'LlmModel.QWEN_QWQ_32B_PREVIEW', 'range': [1021, 1030], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1025, 1030], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1027, 1027]}, {'type': 'Literal', 'name': '4000', 'range': [1029, 1029]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [1033, 1042], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1037, 1042], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1039, 1039]}, {'type': 'Literal', 'name': '4000', 'range': [1041, 1041]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [1045, 1054], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1049, 1054], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1051, 1051]}, {'type': 'Literal', 'name': '4000', 'range': [1053, 1053]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_LITE_V1', 'range': [1057, 1066], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1061, 1066], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1063, 1063]}, {'type': 'Literal', 'name': '4000', 'range': [1065, 1065]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_MICRO_V1', 'range': [1069, 1078], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1073, 1078], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1075, 1075]}, {'type': 'Literal', 'name': '4000', 'range': [1077, 1077]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_PRO_V1', 'range': [1081, 1090], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1085, 1090], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1087, 1087]}, {'type': 'Literal', 'name': '4000', 'range': [1089, 1089]}]}]}, {'type': 'Property', 'name': 'LlmModel.MICROSOFT_WIZARDLM_2_8X22B', 'range': [1093, 1102], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1097, 1102], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1099, 1099]}, {'type': 'Literal', 'name': '4000', 'range': [1101, 1101]}]}]}, {'type': 'Property', 'name': 'LlmModel.GRYPHE_MYTHOMAX_L2_13B', 'range': [1105, 1114], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1109, 1114], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1111, 1111]}, {'type': 'Literal', 'name': '4000', 'range': [1113, 1113]}]}]}]}]}]}
2025-01-08 10:34:34,069 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:35:05,154 - INFO - Step 5 result: {'type': 'Program', 'name': 'Module', 'range': [434, 682], 'children': [{'type': 'ClassDecl', 'name': 'LlmModel', 'range': [434, 445], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [436, 444], 'children': [{'type': 'arg', 'name': 'str', 'range': [437, 437]}, {'type': 'arg', 'name': 'Enum', 'range': [439, 439]}, {'type': 'keyword', 'name': 'metaclass', 'range': [441, 443], 'children': [{'type': 'Identifier', 'name': 'LlmModelMeta', 'range': [443, 443]}]}]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [451, 453], 'children': [{'type': 'Identifier', 'name': 'O1_PREVIEW', 'range': [451, 451]}, {'type': 'Literal', 'name': 'o1-preview', 'range': [453, 453]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [455, 457], 'children': [{'type': 'Identifier', 'name': 'O1_MINI', 'range': [455, 455]}, {'type': 'Literal', 'name': 'o1-mini', 'range': [457, 457]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [459, 461], 'children': [{'type': 'Identifier', 'name': 'GPT4O_MINI', 'range': [459, 459]}, {'type': 'Literal', 'name': 'gpt-4o-mini', 'range': [461, 461]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [463, 465], 'children': [{'type': 'Identifier', 'name': 'GPT4O', 'range': [463, 463]}, {'type': 'Literal', 'name': 'gpt-4o', 'range': [465, 465]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [467, 469], 'children': [{'type': 'Identifier', 'name': 'GPT4_TURBO', 'range': [467, 467]}, {'type': 'Literal', 'name': 'gpt-4-turbo', 'range': [469, 469]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [471, 473], 'children': [{'type': 'Identifier', 'name': 'GPT3_5_TURBO', 'range': [471, 471]}, {'type': 'Literal', 'name': 'gpt-3.5-turbo', 'range': [473, 473]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [479, 481], 'children': [{'type': 'Identifier', 'name': 'CLAUDE_3_5_SONNET', 'range': [479, 479]}, {'type': 'Literal', 'name': 'claude-3-5-sonnet-latest', 'range': [481, 481]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [483, 485], 'children': [{'type': 'Identifier', 'name': 'CLAUDE_3_HAIKU', 'range': [483, 483]}, {'type': 'Literal', 'name': 'claude-3-haiku-20240307', 'range': [485, 485]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [491, 493], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_8B', 'range': [491, 491]}, {'type': 'Literal', 'name': 'llama3-8b-8192', 'range': [493, 493]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [495, 497], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_70B', 'range': [495, 495]}, {'type': 'Literal', 'name': 'llama3-70b-8192', 'range': [497, 497]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [499, 501], 'children': [{'type': 'Identifier', 'name': 'MIXTRAL_8X7B', 'range': [499, 499]}, {'type': 'Literal', 'name': 'mixtral-8x7b-32768', 'range': [501, 501]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [503, 505], 'children': [{'type': 'Identifier', 'name': 'GEMMA_7B', 'range': [503, 503]}, {'type': 'Literal', 'name': 'gemma-7b-it', 'range': [505, 505]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [507, 509], 'children': [{'type': 'Identifier', 'name': 'GEMMA2_9B', 'range': [507, 507]}, {'type': 'Literal', 'name': 'gemma2-9b-it', 'range': [509, 509]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [519, 521], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_405B', 'range': [519, 519]}, {'type': 'Literal', 'name': 'llama-3.1-405b-reasoning', 'range': [521, 521]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [523, 525], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_70B', 'range': [523, 523]}, {'type': 'Literal', 'name': 'llama-3.1-70b-versatile', 'range': [525, 525]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [527, 529], 'children': [{'type': 'Identifier', 'name': 'LLAMA3_1_8B', 'range': [527, 527]}, {'type': 'Literal', 'name': 'llama-3.1-8b-instant', 'range': [529, 529]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [535, 537], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_LLAMA3_8B', 'range': [535, 535]}, {'type': 'Literal', 'name': 'llama3', 'range': [537, 537]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [539, 541], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_LLAMA3_405B', 'range': [539, 539]}, {'type': 'Literal', 'name': 'llama3.1:405b', 'range': [541, 541]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [543, 545], 'children': [{'type': 'Identifier', 'name': 'OLLAMA_DOLPHIN', 'range': [543, 543]}, {'type': 'Literal', 'name': 'dolphin-mistral:latest', 'range': [545, 545]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [551, 553], 'children': [{'type': 'Identifier', 'name': 'GEMINI_FLASH_1_5_8B', 'range': [551, 551]}, {'type': 'Literal', 'name': 'google/gemini-flash-1.5', 'range': [553, 553]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [555, 557], 'children': [{'type': 'Identifier', 'name': 'GROK_BETA', 'range': [555, 555]}, {'type': 'Literal', 'name': 'x-ai/grok-beta', 'range': [557, 557]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [559, 561], 'children': [{'type': 'Identifier', 'name': 'MISTRAL_NEMO', 'range': [559, 559]}, {'type': 'Literal', 'name': 'mistralai/mistral-nemo', 'range': [561, 561]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [563, 565], 'children': [{'type': 'Identifier', 'name': 'COHERE_COMMAND_R_08_2024', 'range': [563, 563]}, {'type': 'Literal', 'name': 'cohere/command-r-08-2024', 'range': [565, 565]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [567, 569], 'children': [{'type': 'Identifier', 'name': 'COHERE_COMMAND_R_PLUS_08_2024', 'range': [567, 567]}, {'type': 'Literal', 'name': 'cohere/command-r-plus-08-2024', 'range': [569, 569]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [571, 573], 'children': [{'type': 'Identifier', 'name': 'EVA_QWEN_2_5_32B', 'range': [571, 571]}, {'type': 'Literal', 'name': 'eva-unit-01/eva-qwen-2.5-32b', 'range': [573, 573]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [575, 577], 'children': [{'type': 'Identifier', 'name': 'DEEPSEEK_CHAT', 'range': [575, 575]}, {'type': 'Literal', 'name': 'deepseek/deepseek-chat', 'range': [577, 577]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [579, 581], 'children': [{'type': 'Identifier', 'name': 'PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [579, 579]}, {'type': 'Literal', 'name': 'perplexity/llama-3.1-sonar-large-128k-online', 'range': [581, 581]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [587, 589], 'children': [{'type': 'Identifier', 'name': 'QWEN_QWQ_32B_PREVIEW', 'range': [587, 587]}, {'type': 'Literal', 'name': 'qwen/qwq-32b-preview', 'range': [589, 589]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [591, 593], 'children': [{'type': 'Identifier', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [591, 591]}, {'type': 'Literal', 'name': 'nousresearch/hermes-3-llama-3.1-405b', 'range': [593, 593]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [595, 597], 'children': [{'type': 'Identifier', 'name': 'NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [595, 595]}, {'type': 'Literal', 'name': 'nousresearch/hermes-3-llama-3.1-70b', 'range': [597, 597]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [599, 601], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_LITE_V1', 'range': [599, 599]}, {'type': 'Literal', 'name': 'amazon/nova-lite-v1', 'range': [601, 601]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [603, 605], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_MICRO_V1', 'range': [603, 603]}, {'type': 'Literal', 'name': 'amazon/nova-micro-v1', 'range': [605, 605]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [607, 609], 'children': [{'type': 'Identifier', 'name': 'AMAZON_NOVA_PRO_V1', 'range': [607, 607]}, {'type': 'Literal', 'name': 'amazon/nova-pro-v1', 'range': [609, 609]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [611, 613], 'children': [{'type': 'Identifier', 'name': 'MICROSOFT_WIZARDLM_2_8X22B', 'range': [611, 611]}, {'type': 'Literal', 'name': 'microsoft/wizardlm-2-8x22b', 'range': [613, 613]}]}, {'type': 'Assign', 'name': 'Assign', 'range': [615, 617], 'children': [{'type': 'Identifier', 'name': 'GRYPHE_MYTHOMAX_L2_13B', 'range': [615, 615]}, {'type': 'Literal', 'name': 'gryphe/mythomax-l2-13b', 'range': [617, 617]}]}, {'type': 'FunctionDecl', 'name': 'metadata', 'range': [623, 638], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [625, 627], 'children': [{'type': 'arg', 'name': 'self', 'range': [626, 626]}]}, {'type': 'Return', 'name': 'Return', 'range': [633, 634], 'children': [{'type': 'Subscript', 'name': 'Subscript', 'range': [634, 637], 'children': [{'type': 'Identifier', 'name': 'MODEL_METADATA', 'range': [634, 634]}, {'type': 'Identifier', 'name': 'self', 'range': [636, 636]}]}]}]}, {'type': 'FunctionDecl', 'name': 'provider', 'range': [643, 659], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [645, 647], 'children': [{'type': 'arg', 'name': 'self', 'range': [646, 646]}]}, {'type': 'Return', 'name': 'Return', 'range': [653, 654], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [654, 658], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [654, 654]}, {'type': 'Identifier', 'name': 'metadata', 'range': [656, 656]}, {'type': 'Identifier', 'name': 'provider', 'range': [658, 658]}]}]}]}, {'type': 'FunctionDecl', 'name': 'context_window', 'range': [664, 680], 'children': [{'type': 'arguments', 'name': 'arguments', 'range': [666, 668], 'children': [{'type': 'arg', 'name': 'self', 'range': [667, 667]}]}, {'type': 'Return', 'name': 'Return', 'range': [674, 675], 'children': [{'type': 'Attribute', 'name': 'Attribute', 'range': [675, 679], 'children': [{'type': 'Identifier', 'name': 'self', 'range': [675, 675]}, {'type': 'Identifier', 'name': 'metadata', 'range': [677, 677]}, {'type': 'Identifier', 'name': 'context_window', 'range': [679, 679]}]}]}]}]}
2025-01-08 10:35:05,155 - INFO - Completed main AST analysis flow
2025-01-08 10:35:05,156 - INFO - Successfully processed chunk
2025-01-08 10:35:07,021 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [1178, 2638], 'children': [{'type': 'ClassDecl', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [1178, 1184], 'children': [{'type': 'Inheritance', 'name': 'Block', 'range': [1180, 1182], 'children': []}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [1185, 1191], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1187, 1189], 'children': []}]}, {'type': 'VariableDecl', 'name': 'prompt', 'range': [1192, 1209], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1193, 1194], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1195, 1196], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1196, 1209], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1199, 1201], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [1204, 1206], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'expected_format', 'range': [1211, 1230], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1212, 1218], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1219, 1220], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1220, 1230], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1223, 1227], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'model', 'range': [1232, 1261], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [1233, 1234], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1235, 1236], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1236, 1261], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1239, 1241], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1244, 1248], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1251, 1253], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [1256, 1258], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'credentials', 'range': [1263, 1269], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [1264, 1265], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1266, 1267], 'children': [{'type': 'CallExpression', 'name': 'AICredentialsField', 'range': [1267, 1269], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'sys_prompt', 'range': [1271, 1293], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1272, 1273], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1274, 1275], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1275, 1293], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1278, 1280], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1283, 1285], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1288, 1290], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'conversation_history', 'range': [1295, 1316], 'children': [{'type': 'TypeAnnotation', 'name': 'list[Message]', 'range': [1296, 1300], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1301, 1302], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1302, 1316], 'children': [{'type': 'Argument', 'name': 'default', 'range': [1305, 1308], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1311, 1313], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'retry', 'range': [1318, 1340], 'children': [{'type': 'TypeAnnotation', 'name': 'int', 'range': [1319, 1320], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1321, 1322], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1322, 1340], 'children': [{'type': 'Argument', 'name': 'title', 'range': [1325, 1327], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1330, 1332], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1335, 1337], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'prompt_values', 'range': [1342, 1367], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, str]', 'range': [1343, 1348], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1349, 1350], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1350, 1367], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1354, 1356], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1358, 1360], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1363, 1365], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'max_tokens', 'range': [1369, 1393], 'children': [{'type': 'TypeAnnotation', 'name': 'int | None', 'range': [1370, 1373], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1374, 1375], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1375, 1393], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1378, 1380], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1383, 1385], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1388, 1390], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'ollama_host', 'range': [1396, 1418], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1397, 1398], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1399, 1400], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1400, 1418], 'children': [{'type': 'Argument', 'name': 'advanced', 'range': [1403, 1405], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [1408, 1410], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1413, 1415], 'children': []}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [1421, 1427], 'children': [{'type': 'Inheritance', 'name': 'BlockSchema', 'range': [1423, 1425], 'children': []}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [1428, 1444], 'children': [{'type': 'TypeAnnotation', 'name': 'dict[str, Any]', 'range': [1429, 1434], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1435, 1436], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1436, 1444], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1440, 1442], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'error', 'range': [1446, 1455], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [1447, 1448], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [1449, 1450], 'children': [{'type': 'CallExpression', 'name': 'SchemaField', 'range': [1450, 1455], 'children': [{'type': 'Argument', 'name': 'description', 'range': [1452, 1454], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [1458, 1618], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [1461, 1462], 'children': []}, {'type': 'CallExpression', 'name': 'super', 'range': [1465, 1470], 'children': []}, {'type': 'CallExpression', 'name': '__init__', 'range': [1469, 1618], 'children': [{'type': 'Argument', 'name': 'id', 'range': [1472, 1474], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [1477, 1479], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [1482, 1488], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [1491, 1495], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [1498, 1502], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [1505, 1543], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [1546, 1548], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [1551, 1565], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [1568, 1614], 'children': []}]}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [1623, 2638], 'children': [{'type': 'Parameter', 'name': 'credentials', 'range': [1627, 1629], 'children': []}, {'type': 'Parameter', 'name': 'llm_model', 'range': [1632, 1634], 'children': []}, {'type': 'Parameter', 'name': 'prompt', 'range': [1637, 1642], 'children': []}, {'type': 'Parameter', 'name': 'json_format', 'range': [1645, 1647], 'children': []}, {'type': 'Parameter', 'name': 'max_tokens', 'range': [1650, 1654], 'children': []}, {'type': 'Parameter', 'name': 'ollama_host', 'range': [1659, 1663], 'children': []}, {'type': 'ReturnType', 'name': 'tuple[str, int, int]', 'range': [1668, 1676], 'children': []}, {'type': 'Docstring', 'name': '', 'range': [1679, 1681], 'children': []}, {'type': 'Assignment', 'name': 'provider', 'range': [1683, 1690], 'children': []}, {'type': 'IfStatement', 'name': 'provider == "openai"', 'range': [1692, 1916], 'children': [{'type': 'Assignment', 'name': 'oai_client', 'range': [1699, 1714], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [1716, 1718], 'children': []}, {'type': 'IfStatement', 'name': 'llm_model in [LlmModel.O1_MINI, LlmModel.O1_PREVIEW]', 'range': [1721, 1814], 'children': [{'type': 'Assignment', 'name': 'sys_messages', 'range': [1735, 1754], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [1756, 1775], 'children': []}, {'type': 'Assignment', 'name': 'prompt', 'range': [1777, 1813], 'children': []}]}, {'type': 'IfStatement', 'name': 'json_format', 'range': [1816, 1826], 'children': [{'type': 'Assignment', 'name': 'response_format', 'range': [1819, 1825], 'children': []}]}, {'type': 'Assignment', 'name': 'response', 'range': [1828, 1869], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [1872, 1915], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "anthropic"', 'range': [1918, 2187], 'children': [{'type': 'Assignment', 'name': 'system_messages', 'range': [1924, 1943], 'children': []}, {'type': 'Assignment', 'name': 'sysprompt', 'range': [1945, 1952], 'children': []}, {'type': 'Assignment', 'name': 'messages', 'range': [1955, 2056], 'children': []}, {'type': 'Assignment', 'name': 'client', 'range': [2058, 2073], 'children': []}, {'type': 'TryStatement', 'name': 'try', 'range': [2075, 2187], 'children': [{'type': 'Assignment', 'name': 'resp', 'range': [2078, 2111], 'children': []}, {'type': 'IfStatement', 'name': 'not resp.content', 'range': [2114, 2126], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2121, 2125], 'children': []}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2128, 2186], 'children': []}]}, {'type': 'ExceptStatement', 'name': 'except anthropic.APIError as e', 'range': [2188, 2213], 'children': [{'type': 'Assignment', 'name': 'error_message', 'range': [2196, 2200], 'children': []}, {'type': 'CallExpression', 'name': 'logger.error', 'range': [2201, 2207], 'children': []}, {'type': 'RaiseStatement', 'name': 'raise', 'range': [2208, 2212], 'children': []}]}]}, {'type': 'IfStatement', 'name': 'provider == "groq"', 'range': [2215, 2335], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2221, 2234], 'children': []}, {'type': 'Assignment', 'name': 'response_format', 'range': [2236, 2246], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2248, 2289], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2291, 2334], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "ollama"', 'range': [2337, 2457], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2343, 2352], 'children': []}, {'type': 'Assignment', 'name': 'sys_messages', 'range': [2354, 2373], 'children': []}, {'type': 'Assignment', 'name': 'usr_messages', 'range': [2375, 2394], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2396, 2421], 'children': []}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2423, 2456], 'children': []}]}, {'type': 'IfStatement', 'name': 'provider == "open_router"', 'range': [2459, 2627], 'children': [{'type': 'Assignment', 'name': 'client', 'range': [2465, 2488], 'children': []}, {'type': 'Assignment', 'name': 'response', 'range': [2491, 2540], 'children': []}, {'type': 'IfStatement', 'name': 'not response.choices', 'range': [2543, 2581], 'children': [{'type': 'IfStatement', 'name': 'response', 'range': [2556, 2572], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2566, 2571], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2573, 2580], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2576, 2579], 'children': []}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [2583, 2626], 'children': []}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [2628, 2637], 'children': [{'type': 'RaiseStatement', 'name': 'raise', 'range': [2631, 2636], 'children': []}]}]}]}
2025-01-08 10:35:07,021 - INFO - Completed main AST analysis flow
2025-01-08 10:35:07,023 - INFO - Successfully processed chunk
2025-01-08 10:36:06,817 - INFO - Step 5 result: {'type': 'Program', 'name': 'MODEL_METADATA', 'range': [683, 1118], 'children': [{'type': 'AssignmentExpression', 'name': '', 'range': [683, 1117], 'children': [{'type': 'ObjectExpression', 'name': '', 'range': [685, 1117], 'children': [{'type': 'Property', 'name': 'LlmModel.O1_PREVIEW', 'range': [687, 696], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [691, 696], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [693, 693]}, {'type': 'Literal', 'name': '32000', 'range': [695, 695]}]}]}, {'type': 'Property', 'name': 'LlmModel.O1_MINI', 'range': [699, 708], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [703, 708], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [705, 705]}, {'type': 'Literal', 'name': '62000', 'range': [707, 707]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O_MINI', 'range': [711, 720], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [715, 720], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [717, 717]}, {'type': 'Literal', 'name': '128000', 'range': [719, 719]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4O', 'range': [723, 732], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [727, 732], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [729, 729]}, {'type': 'Literal', 'name': '128000', 'range': [731, 731]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT4_TURBO', 'range': [735, 744], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [739, 744], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [741, 741]}, {'type': 'Literal', 'name': '128000', 'range': [743, 743]}]}]}, {'type': 'Property', 'name': 'LlmModel.GPT3_5_TURBO', 'range': [747, 756], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [751, 756], 'children': [{'type': 'Literal', 'name': '"openai"', 'range': [753, 753]}, {'type': 'Literal', 'name': '16385', 'range': [755, 755]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_5_SONNET', 'range': [759, 768], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [763, 768], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [765, 765]}, {'type': 'Literal', 'name': '200000', 'range': [767, 767]}]}]}, {'type': 'Property', 'name': 'LlmModel.CLAUDE_3_HAIKU', 'range': [771, 780], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [775, 780], 'children': [{'type': 'Literal', 'name': '"anthropic"', 'range': [777, 777]}, {'type': 'Literal', 'name': '200000', 'range': [779, 779]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_8B', 'range': [783, 792], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [787, 792], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [789, 789]}, {'type': 'Literal', 'name': '8192', 'range': [791, 791]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_70B', 'range': [795, 804], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [799, 804], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [801, 801]}, {'type': 'Literal', 'name': '8192', 'range': [803, 803]}]}]}, {'type': 'Property', 'name': 'LlmModel.MIXTRAL_8X7B', 'range': [807, 816], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [811, 816], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [813, 813]}, {'type': 'Literal', 'name': '32768', 'range': [815, 815]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA_7B', 'range': [819, 828], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [823, 828], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [825, 825]}, {'type': 'Literal', 'name': '8192', 'range': [827, 827]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMMA2_9B', 'range': [831, 840], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [835, 840], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [837, 837]}, {'type': 'Literal', 'name': '8192', 'range': [839, 839]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_405B', 'range': [843, 852], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [847, 852], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [849, 849]}, {'type': 'Literal', 'name': '8192', 'range': [851, 851]}]}]}, {'type': 'Comment', 'name': '# Limited to 16 k during preview', 'range': [855, 861]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_70B', 'range': [863, 872], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [867, 872], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [869, 869]}, {'type': 'Literal', 'name': '131072', 'range': [871, 871]}]}]}, {'type': 'Property', 'name': 'LlmModel.LLAMA3_1_8B', 'range': [875, 884], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [879, 884], 'children': [{'type': 'Literal', 'name': '"groq"', 'range': [881, 881]}, {'type': 'Literal', 'name': '131072', 'range': [883, 883]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_8B', 'range': [887, 896], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [891, 896], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [893, 893]}, {'type': 'Literal', 'name': '8192', 'range': [895, 895]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_LLAMA3_405B', 'range': [899, 908], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [903, 908], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [905, 905]}, {'type': 'Literal', 'name': '8192', 'range': [907, 907]}]}]}, {'type': 'Property', 'name': 'LlmModel.OLLAMA_DOLPHIN', 'range': [911, 920], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [915, 920], 'children': [{'type': 'Literal', 'name': '"ollama"', 'range': [917, 917]}, {'type': 'Literal', 'name': '32768', 'range': [919, 919]}]}]}, {'type': 'Property', 'name': 'LlmModel.GEMINI_FLASH_1_5_8B', 'range': [923, 932], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [927, 932], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [929, 929]}, {'type': 'Literal', 'name': '8192', 'range': [931, 931]}]}]}, {'type': 'Property', 'name': 'LlmModel.GROK_BETA', 'range': [935, 944], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [939, 944], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [941, 941]}, {'type': 'Literal', 'name': '8192', 'range': [943, 943]}]}]}, {'type': 'Property', 'name': 'LlmModel.MISTRAL_NEMO', 'range': [947, 956], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [951, 956], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [953, 953]}, {'type': 'Literal', 'name': '4000', 'range': [955, 955]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_08_2024', 'range': [959, 968], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [963, 968], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [965, 965]}, {'type': 'Literal', 'name': '4000', 'range': [967, 967]}]}]}, {'type': 'Property', 'name': 'LlmModel.COHERE_COMMAND_R_PLUS_08_2024', 'range': [971, 980], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [975, 980], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [977, 977]}, {'type': 'Literal', 'name': '4000', 'range': [979, 979]}]}]}, {'type': 'Property', 'name': 'LlmModel.EVA_QWEN_2_5_32B', 'range': [983, 992], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [987, 992], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [989, 989]}, {'type': 'Literal', 'name': '4000', 'range': [991, 991]}]}]}, {'type': 'Property', 'name': 'LlmModel.DEEPSEEK_CHAT', 'range': [995, 1004], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [999, 1004], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1001, 1001]}, {'type': 'Literal', 'name': '8192', 'range': [1003, 1003]}]}]}, {'type': 'Property', 'name': 'LlmModel.PERPLEXITY_LLAMA_3_1_SONAR_LARGE_128K_ONLINE', 'range': [1007, 1018], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1011, 1018], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1014, 1014]}, {'type': 'Literal', 'name': '8192', 'range': [1016, 1016]}]}]}, {'type': 'Property', 'name': 'LlmModel.QWEN_QWQ_32B_PREVIEW', 'range': [1021, 1030], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1025, 1030], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1027, 1027]}, {'type': 'Literal', 'name': '4000', 'range': [1029, 1029]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_405B', 'range': [1033, 1042], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1037, 1042], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1039, 1039]}, {'type': 'Literal', 'name': '4000', 'range': [1041, 1041]}]}]}, {'type': 'Property', 'name': 'LlmModel.NOUSRESEARCH_HERMES_3_LLAMA_3_1_70B', 'range': [1045, 1054], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1049, 1054], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1051, 1051]}, {'type': 'Literal', 'name': '4000', 'range': [1053, 1053]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_LITE_V1', 'range': [1057, 1066], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1061, 1066], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1063, 1063]}, {'type': 'Literal', 'name': '4000', 'range': [1065, 1065]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_MICRO_V1', 'range': [1069, 1078], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1073, 1078], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1075, 1075]}, {'type': 'Literal', 'name': '4000', 'range': [1077, 1077]}]}]}, {'type': 'Property', 'name': 'LlmModel.AMAZON_NOVA_PRO_V1', 'range': [1081, 1090], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1085, 1090], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1087, 1087]}, {'type': 'Literal', 'name': '4000', 'range': [1089, 1089]}]}]}, {'type': 'Property', 'name': 'LlmModel.MICROSOFT_WIZARDLM_2_8X22B', 'range': [1093, 1102], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1097, 1102], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1099, 1099]}, {'type': 'Literal', 'name': '4000', 'range': [1101, 1101]}]}]}, {'type': 'Property', 'name': 'LlmModel.GRYPHE_MYTHOMAX_L2_13B', 'range': [1105, 1114], 'children': [{'type': 'CallExpression', 'name': 'ModelMetadata', 'range': [1109, 1114], 'children': [{'type': 'Literal', 'name': '"open_router"', 'range': [1111, 1111]}, {'type': 'Literal', 'name': '4000', 'range': [1113, 1113]}]}]}]}]}]}
2025-01-08 10:36:06,817 - INFO - Completed main AST analysis flow
2025-01-08 10:36:06,818 - INFO - Successfully processed chunk
2025-01-08 10:36:11,096 - INFO - Step 5 result: {'type': 'Program', 'name': '', 'range': [4533, 5602], 'children': [{'type': 'ClassDecl', 'name': 'AIListGeneratorBlock', 'range': [4533, 4577], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4535, 4577], 'children': [{'type': 'ClassInheritance', 'name': 'Block', 'range': [4535, 4537], 'children': []}]}]}, {'type': 'ClassDecl', 'name': 'Input', 'range': [4540, 4647], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4542, 4647], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4542, 4544], 'children': []}, {'type': 'FieldDecl', 'name': 'focus', 'range': [4547, 4576], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4549, 4551], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4552, 4576], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4553, 4576], 'children': [{'type': 'Arguments', 'name': '', 'range': [4554, 4576], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4556, 4558], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4561, 4563], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4566, 4568], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4571, 4573], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'source_data', 'range': [4578, 4607], 'children': [{'type': 'TypeAnnotation', 'name': 'str | None', 'range': [4580, 4582], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4583, 4607], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4584, 4607], 'children': [{'type': 'Arguments', 'name': '', 'range': [4585, 4607], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4587, 4589], 'children': []}, {'type': 'Argument', 'name': 'placeholder', 'range': [4592, 4594], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4597, 4599], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4602, 4604], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'model', 'range': [4609, 4639], 'children': [{'type': 'TypeAnnotation', 'name': 'LlmModel', 'range': [4611, 4611], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4612, 4639], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4613, 4639], 'children': [{'type': 'Arguments', 'name': '', 'range': [4614, 4639], 'children': [{'type': 'Argument', 'name': 'title', 'range': [4616, 4618], 'children': []}, {'type': 'Argument', 'name': 'default', 'range': [4621, 4626], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4628, 4630], 'children': []}, {'type': 'Argument', 'name': 'advanced', 'range': [4633, 4635], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'credentials', 'range': [4640, 4647], 'children': [{'type': 'TypeAnnotation', 'name': 'AICredentials', 'range': [4642, 4642], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4643, 4647], 'children': [{'type': 'AICredentialsField', 'name': 'AICredentialsField', 'range': [4644, 4647], 'children': []}]}]}]}]}, {'type': 'ClassDecl', 'name': 'Output', 'range': [4728, 4775], 'children': [{'type': 'ClassBody', 'name': '', 'range': [4730, 4775], 'children': [{'type': 'ClassInheritance', 'name': 'BlockSchema', 'range': [4730, 4732], 'children': []}, {'type': 'FieldDecl', 'name': 'generated_list', 'range': [4735, 4747], 'children': [{'type': 'TypeAnnotation', 'name': 'List[str]', 'range': [4737, 4740], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4741, 4747], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4742, 4747], 'children': [{'type': 'Arguments', 'name': '', 'range': [4743, 4747], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4745, 4746], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'list_item', 'range': [4749, 4761], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4751, 4751], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4752, 4761], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4753, 4761], 'children': [{'type': 'Arguments', 'name': '', 'range': [4754, 4761], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4756, 4758], 'children': []}]}]}]}]}, {'type': 'FieldDecl', 'name': 'error', 'range': [4763, 4774], 'children': [{'type': 'TypeAnnotation', 'name': 'str', 'range': [4765, 4765], 'children': []}, {'type': 'Assignment', 'name': '=', 'range': [4766, 4774], 'children': [{'type': 'SchemaField', 'name': 'SchemaField', 'range': [4767, 4774], 'children': [{'type': 'Arguments', 'name': '', 'range': [4768, 4774], 'children': [{'type': 'Argument', 'name': 'description', 'range': [4770, 4772], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': '__init__', 'range': [4777, 4968], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4779, 4781], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [4780, 4780], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4782, 4968], 'children': [{'type': 'SuperCall', 'name': 'super', 'range': [4784, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4785, 4786], 'children': []}]}, {'type': 'MethodCall', 'name': '__init__', 'range': [4787, 4790], 'children': [{'type': 'Arguments', 'name': '', 'range': [4788, 4790], 'children': [{'type': 'Argument', 'name': 'id', 'range': [4791, 4793], 'children': []}, {'type': 'Argument', 'name': 'description', 'range': [4796, 4798], 'children': []}, {'type': 'Argument', 'name': 'categories', 'range': [4801, 4811], 'children': []}, {'type': 'Argument', 'name': 'input_schema', 'range': [4814, 4818], 'children': []}, {'type': 'Argument', 'name': 'output_schema', 'range': [4821, 4825], 'children': []}, {'type': 'Argument', 'name': 'test_input', 'range': [4828, 4873], 'children': []}, {'type': 'Argument', 'name': 'test_credentials', 'range': [4876, 4878], 'children': []}, {'type': 'Argument', 'name': 'test_output', 'range': [4881, 4941], 'children': []}, {'type': 'Argument', 'name': 'test_mock', 'range': [4944, 4964], 'children': []}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'llm_call', 'range': [4973, 5023], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [4975, 4989], 'children': [{'type': 'Parameter', 'name': 'input_data', 'range': [4977, 4981], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [4984, 4986], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [4990, 5023], 'children': [{'type': 'VariableDecl', 'name': 'llm_block', 'range': [5000, 5005], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5001, 5005], 'children': [{'type': 'NewExpression', 'name': 'AIStructuredResponseGeneratorBlock', 'range': [5002, 5005], 'children': []}]}]}, {'type': 'VariableDecl', 'name': 'response', 'range': [5006, 5020], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5007, 5020], 'children': [{'type': 'MethodCall', 'name': 'run_once', 'range': [5008, 5019], 'children': [{'type': 'Arguments', 'name': '', 'range': [5009, 5019], 'children': [{'type': 'Argument', 'name': 'input_data', 'range': [5012, 5012], 'children': []}, {'type': 'Argument', 'name': 'response', 'range': [5014, 5014], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5016, 5018], 'children': []}]}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [5021, 5023], 'children': [{'type': 'Identifier', 'name': 'response', 'range': [5022, 5022], 'children': []}]}]}]}, {'type': 'FunctionDecl', 'name': 'string_to_list', 'range': [5028, 5131], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5030, 5032], 'children': [{'type': 'Parameter', 'name': 'string', 'range': [5031, 5031], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5033, 5131], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5047, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5048, 5107], 'children': [{'type': 'VariableDecl', 'name': 'python_list', 'range': [5061, 5069], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5062, 5069], 'children': [{'type': 'CallExpression', 'name': 'literal_eval', 'range': [5063, 5068], 'children': [{'type': 'Arguments', 'name': '', 'range': [5064, 5068], 'children': [{'type': 'Argument', 'name': 'string', 'range': [5067, 5067], 'children': []}]}]}]}]}, {'type': 'IfStatement', 'name': 'if', 'range': [5070, 5101], 'children': [{'type': 'Condition', 'name': 'isinstance', 'range': [5071, 5076], 'children': [{'type': 'Arguments', 'name': '', 'range': [5072, 5076], 'children': [{'type': 'Argument', 'name': 'python_list', 'range': [5073, 5073], 'children': []}, {'type': 'Argument', 'name': 'list', 'range': [5075, 5075], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5077, 5089], 'children': [{'type': 'ReturnStatement', 'name': 'return', 'range': [5087, 5089], 'children': [{'type': 'Identifier', 'name': 'python_list', 'range': [5088, 5088], 'children': []}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5090, 5101], 'children': [{'type': 'Block', 'name': '', 'range': [5091, 5101], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5101, 5101], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5102, 5106], 'children': []}]}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5108, 5131], 'children': [{'type': 'Block', 'name': '', 'range': [5117, 5131], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5126, 5131], 'children': [{'type': 'NewExpression', 'name': 'ValueError', 'range': [5127, 5130], 'children': []}]}]}]}]}]}]}, {'type': 'FunctionDecl', 'name': 'run', 'range': [5133, 5602], 'children': [{'type': 'FunctionParameters', 'name': '', 'range': [5135, 5152], 'children': [{'type': 'Parameter', 'name': 'self', 'range': [5137, 5137], 'children': []}, {'type': 'Parameter', 'name': 'input_data', 'range': [5139, 5141], 'children': []}, {'type': 'Parameter', 'name': 'credentials', 'range': [5145, 5147], 'children': []}, {'type': 'Parameter', 'name': 'kwargs', 'range': [5151, 5151], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [5153, 5602], 'children': [{'type': 'ForStatement', 'name': 'for', 'range': [5320, 5518], 'children': [{'type': 'VariableDecl', 'name': 'attempt', 'range': [5321, 5328], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5322, 5328], 'children': [{'type': 'CallExpression', 'name': 'range', 'range': [5323, 5328], 'children': [{'type': 'Arguments', 'name': '', 'range': [5324, 5328], 'children': [{'type': 'Argument', 'name': 'input_data.max_retries', 'range': [5325, 5327], 'children': []}]}]}]}]}, {'type': 'Block', 'name': '', 'range': [5329, 5518], 'children': [{'type': 'TryStatement', 'name': 'try', 'range': [5331, 5517], 'children': [{'type': 'Block', 'name': '', 'range': [5332, 5496], 'children': [{'type': 'VariableDecl', 'name': 'llm_response', 'range': [5341, 5405], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5342, 5405], 'children': [{'type': 'MethodCall', 'name': 'llm_call', 'range': [5343, 5404], 'children': [{'type': 'Arguments', 'name': '', 'range': [5344, 5404], 'children': [{'type': 'Argument', 'name': 'AIStructuredResponseGeneratorBlock.Input', 'range': [5348, 5396], 'children': []}, {'type': 'Argument', 'name': 'credentials', 'range': [5399, 5403], 'children': []}]}]}]}]}, {'type': 'VariableDecl', 'name': 'response_string', 'range': [5421, 5427], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5422, 5427], 'children': [{'type': 'MemberExpression', 'name': 'llm_response', 'range': [5423, 5426], 'children': [{'type': 'Property', 'name': 'response', 'range': [5425, 5425], 'children': []}]}]}]}, {'type': 'VariableDecl', 'name': 'parsed_list', 'range': [5453, 5461], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5454, 5461], 'children': [{'type': 'MethodCall', 'name': 'string_to_list', 'range': [5455, 5460], 'children': [{'type': 'Arguments', 'name': '', 'range': [5456, 5460], 'children': [{'type': 'Argument', 'name': 'response_string', 'range': [5459, 5459], 'children': []}]}]}]}]}, {'type': 'YieldStatement', 'name': 'yield', 'range': [5491, 5495], 'children': [{'type': 'StringLiteral', 'name': 'generated_list', 'range': [5492, 5492], 'children': []}, {'type': 'Identifier', 'name': 'parsed_list', 'range': [5494, 5494], 'children': []}]}, {'type': 'ForStatement', 'name': 'for', 'range': [5505, 5516], 'children': [{'type': 'VariableDecl', 'name': 'item', 'range': [5506, 5508], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5507, 5508], 'children': [{'type': 'Identifier', 'name': 'parsed_list', 'range': [5508, 5508], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5509, 5516], 'children': [{'type': 'YieldStatement', 'name': 'yield', 'range': [5511, 5515], 'children': [{'type': 'StringLiteral', 'name': 'list_item', 'range': [5512, 5512], 'children': []}, {'type': 'Identifier', 'name': 'item', 'range': [5514, 5514], 'children': []}]}]}]}]}, {'type': 'CatchClause', 'name': 'except', 'range': [5519, 5563], 'children': [{'type': 'Block', 'name': '', 'range': [5525, 5563], 'children': [{'type': 'IfStatement', 'name': 'if', 'range': [5533, 5542], 'children': [{'type': 'Condition', 'name': 'attempt', 'range': [5534, 5536], 'children': [{'type': 'BinaryExpression', 'name': '==', 'range': [5537, 5539], 'children': [{'type': 'Identifier', 'name': 'input_data.max_retries', 'range': [5538, 5538], 'children': []}, {'type': 'Literal', 'name': '1', 'range': [5540, 5540], 'children': []}]}]}, {'type': 'Block', 'name': '', 'range': [5543, 5563], 'children': [{'type': 'ThrowStatement', 'name': 'raise', 'range': [5554, 5563], 'children': [{'type': 'NewExpression', 'name': 'RuntimeError', 'range': [5555, 5562], 'children': []}]}]}]}, {'type': 'ElseStatement', 'name': 'else', 'range': [5564, 5594], 'children': [{'type': 'Block', 'name': '', 'range': [5565, 5594], 'children': [{'type': 'VariableDecl', 'name': 'prompt', 'range': [5579, 5585], 'children': [{'type': 'Assignment', 'name': '=', 'range': [5580, 5585], 'children': [{'type': 'TemplateLiteral', 'name': '', 'range': [5581, 5584], 'children': []}]}]}]}]}]}]}]}]}]}]}]}]}
2025-01-08 10:36:11,096 - INFO - Completed main AST analysis flow
2025-01-08 10:36:11,098 - INFO - Successfully processed chunk
2025-01-08 10:36:11,324 - INFO - Starting code generation from AST
2025-01-08 10:36:12,021 - ERROR - Error in get_code_from_ast: Error code: 400 - {'error': {'message': "This model's maximum context length is 65536 tokens. However, you requested 91616 tokens (83424 in the messages, 8192 in the completion). Please reduce the length of the messages or completion.", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2025-01-08 10:36:12,022 - INFO - Starting static code similarity comparison
2025-01-08 10:36:12,040 - INFO - Static similarity result: {'final_score': 20.11, 'length_similarity': 0.0, 'token_similarity': 0.0, 'structure_similarity': 0.0, 'function_similarity': 100, 'complexity_similarity': 1.06, 'variable_similarity': 100}
