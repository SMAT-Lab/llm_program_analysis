2025-01-08 10:27:27,755 - INFO - Processing sample 205
2025-01-08 10:27:27,755 - INFO - Starting Step 0: Splitting code into top-level declarations
2025-01-08 10:27:32,608 - INFO - Successfully split code into 3 top-level declarations
2025-01-08 10:27:32,609 - INFO - Processing chunk #0 (size=174 chars, start_index=0)
2025-01-08 10:27:32,610 - INFO - Processing chunk with 174 chars starting at index 0
2025-01-08 10:27:32,610 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,610 - INFO - Tokenized code into 42 tokens
2025-01-08 10:27:32,610 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,610 - INFO - Processing chunk #1 (size=531 chars, start_index=42)
2025-01-08 10:27:32,611 - INFO - Processing chunk with 531 chars starting at index 42
2025-01-08 10:27:32,611 - INFO - Processing chunk #2 (size=684 chars, start_index=177)
2025-01-08 10:27:32,611 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,615 - INFO - Processing chunk with 684 chars starting at index 177
2025-01-08 10:27:32,615 - INFO - Tokenized code into 135 tokens
2025-01-08 10:27:32,616 - INFO - Starting main AST analysis flow
2025-01-08 10:27:32,616 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:32,617 - INFO - Tokenized code into 142 tokens
2025-01-08 10:27:32,621 - INFO - Starting Step 1: Initial AST node identification
2025-01-08 10:27:34,493 - INFO - Step 1 result: {'type': 'Program', 'name': 'log_raw_analytics', 'range': [177, 318], 'children': []}
2025-01-08 10:27:34,494 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:34,585 - INFO - Step 1 result: {'type': 'Program', 'name': 'log_raw_metric', 'range': [42, 176], 'children': []}
2025-01-08 10:27:34,585 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:37,824 - INFO - Step 1 result: {'type': 'Program', 'name': '', 'range': [0, 41], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [5, 9], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [11, 13], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': []}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 30], 'children': []}, {'type': 'VariableDeclaration', 'name': 'router', 'range': [32, 39], 'children': []}]}
2025-01-08 10:27:38,016 - INFO - Starting Step 2: Detailed AST construction
2025-01-08 10:27:51,110 - INFO - Step 2 result: {'type': 'Program', 'name': 'log_raw_analytics', 'range': [177, 318], 'children': [{'type': 'Decorator', 'name': '@router.post', 'range': [177, 183], 'children': [{'type': 'Argument', 'name': '"/log_raw_analytics"', 'range': [182, 182], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'log_raw_analytics', 'range': [185, 318], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [190, 202], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Depends(get_user_id)]', 'range': [192, 202], 'children': []}]}, {'type': 'Parameter', 'name': 'type', 'range': [205, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True)]', 'range': [207, 223], 'children': []}]}, {'type': 'Parameter', 'name': 'data', 'range': [226, 252], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[dict, fastapi.Body(..., embed=True, description="The data to log")]', 'range': [228, 252], 'children': []}]}, {'type': 'Parameter', 'name': 'data_index', 'range': [255, 286], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True, description="Indexable field for any count based analytical measures like page order clicking, tutorial step completion, etc.")]', 'range': [257, 286], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [289, 318], 'children': [{'type': 'Assignment', 'name': 'result = await backend.data.analytics.log_raw_analytics(user_id, type, data, data_index)', 'range': [292, 312], 'children': []}, {'type': 'ReturnStatement', 'name': 'return result.id', 'range': [314, 318], 'children': []}]}]}]}
2025-01-08 10:27:51,113 - INFO - Starting Step 3: AST simplification
2025-01-08 10:27:53,392 - INFO - Step 2 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [5, 9], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [5, 9], 'children': [{'type': 'Import', 'name': 'Annotated', 'range': [7, 8], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [11, 13], 'children': [{'type': 'Import', 'name': 'fastapi', 'range': [11, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'FromImport', 'name': 'backend.data.analytics', 'range': [15, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 30], 'children': [{'type': 'FromImport', 'name': 'backend.server.utils', 'range': [22, 30], 'children': [{'type': 'Import', 'name': 'get_user_id', 'range': [28, 29], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'router', 'range': [32, 39], 'children': [{'type': 'Assignment', 'name': '=', 'range': [33, 34], 'children': [{'type': 'CallExpression', 'name': 'APIRouter', 'range': [34, 38], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [35, 36], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [34, 35], 'children': []}, {'type': 'Identifier', 'name': 'APIRouter', 'range': [36, 37], 'children': []}]}]}]}]}]}
2025-01-08 10:27:53,392 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:01,680 - INFO - Step 2 result: {'type': 'Program', 'name': 'log_raw_metric', 'range': [42, 176], 'children': [{'type': 'RouterDeclaration', 'name': 'router.post', 'range': [42, 50], 'children': [{'type': 'Path', 'name': 'path', 'range': [47, 49], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'log_raw_metric', 'range': [52, 176], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [57, 69], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [59, 69], 'children': [{'type': 'Type', 'name': 'str', 'range': [61, 61], 'children': []}, {'type': 'Dependency', 'name': 'fastapi.Depends', 'range': [63, 68], 'children': [{'type': 'FunctionCall', 'name': 'get_user_id', 'range': [67, 67], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_name', 'range': [72, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [74, 90], 'children': [{'type': 'Type', 'name': 'str', 'range': [76, 76], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [78, 89], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [86, 88], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_value', 'range': [93, 111], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [95, 111], 'children': [{'type': 'Type', 'name': 'float', 'range': [97, 97], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [99, 110], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [107, 109], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'data_string', 'range': [114, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [116, 132], 'children': [{'type': 'Type', 'name': 'str', 'range': [118, 118], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [120, 131], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [128, 130], 'children': []}]}]}]}, {'type': 'FunctionBody', 'name': 'log_raw_metric', 'range': [135, 176], 'children': [{'type': 'Assignment', 'name': 'result', 'range': [138, 170], 'children': [{'type': 'AwaitExpression', 'name': 'await', 'range': [140, 140], 'children': [{'type': 'FunctionCall', 'name': 'backend.data.analytics.log_raw_metric', 'range': [141, 170], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [150, 152], 'children': []}, {'type': 'Argument', 'name': 'metric_name', 'range': [155, 157], 'children': []}, {'type': 'Argument', 'name': 'metric_value', 'range': [160, 162], 'children': []}, {'type': 'Argument', 'name': 'data_string', 'range': [165, 167], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [172, 176], 'children': [{'type': 'MemberExpression', 'name': 'result.id', 'range': [173, 175], 'children': []}]}]}]}]}
2025-01-08 10:28:01,691 - INFO - Starting Step 3: AST simplification
2025-01-08 10:28:10,230 - INFO - Step 3 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [5, 9], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [5, 9], 'children': [{'type': 'Import', 'name': 'Annotated', 'range': [7, 8], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [11, 13], 'children': [{'type': 'Import', 'name': 'fastapi', 'range': [11, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'FromImport', 'name': 'backend.data.analytics', 'range': [15, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 30], 'children': [{'type': 'FromImport', 'name': 'backend.server.utils', 'range': [22, 30], 'children': [{'type': 'Import', 'name': 'get_user_id', 'range': [28, 29], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'router', 'range': [32, 39], 'children': [{'type': 'Assignment', 'name': '=', 'range': [33, 34], 'children': [{'type': 'CallExpression', 'name': 'APIRouter', 'range': [34, 38], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [35, 36], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [34, 35], 'children': []}, {'type': 'Identifier', 'name': 'APIRouter', 'range': [36, 37], 'children': []}]}]}]}]}]}
2025-01-08 10:28:10,230 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:10,357 - INFO - Step 3 result: {'type': 'Program', 'name': 'log_raw_analytics', 'range': [177, 318], 'children': [{'type': 'Decorator', 'name': '@router.post', 'range': [177, 183], 'children': [{'type': 'Argument', 'name': '"/log_raw_analytics"', 'range': [182, 182], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'log_raw_analytics', 'range': [185, 318], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [190, 202], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Depends(get_user_id)]', 'range': [192, 202], 'children': []}]}, {'type': 'Parameter', 'name': 'type', 'range': [205, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True)]', 'range': [207, 223], 'children': []}]}, {'type': 'Parameter', 'name': 'data', 'range': [226, 252], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[dict, fastapi.Body(..., embed=True, description="The data to log")]', 'range': [228, 252], 'children': []}]}, {'type': 'Parameter', 'name': 'data_index', 'range': [255, 286], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True, description="Indexable field for any count based analytical measures like page order clicking, tutorial step completion, etc.")]', 'range': [257, 286], 'children': []}]}, {'type': 'FunctionBody', 'name': '', 'range': [289, 318], 'children': [{'type': 'Assignment', 'name': 'result = await backend.data.analytics.log_raw_analytics(user_id, type, data, data_index)', 'range': [292, 312], 'children': []}, {'type': 'ReturnStatement', 'name': 'return result.id', 'range': [314, 318], 'children': []}]}]}]}
2025-01-08 10:28:10,357 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:27,419 - INFO - Step 4 result: {'nodes': [{'type': 'ImportDeclaration', 'name': '', 'range': [5, 9], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [5, 9], 'children': [{'type': 'Import', 'name': 'Annotated', 'range': [7, 8], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [11, 13], 'children': [{'type': 'Import', 'name': 'fastapi', 'range': [11, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'FromImport', 'name': 'backend.data.analytics', 'range': [15, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 30], 'children': [{'type': 'FromImport', 'name': 'backend.server.utils', 'range': [22, 30], 'children': [{'type': 'Import', 'name': 'get_user_id', 'range': [28, 29], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'router', 'range': [32, 39], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [33, 34], 'children': [{'type': 'CallExpression', 'name': 'APIRouter', 'range': [34, 38], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [35, 36], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [34, 35], 'children': []}, {'type': 'Identifier', 'name': 'APIRouter', 'range': [36, 37], 'children': []}]}]}]}]}]}
2025-01-08 10:28:27,421 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:29,277 - INFO - Step 4 result: {'type': 'Program', 'name': 'log_raw_analytics', 'range': [177, 318], 'children': [{'type': 'Decorator', 'name': '@router.post', 'range': [177, 183], 'children': [{'type': 'Argument', 'name': '"/log_raw_analytics"', 'range': [182, 182], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'log_raw_analytics', 'range': [185, 318], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [190, 202], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Depends(get_user_id)]', 'range': [192, 202], 'children': []}]}, {'type': 'Parameter', 'name': 'type', 'range': [205, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True)]', 'range': [207, 223], 'children': []}]}, {'type': 'Parameter', 'name': 'data', 'range': [226, 252], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[dict, fastapi.Body(..., embed=True, description="The data to log")]', 'range': [228, 252], 'children': []}]}, {'type': 'Parameter', 'name': 'data_index', 'range': [255, 286], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True, description="Indexable field for any count based analytical measures like page order clicking, tutorial step completion, etc.")]', 'range': [257, 286], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [289, 318], 'children': [{'type': 'AssignmentExpression', 'name': 'result = await backend.data.analytics.log_raw_analytics(user_id, type, data, data_index)', 'range': [292, 312], 'children': []}, {'type': 'ReturnStatement', 'name': 'return result.id', 'range': [314, 318], 'children': []}]}]}]}
2025-01-08 10:28:29,277 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:28:33,876 - INFO - Step 3 result: {'type': 'Program', 'name': 'log_raw_metric', 'range': [42, 176], 'children': [{'type': 'RouterDeclaration', 'name': 'router.post', 'range': [42, 50], 'children': [{'type': 'Path', 'name': 'path', 'range': [47, 49], 'children': []}]}, {'type': 'FunctionDeclaration', 'name': 'log_raw_metric', 'range': [52, 176], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [57, 69], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [59, 69], 'children': [{'type': 'Type', 'name': 'str', 'range': [61, 61], 'children': []}, {'type': 'Dependency', 'name': 'fastapi.Depends', 'range': [63, 68], 'children': [{'type': 'FunctionCall', 'name': 'get_user_id', 'range': [67, 67], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_name', 'range': [72, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [74, 90], 'children': [{'type': 'Type', 'name': 'str', 'range': [76, 76], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [78, 89], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [86, 88], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_value', 'range': [93, 111], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [95, 111], 'children': [{'type': 'Type', 'name': 'float', 'range': [97, 97], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [99, 110], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [107, 109], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'data_string', 'range': [114, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [116, 132], 'children': [{'type': 'Type', 'name': 'str', 'range': [118, 118], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [120, 131], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [128, 130], 'children': []}]}]}]}, {'type': 'FunctionBody', 'name': 'log_raw_metric', 'range': [135, 176], 'children': [{'type': 'Assignment', 'name': 'result', 'range': [138, 170], 'children': [{'type': 'AwaitExpression', 'name': 'await', 'range': [140, 140], 'children': [{'type': 'FunctionCall', 'name': 'backend.data.analytics.log_raw_metric', 'range': [141, 170], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [150, 152], 'children': []}, {'type': 'Argument', 'name': 'metric_name', 'range': [155, 157], 'children': []}, {'type': 'Argument', 'name': 'metric_value', 'range': [160, 162], 'children': []}, {'type': 'Argument', 'name': 'data_string', 'range': [165, 167], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [172, 176], 'children': [{'type': 'MemberExpression', 'name': 'result.id', 'range': [173, 175], 'children': []}]}]}]}]}
2025-01-08 10:28:33,876 - INFO - Starting Step 4: AST normalization
2025-01-08 10:28:40,469 - INFO - Step 5 result: {'type': 'Program', 'name': 'MainOrSomething', 'range': [5, 39], 'children': [{'type': 'ImportDeclaration', 'name': '', 'range': [5, 9], 'children': [{'type': 'FromImport', 'name': 'typing', 'range': [5, 9], 'children': [{'type': 'Import', 'name': 'Annotated', 'range': [7, 8], 'children': []}]}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [11, 13], 'children': [{'type': 'Import', 'name': 'fastapi', 'range': [11, 12], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [15, 21], 'children': [{'type': 'FromImport', 'name': 'backend.data.analytics', 'range': [15, 21], 'children': []}]}, {'type': 'ImportDeclaration', 'name': '', 'range': [22, 30], 'children': [{'type': 'FromImport', 'name': 'backend.server.utils', 'range': [22, 30], 'children': [{'type': 'Import', 'name': 'get_user_id', 'range': [28, 29], 'children': []}]}]}, {'type': 'VariableDeclaration', 'name': 'router', 'range': [32, 39], 'children': [{'type': 'AssignmentExpression', 'name': '=', 'range': [33, 34], 'children': [{'type': 'CallExpression', 'name': 'APIRouter', 'range': [34, 38], 'children': [{'type': 'MemberExpression', 'name': '.', 'range': [35, 36], 'children': [{'type': 'Identifier', 'name': 'fastapi', 'range': [34, 35], 'children': []}, {'type': 'Identifier', 'name': 'APIRouter', 'range': [36, 37], 'children': []}]}]}]}]}]}
2025-01-08 10:28:40,469 - INFO - Completed main AST analysis flow
2025-01-08 10:28:40,469 - INFO - Successfully processed chunk
2025-01-08 10:28:42,932 - INFO - Step 5 result: {'type': 'Program', 'name': 'log_raw_analytics', 'range': [177, 318], 'children': [{'type': 'Decorator', 'name': '@router.post', 'range': [177, 183], 'children': [{'type': 'Argument', 'name': '"/log_raw_analytics"', 'range': [182, 182], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'log_raw_analytics', 'range': [185, 318], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [190, 202], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Depends(get_user_id)]', 'range': [192, 202], 'children': []}]}, {'type': 'Parameter', 'name': 'type', 'range': [205, 223], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True)]', 'range': [207, 223], 'children': []}]}, {'type': 'Parameter', 'name': 'data', 'range': [226, 252], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[dict, fastapi.Body(..., embed=True, description="The data to log")]', 'range': [228, 252], 'children': []}]}, {'type': 'Parameter', 'name': 'data_index', 'range': [255, 286], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated[str, fastapi.Body(..., embed=True, description="Indexable field for any count based analytical measures like page order clicking, tutorial step completion, etc.")]', 'range': [257, 286], 'children': []}]}, {'type': 'BlockStatement', 'name': '', 'range': [289, 318], 'children': [{'type': 'AssignmentExpression', 'name': 'result = await backend.data.analytics.log_raw_analytics(user_id, type, data, data_index)', 'range': [292, 312], 'children': []}, {'type': 'ReturnStatement', 'name': 'return result.id', 'range': [314, 318], 'children': []}]}]}]}
2025-01-08 10:28:42,932 - INFO - Completed main AST analysis flow
2025-01-08 10:28:42,932 - INFO - Successfully processed chunk
2025-01-08 10:28:57,923 - INFO - Step 4 result: {'type': 'Program', 'name': 'log_raw_metric', 'range': [42, 176], 'children': [{'type': 'RouterDeclaration', 'name': 'router.post', 'range': [42, 50], 'children': [{'type': 'Path', 'name': 'path', 'range': [47, 49], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'log_raw_metric', 'range': [52, 176], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [57, 69], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [59, 69], 'children': [{'type': 'Type', 'name': 'str', 'range': [61, 61], 'children': []}, {'type': 'Dependency', 'name': 'fastapi.Depends', 'range': [63, 68], 'children': [{'type': 'CallExpression', 'name': 'get_user_id', 'range': [67, 67], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_name', 'range': [72, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [74, 90], 'children': [{'type': 'Type', 'name': 'str', 'range': [76, 76], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [78, 89], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [86, 88], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_value', 'range': [93, 111], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [95, 111], 'children': [{'type': 'Type', 'name': 'float', 'range': [97, 97], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [99, 110], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [107, 109], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'data_string', 'range': [114, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [116, 132], 'children': [{'type': 'Type', 'name': 'str', 'range': [118, 118], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [120, 131], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [128, 130], 'children': []}]}]}]}, {'type': 'FunctionBody', 'name': 'log_raw_metric', 'range': [135, 176], 'children': [{'type': 'Assignment', 'name': 'result', 'range': [138, 170], 'children': [{'type': 'AwaitExpression', 'name': 'await', 'range': [140, 140], 'children': [{'type': 'CallExpression', 'name': 'backend.data.analytics.log_raw_metric', 'range': [141, 170], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [150, 152], 'children': []}, {'type': 'Argument', 'name': 'metric_name', 'range': [155, 157], 'children': []}, {'type': 'Argument', 'name': 'metric_value', 'range': [160, 162], 'children': []}, {'type': 'Argument', 'name': 'data_string', 'range': [165, 167], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [172, 176], 'children': [{'type': 'MemberExpression', 'name': 'result.id', 'range': [173, 175], 'children': []}]}]}]}]}
2025-01-08 10:28:57,923 - INFO - Starting Step 5: Final AST combination
2025-01-08 10:29:20,174 - INFO - Step 5 result: {'type': 'Program', 'name': 'log_raw_metric', 'range': [42, 176], 'children': [{'type': 'RouterDeclaration', 'name': 'router.post', 'range': [42, 50], 'children': [{'type': 'Path', 'name': 'path', 'range': [47, 49], 'children': []}]}, {'type': 'FunctionDecl', 'name': 'log_raw_metric', 'range': [52, 176], 'children': [{'type': 'Parameter', 'name': 'user_id', 'range': [57, 69], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [59, 69], 'children': [{'type': 'Type', 'name': 'str', 'range': [61, 61], 'children': []}, {'type': 'Dependency', 'name': 'fastapi.Depends', 'range': [63, 68], 'children': [{'type': 'CallExpression', 'name': 'get_user_id', 'range': [67, 67], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_name', 'range': [72, 90], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [74, 90], 'children': [{'type': 'Type', 'name': 'str', 'range': [76, 76], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [78, 89], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [86, 88], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'metric_value', 'range': [93, 111], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [95, 111], 'children': [{'type': 'Type', 'name': 'float', 'range': [97, 97], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [99, 110], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [107, 109], 'children': []}]}]}]}, {'type': 'Parameter', 'name': 'data_string', 'range': [114, 132], 'children': [{'type': 'TypeAnnotation', 'name': 'Annotated', 'range': [116, 132], 'children': [{'type': 'Type', 'name': 'str', 'range': [118, 118], 'children': []}, {'type': 'Body', 'name': 'fastapi.Body', 'range': [120, 131], 'children': [{'type': 'Embed', 'name': 'embed', 'range': [128, 130], 'children': []}]}]}]}, {'type': 'FunctionBody', 'name': 'log_raw_metric', 'range': [135, 176], 'children': [{'type': 'Assignment', 'name': 'result', 'range': [138, 170], 'children': [{'type': 'AwaitExpression', 'name': 'await', 'range': [140, 140], 'children': [{'type': 'CallExpression', 'name': 'backend.data.analytics.log_raw_metric', 'range': [141, 170], 'children': [{'type': 'Argument', 'name': 'user_id', 'range': [150, 152], 'children': []}, {'type': 'Argument', 'name': 'metric_name', 'range': [155, 157], 'children': []}, {'type': 'Argument', 'name': 'metric_value', 'range': [160, 162], 'children': []}, {'type': 'Argument', 'name': 'data_string', 'range': [165, 167], 'children': []}]}]}]}, {'type': 'ReturnStatement', 'name': 'return', 'range': [172, 176], 'children': [{'type': 'MemberExpression', 'name': 'result.id', 'range': [173, 175], 'children': []}]}]}]}]}
2025-01-08 10:29:20,174 - INFO - Completed main AST analysis flow
2025-01-08 10:29:20,176 - INFO - Successfully processed chunk
2025-01-08 10:29:20,195 - INFO - Starting code generation from AST
2025-01-08 10:29:29,333 - INFO - Successfully generated code from AST
2025-01-08 10:29:29,334 - INFO - Starting static code similarity comparison
2025-01-08 10:29:29,337 - INFO - Static similarity result: {'final_score': 93.95, 'length_similarity': 94.79, 'token_similarity': 84.48, 'structure_similarity': 97.56, 'function_similarity': 100, 'complexity_similarity': 100.0, 'variable_similarity': 100}
