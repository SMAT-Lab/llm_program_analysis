{
    "type": "Program",
    "name": "Global",
    "range": [
        49,
        475
    ],
    "children": [
        {
            "type": "EnumDeclaration",
            "name": "HttpMethod",
            "range": [
                49,
                84
            ],
            "children": [
                {
                    "type": "EnumMember",
                    "name": "GET",
                    "range": [
                        56,
                        58
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"GET\"",
                            "range": [
                                58,
                                58
                            ],
                            "content": "\"GET\""
                        }
                    ],
                    "content": "GET=\"GET\""
                },
                {
                    "type": "EnumMember",
                    "name": "POST",
                    "range": [
                        60,
                        62
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"POST\"",
                            "range": [
                                62,
                                62
                            ],
                            "content": "\"POST\""
                        }
                    ],
                    "content": "POST=\"POST\""
                },
                {
                    "type": "EnumMember",
                    "name": "PUT",
                    "range": [
                        64,
                        66
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"PUT\"",
                            "range": [
                                66,
                                66
                            ],
                            "content": "\"PUT\""
                        }
                    ],
                    "content": "PUT=\"PUT\""
                },
                {
                    "type": "EnumMember",
                    "name": "DELETE",
                    "range": [
                        68,
                        70
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"DELETE\"",
                            "range": [
                                70,
                                70
                            ],
                            "content": "\"DELETE\""
                        }
                    ],
                    "content": "DELETE=\"DELETE\""
                },
                {
                    "type": "EnumMember",
                    "name": "PATCH",
                    "range": [
                        72,
                        74
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"PATCH\"",
                            "range": [
                                74,
                                74
                            ],
                            "content": "\"PATCH\""
                        }
                    ],
                    "content": "PATCH=\"PATCH\""
                },
                {
                    "type": "EnumMember",
                    "name": "OPTIONS",
                    "range": [
                        76,
                        78
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"OPTIONS\"",
                            "range": [
                                78,
                                78
                            ],
                            "content": "\"OPTIONS\""
                        }
                    ],
                    "content": "OPTIONS=\"OPTIONS\""
                },
                {
                    "type": "EnumMember",
                    "name": "HEAD",
                    "range": [
                        80,
                        82
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"HEAD\"",
                            "range": [
                                82,
                                82
                            ],
                            "content": "\"HEAD\""
                        }
                    ],
                    "content": "HEAD=\"HEAD\""
                }
            ],
            "content": "class HttpMethod(Enum):\nGET=\"GET\"\nPOST=\"POST\"\nPUT=\"PUT\"\nDELETE=\"DELETE\"\nPATCH=\"PATCH\"\nOPTIONS=\"OPTIONS\"\nHEAD=\"HEAD\"\n\n"
        },
        {
            "type": "ClassDecl",
            "name": "SendWebRequestBlock",
            "range": [
                85,
                187
            ],
            "children": [
                {
                    "type": "ClassDecl",
                    "name": "Input",
                    "range": [
                        92,
                        187
                    ],
                    "children": [
                        {
                            "type": "FieldDecl",
                            "name": "url",
                            "range": [
                                99,
                                116
                            ],
                            "children": [],
                            "content": "\nurl:str=SchemaField(\ndescription=\"The URL to send the request to\",\nplaceholder=\"https://api.example.com\",\n"
                        },
                        {
                            "type": "FieldDecl",
                            "name": "method",
                            "range": [
                                118,
                                137
                            ],
                            "children": [],
                            "content": "\nmethod:HttpMethod=SchemaField(\ndescription=\"The HTTP method to use for the request\",\ndefault=HttpMethod.POST,\n"
                        },
                        {
                            "type": "FieldDecl",
                            "name": "headers",
                            "range": [
                                139,
                                162
                            ],
                            "children": [],
                            "content": "\nheaders:dict[str,str]=SchemaField(\ndescription=\"The headers to include in the request\",\ndefault={},\n"
                        },
                        {
                            "type": "FieldDecl",
                            "name": "json_format",
                            "range": [
                                164,
                                186
                            ],
                            "children": [],
                            "content": "\njson_format:bool=SchemaField(\ntitle=\"JSON format\",\ndescription=\"Whether to send and receive body as JSON\",\ndefault=True,\n"
                        },
                        {
                            "type": "FieldDecl",
                            "name": "body",
                            "range": [
                                188,
                                205
                            ],
                            "children": [],
                            "content": "\nbody:Any=SchemaField(\ndescription=\"The body of the request\",\ndefault=None,\n"
                        }
                    ],
                    "content": "\nclass Input(BlockSchema):\nurl:str=SchemaField(\ndescription=\"The URL to send the request to\",\nplaceholder=\"https://api.example.com\",\n)\nmethod:HttpMethod=SchemaField(\ndescription=\"The HTTP method to use for the request\",\ndefault=HttpMethod.POST,\n)\nheaders:dict[str,str]=SchemaField(\ndescription=\"The headers to include in the request\",\ndefault={},\n)\njson_format:bool=SchemaField(\ntitle=\"JSON format\",\ndescription=\"Whether to send and receive body as JSON\",\ndefault=True,\n)"
                }
            ],
            "content": "\nclass SendWebRequestBlock(Block):\nclass Input(BlockSchema):\nurl:str=SchemaField(\ndescription=\"The URL to send the request to\",\nplaceholder=\"https://api.example.com\",\n)\nmethod:HttpMethod=SchemaField(\ndescription=\"The HTTP method to use for the request\",\ndefault=HttpMethod.POST,\n)\nheaders:dict[str,str]=SchemaField(\ndescription=\"The headers to include in the request\",\ndefault={},\n)\njson_format:bool=SchemaField(\ntitle=\"JSON format\",\ndescription=\"Whether to send and receive body as JSON\",\ndefault=True,\n)"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                208,
                247
            ],
            "children": [
                {
                    "type": "FieldDecl",
                    "name": "response",
                    "range": [
                        215,
                        224
                    ],
                    "children": [],
                    "content": "\nresponse:object=SchemaField(description=\"The response from the server\""
                },
                {
                    "type": "FieldDecl",
                    "name": "client_error",
                    "range": [
                        226,
                        235
                    ],
                    "children": [],
                    "content": "\nclient_error:object=SchemaField(description=\"The error on 4xx status codes\""
                },
                {
                    "type": "FieldDecl",
                    "name": "server_error",
                    "range": [
                        237,
                        246
                    ],
                    "children": [],
                    "content": "\nserver_error:object=SchemaField(description=\"The error on 5xx status codes\""
                }
            ],
            "content": "\nclass Output(BlockSchema):\nresponse:object=SchemaField(description=\"The response from the server\")\nclient_error:object=SchemaField(description=\"The error on 4xx status codes\")\nserver_error:object=SchemaField(description=\"The error on 5xx status codes\")"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                249,
                297
            ],
            "children": [
                {
                    "type": "SuperCall",
                    "name": "",
                    "range": [
                        256,
                        296
                    ],
                    "children": [],
                    "content": "\nsuper().__init__(\nid=\"6595ae1f-b924-42cb-9a41-551a0611c4b4\",\ndescription=\"This block makes an HTTP request to the given URL.\",\ncategories={BlockCategory.OUTPUT},\ninput_schema=SendWebRequestBlock.Input,\noutput_schema=SendWebRequestBlock.Output,\n"
                }
            ],
            "content": "\ndef __init__(self):\nsuper().__init__(\nid=\"6595ae1f-b924-42cb-9a41-551a0611c4b4\",\ndescription=\"This block makes an HTTP request to the given URL.\",\ncategories={BlockCategory.OUTPUT},\ninput_schema=SendWebRequestBlock.Input,\noutput_schema=SendWebRequestBlock.Output,\n)"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                299,
                475
            ],
            "children": [
                {
                    "type": "IfStatement",
                    "name": "",
                    "range": [
                        317,
                        340
                    ],
                    "children": [],
                    "content": "\nif isinstance(input_data.body,str):\ninput_data.body=json.loads(input_data.body)"
                },
                {
                    "type": "VariableDecl",
                    "name": "response",
                    "range": [
                        342,
                        396
                    ],
                    "children": [],
                    "content": "\nresponse=requests.request(\ninput_data.method.value,\ninput_data.url,\nheaders=input_data.headers,\njson=input_data.body if input_data.json_format else None,\ndata=input_data.body if not input_data.json_format else None,\n)"
                },
                {
                    "type": "VariableDecl",
                    "name": "result",
                    "range": [
                        397,
                        412
                    ],
                    "children": [],
                    "content": "\nresult=response.json()if input_data.json_format else response.text"
                },
                {
                    "type": "IfStatement",
                    "name": "",
                    "range": [
                        414,
                        430
                    ],
                    "children": [],
                    "content": "\nif response.status_code//100==2:\nyield \"response\",result"
                },
                {
                    "type": "IfStatement",
                    "name": "",
                    "range": [
                        431,
                        446
                    ],
                    "children": [],
                    "content": "\nelif response.status_code//100==4:\nyield \"client_error\","
                },
                {
                    "type": "IfStatement",
                    "name": "",
                    "range": [
                        447,
                        463
                    ],
                    "children": [],
                    "content": "result\nelif response.status_code//100==5:\nyield \"server_error\","
                },
                {
                    "type": "ThrowStatement",
                    "name": "",
                    "range": [
                        464,
                        474
                    ],
                    "children": [],
                    "content": "result\nelse:\nraise ValueError(f \"Unexpected status code: {response.status_code}\")"
                }
            ],
            "content": "\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nif isinstance(input_data.body,str):\ninput_data.body=json.loads(input_data.body)\n\nresponse=requests.request(\ninput_data.method.value,\ninput_data.url,\nheaders=input_data.headers,\njson=input_data.body if input_data.json_format else None,\ndata=input_data.body if not input_data.json_format else None,\n)\nresult=response.json()if input_data.json_format else response.text\n\nif response.status_code//100==2:\nyield \"response\",result\nelif response.status_code//100==4:\nyield \"client_error\",result\nelif response.status_code//100==5:\nyield \"server_error\",result\nelse:\nraise ValueError(f \"Unexpected status code: {response.status_code}\")\n"
        }
    ],
    "content": "class HttpMethod(Enum):\nGET=\"GET\"\nPOST=\"POST\"\nPUT=\"PUT\"\nDELETE=\"DELETE\"\nPATCH=\"PATCH\"\nOPTIONS=\"OPTIONS\"\nHEAD=\"HEAD\"\n\n\nclass SendWebRequestBlock(Block):\nclass Input(BlockSchema):\nurl:str=SchemaField(\ndescription=\"The URL to send the request to\",\nplaceholder=\"https://api.example.com\",\n)\nmethod:HttpMethod=SchemaField(\ndescription=\"The HTTP method to use for the request\",\ndefault=HttpMethod.POST,\n)\nheaders:dict[str,str]=SchemaField(\ndescription=\"The headers to include in the request\",\ndefault={},\n)\njson_format:bool=SchemaField(\ntitle=\"JSON format\",\ndescription=\"Whether to send and receive body as JSON\",\ndefault=True,\n)\nbody:Any=SchemaField(\ndescription=\"The body of the request\",\ndefault=None,\n)\n\nclass Output(BlockSchema):\nresponse:object=SchemaField(description=\"The response from the server\")\nclient_error:object=SchemaField(description=\"The error on 4xx status codes\")\nserver_error:object=SchemaField(description=\"The error on 5xx status codes\")\n\ndef __init__(self):\nsuper().__init__(\nid=\"6595ae1f-b924-42cb-9a41-551a0611c4b4\",\ndescription=\"This block makes an HTTP request to the given URL.\",\ncategories={BlockCategory.OUTPUT},\ninput_schema=SendWebRequestBlock.Input,\noutput_schema=SendWebRequestBlock.Output,\n)\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nif isinstance(input_data.body,str):\ninput_data.body=json.loads(input_data.body)\n\nresponse=requests.request(\ninput_data.method.value,\ninput_data.url,\nheaders=input_data.headers,\njson=input_data.body if input_data.json_format else None,\ndata=input_data.body if not input_data.json_format else None,\n)\nresult=response.json()if input_data.json_format else response.text\n\nif response.status_code//100==2:\nyield \"response\",result\nelif response.status_code//100==4:\nyield \"client_error\",result\nelif response.status_code//100==5:\nyield \"server_error\",result\nelse:\nraise ValueError(f \"Unexpected status code: {response.status_code}\")\n"
}