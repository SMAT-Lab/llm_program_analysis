{
    "type": "Program",
    "name": "Global",
    "range": [
        70,
        1012
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "GoogleSheetsReadBlock",
            "range": [
                70,
                76
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "Block",
                    "range": [
                        72,
                        74
                    ],
                    "children": [],
                    "content": "(Block)"
                }
            ],
            "content": "class GoogleSheetsReadBlock(Block):\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                77,
                83
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "BlockSchema",
                    "range": [
                        79,
                        81
                    ],
                    "children": [],
                    "content": "(BlockSchema)"
                },
                {
                    "type": "FieldDecl",
                    "name": "credentials",
                    "range": [
                        84,
                        95
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "GoogleCredentialsInput",
                            "range": [
                                86,
                                86
                            ],
                            "children": [],
                            "content": "GoogleCredentialsInput"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                87,
                                87
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "GoogleCredentialsField",
                                    "range": [
                                        88,
                                        95
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                89,
                                                95
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArrayLiteral",
                                                    "name": "",
                                                    "range": [
                                                        91,
                                                        93
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"https://www.googleapis.com/auth/spreadsheets.readonly\"",
                                                            "range": [
                                                                92,
                                                                92
                                                            ],
                                                            "children": [],
                                                            "content": "\"https://www.googleapis.com/auth/spreadsheets.readonly\""
                                                        }
                                                    ],
                                                    "content": "[\"https://www.googleapis.com/auth/spreadsheets.readonly\"]"
                                                }
                                            ],
                                            "content": "(\n[\"https://www.googleapis.com/auth/spreadsheets.readonly\"]\n)"
                                        }
                                    ],
                                    "content": "GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets.readonly\"]\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "credentials:GoogleCredentialsInput=GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets.readonly\"]\n)"
                },
                {
                    "type": "FieldDecl",
                    "name": "spreadsheet_id",
                    "range": [
                        97,
                        109
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                99,
                                99
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                100,
                                100
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        101,
                                        109
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                102,
                                                109
                                            ],
                                            "children": [
                                                {
                                                    "type": "KeywordArgument",
                                                    "name": "description",
                                                    "range": [
                                                        104,
                                                        106
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"The ID of the spreadsheet to read from\"",
                                                            "range": [
                                                                106,
                                                                106
                                                            ],
                                                            "children": [],
                                                            "content": "\"The ID of the spreadsheet to read from\""
                                                        }
                                                    ],
                                                    "content": "description=\"The ID of the spreadsheet to read from\""
                                                }
                                            ],
                                            "content": "(\ndescription=\"The ID of the spreadsheet to read from\",\n)"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"The ID of the spreadsheet to read from\",\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "spreadsheet_id:str=SchemaField(\ndescription=\"The ID of the spreadsheet to read from\",\n)"
                },
                {
                    "type": "FieldDecl",
                    "name": "range",
                    "range": [
                        111,
                        123
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                113,
                                113
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                114,
                                114
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        115,
                                        123
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                116,
                                                123
                                            ],
                                            "children": [
                                                {
                                                    "type": "KeywordArgument",
                                                    "name": "description",
                                                    "range": [
                                                        118,
                                                        120
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"The A1 notation of the range to read\"",
                                                            "range": [
                                                                120,
                                                                120
                                                            ],
                                                            "children": [],
                                                            "content": "\"The A1 notation of the range to read\""
                                                        }
                                                    ],
                                                    "content": "description=\"The A1 notation of the range to read\""
                                                }
                                            ],
                                            "content": "(\ndescription=\"The A1 notation of the range to read\",\n)"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"The A1 notation of the range to read\",\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "range:str=SchemaField(\ndescription=\"The A1 notation of the range to read\",\n)"
                }
            ],
            "content": "class Input(BlockSchema):\n"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                126,
                132
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "BlockSchema",
                    "range": [
                        128,
                        130
                    ],
                    "children": [],
                    "content": "(BlockSchema)"
                },
                {
                    "type": "FieldDecl",
                    "name": "result",
                    "range": [
                        133,
                        151
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                135,
                                135
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "list",
                                    "range": [
                                        137,
                                        137
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": "str",
                                            "range": [
                                                139,
                                                139
                                            ],
                                            "children": [],
                                            "content": "str"
                                        }
                                    ],
                                    "content": "list"
                                }
                            ],
                            "content": "list"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                142,
                                142
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        143,
                                        151
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                144,
                                                151
                                            ],
                                            "children": [
                                                {
                                                    "type": "KeywordArgument",
                                                    "name": "description",
                                                    "range": [
                                                        146,
                                                        148
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"The data read from the spreadsheet\"",
                                                            "range": [
                                                                148,
                                                                148
                                                            ],
                                                            "children": [],
                                                            "content": "\"The data read from the spreadsheet\""
                                                        }
                                                    ],
                                                    "content": "description=\"The data read from the spreadsheet\""
                                                }
                                            ],
                                            "content": "(\ndescription=\"The data read from the spreadsheet\",\n)"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"The data read from the spreadsheet\",\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "result:list[list[str]]=SchemaField(\ndescription=\"The data read from the spreadsheet\",\n)"
                },
                {
                    "type": "FieldDecl",
                    "name": "error",
                    "range": [
                        153,
                        165
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                155,
                                155
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                156,
                                156
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        157,
                                        165
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                158,
                                                165
                                            ],
                                            "children": [
                                                {
                                                    "type": "KeywordArgument",
                                                    "name": "description",
                                                    "range": [
                                                        160,
                                                        162
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"Error message if any\"",
                                                            "range": [
                                                                162,
                                                                162
                                                            ],
                                                            "children": [],
                                                            "content": "\"Error message if any\""
                                                        }
                                                    ],
                                                    "content": "description=\"Error message if any\""
                                                }
                                            ],
                                            "content": "(\ndescription=\"Error message if any\",\n)"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Error message if any\",\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "error:str=SchemaField(\ndescription=\"Error message if any\",\n)"
                }
            ],
            "content": "class Output(BlockSchema):\n"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                168,
                319
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        170,
                        172
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                171,
                                171
                            ],
                            "children": [],
                            "content": "self"
                        }
                    ],
                    "content": "(self)"
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        173,
                        319
                    ],
                    "children": [
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                175,
                                181
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "super",
                                    "range": [
                                        175,
                                        181
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                176,
                                                181
                                            ],
                                            "children": [],
                                            "content": "().__init__(\n"
                                        }
                                    ],
                                    "content": "super().__init__(\n"
                                }
                            ],
                            "content": "super().__init__(\n"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                182,
                                213
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        183,
                                        183
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "\"5724e902-3635-47e9-a108-aaa0263a4988\"",
                                            "range": [
                                                184,
                                                184
                                            ],
                                            "children": [],
                                            "content": "\"5724e902-3635-47e9-a108-aaa0263a4988\""
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "id=\"5724e902-3635-47e9-a108-aaa0263a4988\",\ndescription=\"This block reads data from a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsReadBlock.Input,\noutput_schema=GoogleSheetsReadBlock.Output,"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                187,
                                189
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        188,
                                        188
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "\"This block reads data from a Google Sheets spreadsheet.\"",
                                            "range": [
                                                189,
                                                189
                                            ],
                                            "children": [],
                                            "content": "\"This block reads data from a Google Sheets spreadsheet.\""
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "description=\"This block reads data from a Google Sheets spreadsheet.\""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                192,
                                198
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        193,
                                        193
                                    ],
                                    "children": [
                                        {
                                            "type": "ObjectLiteral",
                                            "name": "",
                                            "range": [
                                                194,
                                                198
                                            ],
                                            "children": [
                                                {
                                                    "type": "Property",
                                                    "name": "BlockCategory.DATA",
                                                    "range": [
                                                        195,
                                                        197
                                                    ],
                                                    "children": [],
                                                    "content": "BlockCategory.DATA"
                                                }
                                            ],
                                            "content": "{BlockCategory.DATA}"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "categories={BlockCategory.DATA}"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                201,
                                206
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        202,
                                        202
                                    ],
                                    "children": [
                                        {
                                            "type": "MemberExpression",
                                            "name": "GoogleSheetsReadBlock.Input",
                                            "range": [
                                                203,
                                                205
                                            ],
                                            "children": [],
                                            "content": "GoogleSheetsReadBlock.Input"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "input_schema=GoogleSheetsReadBlock.Input,"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                208,
                                212
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        209,
                                        209
                                    ],
                                    "children": [
                                        {
                                            "type": "MemberExpression",
                                            "name": "GoogleSheetsReadBlock.Output",
                                            "range": [
                                                210,
                                                212
                                            ],
                                            "children": [],
                                            "content": "GoogleSheetsReadBlock.Output"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "output_schema=GoogleSheetsReadBlock.Output"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                215,
                                219
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        216,
                                        216
                                    ],
                                    "children": [
                                        {
                                            "type": "UnaryExpression",
                                            "name": "not",
                                            "range": [
                                                217,
                                                217
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "GOOGLE_OAUTH_IS_CONFIGURED",
                                                    "range": [
                                                        218,
                                                        218
                                                    ],
                                                    "children": [],
                                                    "content": "GOOGLE_OAUTH_IS_CONFIGURED"
                                                }
                                            ],
                                            "content": "not"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "disabled=not GOOGLE_OAUTH_IS_CONFIGURED,"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                221,
                                240
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        222,
                                        222
                                    ],
                                    "children": [
                                        {
                                            "type": "ObjectLiteral",
                                            "name": "",
                                            "range": [
                                                223,
                                                240
                                            ],
                                            "children": [
                                                {
                                                    "type": "Property",
                                                    "name": "spreadsheet_id",
                                                    "range": [
                                                        225,
                                                        227
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\"",
                                                            "range": [
                                                                227,
                                                                227
                                                            ],
                                                            "children": [],
                                                            "content": "\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\""
                                                        }
                                                    ],
                                                    "content": "\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\""
                                                },
                                                {
                                                    "type": "Property",
                                                    "name": "range",
                                                    "range": [
                                                        230,
                                                        232
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"Sheet1!A1:B2\"",
                                                            "range": [
                                                                232,
                                                                232
                                                            ],
                                                            "children": [],
                                                            "content": "\"Sheet1!A1:B2\""
                                                        }
                                                    ],
                                                    "content": "\"range\":\"Sheet1!A1:B2\""
                                                },
                                                {
                                                    "type": "Property",
                                                    "name": "credentials",
                                                    "range": [
                                                        235,
                                                        237
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "TEST_CREDENTIALS_INPUT",
                                                            "range": [
                                                                237,
                                                                237
                                                            ],
                                                            "children": [],
                                                            "content": "TEST_CREDENTIALS_INPUT"
                                                        }
                                                    ],
                                                    "content": "\"credentials\":TEST_CREDENTIALS_INPUT"
                                                }
                                            ],
                                            "content": "{\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"credentials\":TEST_CREDENTIALS_INPUT,\n}"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "test_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"credentials\":TEST_CREDENTIALS_INPUT,\n}"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                243,
                                245
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        244,
                                        244
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "TEST_CREDENTIALS",
                                            "range": [
                                                245,
                                                245
                                            ],
                                            "children": [],
                                            "content": "TEST_CREDENTIALS"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "test_credentials=TEST_CREDENTIALS"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                248,
                                279
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        249,
                                        249
                                    ],
                                    "children": [
                                        {
                                            "type": "ArrayLiteral",
                                            "name": "",
                                            "range": [
                                                250,
                                                279
                                            ],
                                            "children": [
                                                {
                                                    "type": "TupleLiteral",
                                                    "name": "",
                                                    "range": [
                                                        252,
                                                        276
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"result\"",
                                                            "range": [
                                                                254,
                                                                254
                                                            ],
                                                            "children": [],
                                                            "content": "\"result\""
                                                        },
                                                        {
                                                            "type": "ArrayLiteral",
                                                            "name": "",
                                                            "range": [
                                                                257,
                                                                273
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ArrayLiteral",
                                                                    "name": "",
                                                                    "range": [
                                                                        259,
                                                                        263
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"Name\"",
                                                                            "range": [
                                                                                260,
                                                                                260
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Name\""
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"Score\"",
                                                                            "range": [
                                                                                262,
                                                                                262
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Score\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"Name\",\"Score\"]"
                                                                },
                                                                {
                                                                    "type": "ArrayLiteral",
                                                                    "name": "",
                                                                    "range": [
                                                                        266,
                                                                        270
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"Alice\"",
                                                                            "range": [
                                                                                267,
                                                                                267
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Alice\""
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"85\"",
                                                                            "range": [
                                                                                269,
                                                                                269
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"85\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"Alice\",\"85\"]"
                                                                }
                                                            ],
                                                            "content": "[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n]"
                                                        }
                                                    ],
                                                    "content": "(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n)"
                                                }
                                            ],
                                            "content": "[\n(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n),\n]"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "test_output=[\n(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n),\n]"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                282,
                                315
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        283,
                                        283
                                    ],
                                    "children": [
                                        {
                                            "type": "ObjectLiteral",
                                            "name": "",
                                            "range": [
                                                284,
                                                315
                                            ],
                                            "children": [
                                                {
                                                    "type": "Property",
                                                    "name": "_read_sheet",
                                                    "range": [
                                                        286,
                                                        288
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "LambdaExpression",
                                                            "name": "",
                                                            "range": [
                                                                288,
                                                                296
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ParameterList",
                                                                    "name": "",
                                                                    "range": [
                                                                        289,
                                                                        291
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Parameter",
                                                                            "name": "args",
                                                                            "range": [
                                                                                290,
                                                                                290
                                                                            ],
                                                                            "children": [],
                                                                            "content": "args"
                                                                        }
                                                                    ],
                                                                    "content": "*args,"
                                                                },
                                                                {
                                                                    "type": "ParameterList",
                                                                    "name": "",
                                                                    "range": [
                                                                        292,
                                                                        294
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Parameter",
                                                                            "name": "kwargs",
                                                                            "range": [
                                                                                293,
                                                                                293
                                                                            ],
                                                                            "children": [],
                                                                            "content": "*"
                                                                        }
                                                                    ],
                                                                    "content": "**kwargs"
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "name": "",
                                                                    "range": [
                                                                        295,
                                                                        296
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ReturnStatement",
                                                                            "name": "",
                                                                            "range": [
                                                                                296,
                                                                                296
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "ArrayLiteral",
                                                                                    "name": "",
                                                                                    "range": [
                                                                                        297,
                                                                                        312
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "ArrayLiteral",
                                                                                            "name": "",
                                                                                            "range": [
                                                                                                298,
                                                                                                302
                                                                                            ],
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "Literal",
                                                                                                    "name": "\"Name\"",
                                                                                                    "range": [
                                                                                                        299,
                                                                                                        299
                                                                                                    ],
                                                                                                    "children": [],
                                                                                                    "content": "\"Name\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "Literal",
                                                                                                    "name": "\"Score\"",
                                                                                                    "range": [
                                                                                                        301,
                                                                                                        301
                                                                                                    ],
                                                                                                    "children": [],
                                                                                                    "content": "\"Score\""
                                                                                                }
                                                                                            ],
                                                                                            "content": "[\"Name\",\"Score\"]"
                                                                                        },
                                                                                        {
                                                                                            "type": "ArrayLiteral",
                                                                                            "name": "",
                                                                                            "range": [
                                                                                                305,
                                                                                                309
                                                                                            ],
                                                                                            "children": [
                                                                                                {
                                                                                                    "type": "Literal",
                                                                                                    "name": "\"Alice\"",
                                                                                                    "range": [
                                                                                                        306,
                                                                                                        306
                                                                                                    ],
                                                                                                    "children": [],
                                                                                                    "content": "\"Alice\""
                                                                                                },
                                                                                                {
                                                                                                    "type": "Literal",
                                                                                                    "name": "\"85\"",
                                                                                                    "range": [
                                                                                                        308,
                                                                                                        308
                                                                                                    ],
                                                                                                    "children": [],
                                                                                                    "content": "\"85\""
                                                                                                }
                                                                                            ],
                                                                                            "content": "[\"Alice\",\"85\"]"
                                                                                        }
                                                                                    ],
                                                                                    "content": "\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n]"
                                                                                }
                                                                            ],
                                                                            "content": "["
                                                                        }
                                                                    ],
                                                                    "content": ":["
                                                                }
                                                            ],
                                                            "content": "lambda*args,**kwargs:["
                                                        }
                                                    ],
                                                    "content": "\"_read_sheet\":lambda"
                                                }
                                            ],
                                            "content": "{\n\"_read_sheet\":lambda*args,**kwargs:[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n}"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "test_mock={\n\"_read_sheet\":lambda*args,**kwargs:[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n}"
                        }
                    ],
                    "content": ":\nsuper().__init__(\nid=\"5724e902-3635-47e9-a108-aaa0263a4988\",\ndescription=\"This block reads data from a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsReadBlock.Input,\noutput_schema=GoogleSheetsReadBlock.Output,\ndisabled=not GOOGLE_OAUTH_IS_CONFIGURED,\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"credentials\":TEST_CREDENTIALS_INPUT,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n),\n],\ntest_mock={\n\"_read_sheet\":lambda*args,**kwargs:[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n},\n)\n"
                }
            ],
            "content": "def __init__(self):\nsuper().__init__(\nid=\"5724e902-3635-47e9-a108-aaa0263a4988\",\ndescription=\"This block reads data from a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsReadBlock.Input,\noutput_schema=GoogleSheetsReadBlock.Output,\ndisabled=not GOOGLE_OAUTH_IS_CONFIGURED,\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"credentials\":TEST_CREDENTIALS_INPUT,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n),\n],\ntest_mock={\n\"_read_sheet\":lambda*args,**kwargs:[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n},\n)\n"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                321,
                382
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        323,
                        340
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                325,
                                325
                            ],
                            "children": [],
                            "content": "self"
                        },
                        {
                            "type": "Parameter",
                            "name": "input_data",
                            "range": [
                                327,
                                329
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "Input",
                                    "range": [
                                        329,
                                        329
                                    ],
                                    "children": [],
                                    "content": "Input"
                                }
                            ],
                            "content": "input_data:Input"
                        },
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                333,
                                335
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "GoogleCredentials",
                                    "range": [
                                        335,
                                        335
                                    ],
                                    "children": [],
                                    "content": "GoogleCredentials"
                                }
                            ],
                            "content": "credentials:GoogleCredentials"
                        },
                        {
                            "type": "Parameter",
                            "name": "kwargs",
                            "range": [
                                339,
                                339
                            ],
                            "children": [],
                            "content": "kwargs"
                        }
                    ],
                    "content": "(\nself,input_data:Input,*,credentials:GoogleCredentials,**kwargs\n"
                },
                {
                    "type": "ReturnTypeAnnotation",
                    "name": "BlockOutput",
                    "range": [
                        342,
                        344
                    ],
                    "children": [],
                    "content": "->BlockOutput"
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        345,
                        382
                    ],
                    "children": [
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                347,
                                358
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        348,
                                        348
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "self._build_service",
                                            "range": [
                                                349,
                                                358
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArgumentList",
                                                    "name": "",
                                                    "range": [
                                                        352,
                                                        358
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "credentials",
                                                            "range": [
                                                                353,
                                                                353
                                                            ],
                                                            "children": [],
                                                            "content": "credentials"
                                                        },
                                                        {
                                                            "type": "SpreadElement",
                                                            "name": "",
                                                            "range": [
                                                                355,
                                                                357
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "kwargs",
                                                                    "range": [
                                                                        356,
                                                                        356
                                                                    ],
                                                                    "children": [],
                                                                    "content": "*"
                                                                }
                                                            ],
                                                            "content": "**kwargs"
                                                        }
                                                    ],
                                                    "content": "(credentials,**kwargs)"
                                                }
                                            ],
                                            "content": "self._build_service(credentials,**kwargs)"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "service=self._build_service(credentials,**kwargs)"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                360,
                                375
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        361,
                                        361
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "self._read_sheet",
                                            "range": [
                                                362,
                                                375
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArgumentList",
                                                    "name": "",
                                                    "range": [
                                                        365,
                                                        375
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "service",
                                                            "range": [
                                                                366,
                                                                366
                                                            ],
                                                            "children": [],
                                                            "content": "service"
                                                        },
                                                        {
                                                            "type": "MemberExpression",
                                                            "name": "input_data.spreadsheet_id",
                                                            "range": [
                                                                369,
                                                                370
                                                            ],
                                                            "children": [],
                                                            "content": ".spreadsheet_id"
                                                        },
                                                        {
                                                            "type": "MemberExpression",
                                                            "name": "input_data.range",
                                                            "range": [
                                                                373,
                                                                374
                                                            ],
                                                            "children": [],
                                                            "content": ".range"
                                                        }
                                                    ],
                                                    "content": "(service,input_data.spreadsheet_id,input_data.range)"
                                                }
                                            ],
                                            "content": "self._read_sheet(service,input_data.spreadsheet_id,input_data.range)"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "data=self._read_sheet(service,input_data.spreadsheet_id,input_data.range)"
                        },
                        {
                            "type": "YieldStatement",
                            "name": "",
                            "range": [
                                377,
                                381
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"result\"",
                                    "range": [
                                        378,
                                        378
                                    ],
                                    "children": [],
                                    "content": "\"result\""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "data",
                                    "range": [
                                        380,
                                        380
                                    ],
                                    "children": [],
                                    "content": "data"
                                }
                            ],
                            "content": "yield \"result\",data\n"
                        }
                    ],
                    "content": ":\nservice=self._build_service(credentials,**kwargs)\ndata=self._read_sheet(service,input_data.spreadsheet_id,input_data.range)\nyield \"result\",data\n\n"
                }
            ],
            "content": "def run(\nself,input_data:Input,*,credentials:GoogleCredentials,**kwargs\n)->BlockOutput:\nservice=self._build_service(credentials,**kwargs)\ndata=self._read_sheet(service,input_data.spreadsheet_id,input_data.range)\nyield \"result\",data\n\n"
        },
        {
            "type": "FunctionDecl",
            "name": "_build_service",
            "range": [
                386,
                496
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        388,
                        396
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                389,
                                391
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "GoogleCredentials",
                                    "range": [
                                        391,
                                        391
                                    ],
                                    "children": [],
                                    "content": "GoogleCredentials"
                                }
                            ],
                            "content": "credentials:GoogleCredentials"
                        },
                        {
                            "type": "Parameter",
                            "name": "kwargs",
                            "range": [
                                395,
                                395
                            ],
                            "children": [],
                            "content": "kwargs"
                        }
                    ],
                    "content": "(credentials:GoogleCredentials,**kwargs)"
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        397,
                        496
                    ],
                    "children": [
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                399,
                                482
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        400,
                                        400
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "Credentials",
                                            "range": [
                                                401,
                                                482
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArgumentList",
                                                    "name": "",
                                                    "range": [
                                                        402,
                                                        482
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "token",
                                                            "range": [
                                                                404,
                                                                424
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ConditionalExpression",
                                                                    "name": "",
                                                                    "range": [
                                                                        406,
                                                                        423
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "name": "credentials.access_token.get_secret_value",
                                                                            "range": [
                                                                                408,
                                                                                414
                                                                            ],
                                                                            "children": [],
                                                                            "content": "credentials.access_token.get_secret_value()"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "None",
                                                                            "range": [
                                                                                422,
                                                                                422
                                                                            ],
                                                                            "children": [],
                                                                            "content": "None"
                                                                        }
                                                                    ],
                                                                    "content": "(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n"
                                                                }
                                                            ],
                                                            "content": "token=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n)"
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "refresh_token",
                                                            "range": [
                                                                427,
                                                                447
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ConditionalExpression",
                                                                    "name": "",
                                                                    "range": [
                                                                        429,
                                                                        446
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "name": "credentials.refresh_token.get_secret_value",
                                                                            "range": [
                                                                                431,
                                                                                437
                                                                            ],
                                                                            "children": [],
                                                                            "content": "credentials.refresh_token.get_secret_value()"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "None",
                                                                            "range": [
                                                                                445,
                                                                                445
                                                                            ],
                                                                            "children": [],
                                                                            "content": "None"
                                                                        }
                                                                    ],
                                                                    "content": "(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n"
                                                                }
                                                            ],
                                                            "content": "refresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n)"
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "token_uri",
                                                            "range": [
                                                                450,
                                                                452
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Literal",
                                                                    "name": "\"https://oauth2.googleapis.com/token\"",
                                                                    "range": [
                                                                        452,
                                                                        452
                                                                    ],
                                                                    "children": [],
                                                                    "content": "\"https://oauth2.googleapis.com/token\""
                                                                }
                                                            ],
                                                            "content": "token_uri=\"https://oauth2.googleapis.com/token\""
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "client_id",
                                                            "range": [
                                                                455,
                                                                462
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "kwargs.get",
                                                                    "range": [
                                                                        459,
                                                                        462
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ArgumentList",
                                                                            "name": "",
                                                                            "range": [
                                                                                460,
                                                                                462
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Literal",
                                                                                    "name": "\"client_id\"",
                                                                                    "range": [
                                                                                        461,
                                                                                        461
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "\"client_id\""
                                                                                }
                                                                            ],
                                                                            "content": "(\"client_id\")"
                                                                        }
                                                                    ],
                                                                    "content": "get(\"client_id\")"
                                                                }
                                                            ],
                                                            "content": "client_id=kwargs.get(\"client_id\")"
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "client_secret",
                                                            "range": [
                                                                465,
                                                                472
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "kwargs.get",
                                                                    "range": [
                                                                        469,
                                                                        472
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ArgumentList",
                                                                            "name": "",
                                                                            "range": [
                                                                                470,
                                                                                472
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Literal",
                                                                                    "name": "\"client_secret\"",
                                                                                    "range": [
                                                                                        471,
                                                                                        471
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "\"client_secret\""
                                                                                }
                                                                            ],
                                                                            "content": "(\"client_secret\")"
                                                                        }
                                                                    ],
                                                                    "content": "get(\"client_secret\")"
                                                                }
                                                            ],
                                                            "content": "client_secret=kwargs.get(\"client_secret\")"
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "scopes",
                                                            "range": [
                                                                475,
                                                                480
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "credentials.scopes",
                                                                    "range": [
                                                                        477,
                                                                        479
                                                                    ],
                                                                    "children": [],
                                                                    "content": "credentials.scopes"
                                                                }
                                                            ],
                                                            "content": "scopes=credentials.scopes,"
                                                        }
                                                    ],
                                                    "content": "(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)"
                                                }
                                            ],
                                            "content": "Credentials(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "creds=Credentials(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)"
                        },
                        {
                            "type": "ReturnStatement",
                            "name": "",
                            "range": [
                                484,
                                495
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "build",
                                    "range": [
                                        485,
                                        495
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                486,
                                                495
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"sheets\"",
                                                    "range": [
                                                        487,
                                                        487
                                                    ],
                                                    "children": [],
                                                    "content": "\"sheets\""
                                                },
                                                {
                                                    "type": "Literal",
                                                    "name": "\"v4\"",
                                                    "range": [
                                                        489,
                                                        489
                                                    ],
                                                    "children": [],
                                                    "content": "\"v4\""
                                                },
                                                {
                                                    "type": "KeywordArgument",
                                                    "name": "credentials",
                                                    "range": [
                                                        491,
                                                        493
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "creds",
                                                            "range": [
                                                                493,
                                                                493
                                                            ],
                                                            "children": [],
                                                            "content": "creds"
                                                        }
                                                    ],
                                                    "content": "credentials=creds"
                                                }
                                            ],
                                            "content": "(\"sheets\",\"v4\",credentials=creds)\n"
                                        }
                                    ],
                                    "content": "build(\"sheets\",\"v4\",credentials=creds)\n"
                                }
                            ],
                            "content": "return build(\"sheets\",\"v4\",credentials=creds)\n"
                        }
                    ],
                    "content": ":\ncreds=Credentials(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)\nreturn build(\"sheets\",\"v4\",credentials=creds)\n\n"
                }
            ],
            "content": "def _build_service(credentials:GoogleCredentials,**kwargs):\ncreds=Credentials(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)\nreturn build(\"sheets\",\"v4\",credentials=creds)\n\n"
        },
        {
            "type": "FunctionDecl",
            "name": "_read_sheet",
            "range": [
                497,
                565
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        499,
                        511
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                500,
                                500
                            ],
                            "children": [],
                            "content": "self"
                        },
                        {
                            "type": "Parameter",
                            "name": "service",
                            "range": [
                                502,
                                502
                            ],
                            "children": [],
                            "content": "service"
                        },
                        {
                            "type": "Parameter",
                            "name": "spreadsheet_id",
                            "range": [
                                504,
                                506
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "str",
                                    "range": [
                                        506,
                                        506
                                    ],
                                    "children": [],
                                    "content": "str"
                                }
                            ],
                            "content": "spreadsheet_id:str"
                        },
                        {
                            "type": "Parameter",
                            "name": "range",
                            "range": [
                                508,
                                510
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "str",
                                    "range": [
                                        510,
                                        510
                                    ],
                                    "children": [],
                                    "content": "str"
                                }
                            ],
                            "content": "range:str"
                        }
                    ],
                    "content": "(self,service,spreadsheet_id:str,range:str)"
                },
                {
                    "type": "ReturnTypeAnnotation",
                    "name": "list",
                    "range": [
                        512,
                        520
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                514,
                                516
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "name": "str",
                                    "range": [
                                        518,
                                        518
                                    ],
                                    "children": [],
                                    "content": "str"
                                }
                            ],
                            "content": "list[list"
                        }
                    ],
                    "content": "->list[list[str]]"
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        521,
                        565
                    ],
                    "children": [
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                523,
                                530
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        524,
                                        524
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "service.spreadsheets",
                                            "range": [
                                                525,
                                                530
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArgumentList",
                                                    "name": "",
                                                    "range": [
                                                        528,
                                                        530
                                                    ],
                                                    "children": [],
                                                    "content": "()\n"
                                                }
                                            ],
                                            "content": "service.spreadsheets()\n"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "sheet=service.spreadsheets()\n"
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                531,
                                553
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "=",
                                    "range": [
                                        532,
                                        532
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "sheet.values.get",
                                            "range": [
                                                533,
                                                553
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArgumentList",
                                                    "name": "",
                                                    "range": [
                                                        536,
                                                        553
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "spreadsheetId",
                                                            "range": [
                                                                541,
                                                                543
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "spreadsheet_id",
                                                                    "range": [
                                                                        543,
                                                                        543
                                                                    ],
                                                                    "children": [],
                                                                    "content": "spreadsheet_id"
                                                                }
                                                            ],
                                                            "content": "spreadsheetId=spreadsheet_id"
                                                        },
                                                        {
                                                            "type": "KeywordArgument",
                                                            "name": "range",
                                                            "range": [
                                                                545,
                                                                547
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "range",
                                                                    "range": [
                                                                        547,
                                                                        547
                                                                    ],
                                                                    "children": [],
                                                                    "content": "range"
                                                                }
                                                            ],
                                                            "content": "range=range"
                                                        }
                                                    ],
                                                    "content": "().get(spreadsheetId=spreadsheet_id,range=range).execute()\n"
                                                }
                                            ],
                                            "content": "sheet.values().get(spreadsheetId=spreadsheet_id,range=range).execute()\n"
                                        }
                                    ],
                                    "content": "="
                                }
                            ],
                            "content": "result=sheet.values().get(spreadsheetId=spreadsheet_id,range=range).execute()\n"
                        },
                        {
                            "type": "ReturnStatement",
                            "name": "",
                            "range": [
                                554,
                                564
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "result.get",
                                    "range": [
                                        555,
                                        564
                                    ],
                                    "children": [
                                        {
                                            "type": "ArgumentList",
                                            "name": "",
                                            "range": [
                                                558,
                                                564
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"values\"",
                                                    "range": [
                                                        559,
                                                        559
                                                    ],
                                                    "children": [],
                                                    "content": "\"values\""
                                                },
                                                {
                                                    "type": "ArrayLiteral",
                                                    "name": "",
                                                    "range": [
                                                        561,
                                                        563
                                                    ],
                                                    "children": [],
                                                    "content": "[])"
                                                }
                                            ],
                                            "content": "(\"values\",[])\n"
                                        }
                                    ],
                                    "content": "result.get(\"values\",[])\n"
                                }
                            ],
                            "content": "return result.get(\"values\",[])\n"
                        }
                    ],
                    "content": ":\nsheet=service.spreadsheets()\nresult=sheet.values().get(spreadsheetId=spreadsheet_id,range=range).execute()\nreturn result.get(\"values\",[])\n\n"
                }
            ],
            "content": "def _read_sheet(self,service,spreadsheet_id:str,range:str)->list[list[str]]:\nsheet=service.spreadsheets()\nresult=sheet.values().get(spreadsheetId=spreadsheet_id,range=range).execute()\nreturn result.get(\"values\",[])\n\n"
        },
        {
            "type": "ClassDecl",
            "name": "GoogleSheetsWriteBlock",
            "range": [
                566,
                572
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "Block",
                    "range": [
                        568,
                        570
                    ],
                    "children": [],
                    "content": "GoogleSheetsWriteBlock(Block"
                }
            ],
            "content": "\nclass GoogleSheetsWriteBlock(Block):"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                573,
                579
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "BlockSchema",
                    "range": [
                        575,
                        577
                    ],
                    "children": [],
                    "content": "Input(BlockSchema"
                },
                {
                    "type": "FieldDecl",
                    "name": "credentials",
                    "range": [
                        580,
                        591
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "GoogleCredentialsInput",
                            "range": [
                                582,
                                582
                            ],
                            "children": [],
                            "content": ":"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                583,
                                583
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "GoogleCredentialsField",
                                    "range": [
                                        584,
                                        591
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "[\"https://www.googleapis.com/auth/spreadsheets\"]",
                                            "range": [
                                                587,
                                                589
                                            ],
                                            "children": [],
                                            "content": "\n[\"https://www.googleapis.com/auth/spreadsheets\""
                                        }
                                    ],
                                    "content": "=GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets\"]\n"
                                }
                            ],
                            "content": "GoogleCredentialsInput"
                        }
                    ],
                    "content": "\ncredentials:GoogleCredentialsInput=GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets\"]\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "spreadsheet_id",
                    "range": [
                        593,
                        605
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                595,
                                595
                            ],
                            "children": [],
                            "content": ":"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                596,
                                596
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        597,
                                        605
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description=\"The ID of the spreadsheet to write to\"",
                                            "range": [
                                                600,
                                                602
                                            ],
                                            "children": [],
                                            "content": "\ndescription="
                                        }
                                    ],
                                    "content": "=SchemaField(\ndescription=\"The ID of the spreadsheet to write to\",\n"
                                }
                            ],
                            "content": "str"
                        }
                    ],
                    "content": "\nspreadsheet_id:str=SchemaField(\ndescription=\"The ID of the spreadsheet to write to\",\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "range",
                    "range": [
                        607,
                        619
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                609,
                                609
                            ],
                            "children": [],
                            "content": ":"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                610,
                                610
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        611,
                                        619
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description=\"The A1 notation of the range to write\"",
                                            "range": [
                                                614,
                                                616
                                            ],
                                            "children": [],
                                            "content": "\ndescription="
                                        }
                                    ],
                                    "content": "=SchemaField(\ndescription=\"The A1 notation of the range to write\",\n"
                                }
                            ],
                            "content": "str"
                        }
                    ],
                    "content": "\nrange:str=SchemaField(\ndescription=\"The A1 notation of the range to write\",\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "values",
                    "range": [
                        621,
                        639
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list[list[str]]",
                            "range": [
                                623,
                                629
                            ],
                            "children": [],
                            "content": ":list[list[str]"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                630,
                                630
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        631,
                                        639
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description=\"The data to write to the spreadsheet\"",
                                            "range": [
                                                634,
                                                636
                                            ],
                                            "children": [],
                                            "content": "\ndescription="
                                        }
                                    ],
                                    "content": "=SchemaField(\ndescription=\"The data to write to the spreadsheet\",\n"
                                }
                            ],
                            "content": "]"
                        }
                    ],
                    "content": "\nvalues:list[list[str]]=SchemaField(\ndescription=\"The data to write to the spreadsheet\",\n"
                }
            ],
            "content": "\nclass Input(BlockSchema):"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                642,
                648
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "BlockSchema",
                    "range": [
                        644,
                        646
                    ],
                    "children": [],
                    "content": "Output(BlockSchema"
                },
                {
                    "type": "FieldDecl",
                    "name": "result",
                    "range": [
                        649,
                        661
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "dict",
                            "range": [
                                651,
                                651
                            ],
                            "children": [],
                            "content": ":"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                652,
                                652
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        653,
                                        661
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description=\"The result of the write operation\"",
                                            "range": [
                                                656,
                                                658
                                            ],
                                            "children": [],
                                            "content": "\ndescription="
                                        }
                                    ],
                                    "content": "=SchemaField(\ndescription=\"The result of the write operation\",\n"
                                }
                            ],
                            "content": "dict"
                        }
                    ],
                    "content": "\nresult:dict=SchemaField(\ndescription=\"The result of the write operation\",\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "error",
                    "range": [
                        663,
                        675
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                665,
                                665
                            ],
                            "children": [],
                            "content": ":"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                666,
                                666
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        667,
                                        675
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description=\"Error message if any\"",
                                            "range": [
                                                670,
                                                672
                                            ],
                                            "children": [],
                                            "content": "\ndescription="
                                        }
                                    ],
                                    "content": "=SchemaField(\ndescription=\"Error message if any\",\n"
                                }
                            ],
                            "content": "str"
                        }
                    ],
                    "content": "\nerror:str=SchemaField(\ndescription=\"Error message if any\",\n"
                }
            ],
            "content": "\nclass Output(BlockSchema):"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                678,
                847
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        681,
                        681
                    ],
                    "children": [],
                    "content": "("
                },
                {
                    "type": "SuperCall",
                    "name": "super",
                    "range": [
                        685,
                        691
                    ],
                    "children": [],
                    "content": "\nsuper().__init__("
                },
                {
                    "type": "Assignment",
                    "name": "id=\"d9291e87-301d-47a8-91fe-907fb55460e5\"",
                    "range": [
                        692,
                        694
                    ],
                    "children": [],
                    "content": "\nid="
                },
                {
                    "type": "Assignment",
                    "name": "description=\"This block writes data to a Google Sheets spreadsheet.\"",
                    "range": [
                        697,
                        699
                    ],
                    "children": [],
                    "content": "\ndescription="
                },
                {
                    "type": "Assignment",
                    "name": "categories={BlockCategory.DATA}",
                    "range": [
                        702,
                        708
                    ],
                    "children": [],
                    "content": "\ncategories={BlockCategory.DATA"
                },
                {
                    "type": "Assignment",
                    "name": "input_schema=GoogleSheetsWriteBlock.Input",
                    "range": [
                        711,
                        716
                    ],
                    "children": [],
                    "content": "\ninput_schema=GoogleSheetsWriteBlock.Input"
                },
                {
                    "type": "Assignment",
                    "name": "output_schema=GoogleSheetsWriteBlock.Output",
                    "range": [
                        718,
                        722
                    ],
                    "children": [],
                    "content": "\noutput_schema=GoogleSheetsWriteBlock."
                },
                {
                    "type": "Assignment",
                    "name": "disabled=not GOOGLE_OAUTH_IS_CONFIGURED",
                    "range": [
                        725,
                        728
                    ],
                    "children": [],
                    "content": "\ndisabled=not"
                },
                {
                    "type": "Assignment",
                    "name": "test_input={\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\"range\":\"Sheet1!A1:B2\",\"values\":[[\"Name\",\"Score\"],[\"Bob\",\"90\"]],\"credentials\":TEST_CREDENTIALS_INPUT}",
                    "range": [
                        731,
                        769
                    ],
                    "children": [],
                    "content": "\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"values\":[\n[\"Name\",\"Score\"],\n[\"Bob\",\"90\"],\n],\n\"credentials\":TEST_CREDENTIALS_INPUT"
                },
                {
                    "type": "Assignment",
                    "name": "test_credentials=TEST_CREDENTIALS",
                    "range": [
                        774,
                        776
                    ],
                    "children": [],
                    "content": "\ntest_credentials="
                },
                {
                    "type": "Assignment",
                    "name": "test_output=[(\"result\",{\"updatedCells\":4,\"updatedColumns\":2,\"updatedRows\":2})]",
                    "range": [
                        779,
                        806
                    ],
                    "children": [],
                    "content": "\ntest_output=[\n(\n\"result\",\n{\"updatedCells\":4,\"updatedColumns\":2,\"updatedRows\":2},\n),\n"
                },
                {
                    "type": "Assignment",
                    "name": "test_mock={\"_write_sheet\":lambda *args,**kwargs:{\"updatedCells\":4,\"updatedColumns\":2,\"updatedRows\":2}}",
                    "range": [
                        809,
                        843
                    ],
                    "children": [],
                    "content": "\ntest_mock={\n\"_write_sheet\":lambda*args,**kwargs:{\n\"updatedCells\":4,\n\"updatedColumns\":2,\n\"updatedRows\":2,\n},\n"
                }
            ],
            "content": "\ndef __init__(self):\nsuper().__init__(\nid=\"d9291e87-301d-47a8-91fe-907fb55460e5\",\ndescription=\"This block writes data to a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsWriteBlock.Input,\noutput_schema=GoogleSheetsWriteBlock.Output,\ndisabled=not GOOGLE_OAUTH_IS_CONFIGURED,\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"values\":[\n[\"Name\",\"Score\"],\n[\"Bob\",\"90\"],\n],\n\"credentials\":TEST_CREDENTIALS_INPUT,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"result\",\n{\"updatedCells\":4,\"updatedColumns\":2,\"updatedRows\":2},\n),\n],\ntest_mock={\n\"_write_sheet\":lambda*args,**kwargs:{\n\"updatedCells\":4,\n\"updatedColumns\":2,\n\"updatedRows\":2,\n},\n},\n)"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                849,
                920
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        853,
                        853
                    ],
                    "children": [],
                    "content": "\n"
                },
                {
                    "type": "Parameter",
                    "name": "input_data:Input",
                    "range": [
                        855,
                        857
                    ],
                    "children": [],
                    "content": ",input_data:"
                },
                {
                    "type": "Parameter",
                    "name": "credentials:GoogleCredentials",
                    "range": [
                        861,
                        863
                    ],
                    "children": [],
                    "content": ",credentials:"
                },
                {
                    "type": "VariableDecl",
                    "name": "service=GoogleSheetsReadBlock._build_service(credentials,**kwargs)",
                    "range": [
                        875,
                        886
                    ],
                    "children": [],
                    "content": "\nservice=GoogleSheetsReadBlock._build_service(credentials,**kwargs"
                },
                {
                    "type": "VariableDecl",
                    "name": "result=self._write_sheet(service,input_data.spreadsheet_id,input_data.range,input_data.values)",
                    "range": [
                        888,
                        913
                    ],
                    "children": [],
                    "content": "\nresult=self._write_sheet(\nservice,\ninput_data.spreadsheet_id,\ninput_data.range,\ninput_data.values,\n"
                },
                {
                    "type": "Yield",
                    "name": "yield \"result\",result",
                    "range": [
                        915,
                        918
                    ],
                    "children": [],
                    "content": "\nyield \"result\","
                }
            ],
            "content": "\ndef run(\nself,input_data:Input,*,credentials:GoogleCredentials,**kwargs\n)->BlockOutput:\nservice=GoogleSheetsReadBlock._build_service(credentials,**kwargs)\nresult=self._write_sheet(\nservice,\ninput_data.spreadsheet_id,\ninput_data.range,\ninput_data.values,\n)\nyield \"result\",result\n"
        },
        {
            "type": "FunctionDecl",
            "name": "_write_sheet",
            "range": [
                921,
                1011
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        925,
                        925
                    ],
                    "children": [],
                    "content": "\n"
                },
                {
                    "type": "Parameter",
                    "name": "service",
                    "range": [
                        927,
                        927
                    ],
                    "children": [],
                    "content": ","
                },
                {
                    "type": "Parameter",
                    "name": "spreadsheet_id:str",
                    "range": [
                        929,
                        931
                    ],
                    "children": [],
                    "content": ",spreadsheet_id:"
                },
                {
                    "type": "Parameter",
                    "name": "range:str",
                    "range": [
                        933,
                        935
                    ],
                    "children": [],
                    "content": ",range:"
                },
                {
                    "type": "Parameter",
                    "name": "values:list[list[str]]",
                    "range": [
                        937,
                        945
                    ],
                    "children": [],
                    "content": ",values:list[list[str]"
                },
                {
                    "type": "VariableDecl",
                    "name": "body={\"values\":values}",
                    "range": [
                        953,
                        959
                    ],
                    "children": [],
                    "content": "\nbody={\"values\":values"
                },
                {
                    "type": "VariableDecl",
                    "name": "result=service.spreadsheets().values().update(spreadsheetId=spreadsheet_id,range=range,valueInputOption=\"USER_ENTERED\",body=body).execute()",
                    "range": [
                        961,
                        1006
                    ],
                    "children": [],
                    "content": "\nresult=(\nservice.spreadsheets()\n.values()\n.update(\nspreadsheetId=spreadsheet_id,\nrange=range,\nvalueInputOption=\"USER_ENTERED\",\nbody=body,\n)\n.execute()"
                },
                {
                    "type": "Return",
                    "name": "return result",
                    "range": [
                        1009,
                        1010
                    ],
                    "children": [],
                    "content": "\nreturn"
                }
            ],
            "content": "\ndef _write_sheet(\nself,service,spreadsheet_id:str,range:str,values:list[list[str]]\n)->dict:\nbody={\"values\":values}\nresult=(\nservice.spreadsheets()\n.values()\n.update(\nspreadsheetId=spreadsheet_id,\nrange=range,\nvalueInputOption=\"USER_ENTERED\",\nbody=body,\n)\n.execute()\n)\nreturn result"
        }
    ],
    "content": "class GoogleSheetsReadBlock(Block):\nclass Input(BlockSchema):\ncredentials:GoogleCredentialsInput=GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets.readonly\"]\n)\nspreadsheet_id:str=SchemaField(\ndescription=\"The ID of the spreadsheet to read from\",\n)\nrange:str=SchemaField(\ndescription=\"The A1 notation of the range to read\",\n)\n\nclass Output(BlockSchema):\nresult:list[list[str]]=SchemaField(\ndescription=\"The data read from the spreadsheet\",\n)\nerror:str=SchemaField(\ndescription=\"Error message if any\",\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"5724e902-3635-47e9-a108-aaa0263a4988\",\ndescription=\"This block reads data from a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsReadBlock.Input,\noutput_schema=GoogleSheetsReadBlock.Output,\ndisabled=not GOOGLE_OAUTH_IS_CONFIGURED,\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"credentials\":TEST_CREDENTIALS_INPUT,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"result\",\n[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n),\n],\ntest_mock={\n\"_read_sheet\":lambda*args,**kwargs:[\n[\"Name\",\"Score\"],\n[\"Alice\",\"85\"],\n],\n},\n)\n\ndef run(\nself,input_data:Input,*,credentials:GoogleCredentials,**kwargs\n)->BlockOutput:\nservice=self._build_service(credentials,**kwargs)\ndata=self._read_sheet(service,input_data.spreadsheet_id,input_data.range)\nyield \"result\",data\n\n@staticmethod\ndef _build_service(credentials:GoogleCredentials,**kwargs):\ncreds=Credentials(\ntoken=(\ncredentials.access_token.get_secret_value()\nif credentials.access_token\nelse None\n),\nrefresh_token=(\ncredentials.refresh_token.get_secret_value()\nif credentials.refresh_token\nelse None\n),\ntoken_uri=\"https://oauth2.googleapis.com/token\",\nclient_id=kwargs.get(\"client_id\"),\nclient_secret=kwargs.get(\"client_secret\"),\nscopes=credentials.scopes,\n)\nreturn build(\"sheets\",\"v4\",credentials=creds)\n\ndef _read_sheet(self,service,spreadsheet_id:str,range:str)->list[list[str]]:\nsheet=service.spreadsheets()\nresult=sheet.values().get(spreadsheetId=spreadsheet_id,range=range).execute()\nreturn result.get(\"values\",[])\n\n\nclass GoogleSheetsWriteBlock(Block):\nclass Input(BlockSchema):\ncredentials:GoogleCredentialsInput=GoogleCredentialsField(\n[\"https://www.googleapis.com/auth/spreadsheets\"]\n)\nspreadsheet_id:str=SchemaField(\ndescription=\"The ID of the spreadsheet to write to\",\n)\nrange:str=SchemaField(\ndescription=\"The A1 notation of the range to write\",\n)\nvalues:list[list[str]]=SchemaField(\ndescription=\"The data to write to the spreadsheet\",\n)\n\nclass Output(BlockSchema):\nresult:dict=SchemaField(\ndescription=\"The result of the write operation\",\n)\nerror:str=SchemaField(\ndescription=\"Error message if any\",\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"d9291e87-301d-47a8-91fe-907fb55460e5\",\ndescription=\"This block writes data to a Google Sheets spreadsheet.\",\ncategories={BlockCategory.DATA},\ninput_schema=GoogleSheetsWriteBlock.Input,\noutput_schema=GoogleSheetsWriteBlock.Output,\ndisabled=not GOOGLE_OAUTH_IS_CONFIGURED,\ntest_input={\n\"spreadsheet_id\":\"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms\",\n\"range\":\"Sheet1!A1:B2\",\n\"values\":[\n[\"Name\",\"Score\"],\n[\"Bob\",\"90\"],\n],\n\"credentials\":TEST_CREDENTIALS_INPUT,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"result\",\n{\"updatedCells\":4,\"updatedColumns\":2,\"updatedRows\":2},\n),\n],\ntest_mock={\n\"_write_sheet\":lambda*args,**kwargs:{\n\"updatedCells\":4,\n\"updatedColumns\":2,\n\"updatedRows\":2,\n},\n},\n)\n\ndef run(\nself,input_data:Input,*,credentials:GoogleCredentials,**kwargs\n)->BlockOutput:\nservice=GoogleSheetsReadBlock._build_service(credentials,**kwargs)\nresult=self._write_sheet(\nservice,\ninput_data.spreadsheet_id,\ninput_data.range,\ninput_data.values,\n)\nyield \"result\",result\n\ndef _write_sheet(\nself,service,spreadsheet_id:str,range:str,values:list[list[str]]\n)->dict:\nbody={\"values\":values}\nresult=(\nservice.spreadsheets()\n.values()\n.update(\nspreadsheetId=spreadsheet_id,\nrange=range,\nvalueInputOption=\"USER_ENTERED\",\nbody=body,\n)\n.execute()\n)\nreturn result\n"
}