{
    "type": "Program",
    "name": "Global",
    "range": [
        82,
        691
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "Slant3DTriggerBase",
            "range": [
                82,
                89
            ],
            "children": [
                {
                    "type": "Docstring",
                    "name": "",
                    "range": [
                        86,
                        88
                    ],
                    "children": [],
                    "content": "\"\"\"Base class for Slant3D webhook triggers\"\"\""
                }
            ],
            "content": "class Slant3DTriggerBase:\n\"\"\"Base class for Slant3D webhook triggers\"\"\"\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                91,
                132
            ],
            "children": [
                {
                    "type": "FieldDecl",
                    "name": "credentials",
                    "range": [
                        98,
                        105
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Slant3DCredentialsInput",
                            "range": [
                                100,
                                100
                            ],
                            "children": [],
                            "content": "Slant3DCredentialsInput"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                101,
                                101
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "Slant3DCredentialsField",
                                    "range": [
                                        102,
                                        104
                                    ],
                                    "children": [],
                                    "content": "Slant3DCredentialsField()"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "credentials:Slant3DCredentialsInput=Slant3DCredentialsField()\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "payload",
                    "range": [
                        116,
                        131
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "dict",
                            "range": [
                                118,
                                118
                            ],
                            "children": [],
                            "content": "dict"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                119,
                                119
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        120,
                                        130
                                    ],
                                    "children": [
                                        {
                                            "type": "KeywordArgument",
                                            "name": "hidden",
                                            "range": [
                                                122,
                                                124
                                            ],
                                            "children": [],
                                            "content": "hidden=True"
                                        },
                                        {
                                            "type": "KeywordArgument",
                                            "name": "default",
                                            "range": [
                                                126,
                                                129
                                            ],
                                            "children": [],
                                            "content": "default={}"
                                        }
                                    ],
                                    "content": "SchemaField(hidden=True,default={})"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "payload:dict=SchemaField(hidden=True,default={})\n"
                }
            ],
            "content": "class Input(BlockSchema):\ncredentials:Slant3DCredentialsInput=Slant3DCredentialsField()\n#Webhook URL is handled by the webhook system\npayload:dict=SchemaField(hidden=True,default={})\n\n"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                133,
                177
            ],
            "children": [
                {
                    "type": "FieldDecl",
                    "name": "payload",
                    "range": [
                        140,
                        152
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "dict",
                            "range": [
                                142,
                                142
                            ],
                            "children": [],
                            "content": "dict"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                143,
                                143
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        144,
                                        151
                                    ],
                                    "children": [
                                        {
                                            "type": "KeywordArgument",
                                            "name": "description",
                                            "range": [
                                                147,
                                                149
                                            ],
                                            "children": [],
                                            "content": "description=\"The complete webhook payload received from Slant3D\""
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"The complete webhook payload received from Slant3D\"\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "payload:dict=SchemaField(\ndescription=\"The complete webhook payload received from Slant3D\"\n)\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "order_id",
                    "range": [
                        153,
                        163
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                155,
                                155
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                156,
                                156
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        157,
                                        162
                                    ],
                                    "children": [
                                        {
                                            "type": "KeywordArgument",
                                            "name": "description",
                                            "range": [
                                                159,
                                                161
                                            ],
                                            "children": [],
                                            "content": "description=\"The ID of the affected order\""
                                        }
                                    ],
                                    "content": "SchemaField(description=\"The ID of the affected order\")"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "order_id:str=SchemaField(description=\"The ID of the affected order\")\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "error",
                    "range": [
                        164,
                        176
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                166,
                                166
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                167,
                                167
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        168,
                                        175
                                    ],
                                    "children": [
                                        {
                                            "type": "KeywordArgument",
                                            "name": "description",
                                            "range": [
                                                171,
                                                173
                                            ],
                                            "children": [],
                                            "content": "description=\"Error message if payload processing failed\""
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Error message if payload processing failed\"\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "error:str=SchemaField(\ndescription=\"Error message if payload processing failed\"\n)\n"
                }
            ],
            "content": "class Output(BlockSchema):\npayload:dict=SchemaField(\ndescription=\"The complete webhook payload received from Slant3D\"\n)\norder_id:str=SchemaField(description=\"The ID of the affected order\")\nerror:str=SchemaField(\ndescription=\"Error message if payload processing failed\"\n)\n\n"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                178,
                213
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        181,
                        181
                    ],
                    "children": [],
                    "content": "self"
                },
                {
                    "type": "Parameter",
                    "name": "input_data",
                    "range": [
                        183,
                        183
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Input",
                            "range": [
                                185,
                                185
                            ],
                            "children": [],
                            "content": "Input"
                        }
                    ],
                    "content": "input_data"
                },
                {
                    "type": "Parameter",
                    "name": "kwargs",
                    "range": [
                        189,
                        189
                    ],
                    "children": [],
                    "content": "kwargs"
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        193,
                        193
                    ],
                    "children": [],
                    "content": "BlockOutput"
                },
                {
                    "type": "YieldStatement",
                    "name": "yield",
                    "range": [
                        196,
                        202
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"payload\"",
                            "range": [
                                197,
                                197
                            ],
                            "children": [],
                            "content": "\"payload\""
                        },
                        {
                            "type": "MemberExpression",
                            "name": ".",
                            "range": [
                                200,
                                201
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "input_data",
                                    "range": [
                                        199,
                                        199
                                    ],
                                    "children": [],
                                    "content": "input_data"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "payload",
                                    "range": [
                                        201,
                                        201
                                    ],
                                    "children": [],
                                    "content": "payload"
                                }
                            ],
                            "content": ".payload"
                        }
                    ],
                    "content": "yield \"payload\",input_data.payload\n"
                },
                {
                    "type": "YieldStatement",
                    "name": "yield",
                    "range": [
                        203,
                        212
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"order_id\"",
                            "range": [
                                204,
                                204
                            ],
                            "children": [],
                            "content": "\"order_id\""
                        },
                        {
                            "type": "MemberExpression",
                            "name": ".",
                            "range": [
                                207,
                                208
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "input_data",
                                    "range": [
                                        206,
                                        206
                                    ],
                                    "children": [],
                                    "content": "input_data"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "payload",
                                    "range": [
                                        208,
                                        208
                                    ],
                                    "children": [],
                                    "content": "payload"
                                }
                            ],
                            "content": ".payload"
                        },
                        {
                            "type": "SubscriptExpression",
                            "name": "[",
                            "range": [
                                209,
                                211
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"orderId\"",
                                    "range": [
                                        210,
                                        210
                                    ],
                                    "children": [],
                                    "content": "\"orderId\""
                                }
                            ],
                            "content": "[\"orderId\"]"
                        }
                    ],
                    "content": "yield \"order_id\",input_data.payload[\"orderId\"]\n"
                }
            ],
            "content": "def run(self,input_data:Input,**kwargs)->BlockOutput:\nyield \"payload\",input_data.payload\nyield \"order_id\",input_data.payload[\"orderId\"]\n\n"
        },
        {
            "type": "ClassDecl",
            "name": "Slant3DOrderWebhookBlock",
            "range": [
                214,
                226
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "Slant3DTriggerBase, Block",
                    "range": [
                        216,
                        220
                    ],
                    "children": [],
                    "content": "Slant3DOrderWebhookBlock(Slant3DTriggerBase,Block"
                },
                {
                    "type": "Docstring",
                    "name": "Block for handling Slant3D order webhooks",
                    "range": [
                        223,
                        225
                    ],
                    "children": [],
                    "content": "\n\"\"\"Block for handling Slant3D order webhooks\""
                }
            ],
            "content": "\nclass Slant3DOrderWebhookBlock(Slant3DTriggerBase,Block):\n\"\"\"Block for handling Slant3D order webhooks\"\"\""
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                228,
                236
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "Slant3DTriggerBase.Input",
                    "range": [
                        230,
                        234
                    ],
                    "children": [],
                    "content": "Input(Slant3DTriggerBase.Input"
                }
            ],
            "content": "\nclass Input(Slant3DTriggerBase.Input):"
        },
        {
            "type": "ClassDecl",
            "name": "EventsFilter",
            "range": [
                237,
                247
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "BaseModel",
                    "range": [
                        239,
                        241
                    ],
                    "children": [],
                    "content": "EventsFilter(BaseModel"
                },
                {
                    "type": "Docstring",
                    "name": "Currently Slant3D only supports 'SHIPPED' status updates. Could be expanded in the future with more status types.",
                    "range": [
                        244,
                        246
                    ],
                    "children": [],
                    "content": "\n\"\"\" \\n             Currently Slant3D only supports 'SHIPPED' status updates \\n             Could be expanded in the future with more status types \\n             \""
                }
            ],
            "content": "\nclass EventsFilter(BaseModel):\n\"\"\" \\n             Currently Slant3D only supports 'SHIPPED' status updates \\n             Could be expanded in the future with more status types \\n             \"\"\""
        },
        {
            "type": "VariableDecl",
            "name": "shipped",
            "range": [
                249,
                254
            ],
            "children": [
                {
                    "type": "TypeAnnotation",
                    "name": "bool",
                    "range": [
                        251,
                        251
                    ],
                    "children": [],
                    "content": ":"
                },
                {
                    "type": "Assignment",
                    "name": "True",
                    "range": [
                        253,
                        253
                    ],
                    "children": [],
                    "content": "="
                }
            ],
            "content": "\nshipped:bool=True"
        },
        {
            "type": "VariableDecl",
            "name": "events",
            "range": [
                256,
                284
            ],
            "children": [
                {
                    "type": "TypeAnnotation",
                    "name": "EventsFilter",
                    "range": [
                        258,
                        258
                    ],
                    "children": [],
                    "content": ":"
                },
                {
                    "type": "Assignment",
                    "name": "SchemaField",
                    "range": [
                        260,
                        283
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "title",
                            "range": [
                                263,
                                265
                            ],
                            "children": [],
                            "content": "\ntitle="
                        },
                        {
                            "type": "Argument",
                            "name": "description",
                            "range": [
                                268,
                                270
                            ],
                            "children": [],
                            "content": "\ndescription="
                        },
                        {
                            "type": "Argument",
                            "name": "default",
                            "range": [
                                273,
                                280
                            ],
                            "children": [],
                            "content": "\ndefault=EventsFilter(shipped=True"
                        }
                    ],
                    "content": "=SchemaField(\ntitle=\"Events\",\ndescription=\"Order status events to subscribe to\",\ndefault=EventsFilter(shipped=True),\n"
                }
            ],
            "content": "\nevents:EventsFilter=SchemaField(\ntitle=\"Events\",\ndescription=\"Order status events to subscribe to\",\ndefault=EventsFilter(shipped=True),\n)"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                286,
                294
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "Slant3DTriggerBase.Output",
                    "range": [
                        288,
                        292
                    ],
                    "children": [],
                    "content": "Output(Slant3DTriggerBase.Output"
                }
            ],
            "content": "\nclass Output(Slant3DTriggerBase.Output):"
        },
        {
            "type": "VariableDecl",
            "name": "status",
            "range": [
                295,
                305
            ],
            "children": [
                {
                    "type": "TypeAnnotation",
                    "name": "str",
                    "range": [
                        297,
                        297
                    ],
                    "children": [],
                    "content": ":"
                },
                {
                    "type": "Assignment",
                    "name": "SchemaField",
                    "range": [
                        299,
                        304
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "description",
                            "range": [
                                302,
                                303
                            ],
                            "children": [],
                            "content": "description="
                        }
                    ],
                    "content": "=SchemaField(description=\"The new status of the order\""
                }
            ],
            "content": "\nstatus:str=SchemaField(description=\"The new status of the order\")"
        },
        {
            "type": "VariableDecl",
            "name": "tracking_number",
            "range": [
                306,
                318
            ],
            "children": [
                {
                    "type": "TypeAnnotation",
                    "name": "str",
                    "range": [
                        308,
                        308
                    ],
                    "children": [],
                    "content": ":"
                },
                {
                    "type": "Assignment",
                    "name": "SchemaField",
                    "range": [
                        310,
                        317
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "description",
                            "range": [
                                314,
                                315
                            ],
                            "children": [],
                            "content": "description="
                        }
                    ],
                    "content": "=SchemaField(\ndescription=\"The tracking number for the shipment\"\n"
                }
            ],
            "content": "\ntracking_number:str=SchemaField(\ndescription=\"The tracking number for the shipment\"\n)"
        },
        {
            "type": "VariableDecl",
            "name": "carrier_code",
            "range": [
                319,
                329
            ],
            "children": [
                {
                    "type": "TypeAnnotation",
                    "name": "str",
                    "range": [
                        321,
                        321
                    ],
                    "children": [],
                    "content": ":"
                },
                {
                    "type": "Assignment",
                    "name": "SchemaField",
                    "range": [
                        323,
                        328
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "description",
                            "range": [
                                326,
                                327
                            ],
                            "children": [],
                            "content": "description="
                        }
                    ],
                    "content": "=SchemaField(description=\"The carrier code (e.g., 'usps')\""
                }
            ],
            "content": "\ncarrier_code:str=SchemaField(description=\"The carrier code (e.g., 'usps')\")"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                331,
                612
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        334,
                        334
                    ],
                    "children": [],
                    "content": "("
                },
                {
                    "type": "SuperCall",
                    "name": "super",
                    "range": [
                        338,
                        343
                    ],
                    "children": [],
                    "content": "\nsuper().__init__"
                },
                {
                    "type": "Assignment",
                    "name": "id",
                    "range": [
                        345,
                        347
                    ],
                    "children": [],
                    "content": "\nid="
                },
                {
                    "type": "Assignment",
                    "name": "description",
                    "range": [
                        350,
                        358
                    ],
                    "children": [],
                    "content": "\ndescription=(\n\"This block triggers on Slant3D order status updates and outputs \"\n\"the event details, including tracking information when orders are shipped.\"\n"
                },
                {
                    "type": "Comment",
                    "name": "All webhooks are currently subscribed to for all orders. This works for self hosted, but not for cloud hosted prod",
                    "range": [
                        361,
                        384
                    ],
                    "children": [],
                    "content": "\n#All webhooks are currently subscribed to for all orders.This works for self hosted,but not for cloud hosted prod"
                },
                {
                    "type": "Assignment",
                    "name": "disabled",
                    "range": [
                        386,
                        420
                    ],
                    "children": [],
                    "content": "disabled=(\nsettings.Settings().config.behave_as==BehaveAs.CLOUD\nand settings.Settings().config.app_env!=AppEnvironment.LOCAL\n"
                },
                {
                    "type": "Assignment",
                    "name": "categories",
                    "range": [
                        423,
                        429
                    ],
                    "children": [],
                    "content": "\ncategories={BlockCategory.DEVELOPER_TOOLS"
                },
                {
                    "type": "Assignment",
                    "name": "input_schema",
                    "range": [
                        432,
                        437
                    ],
                    "children": [],
                    "content": "\ninput_schema=self.Input"
                },
                {
                    "type": "Assignment",
                    "name": "output_schema",
                    "range": [
                        439,
                        444
                    ],
                    "children": [],
                    "content": "\noutput_schema=self.Output"
                },
                {
                    "type": "Assignment",
                    "name": "webhook_config",
                    "range": [
                        446,
                        487
                    ],
                    "children": [],
                    "content": "\nwebhook_config=BlockWebhookConfig(\nprovider=\"slant3d\",\nwebhook_type=\"orders\",#Only one type for now\nresource_format=\"\",#No resource format needed\nevent_filter_input=\"events\",\nevent_format=\"order.{event}\",\n"
                },
                {
                    "type": "Assignment",
                    "name": "test_input",
                    "range": [
                        490,
                        536
                    ],
                    "children": [],
                    "content": "\ntest_input={\n\"credentials\":TEST_CREDENTIALS_INPUT,\n\"events\":{\"shipped\":True},\n\"payload\":{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n}"
                },
                {
                    "type": "Assignment",
                    "name": "test_credentials",
                    "range": [
                        538,
                        541
                    ],
                    "children": [],
                    "content": "\ntest_credentials=TEST_CREDENTIALS"
                },
                {
                    "type": "Assignment",
                    "name": "test_output",
                    "range": [
                        543,
                        608
                    ],
                    "children": [],
                    "content": "\ntest_output=[\n(\n\"payload\",\n{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n),\n(\"order_id\",\"1234567890\"),\n(\"status\",\"SHIPPED\"),\n(\"tracking_number\",\"ABCDEF123456\"),\n(\"carrier_code\",\"usps\"),\n"
                }
            ],
            "content": "\ndef __init__(self):\nsuper().__init__(\nid=\"8a74c2ad-0104-4640-962f-26c6b69e58cd\",\ndescription=(\n\"This block triggers on Slant3D order status updates and outputs \"\n\"the event details, including tracking information when orders are shipped.\"\n),\n#All webhooks are currently subscribed to for all orders.This works for self hosted,but not for cloud hosted prod\ndisabled=(\nsettings.Settings().config.behave_as==BehaveAs.CLOUD\nand settings.Settings().config.app_env!=AppEnvironment.LOCAL\n),\ncategories={BlockCategory.DEVELOPER_TOOLS},\ninput_schema=self.Input,\noutput_schema=self.Output,\nwebhook_config=BlockWebhookConfig(\nprovider=\"slant3d\",\nwebhook_type=\"orders\",#Only one type for now\nresource_format=\"\",#No resource format needed\nevent_filter_input=\"events\",\nevent_format=\"order.{event}\",\n),\ntest_input={\n\"credentials\":TEST_CREDENTIALS_INPUT,\n\"events\":{\"shipped\":True},\n\"payload\":{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"payload\",\n{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n),\n(\"order_id\",\"1234567890\"),\n(\"status\",\"SHIPPED\"),\n(\"tracking_number\",\"ABCDEF123456\"),\n(\"carrier_code\",\"usps\"),\n],\n)"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                614,
                691
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        617,
                        617
                    ],
                    "children": [],
                    "content": "("
                },
                {
                    "type": "Parameter",
                    "name": "input_data",
                    "range": [
                        619,
                        621
                    ],
                    "children": [],
                    "content": ",input_data:"
                },
                {
                    "type": "Parameter",
                    "name": "kwargs",
                    "range": [
                        625,
                        625
                    ],
                    "children": [],
                    "content": "*"
                },
                {
                    "type": "Comment",
                    "name": "type: ignore",
                    "range": [
                        631,
                        635
                    ],
                    "children": [],
                    "content": ":#type:ignore"
                },
                {
                    "type": "YieldFrom",
                    "name": "super().run",
                    "range": [
                        636,
                        649
                    ],
                    "children": [],
                    "content": "\nyield from super().run(input_data,**kwargs"
                },
                {
                    "type": "Comment",
                    "name": "Extract and normalize values from the payload",
                    "range": [
                        653,
                        660
                    ],
                    "children": [],
                    "content": "#Extract and normalize values from the payload"
                },
                {
                    "type": "Yield",
                    "name": "status",
                    "range": [
                        661,
                        670
                    ],
                    "children": [],
                    "content": "\nyield \"status\",input_data.payload[\"status\"]"
                },
                {
                    "type": "Yield",
                    "name": "tracking_number",
                    "range": [
                        671,
                        680
                    ],
                    "children": [],
                    "content": "\nyield \"tracking_number\",input_data.payload[\"trackingNumber\"]"
                },
                {
                    "type": "Yield",
                    "name": "carrier_code",
                    "range": [
                        681,
                        690
                    ],
                    "children": [],
                    "content": "\nyield \"carrier_code\",input_data.payload[\"carrierCode\"]"
                }
            ],
            "content": "\ndef run(self,input_data:Input,**kwargs)->BlockOutput:#type:ignore\nyield from super().run(input_data,**kwargs)\n\n#Extract and normalize values from the payload\nyield \"status\",input_data.payload[\"status\"]\nyield \"tracking_number\",input_data.payload[\"trackingNumber\"]\nyield \"carrier_code\",input_data.payload[\"carrierCode\"]\n"
        }
    ],
    "content": "class Slant3DTriggerBase:\n\"\"\"Base class for Slant3D webhook triggers\"\"\"\n\nclass Input(BlockSchema):\ncredentials:Slant3DCredentialsInput=Slant3DCredentialsField()\n#Webhook URL is handled by the webhook system\npayload:dict=SchemaField(hidden=True,default={})\n\nclass Output(BlockSchema):\npayload:dict=SchemaField(\ndescription=\"The complete webhook payload received from Slant3D\"\n)\norder_id:str=SchemaField(description=\"The ID of the affected order\")\nerror:str=SchemaField(\ndescription=\"Error message if payload processing failed\"\n)\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nyield \"payload\",input_data.payload\nyield \"order_id\",input_data.payload[\"orderId\"]\n\n\nclass Slant3DOrderWebhookBlock(Slant3DTriggerBase,Block):\n\"\"\"Block for handling Slant3D order webhooks\"\"\"\n\nclass Input(Slant3DTriggerBase.Input):\nclass EventsFilter(BaseModel):\n\"\"\" \\n             Currently Slant3D only supports 'SHIPPED' status updates \\n             Could be expanded in the future with more status types \\n             \"\"\"\n\nshipped:bool=True\n\nevents:EventsFilter=SchemaField(\ntitle=\"Events\",\ndescription=\"Order status events to subscribe to\",\ndefault=EventsFilter(shipped=True),\n)\n\nclass Output(Slant3DTriggerBase.Output):\nstatus:str=SchemaField(description=\"The new status of the order\")\ntracking_number:str=SchemaField(\ndescription=\"The tracking number for the shipment\"\n)\ncarrier_code:str=SchemaField(description=\"The carrier code (e.g., 'usps')\")\n\ndef __init__(self):\nsuper().__init__(\nid=\"8a74c2ad-0104-4640-962f-26c6b69e58cd\",\ndescription=(\n\"This block triggers on Slant3D order status updates and outputs \"\n\"the event details, including tracking information when orders are shipped.\"\n),\n#All webhooks are currently subscribed to for all orders.This works for self hosted,but not for cloud hosted prod\ndisabled=(\nsettings.Settings().config.behave_as==BehaveAs.CLOUD\nand settings.Settings().config.app_env!=AppEnvironment.LOCAL\n),\ncategories={BlockCategory.DEVELOPER_TOOLS},\ninput_schema=self.Input,\noutput_schema=self.Output,\nwebhook_config=BlockWebhookConfig(\nprovider=\"slant3d\",\nwebhook_type=\"orders\",#Only one type for now\nresource_format=\"\",#No resource format needed\nevent_filter_input=\"events\",\nevent_format=\"order.{event}\",\n),\ntest_input={\n\"credentials\":TEST_CREDENTIALS_INPUT,\n\"events\":{\"shipped\":True},\n\"payload\":{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"payload\",\n{\n\"orderId\":\"1234567890\",\n\"status\":\"SHIPPED\",\n\"trackingNumber\":\"ABCDEF123456\",\n\"carrierCode\":\"usps\",\n},\n),\n(\"order_id\",\"1234567890\"),\n(\"status\",\"SHIPPED\"),\n(\"tracking_number\",\"ABCDEF123456\"),\n(\"carrier_code\",\"usps\"),\n],\n)\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:#type:ignore\nyield from super().run(input_data,**kwargs)\n\n#Extract and normalize values from the payload\nyield \"status\",input_data.payload[\"status\"]\nyield \"tracking_number\",input_data.payload[\"trackingNumber\"]\nyield \"carrier_code\",input_data.payload[\"carrierCode\"]\n"
}