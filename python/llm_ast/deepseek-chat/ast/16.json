{
    "type": "Program",
    "name": "Global",
    "range": [
        0,
        1110
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                588,
                654
            ],
            "children": [
                {
                    "type": "PropertyDecl",
                    "name": "credentials",
                    "range": [
                        595,
                        602
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "HubSpotCredentialsInput",
                            "range": [
                                597,
                                597
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                598,
                                598
                            ],
                            "content": ""
                        },
                        {
                            "type": "CallExpression",
                            "name": "HubSpotCredentialsField",
                            "range": [
                                599,
                                601
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "operation",
                    "range": [
                        603,
                        619
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                605,
                                605
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                606,
                                606
                            ],
                            "content": ""
                        },
                        {
                            "type": "CallExpression",
                            "name": "SchemaField",
                            "range": [
                                607,
                                618
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        610,
                                        612
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Argument",
                                    "name": "default",
                                    "range": [
                                        614,
                                        616
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "contact_data",
                    "range": [
                        620,
                        637
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "dict",
                            "range": [
                                622,
                                622
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                623,
                                623
                            ],
                            "content": ""
                        },
                        {
                            "type": "CallExpression",
                            "name": "SchemaField",
                            "range": [
                                624,
                                636
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        627,
                                        629
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Argument",
                                    "name": "default",
                                    "range": [
                                        631,
                                        634
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "email",
                    "range": [
                        638,
                        654
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                640,
                                640
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                641,
                                641
                            ],
                            "content": ""
                        },
                        {
                            "type": "CallExpression",
                            "name": "SchemaField",
                            "range": [
                                642,
                                653
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        645,
                                        647
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Argument",
                                    "name": "default",
                                    "range": [
                                        649,
                                        651
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": "\n"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                655,
                683
            ],
            "children": [
                {
                    "type": "VariableDecl",
                    "name": "contact",
                    "range": [
                        662,
                        671
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "dict",
                            "range": [
                                664,
                                664
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                665,
                                665
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        666,
                                        671
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                668,
                                                670
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"Contact information\"",
                                                    "range": [
                                                        670,
                                                        670
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "VariableDecl",
                    "name": "status",
                    "range": [
                        673,
                        682
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                675,
                                675
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                676,
                                676
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        677,
                                        682
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                679,
                                                681
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"Operation status\"",
                                                    "range": [
                                                        681,
                                                        681
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                684,
                732
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        686,
                        688
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                687,
                                687
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "Block",
                    "name": "",
                    "range": [
                        689,
                        732
                    ],
                    "children": [
                        {
                            "type": "CallExpression",
                            "name": "SuperCall",
                            "range": [
                                691,
                                696
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "__init__",
                                    "range": [
                                        695,
                                        696
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "id",
                            "range": [
                                698,
                                700
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "5267326e-c4c1-4016-9f54-4e72ad02f813",
                                    "range": [
                                        700,
                                        700
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "description",
                            "range": [
                                703,
                                705
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "Manages HubSpot contacts - create, update, and retrieve contact information",
                                    "range": [
                                        705,
                                        705
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "categories",
                            "range": [
                                708,
                                714
                            ],
                            "children": [
                                {
                                    "type": "ObjectExpression",
                                    "name": "",
                                    "range": [
                                        710,
                                        714
                                    ],
                                    "children": [
                                        {
                                            "type": "Property",
                                            "name": "BlockCategory.CRM",
                                            "range": [
                                                711,
                                                713
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "input_schema",
                            "range": [
                                717,
                                722
                            ],
                            "children": [
                                {
                                    "type": "MemberExpression",
                                    "name": "HubSpotContactBlock.Input",
                                    "range": [
                                        719,
                                        721
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "output_schema",
                            "range": [
                                724,
                                728
                            ],
                            "children": [
                                {
                                    "type": "MemberExpression",
                                    "name": "HubSpotContactBlock.Output",
                                    "range": [
                                        726,
                                        728
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                733,
                1110
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "parameters",
                    "range": [
                        735,
                        752
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                737,
                                737
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "input_data",
                            "range": [
                                739,
                                741
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                745,
                                747
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "kwargs",
                            "range": [
                                751,
                                751
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        754,
                        756
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Block",
                    "name": "body",
                    "range": [
                        758,
                        1110
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "base_url",
                            "range": [
                                759,
                                761
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "headers",
                            "range": [
                                763,
                                778
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "if",
                            "range": [
                                781,
                                832
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "input_data.operation == \"create\"",
                                    "range": [
                                        782,
                                        787
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "then",
                                    "range": [
                                        789,
                                        832
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "response",
                                            "range": [
                                                790,
                                                813
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "result",
                                            "range": [
                                                815,
                                                821
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                823,
                                                826
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                828,
                                                831
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ElifStatement",
                            "name": "elif",
                            "range": [
                                834,
                                945
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "input_data.operation == \"get\"",
                                    "range": [
                                        835,
                                        840
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "then",
                                    "range": [
                                        842,
                                        945
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "search_url",
                                            "range": [
                                                850,
                                                853
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "search_data",
                                            "range": [
                                                855,
                                                896
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "response",
                                            "range": [
                                                898,
                                                913
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "result",
                                            "range": [
                                                915,
                                                921
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                923,
                                                940
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                941,
                                                944
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ElifStatement",
                            "name": "elif",
                            "range": [
                                947,
                                1109
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "input_data.operation == \"update\"",
                                    "range": [
                                        948,
                                        953
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "then",
                                    "range": [
                                        955,
                                        1109
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "search_response",
                                            "range": [
                                                956,
                                                1016
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "contact_id",
                                            "range": [
                                                1018,
                                                1042
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "IfStatement",
                                            "name": "if",
                                            "range": [
                                                1045,
                                                1095
                                            ],
                                            "children": [
                                                {
                                                    "type": "Condition",
                                                    "name": "contact_id",
                                                    "range": [
                                                        1046,
                                                        1046
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Block",
                                                    "name": "then",
                                                    "range": [
                                                        1048,
                                                        1095
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Assignment",
                                                            "name": "response",
                                                            "range": [
                                                                1049,
                                                                1076
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "Assignment",
                                                            "name": "result",
                                                            "range": [
                                                                1078,
                                                                1084
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "YieldStatement",
                                                            "name": "yield",
                                                            "range": [
                                                                1086,
                                                                1089
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "YieldStatement",
                                                            "name": "yield",
                                                            "range": [
                                                                1091,
                                                                1094
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        }
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "ElseStatement",
                                            "name": "else",
                                            "range": [
                                                1096,
                                                1109
                                            ],
                                            "children": [
                                                {
                                                    "type": "Block",
                                                    "name": "else",
                                                    "range": [
                                                        1098,
                                                        1109
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "YieldStatement",
                                                            "name": "yield",
                                                            "range": [
                                                                1099,
                                                                1104
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "YieldStatement",
                                                            "name": "yield",
                                                            "range": [
                                                                1105,
                                                                1108
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        }
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        }
    ],
    "content": "from backend.blocks.hubspot._auth import(\nHubSpotCredentials,\nHubSpotCredentialsField,\nHubSpotCredentialsInput,\n)\nfrom backend.data.block import Block,BlockCategory,BlockOutput,BlockSchema\nfrom backend.data.model import SchemaField\nfrom backend.util.request import requests\n\n\nclass HubSpotContactBlock(Block):\nclass Input(BlockSchema):\ncredentials:HubSpotCredentialsInput=HubSpotCredentialsField()\noperation:str=SchemaField(\ndescription=\"Operation to perform (create, update, get)\",default=\"get\"\n)\ncontact_data:dict=SchemaField(\ndescription=\"Contact data for create/update operations\",default={}\n)\nemail:str=SchemaField(\ndescription=\"Email address for get/update operations\",default=\"\"\n)\n\nclass Output(BlockSchema):\ncontact:dict=SchemaField(description=\"Contact information\")\nstatus:str=SchemaField(description=\"Operation status\")\n\ndef __init__(self):\nsuper().__init__(\nid=\"5267326e-c4c1-4016-9f54-4e72ad02f813\",\ndescription=\"Manages HubSpot contacts - create, update, and retrieve contact information\",\ncategories={BlockCategory.CRM},\ninput_schema=HubSpotContactBlock.Input,\noutput_schema=HubSpotContactBlock.Output,\n)\n\ndef run(\nself,input_data:Input,*,credentials:HubSpotCredentials,**kwargs\n)->BlockOutput:\nbase_url=\"https://api.hubapi.com/crm/v3/objects/contacts\"\nheaders={\n\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\",\n\"Content-Type\":\"application/json\",\n}\n\nif input_data.operation==\"create\":\nresponse=requests.post(\nbase_url,headers=headers,json={\"properties\":input_data.contact_data}\n)\nresult=response.json()\nyield \"contact\",result\nyield \"status\",\"created\"\n\nelif input_data.operation==\"get\":\n#Search for contact by email\nsearch_url=f \"{base_url}/search\"\nsearch_data={\n\"filterGroups\":[\n{\n\"filters\":[\n{\n\"propertyName\":\"email\",\n\"operator\":\"EQ\",\n\"value\":input_data.email,\n}\n]\n}\n]\n}\nresponse=requests.post(search_url,headers=headers,json=search_data)\nresult=response.json()\nyield \"contact\",result.get(\"results\",[{}])[0]\nyield \"status\",\"retrieved\"\n\nelif input_data.operation==\"update\":\nsearch_response=requests.post(\nf \"{base_url}/search\",\nheaders=headers,\njson={\n\"filterGroups\":[\n{\n\"filters\":[\n{\n\"propertyName\":\"email\",\n\"operator\":\"EQ\",\n\"value\":input_data.email,\n}\n]\n}\n]\n},\n)\ncontact_id=search_response.json().get(\"results\",[{}])[0].get(\"id\")\n\nif contact_id:\nresponse=requests.patch(\nf \"{base_url}/{contact_id}\",\nheaders=headers,\njson={\"properties\":input_data.contact_data},\n)\nresult=response.json()\nyield \"contact\",result\nyield \"status\",\"updated\"\nelse:\nyield \"contact\",{}\nyield \"status\",\"contact_not_found\"\n"
}