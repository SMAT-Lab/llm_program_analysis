{
    "type": "Program",
    "name": "Global",
    "range": [
        49,
        1014
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "TranscribeYoutubeVideoBlock",
            "range": [
                49,
                540
            ],
            "children": [
                {
                    "type": "ClassBody",
                    "range": [
                        55,
                        540
                    ],
                    "children": [
                        {
                            "type": "ClassDecl",
                            "name": "Input",
                            "range": [
                                56,
                                86
                            ],
                            "children": [
                                {
                                    "type": "ClassBody",
                                    "range": [
                                        62,
                                        86
                                    ],
                                    "children": [
                                        {
                                            "type": "FieldDecl",
                                            "name": "youtube_url",
                                            "range": [
                                                63,
                                                85
                                            ],
                                            "children": [
                                                {
                                                    "type": "TypeAnnotation",
                                                    "name": "str",
                                                    "range": [
                                                        65,
                                                        65
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                },
                                                {
                                                    "type": "Assignment",
                                                    "range": [
                                                        66,
                                                        85
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "SchemaField",
                                                            "range": [
                                                                67,
                                                                85
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "title",
                                                                    "range": [
                                                                        70,
                                                                        72
                                                                    ],
                                                                    "children": [],
                                                                    "content": "title=\"YouTube URL\""
                                                                },
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "description",
                                                                    "range": [
                                                                        75,
                                                                        77
                                                                    ],
                                                                    "children": [],
                                                                    "content": "description=\"The URL of the YouTube video to transcribe\""
                                                                },
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "placeholder",
                                                                    "range": [
                                                                        80,
                                                                        82
                                                                    ],
                                                                    "children": [],
                                                                    "content": "placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\""
                                                                }
                                                            ],
                                                            "content": "SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)"
                                                        }
                                                    ],
                                                    "content": "=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)"
                                                }
                                            ],
                                            "content": "youtube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)"
                                        }
                                    ],
                                    "content": "\nyoutube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)\n"
                                }
                            ],
                            "content": "class Input(BlockSchema):\nyoutube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)\n"
                        },
                        {
                            "type": "ClassDecl",
                            "name": "Output",
                            "range": [
                                88,
                                129
                            ],
                            "children": [
                                {
                                    "type": "ClassBody",
                                    "range": [
                                        94,
                                        129
                                    ],
                                    "children": [
                                        {
                                            "type": "FieldDecl",
                                            "name": "video_id",
                                            "range": [
                                                95,
                                                104
                                            ],
                                            "children": [
                                                {
                                                    "type": "TypeAnnotation",
                                                    "name": "str",
                                                    "range": [
                                                        97,
                                                        97
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                },
                                                {
                                                    "type": "Assignment",
                                                    "range": [
                                                        98,
                                                        104
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "SchemaField",
                                                            "range": [
                                                                99,
                                                                104
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "description",
                                                                    "range": [
                                                                        101,
                                                                        103
                                                                    ],
                                                                    "children": [],
                                                                    "content": "description=\"The extracted YouTube video ID\""
                                                                }
                                                            ],
                                                            "content": "SchemaField(description=\"The extracted YouTube video ID\")"
                                                        }
                                                    ],
                                                    "content": "=SchemaField(description=\"The extracted YouTube video ID\")"
                                                }
                                            ],
                                            "content": "video_id:str=SchemaField(description=\"The extracted YouTube video ID\")"
                                        },
                                        {
                                            "type": "FieldDecl",
                                            "name": "transcript",
                                            "range": [
                                                106,
                                                115
                                            ],
                                            "children": [
                                                {
                                                    "type": "TypeAnnotation",
                                                    "name": "str",
                                                    "range": [
                                                        108,
                                                        108
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                },
                                                {
                                                    "type": "Assignment",
                                                    "range": [
                                                        109,
                                                        115
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "SchemaField",
                                                            "range": [
                                                                110,
                                                                115
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "description",
                                                                    "range": [
                                                                        112,
                                                                        114
                                                                    ],
                                                                    "children": [],
                                                                    "content": "description=\"The transcribed text of the video\""
                                                                }
                                                            ],
                                                            "content": "SchemaField(description=\"The transcribed text of the video\")"
                                                        }
                                                    ],
                                                    "content": "=SchemaField(description=\"The transcribed text of the video\")"
                                                }
                                            ],
                                            "content": "transcript:str=SchemaField(description=\"The transcribed text of the video\")"
                                        },
                                        {
                                            "type": "FieldDecl",
                                            "name": "error",
                                            "range": [
                                                117,
                                                128
                                            ],
                                            "children": [
                                                {
                                                    "type": "TypeAnnotation",
                                                    "name": "str",
                                                    "range": [
                                                        119,
                                                        119
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                },
                                                {
                                                    "type": "Assignment",
                                                    "range": [
                                                        120,
                                                        128
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "SchemaField",
                                                            "range": [
                                                                121,
                                                                128
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "description",
                                                                    "range": [
                                                                        124,
                                                                        126
                                                                    ],
                                                                    "children": [],
                                                                    "content": "description=\"Any error message if the transcription fails\""
                                                                }
                                                            ],
                                                            "content": "SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)"
                                                        }
                                                    ],
                                                    "content": "=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)"
                                                }
                                            ],
                                            "content": "error:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)"
                                        }
                                    ],
                                    "content": "\nvideo_id:str=SchemaField(description=\"The extracted YouTube video ID\")\ntranscript:str=SchemaField(description=\"The transcribed text of the video\")\nerror:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)\n"
                                }
                            ],
                            "content": "class Output(BlockSchema):\nvideo_id:str=SchemaField(description=\"The extracted YouTube video ID\")\ntranscript:str=SchemaField(description=\"The transcribed text of the video\")\nerror:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)\n"
                        },
                        {
                            "type": "MethodDecl",
                            "name": "__init__",
                            "range": [
                                131,
                                244
                            ],
                            "children": [
                                {
                                    "type": "BlockStatement",
                                    "range": [
                                        137,
                                        244
                                    ],
                                    "children": [
                                        {
                                            "type": "ExpressionStatement",
                                            "range": [
                                                138,
                                                143
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "super",
                                                    "range": [
                                                        138,
                                                        143
                                                    ],
                                                    "children": [],
                                                    "content": "super().__init__("
                                                }
                                            ],
                                            "content": "super().__init__("
                                        },
                                        {
                                            "type": "ExpressionStatement",
                                            "range": [
                                                144,
                                                243
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "__init__",
                                                    "range": [
                                                        144,
                                                        243
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "id",
                                                            "range": [
                                                                145,
                                                                147
                                                            ],
                                                            "children": [],
                                                            "content": "id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\""
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "input_schema",
                                                            "range": [
                                                                150,
                                                                155
                                                            ],
                                                            "children": [],
                                                            "content": "input_schema=TranscribeYoutubeVideoBlock.Input,"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "output_schema",
                                                            "range": [
                                                                157,
                                                                162
                                                            ],
                                                            "children": [],
                                                            "content": "output_schema=TranscribeYoutubeVideoBlock.Output,"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "description",
                                                            "range": [
                                                                164,
                                                                166
                                                            ],
                                                            "children": [],
                                                            "content": "description=\"Transcribes a YouTube video.\""
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "categories",
                                                            "range": [
                                                                169,
                                                                175
                                                            ],
                                                            "children": [],
                                                            "content": "categories={BlockCategory.SOCIAL}"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "test_input",
                                                            "range": [
                                                                178,
                                                                184
                                                            ],
                                                            "children": [],
                                                            "content": "test_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"}"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "test_output",
                                                            "range": [
                                                                187,
                                                                209
                                                            ],
                                                            "children": [],
                                                            "content": "test_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n]"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "test_mock",
                                                            "range": [
                                                                212,
                                                                240
                                                            ],
                                                            "children": [],
                                                            "content": "test_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n}"
                                                        }
                                                    ],
                                                    "content": "\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)"
                                                }
                                            ],
                                            "content": "\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)"
                                        }
                                    ],
                                    "content": "\nsuper().__init__(\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)\n"
                                }
                            ],
                            "content": "def __init__(self):\nsuper().__init__(\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)\n"
                        },
                        {
                            "type": "MethodDecl",
                            "name": "extract_video_id",
                            "range": [
                                246,
                                383
                            ],
                            "children": [
                                {
                                    "type": "BlockStatement",
                                    "range": [
                                        260,
                                        383
                                    ],
                                    "children": [
                                        {
                                            "type": "VariableDecl",
                                            "name": "parsed_url",
                                            "range": [
                                                261,
                                                267
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "urlparse",
                                                    "range": [
                                                        263,
                                                        267
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "url",
                                                            "range": [
                                                                265,
                                                                265
                                                            ],
                                                            "children": [],
                                                            "content": "url"
                                                        }
                                                    ],
                                                    "content": "urlparse(url)\n"
                                                }
                                            ],
                                            "content": "parsed_url=urlparse(url)\n"
                                        },
                                        {
                                            "type": "IfStatement",
                                            "range": [
                                                268,
                                                285
                                            ],
                                            "children": [
                                                {
                                                    "type": "BinaryExpression",
                                                    "range": [
                                                        269,
                                                        274
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "MemberExpression",
                                                            "name": "netloc",
                                                            "range": [
                                                                269,
                                                                271
                                                            ],
                                                            "children": [],
                                                            "content": "parsed_url.netloc"
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "value": "\"youtu.be\"",
                                                            "range": [
                                                                273,
                                                                274
                                                            ],
                                                            "children": [],
                                                            "content": "=\"youtu.be\""
                                                        }
                                                    ],
                                                    "content": "parsed_url.netloc==\"youtu.be\""
                                                },
                                                {
                                                    "type": "BlockStatement",
                                                    "range": [
                                                        276,
                                                        285
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "ReturnStatement",
                                                            "range": [
                                                                277,
                                                                285
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "path",
                                                                    "range": [
                                                                        278,
                                                                        280
                                                                    ],
                                                                    "children": [],
                                                                    "content": "parsed_url.path"
                                                                }
                                                            ],
                                                            "content": "return parsed_url.path[1:]\n"
                                                        }
                                                    ],
                                                    "content": "\nreturn parsed_url.path[1:]\n"
                                                }
                                            ],
                                            "content": "if parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\n"
                                        },
                                        {
                                            "type": "IfStatement",
                                            "range": [
                                                286,
                                                376
                                            ],
                                            "children": [
                                                {
                                                    "type": "BinaryExpression",
                                                    "range": [
                                                        287,
                                                        295
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "MemberExpression",
                                                            "name": "netloc",
                                                            "range": [
                                                                287,
                                                                289
                                                            ],
                                                            "children": [],
                                                            "content": "parsed_url.netloc"
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "value": "(\"www.youtube.com\",\"youtube.com\")",
                                                            "range": [
                                                                291,
                                                                295
                                                            ],
                                                            "children": [],
                                                            "content": "(\"www.youtube.com\",\"youtube.com\")"
                                                        }
                                                    ],
                                                    "content": "parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\")"
                                                },
                                                {
                                                    "type": "BlockStatement",
                                                    "range": [
                                                        297,
                                                        376
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "IfStatement",
                                                            "range": [
                                                                298,
                                                                324
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "BinaryExpression",
                                                                    "range": [
                                                                        299,
                                                                        304
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "name": "path",
                                                                            "range": [
                                                                                299,
                                                                                301
                                                                            ],
                                                                            "children": [],
                                                                            "content": "parsed_url.path"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "value": "\"/watch\"",
                                                                            "range": [
                                                                                303,
                                                                                304
                                                                            ],
                                                                            "children": [],
                                                                            "content": "=\"/watch\""
                                                                        }
                                                                    ],
                                                                    "content": "parsed_url.path==\"/watch\""
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "range": [
                                                                        306,
                                                                        324
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "VariableDecl",
                                                                            "name": "p",
                                                                            "range": [
                                                                                307,
                                                                                315
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "CallExpression",
                                                                                    "name": "parse_qs",
                                                                                    "range": [
                                                                                        309,
                                                                                        315
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "Argument",
                                                                                            "name": "parsed_url.query",
                                                                                            "range": [
                                                                                                311,
                                                                                                313
                                                                                            ],
                                                                                            "children": [],
                                                                                            "content": "parsed_url.query"
                                                                                        }
                                                                                    ],
                                                                                    "content": "parse_qs(parsed_url.query)\n"
                                                                                }
                                                                            ],
                                                                            "content": "p=parse_qs(parsed_url.query)\n"
                                                                        },
                                                                        {
                                                                            "type": "ReturnStatement",
                                                                            "range": [
                                                                                316,
                                                                                324
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "MemberExpression",
                                                                                    "name": "p[\"v\"]",
                                                                                    "range": [
                                                                                        317,
                                                                                        320
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "p[\"v\"]"
                                                                                }
                                                                            ],
                                                                            "content": "return p[\"v\"][0]\n"
                                                                        }
                                                                    ],
                                                                    "content": "\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\n"
                                                                }
                                                            ],
                                                            "content": "if parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\n"
                                                        },
                                                        {
                                                            "type": "IfStatement",
                                                            "range": [
                                                                325,
                                                                350
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "BinaryExpression",
                                                                    "range": [
                                                                        326,
                                                                        335
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "name": "path",
                                                                            "range": [
                                                                                326,
                                                                                328
                                                                            ],
                                                                            "children": [],
                                                                            "content": "parsed_url.path"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "value": "\"/embed/\"",
                                                                            "range": [
                                                                                334,
                                                                                335
                                                                            ],
                                                                            "children": [],
                                                                            "content": "=\"/embed/\""
                                                                        }
                                                                    ],
                                                                    "content": "parsed_url.path[:7]==\"/embed/\""
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "range": [
                                                                        337,
                                                                        350
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ReturnStatement",
                                                                            "range": [
                                                                                338,
                                                                                350
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "MemberExpression",
                                                                                    "name": "path",
                                                                                    "range": [
                                                                                        339,
                                                                                        341
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "parsed_url.path"
                                                                                }
                                                                            ],
                                                                            "content": "return parsed_url.path.split(\"/\")[2]\n"
                                                                        }
                                                                    ],
                                                                    "content": "\nreturn parsed_url.path.split(\"/\")[2]\n"
                                                                }
                                                            ],
                                                            "content": "if parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\n"
                                                        },
                                                        {
                                                            "type": "IfStatement",
                                                            "range": [
                                                                351,
                                                                376
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "BinaryExpression",
                                                                    "range": [
                                                                        352,
                                                                        361
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "name": "path",
                                                                            "range": [
                                                                                352,
                                                                                354
                                                                            ],
                                                                            "children": [],
                                                                            "content": "parsed_url.path"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "value": "\"/v/\"",
                                                                            "range": [
                                                                                360,
                                                                                361
                                                                            ],
                                                                            "children": [],
                                                                            "content": "=\"/v/\""
                                                                        }
                                                                    ],
                                                                    "content": "parsed_url.path[:3]==\"/v/\""
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "range": [
                                                                        363,
                                                                        376
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ReturnStatement",
                                                                            "range": [
                                                                                364,
                                                                                376
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "MemberExpression",
                                                                                    "name": "path",
                                                                                    "range": [
                                                                                        365,
                                                                                        367
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "parsed_url.path"
                                                                                }
                                                                            ],
                                                                            "content": "return parsed_url.path.split(\"/\")[2]\n"
                                                                        }
                                                                    ],
                                                                    "content": "\nreturn parsed_url.path.split(\"/\")[2]\n"
                                                                }
                                                            ],
                                                            "content": "if parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\n"
                                                        }
                                                    ],
                                                    "content": "\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\n"
                                                }
                                            ],
                                            "content": "if parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\n"
                                        },
                                        {
                                            "type": "ThrowStatement",
                                            "range": [
                                                377,
                                                383
                                            ],
                                            "children": [
                                                {
                                                    "type": "NewExpression",
                                                    "name": "ValueError",
                                                    "range": [
                                                        378,
                                                        383
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "value": "f\"Invalid YouTube URL: {url}\"",
                                                            "range": [
                                                                380,
                                                                382
                                                            ],
                                                            "children": [],
                                                            "content": "f \"Invalid YouTube URL: {url}\")"
                                                        }
                                                    ],
                                                    "content": "ValueError(f \"Invalid YouTube URL: {url}\")\n"
                                                }
                                            ],
                                            "content": "raise ValueError(f \"Invalid YouTube URL: {url}\")\n"
                                        }
                                    ],
                                    "content": "\nparsed_url=urlparse(url)\nif parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\nif parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\nraise ValueError(f \"Invalid YouTube URL: {url}\")\n"
                                }
                            ],
                            "content": "@staticmethod\ndef extract_video_id(url:str)->str:\nparsed_url=urlparse(url)\nif parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\nif parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\nraise ValueError(f \"Invalid YouTube URL: {url}\")\n"
                        },
                        {
                            "type": "MethodDecl",
                            "name": "get_transcript",
                            "range": [
                                385,
                                473
                            ],
                            "children": [
                                {
                                    "type": "BlockStatement",
                                    "range": [
                                        396,
                                        473
                                    ],
                                    "children": [
                                        {
                                            "type": "TryStatement",
                                            "range": [
                                                397,
                                                473
                                            ],
                                            "children": [
                                                {
                                                    "type": "BlockStatement",
                                                    "range": [
                                                        399,
                                                        462
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "VariableDecl",
                                                            "name": "transcript_list",
                                                            "range": [
                                                                400,
                                                                408
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "YouTubeTranscriptApi.list_transcripts",
                                                                    "range": [
                                                                        402,
                                                                        408
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Argument",
                                                                            "name": "video_id",
                                                                            "range": [
                                                                                406,
                                                                                406
                                                                            ],
                                                                            "children": [],
                                                                            "content": "video_id"
                                                                        }
                                                                    ],
                                                                    "content": "YouTubeTranscriptApi.list_transcripts(video_id)\n"
                                                                }
                                                            ],
                                                            "content": "transcript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n"
                                                        },
                                                        {
                                                            "type": "IfStatement",
                                                            "range": [
                                                                410,
                                                                421
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "UnaryExpression",
                                                                    "operator": "not",
                                                                    "range": [
                                                                        411,
                                                                        412
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "transcript_list",
                                                                            "range": [
                                                                                412,
                                                                                412
                                                                            ],
                                                                            "children": [],
                                                                            "content": "transcript_list"
                                                                        }
                                                                    ],
                                                                    "content": "not transcript_list"
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "range": [
                                                                        414,
                                                                        421
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "ThrowStatement",
                                                                            "range": [
                                                                                415,
                                                                                421
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "NewExpression",
                                                                                    "name": "ValueError",
                                                                                    "range": [
                                                                                        416,
                                                                                        421
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "Literal",
                                                                                            "value": "f\"No transcripts found for the video: {video_id}\"",
                                                                                            "range": [
                                                                                                418,
                                                                                                420
                                                                                            ],
                                                                                            "children": [],
                                                                                            "content": "f \"No transcripts found for the video: {video_id}\")"
                                                                                        }
                                                                                    ],
                                                                                    "content": "ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                                                }
                                                                            ],
                                                                            "content": "raise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                                        }
                                                                    ],
                                                                    "content": "\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                                }
                                                            ],
                                                            "content": "if not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                        },
                                                        {
                                                            "type": "ForStatement",
                                                            "range": [
                                                                423,
                                                                461
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "VariableDecl",
                                                                    "name": "transcript",
                                                                    "range": [
                                                                        424,
                                                                        426
                                                                    ],
                                                                    "children": [],
                                                                    "content": "transcript in transcript_list"
                                                                },
                                                                {
                                                                    "type": "BlockStatement",
                                                                    "range": [
                                                                        428,
                                                                        461
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "VariableDecl",
                                                                            "name": "first_transcript",
                                                                            "range": [
                                                                                429,
                                                                                442
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "CallExpression",
                                                                                    "name": "transcript_list.find_transcript",
                                                                                    "range": [
                                                                                        433,
                                                                                        442
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "Argument",
                                                                                            "name": "[transcript.language_code]",
                                                                                            "range": [
                                                                                                436,
                                                                                                440
                                                                                            ],
                                                                                            "children": [],
                                                                                            "content": "[transcript.language_code]"
                                                                                        }
                                                                                    ],
                                                                                    "content": "find_transcript(\n[transcript.language_code]\n)"
                                                                                }
                                                                            ],
                                                                            "content": "first_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)"
                                                                        },
                                                                        {
                                                                            "type": "ReturnStatement",
                                                                            "range": [
                                                                                444,
                                                                                461
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "CallExpression",
                                                                                    "name": "YouTubeTranscriptApi.get_transcript",
                                                                                    "range": [
                                                                                        447,
                                                                                        461
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "Argument",
                                                                                            "name": "video_id",
                                                                                            "range": [
                                                                                                450,
                                                                                                450
                                                                                            ],
                                                                                            "children": [],
                                                                                            "content": "video_id"
                                                                                        },
                                                                                        {
                                                                                            "type": "Argument",
                                                                                            "name": "languages",
                                                                                            "range": [
                                                                                                453,
                                                                                                458
                                                                                            ],
                                                                                            "children": [],
                                                                                            "content": "=[first_transcript.language_code]"
                                                                                        }
                                                                                    ],
                                                                                    "content": "get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n"
                                                                                }
                                                                            ],
                                                                            "content": "return YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n"
                                                                        }
                                                                    ],
                                                                    "content": "\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n"
                                                                }
                                                            ],
                                                            "content": "for transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n"
                                                        }
                                                    ],
                                                    "content": "\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\n"
                                                },
                                                {
                                                    "type": "CatchClause",
                                                    "range": [
                                                        463,
                                                        473
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "BlockStatement",
                                                            "range": [
                                                                466,
                                                                473
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ThrowStatement",
                                                                    "range": [
                                                                        467,
                                                                        473
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "NewExpression",
                                                                            "name": "ValueError",
                                                                            "range": [
                                                                                468,
                                                                                473
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Literal",
                                                                                    "value": "f\"No transcripts found for the video: {video_id}\"",
                                                                                    "range": [
                                                                                        470,
                                                                                        472
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "f \"No transcripts found for the video: {video_id}\")"
                                                                                }
                                                                            ],
                                                                            "content": "ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                                        }
                                                                    ],
                                                                    "content": "raise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                                }
                                                            ],
                                                            "content": "\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                        }
                                                    ],
                                                    "content": "except Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                                }
                                            ],
                                            "content": "try:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                        }
                                    ],
                                    "content": "\ntry:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                                }
                            ],
                            "content": "@staticmethod\ndef get_transcript(video_id:str):\ntry:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n"
                        },
                        {
                            "type": "MethodDecl",
                            "name": "run",
                            "range": [
                                475,
                                540
                            ],
                            "children": [
                                {
                                    "type": "BlockStatement",
                                    "range": [
                                        492,
                                        540
                                    ],
                                    "children": [
                                        {
                                            "type": "VariableDecl",
                                            "name": "video_id",
                                            "range": [
                                                493,
                                                503
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "self.extract_video_id",
                                                    "range": [
                                                        497,
                                                        503
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "input_data.youtube_url",
                                                            "range": [
                                                                499,
                                                                501
                                                            ],
                                                            "children": [],
                                                            "content": "input_data.youtube_url"
                                                        }
                                                    ],
                                                    "content": "extract_video_id(input_data.youtube_url)\n"
                                                }
                                            ],
                                            "content": "video_id=self.extract_video_id(input_data.youtube_url)\n"
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "range": [
                                                504,
                                                508
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "value": "\"video_id\"",
                                                    "range": [
                                                        505,
                                                        505
                                                    ],
                                                    "children": [],
                                                    "content": "\"video_id\""
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "video_id",
                                                    "range": [
                                                        507,
                                                        507
                                                    ],
                                                    "children": [],
                                                    "content": "video_id"
                                                }
                                            ],
                                            "content": "yield \"video_id\",video_id\n"
                                        },
                                        {
                                            "type": "VariableDecl",
                                            "name": "transcript",
                                            "range": [
                                                510,
                                                518
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "self.get_transcript",
                                                    "range": [
                                                        514,
                                                        518
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "video_id",
                                                            "range": [
                                                                516,
                                                                516
                                                            ],
                                                            "children": [],
                                                            "content": "video_id"
                                                        }
                                                    ],
                                                    "content": "get_transcript(video_id)\n"
                                                }
                                            ],
                                            "content": "transcript=self.get_transcript(video_id)\n"
                                        },
                                        {
                                            "type": "VariableDecl",
                                            "name": "formatter",
                                            "range": [
                                                519,
                                                524
                                            ],
                                            "children": [
                                                {
                                                    "type": "NewExpression",
                                                    "name": "TextFormatter",
                                                    "range": [
                                                        521,
                                                        524
                                                    ],
                                                    "children": [],
                                                    "content": "TextFormatter()\n"
                                                }
                                            ],
                                            "content": "formatter=TextFormatter()\n"
                                        },
                                        {
                                            "type": "VariableDecl",
                                            "name": "transcript_text",
                                            "range": [
                                                525,
                                                533
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "formatter.format_transcript",
                                                    "range": [
                                                        529,
                                                        533
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "transcript",
                                                            "range": [
                                                                531,
                                                                531
                                                            ],
                                                            "children": [],
                                                            "content": "transcript"
                                                        }
                                                    ],
                                                    "content": "format_transcript(transcript)\n"
                                                }
                                            ],
                                            "content": "transcript_text=formatter.format_transcript(transcript)\n"
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "range": [
                                                535,
                                                539
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "value": "\"transcript\"",
                                                    "range": [
                                                        536,
                                                        536
                                                    ],
                                                    "children": [],
                                                    "content": "\"transcript\""
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "transcript_text",
                                                    "range": [
                                                        538,
                                                        538
                                                    ],
                                                    "children": [],
                                                    "content": "transcript_text"
                                                }
                                            ],
                                            "content": "yield \"transcript\",transcript_text\n"
                                        }
                                    ],
                                    "content": "\nvideo_id=self.extract_video_id(input_data.youtube_url)\nyield \"video_id\",video_id\n\ntranscript=self.get_transcript(video_id)\nformatter=TextFormatter()\ntranscript_text=formatter.format_transcript(transcript)\n\nyield \"transcript\",transcript_text\n"
                                }
                            ],
                            "content": "def run(self,input_data:Input,**kwargs)->BlockOutput:\nvideo_id=self.extract_video_id(input_data.youtube_url)\nyield \"video_id\",video_id\n\ntranscript=self.get_transcript(video_id)\nformatter=TextFormatter()\ntranscript_text=formatter.format_transcript(transcript)\n\nyield \"transcript\",transcript_text\n"
                        }
                    ],
                    "content": "\nclass Input(BlockSchema):\nyoutube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)\n\nclass Output(BlockSchema):\nvideo_id:str=SchemaField(description=\"The extracted YouTube video ID\")\ntranscript:str=SchemaField(description=\"The transcribed text of the video\")\nerror:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)\n\n@staticmethod\ndef extract_video_id(url:str)->str:\nparsed_url=urlparse(url)\nif parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\nif parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\nraise ValueError(f \"Invalid YouTube URL: {url}\")\n\n@staticmethod\ndef get_transcript(video_id:str):\ntry:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nvideo_id=self.extract_video_id(input_data.youtube_url)\nyield \"video_id\",video_id\n\ntranscript=self.get_transcript(video_id)\nformatter=TextFormatter()\ntranscript_text=formatter.format_transcript(transcript)\n\nyield \"transcript\",transcript_text\n"
                }
            ],
            "content": "class TranscribeYoutubeVideoBlock(Block):\nclass Input(BlockSchema):\nyoutube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)\n\nclass Output(BlockSchema):\nvideo_id:str=SchemaField(description=\"The extracted YouTube video ID\")\ntranscript:str=SchemaField(description=\"The transcribed text of the video\")\nerror:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)\n\n@staticmethod\ndef extract_video_id(url:str)->str:\nparsed_url=urlparse(url)\nif parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\nif parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\nraise ValueError(f \"Invalid YouTube URL: {url}\")\n\n@staticmethod\ndef get_transcript(video_id:str):\ntry:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nvideo_id=self.extract_video_id(input_data.youtube_url)\nyield \"video_id\",video_id\n\ntranscript=self.get_transcript(video_id)\nformatter=TextFormatter()\ntranscript_text=formatter.format_transcript(transcript)\n\nyield \"transcript\",transcript_text\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                541,
                571
            ],
            "children": [
                {
                    "type": "Block",
                    "name": "",
                    "range": [
                        543,
                        545
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "FieldDecl",
                    "name": "youtube_url",
                    "range": [
                        548,
                        570
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                549,
                                550
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "SchemaField",
                            "name": "",
                            "range": [
                                552,
                                570
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "title",
                                    "range": [
                                        555,
                                        557
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        560,
                                        562
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Argument",
                                    "name": "placeholder",
                                    "range": [
                                        565,
                                        567
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                572,
                613
            ],
            "children": [
                {
                    "type": "FieldDecl",
                    "name": "video_id",
                    "range": [
                        579,
                        588
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                581,
                                581
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                582,
                                582
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        583,
                                        588
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                585,
                                                587
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"The extracted YouTube video ID\"",
                                                    "range": [
                                                        587,
                                                        587
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "FieldDecl",
                    "name": "transcript",
                    "range": [
                        590,
                        599
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                592,
                                592
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                593,
                                593
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        594,
                                        599
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                596,
                                                598
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"The transcribed text of the video\"",
                                                    "range": [
                                                        598,
                                                        598
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "FieldDecl",
                    "name": "error",
                    "range": [
                        601,
                        612
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                603,
                                603
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                604,
                                604
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        605,
                                        612
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                608,
                                                610
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"Any error message if the transcription fails\"",
                                                    "range": [
                                                        610,
                                                        610
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                614,
                727
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "",
                    "range": [
                        616,
                        618
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                617,
                                617
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        619,
                        727
                    ],
                    "children": [
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                621,
                                626
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "",
                                    "range": [
                                        622,
                                        625
                                    ],
                                    "children": [
                                        {
                                            "type": "Super",
                                            "name": "",
                                            "range": [
                                                622,
                                                625
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                628,
                                630
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "id",
                                    "range": [
                                        628,
                                        630
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                633,
                                638
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "input_schema",
                                    "range": [
                                        633,
                                        638
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                640,
                                645
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "output_schema",
                                    "range": [
                                        640,
                                        645
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                647,
                                650
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "description",
                                    "range": [
                                        647,
                                        650
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                652,
                                659
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "categories",
                                    "range": [
                                        652,
                                        659
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                661,
                                668
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "test_input",
                                    "range": [
                                        661,
                                        668
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                670,
                                693
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "test_output",
                                    "range": [
                                        670,
                                        693
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "",
                            "range": [
                                695,
                                724
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "name": "test_mock",
                                    "range": [
                                        695,
                                        724
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "extract_video_id",
            "range": [
                728,
                862
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "url",
                    "range": [
                        731,
                        733
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "str",
                    "range": [
                        737,
                        737
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Block",
                    "name": "",
                    "range": [
                        739,
                        862
                    ],
                    "children": [
                        {
                            "type": "VariableDecl",
                            "name": "parsed_url",
                            "range": [
                                740,
                                745
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "urlparse",
                                    "range": [
                                        742,
                                        745
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "url",
                                            "range": [
                                                744,
                                                744
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "",
                            "range": [
                                747,
                                764
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "",
                                    "range": [
                                        748,
                                        753
                                    ],
                                    "children": [
                                        {
                                            "type": "BinaryExpression",
                                            "name": "==",
                                            "range": [
                                                751,
                                                752
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.netloc",
                                                    "range": [
                                                        748,
                                                        750
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Literal",
                                                    "name": "\"youtu.be\"",
                                                    "range": [
                                                        753,
                                                        753
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "",
                                    "range": [
                                        755,
                                        764
                                    ],
                                    "children": [
                                        {
                                            "type": "ReturnStatement",
                                            "name": "",
                                            "range": [
                                                756,
                                                763
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.path",
                                                    "range": [
                                                        757,
                                                        759
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Literal",
                                                    "name": "1",
                                                    "range": [
                                                        761,
                                                        761
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "",
                            "range": [
                                765,
                                803
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "",
                                    "range": [
                                        766,
                                        774
                                    ],
                                    "children": [
                                        {
                                            "type": "BinaryExpression",
                                            "name": "in",
                                            "range": [
                                                769,
                                                769
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.netloc",
                                                    "range": [
                                                        766,
                                                        768
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "ArrayExpression",
                                                    "name": "",
                                                    "range": [
                                                        770,
                                                        774
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"www.youtube.com\"",
                                                            "range": [
                                                                771,
                                                                771
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"youtube.com\"",
                                                            "range": [
                                                                773,
                                                                773
                                                            ],
                                                            "children": [],
                                                            "content": ""
                                                        }
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "",
                                    "range": [
                                        776,
                                        803
                                    ],
                                    "children": [
                                        {
                                            "type": "IfStatement",
                                            "name": "",
                                            "range": [
                                                777,
                                                803
                                            ],
                                            "children": [
                                                {
                                                    "type": "Condition",
                                                    "name": "",
                                                    "range": [
                                                        778,
                                                        783
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "BinaryExpression",
                                                            "name": "==",
                                                            "range": [
                                                                781,
                                                                782
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "parsed_url.path",
                                                                    "range": [
                                                                        778,
                                                                        780
                                                                    ],
                                                                    "children": [],
                                                                    "content": ""
                                                                },
                                                                {
                                                                    "type": "Literal",
                                                                    "name": "\"/watch\"",
                                                                    "range": [
                                                                        783,
                                                                        783
                                                                    ],
                                                                    "children": [],
                                                                    "content": ""
                                                                }
                                                            ],
                                                            "content": ""
                                                        }
                                                    ],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Block",
                                                    "name": "",
                                                    "range": [
                                                        785,
                                                        803
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "VariableDecl",
                                                            "name": "p",
                                                            "range": [
                                                                786,
                                                                793
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "parse_qs",
                                                                    "range": [
                                                                        788,
                                                                        793
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Argument",
                                                                            "name": "parsed_url.query",
                                                                            "range": [
                                                                                790,
                                                                                792
                                                                            ],
                                                                            "children": [],
                                                                            "content": ""
                                                                        }
                                                                    ],
                                                                    "content": ""
                                                                }
                                                            ],
                                                            "content": ""
                                                        },
                                                        {
                                                            "type": "ReturnStatement",
                                                            "name": "",
                                                            "range": [
                                                                795,
                                                                802
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "p[\"v\"]",
                                                                    "range": [
                                                                        796,
                                                                        799
                                                                    ],
                                                                    "children": [],
                                                                    "content": ""
                                                                },
                                                                {
                                                                    "type": "Literal",
                                                                    "name": "0",
                                                                    "range": [
                                                                        801,
                                                                        801
                                                                    ],
                                                                    "children": [],
                                                                    "content": ""
                                                                }
                                                            ],
                                                            "content": ""
                                                        }
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "",
                            "range": [
                                804,
                                829
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "",
                                    "range": [
                                        805,
                                        814
                                    ],
                                    "children": [
                                        {
                                            "type": "BinaryExpression",
                                            "name": "==",
                                            "range": [
                                                812,
                                                813
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.path[:7]",
                                                    "range": [
                                                        805,
                                                        811
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Literal",
                                                    "name": "\"/embed/\"",
                                                    "range": [
                                                        814,
                                                        814
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "",
                                    "range": [
                                        816,
                                        829
                                    ],
                                    "children": [
                                        {
                                            "type": "ReturnStatement",
                                            "name": "",
                                            "range": [
                                                817,
                                                828
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.path.split(\"/\")[2]",
                                                    "range": [
                                                        818,
                                                        827
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "",
                            "range": [
                                830,
                                855
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "",
                                    "range": [
                                        831,
                                        840
                                    ],
                                    "children": [
                                        {
                                            "type": "BinaryExpression",
                                            "name": "==",
                                            "range": [
                                                838,
                                                839
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.path[:3]",
                                                    "range": [
                                                        831,
                                                        837
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Literal",
                                                    "name": "\"/v/\"",
                                                    "range": [
                                                        840,
                                                        840
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "Block",
                                    "name": "",
                                    "range": [
                                        842,
                                        855
                                    ],
                                    "children": [
                                        {
                                            "type": "ReturnStatement",
                                            "name": "",
                                            "range": [
                                                843,
                                                854
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": "parsed_url.path.split(\"/\")[2]",
                                                    "range": [
                                                        844,
                                                        853
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "RaiseStatement",
                            "name": "",
                            "range": [
                                856,
                                861
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "ValueError",
                                    "range": [
                                        857,
                                        861
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "f\"Invalid YouTube URL: {url}\"",
                                            "range": [
                                                859,
                                                860
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "get_transcript",
            "range": [
                863,
                948
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "video_id",
                    "range": [
                        866,
                        868
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "TryStatement",
                    "name": "",
                    "range": [
                        872,
                        948
                    ],
                    "children": [
                        {
                            "type": "BlockStatement",
                            "name": "",
                            "range": [
                                874,
                                937
                            ],
                            "children": [
                                {
                                    "type": "VariableDecl",
                                    "name": "transcript_list",
                                    "range": [
                                        875,
                                        882
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "",
                                    "range": [
                                        885,
                                        896
                                    ],
                                    "children": [
                                        {
                                            "type": "UnaryExpression",
                                            "name": "not",
                                            "range": [
                                                886,
                                                887
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "",
                                            "range": [
                                                889,
                                                896
                                            ],
                                            "children": [
                                                {
                                                    "type": "ThrowStatement",
                                                    "name": "",
                                                    "range": [
                                                        890,
                                                        895
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "ForStatement",
                                    "name": "",
                                    "range": [
                                        898,
                                        936
                                    ],
                                    "children": [
                                        {
                                            "type": "VariableDecl",
                                            "name": "transcript",
                                            "range": [
                                                899,
                                                901
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "",
                                            "range": [
                                                903,
                                                936
                                            ],
                                            "children": [
                                                {
                                                    "type": "VariableDecl",
                                                    "name": "first_transcript",
                                                    "range": [
                                                        904,
                                                        917
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "ReturnStatement",
                                                    "name": "",
                                                    "range": [
                                                        919,
                                                        935
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "CatchClause",
                            "name": "",
                            "range": [
                                938,
                                948
                            ],
                            "children": [
                                {
                                    "type": "BlockStatement",
                                    "name": "",
                                    "range": [
                                        941,
                                        948
                                    ],
                                    "children": [
                                        {
                                            "type": "ThrowStatement",
                                            "name": "",
                                            "range": [
                                                942,
                                                947
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                949,
                1014
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        952,
                        952
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Parameter",
                    "name": "input_data",
                    "range": [
                        954,
                        954
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Parameter",
                    "name": "kwargs",
                    "range": [
                        960,
                        960
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        964,
                        964
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "VariableDecl",
                    "name": "video_id",
                    "range": [
                        967,
                        976
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                968,
                                968
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "video_id",
                                    "range": [
                                        967,
                                        967
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "extract_video_id",
                                    "range": [
                                        971,
                                        976
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "self",
                                            "range": [
                                                969,
                                                969
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "extract_video_id",
                                            "range": [
                                                971,
                                                971
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "youtube_url",
                                            "range": [
                                                975,
                                                975
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "YieldStatement",
                    "name": "yield",
                    "range": [
                        978,
                        981
                    ],
                    "children": [
                        {
                            "type": "YieldExpression",
                            "name": "yield",
                            "range": [
                                978,
                                978
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"video_id\"",
                                    "range": [
                                        979,
                                        979
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "video_id",
                                    "range": [
                                        981,
                                        981
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "VariableDecl",
                    "name": "transcript",
                    "range": [
                        984,
                        991
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                985,
                                985
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "transcript",
                                    "range": [
                                        984,
                                        984
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "get_transcript",
                                    "range": [
                                        988,
                                        991
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "self",
                                            "range": [
                                                986,
                                                986
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "get_transcript",
                                            "range": [
                                                988,
                                                988
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "video_id",
                                            "range": [
                                                990,
                                                990
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "VariableDecl",
                    "name": "formatter",
                    "range": [
                        993,
                        997
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                994,
                                994
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "formatter",
                                    "range": [
                                        993,
                                        993
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "NewExpression",
                                    "name": "TextFormatter",
                                    "range": [
                                        995,
                                        997
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "TextFormatter",
                                            "range": [
                                                995,
                                                995
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "VariableDecl",
                    "name": "transcript_text",
                    "range": [
                        999,
                        1006
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                1000,
                                1000
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "transcript_text",
                                    "range": [
                                        999,
                                        999
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "format_transcript",
                                    "range": [
                                        1003,
                                        1006
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "formatter",
                                            "range": [
                                                1001,
                                                1001
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "format_transcript",
                                            "range": [
                                                1003,
                                                1003
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "transcript",
                                            "range": [
                                                1005,
                                                1005
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "YieldStatement",
                    "name": "yield",
                    "range": [
                        1009,
                        1012
                    ],
                    "children": [
                        {
                            "type": "YieldExpression",
                            "name": "yield",
                            "range": [
                                1009,
                                1009
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"transcript\"",
                                    "range": [
                                        1010,
                                        1010
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "transcript_text",
                                    "range": [
                                        1012,
                                        1012
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        }
    ],
    "content": "class TranscribeYoutubeVideoBlock(Block):\nclass Input(BlockSchema):\nyoutube_url:str=SchemaField(\ntitle=\"YouTube URL\",\ndescription=\"The URL of the YouTube video to transcribe\",\nplaceholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n)\n\nclass Output(BlockSchema):\nvideo_id:str=SchemaField(description=\"The extracted YouTube video ID\")\ntranscript:str=SchemaField(description=\"The transcribed text of the video\")\nerror:str=SchemaField(\ndescription=\"Any error message if the transcription fails\"\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\ninput_schema=TranscribeYoutubeVideoBlock.Input,\noutput_schema=TranscribeYoutubeVideoBlock.Output,\ndescription=\"Transcribes a YouTube video.\",\ncategories={BlockCategory.SOCIAL},\ntest_input={\"youtube_url\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\ntest_output=[\n(\"video_id\",\"dQw4w9WgXcQ\"),\n(\n\"transcript\",\n\"Never gonna give you up\\nNever gonna let you down\",\n),\n],\ntest_mock={\n\"get_transcript\":lambda video_id:[\n{\"text\":\"Never gonna give you up\"},\n{\"text\":\"Never gonna let you down\"},\n],\n},\n)\n\n@staticmethod\ndef extract_video_id(url:str)->str:\nparsed_url=urlparse(url)\nif parsed_url.netloc==\"youtu.be\":\nreturn parsed_url.path[1:]\nif parsed_url.netloc in(\"www.youtube.com\",\"youtube.com\"):\nif parsed_url.path==\"/watch\":\np=parse_qs(parsed_url.query)\nreturn p[\"v\"][0]\nif parsed_url.path[:7]==\"/embed/\":\nreturn parsed_url.path.split(\"/\")[2]\nif parsed_url.path[:3]==\"/v/\":\nreturn parsed_url.path.split(\"/\")[2]\nraise ValueError(f \"Invalid YouTube URL: {url}\")\n\n@staticmethod\ndef get_transcript(video_id:str):\ntry:\ntranscript_list=YouTubeTranscriptApi.list_transcripts(video_id)\n\nif not transcript_list:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\nfor transcript in transcript_list:\nfirst_transcript=transcript_list.find_transcript(\n[transcript.language_code]\n)\nreturn YouTubeTranscriptApi.get_transcript(\nvideo_id,languages=[first_transcript.language_code]\n)\n\nexcept Exception:\nraise ValueError(f \"No transcripts found for the video: {video_id}\")\n\ndef run(self,input_data:Input,**kwargs)->BlockOutput:\nvideo_id=self.extract_video_id(input_data.youtube_url)\nyield \"video_id\",video_id\n\ntranscript=self.get_transcript(video_id)\nformatter=TextFormatter()\ntranscript_text=formatter.format_transcript(transcript)\n\nyield \"transcript\",transcript_text\n"
}