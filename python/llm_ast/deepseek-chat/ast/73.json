{
    "type": "Program",
    "name": "Global",
    "range": [
        61,
        489
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "ImageSize",
            "range": [
                61,
                75
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "str, Enum",
                    "range": [
                        63,
                        67
                    ],
                    "children": [],
                    "content": "(str,Enum)"
                },
                {
                    "type": "ClassBody",
                    "name": "",
                    "range": [
                        68,
                        75
                    ],
                    "children": [
                        {
                            "type": "FieldDecl",
                            "name": "LANDSCAPE",
                            "range": [
                                70,
                                72
                            ],
                            "children": [
                                {
                                    "type": "Assignment",
                                    "name": "=",
                                    "range": [
                                        71,
                                        71
                                    ],
                                    "children": [],
                                    "content": "="
                                },
                                {
                                    "type": "Literal",
                                    "name": "\"1024x768\"",
                                    "range": [
                                        72,
                                        72
                                    ],
                                    "children": [],
                                    "content": "\"1024x768\""
                                }
                            ],
                            "content": "LANDSCAPE=\"1024x768\""
                        }
                    ],
                    "content": ":\nLANDSCAPE=\"1024x768\"\n\n\n"
                }
            ],
            "content": "class ImageSize(str,Enum):\nLANDSCAPE=\"1024x768\"\n\n\n"
        },
        {
            "type": "ClassDecl",
            "name": "ImageStyle",
            "range": [
                76,
                90
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "Inheritance",
                    "range": [
                        78,
                        82
                    ],
                    "children": [
                        {
                            "type": "Type",
                            "name": "str",
                            "range": [
                                79,
                                79
                            ],
                            "children": [],
                            "content": "str"
                        },
                        {
                            "type": "Type",
                            "name": "Enum",
                            "range": [
                                81,
                                81
                            ],
                            "children": [],
                            "content": "Enum"
                        }
                    ],
                    "content": "(str,Enum)"
                },
                {
                    "type": "ClassBody",
                    "name": "ClassBody",
                    "range": [
                        83,
                        90
                    ],
                    "children": [
                        {
                            "type": "EnumDecl",
                            "name": "DIGITAL_ART",
                            "range": [
                                85,
                                87
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"digital art\"",
                                    "range": [
                                        87,
                                        87
                                    ],
                                    "children": [],
                                    "content": "\"digital art\""
                                }
                            ],
                            "content": "DIGITAL_ART=\"digital art\""
                        }
                    ],
                    "content": ":\nDIGITAL_ART=\"digital art\"\n\n\n"
                }
            ],
            "content": "class ImageStyle(str,Enum):\nDIGITAL_ART=\"digital art\"\n\n\n"
        },
        {
            "type": "FunctionDecl",
            "name": "generate_agent_image",
            "range": [
                91,
                489
            ],
            "children": [
                {
                    "type": "Async",
                    "range": [
                        91,
                        91
                    ],
                    "content": "async"
                },
                {
                    "type": "Def",
                    "range": [
                        92,
                        92
                    ],
                    "content": "def"
                },
                {
                    "type": "Identifier",
                    "name": "generate_agent_image",
                    "range": [
                        93,
                        93
                    ],
                    "content": "generate_agent_image"
                },
                {
                    "type": "Parameters",
                    "range": [
                        94,
                        98
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "agent",
                            "range": [
                                95,
                                95
                            ],
                            "children": [
                                {
                                    "type": "TypeAnnotation",
                                    "range": [
                                        96,
                                        97
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "Graph",
                                            "range": [
                                                97,
                                                97
                                            ],
                                            "content": "Graph"
                                        }
                                    ],
                                    "content": ":Graph"
                                }
                            ],
                            "content": "agent"
                        }
                    ],
                    "content": "(agent:Graph)"
                },
                {
                    "type": "ReturnType",
                    "range": [
                        99,
                        101
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "io",
                            "range": [
                                101,
                                101
                            ],
                            "content": "io"
                        },
                        {
                            "type": "Dot",
                            "range": [
                                102,
                                102
                            ],
                            "content": "."
                        },
                        {
                            "type": "Identifier",
                            "name": "BytesIO",
                            "range": [
                                103,
                                103
                            ],
                            "content": "BytesIO"
                        }
                    ],
                    "content": "->io"
                },
                {
                    "type": "Docstring",
                    "range": [
                        106,
                        108
                    ],
                    "children": [
                        {
                            "type": "StringLiteral",
                            "value": "Generate an image for an agent using Flux model via Replicate API. \\n  \\n     Args: \\n         agent (Graph): The agent to generate an image for \\n  \\n     Returns: \\n         io.BytesIO: The generated image as bytes",
                            "range": [
                                107,
                                107
                            ],
                            "content": "\" \\n     Generate an image for an agent using Flux model via Replicate API. \\n  \\n     Args: \\n         agent (Graph): The agent to generate an image for \\n  \\n     Returns: \\n         io.BytesIO: The generated image as bytes \\n     \""
                        }
                    ],
                    "content": "\"\"\" \\n     Generate an image for an agent using Flux model via Replicate API. \\n  \\n     Args: \\n         agent (Graph): The agent to generate an image for \\n  \\n     Returns: \\n         io.BytesIO: The generated image as bytes \\n     \"\"\""
                },
                {
                    "type": "TryStatement",
                    "range": [
                        110,
                        489
                    ],
                    "children": [
                        {
                            "type": "Block",
                            "range": [
                                112,
                                431
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "range": [
                                        113,
                                        117
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "settings",
                                            "range": [
                                                113,
                                                113
                                            ],
                                            "content": "settings"
                                        },
                                        {
                                            "type": "Assign",
                                            "range": [
                                                114,
                                                114
                                            ],
                                            "content": "="
                                        },
                                        {
                                            "type": "CallExpression",
                                            "range": [
                                                115,
                                                117
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "Settings",
                                                    "range": [
                                                        115,
                                                        115
                                                    ],
                                                    "content": "Settings"
                                                }
                                            ],
                                            "content": "Settings()"
                                        }
                                    ],
                                    "content": "settings=Settings()"
                                },
                                {
                                    "type": "IfStatement",
                                    "range": [
                                        120,
                                        134
                                    ],
                                    "children": [
                                        {
                                            "type": "UnaryExpression",
                                            "operator": "Not",
                                            "range": [
                                                121,
                                                121
                                            ],
                                            "content": "not"
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "settings",
                                            "range": [
                                                122,
                                                122
                                            ],
                                            "content": "settings"
                                        },
                                        {
                                            "type": "Dot",
                                            "range": [
                                                123,
                                                123
                                            ],
                                            "content": "."
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "secrets",
                                            "range": [
                                                124,
                                                124
                                            ],
                                            "content": "secrets"
                                        },
                                        {
                                            "type": "Dot",
                                            "range": [
                                                125,
                                                125
                                            ],
                                            "content": "."
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "replicate_api_key",
                                            "range": [
                                                126,
                                                126
                                            ],
                                            "content": "replicate_api_key"
                                        },
                                        {
                                            "type": "RaiseStatement",
                                            "range": [
                                                129,
                                                133
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "range": [
                                                        130,
                                                        133
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "ValueError",
                                                            "range": [
                                                                130,
                                                                130
                                                            ],
                                                            "content": "ValueError"
                                                        },
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "Missing Replicate API key in settings",
                                                            "range": [
                                                                132,
                                                                132
                                                            ],
                                                            "content": "\"Missing Replicate API key in settings\""
                                                        }
                                                    ],
                                                    "content": "ValueError(\"Missing Replicate API key in settings\")"
                                                }
                                            ],
                                            "content": "raise ValueError(\"Missing Replicate API key in settings\")"
                                        }
                                    ],
                                    "content": "if not settings.secrets.replicate_api_key:\nraise ValueError(\"Missing Replicate API key in settings\")\n"
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "range": [
                                        143,
                                        147
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "prompt",
                                            "range": [
                                                143,
                                                143
                                            ],
                                            "content": "prompt"
                                        },
                                        {
                                            "type": "Assign",
                                            "range": [
                                                144,
                                                144
                                            ],
                                            "content": "="
                                        },
                                        {
                                            "type": "TemplateLiteral",
                                            "range": [
                                                145,
                                                146
                                            ],
                                            "children": [
                                                {
                                                    "type": "StringLiteral",
                                                    "value": "Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.",
                                                    "range": [
                                                        146,
                                                        146
                                                    ],
                                                    "content": "\"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\""
                                                }
                                            ],
                                            "content": "f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\""
                                        }
                                    ],
                                    "content": "prompt=f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\"\n"
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "range": [
                                        155,
                                        168
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "client",
                                            "range": [
                                                155,
                                                155
                                            ],
                                            "content": "client"
                                        },
                                        {
                                            "type": "Assign",
                                            "range": [
                                                156,
                                                156
                                            ],
                                            "content": "="
                                        },
                                        {
                                            "type": "CallExpression",
                                            "range": [
                                                157,
                                                168
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "replicate",
                                                    "range": [
                                                        157,
                                                        157
                                                    ],
                                                    "content": "replicate"
                                                },
                                                {
                                                    "type": "Dot",
                                                    "range": [
                                                        158,
                                                        158
                                                    ],
                                                    "content": "."
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "Client",
                                                    "range": [
                                                        159,
                                                        159
                                                    ],
                                                    "content": "Client"
                                                },
                                                {
                                                    "type": "KeywordArgument",
                                                    "range": [
                                                        161,
                                                        167
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "api_token",
                                                            "range": [
                                                                161,
                                                                161
                                                            ],
                                                            "content": "api_token"
                                                        },
                                                        {
                                                            "type": "Assign",
                                                            "range": [
                                                                162,
                                                                162
                                                            ],
                                                            "content": "="
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "settings",
                                                            "range": [
                                                                163,
                                                                163
                                                            ],
                                                            "content": "settings"
                                                        },
                                                        {
                                                            "type": "Dot",
                                                            "range": [
                                                                164,
                                                                164
                                                            ],
                                                            "content": "."
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "secrets",
                                                            "range": [
                                                                165,
                                                                165
                                                            ],
                                                            "content": "secrets"
                                                        },
                                                        {
                                                            "type": "Dot",
                                                            "range": [
                                                                166,
                                                                166
                                                            ],
                                                            "content": "."
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "replicate_api_key",
                                                            "range": [
                                                                167,
                                                                167
                                                            ],
                                                            "content": "replicate_api_key"
                                                        }
                                                    ],
                                                    "content": "api_token=settings.secrets.replicate_api_key"
                                                }
                                            ],
                                            "content": "replicate.Client(api_token=settings.secrets.replicate_api_key)"
                                        }
                                    ],
                                    "content": "client=replicate.Client(api_token=settings.secrets.replicate_api_key)"
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "range": [
                                        175,
                                        231
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "input_data",
                                            "range": [
                                                175,
                                                175
                                            ],
                                            "content": "input_data"
                                        },
                                        {
                                            "type": "Assign",
                                            "range": [
                                                176,
                                                176
                                            ],
                                            "content": "="
                                        },
                                        {
                                            "type": "ObjectExpression",
                                            "range": [
                                                177,
                                                231
                                            ],
                                            "children": [
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        179,
                                                        181
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "prompt",
                                                            "range": [
                                                                179,
                                                                179
                                                            ],
                                                            "content": "\"prompt\""
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "prompt",
                                                            "range": [
                                                                181,
                                                                181
                                                            ],
                                                            "content": "prompt"
                                                        }
                                                    ],
                                                    "content": "\"prompt\":prompt"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        184,
                                                        186
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "width",
                                                            "range": [
                                                                184,
                                                                184
                                                            ],
                                                            "content": "\"width\""
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "1024",
                                                            "range": [
                                                                186,
                                                                186
                                                            ],
                                                            "content": "1024"
                                                        }
                                                    ],
                                                    "content": "\"width\":1024"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        189,
                                                        191
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "height",
                                                            "range": [
                                                                189,
                                                                189
                                                            ],
                                                            "content": "\"height\""
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "768",
                                                            "range": [
                                                                191,
                                                                191
                                                            ],
                                                            "content": "768"
                                                        }
                                                    ],
                                                    "content": "\"height\":768"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        194,
                                                        196
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "aspect_ratio",
                                                            "range": [
                                                                194,
                                                                194
                                                            ],
                                                            "content": "\"aspect_ratio\""
                                                        },
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "4:3",
                                                            "range": [
                                                                196,
                                                                196
                                                            ],
                                                            "content": "\"4:3\""
                                                        }
                                                    ],
                                                    "content": "\"aspect_ratio\":\"4:3\""
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        199,
                                                        201
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "output_format",
                                                            "range": [
                                                                199,
                                                                199
                                                            ],
                                                            "content": "\"output_format\""
                                                        },
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "jpg",
                                                            "range": [
                                                                201,
                                                                201
                                                            ],
                                                            "content": "\"jpg\""
                                                        }
                                                    ],
                                                    "content": "\"output_format\":\"jpg\""
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        204,
                                                        206
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "output_quality",
                                                            "range": [
                                                                204,
                                                                204
                                                            ],
                                                            "content": "\"output_quality\""
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "90",
                                                            "range": [
                                                                206,
                                                                206
                                                            ],
                                                            "content": "90"
                                                        }
                                                    ],
                                                    "content": "\"output_quality\":90"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        209,
                                                        211
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "num_inference_steps",
                                                            "range": [
                                                                209,
                                                                209
                                                            ],
                                                            "content": "\"num_inference_steps\""
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "30",
                                                            "range": [
                                                                211,
                                                                211
                                                            ],
                                                            "content": "30"
                                                        }
                                                    ],
                                                    "content": "\"num_inference_steps\":30"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        214,
                                                        219
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "guidance",
                                                            "range": [
                                                                214,
                                                                214
                                                            ],
                                                            "content": "\"guidance\""
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "3.5",
                                                            "range": [
                                                                216,
                                                                219
                                                            ],
                                                            "content": "3.5,"
                                                        }
                                                    ],
                                                    "content": "\"guidance\":3.5,"
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        221,
                                                        223
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "negative_prompt",
                                                            "range": [
                                                                221,
                                                                221
                                                            ],
                                                            "content": "\"negative_prompt\""
                                                        },
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "blurry, low quality, distorted, deformed",
                                                            "range": [
                                                                223,
                                                                223
                                                            ],
                                                            "content": "\"blurry, low quality, distorted, deformed\""
                                                        }
                                                    ],
                                                    "content": "\"negative_prompt\":\"blurry, low quality, distorted, deformed\""
                                                },
                                                {
                                                    "type": "Property",
                                                    "range": [
                                                        226,
                                                        228
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "disable_safety_checker",
                                                            "range": [
                                                                226,
                                                                226
                                                            ],
                                                            "content": "\"disable_safety_checker\""
                                                        },
                                                        {
                                                            "type": "BooleanLiteral",
                                                            "value": "True",
                                                            "range": [
                                                                228,
                                                                228
                                                            ],
                                                            "content": "True"
                                                        }
                                                    ],
                                                    "content": "\"disable_safety_checker\":True"
                                                }
                                            ],
                                            "content": "{\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}"
                                        }
                                    ],
                                    "content": "input_data={\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}"
                                },
                                {
                                    "type": "TryStatement",
                                    "range": [
                                        234,
                                        431
                                    ],
                                    "children": [
                                        {
                                            "type": "Block",
                                            "range": [
                                                236,
                                                430
                                            ],
                                            "children": [
                                                {
                                                    "type": "AssignmentExpression",
                                                    "range": [
                                                        241,
                                                        252
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "output",
                                                            "range": [
                                                                241,
                                                                241
                                                            ],
                                                            "content": "output"
                                                        },
                                                        {
                                                            "type": "Assign",
                                                            "range": [
                                                                242,
                                                                242
                                                            ],
                                                            "content": "="
                                                        },
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                243,
                                                                252
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "client",
                                                                    "range": [
                                                                        243,
                                                                        243
                                                                    ],
                                                                    "content": "client"
                                                                },
                                                                {
                                                                    "type": "Dot",
                                                                    "range": [
                                                                        244,
                                                                        244
                                                                    ],
                                                                    "content": "."
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "run",
                                                                    "range": [
                                                                        245,
                                                                        245
                                                                    ],
                                                                    "content": "run"
                                                                },
                                                                {
                                                                    "type": "StringLiteral",
                                                                    "value": "black-forest-labs/flux-1.1-pro",
                                                                    "range": [
                                                                        247,
                                                                        247
                                                                    ],
                                                                    "content": "\"black-forest-labs/flux-1.1-pro\""
                                                                },
                                                                {
                                                                    "type": "KeywordArgument",
                                                                    "range": [
                                                                        249,
                                                                        251
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "input",
                                                                            "range": [
                                                                                249,
                                                                                249
                                                                            ],
                                                                            "content": "input"
                                                                        },
                                                                        {
                                                                            "type": "Assign",
                                                                            "range": [
                                                                                250,
                                                                                250
                                                                            ],
                                                                            "content": "="
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "input_data",
                                                                            "range": [
                                                                                251,
                                                                                251
                                                                            ],
                                                                            "content": "input_data"
                                                                        }
                                                                    ],
                                                                    "content": "input=input_data"
                                                                }
                                                            ],
                                                            "content": "client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)"
                                                        }
                                                    ],
                                                    "content": "output=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)"
                                                },
                                                {
                                                    "type": "IfStatement",
                                                    "range": [
                                                        281,
                                                        360
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                282,
                                                                287
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "isinstance",
                                                                    "range": [
                                                                        282,
                                                                        282
                                                                    ],
                                                                    "content": "isinstance"
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "output",
                                                                    "range": [
                                                                        284,
                                                                        284
                                                                    ],
                                                                    "content": "output"
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "list",
                                                                    "range": [
                                                                        286,
                                                                        286
                                                                    ],
                                                                    "content": "list"
                                                                }
                                                            ],
                                                            "content": "isinstance(output,list)"
                                                        },
                                                        {
                                                            "type": "LogicalExpression",
                                                            "operator": "And",
                                                            "range": [
                                                                288,
                                                                288
                                                            ],
                                                            "content": "and"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "output",
                                                            "range": [
                                                                289,
                                                                289
                                                            ],
                                                            "content": "output"
                                                        },
                                                        {
                                                            "type": "IfStatement",
                                                            "range": [
                                                                292,
                                                                316
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        293,
                                                                        301
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "isinstance",
                                                                            "range": [
                                                                                293,
                                                                                293
                                                                            ],
                                                                            "content": "isinstance"
                                                                        },
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "range": [
                                                                                295,
                                                                                298
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "output",
                                                                                    "range": [
                                                                                        295,
                                                                                        295
                                                                                    ],
                                                                                    "content": "output"
                                                                                },
                                                                                {
                                                                                    "type": "NumericLiteral",
                                                                                    "value": "0",
                                                                                    "range": [
                                                                                        297,
                                                                                        297
                                                                                    ],
                                                                                    "content": "0"
                                                                                }
                                                                            ],
                                                                            "content": "output[0]"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "FileOutput",
                                                                            "range": [
                                                                                300,
                                                                                300
                                                                            ],
                                                                            "content": "FileOutput"
                                                                        }
                                                                    ],
                                                                    "content": "isinstance(output[0],FileOutput)"
                                                                },
                                                                {
                                                                    "type": "AssignmentExpression",
                                                                    "range": [
                                                                        304,
                                                                        314
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "image_bytes",
                                                                            "range": [
                                                                                304,
                                                                                304
                                                                            ],
                                                                            "content": "image_bytes"
                                                                        },
                                                                        {
                                                                            "type": "Assign",
                                                                            "range": [
                                                                                305,
                                                                                305
                                                                            ],
                                                                            "content": "="
                                                                        },
                                                                        {
                                                                            "type": "CallExpression",
                                                                            "range": [
                                                                                306,
                                                                                314
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "MemberExpression",
                                                                                    "range": [
                                                                                        306,
                                                                                        309
                                                                                    ],
                                                                                    "children": [
                                                                                        {
                                                                                            "type": "Identifier",
                                                                                            "name": "output",
                                                                                            "range": [
                                                                                                306,
                                                                                                306
                                                                                            ],
                                                                                            "content": "output"
                                                                                        },
                                                                                        {
                                                                                            "type": "NumericLiteral",
                                                                                            "value": "0",
                                                                                            "range": [
                                                                                                308,
                                                                                                308
                                                                                            ],
                                                                                            "content": "0"
                                                                                        }
                                                                                    ],
                                                                                    "content": "output[0]"
                                                                                },
                                                                                {
                                                                                    "type": "Dot",
                                                                                    "range": [
                                                                                        310,
                                                                                        310
                                                                                    ],
                                                                                    "content": "."
                                                                                },
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "read",
                                                                                    "range": [
                                                                                        311,
                                                                                        311
                                                                                    ],
                                                                                    "content": "read"
                                                                                }
                                                                            ],
                                                                            "content": "output[0].read()\n"
                                                                        }
                                                                    ],
                                                                    "content": "image_bytes=output[0].read()\n"
                                                                }
                                                            ],
                                                            "content": "if isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:"
                                                        },
                                                        {
                                                            "type": "ElseStatement",
                                                            "range": [
                                                                316,
                                                                316
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "AssignmentExpression",
                                                                    "range": [
                                                                        332,
                                                                        359
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "result_url",
                                                                            "range": [
                                                                                332,
                                                                                332
                                                                            ],
                                                                            "content": "result_url"
                                                                        },
                                                                        {
                                                                            "type": "Assign",
                                                                            "range": [
                                                                                333,
                                                                                333
                                                                            ],
                                                                            "content": "="
                                                                        },
                                                                        {
                                                                            "type": "MemberExpression",
                                                                            "range": [
                                                                                334,
                                                                                337
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "output",
                                                                                    "range": [
                                                                                        334,
                                                                                        334
                                                                                    ],
                                                                                    "content": "output"
                                                                                },
                                                                                {
                                                                                    "type": "NumericLiteral",
                                                                                    "value": "0",
                                                                                    "range": [
                                                                                        336,
                                                                                        336
                                                                                    ],
                                                                                    "content": "0"
                                                                                }
                                                                            ],
                                                                            "content": "output[0]"
                                                                        }
                                                                    ],
                                                                    "content": "result_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\n"
                                                                },
                                                                {
                                                                    "type": "AssignmentExpression",
                                                                    "range": [
                                                                        339,
                                                                        359
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "response",
                                                                            "range": [
                                                                                339,
                                                                                339
                                                                            ],
                                                                            "content": "response"
                                                                        },
                                                                        {
                                                                            "type": "Assign",
                                                                            "range": [
                                                                                340,
                                                                                340
                                                                            ],
                                                                            "content": "="
                                                                        },
                                                                        {
                                                                            "type": "CallExpression",
                                                                            "range": [
                                                                                341,
                                                                                347
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "requests",
                                                                                    "range": [
                                                                                        341,
                                                                                        341
                                                                                    ],
                                                                                    "content": "requests"
                                                                                },
                                                                                {
                                                                                    "type": "Dot",
                                                                                    "range": [
                                                                                        342,
                                                                                        342
                                                                                    ],
                                                                                    "content": "."
                                                                                },
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "get",
                                                                                    "range": [
                                                                                        343,
                                                                                        343
                                                                                    ],
                                                                                    "content": "get"
                                                                                },
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "result_url",
                                                                                    "range": [
                                                                                        345,
                                                                                        345
                                                                                    ],
                                                                                    "content": "result_url"
                                                                                }
                                                                            ],
                                                                            "content": "requests.get(result_url)\n"
                                                                        }
                                                                    ],
                                                                    "content": "response=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\n"
                                                                },
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        349,
                                                                        351
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "response",
                                                                            "range": [
                                                                                349,
                                                                                349
                                                                            ],
                                                                            "content": "."
                                                                        },
                                                                        {
                                                                            "type": "Dot",
                                                                            "range": [
                                                                                350,
                                                                                350
                                                                            ],
                                                                            "content": "raise_for_status"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "raise_for_status",
                                                                            "range": [
                                                                                351,
                                                                                351
                                                                            ],
                                                                            "content": "("
                                                                        }
                                                                    ],
                                                                    "content": ".raise_for_status("
                                                                },
                                                                {
                                                                    "type": "AssignmentExpression",
                                                                    "range": [
                                                                        354,
                                                                        359
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "image_bytes",
                                                                            "range": [
                                                                                354,
                                                                                354
                                                                            ],
                                                                            "content": "image_bytes"
                                                                        },
                                                                        {
                                                                            "type": "Assign",
                                                                            "range": [
                                                                                355,
                                                                                355
                                                                            ],
                                                                            "content": "="
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "response",
                                                                            "range": [
                                                                                356,
                                                                                356
                                                                            ],
                                                                            "content": "response"
                                                                        },
                                                                        {
                                                                            "type": "Dot",
                                                                            "range": [
                                                                                357,
                                                                                357
                                                                            ],
                                                                            "content": "."
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "content",
                                                                            "range": [
                                                                                358,
                                                                                358
                                                                            ],
                                                                            "content": "content"
                                                                        }
                                                                    ],
                                                                    "content": "image_bytes=response.content\n"
                                                                }
                                                            ],
                                                            "content": ":"
                                                        }
                                                    ],
                                                    "content": "if isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif"
                                                },
                                                {
                                                    "type": "ElifStatement",
                                                    "range": [
                                                        361,
                                                        376
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                362,
                                                                366
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "isinstance",
                                                                    "range": [
                                                                        362,
                                                                        362
                                                                    ],
                                                                    "content": "("
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "output",
                                                                    "range": [
                                                                        364,
                                                                        364
                                                                    ],
                                                                    "content": ","
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "FileOutput",
                                                                    "range": [
                                                                        366,
                                                                        366
                                                                    ],
                                                                    "content": ")"
                                                                }
                                                            ],
                                                            "content": "(output,FileOutput)"
                                                        },
                                                        {
                                                            "type": "AssignmentExpression",
                                                            "range": [
                                                                369,
                                                                375
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "image_bytes",
                                                                    "range": [
                                                                        369,
                                                                        369
                                                                    ],
                                                                    "content": "image_bytes"
                                                                },
                                                                {
                                                                    "type": "Assign",
                                                                    "range": [
                                                                        370,
                                                                        370
                                                                    ],
                                                                    "content": "="
                                                                },
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        371,
                                                                        375
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "output",
                                                                            "range": [
                                                                                371,
                                                                                371
                                                                            ],
                                                                            "content": "output"
                                                                        },
                                                                        {
                                                                            "type": "Dot",
                                                                            "range": [
                                                                                372,
                                                                                372
                                                                            ],
                                                                            "content": "."
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "read",
                                                                            "range": [
                                                                                373,
                                                                                373
                                                                            ],
                                                                            "content": "read"
                                                                        }
                                                                    ],
                                                                    "content": "output.read()"
                                                                }
                                                            ],
                                                            "content": "image_bytes=output.read()"
                                                        }
                                                    ],
                                                    "content": "isinstance(output,FileOutput):\nimage_bytes=output.read()\n"
                                                },
                                                {
                                                    "type": "ElifStatement",
                                                    "range": [
                                                        378,
                                                        412
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                379,
                                                                383
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "isinstance",
                                                                    "range": [
                                                                        379,
                                                                        379
                                                                    ],
                                                                    "content": "("
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "output",
                                                                    "range": [
                                                                        381,
                                                                        381
                                                                    ],
                                                                    "content": ","
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "str",
                                                                    "range": [
                                                                        383,
                                                                        383
                                                                    ],
                                                                    "content": ")"
                                                                }
                                                            ],
                                                            "content": "(output,str)"
                                                        },
                                                        {
                                                            "type": "AssignmentExpression",
                                                            "range": [
                                                                392,
                                                                412
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "response",
                                                                    "range": [
                                                                        392,
                                                                        392
                                                                    ],
                                                                    "content": "response"
                                                                },
                                                                {
                                                                    "type": "Assign",
                                                                    "range": [
                                                                        393,
                                                                        393
                                                                    ],
                                                                    "content": "="
                                                                },
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        394,
                                                                        400
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "requests",
                                                                            "range": [
                                                                                394,
                                                                                394
                                                                            ],
                                                                            "content": "requests"
                                                                        },
                                                                        {
                                                                            "type": "Dot",
                                                                            "range": [
                                                                                395,
                                                                                395
                                                                            ],
                                                                            "content": "."
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "get",
                                                                            "range": [
                                                                                396,
                                                                                396
                                                                            ],
                                                                            "content": "get"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "output",
                                                                            "range": [
                                                                                398,
                                                                                398
                                                                            ],
                                                                            "content": "output"
                                                                        }
                                                                    ],
                                                                    "content": "requests.get(output)\n"
                                                                }
                                                            ],
                                                            "content": "response=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\n"
                                                        },
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                402,
                                                                404
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "response",
                                                                    "range": [
                                                                        402,
                                                                        402
                                                                    ],
                                                                    "content": "."
                                                                },
                                                                {
                                                                    "type": "Dot",
                                                                    "range": [
                                                                        403,
                                                                        403
                                                                    ],
                                                                    "content": "raise_for_status"
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "raise_for_status",
                                                                    "range": [
                                                                        404,
                                                                        404
                                                                    ],
                                                                    "content": "("
                                                                }
                                                            ],
                                                            "content": ".raise_for_status("
                                                        },
                                                        {
                                                            "type": "AssignmentExpression",
                                                            "range": [
                                                                407,
                                                                412
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "image_bytes",
                                                                    "range": [
                                                                        407,
                                                                        407
                                                                    ],
                                                                    "content": "image_bytes"
                                                                },
                                                                {
                                                                    "type": "Assign",
                                                                    "range": [
                                                                        408,
                                                                        408
                                                                    ],
                                                                    "content": "="
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "response",
                                                                    "range": [
                                                                        409,
                                                                        409
                                                                    ],
                                                                    "content": "response"
                                                                },
                                                                {
                                                                    "type": "Dot",
                                                                    "range": [
                                                                        410,
                                                                        410
                                                                    ],
                                                                    "content": "."
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "content",
                                                                    "range": [
                                                                        411,
                                                                        411
                                                                    ],
                                                                    "content": "content"
                                                                }
                                                            ],
                                                            "content": "image_bytes=response.content\n"
                                                        }
                                                    ],
                                                    "content": "isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\n"
                                                },
                                                {
                                                    "type": "ElseStatement",
                                                    "range": [
                                                        414,
                                                        420
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "RaiseStatement",
                                                            "range": [
                                                                416,
                                                                420
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        417,
                                                                        420
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "RuntimeError",
                                                                            "range": [
                                                                                417,
                                                                                417
                                                                            ],
                                                                            "content": "RuntimeError"
                                                                        },
                                                                        {
                                                                            "type": "StringLiteral",
                                                                            "value": "Unexpected output format from the model.",
                                                                            "range": [
                                                                                419,
                                                                                419
                                                                            ],
                                                                            "content": "\"Unexpected output format from the model.\""
                                                                        }
                                                                    ],
                                                                    "content": "RuntimeError(\"Unexpected output format from the model.\")"
                                                                }
                                                            ],
                                                            "content": "raise RuntimeError(\"Unexpected output format from the model.\")"
                                                        }
                                                    ],
                                                    "content": ":\nraise RuntimeError(\"Unexpected output format from the model.\")"
                                                },
                                                {
                                                    "type": "ReturnStatement",
                                                    "range": [
                                                        423,
                                                        430
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                424,
                                                                430
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "io",
                                                                    "range": [
                                                                        424,
                                                                        424
                                                                    ],
                                                                    "content": "io"
                                                                },
                                                                {
                                                                    "type": "Dot",
                                                                    "range": [
                                                                        425,
                                                                        425
                                                                    ],
                                                                    "content": "."
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "BytesIO",
                                                                    "range": [
                                                                        426,
                                                                        426
                                                                    ],
                                                                    "content": "BytesIO"
                                                                },
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "image_bytes",
                                                                    "range": [
                                                                        428,
                                                                        428
                                                                    ],
                                                                    "content": "image_bytes"
                                                                }
                                                            ],
                                                            "content": "io.BytesIO(image_bytes)\n"
                                                        }
                                                    ],
                                                    "content": "return io.BytesIO(image_bytes)\n"
                                                }
                                            ],
                                            "content": "\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n"
                                        },
                                        {
                                            "type": "CatchClause",
                                            "range": [
                                                432,
                                                467
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "replicate",
                                                    "range": [
                                                        433,
                                                        433
                                                    ],
                                                    "content": "replicate"
                                                },
                                                {
                                                    "type": "Dot",
                                                    "range": [
                                                        434,
                                                        434
                                                    ],
                                                    "content": "."
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "exceptions",
                                                    "range": [
                                                        435,
                                                        435
                                                    ],
                                                    "content": "exceptions"
                                                },
                                                {
                                                    "type": "Dot",
                                                    "range": [
                                                        436,
                                                        436
                                                    ],
                                                    "content": "."
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "ReplicateError",
                                                    "range": [
                                                        437,
                                                        437
                                                    ],
                                                    "content": "ReplicateError"
                                                },
                                                {
                                                    "type": "As",
                                                    "range": [
                                                        438,
                                                        438
                                                    ],
                                                    "content": "as"
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "e",
                                                    "range": [
                                                        439,
                                                        439
                                                    ],
                                                    "content": "e"
                                                },
                                                {
                                                    "type": "IfStatement",
                                                    "range": [
                                                        442,
                                                        456
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "e",
                                                            "range": [
                                                                443,
                                                                443
                                                            ],
                                                            "content": "e"
                                                        },
                                                        {
                                                            "type": "Dot",
                                                            "range": [
                                                                444,
                                                                444
                                                            ],
                                                            "content": "."
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "status",
                                                            "range": [
                                                                445,
                                                                445
                                                            ],
                                                            "content": "status"
                                                        },
                                                        {
                                                            "type": "BinaryExpression",
                                                            "operator": "Eq",
                                                            "range": [
                                                                446,
                                                                447
                                                            ],
                                                            "content": "=="
                                                        },
                                                        {
                                                            "type": "NumericLiteral",
                                                            "value": "401",
                                                            "range": [
                                                                448,
                                                                448
                                                            ],
                                                            "content": "401"
                                                        },
                                                        {
                                                            "type": "RaiseStatement",
                                                            "range": [
                                                                451,
                                                                455
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "CallExpression",
                                                                    "range": [
                                                                        452,
                                                                        455
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "RuntimeError",
                                                                            "range": [
                                                                                452,
                                                                                452
                                                                            ],
                                                                            "content": "RuntimeError"
                                                                        },
                                                                        {
                                                                            "type": "StringLiteral",
                                                                            "value": "Invalid Replicate API token",
                                                                            "range": [
                                                                                454,
                                                                                454
                                                                            ],
                                                                            "content": "\"Invalid Replicate API token\""
                                                                        }
                                                                    ],
                                                                    "content": "RuntimeError(\"Invalid Replicate API token\")"
                                                                }
                                                            ],
                                                            "content": "raise RuntimeError(\"Invalid Replicate API token\")"
                                                        }
                                                    ],
                                                    "content": "if e.status==401:\nraise RuntimeError(\"Invalid Replicate API token\")from"
                                                },
                                                {
                                                    "type": "RaiseStatement",
                                                    "range": [
                                                        459,
                                                        466
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                460,
                                                                466
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "RuntimeError",
                                                                    "range": [
                                                                        460,
                                                                        460
                                                                    ],
                                                                    "content": "RuntimeError"
                                                                },
                                                                {
                                                                    "type": "TemplateLiteral",
                                                                    "range": [
                                                                        462,
                                                                        463
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "StringLiteral",
                                                                            "value": "Replicate API error: {str(e)}",
                                                                            "range": [
                                                                                463,
                                                                                463
                                                                            ],
                                                                            "content": "\"Replicate API error: {str(e)}\""
                                                                        }
                                                                    ],
                                                                    "content": "f \"Replicate API error: {str(e)}\""
                                                                }
                                                            ],
                                                            "content": "RuntimeError(f \"Replicate API error: {str(e)}\")from e"
                                                        }
                                                    ],
                                                    "content": "raise RuntimeError(f \"Replicate API error: {str(e)}\")from e"
                                                }
                                            ],
                                            "content": "except replicate.exceptions.ReplicateError as e:\nif e.status==401:\nraise RuntimeError(\"Invalid Replicate API token\")from e\nraise RuntimeError(f \"Replicate API error: {str(e)}\")from e\n"
                                        },
                                        {
                                            "type": "CatchClause",
                                            "range": [
                                                469,
                                                488
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "Exception",
                                                    "range": [
                                                        470,
                                                        470
                                                    ],
                                                    "content": "Exception"
                                                },
                                                {
                                                    "type": "As",
                                                    "range": [
                                                        471,
                                                        471
                                                    ],
                                                    "content": "as"
                                                },
                                                {
                                                    "type": "Identifier",
                                                    "name": "e",
                                                    "range": [
                                                        472,
                                                        472
                                                    ],
                                                    "content": "e"
                                                },
                                                {
                                                    "type": "CallExpression",
                                                    "range": [
                                                        475,
                                                        480
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "logger",
                                                            "range": [
                                                                475,
                                                                475
                                                            ],
                                                            "content": "logger"
                                                        },
                                                        {
                                                            "type": "Dot",
                                                            "range": [
                                                                476,
                                                                476
                                                            ],
                                                            "content": "."
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "exception",
                                                            "range": [
                                                                477,
                                                                477
                                                            ],
                                                            "content": "exception"
                                                        },
                                                        {
                                                            "type": "StringLiteral",
                                                            "value": "Failed to generate agent image",
                                                            "range": [
                                                                479,
                                                                479
                                                            ],
                                                            "content": "\"Failed to generate agent image\""
                                                        }
                                                    ],
                                                    "content": "logger.exception(\"Failed to generate agent image\")"
                                                },
                                                {
                                                    "type": "RaiseStatement",
                                                    "range": [
                                                        482,
                                                        487
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "range": [
                                                                483,
                                                                487
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "RuntimeError",
                                                                    "range": [
                                                                        483,
                                                                        483
                                                                    ],
                                                                    "content": "RuntimeError"
                                                                },
                                                                {
                                                                    "type": "TemplateLiteral",
                                                                    "range": [
                                                                        485,
                                                                        486
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "StringLiteral",
                                                                            "value": "Image generation failed: {str(e)}",
                                                                            "range": [
                                                                                486,
                                                                                486
                                                                            ],
                                                                            "content": "\"Image generation failed: {str(e)}\""
                                                                        }
                                                                    ],
                                                                    "content": "f \"Image generation failed: {str(e)}\""
                                                                }
                                                            ],
                                                            "content": "RuntimeError(f \"Image generation failed: {str(e)}\")"
                                                        }
                                                    ],
                                                    "content": "raise RuntimeError(f \"Image generation failed: {str(e)}\")"
                                                }
                                            ],
                                            "content": "except Exception as e:\nlogger.exception(\"Failed to generate agent image\")\nraise RuntimeError(f \"Image generation failed: {str(e)}\")\n"
                                        }
                                    ],
                                    "content": "try:\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n\n"
                                }
                            ],
                            "content": "\nsettings=Settings()\n\nif not settings.secrets.replicate_api_key:\nraise ValueError(\"Missing Replicate API key in settings\")\n\n#Construct prompt from agent details\nprompt=f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\"\n\n#Set up Replicate client\nclient=replicate.Client(api_token=settings.secrets.replicate_api_key)\n\n#Model parameters\ninput_data={\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}\n\ntry:\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n\n"
                        }
                    ],
                    "content": "try:\nsettings=Settings()\n\nif not settings.secrets.replicate_api_key:\nraise ValueError(\"Missing Replicate API key in settings\")\n\n#Construct prompt from agent details\nprompt=f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\"\n\n#Set up Replicate client\nclient=replicate.Client(api_token=settings.secrets.replicate_api_key)\n\n#Model parameters\ninput_data={\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}\n\ntry:\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n\nexcept replicate.exceptions.ReplicateError as e:\nif e.status==401:\nraise RuntimeError(\"Invalid Replicate API token\")from e\nraise RuntimeError(f \"Replicate API error: {str(e)}\")from e\n\nexcept Exception as e:\nlogger.exception(\"Failed to generate agent image\")\nraise RuntimeError(f \"Image generation failed: {str(e)}\")\n"
                }
            ],
            "content": "async def generate_agent_image(agent:Graph)->io.BytesIO:\n\"\"\" \\n     Generate an image for an agent using Flux model via Replicate API. \\n  \\n     Args: \\n         agent (Graph): The agent to generate an image for \\n  \\n     Returns: \\n         io.BytesIO: The generated image as bytes \\n     \"\"\"\ntry:\nsettings=Settings()\n\nif not settings.secrets.replicate_api_key:\nraise ValueError(\"Missing Replicate API key in settings\")\n\n#Construct prompt from agent details\nprompt=f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\"\n\n#Set up Replicate client\nclient=replicate.Client(api_token=settings.secrets.replicate_api_key)\n\n#Model parameters\ninput_data={\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}\n\ntry:\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n\nexcept replicate.exceptions.ReplicateError as e:\nif e.status==401:\nraise RuntimeError(\"Invalid Replicate API token\")from e\nraise RuntimeError(f \"Replicate API error: {str(e)}\")from e\n\nexcept Exception as e:\nlogger.exception(\"Failed to generate agent image\")\nraise RuntimeError(f \"Image generation failed: {str(e)}\")\n"
        }
    ],
    "content": "class ImageSize(str,Enum):\nLANDSCAPE=\"1024x768\"\n\n\nclass ImageStyle(str,Enum):\nDIGITAL_ART=\"digital art\"\n\n\nasync def generate_agent_image(agent:Graph)->io.BytesIO:\n\"\"\" \\n     Generate an image for an agent using Flux model via Replicate API. \\n  \\n     Args: \\n         agent (Graph): The agent to generate an image for \\n  \\n     Returns: \\n         io.BytesIO: The generated image as bytes \\n     \"\"\"\ntry:\nsettings=Settings()\n\nif not settings.secrets.replicate_api_key:\nraise ValueError(\"Missing Replicate API key in settings\")\n\n#Construct prompt from agent details\nprompt=f \"Create a visually engaging app store thumbnail for the AI agent that highlights what it does in a clear and captivating way:\\n- **Name**: {agent.name}\\n- **Description**: {agent.description}\\nFocus on showcasing its core functionality with an appealing design.\"\n\n#Set up Replicate client\nclient=replicate.Client(api_token=settings.secrets.replicate_api_key)\n\n#Model parameters\ninput_data={\n\"prompt\":prompt,\n\"width\":1024,\n\"height\":768,\n\"aspect_ratio\":\"4:3\",\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n\"num_inference_steps\":30,\n\"guidance\":3.5,\n\"negative_prompt\":\"blurry, low quality, distorted, deformed\",\n\"disable_safety_checker\":True,\n}\n\ntry:\n#Run model\noutput=client.run(\"black-forest-labs/flux-1.1-pro\",input=input_data)\n\n#Depending on the model output,extract the image URL or bytes\n#If the output is a list of FileOutput or URLs\nif isinstance(output,list)and output:\nif isinstance(output[0],FileOutput):\nimage_bytes=output[0].read()\nelse:\n#If it's a URL string,fetch the image bytes\nresult_url=output[0]\nresponse=requests.get(result_url)\nresponse.raise_for_status()\nimage_bytes=response.content\nelif isinstance(output,FileOutput):\nimage_bytes=output.read()\nelif isinstance(output,str):\n#Output is a URL\nresponse=requests.get(output)\nresponse.raise_for_status()\nimage_bytes=response.content\nelse:\nraise RuntimeError(\"Unexpected output format from the model.\")\n\nreturn io.BytesIO(image_bytes)\n\nexcept replicate.exceptions.ReplicateError as e:\nif e.status==401:\nraise RuntimeError(\"Invalid Replicate API token\")from e\nraise RuntimeError(f \"Replicate API error: {str(e)}\")from e\n\nexcept Exception as e:\nlogger.exception(\"Failed to generate agent image\")\nraise RuntimeError(f \"Image generation failed: {str(e)}\")\n"
}