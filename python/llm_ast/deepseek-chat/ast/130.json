{
    "type": "Program",
    "name": "Global",
    "range": [
        71,
        493
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "ContentRetrievalSettings",
            "range": [
                71,
                187
            ],
            "children": [
                {
                    "type": "FieldDecl",
                    "name": "text",
                    "range": [
                        78,
                        111
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Optional[dict]",
                            "range": [
                                80,
                                83
                            ],
                            "children": [],
                            "content": "Optional[dict]"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                84,
                                111
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        85,
                                        111
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                88,
                                                90
                                            ],
                                            "children": [],
                                            "content": "description=\"Text content settings\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                93,
                                                103
                                            ],
                                            "children": [],
                                            "content": "default={\"maxCharacters\":1000,\"includeHtmlTags\":False}"
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                106,
                                                108
                                            ],
                                            "children": [],
                                            "content": "advanced=True"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Text content settings\",\ndefault={\"maxCharacters\":1000,\"includeHtmlTags\":False},\nadvanced=True,\n)"
                                }
                            ],
                            "content": "=SchemaField(\ndescription=\"Text content settings\",\ndefault={\"maxCharacters\":1000,\"includeHtmlTags\":False},\nadvanced=True,\n)"
                        }
                    ],
                    "content": "text:Optional[dict]=SchemaField(\ndescription=\"Text content settings\",\ndefault={\"maxCharacters\":1000,\"includeHtmlTags\":False},\nadvanced=True,\n)"
                },
                {
                    "type": "FieldDecl",
                    "name": "highlights",
                    "range": [
                        113,
                        155
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Optional[dict]",
                            "range": [
                                115,
                                118
                            ],
                            "children": [],
                            "content": "Optional[dict]"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                119,
                                155
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        120,
                                        155
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                123,
                                                125
                                            ],
                                            "children": [],
                                            "content": "description=\"Highlight settings\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                128,
                                                147
                                            ],
                                            "children": [],
                                            "content": "default={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n}"
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                150,
                                                152
                                            ],
                                            "children": [],
                                            "content": "advanced=True"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Highlight settings\",\ndefault={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n},\nadvanced=True,\n)"
                                }
                            ],
                            "content": "=SchemaField(\ndescription=\"Highlight settings\",\ndefault={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n},\nadvanced=True,\n)"
                        }
                    ],
                    "content": "highlights:Optional[dict]=SchemaField(\ndescription=\"Highlight settings\",\ndefault={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n},\nadvanced=True,\n)"
                },
                {
                    "type": "FieldDecl",
                    "name": "summary",
                    "range": [
                        157,
                        186
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Optional[dict]",
                            "range": [
                                159,
                                162
                            ],
                            "children": [],
                            "content": "Optional[dict]"
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                163,
                                186
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        164,
                                        186
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                167,
                                                169
                                            ],
                                            "children": [],
                                            "content": "description=\"Summary settings\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                172,
                                                178
                                            ],
                                            "children": [],
                                            "content": "default={\"query\":\"\"}"
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                181,
                                                183
                                            ],
                                            "children": [],
                                            "content": "advanced=True"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Summary settings\",\ndefault={\"query\":\"\"},\nadvanced=True,\n)"
                                }
                            ],
                            "content": "=SchemaField(\ndescription=\"Summary settings\",\ndefault={\"query\":\"\"},\nadvanced=True,\n)"
                        }
                    ],
                    "content": "summary:Optional[dict]=SchemaField(\ndescription=\"Summary settings\",\ndefault={\"query\":\"\"},\nadvanced=True,\n)"
                }
            ],
            "content": "class ContentRetrievalSettings(BaseModel):\ntext:Optional[dict]=SchemaField(\ndescription=\"Text content settings\",\ndefault={\"maxCharacters\":1000,\"includeHtmlTags\":False},\nadvanced=True,\n)\nhighlights:Optional[dict]=SchemaField(\ndescription=\"Highlight settings\",\ndefault={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n},\nadvanced=True,\n)\nsummary:Optional[dict]=SchemaField(\ndescription=\"Summary settings\",\ndefault={\"query\":\"\"},\nadvanced=True,\n)\n"
        },
        {
            "type": "ClassDecl",
            "name": "ExaContentsBlock",
            "range": [
                188,
                193
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "Block",
                    "range": [
                        190,
                        192
                    ],
                    "children": [],
                    "content": "class ExaContentsBlock("
                }
            ],
            "content": "\n\nclass ExaContentsBlock(Block"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                195,
                201
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "BlockSchema",
                    "range": [
                        197,
                        199
                    ],
                    "children": [],
                    "content": "class Input("
                },
                {
                    "type": "FieldDecl",
                    "name": "credentials",
                    "range": [
                        202,
                        209
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "ExaCredentialsInput",
                            "range": [
                                204,
                                204
                            ],
                            "children": [],
                            "content": "credentials"
                        },
                        {
                            "type": "Assignment",
                            "name": "ExaCredentialsField",
                            "range": [
                                206,
                                208
                            ],
                            "children": [],
                            "content": "ExaCredentialsInput=ExaCredentialsField"
                        }
                    ],
                    "content": ":\ncredentials:ExaCredentialsInput=ExaCredentialsField("
                },
                {
                    "type": "FieldDecl",
                    "name": "ids",
                    "range": [
                        210,
                        226
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[str]",
                            "range": [
                                212,
                                215
                            ],
                            "children": [],
                            "content": "ids:List["
                        },
                        {
                            "type": "Assignment",
                            "name": "SchemaField",
                            "range": [
                                217,
                                225
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        220,
                                        222
                                    ],
                                    "children": [],
                                    "content": "(\ndescription"
                                }
                            ],
                            "content": "]=SchemaField(\ndescription=\"Array of document IDs obtained from searches\","
                        }
                    ],
                    "content": ")\nids:List[str]=SchemaField(\ndescription=\"Array of document IDs obtained from searches\",\n"
                },
                {
                    "type": "FieldDecl",
                    "name": "contents",
                    "range": [
                        227,
                        252
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "ContentRetrievalSettings",
                            "range": [
                                229,
                                229
                            ],
                            "children": [],
                            "content": "contents"
                        },
                        {
                            "type": "Assignment",
                            "name": "SchemaField",
                            "range": [
                                231,
                                251
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        234,
                                        236
                                    ],
                                    "children": [],
                                    "content": "(\ndescription"
                                },
                                {
                                    "type": "Argument",
                                    "name": "default",
                                    "range": [
                                        239,
                                        243
                                    ],
                                    "children": [],
                                    "content": ",\ndefault=ContentRetrievalSettings"
                                },
                                {
                                    "type": "Argument",
                                    "name": "advanced",
                                    "range": [
                                        246,
                                        248
                                    ],
                                    "children": [],
                                    "content": ",\nadvanced"
                                }
                            ],
                            "content": "ContentRetrievalSettings=SchemaField(\ndescription=\"Content retrieval settings\",\ndefault=ContentRetrievalSettings(),\nadvanced=True,"
                        }
                    ],
                    "content": ")\ncontents:ContentRetrievalSettings=SchemaField(\ndescription=\"Content retrieval settings\",\ndefault=ContentRetrievalSettings(),\nadvanced=True,\n"
                }
            ],
            "content": ":\nclass Input(BlockSchema)"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                254,
                260
            ],
            "children": [
                {
                    "type": "ClassInheritance",
                    "name": "BlockSchema",
                    "range": [
                        256,
                        258
                    ],
                    "children": [],
                    "content": "class Output("
                },
                {
                    "type": "FieldDecl",
                    "name": "results",
                    "range": [
                        261,
                        280
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                263,
                                263
                            ],
                            "children": [],
                            "content": "results"
                        },
                        {
                            "type": "Assignment",
                            "name": "SchemaField",
                            "range": [
                                265,
                                279
                            ],
                            "children": [
                                {
                                    "type": "Argument",
                                    "name": "description",
                                    "range": [
                                        268,
                                        270
                                    ],
                                    "children": [],
                                    "content": "(\ndescription"
                                },
                                {
                                    "type": "Argument",
                                    "name": "default",
                                    "range": [
                                        273,
                                        276
                                    ],
                                    "children": [],
                                    "content": ",\ndefault="
                                }
                            ],
                            "content": "list=SchemaField(\ndescription=\"List of document contents\",\ndefault=[],"
                        }
                    ],
                    "content": ":\nresults:list=SchemaField(\ndescription=\"List of document contents\",\ndefault=[],\n"
                }
            ],
            "content": "\n\nclass Output(BlockSchema)"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                282,
                331
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        285,
                        285
                    ],
                    "children": [],
                    "content": "__init__"
                },
                {
                    "type": "SuperCall",
                    "name": "super",
                    "range": [
                        289,
                        295
                    ],
                    "children": [],
                    "content": ":\nsuper().__init__"
                },
                {
                    "type": "Assignment",
                    "name": "id",
                    "range": [
                        296,
                        299
                    ],
                    "children": [],
                    "content": "(\nid="
                },
                {
                    "type": "Assignment",
                    "name": "description",
                    "range": [
                        301,
                        304
                    ],
                    "children": [],
                    "content": ",\ndescription="
                },
                {
                    "type": "Assignment",
                    "name": "categories",
                    "range": [
                        306,
                        313
                    ],
                    "children": [],
                    "content": ",\ncategories={BlockCategory.SEARCH"
                },
                {
                    "type": "Assignment",
                    "name": "input_schema",
                    "range": [
                        315,
                        320
                    ],
                    "children": [],
                    "content": ",\ninput_schema=ExaContentsBlock."
                },
                {
                    "type": "Assignment",
                    "name": "output_schema",
                    "range": [
                        322,
                        327
                    ],
                    "children": [],
                    "content": ",\noutput_schema=ExaContentsBlock."
                }
            ],
            "content": "\n\ndef __init__(self):\nsuper().__init__(\nid=\"c52be83f-f8cd-4180-b243-af35f986b461\",\ndescription=\"Retrieves document contents using Exa's contents API\",\ncategories={BlockCategory.SEARCH},\ninput_schema=ExaContentsBlock.Input,\noutput_schema=ExaContentsBlock.Output,\n)"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                332,
                493
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        336,
                        336
                    ],
                    "children": [],
                    "content": "("
                },
                {
                    "type": "Parameter",
                    "name": "input_data",
                    "range": [
                        338,
                        341
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "Input",
                            "range": [
                                340,
                                340
                            ],
                            "children": [],
                            "content": "input_data"
                        }
                    ],
                    "content": "self,input_data:"
                },
                {
                    "type": "Parameter",
                    "name": "credentials",
                    "range": [
                        344,
                        347
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "ExaCredentials",
                            "range": [
                                346,
                                346
                            ],
                            "children": [],
                            "content": "credentials"
                        }
                    ],
                    "content": "*,credentials:"
                },
                {
                    "type": "Parameter",
                    "name": "kwargs",
                    "range": [
                        350,
                        350
                    ],
                    "children": [],
                    "content": "*"
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        355,
                        355
                    ],
                    "children": [],
                    "content": "-"
                },
                {
                    "type": "Assignment",
                    "name": "url",
                    "range": [
                        358,
                        361
                    ],
                    "children": [],
                    "content": ":\nurl="
                },
                {
                    "type": "Assignment",
                    "name": "headers",
                    "range": [
                        362,
                        383
                    ],
                    "children": [
                        {
                            "type": "ObjectLiteral",
                            "name": "headers",
                            "range": [
                                364,
                                382
                            ],
                            "children": [
                                {
                                    "type": "Property",
                                    "name": "Content-Type",
                                    "range": [
                                        366,
                                        368
                                    ],
                                    "children": [],
                                    "content": "{\n\"Content-Type\""
                                },
                                {
                                    "type": "Property",
                                    "name": "x-api-key",
                                    "range": [
                                        371,
                                        380
                                    ],
                                    "children": [],
                                    "content": ",\n\"x-api-key\":credentials.api_key.get_secret_value("
                                }
                            ],
                            "content": "headers={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),"
                        }
                    ],
                    "content": "\"https://api.exa.ai/contents\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n"
                },
                {
                    "type": "Assignment",
                    "name": "payload",
                    "range": [
                        385,
                        424
                    ],
                    "children": [
                        {
                            "type": "ObjectLiteral",
                            "name": "payload",
                            "range": [
                                387,
                                423
                            ],
                            "children": [
                                {
                                    "type": "Property",
                                    "name": "ids",
                                    "range": [
                                        389,
                                        394
                                    ],
                                    "children": [],
                                    "content": "{\n\"ids\":input_data."
                                },
                                {
                                    "type": "Property",
                                    "name": "text",
                                    "range": [
                                        396,
                                        403
                                    ],
                                    "children": [],
                                    "content": ",\n\"text\":input_data.contents."
                                },
                                {
                                    "type": "Property",
                                    "name": "highlights",
                                    "range": [
                                        405,
                                        412
                                    ],
                                    "children": [],
                                    "content": ",\n\"highlights\":input_data.contents."
                                },
                                {
                                    "type": "Property",
                                    "name": "summary",
                                    "range": [
                                        414,
                                        421
                                    ],
                                    "children": [],
                                    "content": ",\n\"summary\":input_data.contents."
                                }
                            ],
                            "content": "payload={\n\"ids\":input_data.ids,\n\"text\":input_data.contents.text,\n\"highlights\":input_data.contents.highlights,\n\"summary\":input_data.contents.summary,"
                        }
                    ],
                    "content": "\n\npayload={\n\"ids\":input_data.ids,\n\"text\":input_data.contents.text,\n\"highlights\":input_data.contents.highlights,\n\"summary\":input_data.contents.summary,\n"
                },
                {
                    "type": "TryStatement",
                    "name": "try",
                    "range": [
                        426,
                        493
                    ],
                    "children": [
                        {
                            "type": "Block",
                            "name": "tryBlock",
                            "range": [
                                428,
                                472
                            ],
                            "children": [
                                {
                                    "type": "Assignment",
                                    "name": "response",
                                    "range": [
                                        429,
                                        445
                                    ],
                                    "children": [],
                                    "content": ":\nresponse=requests.post(url,headers=headers,json=payload"
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "raise_for_status",
                                    "range": [
                                        446,
                                        451
                                    ],
                                    "children": [],
                                    "content": ")\nresponse.raise_for_status("
                                },
                                {
                                    "type": "Assignment",
                                    "name": "data",
                                    "range": [
                                        452,
                                        459
                                    ],
                                    "children": [],
                                    "content": ")\ndata=response.json("
                                },
                                {
                                    "type": "YieldStatement",
                                    "name": "yield",
                                    "range": [
                                        460,
                                        472
                                    ],
                                    "children": [],
                                    "content": ")\nyield \"results\",data.get(\"results\",[]"
                                }
                            ],
                            "content": "try:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[]"
                        },
                        {
                            "type": "CatchClause",
                            "name": "catch",
                            "range": [
                                473,
                                493
                            ],
                            "children": [
                                {
                                    "type": "Parameter",
                                    "name": "e",
                                    "range": [
                                        476,
                                        476
                                    ],
                                    "children": [],
                                    "content": "Exception"
                                },
                                {
                                    "type": "Block",
                                    "name": "catchBlock",
                                    "range": [
                                        478,
                                        493
                                    ],
                                    "children": [
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                479,
                                                486
                                            ],
                                            "children": [],
                                            "content": ":\nyield \"error\",str(e"
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield",
                                            "range": [
                                                487,
                                                493
                                            ],
                                            "children": [],
                                            "content": ")\nyield \"results\",[]"
                                        }
                                    ],
                                    "content": "e:\nyield \"error\",str(e)\nyield \"results\",[]"
                                }
                            ],
                            "content": ")\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]"
                        }
                    ],
                    "content": "\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]"
                }
            ],
            "content": "\n\ndef run(\nself,input_data:Input,*,credentials:ExaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://api.exa.ai/contents\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n}\n\npayload={\n\"ids\":input_data.ids,\n\"text\":input_data.contents.text,\n\"highlights\":input_data.contents.highlights,\n\"summary\":input_data.contents.summary,\n}\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]"
        }
    ],
    "content": "class ContentRetrievalSettings(BaseModel):\ntext:Optional[dict]=SchemaField(\ndescription=\"Text content settings\",\ndefault={\"maxCharacters\":1000,\"includeHtmlTags\":False},\nadvanced=True,\n)\nhighlights:Optional[dict]=SchemaField(\ndescription=\"Highlight settings\",\ndefault={\n\"numSentences\":3,\n\"highlightsPerUrl\":3,\n\"query\":\"\",\n},\nadvanced=True,\n)\nsummary:Optional[dict]=SchemaField(\ndescription=\"Summary settings\",\ndefault={\"query\":\"\"},\nadvanced=True,\n)\n\n\nclass ExaContentsBlock(Block):\nclass Input(BlockSchema):\ncredentials:ExaCredentialsInput=ExaCredentialsField()\nids:List[str]=SchemaField(\ndescription=\"Array of document IDs obtained from searches\",\n)\ncontents:ContentRetrievalSettings=SchemaField(\ndescription=\"Content retrieval settings\",\ndefault=ContentRetrievalSettings(),\nadvanced=True,\n)\n\nclass Output(BlockSchema):\nresults:list=SchemaField(\ndescription=\"List of document contents\",\ndefault=[],\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"c52be83f-f8cd-4180-b243-af35f986b461\",\ndescription=\"Retrieves document contents using Exa's contents API\",\ncategories={BlockCategory.SEARCH},\ninput_schema=ExaContentsBlock.Input,\noutput_schema=ExaContentsBlock.Output,\n)\n\ndef run(\nself,input_data:Input,*,credentials:ExaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://api.exa.ai/contents\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n}\n\npayload={\n\"ids\":input_data.ids,\n\"text\":input_data.contents.text,\n\"highlights\":input_data.contents.highlights,\n\"summary\":input_data.contents.summary,\n}\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]"
}