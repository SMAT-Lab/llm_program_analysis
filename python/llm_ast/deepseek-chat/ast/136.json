{
    "type": "Program",
    "name": "Global",
    "range": [
        63,
        952
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "Slant3DWebhooksManager",
            "range": [
                63,
                520
            ],
            "children": [
                {
                    "type": "ClassVariableDecl",
                    "name": "PROVIDER_NAME",
                    "range": [
                        75,
                        80
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                76,
                                80
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "ProviderName",
                                    "range": [
                                        77,
                                        77
                                    ],
                                    "children": [],
                                    "content": "ProviderName"
                                },
                                {
                                    "type": "MemberExpression",
                                    "name": ".",
                                    "range": [
                                        78,
                                        79
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "SLANT3D",
                                            "range": [
                                                79,
                                                79
                                            ],
                                            "children": [],
                                            "content": "SLANT3D"
                                        }
                                    ],
                                    "content": ".SLANT3D"
                                }
                            ],
                            "content": "=ProviderName.SLANT3D\n"
                        }
                    ],
                    "content": "PROVIDER_NAME=ProviderName.SLANT3D\n"
                },
                {
                    "type": "ClassVariableDecl",
                    "name": "BASE_URL",
                    "range": [
                        81,
                        84
                    ],
                    "children": [
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                82,
                                84
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"https://www.slant3dapi.com/api\"",
                                    "range": [
                                        83,
                                        83
                                    ],
                                    "children": [],
                                    "content": "\"https://www.slant3dapi.com/api\""
                                }
                            ],
                            "content": "=\"https://www.slant3dapi.com/api\"\n"
                        }
                    ],
                    "content": "BASE_URL=\"https://www.slant3dapi.com/api\"\n"
                },
                {
                    "type": "MethodDecl",
                    "name": "_register_webhook",
                    "range": [
                        86,
                        299
                    ],
                    "children": [
                        {
                            "type": "FunctionSignature",
                            "name": "(",
                            "range": [
                                89,
                                127
                            ],
                            "children": [
                                {
                                    "type": "Parameter",
                                    "name": "self",
                                    "range": [
                                        91,
                                        91
                                    ],
                                    "children": [],
                                    "content": "self"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "credentials",
                                    "range": [
                                        94,
                                        94
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                95,
                                                96
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "Credentials",
                                                    "range": [
                                                        96,
                                                        96
                                                    ],
                                                    "children": [],
                                                    "content": "Credentials"
                                                }
                                            ],
                                            "content": ":Credentials"
                                        }
                                    ],
                                    "content": "credentials"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "webhook_type",
                                    "range": [
                                        99,
                                        99
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                100,
                                                101
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "str",
                                                    "range": [
                                                        101,
                                                        101
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                }
                                            ],
                                            "content": ":str"
                                        }
                                    ],
                                    "content": "webhook_type"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "resource",
                                    "range": [
                                        104,
                                        104
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                105,
                                                106
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "str",
                                                    "range": [
                                                        106,
                                                        106
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                }
                                            ],
                                            "content": ":str"
                                        }
                                    ],
                                    "content": "resource"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "events",
                                    "range": [
                                        109,
                                        109
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                110,
                                                111
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "list",
                                                    "range": [
                                                        111,
                                                        111
                                                    ],
                                                    "children": [],
                                                    "content": "list"
                                                },
                                                {
                                                    "type": "TypeParameter",
                                                    "name": "[",
                                                    "range": [
                                                        112,
                                                        114
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "str",
                                                            "range": [
                                                                113,
                                                                113
                                                            ],
                                                            "children": [],
                                                            "content": "str"
                                                        }
                                                    ],
                                                    "content": "[str]"
                                                }
                                            ],
                                            "content": ":list"
                                        }
                                    ],
                                    "content": "events"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "ingress_url",
                                    "range": [
                                        117,
                                        117
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                118,
                                                119
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "str",
                                                    "range": [
                                                        119,
                                                        119
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                }
                                            ],
                                            "content": ":str"
                                        }
                                    ],
                                    "content": "ingress_url"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "secret",
                                    "range": [
                                        122,
                                        122
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                123,
                                                124
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "str",
                                                    "range": [
                                                        124,
                                                        124
                                                    ],
                                                    "children": [],
                                                    "content": "str"
                                                }
                                            ],
                                            "content": ":str"
                                        }
                                    ],
                                    "content": "secret"
                                }
                            ],
                            "content": "(\nself,\ncredentials:Credentials,\nwebhook_type:str,\nresource:str,\nevents:list[str],\ningress_url:str,\nsecret:str,\n)"
                        },
                        {
                            "type": "ReturnTypeAnnotation",
                            "name": "->",
                            "range": [
                                128,
                                136
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "tuple",
                                    "range": [
                                        130,
                                        130
                                    ],
                                    "children": [],
                                    "content": "tuple"
                                },
                                {
                                    "type": "TypeParameter",
                                    "name": "[",
                                    "range": [
                                        131,
                                        135
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "str",
                                            "range": [
                                                132,
                                                132
                                            ],
                                            "children": [],
                                            "content": "str"
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "dict",
                                            "range": [
                                                134,
                                                134
                                            ],
                                            "children": [],
                                            "content": "dict"
                                        }
                                    ],
                                    "content": "[str,dict]"
                                }
                            ],
                            "content": "->tuple[str,dict]:"
                        },
                        {
                            "type": "BlockStatement",
                            "name": "{",
                            "range": [
                                137,
                                299
                            ],
                            "children": [
                                {
                                    "type": "IfStatement",
                                    "name": "if",
                                    "range": [
                                        143,
                                        158
                                    ],
                                    "children": [
                                        {
                                            "type": "UnaryExpression",
                                            "name": "not",
                                            "range": [
                                                144,
                                                145
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "isinstance",
                                                    "range": [
                                                        145,
                                                        150
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "credentials",
                                                            "range": [
                                                                147,
                                                                147
                                                            ],
                                                            "children": [],
                                                            "content": "credentials"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "APIKeyCredentials",
                                                            "range": [
                                                                149,
                                                                149
                                                            ],
                                                            "children": [],
                                                            "content": "APIKeyCredentials"
                                                        }
                                                    ],
                                                    "content": "isinstance(credentials,APIKeyCredentials)"
                                                }
                                            ],
                                            "content": "not isinstance"
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "{",
                                            "range": [
                                                151,
                                                158
                                            ],
                                            "children": [
                                                {
                                                    "type": "ThrowStatement",
                                                    "name": "raise",
                                                    "range": [
                                                        153,
                                                        157
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "NewExpression",
                                                            "name": "ValueError",
                                                            "range": [
                                                                154,
                                                                157
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Literal",
                                                                    "name": "\"API key is required to register a webhook\"",
                                                                    "range": [
                                                                        156,
                                                                        156
                                                                    ],
                                                                    "children": [],
                                                                    "content": "\"API key is required to register a webhook\""
                                                                }
                                                            ],
                                                            "content": "ValueError(\"API key is required to register a webhook\")"
                                                        }
                                                    ],
                                                    "content": "raise ValueError(\"API key is required to register a webhook\")"
                                                }
                                            ],
                                            "content": ":\nraise ValueError(\"API key is required to register a webhook\")\n"
                                        }
                                    ],
                                    "content": "if not isinstance(credentials,APIKeyCredentials):\nraise ValueError(\"API key is required to register a webhook\")\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "headers",
                                    "range": [
                                        160,
                                        181
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                161,
                                                181
                                            ],
                                            "children": [
                                                {
                                                    "type": "ObjectExpression",
                                                    "name": "{",
                                                    "range": [
                                                        162,
                                                        180
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Property",
                                                            "name": "\"api-key\"",
                                                            "range": [
                                                                164,
                                                                173
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "credentials",
                                                                    "range": [
                                                                        166,
                                                                        166
                                                                    ],
                                                                    "children": [],
                                                                    "content": "credentials"
                                                                },
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": ".",
                                                                    "range": [
                                                                        167,
                                                                        168
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "api_key",
                                                                            "range": [
                                                                                168,
                                                                                168
                                                                            ],
                                                                            "children": [],
                                                                            "content": "api_key"
                                                                        }
                                                                    ],
                                                                    "content": ".api_key"
                                                                },
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "get_secret_value",
                                                                    "range": [
                                                                        170,
                                                                        172
                                                                    ],
                                                                    "children": [],
                                                                    "content": "get_secret_value()"
                                                                }
                                                            ],
                                                            "content": "\"api-key\":credentials.api_key.get_secret_value(),"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"Content-Type\"",
                                                            "range": [
                                                                175,
                                                                178
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Literal",
                                                                    "name": "\"application/json\"",
                                                                    "range": [
                                                                        177,
                                                                        177
                                                                    ],
                                                                    "children": [],
                                                                    "content": "\"application/json\""
                                                                }
                                                            ],
                                                            "content": "\"Content-Type\":\"application/json\","
                                                        }
                                                    ],
                                                    "content": "{\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}"
                                                }
                                            ],
                                            "content": "={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n"
                                        }
                                    ],
                                    "content": "headers={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "payload",
                                    "range": [
                                        198,
                                        205
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                199,
                                                205
                                            ],
                                            "children": [
                                                {
                                                    "type": "ObjectExpression",
                                                    "name": "{",
                                                    "range": [
                                                        200,
                                                        204
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Property",
                                                            "name": "\"endPoint\"",
                                                            "range": [
                                                                201,
                                                                203
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "ingress_url",
                                                                    "range": [
                                                                        203,
                                                                        203
                                                                    ],
                                                                    "children": [],
                                                                    "content": "ingress_url"
                                                                }
                                                            ],
                                                            "content": "\"endPoint\":ingress_url"
                                                        }
                                                    ],
                                                    "content": "{\"endPoint\":ingress_url}"
                                                }
                                            ],
                                            "content": "={\"endPoint\":ingress_url}\n"
                                        }
                                    ],
                                    "content": "payload={\"endPoint\":ingress_url}\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "response",
                                    "range": [
                                        207,
                                        226
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                208,
                                                226
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "post",
                                                    "range": [
                                                        211,
                                                        225
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "MemberExpression",
                                                            "name": ".",
                                                            "range": [
                                                                210,
                                                                211
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "requests",
                                                                    "range": [
                                                                        209,
                                                                        209
                                                                    ],
                                                                    "children": [],
                                                                    "content": "requests"
                                                                }
                                                            ],
                                                            "content": ".post"
                                                        },
                                                        {
                                                            "type": "TemplateLiteral",
                                                            "name": "f",
                                                            "range": [
                                                                214,
                                                                215
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "TemplateElement",
                                                                    "name": "\"{self.BASE_URL}/customer/webhookSubscribe\"",
                                                                    "range": [
                                                                        215,
                                                                        215
                                                                    ],
                                                                    "children": [],
                                                                    "content": "\"{self.BASE_URL}/customer/webhookSubscribe\""
                                                                }
                                                            ],
                                                            "content": "f \"{self.BASE_URL}/customer/webhookSubscribe\""
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "headers",
                                                            "range": [
                                                                217,
                                                                217
                                                            ],
                                                            "children": [],
                                                            "content": "headers"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "json",
                                                            "range": [
                                                                221,
                                                                221
                                                            ],
                                                            "children": [],
                                                            "content": "json"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "payload",
                                                            "range": [
                                                                223,
                                                                223
                                                            ],
                                                            "children": [],
                                                            "content": "payload"
                                                        }
                                                    ],
                                                    "content": "post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)"
                                                }
                                            ],
                                            "content": "=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n"
                                        }
                                    ],
                                    "content": "response=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n"
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if",
                                    "range": [
                                        228,
                                        256
                                    ],
                                    "children": [
                                        {
                                            "type": "UnaryExpression",
                                            "name": "not",
                                            "range": [
                                                229,
                                                230
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": ".",
                                                    "range": [
                                                        231,
                                                        232
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "response",
                                                            "range": [
                                                                230,
                                                                230
                                                            ],
                                                            "children": [],
                                                            "content": "response"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "ok",
                                                            "range": [
                                                                232,
                                                                232
                                                            ],
                                                            "children": [],
                                                            "content": "ok"
                                                        }
                                                    ],
                                                    "content": ".ok"
                                                }
                                            ],
                                            "content": "not response"
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "{",
                                            "range": [
                                                233,
                                                256
                                            ],
                                            "children": [
                                                {
                                                    "type": "VariableDecl",
                                                    "name": "error",
                                                    "range": [
                                                        235,
                                                        249
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "AssignmentExpression",
                                                            "name": "=",
                                                            "range": [
                                                                236,
                                                                249
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": ".",
                                                                    "range": [
                                                                        238,
                                                                        239
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "response",
                                                                            "range": [
                                                                                237,
                                                                                237
                                                                            ],
                                                                            "children": [],
                                                                            "content": "response"
                                                                        },
                                                                        {
                                                                            "type": "CallExpression",
                                                                            "name": "json",
                                                                            "range": [
                                                                                239,
                                                                                241
                                                                            ],
                                                                            "children": [],
                                                                            "content": "json()"
                                                                        }
                                                                    ],
                                                                    "content": ".json"
                                                                },
                                                                {
                                                                    "type": "CallExpression",
                                                                    "name": "get",
                                                                    "range": [
                                                                        243,
                                                                        248
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"error\"",
                                                                            "range": [
                                                                                245,
                                                                                245
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"error\""
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"Unknown error\"",
                                                                            "range": [
                                                                                247,
                                                                                247
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Unknown error\""
                                                                        }
                                                                    ],
                                                                    "content": "get(\"error\",\"Unknown error\")"
                                                                }
                                                            ],
                                                            "content": "=response.json().get(\"error\",\"Unknown error\")\n"
                                                        }
                                                    ],
                                                    "content": "error=response.json().get(\"error\",\"Unknown error\")\n"
                                                },
                                                {
                                                    "type": "ThrowStatement",
                                                    "name": "raise",
                                                    "range": [
                                                        250,
                                                        255
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "NewExpression",
                                                            "name": "RuntimeError",
                                                            "range": [
                                                                251,
                                                                255
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "TemplateLiteral",
                                                                    "name": "f",
                                                                    "range": [
                                                                        253,
                                                                        254
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "TemplateElement",
                                                                            "name": "\"Failed to register webhook: {error}\"",
                                                                            "range": [
                                                                                254,
                                                                                254
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Failed to register webhook: {error}\""
                                                                        }
                                                                    ],
                                                                    "content": "f \"Failed to register webhook: {error}\""
                                                                }
                                                            ],
                                                            "content": "RuntimeError(f \"Failed to register webhook: {error}\")"
                                                        }
                                                    ],
                                                    "content": "raise RuntimeError(f \"Failed to register webhook: {error}\")"
                                                }
                                            ],
                                            "content": ":\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n"
                                        }
                                    ],
                                    "content": "if not response.ok:\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "webhook_config",
                                    "range": [
                                        258,
                                        293
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                259,
                                                293
                                            ],
                                            "children": [
                                                {
                                                    "type": "ObjectExpression",
                                                    "name": "{",
                                                    "range": [
                                                        260,
                                                        292
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Property",
                                                            "name": "\"endpoint\"",
                                                            "range": [
                                                                262,
                                                                264
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "ingress_url",
                                                                    "range": [
                                                                        264,
                                                                        264
                                                                    ],
                                                                    "children": [],
                                                                    "content": "ingress_url"
                                                                }
                                                            ],
                                                            "content": "\"endpoint\":ingress_url"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"provider\"",
                                                            "range": [
                                                                267,
                                                                272
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": ".",
                                                                    "range": [
                                                                        269,
                                                                        270
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "self",
                                                                            "range": [
                                                                                269,
                                                                                269
                                                                            ],
                                                                            "children": [],
                                                                            "content": "self"
                                                                        },
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "PROVIDER_NAME",
                                                                            "range": [
                                                                                271,
                                                                                271
                                                                            ],
                                                                            "children": [],
                                                                            "content": "PROVIDER_NAME"
                                                                        }
                                                                    ],
                                                                    "content": "self."
                                                                }
                                                            ],
                                                            "content": "\"provider\":self.PROVIDER_NAME,"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"events\"",
                                                            "range": [
                                                                274,
                                                                279
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "ArrayExpression",
                                                                    "name": "[",
                                                                    "range": [
                                                                        276,
                                                                        278
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"order.shipped\"",
                                                                            "range": [
                                                                                277,
                                                                                277
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"order.shipped\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"order.shipped\"]"
                                                                }
                                                            ],
                                                            "content": "\"events\":[\"order.shipped\"],"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"type\"",
                                                            "range": [
                                                                287,
                                                                290
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Identifier",
                                                                    "name": "webhook_type",
                                                                    "range": [
                                                                        289,
                                                                        289
                                                                    ],
                                                                    "children": [],
                                                                    "content": "webhook_type"
                                                                }
                                                            ],
                                                            "content": "\"type\":webhook_type,"
                                                        }
                                                    ],
                                                    "content": "{\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}"
                                                }
                                            ],
                                            "content": "={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n"
                                        }
                                    ],
                                    "content": "webhook_config={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n"
                                },
                                {
                                    "type": "ReturnStatement",
                                    "name": "return",
                                    "range": [
                                        295,
                                        299
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "\"\"",
                                            "range": [
                                                296,
                                                296
                                            ],
                                            "children": [],
                                            "content": "\"\""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "webhook_config",
                                            "range": [
                                                298,
                                                298
                                            ],
                                            "children": [],
                                            "content": "webhook_config"
                                        }
                                    ],
                                    "content": "return\"\",webhook_config\n"
                                }
                            ],
                            "content": "\n\"\"\"Register a new webhook with Slant3D\"\"\"\n\nif not isinstance(credentials,APIKeyCredentials):\nraise ValueError(\"API key is required to register a webhook\")\n\nheaders={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n\n#Slant3D 's API doesn' t use events list,just register for all order updates\npayload={\"endPoint\":ingress_url}\n\nresponse=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n\nif not response.ok:\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n\nwebhook_config={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n\nreturn\"\",webhook_config\n"
                        }
                    ],
                    "content": "async def _register_webhook(\nself,\ncredentials:Credentials,\nwebhook_type:str,\nresource:str,\nevents:list[str],\ningress_url:str,\nsecret:str,\n)->tuple[str,dict]:\n\"\"\"Register a new webhook with Slant3D\"\"\"\n\nif not isinstance(credentials,APIKeyCredentials):\nraise ValueError(\"API key is required to register a webhook\")\n\nheaders={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n\n#Slant3D 's API doesn' t use events list,just register for all order updates\npayload={\"endPoint\":ingress_url}\n\nresponse=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n\nif not response.ok:\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n\nwebhook_config={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n\nreturn\"\",webhook_config\n"
                },
                {
                    "type": "MethodDecl",
                    "name": "validate_payload",
                    "range": [
                        301,
                        468
                    ],
                    "children": [
                        {
                            "type": "FunctionSignature",
                            "name": "(",
                            "range": [
                                307,
                                321
                            ],
                            "children": [
                                {
                                    "type": "Parameter",
                                    "name": "cls",
                                    "range": [
                                        309,
                                        309
                                    ],
                                    "children": [],
                                    "content": "cls"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "webhook",
                                    "range": [
                                        311,
                                        311
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                312,
                                                313
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": ".",
                                                    "range": [
                                                        314,
                                                        315
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "integrations",
                                                            "range": [
                                                                313,
                                                                313
                                                            ],
                                                            "children": [],
                                                            "content": "integrations"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "Webhook",
                                                            "range": [
                                                                315,
                                                                315
                                                            ],
                                                            "children": [],
                                                            "content": "Webhook"
                                                        }
                                                    ],
                                                    "content": ".Webhook"
                                                }
                                            ],
                                            "content": ":integrations"
                                        }
                                    ],
                                    "content": "webhook"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "request",
                                    "range": [
                                        317,
                                        317
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                318,
                                                319
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "Request",
                                                    "range": [
                                                        319,
                                                        319
                                                    ],
                                                    "children": [],
                                                    "content": "Request"
                                                }
                                            ],
                                            "content": ":Request"
                                        }
                                    ],
                                    "content": "request"
                                }
                            ],
                            "content": "(\ncls,webhook:integrations.Webhook,request:Request\n)"
                        },
                        {
                            "type": "ReturnTypeAnnotation",
                            "name": "->",
                            "range": [
                                322,
                                330
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "tuple",
                                    "range": [
                                        324,
                                        324
                                    ],
                                    "children": [],
                                    "content": "tuple"
                                },
                                {
                                    "type": "TypeParameter",
                                    "name": "[",
                                    "range": [
                                        325,
                                        329
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "dict",
                                            "range": [
                                                326,
                                                326
                                            ],
                                            "children": [],
                                            "content": "dict"
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "str",
                                            "range": [
                                                328,
                                                328
                                            ],
                                            "children": [],
                                            "content": "str"
                                        }
                                    ],
                                    "content": "[dict,str]"
                                }
                            ],
                            "content": "->tuple[dict,str]:"
                        },
                        {
                            "type": "BlockStatement",
                            "name": "{",
                            "range": [
                                331,
                                468
                            ],
                            "children": [
                                {
                                    "type": "VariableDecl",
                                    "name": "payload",
                                    "range": [
                                        337,
                                        345
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                338,
                                                345
                                            ],
                                            "children": [
                                                {
                                                    "type": "AwaitExpression",
                                                    "name": "await",
                                                    "range": [
                                                        339,
                                                        340
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "json",
                                                            "range": [
                                                                342,
                                                                344
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": ".",
                                                                    "range": [
                                                                        341,
                                                                        342
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "request",
                                                                            "range": [
                                                                                340,
                                                                                340
                                                                            ],
                                                                            "children": [],
                                                                            "content": "request"
                                                                        }
                                                                    ],
                                                                    "content": ".json"
                                                                }
                                                            ],
                                                            "content": "json()"
                                                        }
                                                    ],
                                                    "content": "await request"
                                                }
                                            ],
                                            "content": "=await request.json()\n"
                                        }
                                    ],
                                    "content": "payload=await request.json()\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "required_fields",
                                    "range": [
                                        356,
                                        367
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                357,
                                                367
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArrayExpression",
                                                    "name": "[",
                                                    "range": [
                                                        358,
                                                        366
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"orderId\"",
                                                            "range": [
                                                                359,
                                                                359
                                                            ],
                                                            "children": [],
                                                            "content": "\"orderId\""
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"status\"",
                                                            "range": [
                                                                361,
                                                                361
                                                            ],
                                                            "children": [],
                                                            "content": "\"status\""
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"trackingNumber\"",
                                                            "range": [
                                                                363,
                                                                363
                                                            ],
                                                            "children": [],
                                                            "content": "\"trackingNumber\""
                                                        },
                                                        {
                                                            "type": "Literal",
                                                            "name": "\"carrierCode\"",
                                                            "range": [
                                                                365,
                                                                365
                                                            ],
                                                            "children": [],
                                                            "content": "\"carrierCode\""
                                                        }
                                                    ],
                                                    "content": "[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]"
                                                }
                                            ],
                                            "content": "=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\n"
                                        }
                                    ],
                                    "content": "required_fields=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "missing_fields",
                                    "range": [
                                        368,
                                        382
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                369,
                                                382
                                            ],
                                            "children": [
                                                {
                                                    "type": "ArrayExpression",
                                                    "name": "[",
                                                    "range": [
                                                        370,
                                                        381
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "ForStatement",
                                                            "name": "for",
                                                            "range": [
                                                                371,
                                                                380
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "VariableDecl",
                                                                    "name": "field",
                                                                    "range": [
                                                                        371,
                                                                        371
                                                                    ],
                                                                    "children": [],
                                                                    "content": "field"
                                                                },
                                                                {
                                                                    "type": "BinaryExpression",
                                                                    "name": "in",
                                                                    "range": [
                                                                        373,
                                                                        375
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "required_fields",
                                                                            "range": [
                                                                                374,
                                                                                374
                                                                            ],
                                                                            "children": [],
                                                                            "content": "in"
                                                                        }
                                                                    ],
                                                                    "content": "field in required_fields"
                                                                },
                                                                {
                                                                    "type": "UnaryExpression",
                                                                    "name": "not",
                                                                    "range": [
                                                                        377,
                                                                        378
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "BinaryExpression",
                                                                            "name": "in",
                                                                            "range": [
                                                                                379,
                                                                                380
                                                                            ],
                                                                            "children": [
                                                                                {
                                                                                    "type": "Identifier",
                                                                                    "name": "payload",
                                                                                    "range": [
                                                                                        380,
                                                                                        380
                                                                                    ],
                                                                                    "children": [],
                                                                                    "content": "payload"
                                                                                }
                                                                            ],
                                                                            "content": "in payload"
                                                                        }
                                                                    ],
                                                                    "content": "field not"
                                                                }
                                                            ],
                                                            "content": "field for field in required_fields if field not in payload"
                                                        }
                                                    ],
                                                    "content": "[field for field in required_fields if field not in payload]"
                                                }
                                            ],
                                            "content": "=[field for field in required_fields if field not in payload]\n"
                                        }
                                    ],
                                    "content": "missing_fields=[field for field in required_fields if field not in payload]\n"
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if",
                                    "range": [
                                        384,
                                        394
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "missing_fields",
                                            "range": [
                                                385,
                                                385
                                            ],
                                            "children": [],
                                            "content": "missing_fields"
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "{",
                                            "range": [
                                                386,
                                                394
                                            ],
                                            "children": [
                                                {
                                                    "type": "ThrowStatement",
                                                    "name": "raise",
                                                    "range": [
                                                        388,
                                                        393
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "NewExpression",
                                                            "name": "ValueError",
                                                            "range": [
                                                                389,
                                                                393
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "TemplateLiteral",
                                                                    "name": "f",
                                                                    "range": [
                                                                        391,
                                                                        392
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "TemplateElement",
                                                                            "name": "\"Missing required fields: {', '.join(missing_fields)}\"",
                                                                            "range": [
                                                                                392,
                                                                                392
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"Missing required fields: {', '.join(missing_fields)}\""
                                                                        }
                                                                    ],
                                                                    "content": "f \"Missing required fields: {', '.join(missing_fields)}\""
                                                                }
                                                            ],
                                                            "content": "ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")"
                                                        }
                                                    ],
                                                    "content": "raise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")"
                                                }
                                            ],
                                            "content": ":\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n"
                                        }
                                    ],
                                    "content": "if missing_fields:\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "normalized_payload",
                                    "range": [
                                        401,
                                        438
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                402,
                                                438
                                            ],
                                            "children": [
                                                {
                                                    "type": "ObjectExpression",
                                                    "name": "{",
                                                    "range": [
                                                        403,
                                                        437
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Property",
                                                            "name": "\"orderId\"",
                                                            "range": [
                                                                405,
                                                                410
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "[",
                                                                    "range": [
                                                                        408,
                                                                        409
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "payload",
                                                                            "range": [
                                                                                407,
                                                                                407
                                                                            ],
                                                                            "children": [],
                                                                            "content": "payload"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"orderId\"",
                                                                            "range": [
                                                                                409,
                                                                                409
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"orderId\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"orderId\""
                                                                }
                                                            ],
                                                            "content": "\"orderId\":payload[\"orderId\"]"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"status\"",
                                                            "range": [
                                                                413,
                                                                418
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "[",
                                                                    "range": [
                                                                        416,
                                                                        417
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "payload",
                                                                            "range": [
                                                                                415,
                                                                                415
                                                                            ],
                                                                            "children": [],
                                                                            "content": "payload"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"status\"",
                                                                            "range": [
                                                                                417,
                                                                                417
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"status\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"status\""
                                                                }
                                                            ],
                                                            "content": "\"status\":payload[\"status\"]"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"trackingNumber\"",
                                                            "range": [
                                                                421,
                                                                426
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "[",
                                                                    "range": [
                                                                        424,
                                                                        425
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "payload",
                                                                            "range": [
                                                                                423,
                                                                                423
                                                                            ],
                                                                            "children": [],
                                                                            "content": "payload"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"trackingNumber\"",
                                                                            "range": [
                                                                                425,
                                                                                425
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"trackingNumber\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"trackingNumber\""
                                                                }
                                                            ],
                                                            "content": "\"trackingNumber\":payload[\"trackingNumber\"]"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"carrierCode\"",
                                                            "range": [
                                                                429,
                                                                434
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "MemberExpression",
                                                                    "name": "[",
                                                                    "range": [
                                                                        432,
                                                                        433
                                                                    ],
                                                                    "children": [
                                                                        {
                                                                            "type": "Identifier",
                                                                            "name": "payload",
                                                                            "range": [
                                                                                431,
                                                                                431
                                                                            ],
                                                                            "children": [],
                                                                            "content": "payload"
                                                                        },
                                                                        {
                                                                            "type": "Literal",
                                                                            "name": "\"carrierCode\"",
                                                                            "range": [
                                                                                433,
                                                                                433
                                                                            ],
                                                                            "children": [],
                                                                            "content": "\"carrierCode\""
                                                                        }
                                                                    ],
                                                                    "content": "[\"carrierCode\""
                                                                }
                                                            ],
                                                            "content": "\"carrierCode\":payload[\"carrierCode\"]"
                                                        }
                                                    ],
                                                    "content": "{\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}"
                                                }
                                            ],
                                            "content": "={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n"
                                        }
                                    ],
                                    "content": "normalized_payload={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "event_type",
                                    "range": [
                                        458,
                                        462
                                    ],
                                    "children": [
                                        {
                                            "type": "AssignmentExpression",
                                            "name": "=",
                                            "range": [
                                                459,
                                                462
                                            ],
                                            "children": [
                                                {
                                                    "type": "TemplateLiteral",
                                                    "name": "f",
                                                    "range": [
                                                        460,
                                                        461
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "TemplateElement",
                                                            "name": "\"order.{payload['status'].lower()}\"",
                                                            "range": [
                                                                461,
                                                                461
                                                            ],
                                                            "children": [],
                                                            "content": "\"order.{payload['status'].lower()}\""
                                                        }
                                                    ],
                                                    "content": "f \"order.{payload['status'].lower()}\""
                                                }
                                            ],
                                            "content": "=f \"order.{payload['status'].lower()}\"\n"
                                        }
                                    ],
                                    "content": "event_type=f \"order.{payload['status'].lower()}\"\n"
                                },
                                {
                                    "type": "ReturnStatement",
                                    "name": "return",
                                    "range": [
                                        464,
                                        468
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "normalized_payload",
                                            "range": [
                                                465,
                                                465
                                            ],
                                            "children": [],
                                            "content": "normalized_payload"
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "event_type",
                                            "range": [
                                                467,
                                                467
                                            ],
                                            "children": [],
                                            "content": "event_type"
                                        }
                                    ],
                                    "content": "return normalized_payload,event_type\n"
                                }
                            ],
                            "content": "\n\"\"\"Validate incoming webhook payload from Slant3D\"\"\"\n\npayload=await request.json()\n\n#Validate required fields from Slant3D API spec\nrequired_fields=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\nmissing_fields=[field for field in required_fields if field not in payload]\n\nif missing_fields:\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n\n#Normalize payload structure\nnormalized_payload={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n\n#Currently Slant3D only sends shipping notifications\n#Convert status to lowercase for event format compatibility\nevent_type=f \"order.{payload['status'].lower()}\"\n\nreturn normalized_payload,event_type\n"
                        }
                    ],
                    "content": "@classmethod\nasync def validate_payload(\ncls,webhook:integrations.Webhook,request:Request\n)->tuple[dict,str]:\n\"\"\"Validate incoming webhook payload from Slant3D\"\"\"\n\npayload=await request.json()\n\n#Validate required fields from Slant3D API spec\nrequired_fields=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\nmissing_fields=[field for field in required_fields if field not in payload]\n\nif missing_fields:\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n\n#Normalize payload structure\nnormalized_payload={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n\n#Currently Slant3D only sends shipping notifications\n#Convert status to lowercase for event format compatibility\nevent_type=f \"order.{payload['status'].lower()}\"\n\nreturn normalized_payload,event_type\n"
                },
                {
                    "type": "MethodDecl",
                    "name": "_deregister_webhook",
                    "range": [
                        470,
                        519
                    ],
                    "children": [
                        {
                            "type": "FunctionSignature",
                            "name": "(",
                            "range": [
                                473,
                                487
                            ],
                            "children": [
                                {
                                    "type": "Parameter",
                                    "name": "self",
                                    "range": [
                                        475,
                                        475
                                    ],
                                    "children": [],
                                    "content": "self"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "webhook",
                                    "range": [
                                        477,
                                        477
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                478,
                                                479
                                            ],
                                            "children": [
                                                {
                                                    "type": "MemberExpression",
                                                    "name": ".",
                                                    "range": [
                                                        480,
                                                        481
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Identifier",
                                                            "name": "integrations",
                                                            "range": [
                                                                479,
                                                                479
                                                            ],
                                                            "children": [],
                                                            "content": "integrations"
                                                        },
                                                        {
                                                            "type": "Identifier",
                                                            "name": "Webhook",
                                                            "range": [
                                                                481,
                                                                481
                                                            ],
                                                            "children": [],
                                                            "content": "Webhook"
                                                        }
                                                    ],
                                                    "content": ".Webhook"
                                                }
                                            ],
                                            "content": ":integrations"
                                        }
                                    ],
                                    "content": "webhook"
                                },
                                {
                                    "type": "Parameter",
                                    "name": "credentials",
                                    "range": [
                                        483,
                                        483
                                    ],
                                    "children": [
                                        {
                                            "type": "TypeAnnotation",
                                            "name": ":",
                                            "range": [
                                                484,
                                                485
                                            ],
                                            "children": [
                                                {
                                                    "type": "Identifier",
                                                    "name": "Credentials",
                                                    "range": [
                                                        485,
                                                        485
                                                    ],
                                                    "children": [],
                                                    "content": "Credentials"
                                                }
                                            ],
                                            "content": ":Credentials"
                                        }
                                    ],
                                    "content": "credentials"
                                }
                            ],
                            "content": "(\nself,webhook:integrations.Webhook,credentials:Credentials\n)"
                        },
                        {
                            "type": "ReturnTypeAnnotation",
                            "name": "->",
                            "range": [
                                488,
                                491
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "None",
                                    "range": [
                                        490,
                                        490
                                    ],
                                    "children": [],
                                    "content": "None"
                                }
                            ],
                            "content": "->None:"
                        },
                        {
                            "type": "BlockStatement",
                            "name": "{",
                            "range": [
                                492,
                                519
                            ],
                            "children": [
                                {
                                    "type": "ExpressionStatement",
                                    "name": "logger",
                                    "range": [
                                        508,
                                        517
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "warning",
                                            "range": [
                                                510,
                                                516
                                            ],
                                            "children": [
                                                {
                                                    "type": "TemplateLiteral",
                                                    "name": "f",
                                                    "range": [
                                                        513,
                                                        514
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "TemplateElement",
                                                            "name": "\"Warning: Manual deregistration required for webhook {webhook.id}\"",
                                                            "range": [
                                                                514,
                                                                514
                                                            ],
                                                            "children": [],
                                                            "content": "\"Warning: Manual deregistration required for webhook {webhook.id}\""
                                                        }
                                                    ],
                                                    "content": "f \"Warning: Manual deregistration required for webhook {webhook.id}\""
                                                }
                                            ],
                                            "content": "warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)"
                                        }
                                    ],
                                    "content": "logger.warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)\n"
                                },
                                {
                                    "type": "EmptyStatement",
                                    "name": "pass",
                                    "range": [
                                        518,
                                        518
                                    ],
                                    "children": [],
                                    "content": "pass"
                                }
                            ],
                            "content": "\n\"\"\" \\n         Note: Slant3D API currently doesn't provide a deregistration endpoint. \\n         This would need to be handled through support. \\n         \"\"\"\n#Log warning since we can't properly deregister\nlogger.warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)\npass\n"
                        }
                    ],
                    "content": "async def _deregister_webhook(\nself,webhook:integrations.Webhook,credentials:Credentials\n)->None:\n\"\"\" \\n         Note: Slant3D API currently doesn't provide a deregistration endpoint. \\n         This would need to be handled through support. \\n         \"\"\"\n#Log warning since we can't properly deregister\nlogger.warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)\npass\n"
                }
            ],
            "content": "class Slant3DWebhooksManager(BaseWebhooksManager):\n\"\"\"Manager for Slant3D webhooks\"\"\"\n\nPROVIDER_NAME=ProviderName.SLANT3D\nBASE_URL=\"https://www.slant3dapi.com/api\"\n\nasync def _register_webhook(\nself,\ncredentials:Credentials,\nwebhook_type:str,\nresource:str,\nevents:list[str],\ningress_url:str,\nsecret:str,\n)->tuple[str,dict]:\n\"\"\"Register a new webhook with Slant3D\"\"\"\n\nif not isinstance(credentials,APIKeyCredentials):\nraise ValueError(\"API key is required to register a webhook\")\n\nheaders={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n\n#Slant3D 's API doesn' t use events list,just register for all order updates\npayload={\"endPoint\":ingress_url}\n\nresponse=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n\nif not response.ok:\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n\nwebhook_config={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n\nreturn\"\",webhook_config\n\n@classmethod\nasync def validate_payload(\ncls,webhook:integrations.Webhook,request:Request\n)->tuple[dict,str]:\n\"\"\"Validate incoming webhook payload from Slant3D\"\"\"\n\npayload=await request.json()\n\n#Validate required fields from Slant3D API spec\nrequired_fields=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\nmissing_fields=[field for field in required_fields if field not in payload]\n\nif missing_fields:\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n\n#Normalize payload structure\nnormalized_payload={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n\n#Currently Slant3D only sends shipping notifications\n#Convert status to lowercase for event format compatibility\nevent_type=f \"order.{payload['status'].lower()}\"\n\nreturn normalized_payload,event_type\n\nasync def _deregister_webhook(\nself,webhook:integrations.Webhook,credentials:Credentials\n)->None:\n\"\"\" \\n         Note: Slant3D API currently doesn't provide a deregistration endpoint. \\n         This would need to be handled through support. \\n         \"\"\"\n#Log warning since we can't properly deregister\nlogger.warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)\npass\n"
        },
        {
            "type": "FunctionDecl",
            "name": "_register_webhook",
            "range": [
                521,
                734
            ],
            "children": [
                {
                    "type": "AsyncKeyword",
                    "name": "async",
                    "range": [
                        521,
                        525
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "DefKeyword",
                    "name": "def",
                    "range": [
                        522,
                        525
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "FunctionName",
                    "name": "_register_webhook",
                    "range": [
                        523,
                        524
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "ParameterList",
                    "name": "parameters",
                    "range": [
                        524,
                        562
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                526,
                                527
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                529,
                                531
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "webhook_type",
                            "range": [
                                534,
                                536
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "resource",
                            "range": [
                                539,
                                541
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "events",
                            "range": [
                                544,
                                549
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "ingress_url",
                            "range": [
                                552,
                                554
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "secret",
                            "range": [
                                557,
                                559
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "tuple[str, dict]",
                    "range": [
                        563,
                        571
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "FunctionBody",
                    "name": "body",
                    "range": [
                        572,
                        734
                    ],
                    "children": [
                        {
                            "type": "Docstring",
                            "name": "docstring",
                            "range": [
                                573,
                                575
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "if",
                            "range": [
                                578,
                                593
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "not isinstance(credentials, APIKeyCredentials)",
                                    "range": [
                                        579,
                                        585
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "RaiseStatement",
                                    "name": "raise ValueError",
                                    "range": [
                                        588,
                                        592
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "VariableDecl",
                            "name": "headers",
                            "range": [
                                595,
                                616
                            ],
                            "children": [
                                {
                                    "type": "Dictionary",
                                    "name": "headers",
                                    "range": [
                                        597,
                                        615
                                    ],
                                    "children": [
                                        {
                                            "type": "KeyValuePair",
                                            "name": "api-key",
                                            "range": [
                                                599,
                                                608
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeyValuePair",
                                            "name": "Content-Type",
                                            "range": [
                                                610,
                                                613
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Comment",
                            "name": "comment",
                            "range": [
                                618,
                                632
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "VariableDecl",
                            "name": "payload",
                            "range": [
                                633,
                                640
                            ],
                            "children": [
                                {
                                    "type": "Dictionary",
                                    "name": "payload",
                                    "range": [
                                        635,
                                        639
                                    ],
                                    "children": [
                                        {
                                            "type": "KeyValuePair",
                                            "name": "endPoint",
                                            "range": [
                                                636,
                                                638
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "CallExpression",
                            "name": "requests.post",
                            "range": [
                                642,
                                661
                            ],
                            "children": [
                                {
                                    "type": "Arguments",
                                    "name": "arguments",
                                    "range": [
                                        647,
                                        660
                                    ],
                                    "children": [
                                        {
                                            "type": "StringLiteral",
                                            "name": "f\"{self.BASE_URL}/customer/webhookSubscribe\"",
                                            "range": [
                                                649,
                                                651
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeywordArgument",
                                            "name": "headers=headers",
                                            "range": [
                                                652,
                                                654
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeywordArgument",
                                            "name": "json=payload",
                                            "range": [
                                                656,
                                                658
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "if",
                            "range": [
                                663,
                                691
                            ],
                            "children": [
                                {
                                    "type": "Condition",
                                    "name": "not response.ok",
                                    "range": [
                                        664,
                                        668
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "error",
                                    "range": [
                                        670,
                                        684
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "RaiseStatement",
                                    "name": "raise RuntimeError",
                                    "range": [
                                        685,
                                        690
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "VariableDecl",
                            "name": "webhook_config",
                            "range": [
                                693,
                                728
                            ],
                            "children": [
                                {
                                    "type": "Dictionary",
                                    "name": "webhook_config",
                                    "range": [
                                        695,
                                        727
                                    ],
                                    "children": [
                                        {
                                            "type": "KeyValuePair",
                                            "name": "endpoint",
                                            "range": [
                                                697,
                                                699
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeyValuePair",
                                            "name": "provider",
                                            "range": [
                                                702,
                                                704
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeyValuePair",
                                            "name": "events",
                                            "range": [
                                                709,
                                                713
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "KeyValuePair",
                                            "name": "type",
                                            "range": [
                                                722,
                                                724
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ReturnStatement",
                            "name": "return",
                            "range": [
                                730,
                                734
                            ],
                            "children": [
                                {
                                    "type": "StringLiteral",
                                    "name": "\"\"",
                                    "range": [
                                        731,
                                        732
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "webhook_config",
                                    "range": [
                                        733,
                                        734
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "ClassMethod",
            "name": "validate_payload",
            "range": [
                735,
                902
            ],
            "children": [
                {
                    "type": "FunctionDecl",
                    "name": "validate_payload",
                    "range": [
                        735,
                        902
                    ],
                    "children": [
                        {
                            "type": "Async",
                            "name": "async",
                            "range": [
                                738,
                                739
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameters",
                            "name": "parameters",
                            "range": [
                                741,
                                755
                            ],
                            "children": [
                                {
                                    "type": "Parameter",
                                    "name": "cls",
                                    "range": [
                                        743,
                                        743
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Parameter",
                                    "name": "webhook",
                                    "range": [
                                        745,
                                        749
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Parameter",
                                    "name": "request",
                                    "range": [
                                        751,
                                        753
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ReturnType",
                            "name": "return_type",
                            "range": [
                                756,
                                763
                            ],
                            "children": [
                                {
                                    "type": "Type",
                                    "name": "tuple",
                                    "range": [
                                        758,
                                        758
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Type",
                                    "name": "dict",
                                    "range": [
                                        760,
                                        760
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Type",
                                    "name": "str",
                                    "range": [
                                        762,
                                        762
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Docstring",
                            "name": "docstring",
                            "range": [
                                766,
                                768
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "payload_assignment",
                            "range": [
                                771,
                                779
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "payload",
                                    "range": [
                                        771,
                                        771
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Await",
                                    "name": "await",
                                    "range": [
                                        773,
                                        773
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "json",
                                    "range": [
                                        774,
                                        778
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "request",
                                            "range": [
                                                774,
                                                774
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "List",
                            "name": "required_fields",
                            "range": [
                                790,
                                800
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "orderId",
                                    "range": [
                                        793,
                                        793
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Literal",
                                    "name": "status",
                                    "range": [
                                        795,
                                        795
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Literal",
                                    "name": "trackingNumber",
                                    "range": [
                                        797,
                                        797
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Literal",
                                    "name": "carrierCode",
                                    "range": [
                                        799,
                                        799
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "ListComprehension",
                            "name": "missing_fields",
                            "range": [
                                802,
                                815
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "field",
                                    "range": [
                                        805,
                                        805
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "ForStatement",
                                    "name": "for",
                                    "range": [
                                        806,
                                        806
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "In",
                                    "name": "in",
                                    "range": [
                                        808,
                                        808
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if",
                                    "range": [
                                        810,
                                        810
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "BinaryExpression",
                                    "name": "not_in",
                                    "range": [
                                        812,
                                        813
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "if_missing_fields",
                            "range": [
                                818,
                                828
                            ],
                            "children": [
                                {
                                    "type": "Raise",
                                    "name": "raise",
                                    "range": [
                                        822,
                                        822
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "ValueError",
                                    "range": [
                                        823,
                                        823
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Literal",
                                    "name": "f_string",
                                    "range": [
                                        825,
                                        826
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Dict",
                            "name": "normalized_payload",
                            "range": [
                                835,
                                871
                            ],
                            "children": [
                                {
                                    "type": "KeyValue",
                                    "name": "orderId",
                                    "range": [
                                        839,
                                        845
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "orderId",
                                            "range": [
                                                839,
                                                839
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "payload",
                                            "range": [
                                                841,
                                                841
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "KeyValue",
                                    "name": "status",
                                    "range": [
                                        847,
                                        853
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "status",
                                            "range": [
                                                847,
                                                847
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "payload",
                                            "range": [
                                                849,
                                                849
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "KeyValue",
                                    "name": "trackingNumber",
                                    "range": [
                                        855,
                                        861
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "trackingNumber",
                                            "range": [
                                                855,
                                                855
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "payload",
                                            "range": [
                                                857,
                                                857
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "KeyValue",
                                    "name": "carrierCode",
                                    "range": [
                                        863,
                                        869
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "carrierCode",
                                            "range": [
                                                863,
                                                863
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "payload",
                                            "range": [
                                                865,
                                                865
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "event_type_assignment",
                            "range": [
                                892,
                                896
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "event_type",
                                    "range": [
                                        892,
                                        892
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Literal",
                                    "name": "f_string",
                                    "range": [
                                        894,
                                        895
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Return",
                            "name": "return",
                            "range": [
                                898,
                                902
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "normalized_payload",
                                    "range": [
                                        899,
                                        899
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "event_type",
                                    "range": [
                                        901,
                                        901
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "_deregister_webhook",
            "range": [
                903,
                952
            ],
            "children": [
                {
                    "type": "Keyword",
                    "name": "async",
                    "range": [
                        903,
                        903
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Keyword",
                    "name": "def",
                    "range": [
                        904,
                        904
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Identifier",
                    "name": "_deregister_webhook",
                    "range": [
                        905,
                        905
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        908,
                        908
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Parameter",
                    "name": "webhook",
                    "range": [
                        910,
                        910
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": ":",
                            "range": [
                                911,
                                911
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "integrations",
                                    "range": [
                                        912,
                                        912
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "Webhook",
                                    "range": [
                                        914,
                                        914
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "Parameter",
                    "name": "credentials",
                    "range": [
                        916,
                        916
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": ":",
                            "range": [
                                917,
                                917
                            ],
                            "children": [
                                {
                                    "type": "Identifier",
                                    "name": "Credentials",
                                    "range": [
                                        918,
                                        918
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "->",
                    "range": [
                        921,
                        922
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "None",
                            "range": [
                                923,
                                923
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "BlockStatement",
                    "name": "",
                    "range": [
                        925,
                        952
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"\"\" \\n         Note: Slant3D API currently doesn't provide a deregistration endpoint. \\n         This would need to be handled through support. \\n         \"\"\"",
                            "range": [
                                926,
                                928
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Comment",
                            "name": "# Log warning since we can't properly deregister",
                            "range": [
                                930,
                                940
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "ExpressionStatement",
                            "name": "logger.warning(f\"Warning: Manual deregistration required for webhook {webhook.id}\")",
                            "range": [
                                941,
                                949
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "logger.warning",
                                    "range": [
                                        941,
                                        949
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "logger",
                                            "range": [
                                                941,
                                                941
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "warning",
                                            "range": [
                                                943,
                                                943
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "TemplateLiteral",
                                            "name": "f\"Warning: Manual deregistration required for webhook {webhook.id}\"",
                                            "range": [
                                                946,
                                                947
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Keyword",
                            "name": "pass",
                            "range": [
                                951,
                                951
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        }
    ],
    "content": "class Slant3DWebhooksManager(BaseWebhooksManager):\n\"\"\"Manager for Slant3D webhooks\"\"\"\n\nPROVIDER_NAME=ProviderName.SLANT3D\nBASE_URL=\"https://www.slant3dapi.com/api\"\n\nasync def _register_webhook(\nself,\ncredentials:Credentials,\nwebhook_type:str,\nresource:str,\nevents:list[str],\ningress_url:str,\nsecret:str,\n)->tuple[str,dict]:\n\"\"\"Register a new webhook with Slant3D\"\"\"\n\nif not isinstance(credentials,APIKeyCredentials):\nraise ValueError(\"API key is required to register a webhook\")\n\nheaders={\n\"api-key\":credentials.api_key.get_secret_value(),\n\"Content-Type\":\"application/json\",\n}\n\n#Slant3D 's API doesn' t use events list,just register for all order updates\npayload={\"endPoint\":ingress_url}\n\nresponse=requests.post(\nf \"{self.BASE_URL}/customer/webhookSubscribe\",headers=headers,json=payload\n)\n\nif not response.ok:\nerror=response.json().get(\"error\",\"Unknown error\")\nraise RuntimeError(f \"Failed to register webhook: {error}\")\n\nwebhook_config={\n\"endpoint\":ingress_url,\n\"provider\":self.PROVIDER_NAME,\n\"events\":[\"order.shipped\"],#Currently the only supported event\n\"type\":webhook_type,\n}\n\nreturn\"\",webhook_config\n\n@classmethod\nasync def validate_payload(\ncls,webhook:integrations.Webhook,request:Request\n)->tuple[dict,str]:\n\"\"\"Validate incoming webhook payload from Slant3D\"\"\"\n\npayload=await request.json()\n\n#Validate required fields from Slant3D API spec\nrequired_fields=[\"orderId\",\"status\",\"trackingNumber\",\"carrierCode\"]\nmissing_fields=[field for field in required_fields if field not in payload]\n\nif missing_fields:\nraise ValueError(f \"Missing required fields: {', '.join(missing_fields)}\")\n\n#Normalize payload structure\nnormalized_payload={\n\"orderId\":payload[\"orderId\"],\n\"status\":payload[\"status\"],\n\"trackingNumber\":payload[\"trackingNumber\"],\n\"carrierCode\":payload[\"carrierCode\"],\n}\n\n#Currently Slant3D only sends shipping notifications\n#Convert status to lowercase for event format compatibility\nevent_type=f \"order.{payload['status'].lower()}\"\n\nreturn normalized_payload,event_type\n\nasync def _deregister_webhook(\nself,webhook:integrations.Webhook,credentials:Credentials\n)->None:\n\"\"\" \\n         Note: Slant3D API currently doesn't provide a deregistration endpoint. \\n         This would need to be handled through support. \\n         \"\"\"\n#Log warning since we can't properly deregister\nlogger.warning(\nf \"Warning: Manual deregistration required for webhook {webhook.id}\"\n)\npass\n"
}