{
    "type": "Program",
    "name": "Global",
    "range": [
        76,
        1341
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "ExaFindSimilarBlock",
            "range": [
                76,
                82
            ],
            "children": [
                {
                    "type": "ClassBody",
                    "name": "",
                    "range": [
                        76,
                        82
                    ],
                    "children": [],
                    "content": "\nclass ExaFindSimilarBlock(Block):"
                }
            ],
            "content": "\nclass ExaFindSimilarBlock(Block):"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                83,
                89
            ],
            "children": [
                {
                    "type": "ClassBody",
                    "name": "",
                    "range": [
                        83,
                        89
                    ],
                    "children": [
                        {
                            "type": "VariableDecl",
                            "name": "credentials",
                            "range": [
                                90,
                                97
                            ],
                            "children": [],
                            "content": "\ncredentials:ExaCredentialsInput=ExaCredentialsField()"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "url",
                            "range": [
                                98,
                                110
                            ],
                            "children": [],
                            "content": "\nurl:str=SchemaField(\ndescription=\"The url for which you would like to find similar links\"\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "number_of_results",
                            "range": [
                                111,
                                134
                            ],
                            "children": [],
                            "content": "\nnumber_of_results:int=SchemaField(\ndescription=\"Number of results to return\",\ndefault=10,\nadvanced=True,\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "include_domains",
                            "range": [
                                135,
                                162
                            ],
                            "children": [],
                            "content": "\ninclude_domains:List[str]=SchemaField(\ndescription=\"Domains to include in search\",\ndefault=[],\nadvanced=True,\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "exclude_domains",
                            "range": [
                                163,
                                190
                            ],
                            "children": [],
                            "content": "\nexclude_domains:List[str]=SchemaField(\ndescription=\"Domains to exclude from search\",\ndefault=[],\nadvanced=True,\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "start_crawl_date",
                            "range": [
                                191,
                                204
                            ],
                            "children": [],
                            "content": "\nstart_crawl_date:datetime=SchemaField(\ndescription=\"Start date for crawled content\",\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "end_crawl_date",
                            "range": [
                                205,
                                218
                            ],
                            "children": [],
                            "content": "\nend_crawl_date:datetime=SchemaField(\ndescription=\"End date for crawled content\",\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "start_published_date",
                            "range": [
                                219,
                                232
                            ],
                            "children": [],
                            "content": "\nstart_published_date:datetime=SchemaField(\ndescription=\"Start date for published content\",\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "end_published_date",
                            "range": [
                                233,
                                246
                            ],
                            "children": [],
                            "content": "\nend_published_date:datetime=SchemaField(\ndescription=\"End date for published content\",\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "include_text",
                            "range": [
                                247,
                                274
                            ],
                            "children": [],
                            "content": "\ninclude_text:List[str]=SchemaField(\ndescription=\"Text patterns to include (max 1 string, up to 5 words)\",\ndefault=[],\nadvanced=True,\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "exclude_text",
                            "range": [
                                275,
                                302
                            ],
                            "children": [],
                            "content": "\nexclude_text:List[str]=SchemaField(\ndescription=\"Text patterns to exclude (max 1 string, up to 5 words)\",\ndefault=[],\nadvanced=True,\n)"
                        },
                        {
                            "type": "VariableDecl",
                            "name": "contents",
                            "range": [
                                303,
                                328
                            ],
                            "children": [],
                            "content": "\ncontents:ContentSettings=SchemaField(\ndescription=\"Content retrieval settings\",\ndefault=ContentSettings(),\nadvanced=True,\n)"
                        }
                    ],
                    "content": "\nclass Input(BlockSchema):"
                }
            ],
            "content": "\nclass Input(BlockSchema):"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                330,
                336
            ],
            "children": [
                {
                    "type": "ClassBody",
                    "name": "",
                    "range": [
                        330,
                        336
                    ],
                    "children": [
                        {
                            "type": "VariableDecl",
                            "name": "results",
                            "range": [
                                337,
                                359
                            ],
                            "children": [],
                            "content": "\nresults:List[Any]=SchemaField(\ndescription=\"List of similar documents with title, URL, published date, author, and score\",\ndefault=[],\n)"
                        }
                    ],
                    "content": "\nclass Output(BlockSchema):"
                }
            ],
            "content": "\nclass Output(BlockSchema):"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                361,
                409
            ],
            "children": [
                {
                    "type": "FunctionBody",
                    "name": "",
                    "range": [
                        361,
                        409
                    ],
                    "children": [],
                    "content": "\ndef __init__(self):\nsuper().__init__(\nid=\"5e7315d1-af61-4a0c-9350-7c868fa7438a\",\ndescription=\"Finds similar links using Exa's findSimilar API\",\ncategories={BlockCategory.SEARCH},\ninput_schema=ExaFindSimilarBlock.Input,\noutput_schema=ExaFindSimilarBlock.Output,\n)"
                }
            ],
            "content": "\ndef __init__(self):\nsuper().__init__(\nid=\"5e7315d1-af61-4a0c-9350-7c868fa7438a\",\ndescription=\"Finds similar links using Exa's findSimilar API\",\ncategories={BlockCategory.SEARCH},\ninput_schema=ExaFindSimilarBlock.Input,\noutput_schema=ExaFindSimilarBlock.Output,\n)"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                411,
                713
            ],
            "children": [
                {
                    "type": "FunctionBody",
                    "name": "",
                    "range": [
                        411,
                        713
                    ],
                    "children": [],
                    "content": "\ndef run(\nself,input_data:Input,*,credentials:ExaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://api.exa.ai/findSimilar\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n}\n\npayload={\n\"url\":input_data.url,\n\"numResults\":input_data.number_of_results,\n\"contents\":input_data.contents.dict(),\n}\n\noptional_field_mapping={\n\"include_domains\":\"includeDomains\",\n\"exclude_domains\":\"excludeDomains\",\n\"include_text\":\"includeText\",\n\"exclude_text\":\"excludeText\",\n}\n\n#Add optional fields if they have values\nfor input_field,api_field in optional_field_mapping.items():\nvalue=getattr(input_data,input_field)\nif value:#Only add non-empty values\npayload[api_field]=value\n\ndate_field_mapping={\n\"start_crawl_date\":\"startCrawlDate\",\n\"end_crawl_date\":\"endCrawlDate\",\n\"start_published_date\":\"startPublishedDate\",\n\"end_published_date\":\"endPublishedDate\",\n}\n\n#Add dates if they exist\nfor input_field,api_field in date_field_mapping.items():\nvalue=getattr(input_data,input_field,None)\nif value:\npayload[api_field]=value.strftime(\"%Y-%m-%dT%H:%M:%S.000Z\")\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]\n"
                }
            ],
            "content": "\ndef run(\nself,input_data:Input,*,credentials:ExaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://api.exa.ai/findSimilar\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n}\n\npayload={\n\"url\":input_data.url,\n\"numResults\":input_data.number_of_results,\n\"contents\":input_data.contents.dict(),\n}\n\noptional_field_mapping={\n\"include_domains\":\"includeDomains\",\n\"exclude_domains\":\"excludeDomains\",\n\"include_text\":\"includeText\",\n\"exclude_text\":\"excludeText\",\n}\n\n#Add optional fields if they have values\nfor input_field,api_field in optional_field_mapping.items():\nvalue=getattr(input_data,input_field)\nif value:#Only add non-empty values\npayload[api_field]=value\n\ndate_field_mapping={\n\"start_crawl_date\":\"startCrawlDate\",\n\"end_crawl_date\":\"endCrawlDate\",\n\"start_published_date\":\"startPublishedDate\",\n\"end_published_date\":\"endPublishedDate\",\n}\n\n#Add dates if they exist\nfor input_field,api_field in date_field_mapping.items():\nvalue=getattr(input_data,input_field,None)\nif value:\npayload[api_field]=value.strftime(\"%Y-%m-%dT%H:%M:%S.000Z\")\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                714,
                959
            ],
            "children": [
                {
                    "type": "PropertyDecl",
                    "name": "credentials",
                    "range": [
                        721,
                        727
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "ExaCredentialsInput",
                            "range": [
                                723,
                                723
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                724,
                                724
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "ExaCredentialsField",
                                    "range": [
                                        725,
                                        727
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "url",
                    "range": [
                        729,
                        740
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "str",
                            "range": [
                                731,
                                731
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                732,
                                732
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        733,
                                        740
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                736,
                                                738
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "number_of_results",
                    "range": [
                        742,
                        764
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "int",
                            "range": [
                                744,
                                744
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                745,
                                745
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        746,
                                        764
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                749,
                                                751
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                754,
                                                756
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                759,
                                                761
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "include_domains",
                    "range": [
                        766,
                        792
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[str]",
                            "range": [
                                768,
                                771
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                772,
                                772
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        773,
                                        792
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                776,
                                                778
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                781,
                                                785
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                787,
                                                789
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "exclude_domains",
                    "range": [
                        794,
                        820
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[str]",
                            "range": [
                                796,
                                799
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                800,
                                800
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        801,
                                        820
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                804,
                                                806
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                809,
                                                813
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                815,
                                                817
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "start_crawl_date",
                    "range": [
                        822,
                        834
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "datetime",
                            "range": [
                                824,
                                824
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                825,
                                825
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        826,
                                        834
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                829,
                                                831
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "end_crawl_date",
                    "range": [
                        836,
                        848
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "datetime",
                            "range": [
                                838,
                                838
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                839,
                                839
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        840,
                                        848
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                843,
                                                845
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "start_published_date",
                    "range": [
                        850,
                        862
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "datetime",
                            "range": [
                                852,
                                852
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                853,
                                853
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        854,
                                        862
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                857,
                                                859
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "end_published_date",
                    "range": [
                        864,
                        876
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "datetime",
                            "range": [
                                866,
                                866
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                867,
                                867
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        868,
                                        876
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                871,
                                                873
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "include_text",
                    "range": [
                        878,
                        904
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[str]",
                            "range": [
                                880,
                                883
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                884,
                                884
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        885,
                                        904
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                888,
                                                890
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                893,
                                                897
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                899,
                                                901
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "exclude_text",
                    "range": [
                        906,
                        932
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[str]",
                            "range": [
                                908,
                                911
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                912,
                                912
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        913,
                                        932
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                916,
                                                918
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                921,
                                                925
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                927,
                                                929
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "contents",
                    "range": [
                        934,
                        958
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "ContentSettings",
                            "range": [
                                936,
                                936
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                937,
                                937
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        938,
                                        958
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                941,
                                                943
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                946,
                                                951
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "ContentSettings",
                                                    "range": [
                                                        948,
                                                        951
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "advanced",
                                            "range": [
                                                953,
                                                955
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                960,
                989
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "BlockSchema",
                    "range": [
                        962,
                        964
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "FieldDecl",
                    "name": "results",
                    "range": [
                        967,
                        973
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "List[Any]",
                            "range": [
                                969,
                                972
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                973,
                                973
                            ],
                            "children": [
                                {
                                    "type": "SchemaField",
                                    "name": "SchemaField",
                                    "range": [
                                        974,
                                        988
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                977,
                                                979
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                982,
                                                984
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                990,
                1038
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        993,
                        993
                    ],
                    "content": ""
                },
                {
                    "type": "CallExpression",
                    "name": "super",
                    "range": [
                        997,
                        999
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "AssignmentExpression",
                    "name": "id",
                    "range": [
                        1004,
                        1006
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"5e7315d1-af61-4a0c-9350-7c868fa7438a\"",
                            "range": [
                                1006,
                                1006
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "AssignmentExpression",
                    "name": "description",
                    "range": [
                        1009,
                        1011
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"Finds similar links using Exa's findSimilar API\"",
                            "range": [
                                1011,
                                1011
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "AssignmentExpression",
                    "name": "categories",
                    "range": [
                        1014,
                        1020
                    ],
                    "children": [
                        {
                            "type": "ObjectExpression",
                            "name": "",
                            "range": [
                                1016,
                                1020
                            ],
                            "children": [
                                {
                                    "type": "MemberExpression",
                                    "name": "BlockCategory.SEARCH",
                                    "range": [
                                        1017,
                                        1019
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "AssignmentExpression",
                    "name": "input_schema",
                    "range": [
                        1023,
                        1028
                    ],
                    "children": [
                        {
                            "type": "MemberExpression",
                            "name": "ExaFindSimilarBlock.Input",
                            "range": [
                                1025,
                                1027
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "AssignmentExpression",
                    "name": "output_schema",
                    "range": [
                        1030,
                        1035
                    ],
                    "children": [
                        {
                            "type": "MemberExpression",
                            "name": "ExaFindSimilarBlock.Output",
                            "range": [
                                1032,
                                1034
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                1039,
                1341
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "parameters",
                    "range": [
                        1041,
                        1059
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                1043,
                                1043
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "input_data",
                            "range": [
                                1045,
                                1047
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                1051,
                                1053
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "kwargs",
                            "range": [
                                1057,
                                1057
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        1060,
                        1062
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Block",
                    "name": "body",
                    "range": [
                        1064,
                        1341
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "url",
                            "range": [
                                1065,
                                1067
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "headers",
                            "range": [
                                1069,
                                1089
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "payload",
                            "range": [
                                1092,
                                1121
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "optional_field_mapping",
                            "range": [
                                1124,
                                1148
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "ForStatement",
                            "name": "for input_field, api_field in optional_field_mapping.items()",
                            "range": [
                                1160,
                                1198
                            ],
                            "children": [
                                {
                                    "type": "Assignment",
                                    "name": "value",
                                    "range": [
                                        1172,
                                        1179
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if value",
                                    "range": [
                                        1181,
                                        1198
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "payload[api_field]",
                                            "range": [
                                                1192,
                                                1197
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "date_field_mapping",
                            "range": [
                                1200,
                                1224
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "ForStatement",
                            "name": "for input_field, api_field in date_field_mapping.items()",
                            "range": [
                                1234,
                                1272
                            ],
                            "children": [
                                {
                                    "type": "Assignment",
                                    "name": "value",
                                    "range": [
                                        1246,
                                        1255
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if value",
                                    "range": [
                                        1257,
                                        1272
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "payload[api_field]",
                                            "range": [
                                                1261,
                                                1271
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "TryStatement",
                            "name": "try",
                            "range": [
                                1274,
                                1341
                            ],
                            "children": [
                                {
                                    "type": "Block",
                                    "name": "tryBlock",
                                    "range": [
                                        1276,
                                        1321
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "response",
                                            "range": [
                                                1277,
                                                1292
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "CallExpression",
                                            "name": "response.raise_for_status",
                                            "range": [
                                                1294,
                                                1298
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "Assignment",
                                            "name": "data",
                                            "range": [
                                                1300,
                                                1307
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield \"results\", data.get(\"results\", [])",
                                            "range": [
                                                1308,
                                                1320
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "CatchClause",
                                    "name": "except Exception as e",
                                    "range": [
                                        1321,
                                        1341
                                    ],
                                    "children": [
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield \"error\", str(e)",
                                            "range": [
                                                1327,
                                                1334
                                            ],
                                            "children": [],
                                            "content": ""
                                        },
                                        {
                                            "type": "YieldStatement",
                                            "name": "yield \"results\", []",
                                            "range": [
                                                1335,
                                                1340
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        }
    ],
    "content": "\nclass ExaFindSimilarBlock(Block):\nclass Input(BlockSchema):\ncredentials:ExaCredentialsInput=ExaCredentialsField()\nurl:str=SchemaField(\ndescription=\"The url for which you would like to find similar links\"\n)\nnumber_of_results:int=SchemaField(\ndescription=\"Number of results to return\",\ndefault=10,\nadvanced=True,\n)\ninclude_domains:List[str]=SchemaField(\ndescription=\"Domains to include in search\",\ndefault=[],\nadvanced=True,\n)\nexclude_domains:List[str]=SchemaField(\ndescription=\"Domains to exclude from search\",\ndefault=[],\nadvanced=True,\n)\nstart_crawl_date:datetime=SchemaField(\ndescription=\"Start date for crawled content\",\n)\nend_crawl_date:datetime=SchemaField(\ndescription=\"End date for crawled content\",\n)\nstart_published_date:datetime=SchemaField(\ndescription=\"Start date for published content\",\n)\nend_published_date:datetime=SchemaField(\ndescription=\"End date for published content\",\n)\ninclude_text:List[str]=SchemaField(\ndescription=\"Text patterns to include (max 1 string, up to 5 words)\",\ndefault=[],\nadvanced=True,\n)\nexclude_text:List[str]=SchemaField(\ndescription=\"Text patterns to exclude (max 1 string, up to 5 words)\",\ndefault=[],\nadvanced=True,\n)\ncontents:ContentSettings=SchemaField(\ndescription=\"Content retrieval settings\",\ndefault=ContentSettings(),\nadvanced=True,\n)\n\nclass Output(BlockSchema):\nresults:List[Any]=SchemaField(\ndescription=\"List of similar documents with title, URL, published date, author, and score\",\ndefault=[],\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"5e7315d1-af61-4a0c-9350-7c868fa7438a\",\ndescription=\"Finds similar links using Exa's findSimilar API\",\ncategories={BlockCategory.SEARCH},\ninput_schema=ExaFindSimilarBlock.Input,\noutput_schema=ExaFindSimilarBlock.Output,\n)\n\ndef run(\nself,input_data:Input,*,credentials:ExaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://api.exa.ai/findSimilar\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"x-api-key\":credentials.api_key.get_secret_value(),\n}\n\npayload={\n\"url\":input_data.url,\n\"numResults\":input_data.number_of_results,\n\"contents\":input_data.contents.dict(),\n}\n\noptional_field_mapping={\n\"include_domains\":\"includeDomains\",\n\"exclude_domains\":\"excludeDomains\",\n\"include_text\":\"includeText\",\n\"exclude_text\":\"excludeText\",\n}\n\n#Add optional fields if they have values\nfor input_field,api_field in optional_field_mapping.items():\nvalue=getattr(input_data,input_field)\nif value:#Only add non-empty values\npayload[api_field]=value\n\ndate_field_mapping={\n\"start_crawl_date\":\"startCrawlDate\",\n\"end_crawl_date\":\"endCrawlDate\",\n\"start_published_date\":\"startPublishedDate\",\n\"end_published_date\":\"endPublishedDate\",\n}\n\n#Add dates if they exist\nfor input_field,api_field in date_field_mapping.items():\nvalue=getattr(input_data,input_field,None)\nif value:\npayload[api_field]=value.strftime(\"%Y-%m-%dT%H:%M:%S.000Z\")\n\ntry:\nresponse=requests.post(url,headers=headers,json=payload)\nresponse.raise_for_status()\ndata=response.json()\nyield \"results\",data.get(\"results\",[])\nexcept Exception as e:\nyield \"error\",str(e)\nyield \"results\",[]\n"
}