{
    "type": "Program",
    "name": "Global",
    "range": [
        57,
        743
    ],
    "children": [
        {
            "type": "ClassDecl",
            "name": "JinaChunkingBlock",
            "range": [
                57,
                63
            ],
            "children": [],
            "content": "class JinaChunkingBlock(Block):\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                64,
                70
            ],
            "children": [
                {
                    "type": "VariableDecl",
                    "name": "texts",
                    "range": [
                        71,
                        81
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                73,
                                73
                            ],
                            "children": [],
                            "content": "list"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                74,
                                74
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        75,
                                        80
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                77,
                                                79
                                            ],
                                            "children": [],
                                            "content": "description=\"List of texts to chunk\""
                                        }
                                    ],
                                    "content": "SchemaField(description=\"List of texts to chunk\")"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "texts:list=SchemaField(description=\"List of texts to chunk\")\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "credentials",
                    "range": [
                        83,
                        90
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "JinaCredentialsInput",
                            "range": [
                                85,
                                85
                            ],
                            "children": [],
                            "content": "JinaCredentialsInput"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                86,
                                86
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "JinaCredentialsField",
                                    "range": [
                                        87,
                                        89
                                    ],
                                    "children": [],
                                    "content": "JinaCredentialsField()"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "credentials:JinaCredentialsInput=JinaCredentialsField()\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "max_chunk_length",
                    "range": [
                        91,
                        107
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "int",
                            "range": [
                                93,
                                93
                            ],
                            "children": [],
                            "content": "int"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                94,
                                94
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        95,
                                        106
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                98,
                                                100
                                            ],
                                            "children": [],
                                            "content": "description=\"Maximum length of each chunk\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                102,
                                                104
                                            ],
                                            "children": [],
                                            "content": "default=1000"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Maximum length of each chunk\",default=1000\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "max_chunk_length:int=SchemaField(\ndescription=\"Maximum length of each chunk\",default=1000\n)\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "return_tokens",
                    "range": [
                        108,
                        124
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "bool",
                            "range": [
                                110,
                                110
                            ],
                            "children": [],
                            "content": "bool"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                111,
                                111
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        112,
                                        123
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                115,
                                                117
                                            ],
                                            "children": [],
                                            "content": "description=\"Whether to return token information\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                119,
                                                121
                                            ],
                                            "children": [],
                                            "content": "default=False"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"Whether to return token information\",default=False\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "return_tokens:bool=SchemaField(\ndescription=\"Whether to return token information\",default=False\n)\n"
                }
            ],
            "content": "class Input(BlockSchema):\n"
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                126,
                132
            ],
            "children": [
                {
                    "type": "VariableDecl",
                    "name": "chunks",
                    "range": [
                        133,
                        143
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                135,
                                135
                            ],
                            "children": [],
                            "content": "list"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                136,
                                136
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        137,
                                        142
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                139,
                                                141
                                            ],
                                            "children": [],
                                            "content": "description=\"List of chunked texts\""
                                        }
                                    ],
                                    "content": "SchemaField(description=\"List of chunked texts\")"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "chunks:list=SchemaField(description=\"List of chunked texts\")\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "tokens",
                    "range": [
                        144,
                        160
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                146,
                                146
                            ],
                            "children": [],
                            "content": "list"
                        },
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                147,
                                147
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        148,
                                        159
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                151,
                                                153
                                            ],
                                            "children": [],
                                            "content": "description=\"List of token information for each chunk\""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "optional",
                                            "range": [
                                                155,
                                                157
                                            ],
                                            "children": [],
                                            "content": "optional=True"
                                        }
                                    ],
                                    "content": "SchemaField(\ndescription=\"List of token information for each chunk\",optional=True\n)"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "tokens:list=SchemaField(\ndescription=\"List of token information for each chunk\",optional=True\n)\n"
                }
            ],
            "content": "class Output(BlockSchema):\n"
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                162,
                214
            ],
            "children": [
                {
                    "type": "CallExpression",
                    "name": "super",
                    "range": [
                        169,
                        213
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "id",
                            "range": [
                                176,
                                178
                            ],
                            "children": [],
                            "content": "id=\"806fb15e-830f-4796-8692-557d300ff43c\""
                        },
                        {
                            "type": "Argument",
                            "name": "description",
                            "range": [
                                181,
                                183
                            ],
                            "children": [],
                            "content": "description=\"Chunks texts using Jina AI's segmentation service\""
                        },
                        {
                            "type": "Argument",
                            "name": "categories",
                            "range": [
                                186,
                                196
                            ],
                            "children": [],
                            "content": "categories={BlockCategory.AI,BlockCategory.TEXT}"
                        },
                        {
                            "type": "Argument",
                            "name": "input_schema",
                            "range": [
                                199,
                                204
                            ],
                            "children": [],
                            "content": "input_schema=JinaChunkingBlock.Input,"
                        },
                        {
                            "type": "Argument",
                            "name": "output_schema",
                            "range": [
                                206,
                                211
                            ],
                            "children": [],
                            "content": "output_schema=JinaChunkingBlock.Output,"
                        }
                    ],
                    "content": "super().__init__(\nid=\"806fb15e-830f-4796-8692-557d300ff43c\",\ndescription=\"Chunks texts using Jina AI's segmentation service\",\ncategories={BlockCategory.AI,BlockCategory.TEXT},\ninput_schema=JinaChunkingBlock.Input,\noutput_schema=JinaChunkingBlock.Output,\n)"
                }
            ],
            "content": "def __init__(self):\nsuper().__init__(\nid=\"806fb15e-830f-4796-8692-557d300ff43c\",\ndescription=\"Chunks texts using Jina AI's segmentation service\",\ncategories={BlockCategory.AI,BlockCategory.TEXT},\ninput_schema=JinaChunkingBlock.Input,\noutput_schema=JinaChunkingBlock.Output,\n)\n"
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                216,
                403
            ],
            "children": [
                {
                    "type": "VariableDecl",
                    "name": "url",
                    "range": [
                        242,
                        245
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                243,
                                243
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"https://segment.jina.ai/\"",
                                    "range": [
                                        244,
                                        244
                                    ],
                                    "children": [],
                                    "content": "\"https://segment.jina.ai/\""
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "url=\"https://segment.jina.ai/\"\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "headers",
                    "range": [
                        246,
                        262
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                247,
                                247
                            ],
                            "children": [
                                {
                                    "type": "ObjectLiteral",
                                    "name": "",
                                    "range": [
                                        248,
                                        261
                                    ],
                                    "children": [
                                        {
                                            "type": "Property",
                                            "name": "\"Content-Type\"",
                                            "range": [
                                                250,
                                                252
                                            ],
                                            "children": [],
                                            "content": "\"Content-Type\":\"application/json\""
                                        },
                                        {
                                            "type": "Property",
                                            "name": "\"Authorization\"",
                                            "range": [
                                                255,
                                                259
                                            ],
                                            "children": [],
                                            "content": "\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\","
                                        }
                                    ],
                                    "content": "{\n\"Content-Type\":\"application/json\",\n\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\",\n}"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "headers={\n\"Content-Type\":\"application/json\",\n\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\",\n}\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "all_chunks",
                    "range": [
                        264,
                        268
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                265,
                                265
                            ],
                            "children": [
                                {
                                    "type": "ArrayLiteral",
                                    "name": "",
                                    "range": [
                                        266,
                                        267
                                    ],
                                    "children": [],
                                    "content": "[]"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "all_chunks=[]\n"
                },
                {
                    "type": "VariableDecl",
                    "name": "all_tokens",
                    "range": [
                        269,
                        273
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "=",
                            "range": [
                                270,
                                270
                            ],
                            "children": [
                                {
                                    "type": "ArrayLiteral",
                                    "name": "",
                                    "range": [
                                        271,
                                        272
                                    ],
                                    "children": [],
                                    "content": "[]"
                                }
                            ],
                            "content": "="
                        }
                    ],
                    "content": "all_tokens=[]\n"
                },
                {
                    "type": "ForStatement",
                    "name": "",
                    "range": [
                        275,
                        385
                    ],
                    "children": [
                        {
                            "type": "VariableDecl",
                            "name": "text",
                            "range": [
                                276,
                                276
                            ],
                            "children": [],
                            "content": "text"
                        },
                        {
                            "type": "MemberExpression",
                            "name": "input_data.texts",
                            "range": [
                                278,
                                280
                            ],
                            "children": [],
                            "content": "input_data.texts"
                        },
                        {
                            "type": "BlockStatement",
                            "name": "",
                            "range": [
                                282,
                                385
                            ],
                            "children": [
                                {
                                    "type": "VariableDecl",
                                    "name": "data",
                                    "range": [
                                        283,
                                        322
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "=",
                                            "range": [
                                                284,
                                                284
                                            ],
                                            "children": [
                                                {
                                                    "type": "ObjectLiteral",
                                                    "name": "",
                                                    "range": [
                                                        285,
                                                        321
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Property",
                                                            "name": "\"content\"",
                                                            "range": [
                                                                287,
                                                                289
                                                            ],
                                                            "children": [],
                                                            "content": "\"content\":text"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"return_tokens\"",
                                                            "range": [
                                                                292,
                                                                304
                                                            ],
                                                            "children": [],
                                                            "content": "\"return_tokens\":str(input_data.return_tokens).lower(),"
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"return_chunks\"",
                                                            "range": [
                                                                306,
                                                                308
                                                            ],
                                                            "children": [],
                                                            "content": "\"return_chunks\":\"true\""
                                                        },
                                                        {
                                                            "type": "Property",
                                                            "name": "\"max_chunk_length\"",
                                                            "range": [
                                                                311,
                                                                319
                                                            ],
                                                            "children": [],
                                                            "content": "\"max_chunk_length\":str(input_data.max_chunk_length),"
                                                        }
                                                    ],
                                                    "content": "{\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}"
                                                }
                                            ],
                                            "content": "="
                                        }
                                    ],
                                    "content": "data={\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "response",
                                    "range": [
                                        324,
                                        340
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "=",
                                            "range": [
                                                325,
                                                325
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "requests.post",
                                                    "range": [
                                                        326,
                                                        339
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "Argument",
                                                            "name": "url",
                                                            "range": [
                                                                330,
                                                                330
                                                            ],
                                                            "children": [],
                                                            "content": "url"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "headers",
                                                            "range": [
                                                                332,
                                                                334
                                                            ],
                                                            "children": [],
                                                            "content": "headers=headers"
                                                        },
                                                        {
                                                            "type": "Argument",
                                                            "name": "json",
                                                            "range": [
                                                                336,
                                                                338
                                                            ],
                                                            "children": [],
                                                            "content": "json=data"
                                                        }
                                                    ],
                                                    "content": "requests.post(url,headers=headers,json=data)"
                                                }
                                            ],
                                            "content": "="
                                        }
                                    ],
                                    "content": "response=requests.post(url,headers=headers,json=data)\n"
                                },
                                {
                                    "type": "VariableDecl",
                                    "name": "result",
                                    "range": [
                                        341,
                                        348
                                    ],
                                    "children": [
                                        {
                                            "type": "Assignment",
                                            "name": "=",
                                            "range": [
                                                342,
                                                342
                                            ],
                                            "children": [
                                                {
                                                    "type": "CallExpression",
                                                    "name": "response.json",
                                                    "range": [
                                                        343,
                                                        347
                                                    ],
                                                    "children": [],
                                                    "content": "response.json()"
                                                }
                                            ],
                                            "content": "="
                                        }
                                    ],
                                    "content": "result=response.json()\n"
                                },
                                {
                                    "type": "ExpressionStatement",
                                    "name": "",
                                    "range": [
                                        350,
                                        364
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "all_chunks.extend",
                                            "range": [
                                                351,
                                                363
                                            ],
                                            "children": [
                                                {
                                                    "type": "Argument",
                                                    "name": "result.get",
                                                    "range": [
                                                        354,
                                                        362
                                                    ],
                                                    "children": [],
                                                    "content": "result.get(\"chunks\",[])"
                                                }
                                            ],
                                            "content": ".extend(result.get(\"chunks\",[]))"
                                        }
                                    ],
                                    "content": "all_chunks.extend(result.get(\"chunks\",[]))\n"
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "",
                                    "range": [
                                        365,
                                        385
                                    ],
                                    "children": [
                                        {
                                            "type": "MemberExpression",
                                            "name": "input_data.return_tokens",
                                            "range": [
                                                366,
                                                368
                                            ],
                                            "children": [],
                                            "content": "input_data.return_tokens"
                                        },
                                        {
                                            "type": "BlockStatement",
                                            "name": "",
                                            "range": [
                                                370,
                                                385
                                            ],
                                            "children": [
                                                {
                                                    "type": "ExpressionStatement",
                                                    "name": "",
                                                    "range": [
                                                        371,
                                                        384
                                                    ],
                                                    "children": [
                                                        {
                                                            "type": "CallExpression",
                                                            "name": "all_tokens.extend",
                                                            "range": [
                                                                372,
                                                                383
                                                            ],
                                                            "children": [
                                                                {
                                                                    "type": "Argument",
                                                                    "name": "result.get",
                                                                    "range": [
                                                                        375,
                                                                        382
                                                                    ],
                                                                    "children": [],
                                                                    "content": "result.get(\"tokens\",[]"
                                                                }
                                                            ],
                                                            "content": ".extend(result.get(\"tokens\",[])"
                                                        }
                                                    ],
                                                    "content": "all_tokens.extend(result.get(\"tokens\",[]))"
                                                }
                                            ],
                                            "content": "\nall_tokens.extend(result.get(\"tokens\",[]))\n"
                                        }
                                    ],
                                    "content": "if input_data.return_tokens:\nall_tokens.extend(result.get(\"tokens\",[]))\n"
                                }
                            ],
                            "content": "\ndata={\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}\n\nresponse=requests.post(url,headers=headers,json=data)\nresult=response.json()\n\nall_chunks.extend(result.get(\"chunks\",[]))\nif input_data.return_tokens:\nall_tokens.extend(result.get(\"tokens\",[]))\n"
                        }
                    ],
                    "content": "for text in input_data.texts:\ndata={\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}\n\nresponse=requests.post(url,headers=headers,json=data)\nresult=response.json()\n\nall_chunks.extend(result.get(\"chunks\",[]))\nif input_data.return_tokens:\nall_tokens.extend(result.get(\"tokens\",[]))\n"
                },
                {
                    "type": "YieldStatement",
                    "name": "",
                    "range": [
                        387,
                        391
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"chunks\"",
                            "range": [
                                388,
                                388
                            ],
                            "children": [],
                            "content": "\"chunks\""
                        },
                        {
                            "type": "Identifier",
                            "name": "all_chunks",
                            "range": [
                                390,
                                390
                            ],
                            "children": [],
                            "content": "all_chunks"
                        }
                    ],
                    "content": "yield \"chunks\",all_chunks\n"
                },
                {
                    "type": "IfStatement",
                    "name": "",
                    "range": [
                        392,
                        402
                    ],
                    "children": [
                        {
                            "type": "MemberExpression",
                            "name": "input_data.return_tokens",
                            "range": [
                                393,
                                395
                            ],
                            "children": [],
                            "content": "input_data.return_tokens"
                        },
                        {
                            "type": "BlockStatement",
                            "name": "",
                            "range": [
                                397,
                                402
                            ],
                            "children": [
                                {
                                    "type": "YieldStatement",
                                    "name": "",
                                    "range": [
                                        398,
                                        401
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "\"tokens\"",
                                            "range": [
                                                399,
                                                399
                                            ],
                                            "children": [],
                                            "content": "\"tokens\""
                                        },
                                        {
                                            "type": "Identifier",
                                            "name": "all_tokens",
                                            "range": [
                                                401,
                                                401
                                            ],
                                            "children": [],
                                            "content": "all_tokens"
                                        }
                                    ],
                                    "content": "yield \"tokens\",all_tokens"
                                }
                            ],
                            "content": "\nyield \"tokens\",all_tokens\n"
                        }
                    ],
                    "content": "if input_data.return_tokens:\nyield \"tokens\",all_tokens\n"
                }
            ],
            "content": "def run(\nself,input_data:Input,*,credentials:JinaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://segment.jina.ai/\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\",\n}\n\nall_chunks=[]\nall_tokens=[]\n\nfor text in input_data.texts:\ndata={\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}\n\nresponse=requests.post(url,headers=headers,json=data)\nresult=response.json()\n\nall_chunks.extend(result.get(\"chunks\",[]))\nif input_data.return_tokens:\nall_tokens.extend(result.get(\"tokens\",[]))\n\nyield \"chunks\",all_chunks\nif input_data.return_tokens:\nyield \"tokens\",all_tokens\n"
        },
        {
            "type": "ClassDecl",
            "name": "Input",
            "range": [
                404,
                465
            ],
            "children": [
                {
                    "type": "PropertyDecl",
                    "name": "texts",
                    "range": [
                        411,
                        420
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                413,
                                413
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                414,
                                414
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        415,
                                        420
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                417,
                                                419
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"List of texts to chunk\"",
                                                    "range": [
                                                        419,
                                                        419
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "credentials",
                    "range": [
                        423,
                        429
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "JinaCredentialsInput",
                            "range": [
                                425,
                                425
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                426,
                                426
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "JinaCredentialsField",
                                    "range": [
                                        427,
                                        429
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "max_chunk_length",
                    "range": [
                        431,
                        446
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "int",
                            "range": [
                                433,
                                433
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                434,
                                434
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        435,
                                        446
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                438,
                                                440
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"Maximum length of each chunk\"",
                                                    "range": [
                                                        440,
                                                        440
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                442,
                                                444
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "1000",
                                                    "range": [
                                                        444,
                                                        444
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "PropertyDecl",
                    "name": "return_tokens",
                    "range": [
                        448,
                        463
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "bool",
                            "range": [
                                450,
                                450
                            ],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                451,
                                451
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        452,
                                        463
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                455,
                                                457
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"Whether to return token information\"",
                                                    "range": [
                                                        457,
                                                        457
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "default",
                                            "range": [
                                                459,
                                                461
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "False",
                                                    "range": [
                                                        461,
                                                        461
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "ClassDecl",
            "name": "Output",
            "range": [
                466,
                501
            ],
            "children": [
                {
                    "type": "SchemaField",
                    "name": "chunks",
                    "range": [
                        473,
                        482
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                475,
                                476
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                476,
                                477
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        477,
                                        482
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                479,
                                                481
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"List of chunked texts\"",
                                                    "range": [
                                                        481,
                                                        481
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "SchemaField",
                    "name": "tokens",
                    "range": [
                        484,
                        499
                    ],
                    "children": [
                        {
                            "type": "TypeAnnotation",
                            "name": "list",
                            "range": [
                                486,
                                487
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "AssignmentExpression",
                            "name": "=",
                            "range": [
                                487,
                                488
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SchemaField",
                                    "range": [
                                        488,
                                        499
                                    ],
                                    "children": [
                                        {
                                            "type": "Argument",
                                            "name": "description",
                                            "range": [
                                                491,
                                                493
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "\"List of token information for each chunk\"",
                                                    "range": [
                                                        493,
                                                        493
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Argument",
                                            "name": "optional",
                                            "range": [
                                                495,
                                                497
                                            ],
                                            "children": [
                                                {
                                                    "type": "Literal",
                                                    "name": "True",
                                                    "range": [
                                                        497,
                                                        497
                                                    ],
                                                    "children": [],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "__init__",
            "range": [
                502,
                553
            ],
            "children": [
                {
                    "type": "Parameter",
                    "name": "self",
                    "range": [
                        505,
                        505
                    ],
                    "content": ""
                },
                {
                    "type": "CallExpression",
                    "name": "super",
                    "range": [
                        509,
                        511
                    ],
                    "children": [
                        {
                            "type": "CallExpression",
                            "name": "__init__",
                            "range": [
                                513,
                                553
                            ],
                            "children": [
                                {
                                    "type": "AssignmentExpression",
                                    "operator": "=",
                                    "range": [
                                        516,
                                        518
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "id",
                                            "range": [
                                                516,
                                                516
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Literal",
                                            "value": "806fb15e-830f-4796-8692-557d300ff43c",
                                            "range": [
                                                518,
                                                518
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "operator": "=",
                                    "range": [
                                        521,
                                        523
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "description",
                                            "range": [
                                                521,
                                                521
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "Literal",
                                            "value": "Chunks texts using Jina AI's segmentation service",
                                            "range": [
                                                523,
                                                523
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "operator": "=",
                                    "range": [
                                        526,
                                        536
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "categories",
                                            "range": [
                                                526,
                                                526
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "ObjectExpression",
                                            "range": [
                                                528,
                                                536
                                            ],
                                            "children": [
                                                {
                                                    "type": "Property",
                                                    "key": "BlockCategory.AI",
                                                    "value": "BlockCategory.AI",
                                                    "range": [
                                                        529,
                                                        531
                                                    ],
                                                    "content": ""
                                                },
                                                {
                                                    "type": "Property",
                                                    "key": "BlockCategory.TEXT",
                                                    "value": "BlockCategory.TEXT",
                                                    "range": [
                                                        533,
                                                        535
                                                    ],
                                                    "content": ""
                                                }
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "operator": "=",
                                    "range": [
                                        539,
                                        543
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "input_schema",
                                            "range": [
                                                539,
                                                539
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "MemberExpression",
                                            "object": "JinaChunkingBlock",
                                            "property": "Input",
                                            "range": [
                                                541,
                                                543
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                },
                                {
                                    "type": "AssignmentExpression",
                                    "operator": "=",
                                    "range": [
                                        546,
                                        550
                                    ],
                                    "children": [
                                        {
                                            "type": "Identifier",
                                            "name": "output_schema",
                                            "range": [
                                                546,
                                                546
                                            ],
                                            "content": ""
                                        },
                                        {
                                            "type": "MemberExpression",
                                            "object": "JinaChunkingBlock",
                                            "property": "Output",
                                            "range": [
                                                548,
                                                550
                                            ],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        },
        {
            "type": "FunctionDecl",
            "name": "run",
            "range": [
                556,
                743
            ],
            "children": [
                {
                    "type": "ParameterList",
                    "name": "parameters",
                    "range": [
                        558,
                        576
                    ],
                    "children": [
                        {
                            "type": "Parameter",
                            "name": "self",
                            "range": [
                                560,
                                560
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "input_data",
                            "range": [
                                562,
                                564
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "credentials",
                            "range": [
                                568,
                                570
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Parameter",
                            "name": "kwargs",
                            "range": [
                                574,
                                574
                            ],
                            "children": [],
                            "content": ""
                        }
                    ],
                    "content": ""
                },
                {
                    "type": "ReturnType",
                    "name": "BlockOutput",
                    "range": [
                        579,
                        579
                    ],
                    "children": [],
                    "content": ""
                },
                {
                    "type": "Block",
                    "name": "body",
                    "range": [
                        581,
                        743
                    ],
                    "children": [
                        {
                            "type": "Assignment",
                            "name": "url",
                            "range": [
                                582,
                                584
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "headers",
                            "range": [
                                586,
                                601
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "all_chunks",
                            "range": [
                                604,
                                607
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "Assignment",
                            "name": "all_tokens",
                            "range": [
                                609,
                                612
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "ForStatement",
                            "name": "for",
                            "range": [
                                615,
                                725
                            ],
                            "children": [
                                {
                                    "type": "Assignment",
                                    "name": "data",
                                    "range": [
                                        623,
                                        661
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "requests.post",
                                    "range": [
                                        664,
                                        679
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "Assignment",
                                    "name": "result",
                                    "range": [
                                        681,
                                        687
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "CallExpression",
                                    "name": "all_chunks.extend",
                                    "range": [
                                        690,
                                        703
                                    ],
                                    "children": [],
                                    "content": ""
                                },
                                {
                                    "type": "IfStatement",
                                    "name": "if",
                                    "range": [
                                        705,
                                        724
                                    ],
                                    "children": [
                                        {
                                            "type": "CallExpression",
                                            "name": "all_tokens.extend",
                                            "range": [
                                                711,
                                                724
                                            ],
                                            "children": [],
                                            "content": ""
                                        }
                                    ],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        },
                        {
                            "type": "YieldStatement",
                            "name": "yield",
                            "range": [
                                727,
                                731
                            ],
                            "children": [],
                            "content": ""
                        },
                        {
                            "type": "IfStatement",
                            "name": "if",
                            "range": [
                                732,
                                741
                            ],
                            "children": [
                                {
                                    "type": "YieldStatement",
                                    "name": "yield",
                                    "range": [
                                        738,
                                        741
                                    ],
                                    "children": [],
                                    "content": ""
                                }
                            ],
                            "content": ""
                        }
                    ],
                    "content": ""
                }
            ],
            "content": ""
        }
    ],
    "content": "class JinaChunkingBlock(Block):\nclass Input(BlockSchema):\ntexts:list=SchemaField(description=\"List of texts to chunk\")\n\ncredentials:JinaCredentialsInput=JinaCredentialsField()\nmax_chunk_length:int=SchemaField(\ndescription=\"Maximum length of each chunk\",default=1000\n)\nreturn_tokens:bool=SchemaField(\ndescription=\"Whether to return token information\",default=False\n)\n\nclass Output(BlockSchema):\nchunks:list=SchemaField(description=\"List of chunked texts\")\ntokens:list=SchemaField(\ndescription=\"List of token information for each chunk\",optional=True\n)\n\ndef __init__(self):\nsuper().__init__(\nid=\"806fb15e-830f-4796-8692-557d300ff43c\",\ndescription=\"Chunks texts using Jina AI's segmentation service\",\ncategories={BlockCategory.AI,BlockCategory.TEXT},\ninput_schema=JinaChunkingBlock.Input,\noutput_schema=JinaChunkingBlock.Output,\n)\n\ndef run(\nself,input_data:Input,*,credentials:JinaCredentials,**kwargs\n)->BlockOutput:\nurl=\"https://segment.jina.ai/\"\nheaders={\n\"Content-Type\":\"application/json\",\n\"Authorization\":f \"Bearer {credentials.api_key.get_secret_value()}\",\n}\n\nall_chunks=[]\nall_tokens=[]\n\nfor text in input_data.texts:\ndata={\n\"content\":text,\n\"return_tokens\":str(input_data.return_tokens).lower(),\n\"return_chunks\":\"true\",\n\"max_chunk_length\":str(input_data.max_chunk_length),\n}\n\nresponse=requests.post(url,headers=headers,json=data)\nresult=response.json()\n\nall_chunks.extend(result.get(\"chunks\",[]))\nif input_data.return_tokens:\nall_tokens.extend(result.get(\"tokens\",[]))\n\nyield \"chunks\",all_chunks\nif input_data.return_tokens:\nyield \"tokens\",all_tokens\n"
}