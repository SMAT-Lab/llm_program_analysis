{
    "type": "Program",
    "name": "Global",
    "range": [
        0,
        1756
    ],
    "children": [
        {
            "type": "EnumDeclaration",
            "name": "SQUARE",
            "range": [
                88,
                90
            ],
            "children": [
                {
                    "type": "AssignmentExpression",
                    "name": "=",
                    "range": [
                        89,
                        90
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"square\"",
                            "range": [
                                90,
                                90
                            ],
                            "children": [],
                            "content": "\"square\""
                        }
                    ],
                    "content": "=\"square\""
                },
                {
                    "type": "Comment",
                    "name": "#",
                    "range": [
                        91,
                        99
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "name": "For profile pictures, icons, etc.",
                            "range": [
                                92,
                                99
                            ],
                            "children": [],
                            "content": "For profile pictures,icons,etc."
                        }
                    ],
                    "content": "#For profile pictures,icons,etc."
                }
            ],
            "content": "SQUARE=\"square\""
        },
        {
            "type": "EnumDeclaration",
            "name": "LANDSCAPE",
            "range": [
                101,
                103
            ],
            "children": [
                {
                    "type": "AssignmentExpression",
                    "name": "=",
                    "range": [
                        102,
                        103
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"landscape\"",
                            "range": [
                                103,
                                103
                            ],
                            "children": [],
                            "content": "\"landscape\""
                        }
                    ],
                    "content": "=\"landscape\""
                },
                {
                    "type": "Comment",
                    "name": "#",
                    "range": [
                        104,
                        110
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "name": "For traditional photos, scenes",
                            "range": [
                                105,
                                110
                            ],
                            "children": [],
                            "content": "For traditional photos,scenes\n"
                        }
                    ],
                    "content": "#For traditional photos,scenes\n"
                }
            ],
            "content": "LANDSCAPE=\"landscape\""
        },
        {
            "type": "EnumDeclaration",
            "name": "PORTRAIT",
            "range": [
                111,
                113
            ],
            "children": [
                {
                    "type": "AssignmentExpression",
                    "name": "=",
                    "range": [
                        112,
                        113
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"portrait\"",
                            "range": [
                                113,
                                113
                            ],
                            "children": [],
                            "content": "\"portrait\""
                        }
                    ],
                    "content": "=\"portrait\""
                },
                {
                    "type": "Comment",
                    "name": "#",
                    "range": [
                        114,
                        120
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "name": "For vertical photos, portraits",
                            "range": [
                                115,
                                120
                            ],
                            "children": [],
                            "content": "For vertical photos,portraits\n"
                        }
                    ],
                    "content": "#For vertical photos,portraits\n"
                }
            ],
            "content": "PORTRAIT=\"portrait\""
        },
        {
            "type": "EnumDeclaration",
            "name": "WIDE",
            "range": [
                121,
                123
            ],
            "children": [
                {
                    "type": "AssignmentExpression",
                    "name": "=",
                    "range": [
                        122,
                        123
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"wide\"",
                            "range": [
                                123,
                                123
                            ],
                            "children": [],
                            "content": "\"wide\""
                        }
                    ],
                    "content": "=\"wide\""
                },
                {
                    "type": "Comment",
                    "name": "#",
                    "range": [
                        124,
                        130
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "name": "For cinematic, desktop wallpapers",
                            "range": [
                                125,
                                130
                            ],
                            "children": [],
                            "content": "For cinematic,desktop wallpapers\n"
                        }
                    ],
                    "content": "#For cinematic,desktop wallpapers\n"
                }
            ],
            "content": "WIDE=\"wide\""
        },
        {
            "type": "EnumDeclaration",
            "name": "TALL",
            "range": [
                131,
                133
            ],
            "children": [
                {
                    "type": "AssignmentExpression",
                    "name": "=",
                    "range": [
                        132,
                        133
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"tall\"",
                            "range": [
                                133,
                                133
                            ],
                            "children": [],
                            "content": "\"tall\""
                        }
                    ],
                    "content": "=\"tall\""
                },
                {
                    "type": "Comment",
                    "name": "#",
                    "range": [
                        134,
                        140
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "name": "For mobile wallpapers, stories",
                            "range": [
                                135,
                                140
                            ],
                            "children": [],
                            "content": "For mobile wallpapers,stories\n"
                        }
                    ],
                    "content": "#For mobile wallpapers,stories\n"
                }
            ],
            "content": "TALL=\"tall\""
        },
        {
            "type": "VariableDeclaration",
            "name": "SIZE_TO_SD_RATIO",
            "range": [
                152,
                191
            ],
            "children": [
                {
                    "type": "Property",
                    "name": "ImageSize.SQUARE",
                    "range": [
                        156,
                        160
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "ImageSize.SQUARE",
                            "range": [
                                156,
                                158
                            ],
                            "children": [],
                            "content": "\nImageSize."
                        },
                        {
                            "type": "Literal",
                            "name": "\"1:1\"",
                            "range": [
                                160,
                                160
                            ],
                            "children": [],
                            "content": ":"
                        }
                    ],
                    "content": "\nImageSize.SQUARE:"
                },
                {
                    "type": "Property",
                    "name": "ImageSize.LANDSCAPE",
                    "range": [
                        163,
                        167
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "ImageSize.LANDSCAPE",
                            "range": [
                                163,
                                165
                            ],
                            "children": [],
                            "content": "\nImageSize."
                        },
                        {
                            "type": "Literal",
                            "name": "\"4:3\"",
                            "range": [
                                167,
                                167
                            ],
                            "children": [],
                            "content": ":"
                        }
                    ],
                    "content": "\nImageSize.LANDSCAPE:"
                },
                {
                    "type": "Property",
                    "name": "ImageSize.PORTRAIT",
                    "range": [
                        170,
                        174
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "ImageSize.PORTRAIT",
                            "range": [
                                170,
                                172
                            ],
                            "children": [],
                            "content": "\nImageSize."
                        },
                        {
                            "type": "Literal",
                            "name": "\"3:4\"",
                            "range": [
                                174,
                                174
                            ],
                            "children": [],
                            "content": ":"
                        }
                    ],
                    "content": "\nImageSize.PORTRAIT:"
                },
                {
                    "type": "Property",
                    "name": "ImageSize.WIDE",
                    "range": [
                        177,
                        181
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "ImageSize.WIDE",
                            "range": [
                                177,
                                179
                            ],
                            "children": [],
                            "content": "\nImageSize."
                        },
                        {
                            "type": "Literal",
                            "name": "\"16:9\"",
                            "range": [
                                181,
                                181
                            ],
                            "children": [],
                            "content": ":"
                        }
                    ],
                    "content": "\nImageSize.WIDE:"
                },
                {
                    "type": "Property",
                    "name": "ImageSize.TALL",
                    "range": [
                        184,
                        188
                    ],
                    "children": [
                        {
                            "type": "Identifier",
                            "name": "ImageSize.TALL",
                            "range": [
                                184,
                                186
                            ],
                            "children": [],
                            "content": "\nImageSize."
                        },
                        {
                            "type": "Literal",
                            "name": "\"9:16\"",
                            "range": [
                                188,
                                188
                            ],
                            "children": [],
                            "content": ":"
                        }
                    ],
                    "content": "\nImageSize.TALL:"
                }
            ],
            "content": "\nSIZE_TO_SD_RATIO={\nImageSize.SQUARE:\"1:1\",\nImageSize.LANDSCAPE:\"4:3\",\nImageSize.PORTRAIT:\"3:4\",\nImageSize.WIDE:\"16:9\",\nImageSize.TALL:\"9:16\",\n"
        },
        {
            "type": "AssignmentExpression",
            "name": "=",
            "range": [
                194,
                232
            ],
            "children": [
                {
                    "type": "ObjectExpression",
                    "name": "{}",
                    "range": [
                        195,
                        232
                    ],
                    "children": [
                        {
                            "type": "Property",
                            "name": "ImageSize.SQUARE",
                            "range": [
                                197,
                                201
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"1:1\"",
                                    "range": [
                                        201,
                                        201
                                    ],
                                    "children": [],
                                    "content": "SQUARE"
                                }
                            ],
                            "content": "{\nImageSize.SQUARE"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.LANDSCAPE",
                            "range": [
                                204,
                                208
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"4:3\"",
                                    "range": [
                                        208,
                                        208
                                    ],
                                    "children": [],
                                    "content": "LANDSCAPE"
                                }
                            ],
                            "content": ",\nImageSize.LANDSCAPE"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.PORTRAIT",
                            "range": [
                                211,
                                215
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"3:4\"",
                                    "range": [
                                        215,
                                        215
                                    ],
                                    "children": [],
                                    "content": "PORTRAIT"
                                }
                            ],
                            "content": ",\nImageSize.PORTRAIT"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.WIDE",
                            "range": [
                                218,
                                222
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"16:9\"",
                                    "range": [
                                        222,
                                        222
                                    ],
                                    "children": [],
                                    "content": "WIDE"
                                }
                            ],
                            "content": ",\nImageSize.WIDE"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.TALL",
                            "range": [
                                225,
                                229
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"9:16\"",
                                    "range": [
                                        229,
                                        229
                                    ],
                                    "children": [],
                                    "content": "TALL"
                                }
                            ],
                            "content": ",\nImageSize.TALL"
                        }
                    ],
                    "content": "SIZE_TO_FLUX_RATIO={\nImageSize.SQUARE:\"1:1\",\nImageSize.LANDSCAPE:\"4:3\",\nImageSize.PORTRAIT:\"3:4\",\nImageSize.WIDE:\"16:9\",\nImageSize.TALL:\"9:16\","
                }
            ],
            "content": "\nSIZE_TO_FLUX_RATIO={\nImageSize.SQUARE:\"1:1\",\nImageSize.LANDSCAPE:\"4:3\",\nImageSize.PORTRAIT:\"3:4\",\nImageSize.WIDE:\"16:9\",\nImageSize.TALL:\"9:16\","
        },
        {
            "type": "AssignmentExpression",
            "name": "=",
            "range": [
                235,
                313
            ],
            "children": [
                {
                    "type": "ObjectExpression",
                    "name": "{",
                    "range": [
                        236,
                        313
                    ],
                    "children": [
                        {
                            "type": "Property",
                            "name": "ImageSize.SQUARE",
                            "range": [
                                238,
                                246
                            ],
                            "children": [
                                {
                                    "type": "ArrayExpression",
                                    "name": "[",
                                    "range": [
                                        242,
                                        246
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "1024",
                                            "range": [
                                                243,
                                                243
                                            ],
                                            "children": [],
                                            "content": "SQUARE"
                                        },
                                        {
                                            "type": "Literal",
                                            "name": "1024",
                                            "range": [
                                                245,
                                                245
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": ".SQUARE:(1024"
                                }
                            ],
                            "content": "={\nImageSize.SQUARE:(1024"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.LANDSCAPE",
                            "range": [
                                249,
                                257
                            ],
                            "children": [
                                {
                                    "type": "ArrayExpression",
                                    "name": "[",
                                    "range": [
                                        253,
                                        257
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "1365",
                                            "range": [
                                                254,
                                                254
                                            ],
                                            "children": [],
                                            "content": "LANDSCAPE"
                                        },
                                        {
                                            "type": "Literal",
                                            "name": "1024",
                                            "range": [
                                                256,
                                                256
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": ".LANDSCAPE:(1365"
                                }
                            ],
                            "content": "),\nImageSize.LANDSCAPE:(1365"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.PORTRAIT",
                            "range": [
                                260,
                                268
                            ],
                            "children": [
                                {
                                    "type": "ArrayExpression",
                                    "name": "[",
                                    "range": [
                                        264,
                                        268
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "1024",
                                            "range": [
                                                265,
                                                265
                                            ],
                                            "children": [],
                                            "content": "PORTRAIT"
                                        },
                                        {
                                            "type": "Literal",
                                            "name": "1365",
                                            "range": [
                                                267,
                                                267
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": ".PORTRAIT:(1024"
                                }
                            ],
                            "content": "),\nImageSize.PORTRAIT:(1024"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.WIDE",
                            "range": [
                                271,
                                279
                            ],
                            "children": [
                                {
                                    "type": "ArrayExpression",
                                    "name": "[",
                                    "range": [
                                        275,
                                        279
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "1440",
                                            "range": [
                                                276,
                                                276
                                            ],
                                            "children": [],
                                            "content": "WIDE"
                                        },
                                        {
                                            "type": "Literal",
                                            "name": "810",
                                            "range": [
                                                278,
                                                278
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": ".WIDE:(1440"
                                }
                            ],
                            "content": "),\nImageSize.WIDE:(1440"
                        },
                        {
                            "type": "Comment",
                            "name": "# Adjusted to maintain 16:9 within 1440 limit",
                            "range": [
                                281,
                                291
                            ],
                            "children": [],
                            "content": "810),#Adjusted to maintain16:9within"
                        },
                        {
                            "type": "Property",
                            "name": "ImageSize.TALL",
                            "range": [
                                292,
                                300
                            ],
                            "children": [
                                {
                                    "type": "ArrayExpression",
                                    "name": "[",
                                    "range": [
                                        296,
                                        300
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "810",
                                            "range": [
                                                297,
                                                297
                                            ],
                                            "children": [],
                                            "content": "TALL"
                                        },
                                        {
                                            "type": "Literal",
                                            "name": "1440",
                                            "range": [
                                                299,
                                                299
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": ".TALL:(810"
                                }
                            ],
                            "content": "1440limit\nImageSize.TALL:(810"
                        },
                        {
                            "type": "Comment",
                            "name": "# Adjusted to maintain 9:16 within 1440 limit",
                            "range": [
                                302,
                                312
                            ],
                            "children": [],
                            "content": "1440),#Adjusted to maintain9:16within"
                        }
                    ],
                    "content": "\nSIZE_TO_FLUX_DIMENSIONS={\nImageSize.SQUARE:(1024,1024),\nImageSize.LANDSCAPE:(1365,1024),\nImageSize.PORTRAIT:(1024,1365),\nImageSize.WIDE:(1440,810),#Adjusted to maintain16:9within1440limit\nImageSize.TALL:(810,1440),#Adjusted to maintain9:16within1440"
                }
            ],
            "content": "\n\nSIZE_TO_FLUX_DIMENSIONS={\nImageSize.SQUARE:(1024,1024),\nImageSize.LANDSCAPE:(1365,1024),\nImageSize.PORTRAIT:(1024,1365),\nImageSize.WIDE:(1440,810),#Adjusted to maintain16:9within1440limit\nImageSize.TALL:(810,1440),#Adjusted to maintain9:16within1440"
        },
        {
            "type": "VariableDeclarator",
            "name": "SQUARE",
            "range": [
                319,
                323
            ],
            "children": [
                {
                    "type": "Literal",
                    "name": "\"1024x1024\"",
                    "range": [
                        323,
                        323
                    ],
                    "children": [],
                    "content": "ImageSize"
                }
            ],
            "content": "SIZE_TO_RECRAFT_DIMENSIONS={\nImageSize"
        },
        {
            "type": "VariableDeclarator",
            "name": "LANDSCAPE",
            "range": [
                326,
                330
            ],
            "children": [
                {
                    "type": "Literal",
                    "name": "\"1365x1024\"",
                    "range": [
                        330,
                        330
                    ],
                    "children": [],
                    "content": "ImageSize"
                }
            ],
            "content": ":\"1024x1024\",\nImageSize"
        },
        {
            "type": "VariableDeclarator",
            "name": "PORTRAIT",
            "range": [
                333,
                337
            ],
            "children": [
                {
                    "type": "Literal",
                    "name": "\"1024x1365\"",
                    "range": [
                        337,
                        337
                    ],
                    "children": [],
                    "content": "ImageSize"
                }
            ],
            "content": ":\"1365x1024\",\nImageSize"
        },
        {
            "type": "VariableDeclarator",
            "name": "WIDE",
            "range": [
                340,
                344
            ],
            "children": [
                {
                    "type": "Literal",
                    "name": "\"1536x1024\"",
                    "range": [
                        344,
                        344
                    ],
                    "children": [],
                    "content": "ImageSize"
                }
            ],
            "content": ":\"1024x1365\",\nImageSize"
        },
        {
            "type": "VariableDeclarator",
            "name": "TALL",
            "range": [
                347,
                351
            ],
            "children": [
                {
                    "type": "Literal",
                    "name": "\"1024x1536\"",
                    "range": [
                        351,
                        351
                    ],
                    "children": [],
                    "content": "ImageSize"
                }
            ],
            "content": ":\"1536x1024\",\nImageSize"
        },
        {
            "type": "ClassDecl",
            "name": "ImageStyle",
            "range": [
                356,
                362
            ],
            "children": [
                {
                    "type": "Inheritance",
                    "name": "str, Enum",
                    "range": [
                        358,
                        362
                    ],
                    "children": [],
                    "content": "}\n\n\nclass"
                }
            ],
            "content": ",\n}\n\n\nclass"
        },
        {
            "type": "Docstring",
            "name": "Complete set of supported styles",
            "range": [
                365,
                367
            ],
            "children": [],
            "content": "str,Enum"
        },
        {
            "type": "EnumDecl",
            "name": "ANY",
            "range": [
                370,
                372
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        371,
                        372
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"any\"",
                            "range": [
                                372,
                                372
                            ],
                            "children": [],
                            "content": "\" \\n     Complete set of supported styles \\n     \""
                        }
                    ],
                    "content": "\"\"\" \\n     Complete set of supported styles \\n     \""
                }
            ],
            "content": "\n\"\"\" \\n     Complete set of supported styles \\n     \""
        },
        {
            "type": "Comment",
            "name": "Realistic image styles",
            "range": [
                374,
                378
            ],
            "children": [],
            "content": "\n\nANY=\"any\""
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC",
            "range": [
                379,
                381
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        380,
                        381
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image\"",
                            "range": [
                                381,
                                381
                            ],
                            "children": [],
                            "content": "Realistic"
                        }
                    ],
                    "content": "#Realistic"
                }
            ],
            "content": "\n#Realistic"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_BW",
            "range": [
                383,
                385
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        384,
                        385
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/b_and_w\"",
                            "range": [
                                385,
                                385
                            ],
                            "children": [],
                            "content": "REALISTIC"
                        }
                    ],
                    "content": "\nREALISTIC"
                }
            ],
            "content": "styles\nREALISTIC"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_HDR",
            "range": [
                387,
                389
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        388,
                        389
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/hdr\"",
                            "range": [
                                389,
                                389
                            ],
                            "children": [],
                            "content": "REALISTIC_BW"
                        }
                    ],
                    "content": "\nREALISTIC_BW"
                }
            ],
            "content": "\"realistic_image\"\nREALISTIC_BW"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_NATURAL",
            "range": [
                391,
                393
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        392,
                        393
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/natural_light\"",
                            "range": [
                                393,
                                393
                            ],
                            "children": [],
                            "content": "REALISTIC_HDR"
                        }
                    ],
                    "content": "\nREALISTIC_HDR"
                }
            ],
            "content": "\"realistic_image/b_and_w\"\nREALISTIC_HDR"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_STUDIO",
            "range": [
                395,
                397
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        396,
                        397
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/studio_portrait\"",
                            "range": [
                                397,
                                397
                            ],
                            "children": [],
                            "content": "REALISTIC_NATURAL"
                        }
                    ],
                    "content": "\nREALISTIC_NATURAL"
                }
            ],
            "content": "\"realistic_image/hdr\"\nREALISTIC_NATURAL"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_ENTERPRISE",
            "range": [
                399,
                401
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        400,
                        401
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/enterprise\"",
                            "range": [
                                401,
                                401
                            ],
                            "children": [],
                            "content": "REALISTIC_STUDIO"
                        }
                    ],
                    "content": "\nREALISTIC_STUDIO"
                }
            ],
            "content": "\"realistic_image/natural_light\"\nREALISTIC_STUDIO"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_HARD_FLASH",
            "range": [
                403,
                405
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        404,
                        405
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/hard_flash\"",
                            "range": [
                                405,
                                405
                            ],
                            "children": [],
                            "content": "REALISTIC_ENTERPRISE"
                        }
                    ],
                    "content": "\nREALISTIC_ENTERPRISE"
                }
            ],
            "content": "\"realistic_image/studio_portrait\"\nREALISTIC_ENTERPRISE"
        },
        {
            "type": "EnumDecl",
            "name": "REALISTIC_MOTION_BLUR",
            "range": [
                407,
                409
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        408,
                        409
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"realistic_image/motion_blur\"",
                            "range": [
                                409,
                                409
                            ],
                            "children": [],
                            "content": "REALISTIC_HARD_FLASH"
                        }
                    ],
                    "content": "\nREALISTIC_HARD_FLASH"
                }
            ],
            "content": "\"realistic_image/enterprise\"\nREALISTIC_HARD_FLASH"
        },
        {
            "type": "Comment",
            "name": "Digital illustration styles",
            "range": [
                411,
                415
            ],
            "children": [],
            "content": "\"realistic_image/hard_flash\"\nREALISTIC_MOTION_BLUR=\"realistic_image/motion_blur\""
        },
        {
            "type": "EnumDecl",
            "name": "DIGITAL_ART",
            "range": [
                416,
                418
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        417,
                        418
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration\"",
                            "range": [
                                418,
                                418
                            ],
                            "children": [],
                            "content": "Digital"
                        }
                    ],
                    "content": "#Digital"
                }
            ],
            "content": "\n#Digital"
        },
        {
            "type": "EnumDecl",
            "name": "PIXEL_ART",
            "range": [
                420,
                422
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        421,
                        422
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/pixel_art\"",
                            "range": [
                                422,
                                422
                            ],
                            "children": [],
                            "content": "DIGITAL_ART"
                        }
                    ],
                    "content": "\nDIGITAL_ART"
                }
            ],
            "content": "styles\nDIGITAL_ART"
        },
        {
            "type": "EnumDecl",
            "name": "HAND_DRAWN",
            "range": [
                424,
                426
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        425,
                        426
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/hand_drawn\"",
                            "range": [
                                426,
                                426
                            ],
                            "children": [],
                            "content": "PIXEL_ART"
                        }
                    ],
                    "content": "\nPIXEL_ART"
                }
            ],
            "content": "\"digital_illustration\"\nPIXEL_ART"
        },
        {
            "type": "EnumDecl",
            "name": "GRAIN",
            "range": [
                428,
                430
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        429,
                        430
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/grain\"",
                            "range": [
                                430,
                                430
                            ],
                            "children": [],
                            "content": "HAND_DRAWN"
                        }
                    ],
                    "content": "\nHAND_DRAWN"
                }
            ],
            "content": "\"digital_illustration/pixel_art\"\nHAND_DRAWN"
        },
        {
            "type": "EnumDecl",
            "name": "SKETCH",
            "range": [
                432,
                434
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        433,
                        434
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/infantile_sketch\"",
                            "range": [
                                434,
                                434
                            ],
                            "children": [],
                            "content": "GRAIN"
                        }
                    ],
                    "content": "\nGRAIN"
                }
            ],
            "content": "\"digital_illustration/hand_drawn\"\nGRAIN"
        },
        {
            "type": "EnumDecl",
            "name": "POSTER",
            "range": [
                436,
                438
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        437,
                        438
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/2d_art_poster\"",
                            "range": [
                                438,
                                438
                            ],
                            "children": [],
                            "content": "SKETCH"
                        }
                    ],
                    "content": "\nSKETCH"
                }
            ],
            "content": "\"digital_illustration/grain\"\nSKETCH"
        },
        {
            "type": "EnumDecl",
            "name": "POSTER_2",
            "range": [
                440,
                442
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        441,
                        442
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/2d_art_poster_2\"",
                            "range": [
                                442,
                                442
                            ],
                            "children": [],
                            "content": "POSTER"
                        }
                    ],
                    "content": "\nPOSTER"
                }
            ],
            "content": "\"digital_illustration/infantile_sketch\"\nPOSTER"
        },
        {
            "type": "EnumDecl",
            "name": "HANDMADE_3D",
            "range": [
                444,
                446
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        445,
                        446
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/handmade_3d\"",
                            "range": [
                                446,
                                446
                            ],
                            "children": [],
                            "content": "POSTER_2"
                        }
                    ],
                    "content": "\nPOSTER_2"
                }
            ],
            "content": "\"digital_illustration/2d_art_poster\"\nPOSTER_2"
        },
        {
            "type": "EnumDecl",
            "name": "HAND_DRAWN_OUTLINE",
            "range": [
                448,
                450
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        449,
                        450
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/hand_drawn_outline\"",
                            "range": [
                                450,
                                450
                            ],
                            "children": [],
                            "content": "HANDMADE_3D"
                        }
                    ],
                    "content": "\nHANDMADE_3D"
                }
            ],
            "content": "\"digital_illustration/2d_art_poster_2\"\nHANDMADE_3D"
        },
        {
            "type": "EnumDecl",
            "name": "ENGRAVING_COLOR",
            "range": [
                452,
                454
            ],
            "children": [
                {
                    "type": "Assignment",
                    "name": "=",
                    "range": [
                        453,
                        454
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "name": "\"digital_illustration/engraving_color\"",
                            "range": [
                                454,
                                454
                            ],
                            "children": [],
                            "content": "HAND_DRAWN_OUTLINE"
                        }
                    ],
                    "content": "\nHAND_DRAWN_OUTLINE"
                }
            ],
            "content": "\"digital_illustration/handmade_3d\"\nHAND_DRAWN_OUTLINE"
        },
        {
            "type": "ClassDecl",
            "name": "ImageGenModel",
            "range": [
                457,
                487
            ],
            "children": [
                {
                    "type": "VariableDecl",
                    "name": "FLUX",
                    "range": [
                        471,
                        474
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"Flux 1.1 Pro\"",
                            "range": [
                                473,
                                473
                            ],
                            "children": [],
                            "content": "\"\""
                        }
                    ],
                    "content": ":\n\"\"\" \\n     Available model providers \\n     \""
                },
                {
                    "type": "VariableDecl",
                    "name": "FLUX_ULTRA",
                    "range": [
                        475,
                        478
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"Flux 1.1 Pro Ultra\"",
                            "range": [
                                477,
                                477
                            ],
                            "children": [],
                            "content": "\n"
                        }
                    ],
                    "content": "\"\"\n\nFLUX"
                },
                {
                    "type": "VariableDecl",
                    "name": "RECRAFT",
                    "range": [
                        479,
                        482
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"Recraft v3\"",
                            "range": [
                                481,
                                481
                            ],
                            "children": [],
                            "content": "\n"
                        }
                    ],
                    "content": "=\"Flux 1.1 Pro\"\nFLUX_ULTRA"
                },
                {
                    "type": "VariableDecl",
                    "name": "SD3_5",
                    "range": [
                        483,
                        486
                    ],
                    "children": [
                        {
                            "type": "Literal",
                            "value": "\"Stable Diffusion 3.5 Medium\"",
                            "range": [
                                485,
                                485
                            ],
                            "children": [],
                            "content": "\n"
                        }
                    ],
                    "content": "=\"Flux 1.1 Pro Ultra\"\nRECRAFT"
                }
            ],
            "content": "\nENGRAVING_COLOR=\"digital_illustration/engraving_color\"\n\n\nclass ImageGenModel(str,Enum):\n\"\"\" \\n     Available model providers \\n     \"\"\"\n\nFLUX=\"Flux 1.1 Pro\"\nFLUX_ULTRA=\"Flux 1.1 Pro Ultra\"\nRECRAFT="
        },
        {
            "type": "AssignmentExpression",
            "name": "=",
            "range": [
                1689,
                1721
            ],
            "children": [
                {
                    "type": "Identifier",
                    "name": "TEST_CREDENTIALS",
                    "range": [
                        1688,
                        1688
                    ],
                    "children": [],
                    "content": "\"error\""
                },
                {
                    "type": "CallExpression",
                    "name": "APIKeyCredentials",
                    "range": [
                        1690,
                        1721
                    ],
                    "children": [
                        {
                            "type": "Argument",
                            "name": "id",
                            "range": [
                                1693,
                                1695
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"01234567-89ab-cdef-0123-456789abcdef\"",
                                    "range": [
                                        1695,
                                        1695
                                    ],
                                    "children": [],
                                    "content": "\n"
                                }
                            ],
                            "content": ")\n\n"
                        },
                        {
                            "type": "Argument",
                            "name": "provider",
                            "range": [
                                1698,
                                1700
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"replicate\"",
                                    "range": [
                                        1700,
                                        1700
                                    ],
                                    "children": [],
                                    "content": "stay"
                                }
                            ],
                            "content": "Test credentials stay"
                        },
                        {
                            "type": "Argument",
                            "name": "api_key",
                            "range": [
                                1703,
                                1708
                            ],
                            "children": [
                                {
                                    "type": "CallExpression",
                                    "name": "SecretStr",
                                    "range": [
                                        1705,
                                        1708
                                    ],
                                    "children": [
                                        {
                                            "type": "Literal",
                                            "name": "\"mock-replicate-api-key\"",
                                            "range": [
                                                1707,
                                                1707
                                            ],
                                            "children": [],
                                            "content": "("
                                        }
                                    ],
                                    "content": "=APIKeyCredentials(\n"
                                }
                            ],
                            "content": "\nTEST_CREDENTIALS=APIKeyCredentials(\n"
                        },
                        {
                            "type": "Argument",
                            "name": "title",
                            "range": [
                                1711,
                                1713
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"Mock Replicate API key\"",
                                    "range": [
                                        1713,
                                        1713
                                    ],
                                    "children": [],
                                    "content": "\n"
                                }
                            ],
                            "content": "\"01234567-89ab-cdef-0123-456789abcdef\",\n"
                        },
                        {
                            "type": "Argument",
                            "name": "expires_at",
                            "range": [
                                1716,
                                1718
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "None",
                                    "range": [
                                        1718,
                                        1718
                                    ],
                                    "children": [],
                                    "content": "\n"
                                }
                            ],
                            "content": "\"replicate\",\n"
                        }
                    ],
                    "content": "str(e)\n\n\n#Test credentials stay the same\nTEST_CREDENTIALS=APIKeyCredentials(\nid=\"01234567-89ab-cdef-0123-456789abcdef\",\nprovider=\"replicate\",\napi_key=SecretStr"
                }
            ],
            "content": ",str(e)\n\n\n#Test credentials stay the same\nTEST_CREDENTIALS=APIKeyCredentials(\nid=\"01234567-89ab-cdef-0123-456789abcdef\",\nprovider=\"replicate\",\napi_key=SecretStr"
        },
        {
            "type": "VariableDeclaration",
            "name": "TEST_CREDENTIALS_INPUT",
            "range": [
                1723,
                1756
            ],
            "children": [
                {
                    "type": "ObjectExpression",
                    "name": "",
                    "range": [
                        1725,
                        1755
                    ],
                    "children": [
                        {
                            "type": "Property",
                            "name": "provider",
                            "range": [
                                1727,
                                1731
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"provider\"",
                                    "range": [
                                        1727,
                                        1727
                                    ],
                                    "children": [],
                                    "content": "title"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "TEST_CREDENTIALS",
                                    "range": [
                                        1729,
                                        1729
                                    ],
                                    "children": [],
                                    "content": "\"Mock Replicate API key\""
                                },
                                {
                                    "type": "Identifier",
                                    "name": "provider",
                                    "range": [
                                        1731,
                                        1731
                                    ],
                                    "children": [],
                                    "content": "\n"
                                }
                            ],
                            "content": "title=\"Mock Replicate API key\",\n"
                        },
                        {
                            "type": "Property",
                            "name": "id",
                            "range": [
                                1734,
                                1738
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"id\"",
                                    "range": [
                                        1734,
                                        1734
                                    ],
                                    "children": [],
                                    "content": "None"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "TEST_CREDENTIALS",
                                    "range": [
                                        1736,
                                        1736
                                    ],
                                    "children": [],
                                    "content": "\n"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "id",
                                    "range": [
                                        1738,
                                        1738
                                    ],
                                    "children": [],
                                    "content": "\n"
                                }
                            ],
                            "content": "None,\n)\n"
                        },
                        {
                            "type": "Property",
                            "name": "type",
                            "range": [
                                1741,
                                1745
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"type\"",
                                    "range": [
                                        1741,
                                        1741
                                    ],
                                    "children": [],
                                    "content": "="
                                },
                                {
                                    "type": "Identifier",
                                    "name": "TEST_CREDENTIALS",
                                    "range": [
                                        1743,
                                        1743
                                    ],
                                    "children": [],
                                    "content": "\n"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "type",
                                    "range": [
                                        1745,
                                        1745
                                    ],
                                    "children": [],
                                    "content": ":"
                                }
                            ],
                            "content": "={\n\"provider\":"
                        },
                        {
                            "type": "Property",
                            "name": "title",
                            "range": [
                                1748,
                                1752
                            ],
                            "children": [
                                {
                                    "type": "Literal",
                                    "name": "\"title\"",
                                    "range": [
                                        1748,
                                        1748
                                    ],
                                    "children": [],
                                    "content": "provider"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "TEST_CREDENTIALS",
                                    "range": [
                                        1750,
                                        1750
                                    ],
                                    "children": [],
                                    "content": "\n"
                                },
                                {
                                    "type": "Identifier",
                                    "name": "title",
                                    "range": [
                                        1752,
                                        1752
                                    ],
                                    "children": [],
                                    "content": ":"
                                }
                            ],
                            "content": "provider,\n\"id\":"
                        }
                    ],
                    "content": ",\ntitle=\"Mock Replicate API key\",\nexpires_at=None,\n)\n\nTEST_CREDENTIALS_INPUT={\n\"provider\":TEST_CREDENTIALS.provider,\n\"id\":TEST_CREDENTIALS.id"
                }
            ],
            "content": "\"mock-replicate-api-key\"),\ntitle=\"Mock Replicate API key\",\nexpires_at=None,\n)\n\nTEST_CREDENTIALS_INPUT={\n\"provider\":TEST_CREDENTIALS.provider,\n\"id\":TEST_CREDENTIALS.id,"
        }
    ],
    "content": "from enum import Enum\nfrom typing import Literal\n\nimport replicate\nfrom pydantic import SecretStr\nfrom replicate.helpers import FileOutput\n\nfrom backend.data.block import Block,BlockCategory,BlockSchema\nfrom backend.data.model import(\nAPIKeyCredentials,\nCredentialsField,\nCredentialsMetaInput,\nSchemaField,\n)\nfrom backend.integrations.providers import ProviderName\n\n\nclass ImageSize(str,Enum):\n\"\"\" \\n     Semantic sizes that map reliably across all models \\n     \"\"\"\n\nSQUARE=\"square\"#For profile pictures,icons,etc.\nLANDSCAPE=\"landscape\"#For traditional photos,scenes\nPORTRAIT=\"portrait\"#For vertical photos,portraits\nWIDE=\"wide\"#For cinematic,desktop wallpapers\nTALL=\"tall\"#For mobile wallpapers,stories\n\n\n#Mapping semantic sizes to model-specific formats\nSIZE_TO_SD_RATIO={\nImageSize.SQUARE:\"1:1\",\nImageSize.LANDSCAPE:\"4:3\",\nImageSize.PORTRAIT:\"3:4\",\nImageSize.WIDE:\"16:9\",\nImageSize.TALL:\"9:16\",\n}\n\nSIZE_TO_FLUX_RATIO={\nImageSize.SQUARE:\"1:1\",\nImageSize.LANDSCAPE:\"4:3\",\nImageSize.PORTRAIT:\"3:4\",\nImageSize.WIDE:\"16:9\",\nImageSize.TALL:\"9:16\",\n}\n\nSIZE_TO_FLUX_DIMENSIONS={\nImageSize.SQUARE:(1024,1024),\nImageSize.LANDSCAPE:(1365,1024),\nImageSize.PORTRAIT:(1024,1365),\nImageSize.WIDE:(1440,810),#Adjusted to maintain16:9within1440limit\nImageSize.TALL:(810,1440),#Adjusted to maintain9:16within1440limit\n}\n\nSIZE_TO_RECRAFT_DIMENSIONS={\nImageSize.SQUARE:\"1024x1024\",\nImageSize.LANDSCAPE:\"1365x1024\",\nImageSize.PORTRAIT:\"1024x1365\",\nImageSize.WIDE:\"1536x1024\",\nImageSize.TALL:\"1024x1536\",\n}\n\n\nclass ImageStyle(str,Enum):\n\"\"\" \\n     Complete set of supported styles \\n     \"\"\"\n\nANY=\"any\"\n#Realistic image styles\nREALISTIC=\"realistic_image\"\nREALISTIC_BW=\"realistic_image/b_and_w\"\nREALISTIC_HDR=\"realistic_image/hdr\"\nREALISTIC_NATURAL=\"realistic_image/natural_light\"\nREALISTIC_STUDIO=\"realistic_image/studio_portrait\"\nREALISTIC_ENTERPRISE=\"realistic_image/enterprise\"\nREALISTIC_HARD_FLASH=\"realistic_image/hard_flash\"\nREALISTIC_MOTION_BLUR=\"realistic_image/motion_blur\"\n#Digital illustration styles\nDIGITAL_ART=\"digital_illustration\"\nPIXEL_ART=\"digital_illustration/pixel_art\"\nHAND_DRAWN=\"digital_illustration/hand_drawn\"\nGRAIN=\"digital_illustration/grain\"\nSKETCH=\"digital_illustration/infantile_sketch\"\nPOSTER=\"digital_illustration/2d_art_poster\"\nPOSTER_2=\"digital_illustration/2d_art_poster_2\"\nHANDMADE_3D=\"digital_illustration/handmade_3d\"\nHAND_DRAWN_OUTLINE=\"digital_illustration/hand_drawn_outline\"\nENGRAVING_COLOR=\"digital_illustration/engraving_color\"\n\n\nclass ImageGenModel(str,Enum):\n\"\"\" \\n     Available model providers \\n     \"\"\"\n\nFLUX=\"Flux 1.1 Pro\"\nFLUX_ULTRA=\"Flux 1.1 Pro Ultra\"\nRECRAFT=\"Recraft v3\"\nSD3_5=\"Stable Diffusion 3.5 Medium\"\n\n\nclass AIImageGeneratorBlock(Block):\nclass Input(BlockSchema):\ncredentials:CredentialsMetaInput[\nLiteral[ProviderName.REPLICATE],Literal[\"api_key\"]\n]=CredentialsField(\ndescription=\"Enter your Replicate API key to access the image generation API. You can obtain an API key from https://replicate.com/account/api-tokens.\",\n)\nprompt:str=SchemaField(\ndescription=\"Text prompt for image generation\",\nplaceholder=\"e.g., 'A red panda using a laptop in a snowy forest'\",\ntitle=\"Prompt\",\n)\nmodel:ImageGenModel=SchemaField(\ndescription=\"The AI model to use for image generation\",\ndefault=ImageGenModel.SD3_5,\ntitle=\"Model\",\n)\nsize:ImageSize=SchemaField(\ndescription=(\n\"Format of the generated image:\\n\"\n\"- Square: Perfect for profile pictures, icons\\n\"\n\"- Landscape: Traditional photo format\\n\"\n\"- Portrait: Vertical photos, portraits\\n\"\n\"- Wide: Cinematic format, desktop wallpapers\\n\"\n\"- Tall: Mobile wallpapers, social media stories\"\n),\ndefault=ImageSize.SQUARE,\ntitle=\"Image Format\",\n)\nstyle:ImageStyle=SchemaField(\ndescription=\"Visual style for the generated image\",\ndefault=ImageStyle.ANY,\ntitle=\"Image Style\",\n)\n\nclass Output(BlockSchema):\nimage_url:str=SchemaField(description=\"URL of the generated image\")\nerror:str=SchemaField(description=\"Error message if generation failed\")\n\ndef __init__(self):\nsuper().__init__(\nid=\"ed1ae7a0-b770-4089-b520-1f0005fad19a\",\ndescription=\"Generate images using various AI models through a unified interface\",\ncategories={BlockCategory.AI},\ninput_schema=AIImageGeneratorBlock.Input,\noutput_schema=AIImageGeneratorBlock.Output,\ntest_input={\n\"credentials\":TEST_CREDENTIALS_INPUT,\n\"prompt\":\"An octopus using a laptop in a snowy forest with 'AutoGPT' clearly visible on the screen\",\n\"model\":ImageGenModel.RECRAFT,\n\"size\":ImageSize.SQUARE,\n\"style\":ImageStyle.REALISTIC,\n},\ntest_credentials=TEST_CREDENTIALS,\ntest_output=[\n(\n\"image_url\",\n\"https://replicate.delivery/generated-image.webp\",\n),\n],\ntest_mock={\n\"_run_client\":lambda*args,**kwargs:\"https://replicate.delivery/generated-image.webp\"\n},\n)\n\ndef _run_client(\nself,credentials:APIKeyCredentials,model_name:str,input_params:dict\n):\ntry:\n#Initialize Replicate client\nclient=replicate.Client(api_token=credentials.api_key.get_secret_value())\n\n#Run the model with input parameters\noutput=client.run(model_name,input=input_params,wait=False)\n\n#Process output\nif isinstance(output,list)and len(output)>0:\nif isinstance(output[0],FileOutput):\nresult_url=output[0].url\nelse:\nresult_url=output[0]\nelif isinstance(output,FileOutput):\nresult_url=output.url\nelif isinstance(output,str):\nresult_url=output\nelse:\nresult_url=None\n\nreturn result_url\n\nexcept TypeError as e:\nraise TypeError(f \"Error during model execution: {e}\")\nexcept Exception as e:\nraise RuntimeError(f \"Unexpected error during model execution: {e}\")\n\ndef generate_image(self,input_data:Input,credentials:APIKeyCredentials):\ntry:\n#Handle style-based prompt modification for models without native style support\nmodified_prompt=input_data.prompt\nif input_data.model not in[ImageGenModel.RECRAFT]:\nstyle_prefix=self._style_to_prompt_prefix(input_data.style)\nmodified_prompt=f \"{style_prefix} {modified_prompt}\".strip()\n\nif input_data.model==ImageGenModel.SD3_5:\n#Use Stable Diffusion3.5with aspect ratio\ninput_params={\n\"prompt\":modified_prompt,\n\"aspect_ratio\":SIZE_TO_SD_RATIO[input_data.size],\n\"output_format\":\"webp\",\n\"output_quality\":90,\n\"steps\":40,\n\"cfg_scale\":7.0,\n}\noutput=self._run_client(\ncredentials,\n\"stability-ai/stable-diffusion-3.5-medium\",\ninput_params,\n)\nreturn output\n\nelif input_data.model==ImageGenModel.FLUX:\n#Use Flux-specific dimensions with 'jpg' format to avoid ReplicateError\nwidth,height=SIZE_TO_FLUX_DIMENSIONS[input_data.size]\ninput_params={\n\"prompt\":modified_prompt,\n\"width\":width,\n\"height\":height,\n\"aspect_ratio\":SIZE_TO_FLUX_RATIO[input_data.size],\n\"output_format\":\"jpg\",#Set to jpg for Flux models\n\"output_quality\":90,\n}\noutput=self._run_client(\ncredentials,\"black-forest-labs/flux-1.1-pro\",input_params\n)\nreturn output\n\nelif input_data.model==ImageGenModel.FLUX_ULTRA:\nwidth,height=SIZE_TO_FLUX_DIMENSIONS[input_data.size]\ninput_params={\n\"prompt\":modified_prompt,\n\"width\":width,\n\"height\":height,\n\"aspect_ratio\":SIZE_TO_FLUX_RATIO[input_data.size],\n\"output_format\":\"jpg\",\n\"output_quality\":90,\n}\noutput=self._run_client(\ncredentials,\"black-forest-labs/flux-1.1-pro-ultra\",input_params\n)\nreturn output\n\nelif input_data.model==ImageGenModel.RECRAFT:\ninput_params={\n\"prompt\":input_data.prompt,\n\"size\":SIZE_TO_RECRAFT_DIMENSIONS[input_data.size],\n\"style\":input_data.style.value,\n}\noutput=self._run_client(\ncredentials,\"recraft-ai/recraft-v3\",input_params\n)\nreturn output\n\nexcept Exception as e:\nraise RuntimeError(f \"Failed to generate image: {str(e)}\")\n\ndef _style_to_prompt_prefix(self,style:ImageStyle)->str:\n\"\"\" \\n         Convert a style enum to a prompt prefix for models without native style support. \\n         \"\"\"\nif style==ImageStyle.ANY:\nreturn\"\"\n\nstyle_map={\nImageStyle.REALISTIC:\"photorealistic\",\nImageStyle.REALISTIC_BW:\"black and white photograph\",\nImageStyle.REALISTIC_HDR:\"HDR photograph\",\nImageStyle.REALISTIC_NATURAL:\"natural light photograph\",\nImageStyle.REALISTIC_STUDIO:\"studio portrait photograph\",\nImageStyle.REALISTIC_ENTERPRISE:\"enterprise photograph\",\nImageStyle.REALISTIC_HARD_FLASH:\"hard flash photograph\",\nImageStyle.REALISTIC_MOTION_BLUR:\"motion blur photograph\",\nImageStyle.DIGITAL_ART:\"digital art\",\nImageStyle.PIXEL_ART:\"pixel art\",\nImageStyle.HAND_DRAWN:\"hand drawn illustration\",\nImageStyle.GRAIN:\"grainy digital illustration\",\nImageStyle.SKETCH:\"sketchy illustration\",\nImageStyle.POSTER:\"2D art poster\",\nImageStyle.POSTER_2:\"alternate 2D art poster\",\nImageStyle.HANDMADE_3D:\"handmade 3D illustration\",\nImageStyle.HAND_DRAWN_OUTLINE:\"hand drawn outline illustration\",\nImageStyle.ENGRAVING_COLOR:\"color engraving illustration\",\n}\n\nstyle_text=style_map.get(style,\"\")\nreturn f \"{style_text} of\" if style_text else\"\"\n\ndef run(self,input_data:Input,*,credentials:APIKeyCredentials,**kwargs):\ntry:\nurl=self.generate_image(input_data,credentials)\nif url:\nyield \"image_url\",url\nelse:\nyield \"error\",\"Image generation returned an empty result.\"\nexcept Exception as e:\n#Capture and return only the message of the exception,avoiding serialization of non-serializable objects\nyield \"error\",str(e)\n\n\n#Test credentials stay the same\nTEST_CREDENTIALS=APIKeyCredentials(\nid=\"01234567-89ab-cdef-0123-456789abcdef\",\nprovider=\"replicate\",\napi_key=SecretStr(\"mock-replicate-api-key\"),\ntitle=\"Mock Replicate API key\",\nexpires_at=None,\n)\n\nTEST_CREDENTIALS_INPUT={\n\"provider\":TEST_CREDENTIALS.provider,\n\"id\":TEST_CREDENTIALS.id,"
}