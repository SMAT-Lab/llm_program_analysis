{
    "nodes": [
        {
            "id": "1",
            "type": "block",
            "statements": [
                "import re",
                "from typing_extensions import TypedDict",
                "from backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema",
                "from backend.data.model import SchemaField",
                "from ._api import get_api",
                "from ._auth import TEST_CREDENTIALS, TEST_CREDENTIALS_INPUT, GithubCredentials, GithubCredentialsField, GithubCredentialsInput",
                "class GithubListPullRequestsBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')\n\n    class Output(BlockSchema):\n\n        class PRItem(TypedDict):\n            title: str\n            url: str\n        pull_request: PRItem = SchemaField(title='Pull Request', description='PRs with their title and URL')\n        error: str = SchemaField(description='Error message if listing issues failed')\n\n    def __init__(self):\n        super().__init__(id='ffef3c4c-6cd0-48dd-817d-459f975219f4', description='This block lists all pull requests for a specified GitHub repository.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubListPullRequestsBlock.Input, output_schema=GithubListPullRequestsBlock.Output, test_input={'repo_url': 'https://github.com/owner/repo', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('pull_request', {'title': 'Pull request 1', 'url': 'https://github.com/owner/repo/pull/1'})], test_mock={'list_prs': lambda *args, **kwargs: [{'title': 'Pull request 1', 'url': 'https://github.com/owner/repo/pull/1'}]})\n\n    @staticmethod\n    def list_prs(credentials: GithubCredentials, repo_url: str) -> list[Output.PRItem]:\n        api = get_api(credentials)\n        pulls_url = repo_url + '/pulls'\n        response = api.get(pulls_url)\n        data = response.json()\n        pull_requests: list[GithubListPullRequestsBlock.Output.PRItem] = [{'title': pr['title'], 'url': pr['html_url']} for pr in data]\n        return pull_requests\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        pull_requests = self.list_prs(credentials, input_data.repo_url)\n        yield from (('pull_request', pr) for pr in pull_requests)",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')",
                "class Output(BlockSchema):\n\n    class PRItem(TypedDict):\n        title: str\n        url: str\n    pull_request: PRItem = SchemaField(title='Pull Request', description='PRs with their title and URL')\n    error: str = SchemaField(description='Error message if listing issues failed')",
                "class PRItem(TypedDict):\n    title: str\n    url: str",
                "title: str",
                "url: str",
                "pull_request: PRItem = SchemaField(title='Pull Request', description='PRs with their title and URL')",
                "error: str = SchemaField(description='Error message if listing issues failed')",
                "def __init__(self):\n    super().__init__(id='ffef3c4c-6cd0-48dd-817d-459f975219f4', description='This block lists all pull requests for a specified GitHub repository.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubListPullRequestsBlock.Input, output_schema=GithubListPullRequestsBlock.Output, test_input={'repo_url': 'https://github.com/owner/repo', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('pull_request', {'title': 'Pull request 1', 'url': 'https://github.com/owner/repo/pull/1'})], test_mock={'list_prs': lambda *args, **kwargs: [{'title': 'Pull request 1', 'url': 'https://github.com/owner/repo/pull/1'}]})",
                "super().__init__()",
                "@staticmethod\ndef list_prs(credentials: GithubCredentials, repo_url: str) -> list[Output.PRItem]:\n    api = get_api(credentials)\n    pulls_url = repo_url + '/pulls'\n    response = api.get(pulls_url)\n    data = response.json()\n    pull_requests: list[GithubListPullRequestsBlock.Output.PRItem] = [{'title': pr['title'], 'url': pr['html_url']} for pr in data]\n    return pull_requests",
                "api = get_api(credentials)",
                "pulls_url = repo_url + '/pulls'",
                "response = api.get(pulls_url)",
                "data = response.json()",
                "pull_requests: list[GithubListPullRequestsBlock.Output.PRItem] = [{'title': pr['title'], 'url': pr['html_url']} for pr in data]",
                "return pull_requests"
            ]
        },
        {
            "id": "2",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    pull_requests = self.list_prs(credentials, input_data.repo_url)\n    yield from (('pull_request', pr) for pr in pull_requests)",
                "pull_requests = self.list_prs(credentials, input_data.repo_url)",
                "(yield from (('pull_request', pr) for pr in pull_requests))",
                "class GithubMakePullRequestBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')\n        title: str = SchemaField(description='Title of the pull request', placeholder='Enter the pull request title')\n        body: str = SchemaField(description='Body of the pull request', placeholder='Enter the pull request body')\n        head: str = SchemaField(description='The name of the branch where your changes are implemented. For cross-repository pull requests in the same network, namespace head with a user like this: username:branch.', placeholder='Enter the head branch')\n        base: str = SchemaField(description='The name of the branch you want the changes pulled into.', placeholder='Enter the base branch')\n\n    class Output(BlockSchema):\n        number: int = SchemaField(description='Number of the created pull request')\n        url: str = SchemaField(description='URL of the created pull request')\n        error: str = SchemaField(description='Error message if the pull request creation failed')\n\n    def __init__(self):\n        super().__init__(id='dfb987f8-f197-4b2e-bf19-111812afd692', description='This block creates a new pull request on a specified GitHub repository.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubMakePullRequestBlock.Input, output_schema=GithubMakePullRequestBlock.Output, test_input={'repo_url': 'https://github.com/owner/repo', 'title': 'Test Pull Request', 'body': 'This is a test pull request.', 'head': 'feature-branch', 'base': 'main', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('number', 1), ('url', 'https://github.com/owner/repo/pull/1')], test_mock={'create_pr': lambda *args, **kwargs: (1, 'https://github.com/owner/repo/pull/1')})\n\n    @staticmethod\n    def create_pr(credentials: GithubCredentials, repo_url: str, title: str, body: str, head: str, base: str) -> tuple[int, str]:\n        api = get_api(credentials)\n        pulls_url = repo_url + '/pulls'\n        data = {'title': title, 'body': body, 'head': head, 'base': base}\n        response = api.post(pulls_url, json=data)\n        pr_data = response.json()\n        return (pr_data['number'], pr_data['html_url'])\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        try:\n            (number, url) = self.create_pr(credentials, input_data.repo_url, input_data.title, input_data.body, input_data.head, input_data.base)\n            yield ('number', number)\n            yield ('url', url)\n        except Exception as e:\n            yield ('error', str(e))",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')\n    title: str = SchemaField(description='Title of the pull request', placeholder='Enter the pull request title')\n    body: str = SchemaField(description='Body of the pull request', placeholder='Enter the pull request body')\n    head: str = SchemaField(description='The name of the branch where your changes are implemented. For cross-repository pull requests in the same network, namespace head with a user like this: username:branch.', placeholder='Enter the head branch')\n    base: str = SchemaField(description='The name of the branch you want the changes pulled into.', placeholder='Enter the base branch')",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "repo_url: str = SchemaField(description='URL of the GitHub repository', placeholder='https://github.com/owner/repo')",
                "title: str = SchemaField(description='Title of the pull request', placeholder='Enter the pull request title')",
                "body: str = SchemaField(description='Body of the pull request', placeholder='Enter the pull request body')",
                "head: str = SchemaField(description='The name of the branch where your changes are implemented. For cross-repository pull requests in the same network, namespace head with a user like this: username:branch.', placeholder='Enter the head branch')",
                "base: str = SchemaField(description='The name of the branch you want the changes pulled into.', placeholder='Enter the base branch')",
                "class Output(BlockSchema):\n    number: int = SchemaField(description='Number of the created pull request')\n    url: str = SchemaField(description='URL of the created pull request')\n    error: str = SchemaField(description='Error message if the pull request creation failed')",
                "number: int = SchemaField(description='Number of the created pull request')",
                "url: str = SchemaField(description='URL of the created pull request')",
                "error: str = SchemaField(description='Error message if the pull request creation failed')",
                "def __init__(self):\n    super().__init__(id='dfb987f8-f197-4b2e-bf19-111812afd692', description='This block creates a new pull request on a specified GitHub repository.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubMakePullRequestBlock.Input, output_schema=GithubMakePullRequestBlock.Output, test_input={'repo_url': 'https://github.com/owner/repo', 'title': 'Test Pull Request', 'body': 'This is a test pull request.', 'head': 'feature-branch', 'base': 'main', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('number', 1), ('url', 'https://github.com/owner/repo/pull/1')], test_mock={'create_pr': lambda *args, **kwargs: (1, 'https://github.com/owner/repo/pull/1')})",
                "super().__init__()",
                "@staticmethod\ndef create_pr(credentials: GithubCredentials, repo_url: str, title: str, body: str, head: str, base: str) -> tuple[int, str]:\n    api = get_api(credentials)\n    pulls_url = repo_url + '/pulls'\n    data = {'title': title, 'body': body, 'head': head, 'base': base}\n    response = api.post(pulls_url, json=data)\n    pr_data = response.json()\n    return (pr_data['number'], pr_data['html_url'])",
                "api = get_api(credentials)",
                "pulls_url = repo_url + '/pulls'",
                "data = {'title': title, 'body': body, 'head': head, 'base': base}",
                "response = api.post(pulls_url, json=data)",
                "pr_data = response.json()",
                "return (pr_data['number'], pr_data['html_url'])"
            ]
        },
        {
            "id": "3",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    try:\n        (number, url) = self.create_pr(credentials, input_data.repo_url, input_data.title, input_data.body, input_data.head, input_data.base)\n        yield ('number', number)\n        yield ('url', url)\n    except Exception as e:\n        yield ('error', str(e))",
                "try:\n    (number, url) = self.create_pr(credentials, input_data.repo_url, input_data.title, input_data.body, input_data.head, input_data.base)\n    yield ('number', number)\n    yield ('url', url)\nexcept Exception as e:\n    yield ('error', str(e))",
                "(number, url) = self.create_pr(credentials, input_data.repo_url, input_data.title, input_data.body, input_data.head, input_data.base)",
                "(yield ('number', number))",
                "(yield ('url', url))",
                "(yield ('error', str(e)))",
                "class GithubReadPullRequestBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n        include_pr_changes: bool = SchemaField(description='Whether to include the changes made in the pull request', default=False)\n\n    class Output(BlockSchema):\n        title: str = SchemaField(description='Title of the pull request')\n        body: str = SchemaField(description='Body of the pull request')\n        author: str = SchemaField(description='User who created the pull request')\n        changes: str = SchemaField(description='Changes made in the pull request')\n        error: str = SchemaField(description='Error message if reading the pull request failed')\n\n    def __init__(self):\n        super().__init__(id='bf94b2a4-1a30-4600-a783-a8a44ee31301', description='This block reads the body, title, user, and changes of a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubReadPullRequestBlock.Input, output_schema=GithubReadPullRequestBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'include_pr_changes': True, 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('title', 'Title of the pull request'), ('body', 'This is the body of the pull request.'), ('author', 'username'), ('changes', 'List of changes made in the pull request.')], test_mock={'read_pr': lambda *args, **kwargs: ('Title of the pull request', 'This is the body of the pull request.', 'username'), 'read_pr_changes': lambda *args, **kwargs: 'List of changes made in the pull request.'})\n\n    @staticmethod\n    def read_pr(credentials: GithubCredentials, pr_url: str) -> tuple[str, str, str]:\n        api = get_api(credentials)\n        issue_url = pr_url.replace('/pull/', '/issues/')\n        response = api.get(issue_url)\n        data = response.json()\n        title = data.get('title', 'No title found')\n        body = data.get('body', 'No body content found')\n        author = data.get('user', {}).get('login', 'No user found')\n        return (title, body, author)\n\n    @staticmethod\n    def read_pr_changes(credentials: GithubCredentials, pr_url: str) -> str:\n        api = get_api(credentials)\n        files_url = prepare_pr_api_url(pr_url=pr_url, path='files')\n        response = api.get(files_url)\n        files = response.json()\n        changes = []\n        for file in files:\n            filename = file.get('filename')\n            patch = file.get('patch')\n            if filename and patch:\n                changes.append(f'File: {filename}\\n{patch}')\n        return '\\n\\n'.join(changes)\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        (title, body, author) = self.read_pr(credentials, input_data.pr_url)\n        yield ('title', title)\n        yield ('body', body)\n        yield ('author', author)\n        if input_data.include_pr_changes:\n            changes = self.read_pr_changes(credentials, input_data.pr_url)\n            yield ('changes', changes)",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n    include_pr_changes: bool = SchemaField(description='Whether to include the changes made in the pull request', default=False)",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')",
                "include_pr_changes: bool = SchemaField(description='Whether to include the changes made in the pull request', default=False)",
                "class Output(BlockSchema):\n    title: str = SchemaField(description='Title of the pull request')\n    body: str = SchemaField(description='Body of the pull request')\n    author: str = SchemaField(description='User who created the pull request')\n    changes: str = SchemaField(description='Changes made in the pull request')\n    error: str = SchemaField(description='Error message if reading the pull request failed')",
                "title: str = SchemaField(description='Title of the pull request')",
                "body: str = SchemaField(description='Body of the pull request')",
                "author: str = SchemaField(description='User who created the pull request')",
                "changes: str = SchemaField(description='Changes made in the pull request')",
                "error: str = SchemaField(description='Error message if reading the pull request failed')",
                "def __init__(self):\n    super().__init__(id='bf94b2a4-1a30-4600-a783-a8a44ee31301', description='This block reads the body, title, user, and changes of a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubReadPullRequestBlock.Input, output_schema=GithubReadPullRequestBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'include_pr_changes': True, 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('title', 'Title of the pull request'), ('body', 'This is the body of the pull request.'), ('author', 'username'), ('changes', 'List of changes made in the pull request.')], test_mock={'read_pr': lambda *args, **kwargs: ('Title of the pull request', 'This is the body of the pull request.', 'username'), 'read_pr_changes': lambda *args, **kwargs: 'List of changes made in the pull request.'})",
                "super().__init__()",
                "@staticmethod\ndef read_pr(credentials: GithubCredentials, pr_url: str) -> tuple[str, str, str]:\n    api = get_api(credentials)\n    issue_url = pr_url.replace('/pull/', '/issues/')\n    response = api.get(issue_url)\n    data = response.json()\n    title = data.get('title', 'No title found')\n    body = data.get('body', 'No body content found')\n    author = data.get('user', {}).get('login', 'No user found')\n    return (title, body, author)",
                "api = get_api(credentials)",
                "issue_url = pr_url.replace('/pull/', '/issues/')",
                "response = api.get(issue_url)",
                "data = response.json()",
                "title = data.get('title', 'No title found')",
                "body = data.get('body', 'No body content found')",
                "author = data.get('user', {}).get('login', 'No user found')",
                "return (title, body, author)"
            ]
        },
        {
            "id": "4",
            "type": "block",
            "statements": [
                "@staticmethod\ndef read_pr_changes(credentials: GithubCredentials, pr_url: str) -> str:\n    api = get_api(credentials)\n    files_url = prepare_pr_api_url(pr_url=pr_url, path='files')\n    response = api.get(files_url)\n    files = response.json()\n    changes = []\n    for file in files:\n        filename = file.get('filename')\n        patch = file.get('patch')\n        if filename and patch:\n            changes.append(f'File: {filename}\\n{patch}')\n    return '\\n\\n'.join(changes)",
                "api = get_api(credentials)",
                "files_url = prepare_pr_api_url(pr_url=pr_url, path='files')",
                "response = api.get(files_url)",
                "files = response.json()",
                "changes = []"
            ]
        },
        {
            "id": "5",
            "type": "block",
            "statements": [
                "file",
                "files"
            ]
        },
        {
            "id": "6",
            "type": "block",
            "statements": [
                "filename = file.get('filename')",
                "patch = file.get('patch')",
                "filename and patch"
            ]
        },
        {
            "id": "7",
            "type": "block",
            "statements": [
                "return '\\n\\n'.join(changes)"
            ]
        },
        {
            "id": "8",
            "type": "block",
            "statements": [
                "changes.append(f'File: {filename}\\n{patch}')"
            ]
        },
        {
            "id": "9",
            "type": "block",
            "statements": []
        },
        {
            "id": "10",
            "type": "block",
            "statements": []
        },
        {
            "id": "11",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    (title, body, author) = self.read_pr(credentials, input_data.pr_url)\n    yield ('title', title)\n    yield ('body', body)\n    yield ('author', author)\n    if input_data.include_pr_changes:\n        changes = self.read_pr_changes(credentials, input_data.pr_url)\n        yield ('changes', changes)",
                "(title, body, author) = self.read_pr(credentials, input_data.pr_url)",
                "(yield ('title', title))",
                "(yield ('body', body))",
                "(yield ('author', author))",
                "input_data.include_pr_changes"
            ]
        },
        {
            "id": "12",
            "type": "block",
            "statements": [
                "changes = self.read_pr_changes(credentials, input_data.pr_url)",
                "(yield ('changes', changes))"
            ]
        },
        {
            "id": "13",
            "type": "block",
            "statements": []
        },
        {
            "id": "14",
            "type": "block",
            "statements": [
                "class GithubAssignPRReviewerBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n        reviewer: str = SchemaField(description='Username of the reviewer to assign', placeholder=\"Enter the reviewer's username\")\n\n    class Output(BlockSchema):\n        status: str = SchemaField(description='Status of the reviewer assignment operation')\n        error: str = SchemaField(description='Error message if the reviewer assignment failed')\n\n    def __init__(self):\n        super().__init__(id='c0d22c5e-e688-43e3-ba43-d5faba7927fd', description='This block assigns a reviewer to a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubAssignPRReviewerBlock.Input, output_schema=GithubAssignPRReviewerBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'reviewer': 'reviewer_username', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('status', 'Reviewer assigned successfully')], test_mock={'assign_reviewer': lambda *args, **kwargs: 'Reviewer assigned successfully'})\n\n    @staticmethod\n    def assign_reviewer(credentials: GithubCredentials, pr_url: str, reviewer: str) -> str:\n        api = get_api(credentials)\n        reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n        data = {'reviewers': [reviewer]}\n        api.post(reviewers_url, json=data)\n        return 'Reviewer assigned successfully'\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        try:\n            status = self.assign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n            yield ('status', status)\n        except Exception as e:\n            yield ('error', str(e))",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n    reviewer: str = SchemaField(description='Username of the reviewer to assign', placeholder=\"Enter the reviewer's username\")",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')",
                "reviewer: str = SchemaField(description='Username of the reviewer to assign', placeholder=\"Enter the reviewer's username\")",
                "class Output(BlockSchema):\n    status: str = SchemaField(description='Status of the reviewer assignment operation')\n    error: str = SchemaField(description='Error message if the reviewer assignment failed')",
                "status: str = SchemaField(description='Status of the reviewer assignment operation')",
                "error: str = SchemaField(description='Error message if the reviewer assignment failed')",
                "def __init__(self):\n    super().__init__(id='c0d22c5e-e688-43e3-ba43-d5faba7927fd', description='This block assigns a reviewer to a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubAssignPRReviewerBlock.Input, output_schema=GithubAssignPRReviewerBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'reviewer': 'reviewer_username', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('status', 'Reviewer assigned successfully')], test_mock={'assign_reviewer': lambda *args, **kwargs: 'Reviewer assigned successfully'})",
                "super().__init__()",
                "@staticmethod\ndef assign_reviewer(credentials: GithubCredentials, pr_url: str, reviewer: str) -> str:\n    api = get_api(credentials)\n    reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n    data = {'reviewers': [reviewer]}\n    api.post(reviewers_url, json=data)\n    return 'Reviewer assigned successfully'",
                "api = get_api(credentials)",
                "reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')",
                "data = {'reviewers': [reviewer]}",
                "api.post(reviewers_url)",
                "return 'Reviewer assigned successfully'"
            ]
        },
        {
            "id": "15",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    try:\n        status = self.assign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n        yield ('status', status)\n    except Exception as e:\n        yield ('error', str(e))",
                "try:\n    status = self.assign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n    yield ('status', status)\nexcept Exception as e:\n    yield ('error', str(e))",
                "status = self.assign_reviewer(credentials, input_data.pr_url, input_data.reviewer)",
                "(yield ('status', status))",
                "(yield ('error', str(e)))",
                "class GithubUnassignPRReviewerBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n        reviewer: str = SchemaField(description='Username of the reviewer to unassign', placeholder=\"Enter the reviewer's username\")\n\n    class Output(BlockSchema):\n        status: str = SchemaField(description='Status of the reviewer unassignment operation')\n        error: str = SchemaField(description='Error message if the reviewer unassignment failed')\n\n    def __init__(self):\n        super().__init__(id='9637945d-c602-4875-899a-9c22f8fd30de', description='This block unassigns a reviewer from a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubUnassignPRReviewerBlock.Input, output_schema=GithubUnassignPRReviewerBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'reviewer': 'reviewer_username', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('status', 'Reviewer unassigned successfully')], test_mock={'unassign_reviewer': lambda *args, **kwargs: 'Reviewer unassigned successfully'})\n\n    @staticmethod\n    def unassign_reviewer(credentials: GithubCredentials, pr_url: str, reviewer: str) -> str:\n        api = get_api(credentials)\n        reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n        data = {'reviewers': [reviewer]}\n        api.delete(reviewers_url, json=data)\n        return 'Reviewer unassigned successfully'\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        try:\n            status = self.unassign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n            yield ('status', status)\n        except Exception as e:\n            yield ('error', str(e))",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n    reviewer: str = SchemaField(description='Username of the reviewer to unassign', placeholder=\"Enter the reviewer's username\")",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')",
                "reviewer: str = SchemaField(description='Username of the reviewer to unassign', placeholder=\"Enter the reviewer's username\")",
                "class Output(BlockSchema):\n    status: str = SchemaField(description='Status of the reviewer unassignment operation')\n    error: str = SchemaField(description='Error message if the reviewer unassignment failed')",
                "status: str = SchemaField(description='Status of the reviewer unassignment operation')",
                "error: str = SchemaField(description='Error message if the reviewer unassignment failed')",
                "def __init__(self):\n    super().__init__(id='9637945d-c602-4875-899a-9c22f8fd30de', description='This block unassigns a reviewer from a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubUnassignPRReviewerBlock.Input, output_schema=GithubUnassignPRReviewerBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'reviewer': 'reviewer_username', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('status', 'Reviewer unassigned successfully')], test_mock={'unassign_reviewer': lambda *args, **kwargs: 'Reviewer unassigned successfully'})",
                "super().__init__()",
                "@staticmethod\ndef unassign_reviewer(credentials: GithubCredentials, pr_url: str, reviewer: str) -> str:\n    api = get_api(credentials)\n    reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n    data = {'reviewers': [reviewer]}\n    api.delete(reviewers_url, json=data)\n    return 'Reviewer unassigned successfully'",
                "api = get_api(credentials)",
                "reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')",
                "data = {'reviewers': [reviewer]}",
                "api.delete(reviewers_url)",
                "return 'Reviewer unassigned successfully'"
            ]
        },
        {
            "id": "16",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    try:\n        status = self.unassign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n        yield ('status', status)\n    except Exception as e:\n        yield ('error', str(e))",
                "try:\n    status = self.unassign_reviewer(credentials, input_data.pr_url, input_data.reviewer)\n    yield ('status', status)\nexcept Exception as e:\n    yield ('error', str(e))",
                "status = self.unassign_reviewer(credentials, input_data.pr_url, input_data.reviewer)",
                "(yield ('status', status))",
                "(yield ('error', str(e)))",
                "class GithubListPRReviewersBlock(Block):\n\n    class Input(BlockSchema):\n        credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n        pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')\n\n    class Output(BlockSchema):\n\n        class ReviewerItem(TypedDict):\n            username: str\n            url: str\n        reviewer: ReviewerItem = SchemaField(title='Reviewer', description='Reviewers with their username and profile URL')\n        error: str = SchemaField(description='Error message if listing reviewers failed')\n\n    def __init__(self):\n        super().__init__(id='2646956e-96d5-4754-a3df-034017e7ed96', description='This block lists all reviewers for a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubListPRReviewersBlock.Input, output_schema=GithubListPRReviewersBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('reviewer', {'username': 'reviewer1', 'url': 'https://github.com/reviewer1'})], test_mock={'list_reviewers': lambda *args, **kwargs: [{'username': 'reviewer1', 'url': 'https://github.com/reviewer1'}]})\n\n    @staticmethod\n    def list_reviewers(credentials: GithubCredentials, pr_url: str) -> list[Output.ReviewerItem]:\n        api = get_api(credentials)\n        reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n        response = api.get(reviewers_url)\n        data = response.json()\n        reviewers: list[GithubListPRReviewersBlock.Output.ReviewerItem] = [{'username': reviewer['login'], 'url': reviewer['html_url']} for reviewer in data.get('users', [])]\n        return reviewers\n\n    def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n        reviewers = self.list_reviewers(credentials, input_data.pr_url)\n        yield from (('reviewer', reviewer) for reviewer in reviewers)",
                "class Input(BlockSchema):\n    credentials: GithubCredentialsInput = GithubCredentialsField('repo')\n    pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')",
                "credentials: GithubCredentialsInput = GithubCredentialsField('repo')",
                "pr_url: str = SchemaField(description='URL of the GitHub pull request', placeholder='https://github.com/owner/repo/pull/1')",
                "class Output(BlockSchema):\n\n    class ReviewerItem(TypedDict):\n        username: str\n        url: str\n    reviewer: ReviewerItem = SchemaField(title='Reviewer', description='Reviewers with their username and profile URL')\n    error: str = SchemaField(description='Error message if listing reviewers failed')",
                "class ReviewerItem(TypedDict):\n    username: str\n    url: str",
                "username: str",
                "url: str",
                "reviewer: ReviewerItem = SchemaField(title='Reviewer', description='Reviewers with their username and profile URL')",
                "error: str = SchemaField(description='Error message if listing reviewers failed')",
                "def __init__(self):\n    super().__init__(id='2646956e-96d5-4754-a3df-034017e7ed96', description='This block lists all reviewers for a specified GitHub pull request.', categories={BlockCategory.DEVELOPER_TOOLS}, input_schema=GithubListPRReviewersBlock.Input, output_schema=GithubListPRReviewersBlock.Output, test_input={'pr_url': 'https://github.com/owner/repo/pull/1', 'credentials': TEST_CREDENTIALS_INPUT}, test_credentials=TEST_CREDENTIALS, test_output=[('reviewer', {'username': 'reviewer1', 'url': 'https://github.com/reviewer1'})], test_mock={'list_reviewers': lambda *args, **kwargs: [{'username': 'reviewer1', 'url': 'https://github.com/reviewer1'}]})",
                "super().__init__()",
                "@staticmethod\ndef list_reviewers(credentials: GithubCredentials, pr_url: str) -> list[Output.ReviewerItem]:\n    api = get_api(credentials)\n    reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')\n    response = api.get(reviewers_url)\n    data = response.json()\n    reviewers: list[GithubListPRReviewersBlock.Output.ReviewerItem] = [{'username': reviewer['login'], 'url': reviewer['html_url']} for reviewer in data.get('users', [])]\n    return reviewers",
                "api = get_api(credentials)",
                "reviewers_url = prepare_pr_api_url(pr_url=pr_url, path='requested_reviewers')",
                "response = api.get(reviewers_url)",
                "data = response.json()",
                "reviewers: list[GithubListPRReviewersBlock.Output.ReviewerItem] = [{'username': reviewer['login'], 'url': reviewer['html_url']} for reviewer in data.get('users', [])]",
                "return reviewers"
            ]
        },
        {
            "id": "17",
            "type": "block",
            "statements": [
                "def run(self, input_data: Input, *, credentials: GithubCredentials, **kwargs) -> BlockOutput:\n    reviewers = self.list_reviewers(credentials, input_data.pr_url)\n    yield from (('reviewer', reviewer) for reviewer in reviewers)",
                "reviewers = self.list_reviewers(credentials, input_data.pr_url)",
                "(yield from (('reviewer', reviewer) for reviewer in reviewers))",
                "def prepare_pr_api_url(pr_url: str, path: str) -> str:\n    pattern = '^(?:https?://)?([^/]+/[^/]+/[^/]+)/pull/(\\\\d+)'\n    match = re.match(pattern, pr_url)\n    if not match:\n        return pr_url\n    (base_url, pr_number) = match.groups()\n    return f'{base_url}/pulls/{pr_number}/{path}'",
                "pattern = '^(?:https?://)?([^/]+/[^/]+/[^/]+)/pull/(\\\\d+)'",
                "match = re.match(pattern, pr_url)",
                "not match"
            ]
        },
        {
            "id": "18",
            "type": "block",
            "statements": [
                "return pr_url"
            ]
        },
        {
            "id": "19",
            "type": "block",
            "statements": []
        },
        {
            "id": "20",
            "type": "block",
            "statements": [
                "(base_url, pr_number) = match.groups()",
                "return f'{base_url}/pulls/{pr_number}/{path}'"
            ]
        }
    ],
    "edges": [
        {
            "source": "4",
            "target": "5",
            "type": "next"
        },
        {
            "source": "5",
            "target": "6",
            "type": "true"
        },
        {
            "source": "5",
            "target": "7",
            "type": "false"
        },
        {
            "source": "6",
            "target": "8",
            "type": "true"
        },
        {
            "source": "6",
            "target": "9",
            "type": "false"
        },
        {
            "source": "8",
            "target": "10",
            "type": "next"
        },
        {
            "source": "9",
            "target": "10",
            "type": "next"
        },
        {
            "source": "10",
            "target": "5",
            "type": "next"
        },
        {
            "source": "11",
            "target": "12",
            "type": "true"
        },
        {
            "source": "11",
            "target": "13",
            "type": "false"
        },
        {
            "source": "12",
            "target": "14",
            "type": "next"
        },
        {
            "source": "13",
            "target": "14",
            "type": "next"
        },
        {
            "source": "17",
            "target": "18",
            "type": "true"
        },
        {
            "source": "17",
            "target": "19",
            "type": "false"
        },
        {
            "source": "19",
            "target": "20",
            "type": "next"
        }
    ]
}