{
    "nodes": [
        {
            "id": "chunk_0_GlobalBlock_1",
            "code": "import pytest\n"
        },
        {
            "id": "chunk_0_GlobalBlock_2",
            "code": "from backend.util.service import AppService, expose, get_service_client\n"
        },
        {
            "id": "chunk_0_GlobalBlock_3",
            "code": "TEST_SERVICE_PORT = 8765\n"
        },
        {
            "id": "chunk_1_ServiceTest_1",
            "code": "class ServiceTest(AppService):\n"
        },
        {
            "id": "chunk_1_ServiceTest_2",
            "code": "    def __init__(self):\n        super().__init__()\n"
        },
        {
            "id": "chunk_1_ServiceTest_3",
            "code": "    @classmethod\n    def get_port(cls) -> int:\n        return TEST_SERVICE_PORT\n"
        },
        {
            "id": "chunk_1_ServiceTest_4",
            "code": "    @expose\n    def add(self, a: int, b: int) -> int:\n        return a + b\n"
        },
        {
            "id": "chunk_1_ServiceTest_5",
            "code": "    @expose\n    def subtract(self, a: int, b: int) -> int:\n        return a - b\n"
        },
        {
            "id": "chunk_1_ServiceTest_6",
            "code": "    @expose\n    def fun_with_async(self, a: int, b: int) -> int:\n        async def add_async(a: int, b: int) -> int:\n            return a + b\n\n        return self.run_and_wait(add_async(a, b))\n"
        },
        {
            "id": "chunk_2_test_service_creation_1",
            "code": "@pytest.mark.asyncio(scope=\"session\")\nasync def test_service_creation(server):\n"
        },
        {
            "id": "chunk_2_test_service_creation_2",
            "code": "    with ServiceTest():\n        client = get_service_client(ServiceTest)\n        assert client.add(5, 3) == 8\n        assert client.subtract(10, 4) == 6\n        assert client.fun_with_async(5, 3) == 8\n"
        }
    ],
    "edges": [
        {
            "from": "chunk_0_GlobalBlock_1",
            "to": "chunk_0_GlobalBlock_2"
        },
        {
            "from": "chunk_0_GlobalBlock_2",
            "to": "chunk_0_GlobalBlock_3"
        },
        {
            "from": "chunk_1_ServiceTest_1",
            "to": "chunk_1_ServiceTest_2"
        },
        {
            "from": "chunk_1_ServiceTest_2",
            "to": "chunk_1_ServiceTest_3"
        },
        {
            "from": "chunk_1_ServiceTest_3",
            "to": "chunk_1_ServiceTest_4"
        },
        {
            "from": "chunk_1_ServiceTest_4",
            "to": "chunk_1_ServiceTest_5"
        },
        {
            "from": "chunk_1_ServiceTest_5",
            "to": "chunk_1_ServiceTest_6"
        },
        {
            "from": "chunk_2_test_service_creation_1",
            "to": "chunk_2_test_service_creation_2"
        }
    ]
}