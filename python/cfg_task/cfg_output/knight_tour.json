{
  "nodes": [
    {
      "id": "1",
      "type": "block",
      "statements": [
        "from __future__ import annotations",
        "def get_valid_pos(position: tuple[int, int], n: int) -> list[tuple[int, int]]:\n    \"\"\"\n    Find all the valid positions a knight can move to from the current position.\n\n    >>> get_valid_pos((1, 3), 4)\n    [(2, 1), (0, 1), (3, 2)]\n    \"\"\"\n    (y, x) = position\n    positions = [(y + 1, x + 2), (y - 1, x + 2), (y + 1, x - 2), (y - 1, x - 2), (y + 2, x + 1), (y + 2, x - 1), (y - 2, x + 1), (y - 2, x - 1)]\n    permissible_positions = []\n    for inner_position in positions:\n        (y_test, x_test) = inner_position\n        if 0 <= y_test < n and 0 <= x_test < n:\n            permissible_positions.append(inner_position)\n    return permissible_positions",
        "'\\n    Find all the valid positions a knight can move to from the current position.\\n\\n    >>> get_valid_pos((1, 3), 4)\\n    [(2, 1), (0, 1), (3, 2)]\\n    '",
        "(y, x) = position",
        "positions = [(y + 1, x + 2), (y - 1, x + 2), (y + 1, x - 2), (y - 1, x - 2), (y + 2, x + 1), (y + 2, x - 1), (y - 2, x + 1), (y - 2, x - 1)]",
        "permissible_positions = []"
      ]
    },
    {
      "id": "2",
      "type": "block",
      "statements": [
        "inner_position",
        "positions"
      ]
    },
    {
      "id": "3",
      "type": "block",
      "statements": [
        "(y_test, x_test) = inner_position",
        "0 <= y_test < n and 0 <= x_test < n"
      ]
    },
    {
      "id": "4",
      "type": "block",
      "statements": [
        "return permissible_positions"
      ]
    },
    {
      "id": "5",
      "type": "block",
      "statements": [
        "permissible_positions.append(inner_position)"
      ]
    },
    {
      "id": "6",
      "type": "block",
      "statements": []
    },
    {
      "id": "7",
      "type": "block",
      "statements": []
    },
    {
      "id": "8",
      "type": "block",
      "statements": [
        "def is_complete(board: list[list[int]]) -> bool:\n    \"\"\"\n    Check if the board (matrix) has been completely filled with non-zero values.\n\n    >>> is_complete([[1]])\n    True\n\n    >>> is_complete([[1, 2], [3, 0]])\n    False\n    \"\"\"\n    return not any((elem == 0 for row in board for elem in row))",
        "'\\n    Check if the board (matrix) has been completely filled with non-zero values.\\n\\n    >>> is_complete([[1]])\\n    True\\n\\n    >>> is_complete([[1, 2], [3, 0]])\\n    False\\n    '",
        "return not any((elem == 0 for row in board for elem in row))"
      ]
    },
    {
      "id": "9",
      "type": "block",
      "statements": [
        "def open_knight_tour_helper(board: list[list[int]], pos: tuple[int, int], curr: int) -> bool:\n    \"\"\"\n    Helper function to solve knight tour problem.\n    \"\"\"\n    if is_complete(board):\n        return True\n    for position in get_valid_pos(pos, len(board)):\n        (y, x) = position\n        if board[y][x] == 0:\n            board[y][x] = curr + 1\n            if open_knight_tour_helper(board, position, curr + 1):\n                return True\n            board[y][x] = 0\n    return False",
        "'\\n    Helper function to solve knight tour problem.\\n    '",
        "is_complete(board)"
      ]
    },
    {
      "id": "10",
      "type": "block",
      "statements": [
        "return True"
      ]
    },
    {
      "id": "11",
      "type": "block",
      "statements": []
    },
    {
      "id": "12",
      "type": "block",
      "statements": []
    },
    {
      "id": "13",
      "type": "block",
      "statements": [
        "position",
        "get_valid_pos(pos, len(board))"
      ]
    },
    {
      "id": "14",
      "type": "block",
      "statements": [
        "(y, x) = position",
        "board[y][x] Eq 0"
      ]
    },
    {
      "id": "15",
      "type": "block",
      "statements": [
        "return False"
      ]
    },
    {
      "id": "16",
      "type": "block",
      "statements": [
        "board[y][x] = curr + 1",
        "open_knight_tour_helper(board, position, curr Add 1)"
      ]
    },
    {
      "id": "17",
      "type": "block",
      "statements": []
    },
    {
      "id": "18",
      "type": "block",
      "statements": []
    },
    {
      "id": "19",
      "type": "block",
      "statements": [
        "return True"
      ]
    },
    {
      "id": "20",
      "type": "block",
      "statements": []
    },
    {
      "id": "21",
      "type": "block",
      "statements": [
        "board[y][x] = 0"
      ]
    },
    {
      "id": "22",
      "type": "block",
      "statements": [
        "def open_knight_tour(n: int) -> list[list[int]]:\n    \"\"\"\n    Find the solution for the knight tour problem for a board of size n. Raises\n    ValueError if the tour cannot be performed for the given size.\n\n    >>> open_knight_tour(1)\n    [[1]]\n\n    >>> open_knight_tour(2)\n    Traceback (most recent call last):\n        ...\n    ValueError: Open Knight Tour cannot be performed on a board of size 2\n    \"\"\"\n    board = [[0 for i in range(n)] for j in range(n)]\n    for i in range(n):\n        for j in range(n):\n            board[i][j] = 1\n            if open_knight_tour_helper(board, (i, j), 1):\n                return board\n            board[i][j] = 0\n    msg = f'Open Knight Tour cannot be performed on a board of size {n}'\n    raise ValueError(msg)",
        "'\\n    Find the solution for the knight tour problem for a board of size n. Raises\\n    ValueError if the tour cannot be performed for the given size.\\n\\n    >>> open_knight_tour(1)\\n    [[1]]\\n\\n    >>> open_knight_tour(2)\\n    Traceback (most recent call last):\\n        ...\\n    ValueError: Open Knight Tour cannot be performed on a board of size 2\\n    '",
        "board = [[0 for i in range(n)] for j in range(n)]"
      ]
    },
    {
      "id": "23",
      "type": "block",
      "statements": [
        "i",
        "range(n)"
      ]
    },
    {
      "id": "24",
      "type": "block",
      "statements": []
    },
    {
      "id": "25",
      "type": "block",
      "statements": [
        "msg = f'Open Knight Tour cannot be performed on a board of size {n}'",
        "raise ValueError(msg)",
        "__name__ Eq '__main__'"
      ]
    },
    {
      "id": "26",
      "type": "block",
      "statements": [
        "j",
        "range(n)"
      ]
    },
    {
      "id": "27",
      "type": "block",
      "statements": [
        "board[i][j] = 1",
        "open_knight_tour_helper(board, (i, j), 1)"
      ]
    },
    {
      "id": "28",
      "type": "block",
      "statements": []
    },
    {
      "id": "29",
      "type": "block",
      "statements": [
        "return board"
      ]
    },
    {
      "id": "30",
      "type": "block",
      "statements": []
    },
    {
      "id": "31",
      "type": "block",
      "statements": [
        "board[i][j] = 0"
      ]
    },
    {
      "id": "32",
      "type": "block",
      "statements": [
        "import doctest",
        "doctest.testmod()"
      ]
    },
    {
      "id": "33",
      "type": "block",
      "statements": []
    },
    {
      "id": "34",
      "type": "block",
      "statements": []
    }
  ],
  "edges": [
    {
      "source": "1",
      "target": "2",
      "type": "next"
    },
    {
      "source": "2",
      "target": "3",
      "type": "true"
    },
    {
      "source": "2",
      "target": "4",
      "type": "false"
    },
    {
      "source": "3",
      "target": "5",
      "type": "true"
    },
    {
      "source": "3",
      "target": "6",
      "type": "false"
    },
    {
      "source": "5",
      "target": "7",
      "type": "next"
    },
    {
      "source": "6",
      "target": "7",
      "type": "next"
    },
    {
      "source": "7",
      "target": "2",
      "type": "next"
    },
    {
      "source": "9",
      "target": "10",
      "type": "true"
    },
    {
      "source": "9",
      "target": "11",
      "type": "false"
    },
    {
      "source": "11",
      "target": "12",
      "type": "next"
    },
    {
      "source": "12",
      "target": "13",
      "type": "next"
    },
    {
      "source": "13",
      "target": "14",
      "type": "true"
    },
    {
      "source": "13",
      "target": "15",
      "type": "false"
    },
    {
      "source": "14",
      "target": "16",
      "type": "true"
    },
    {
      "source": "14",
      "target": "17",
      "type": "false"
    },
    {
      "source": "16",
      "target": "19",
      "type": "true"
    },
    {
      "source": "16",
      "target": "20",
      "type": "false"
    },
    {
      "source": "17",
      "target": "18",
      "type": "next"
    },
    {
      "source": "18",
      "target": "13",
      "type": "next"
    },
    {
      "source": "20",
      "target": "21",
      "type": "next"
    },
    {
      "source": "21",
      "target": "18",
      "type": "next"
    },
    {
      "source": "22",
      "target": "23",
      "type": "next"
    },
    {
      "source": "23",
      "target": "24",
      "type": "true"
    },
    {
      "source": "23",
      "target": "25",
      "type": "false"
    },
    {
      "source": "24",
      "target": "26",
      "type": "next"
    },
    {
      "source": "25",
      "target": "32",
      "type": "true"
    },
    {
      "source": "25",
      "target": "33",
      "type": "false"
    },
    {
      "source": "26",
      "target": "27",
      "type": "true"
    },
    {
      "source": "26",
      "target": "28",
      "type": "false"
    },
    {
      "source": "27",
      "target": "29",
      "type": "true"
    },
    {
      "source": "27",
      "target": "30",
      "type": "false"
    },
    {
      "source": "28",
      "target": "23",
      "type": "next"
    },
    {
      "source": "30",
      "target": "31",
      "type": "next"
    },
    {
      "source": "31",
      "target": "26",
      "type": "next"
    },
    {
      "source": "32",
      "target": "34",
      "type": "next"
    },
    {
      "source": "33",
      "target": "34",
      "type": "next"
    }
  ]
}