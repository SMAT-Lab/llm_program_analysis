{
  "nodes": [
    {
      "id": "1",
      "type": "block",
      "statements": [
        "import operator",
        "from enum import Enum",
        "from typing import Any",
        "from backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema",
        "from backend.data.model import SchemaField",
        "class Operation(Enum):\n    ADD = 'Add'\n    SUBTRACT = 'Subtract'\n    MULTIPLY = 'Multiply'\n    DIVIDE = 'Divide'\n    POWER = 'Power'",
        "ADD = 'Add'",
        "SUBTRACT = 'Subtract'",
        "MULTIPLY = 'Multiply'",
        "DIVIDE = 'Divide'",
        "POWER = 'Power'",
        "class CalculatorBlock(Block):\n\n    class Input(BlockSchema):\n        operation: Operation = SchemaField(description='Choose the math operation you want to perform', placeholder='Select an operation')\n        a: float = SchemaField(description='Enter the first number (A)', placeholder='For example: 10')\n        b: float = SchemaField(description='Enter the second number (B)', placeholder='For example: 5')\n        round_result: bool = SchemaField(description='Do you want to round the result to a whole number?', default=False)\n\n    class Output(BlockSchema):\n        result: float = SchemaField(description='The result of your calculation')\n\n    def __init__(self):\n        super().__init__(id='b1ab9b19-67a6-406d-abf5-2dba76d00c79', input_schema=CalculatorBlock.Input, output_schema=CalculatorBlock.Output, description='Performs a mathematical operation on two numbers.', categories={BlockCategory.LOGIC}, test_input={'operation': Operation.ADD.value, 'a': 10.0, 'b': 5.0, 'round_result': False}, test_output=[('result', 15.0)])\n\n    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        operation = input_data.operation\n        a = input_data.a\n        b = input_data.b\n        operations = {Operation.ADD: operator.add, Operation.SUBTRACT: operator.sub, Operation.MULTIPLY: operator.mul, Operation.DIVIDE: operator.truediv, Operation.POWER: operator.pow}\n        op_func = operations[operation]\n        try:\n            if operation == Operation.DIVIDE and b == 0:\n                raise ZeroDivisionError('Cannot divide by zero')\n            result = op_func(a, b)\n            if input_data.round_result:\n                result = round(result)\n            yield ('result', result)\n        except ZeroDivisionError:\n            yield ('result', float('inf'))\n        except Exception:\n            yield ('result', float('nan'))",
        "class Input(BlockSchema):\n    operation: Operation = SchemaField(description='Choose the math operation you want to perform', placeholder='Select an operation')\n    a: float = SchemaField(description='Enter the first number (A)', placeholder='For example: 10')\n    b: float = SchemaField(description='Enter the second number (B)', placeholder='For example: 5')\n    round_result: bool = SchemaField(description='Do you want to round the result to a whole number?', default=False)",
        "operation: Operation = SchemaField(description='Choose the math operation you want to perform', placeholder='Select an operation')",
        "a: float = SchemaField(description='Enter the first number (A)', placeholder='For example: 10')",
        "b: float = SchemaField(description='Enter the second number (B)', placeholder='For example: 5')",
        "round_result: bool = SchemaField(description='Do you want to round the result to a whole number?', default=False)",
        "class Output(BlockSchema):\n    result: float = SchemaField(description='The result of your calculation')",
        "result: float = SchemaField(description='The result of your calculation')",
        "def __init__(self):\n    super().__init__(id='b1ab9b19-67a6-406d-abf5-2dba76d00c79', input_schema=CalculatorBlock.Input, output_schema=CalculatorBlock.Output, description='Performs a mathematical operation on two numbers.', categories={BlockCategory.LOGIC}, test_input={'operation': Operation.ADD.value, 'a': 10.0, 'b': 5.0, 'round_result': False}, test_output=[('result', 15.0)])",
        "super().__init__()",
        "def run(self, input_data: Input, **kwargs) -> BlockOutput:\n    operation = input_data.operation\n    a = input_data.a\n    b = input_data.b\n    operations = {Operation.ADD: operator.add, Operation.SUBTRACT: operator.sub, Operation.MULTIPLY: operator.mul, Operation.DIVIDE: operator.truediv, Operation.POWER: operator.pow}\n    op_func = operations[operation]\n    try:\n        if operation == Operation.DIVIDE and b == 0:\n            raise ZeroDivisionError('Cannot divide by zero')\n        result = op_func(a, b)\n        if input_data.round_result:\n            result = round(result)\n        yield ('result', result)\n    except ZeroDivisionError:\n        yield ('result', float('inf'))\n    except Exception:\n        yield ('result', float('nan'))",
        "operation = input_data.operation",
        "a = input_data.a",
        "b = input_data.b",
        "operations = {Operation.ADD: operator.add, Operation.SUBTRACT: operator.sub, Operation.MULTIPLY: operator.mul, Operation.DIVIDE: operator.truediv, Operation.POWER: operator.pow}",
        "op_func = operations[operation]",
        "try:\n    if operation == Operation.DIVIDE and b == 0:\n        raise ZeroDivisionError('Cannot divide by zero')\n    result = op_func(a, b)\n    if input_data.round_result:\n        result = round(result)\n    yield ('result', result)\nexcept ZeroDivisionError:\n    yield ('result', float('inf'))\nexcept Exception:\n    yield ('result', float('nan'))",
        "operation == Operation.DIVIDE and b == 0"
      ]
    },
    {
      "id": "2",
      "type": "block",
      "statements": [
        "raise ZeroDivisionError('Cannot divide by zero')"
      ]
    },
    {
      "id": "3",
      "type": "block",
      "statements": []
    },
    {
      "id": "4",
      "type": "block",
      "statements": [
        "result = op_func(a, b)",
        "input_data.round_result"
      ]
    },
    {
      "id": "5",
      "type": "block",
      "statements": [
        "result = round(result)"
      ]
    },
    {
      "id": "6",
      "type": "block",
      "statements": []
    },
    {
      "id": "7",
      "type": "block",
      "statements": [
        "(yield ('result', result))",
        "(yield ('result', float('inf')))",
        "(yield ('result', float('nan')))",
        "class CountItemsBlock(Block):\n\n    class Input(BlockSchema):\n        collection: Any = SchemaField(description='Enter the collection you want to count. This can be a list, dictionary, string, or any other iterable.', placeholder=\"For example: [1, 2, 3] or {'a': 1, 'b': 2} or 'hello'\")\n\n    class Output(BlockSchema):\n        count: int = SchemaField(description='The number of items in the collection')\n\n    def __init__(self):\n        super().__init__(id='3c9c2f42-b0c3-435f-ba35-05f7a25c772a', input_schema=CountItemsBlock.Input, output_schema=CountItemsBlock.Output, description='Counts the number of items in a collection.', categories={BlockCategory.LOGIC}, test_input={'collection': [1, 2, 3, 4, 5]}, test_output=[('count', 5)])\n\n    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        collection = input_data.collection\n        try:\n            if isinstance(collection, (str, list, tuple, set, dict)):\n                count = len(collection)\n            elif hasattr(collection, '__iter__'):\n                count = sum((1 for _ in collection))\n            else:\n                raise ValueError('Input is not a countable collection')\n            yield ('count', count)\n        except Exception:\n            yield ('count', -1)",
        "class Input(BlockSchema):\n    collection: Any = SchemaField(description='Enter the collection you want to count. This can be a list, dictionary, string, or any other iterable.', placeholder=\"For example: [1, 2, 3] or {'a': 1, 'b': 2} or 'hello'\")",
        "collection: Any = SchemaField(description='Enter the collection you want to count. This can be a list, dictionary, string, or any other iterable.', placeholder=\"For example: [1, 2, 3] or {'a': 1, 'b': 2} or 'hello'\")",
        "class Output(BlockSchema):\n    count: int = SchemaField(description='The number of items in the collection')",
        "count: int = SchemaField(description='The number of items in the collection')",
        "def __init__(self):\n    super().__init__(id='3c9c2f42-b0c3-435f-ba35-05f7a25c772a', input_schema=CountItemsBlock.Input, output_schema=CountItemsBlock.Output, description='Counts the number of items in a collection.', categories={BlockCategory.LOGIC}, test_input={'collection': [1, 2, 3, 4, 5]}, test_output=[('count', 5)])",
        "super().__init__()",
        "def run(self, input_data: Input, **kwargs) -> BlockOutput:\n    collection = input_data.collection\n    try:\n        if isinstance(collection, (str, list, tuple, set, dict)):\n            count = len(collection)\n        elif hasattr(collection, '__iter__'):\n            count = sum((1 for _ in collection))\n        else:\n            raise ValueError('Input is not a countable collection')\n        yield ('count', count)\n    except Exception:\n        yield ('count', -1)",
        "collection = input_data.collection",
        "try:\n    if isinstance(collection, (str, list, tuple, set, dict)):\n        count = len(collection)\n    elif hasattr(collection, '__iter__'):\n        count = sum((1 for _ in collection))\n    else:\n        raise ValueError('Input is not a countable collection')\n    yield ('count', count)\nexcept Exception:\n    yield ('count', -1)",
        "isinstance(collection, (str, list, tuple, set, dict))"
      ]
    },
    {
      "id": "8",
      "type": "block",
      "statements": [
        "count = len(collection)"
      ]
    },
    {
      "id": "9",
      "type": "block",
      "statements": [
        "hasattr(collection, '__iter__')"
      ]
    },
    {
      "id": "10",
      "type": "block",
      "statements": [
        "(yield ('count', count))",
        "(yield ('count', -1))"
      ]
    },
    {
      "id": "11",
      "type": "block",
      "statements": [
        "count = sum((1 for _ in collection))"
      ]
    },
    {
      "id": "12",
      "type": "block",
      "statements": [
        "raise ValueError('Input is not a countable collection')"
      ]
    },
    {
      "id": "13",
      "type": "block",
      "statements": []
    }
  ],
  "edges": [
    {
      "source": "1",
      "target": "2",
      "type": "true"
    },
    {
      "source": "1",
      "target": "3",
      "type": "false"
    },
    {
      "source": "2",
      "target": "4",
      "type": "next"
    },
    {
      "source": "3",
      "target": "4",
      "type": "next"
    },
    {
      "source": "4",
      "target": "5",
      "type": "true"
    },
    {
      "source": "4",
      "target": "6",
      "type": "false"
    },
    {
      "source": "5",
      "target": "7",
      "type": "next"
    },
    {
      "source": "6",
      "target": "7",
      "type": "next"
    },
    {
      "source": "7",
      "target": "8",
      "type": "true"
    },
    {
      "source": "7",
      "target": "9",
      "type": "false"
    },
    {
      "source": "8",
      "target": "10",
      "type": "next"
    },
    {
      "source": "9",
      "target": "11",
      "type": "true"
    },
    {
      "source": "9",
      "target": "12",
      "type": "false"
    },
    {
      "source": "11",
      "target": "13",
      "type": "next"
    },
    {
      "source": "12",
      "target": "13",
      "type": "next"
    },
    {
      "source": "13",
      "target": "10",
      "type": "next"
    }
  ]
}