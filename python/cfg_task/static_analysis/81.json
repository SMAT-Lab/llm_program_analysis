{
  "nodes": [
    {
      "id": "n0",
      "type": "block",
      "statements": [
        "import pytest",
        "from backend.util.service import AppService, expose, get_service_client",
        "TEST_SERVICE_PORT = 8765",
        "class ServiceTest(AppService):\n\n    def __init__(self):\n        super().__init__()\n\n    @classmethod\n    def get_port(cls) -> int:\n        return TEST_SERVICE_PORT\n\n    @expose\n    def add(self, a: int, b: int) -> int:\n        return a + b\n\n    @expose\n    def subtract(self, a: int, b: int) -> int:\n        return a - b\n\n    @expose\n    def fun_with_async(self, a: int, b: int) -> int:\n\n        async def add_async(a: int, b: int) -> int:\n            return a + b\n        return self.run_and_wait(add_async(a, b))",
        "def __init__(self):\n    super().__init__()",
        "super().__init__()",
        "@classmethod\ndef get_port(cls) -> int:\n    return TEST_SERVICE_PORT",
        "return TEST_SERVICE_PORT"
      ],
      "code": "import pytest\nfrom backend.util.service import AppService, expose, get_service_client\nTEST_SERVICE_PORT = 8765\nclass ServiceTest(AppService):\n\n    def __init__(self):\n        super().__init__()\n\n    @classmethod\n    def get_port(cls) -> int:\n        return TEST_SERVICE_PORT\n\n    @expose\n    def add(self, a: int, b: int) -> int:\n        return a + b\n\n    @expose\n    def subtract(self, a: int, b: int) -> int:\n        return a - b\n\n    @expose\n    def fun_with_async(self, a: int, b: int) -> int:\n\n        async def add_async(a: int, b: int) -> int:\n            return a + b\n        return self.run_and_wait(add_async(a, b))\ndef __init__(self):\n    super().__init__()\nsuper().__init__()\n@classmethod\ndef get_port(cls) -> int:\n    return TEST_SERVICE_PORT\nreturn TEST_SERVICE_PORT"
    },
    {
      "id": "n1",
      "type": "block",
      "statements": [
        "@expose\ndef add(self, a: int, b: int) -> int:\n    return a + b",
        "return a + b"
      ],
      "code": "@expose\ndef add(self, a: int, b: int) -> int:\n    return a + b\nreturn a + b"
    },
    {
      "id": "n2",
      "type": "block",
      "statements": [
        "@expose\ndef subtract(self, a: int, b: int) -> int:\n    return a - b",
        "return a - b"
      ],
      "code": "@expose\ndef subtract(self, a: int, b: int) -> int:\n    return a - b\nreturn a - b"
    },
    {
      "id": "n3",
      "type": "block",
      "statements": [
        "@expose\ndef fun_with_async(self, a: int, b: int) -> int:\n\n    async def add_async(a: int, b: int) -> int:\n        return a + b\n    return self.run_and_wait(add_async(a, b))",
        "async def add_async(a: int, b: int) -> int:\n    return a + b",
        "return a + b"
      ],
      "code": "@expose\ndef fun_with_async(self, a: int, b: int) -> int:\n\n    async def add_async(a: int, b: int) -> int:\n        return a + b\n    return self.run_and_wait(add_async(a, b))\nasync def add_async(a: int, b: int) -> int:\n    return a + b\nreturn a + b"
    },
    {
      "id": "n4",
      "type": "block",
      "statements": [
        "return self.run_and_wait(add_async(a, b))"
      ],
      "code": "return self.run_and_wait(add_async(a, b))"
    },
    {
      "id": "n5",
      "type": "block",
      "statements": [
        "@pytest.mark.asyncio(scope='session')\nasync def test_service_creation(server):\n    with ServiceTest():\n        client = get_service_client(ServiceTest)\n        assert client.add(5, 3) == 8\n        assert client.subtract(10, 4) == 6\n        assert client.fun_with_async(5, 3) == 8",
        "with ServiceTest():\n    client = get_service_client(ServiceTest)\n    assert client.add(5, 3) == 8\n    assert client.subtract(10, 4) == 6\n    assert client.fun_with_async(5, 3) == 8",
        "client = get_service_client(ServiceTest)",
        "assert client.add(5, 3) == 8",
        "assert client.subtract(10, 4) == 6",
        "assert client.fun_with_async(5, 3) == 8"
      ],
      "code": "@pytest.mark.asyncio(scope='session')\nasync def test_service_creation(server):\n    with ServiceTest():\n        client = get_service_client(ServiceTest)\n        assert client.add(5, 3) == 8\n        assert client.subtract(10, 4) == 6\n        assert client.fun_with_async(5, 3) == 8\nwith ServiceTest():\n    client = get_service_client(ServiceTest)\n    assert client.add(5, 3) == 8\n    assert client.subtract(10, 4) == 6\n    assert client.fun_with_async(5, 3) == 8\nclient = get_service_client(ServiceTest)\nassert client.add(5, 3) == 8\nassert client.subtract(10, 4) == 6\nassert client.fun_with_async(5, 3) == 8"
    }
  ],
  "edges": []
}