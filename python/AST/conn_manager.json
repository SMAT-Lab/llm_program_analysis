{
  "value": "from typing import Dict, Set\n\nfrom fastapi import WebSocket\n\nfrom backend.data import execution\nfrom backend.server.model import Methods, WsMessage\n\n\nclass ConnectionManager:\n    def __init__(self):\n        self.active_connections: Set[WebSocket] = set()\n        self.subscriptions: Dict[str, Set[WebSocket]] = {}\n\n    async def connect(self, websocket: WebSocket):\n        await websocket.accept()\n        self.active_connections.add(websocket)\n\n    def disconnect(self, websocket: WebSocket):\n        self.active_connections.remove(websocket)\n        for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)\n\n    async def subscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()\n        self.subscriptions[graph_id].add(websocket)\n\n    async def unsubscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]\n\n    async def send_execution_result(self, result: execution.ExecutionResult):\n        graph_id = result.graph_id\n        if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
  "children": [
    {
      "value": "from typing import Dict, Set",
      "children": [
        {
          "value": "typing",
          "children": [
            {
              "value": "typing",
              "children": []
            }
          ]
        },
        {
          "value": "Dict",
          "children": [
            {
              "value": "Dict",
              "children": []
            }
          ]
        },
        {
          "value": "Set",
          "children": [
            {
              "value": "Set",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from fastapi import WebSocket",
      "children": [
        {
          "value": "fastapi",
          "children": [
            {
              "value": "fastapi",
              "children": []
            }
          ]
        },
        {
          "value": "WebSocket",
          "children": [
            {
              "value": "WebSocket",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from backend.data import execution",
      "children": [
        {
          "value": "backend.data",
          "children": [
            {
              "value": "backend",
              "children": []
            },
            {
              "value": "data",
              "children": []
            }
          ]
        },
        {
          "value": "execution",
          "children": [
            {
              "value": "execution",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from backend.server.model import Methods, WsMessage",
      "children": [
        {
          "value": "backend.server.model",
          "children": [
            {
              "value": "backend",
              "children": []
            },
            {
              "value": "server",
              "children": []
            },
            {
              "value": "model",
              "children": []
            }
          ]
        },
        {
          "value": "Methods",
          "children": [
            {
              "value": "Methods",
              "children": []
            }
          ]
        },
        {
          "value": "WsMessage",
          "children": [
            {
              "value": "WsMessage",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "class ConnectionManager:\n    def __init__(self):\n        self.active_connections: Set[WebSocket] = set()\n        self.subscriptions: Dict[str, Set[WebSocket]] = {}\n\n    async def connect(self, websocket: WebSocket):\n        await websocket.accept()\n        self.active_connections.add(websocket)\n\n    def disconnect(self, websocket: WebSocket):\n        self.active_connections.remove(websocket)\n        for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)\n\n    async def subscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()\n        self.subscriptions[graph_id].add(websocket)\n\n    async def unsubscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]\n\n    async def send_execution_result(self, result: execution.ExecutionResult):\n        graph_id = result.graph_id\n        if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
      "children": [
        {
          "value": "ConnectionManager",
          "children": []
        },
        {
          "value": "def __init__(self):\n        self.active_connections: Set[WebSocket] = set()\n        self.subscriptions: Dict[str, Set[WebSocket]] = {}\n\n    async def connect(self, websocket: WebSocket):\n        await websocket.accept()\n        self.active_connections.add(websocket)\n\n    def disconnect(self, websocket: WebSocket):\n        self.active_connections.remove(websocket)\n        for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)\n\n    async def subscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()\n        self.subscriptions[graph_id].add(websocket)\n\n    async def unsubscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]\n\n    async def send_execution_result(self, result: execution.ExecutionResult):\n        graph_id = result.graph_id\n        if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
          "children": [
            {
              "value": "def __init__(self):\n        self.active_connections: Set[WebSocket] = set()\n        self.subscriptions: Dict[str, Set[WebSocket]] = {}",
              "children": [
                {
                  "value": "__init__",
                  "children": []
                },
                {
                  "value": "(self)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "self.active_connections: Set[WebSocket] = set()\n        self.subscriptions: Dict[str, Set[WebSocket]] = {}",
                  "children": [
                    {
                      "value": "self.active_connections: Set[WebSocket] = set()",
                      "children": [
                        {
                          "value": "self.active_connections: Set[WebSocket] = set()",
                          "children": [
                            {
                              "value": "self.active_connections",
                              "children": [
                                {
                                  "value": "self",
                                  "children": []
                                },
                                {
                                  "value": "active_connections",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "Set[WebSocket]",
                              "children": [
                                {
                                  "value": "Set[WebSocket]",
                                  "children": [
                                    {
                                      "value": "Set",
                                      "children": []
                                    },
                                    {
                                      "value": "[WebSocket]",
                                      "children": [
                                        {
                                          "value": "WebSocket",
                                          "children": [
                                            {
                                              "value": "WebSocket",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "set()",
                              "children": [
                                {
                                  "value": "set",
                                  "children": []
                                },
                                {
                                  "value": "()",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "self.subscriptions: Dict[str, Set[WebSocket]] = {}",
                      "children": [
                        {
                          "value": "self.subscriptions: Dict[str, Set[WebSocket]] = {}",
                          "children": [
                            {
                              "value": "self.subscriptions",
                              "children": [
                                {
                                  "value": "self",
                                  "children": []
                                },
                                {
                                  "value": "subscriptions",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "Dict[str, Set[WebSocket]]",
                              "children": [
                                {
                                  "value": "Dict[str, Set[WebSocket]]",
                                  "children": [
                                    {
                                      "value": "Dict",
                                      "children": []
                                    },
                                    {
                                      "value": "[str, Set[WebSocket]]",
                                      "children": [
                                        {
                                          "value": "str",
                                          "children": [
                                            {
                                              "value": "str",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "Set[WebSocket]",
                                          "children": [
                                            {
                                              "value": "Set[WebSocket]",
                                              "children": [
                                                {
                                                  "value": "Set",
                                                  "children": []
                                                },
                                                {
                                                  "value": "[WebSocket]",
                                                  "children": [
                                                    {
                                                      "value": "WebSocket",
                                                      "children": [
                                                        {
                                                          "value": "WebSocket",
                                                          "children": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "{}",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "async def connect(self, websocket: WebSocket):\n        await websocket.accept()\n        self.active_connections.add(websocket)",
              "children": [
                {
                  "value": "connect",
                  "children": []
                },
                {
                  "value": "(self, websocket: WebSocket)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "websocket: WebSocket",
                      "children": [
                        {
                          "value": "websocket",
                          "children": []
                        },
                        {
                          "value": "WebSocket",
                          "children": [
                            {
                              "value": "WebSocket",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "await websocket.accept()\n        self.active_connections.add(websocket)",
                  "children": [
                    {
                      "value": "await websocket.accept()",
                      "children": [
                        {
                          "value": "await websocket.accept()",
                          "children": [
                            {
                              "value": "websocket.accept()",
                              "children": [
                                {
                                  "value": "websocket.accept",
                                  "children": [
                                    {
                                      "value": "websocket",
                                      "children": []
                                    },
                                    {
                                      "value": "accept",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "()",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "self.active_connections.add(websocket)",
                      "children": [
                        {
                          "value": "self.active_connections.add(websocket)",
                          "children": [
                            {
                              "value": "self.active_connections.add",
                              "children": [
                                {
                                  "value": "self.active_connections",
                                  "children": [
                                    {
                                      "value": "self",
                                      "children": []
                                    },
                                    {
                                      "value": "active_connections",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "add",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "(websocket)",
                              "children": [
                                {
                                  "value": "websocket",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "def disconnect(self, websocket: WebSocket):\n        self.active_connections.remove(websocket)\n        for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)",
              "children": [
                {
                  "value": "disconnect",
                  "children": []
                },
                {
                  "value": "(self, websocket: WebSocket)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "websocket: WebSocket",
                      "children": [
                        {
                          "value": "websocket",
                          "children": []
                        },
                        {
                          "value": "WebSocket",
                          "children": [
                            {
                              "value": "WebSocket",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "self.active_connections.remove(websocket)\n        for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)",
                  "children": [
                    {
                      "value": "self.active_connections.remove(websocket)",
                      "children": [
                        {
                          "value": "self.active_connections.remove(websocket)",
                          "children": [
                            {
                              "value": "self.active_connections.remove",
                              "children": [
                                {
                                  "value": "self.active_connections",
                                  "children": [
                                    {
                                      "value": "self",
                                      "children": []
                                    },
                                    {
                                      "value": "active_connections",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "remove",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "(websocket)",
                              "children": [
                                {
                                  "value": "websocket",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "for subscribers in self.subscriptions.values():\n            subscribers.discard(websocket)",
                      "children": [
                        {
                          "value": "subscribers",
                          "children": []
                        },
                        {
                          "value": "self.subscriptions.values()",
                          "children": [
                            {
                              "value": "self.subscriptions.values",
                              "children": [
                                {
                                  "value": "self.subscriptions",
                                  "children": [
                                    {
                                      "value": "self",
                                      "children": []
                                    },
                                    {
                                      "value": "subscriptions",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "values",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "()",
                              "children": []
                            }
                          ]
                        },
                        {
                          "value": "subscribers.discard(websocket)",
                          "children": [
                            {
                              "value": "subscribers.discard(websocket)",
                              "children": [
                                {
                                  "value": "subscribers.discard(websocket)",
                                  "children": [
                                    {
                                      "value": "subscribers.discard",
                                      "children": [
                                        {
                                          "value": "subscribers",
                                          "children": []
                                        },
                                        {
                                          "value": "discard",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "(websocket)",
                                      "children": [
                                        {
                                          "value": "websocket",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "async def subscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()\n        self.subscriptions[graph_id].add(websocket)",
              "children": [
                {
                  "value": "subscribe",
                  "children": []
                },
                {
                  "value": "(self, graph_id: str, websocket: WebSocket)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "graph_id: str",
                      "children": [
                        {
                          "value": "graph_id",
                          "children": []
                        },
                        {
                          "value": "str",
                          "children": [
                            {
                              "value": "str",
                              "children": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "websocket: WebSocket",
                      "children": [
                        {
                          "value": "websocket",
                          "children": []
                        },
                        {
                          "value": "WebSocket",
                          "children": [
                            {
                              "value": "WebSocket",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()\n        self.subscriptions[graph_id].add(websocket)",
                  "children": [
                    {
                      "value": "if graph_id not in self.subscriptions:\n            self.subscriptions[graph_id] = set()",
                      "children": [
                        {
                          "value": "graph_id not in self.subscriptions",
                          "children": [
                            {
                              "value": "graph_id",
                              "children": []
                            },
                            {
                              "value": "self.subscriptions",
                              "children": [
                                {
                                  "value": "self",
                                  "children": []
                                },
                                {
                                  "value": "subscriptions",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "self.subscriptions[graph_id] = set()",
                          "children": [
                            {
                              "value": "self.subscriptions[graph_id] = set()",
                              "children": [
                                {
                                  "value": "self.subscriptions[graph_id] = set()",
                                  "children": [
                                    {
                                      "value": "self.subscriptions[graph_id]",
                                      "children": [
                                        {
                                          "value": "self.subscriptions",
                                          "children": [
                                            {
                                              "value": "self",
                                              "children": []
                                            },
                                            {
                                              "value": "subscriptions",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "graph_id",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "set()",
                                      "children": [
                                        {
                                          "value": "set",
                                          "children": []
                                        },
                                        {
                                          "value": "()",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "self.subscriptions[graph_id].add(websocket)",
                      "children": [
                        {
                          "value": "self.subscriptions[graph_id].add(websocket)",
                          "children": [
                            {
                              "value": "self.subscriptions[graph_id].add",
                              "children": [
                                {
                                  "value": "self.subscriptions[graph_id]",
                                  "children": [
                                    {
                                      "value": "self.subscriptions",
                                      "children": [
                                        {
                                          "value": "self",
                                          "children": []
                                        },
                                        {
                                          "value": "subscriptions",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "graph_id",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "add",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "(websocket)",
                              "children": [
                                {
                                  "value": "websocket",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "async def unsubscribe(self, graph_id: str, websocket: WebSocket):\n        if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]",
              "children": [
                {
                  "value": "unsubscribe",
                  "children": []
                },
                {
                  "value": "(self, graph_id: str, websocket: WebSocket)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "graph_id: str",
                      "children": [
                        {
                          "value": "graph_id",
                          "children": []
                        },
                        {
                          "value": "str",
                          "children": [
                            {
                              "value": "str",
                              "children": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "websocket: WebSocket",
                      "children": [
                        {
                          "value": "websocket",
                          "children": []
                        },
                        {
                          "value": "WebSocket",
                          "children": [
                            {
                              "value": "WebSocket",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]",
                  "children": [
                    {
                      "value": "if graph_id in self.subscriptions:\n            self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]",
                      "children": [
                        {
                          "value": "graph_id in self.subscriptions",
                          "children": [
                            {
                              "value": "graph_id",
                              "children": []
                            },
                            {
                              "value": "self.subscriptions",
                              "children": [
                                {
                                  "value": "self",
                                  "children": []
                                },
                                {
                                  "value": "subscriptions",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "self.subscriptions[graph_id].discard(websocket)\n            if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]",
                          "children": [
                            {
                              "value": "self.subscriptions[graph_id].discard(websocket)",
                              "children": [
                                {
                                  "value": "self.subscriptions[graph_id].discard(websocket)",
                                  "children": [
                                    {
                                      "value": "self.subscriptions[graph_id].discard",
                                      "children": [
                                        {
                                          "value": "self.subscriptions[graph_id]",
                                          "children": [
                                            {
                                              "value": "self.subscriptions",
                                              "children": [
                                                {
                                                  "value": "self",
                                                  "children": []
                                                },
                                                {
                                                  "value": "subscriptions",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "graph_id",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "discard",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "(websocket)",
                                      "children": [
                                        {
                                          "value": "websocket",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "if not self.subscriptions[graph_id]:\n                del self.subscriptions[graph_id]",
                              "children": [
                                {
                                  "value": "not self.subscriptions[graph_id]",
                                  "children": [
                                    {
                                      "value": "self.subscriptions[graph_id]",
                                      "children": [
                                        {
                                          "value": "self.subscriptions",
                                          "children": [
                                            {
                                              "value": "self",
                                              "children": []
                                            },
                                            {
                                              "value": "subscriptions",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "graph_id",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "del self.subscriptions[graph_id]",
                                  "children": [
                                    {
                                      "value": "del self.subscriptions[graph_id]",
                                      "children": [
                                        {
                                          "value": "self.subscriptions[graph_id]",
                                          "children": [
                                            {
                                              "value": "self.subscriptions",
                                              "children": [
                                                {
                                                  "value": "self",
                                                  "children": []
                                                },
                                                {
                                                  "value": "subscriptions",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "graph_id",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "async def send_execution_result(self, result: execution.ExecutionResult):\n        graph_id = result.graph_id\n        if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
              "children": [
                {
                  "value": "send_execution_result",
                  "children": []
                },
                {
                  "value": "(self, result: execution.ExecutionResult)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "result: execution.ExecutionResult",
                      "children": [
                        {
                          "value": "result",
                          "children": []
                        },
                        {
                          "value": "execution.ExecutionResult",
                          "children": [
                            {
                              "value": "execution.ExecutionResult",
                              "children": [
                                {
                                  "value": "execution",
                                  "children": []
                                },
                                {
                                  "value": "ExecutionResult",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "graph_id = result.graph_id\n        if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
                  "children": [
                    {
                      "value": "graph_id = result.graph_id",
                      "children": [
                        {
                          "value": "graph_id = result.graph_id",
                          "children": [
                            {
                              "value": "graph_id",
                              "children": []
                            },
                            {
                              "value": "result.graph_id",
                              "children": [
                                {
                                  "value": "result",
                                  "children": []
                                },
                                {
                                  "value": "graph_id",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "if graph_id in self.subscriptions:\n            message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
                      "children": [
                        {
                          "value": "graph_id in self.subscriptions",
                          "children": [
                            {
                              "value": "graph_id",
                              "children": []
                            },
                            {
                              "value": "self.subscriptions",
                              "children": [
                                {
                                  "value": "self",
                                  "children": []
                                },
                                {
                                  "value": "subscriptions",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()\n            for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
                          "children": [
                            {
                              "value": "message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()",
                              "children": [
                                {
                                  "value": "message = WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()",
                                  "children": [
                                    {
                                      "value": "message",
                                      "children": []
                                    },
                                    {
                                      "value": "WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json()",
                                      "children": [
                                        {
                                          "value": "WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            ).model_dump_json",
                                          "children": [
                                            {
                                              "value": "WsMessage(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            )",
                                              "children": [
                                                {
                                                  "value": "WsMessage",
                                                  "children": []
                                                },
                                                {
                                                  "value": "(\n                method=Methods.EXECUTION_EVENT,\n                channel=graph_id,\n                data=result.model_dump(),\n            )",
                                                  "children": [
                                                    {
                                                      "value": "method=Methods.EXECUTION_EVENT",
                                                      "children": [
                                                        {
                                                          "value": "method",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "Methods.EXECUTION_EVENT",
                                                          "children": [
                                                            {
                                                              "value": "Methods",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "EXECUTION_EVENT",
                                                              "children": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "channel=graph_id",
                                                      "children": [
                                                        {
                                                          "value": "channel",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "graph_id",
                                                          "children": []
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "data=result.model_dump()",
                                                      "children": [
                                                        {
                                                          "value": "data",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "result.model_dump()",
                                                          "children": [
                                                            {
                                                              "value": "result.model_dump",
                                                              "children": [
                                                                {
                                                                  "value": "result",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "model_dump",
                                                                  "children": []
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": "()",
                                                              "children": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "value": "model_dump_json",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "()",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "for connection in self.subscriptions[graph_id]:\n                await connection.send_text(message)",
                              "children": [
                                {
                                  "value": "connection",
                                  "children": []
                                },
                                {
                                  "value": "self.subscriptions[graph_id]",
                                  "children": [
                                    {
                                      "value": "self.subscriptions",
                                      "children": [
                                        {
                                          "value": "self",
                                          "children": []
                                        },
                                        {
                                          "value": "subscriptions",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "graph_id",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "await connection.send_text(message)",
                                  "children": [
                                    {
                                      "value": "await connection.send_text(message)",
                                      "children": [
                                        {
                                          "value": "await connection.send_text(message)",
                                          "children": [
                                            {
                                              "value": "connection.send_text(message)",
                                              "children": [
                                                {
                                                  "value": "connection.send_text",
                                                  "children": [
                                                    {
                                                      "value": "connection",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "send_text",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "(message)",
                                                  "children": [
                                                    {
                                                      "value": "message",
                                                      "children": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}