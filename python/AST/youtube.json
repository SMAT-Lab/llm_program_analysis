{
  "value": "from urllib.parse import parse_qs, urlparse\n\nfrom youtube_transcript_api import YouTubeTranscriptApi\nfrom youtube_transcript_api.formatters import TextFormatter\n\nfrom backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema\nfrom backend.data.model import SchemaField\n\n\nclass TranscribeYoutubeVideoBlock(Block):\n    class Input(BlockSchema):\n        youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )\n\n    class Output(BlockSchema):\n        video_id: str = SchemaField(description=\"The extracted YouTube video ID\")\n        transcript: str = SchemaField(description=\"The transcribed text of the video\")\n        error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )\n\n    def __init__(self):\n        super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )\n\n    @staticmethod\n    def extract_video_id(url: str) -> str:\n        parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")\n\n    @staticmethod\n    def get_transcript(video_id: str):\n        try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        video_id = self.extract_video_id(input_data.youtube_url)\n        yield \"video_id\", video_id\n\n        transcript = self.get_transcript(video_id)\n        formatter = TextFormatter()\n        transcript_text = formatter.format_transcript(transcript)\n\n        yield \"transcript\", transcript_text",
  "children": [
    {
      "value": "from urllib.parse import parse_qs, urlparse",
      "children": [
        {
          "value": "urllib.parse",
          "children": [
            {
              "value": "urllib",
              "children": []
            },
            {
              "value": "parse",
              "children": []
            }
          ]
        },
        {
          "value": "parse_qs",
          "children": [
            {
              "value": "parse_qs",
              "children": []
            }
          ]
        },
        {
          "value": "urlparse",
          "children": [
            {
              "value": "urlparse",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from youtube_transcript_api import YouTubeTranscriptApi",
      "children": [
        {
          "value": "youtube_transcript_api",
          "children": [
            {
              "value": "youtube_transcript_api",
              "children": []
            }
          ]
        },
        {
          "value": "YouTubeTranscriptApi",
          "children": [
            {
              "value": "YouTubeTranscriptApi",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from youtube_transcript_api.formatters import TextFormatter",
      "children": [
        {
          "value": "youtube_transcript_api.formatters",
          "children": [
            {
              "value": "youtube_transcript_api",
              "children": []
            },
            {
              "value": "formatters",
              "children": []
            }
          ]
        },
        {
          "value": "TextFormatter",
          "children": [
            {
              "value": "TextFormatter",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema",
      "children": [
        {
          "value": "backend.data.block",
          "children": [
            {
              "value": "backend",
              "children": []
            },
            {
              "value": "data",
              "children": []
            },
            {
              "value": "block",
              "children": []
            }
          ]
        },
        {
          "value": "Block",
          "children": [
            {
              "value": "Block",
              "children": []
            }
          ]
        },
        {
          "value": "BlockCategory",
          "children": [
            {
              "value": "BlockCategory",
              "children": []
            }
          ]
        },
        {
          "value": "BlockOutput",
          "children": [
            {
              "value": "BlockOutput",
              "children": []
            }
          ]
        },
        {
          "value": "BlockSchema",
          "children": [
            {
              "value": "BlockSchema",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "from backend.data.model import SchemaField",
      "children": [
        {
          "value": "backend.data.model",
          "children": [
            {
              "value": "backend",
              "children": []
            },
            {
              "value": "data",
              "children": []
            },
            {
              "value": "model",
              "children": []
            }
          ]
        },
        {
          "value": "SchemaField",
          "children": [
            {
              "value": "SchemaField",
              "children": []
            }
          ]
        }
      ]
    },
    {
      "value": "class TranscribeYoutubeVideoBlock(Block):\n    class Input(BlockSchema):\n        youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )\n\n    class Output(BlockSchema):\n        video_id: str = SchemaField(description=\"The extracted YouTube video ID\")\n        transcript: str = SchemaField(description=\"The transcribed text of the video\")\n        error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )\n\n    def __init__(self):\n        super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )\n\n    @staticmethod\n    def extract_video_id(url: str) -> str:\n        parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")\n\n    @staticmethod\n    def get_transcript(video_id: str):\n        try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        video_id = self.extract_video_id(input_data.youtube_url)\n        yield \"video_id\", video_id\n\n        transcript = self.get_transcript(video_id)\n        formatter = TextFormatter()\n        transcript_text = formatter.format_transcript(transcript)\n\n        yield \"transcript\", transcript_text",
      "children": [
        {
          "value": "TranscribeYoutubeVideoBlock",
          "children": []
        },
        {
          "value": "(Block)",
          "children": [
            {
              "value": "Block",
              "children": []
            }
          ]
        },
        {
          "value": "class Input(BlockSchema):\n        youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )\n\n    class Output(BlockSchema):\n        video_id: str = SchemaField(description=\"The extracted YouTube video ID\")\n        transcript: str = SchemaField(description=\"The transcribed text of the video\")\n        error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )\n\n    def __init__(self):\n        super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )\n\n    @staticmethod\n    def extract_video_id(url: str) -> str:\n        parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")\n\n    @staticmethod\n    def get_transcript(video_id: str):\n        try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        video_id = self.extract_video_id(input_data.youtube_url)\n        yield \"video_id\", video_id\n\n        transcript = self.get_transcript(video_id)\n        formatter = TextFormatter()\n        transcript_text = formatter.format_transcript(transcript)\n\n        yield \"transcript\", transcript_text",
          "children": [
            {
              "value": "class Input(BlockSchema):\n        youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
              "children": [
                {
                  "value": "Input",
                  "children": []
                },
                {
                  "value": "(BlockSchema)",
                  "children": [
                    {
                      "value": "BlockSchema",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
                  "children": [
                    {
                      "value": "youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
                      "children": [
                        {
                          "value": "youtube_url: str = SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
                          "children": [
                            {
                              "value": "youtube_url",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "SchemaField(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
                              "children": [
                                {
                                  "value": "SchemaField",
                                  "children": []
                                },
                                {
                                  "value": "(\n            title=\"YouTube URL\",\n            description=\"The URL of the YouTube video to transcribe\",\n            placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        )",
                                  "children": [
                                    {
                                      "value": "title=\"YouTube URL\"",
                                      "children": [
                                        {
                                          "value": "title",
                                          "children": []
                                        },
                                        {
                                          "value": "\"YouTube URL\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "YouTube URL",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": "description=\"The URL of the YouTube video to transcribe\"",
                                      "children": [
                                        {
                                          "value": "description",
                                          "children": []
                                        },
                                        {
                                          "value": "\"The URL of the YouTube video to transcribe\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "The URL of the YouTube video to transcribe",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": "placeholder=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"",
                                      "children": [
                                        {
                                          "value": "placeholder",
                                          "children": []
                                        },
                                        {
                                          "value": "\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "class Output(BlockSchema):\n        video_id: str = SchemaField(description=\"The extracted YouTube video ID\")\n        transcript: str = SchemaField(description=\"The transcribed text of the video\")\n        error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )",
              "children": [
                {
                  "value": "Output",
                  "children": []
                },
                {
                  "value": "(BlockSchema)",
                  "children": [
                    {
                      "value": "BlockSchema",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "video_id: str = SchemaField(description=\"The extracted YouTube video ID\")\n        transcript: str = SchemaField(description=\"The transcribed text of the video\")\n        error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )",
                  "children": [
                    {
                      "value": "video_id: str = SchemaField(description=\"The extracted YouTube video ID\")",
                      "children": [
                        {
                          "value": "video_id: str = SchemaField(description=\"The extracted YouTube video ID\")",
                          "children": [
                            {
                              "value": "video_id",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "SchemaField(description=\"The extracted YouTube video ID\")",
                              "children": [
                                {
                                  "value": "SchemaField",
                                  "children": []
                                },
                                {
                                  "value": "(description=\"The extracted YouTube video ID\")",
                                  "children": [
                                    {
                                      "value": "description=\"The extracted YouTube video ID\"",
                                      "children": [
                                        {
                                          "value": "description",
                                          "children": []
                                        },
                                        {
                                          "value": "\"The extracted YouTube video ID\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "The extracted YouTube video ID",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "transcript: str = SchemaField(description=\"The transcribed text of the video\")",
                      "children": [
                        {
                          "value": "transcript: str = SchemaField(description=\"The transcribed text of the video\")",
                          "children": [
                            {
                              "value": "transcript",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "SchemaField(description=\"The transcribed text of the video\")",
                              "children": [
                                {
                                  "value": "SchemaField",
                                  "children": []
                                },
                                {
                                  "value": "(description=\"The transcribed text of the video\")",
                                  "children": [
                                    {
                                      "value": "description=\"The transcribed text of the video\"",
                                      "children": [
                                        {
                                          "value": "description",
                                          "children": []
                                        },
                                        {
                                          "value": "\"The transcribed text of the video\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "The transcribed text of the video",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )",
                      "children": [
                        {
                          "value": "error: str = SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )",
                          "children": [
                            {
                              "value": "error",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "SchemaField(\n            description=\"Any error message if the transcription fails\"\n        )",
                              "children": [
                                {
                                  "value": "SchemaField",
                                  "children": []
                                },
                                {
                                  "value": "(\n            description=\"Any error message if the transcription fails\"\n        )",
                                  "children": [
                                    {
                                      "value": "description=\"Any error message if the transcription fails\"",
                                      "children": [
                                        {
                                          "value": "description",
                                          "children": []
                                        },
                                        {
                                          "value": "\"Any error message if the transcription fails\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "Any error message if the transcription fails",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "def __init__(self):\n        super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )",
              "children": [
                {
                  "value": "__init__",
                  "children": []
                },
                {
                  "value": "(self)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )",
                  "children": [
                    {
                      "value": "super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )",
                      "children": [
                        {
                          "value": "super().__init__(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )",
                          "children": [
                            {
                              "value": "super().__init__",
                              "children": [
                                {
                                  "value": "super()",
                                  "children": [
                                    {
                                      "value": "super",
                                      "children": []
                                    },
                                    {
                                      "value": "()",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "__init__",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "value": "(\n            id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\",\n            input_schema=TranscribeYoutubeVideoBlock.Input,\n            output_schema=TranscribeYoutubeVideoBlock.Output,\n            description=\"Transcribes a YouTube video.\",\n            categories={BlockCategory.SOCIAL},\n            test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\n            test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ],\n            test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            },\n        )",
                              "children": [
                                {
                                  "value": "id=\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\"",
                                  "children": [
                                    {
                                      "value": "id",
                                      "children": []
                                    },
                                    {
                                      "value": "\"f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c\"",
                                      "children": [
                                        {
                                          "value": "\"",
                                          "children": []
                                        },
                                        {
                                          "value": "f3a8f7e1-4b1d-4e5f-9f2a-7c3d5a2e6b4c",
                                          "children": []
                                        },
                                        {
                                          "value": "\"",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "input_schema=TranscribeYoutubeVideoBlock.Input",
                                  "children": [
                                    {
                                      "value": "input_schema",
                                      "children": []
                                    },
                                    {
                                      "value": "TranscribeYoutubeVideoBlock.Input",
                                      "children": [
                                        {
                                          "value": "TranscribeYoutubeVideoBlock",
                                          "children": []
                                        },
                                        {
                                          "value": "Input",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "output_schema=TranscribeYoutubeVideoBlock.Output",
                                  "children": [
                                    {
                                      "value": "output_schema",
                                      "children": []
                                    },
                                    {
                                      "value": "TranscribeYoutubeVideoBlock.Output",
                                      "children": [
                                        {
                                          "value": "TranscribeYoutubeVideoBlock",
                                          "children": []
                                        },
                                        {
                                          "value": "Output",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "description=\"Transcribes a YouTube video.\"",
                                  "children": [
                                    {
                                      "value": "description",
                                      "children": []
                                    },
                                    {
                                      "value": "\"Transcribes a YouTube video.\"",
                                      "children": [
                                        {
                                          "value": "\"",
                                          "children": []
                                        },
                                        {
                                          "value": "Transcribes a YouTube video.",
                                          "children": []
                                        },
                                        {
                                          "value": "\"",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "categories={BlockCategory.SOCIAL}",
                                  "children": [
                                    {
                                      "value": "categories",
                                      "children": []
                                    },
                                    {
                                      "value": "{BlockCategory.SOCIAL}",
                                      "children": [
                                        {
                                          "value": "BlockCategory.SOCIAL",
                                          "children": [
                                            {
                                              "value": "BlockCategory",
                                              "children": []
                                            },
                                            {
                                              "value": "SOCIAL",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "test_input={\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"}",
                                  "children": [
                                    {
                                      "value": "test_input",
                                      "children": []
                                    },
                                    {
                                      "value": "{\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"}",
                                      "children": [
                                        {
                                          "value": "\"youtube_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"",
                                          "children": [
                                            {
                                              "value": "\"youtube_url\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "youtube_url",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "test_output=[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ]",
                                  "children": [
                                    {
                                      "value": "test_output",
                                      "children": []
                                    },
                                    {
                                      "value": "[\n                (\"video_id\", \"dQw4w9WgXcQ\"),\n                (\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                ),\n            ]",
                                      "children": [
                                        {
                                          "value": "(\"video_id\", \"dQw4w9WgXcQ\")",
                                          "children": [
                                            {
                                              "value": "\"video_id\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "video_id",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "\"dQw4w9WgXcQ\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "dQw4w9WgXcQ",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "value": "(\n                    \"transcript\",\n                    \"Never gonna give you up\\nNever gonna let you down\",\n                )",
                                          "children": [
                                            {
                                              "value": "\"transcript\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "transcript",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "\"Never gonna give you up\\nNever gonna let you down\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "Never gonna give you up\\nNever gonna let you down",
                                                  "children": [
                                                    {
                                                      "value": "\\n",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "test_mock={\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            }",
                                  "children": [
                                    {
                                      "value": "test_mock",
                                      "children": []
                                    },
                                    {
                                      "value": "{\n                \"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ],\n            }",
                                      "children": [
                                        {
                                          "value": "\"get_transcript\": lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ]",
                                          "children": [
                                            {
                                              "value": "\"get_transcript\"",
                                              "children": [
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                },
                                                {
                                                  "value": "get_transcript",
                                                  "children": []
                                                },
                                                {
                                                  "value": "\"",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "lambda video_id: [\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ]",
                                              "children": [
                                                {
                                                  "value": "video_id",
                                                  "children": [
                                                    {
                                                      "value": "video_id",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "[\n                    {\"text\": \"Never gonna give you up\"},\n                    {\"text\": \"Never gonna let you down\"},\n                ]",
                                                  "children": [
                                                    {
                                                      "value": "{\"text\": \"Never gonna give you up\"}",
                                                      "children": [
                                                        {
                                                          "value": "\"text\": \"Never gonna give you up\"",
                                                          "children": [
                                                            {
                                                              "value": "\"text\"",
                                                              "children": [
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "text",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": "\"Never gonna give you up\"",
                                                              "children": [
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "Never gonna give you up",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "{\"text\": \"Never gonna let you down\"}",
                                                      "children": [
                                                        {
                                                          "value": "\"text\": \"Never gonna let you down\"",
                                                          "children": [
                                                            {
                                                              "value": "\"text\"",
                                                              "children": [
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "text",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": "\"Never gonna let you down\"",
                                                              "children": [
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "Never gonna let you down",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "\"",
                                                                  "children": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "@staticmethod\n    def extract_video_id(url: str) -> str:\n        parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")",
              "children": [
                {
                  "value": "@staticmethod",
                  "children": [
                    {
                      "value": "staticmethod",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "def extract_video_id(url: str) -> str:\n        parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")",
                  "children": [
                    {
                      "value": "extract_video_id",
                      "children": []
                    },
                    {
                      "value": "(url: str)",
                      "children": [
                        {
                          "value": "url: str",
                          "children": [
                            {
                              "value": "url",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "str",
                      "children": [
                        {
                          "value": "str",
                          "children": []
                        }
                      ]
                    },
                    {
                      "value": "parsed_url = urlparse(url)\n        if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]\n        if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]\n        raise ValueError(f\"Invalid YouTube URL: {url}\")",
                      "children": [
                        {
                          "value": "parsed_url = urlparse(url)",
                          "children": [
                            {
                              "value": "parsed_url = urlparse(url)",
                              "children": [
                                {
                                  "value": "parsed_url",
                                  "children": []
                                },
                                {
                                  "value": "urlparse(url)",
                                  "children": [
                                    {
                                      "value": "urlparse",
                                      "children": []
                                    },
                                    {
                                      "value": "(url)",
                                      "children": [
                                        {
                                          "value": "url",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "if parsed_url.netloc == \"youtu.be\":\n            return parsed_url.path[1:]",
                          "children": [
                            {
                              "value": "parsed_url.netloc == \"youtu.be\"",
                              "children": [
                                {
                                  "value": "parsed_url.netloc",
                                  "children": [
                                    {
                                      "value": "parsed_url",
                                      "children": []
                                    },
                                    {
                                      "value": "netloc",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "\"youtu.be\"",
                                  "children": [
                                    {
                                      "value": "\"",
                                      "children": []
                                    },
                                    {
                                      "value": "youtu.be",
                                      "children": []
                                    },
                                    {
                                      "value": "\"",
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "return parsed_url.path[1:]",
                              "children": [
                                {
                                  "value": "return parsed_url.path[1:]",
                                  "children": [
                                    {
                                      "value": "parsed_url.path[1:]",
                                      "children": [
                                        {
                                          "value": "parsed_url.path",
                                          "children": [
                                            {
                                              "value": "parsed_url",
                                              "children": []
                                            },
                                            {
                                              "value": "path",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "1:",
                                          "children": [
                                            {
                                              "value": "1",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "if parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\"):\n            if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]",
                          "children": [
                            {
                              "value": "parsed_url.netloc in (\"www.youtube.com\", \"youtube.com\")",
                              "children": [
                                {
                                  "value": "parsed_url.netloc",
                                  "children": [
                                    {
                                      "value": "parsed_url",
                                      "children": []
                                    },
                                    {
                                      "value": "netloc",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "(\"www.youtube.com\", \"youtube.com\")",
                                  "children": [
                                    {
                                      "value": "\"www.youtube.com\"",
                                      "children": [
                                        {
                                          "value": "\"",
                                          "children": []
                                        },
                                        {
                                          "value": "www.youtube.com",
                                          "children": []
                                        },
                                        {
                                          "value": "\"",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "\"youtube.com\"",
                                      "children": [
                                        {
                                          "value": "\"",
                                          "children": []
                                        },
                                        {
                                          "value": "youtube.com",
                                          "children": []
                                        },
                                        {
                                          "value": "\"",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]\n            if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]\n            if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]",
                              "children": [
                                {
                                  "value": "if parsed_url.path == \"/watch\":\n                p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]",
                                  "children": [
                                    {
                                      "value": "parsed_url.path == \"/watch\"",
                                      "children": [
                                        {
                                          "value": "parsed_url.path",
                                          "children": [
                                            {
                                              "value": "parsed_url",
                                              "children": []
                                            },
                                            {
                                              "value": "path",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "\"/watch\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "/watch",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": "p = parse_qs(parsed_url.query)\n                return p[\"v\"][0]",
                                      "children": [
                                        {
                                          "value": "p = parse_qs(parsed_url.query)",
                                          "children": [
                                            {
                                              "value": "p = parse_qs(parsed_url.query)",
                                              "children": [
                                                {
                                                  "value": "p",
                                                  "children": []
                                                },
                                                {
                                                  "value": "parse_qs(parsed_url.query)",
                                                  "children": [
                                                    {
                                                      "value": "parse_qs",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "(parsed_url.query)",
                                                      "children": [
                                                        {
                                                          "value": "parsed_url.query",
                                                          "children": [
                                                            {
                                                              "value": "parsed_url",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "query",
                                                              "children": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "value": "return p[\"v\"][0]",
                                          "children": [
                                            {
                                              "value": "p[\"v\"][0]",
                                              "children": [
                                                {
                                                  "value": "p[\"v\"]",
                                                  "children": [
                                                    {
                                                      "value": "p",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "\"v\"",
                                                      "children": [
                                                        {
                                                          "value": "\"",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "v",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "\"",
                                                          "children": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "0",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "if parsed_url.path[:7] == \"/embed/\":\n                return parsed_url.path.split(\"/\")[2]",
                                  "children": [
                                    {
                                      "value": "parsed_url.path[:7] == \"/embed/\"",
                                      "children": [
                                        {
                                          "value": "parsed_url.path[:7]",
                                          "children": [
                                            {
                                              "value": "parsed_url.path",
                                              "children": [
                                                {
                                                  "value": "parsed_url",
                                                  "children": []
                                                },
                                                {
                                                  "value": "path",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": ":7",
                                              "children": [
                                                {
                                                  "value": "7",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "value": "\"/embed/\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "/embed/",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": "return parsed_url.path.split(\"/\")[2]",
                                      "children": [
                                        {
                                          "value": "return parsed_url.path.split(\"/\")[2]",
                                          "children": [
                                            {
                                              "value": "parsed_url.path.split(\"/\")[2]",
                                              "children": [
                                                {
                                                  "value": "parsed_url.path.split(\"/\")",
                                                  "children": [
                                                    {
                                                      "value": "parsed_url.path.split",
                                                      "children": [
                                                        {
                                                          "value": "parsed_url.path",
                                                          "children": [
                                                            {
                                                              "value": "parsed_url",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "path",
                                                              "children": []
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "value": "split",
                                                          "children": []
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "(\"/\")",
                                                      "children": [
                                                        {
                                                          "value": "\"/\"",
                                                          "children": [
                                                            {
                                                              "value": "\"",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "/",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "\"",
                                                              "children": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "2",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "if parsed_url.path[:3] == \"/v/\":\n                return parsed_url.path.split(\"/\")[2]",
                                  "children": [
                                    {
                                      "value": "parsed_url.path[:3] == \"/v/\"",
                                      "children": [
                                        {
                                          "value": "parsed_url.path[:3]",
                                          "children": [
                                            {
                                              "value": "parsed_url.path",
                                              "children": [
                                                {
                                                  "value": "parsed_url",
                                                  "children": []
                                                },
                                                {
                                                  "value": "path",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": ":3",
                                              "children": [
                                                {
                                                  "value": "3",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "value": "\"/v/\"",
                                          "children": [
                                            {
                                              "value": "\"",
                                              "children": []
                                            },
                                            {
                                              "value": "/v/",
                                              "children": []
                                            },
                                            {
                                              "value": "\"",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": "return parsed_url.path.split(\"/\")[2]",
                                      "children": [
                                        {
                                          "value": "return parsed_url.path.split(\"/\")[2]",
                                          "children": [
                                            {
                                              "value": "parsed_url.path.split(\"/\")[2]",
                                              "children": [
                                                {
                                                  "value": "parsed_url.path.split(\"/\")",
                                                  "children": [
                                                    {
                                                      "value": "parsed_url.path.split",
                                                      "children": [
                                                        {
                                                          "value": "parsed_url.path",
                                                          "children": [
                                                            {
                                                              "value": "parsed_url",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "path",
                                                              "children": []
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "value": "split",
                                                          "children": []
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "(\"/\")",
                                                      "children": [
                                                        {
                                                          "value": "\"/\"",
                                                          "children": [
                                                            {
                                                              "value": "\"",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "/",
                                                              "children": []
                                                            },
                                                            {
                                                              "value": "\"",
                                                              "children": []
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "2",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "value": "raise ValueError(f\"Invalid YouTube URL: {url}\")",
                          "children": [
                            {
                              "value": "ValueError(f\"Invalid YouTube URL: {url}\")",
                              "children": [
                                {
                                  "value": "ValueError",
                                  "children": []
                                },
                                {
                                  "value": "(f\"Invalid YouTube URL: {url}\")",
                                  "children": [
                                    {
                                      "value": "f\"Invalid YouTube URL: {url}\"",
                                      "children": [
                                        {
                                          "value": "f\"",
                                          "children": []
                                        },
                                        {
                                          "value": "Invalid YouTube URL:",
                                          "children": []
                                        },
                                        {
                                          "value": "{url}",
                                          "children": [
                                            {
                                              "value": "url",
                                              "children": []
                                            }
                                          ]
                                        },
                                        {
                                          "value": "\"",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "@staticmethod\n    def get_transcript(video_id: str):\n        try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")",
              "children": [
                {
                  "value": "@staticmethod",
                  "children": [
                    {
                      "value": "staticmethod",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "def get_transcript(video_id: str):\n        try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                  "children": [
                    {
                      "value": "get_transcript",
                      "children": []
                    },
                    {
                      "value": "(video_id: str)",
                      "children": [
                        {
                          "value": "video_id: str",
                          "children": [
                            {
                              "value": "video_id",
                              "children": []
                            },
                            {
                              "value": "str",
                              "children": [
                                {
                                  "value": "str",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                      "children": [
                        {
                          "value": "try:\n            transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )\n\n        except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                          "children": [
                            {
                              "value": "transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)\n\n            if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")\n\n            for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                              "children": [
                                {
                                  "value": "transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)",
                                  "children": [
                                    {
                                      "value": "transcript_list = YouTubeTranscriptApi.list_transcripts(video_id)",
                                      "children": [
                                        {
                                          "value": "transcript_list",
                                          "children": []
                                        },
                                        {
                                          "value": "YouTubeTranscriptApi.list_transcripts(video_id)",
                                          "children": [
                                            {
                                              "value": "YouTubeTranscriptApi.list_transcripts",
                                              "children": [
                                                {
                                                  "value": "YouTubeTranscriptApi",
                                                  "children": []
                                                },
                                                {
                                                  "value": "list_transcripts",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "value": "(video_id)",
                                              "children": [
                                                {
                                                  "value": "video_id",
                                                  "children": []
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "if not transcript_list:\n                raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                                  "children": [
                                    {
                                      "value": "not transcript_list",
                                      "children": [
                                        {
                                          "value": "transcript_list",
                                          "children": []
                                        }
                                      ]
                                    },
                                    {
                                      "value": "raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                                      "children": [
                                        {
                                          "value": "raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                                          "children": [
                                            {
                                              "value": "ValueError(f\"No transcripts found for the video: {video_id}\")",
                                              "children": [
                                                {
                                                  "value": "ValueError",
                                                  "children": []
                                                },
                                                {
                                                  "value": "(f\"No transcripts found for the video: {video_id}\")",
                                                  "children": [
                                                    {
                                                      "value": "f\"No transcripts found for the video: {video_id}\"",
                                                      "children": [
                                                        {
                                                          "value": "f\"",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "No transcripts found for the video:",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "{video_id}",
                                                          "children": [
                                                            {
                                                              "value": "video_id",
                                                              "children": []
                                                            }
                                                          ]
                                                        },
                                                        {
                                                          "value": "\"",
                                                          "children": []
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "value": "for transcript in transcript_list:\n                first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                                  "children": [
                                    {
                                      "value": "transcript",
                                      "children": []
                                    },
                                    {
                                      "value": "transcript_list",
                                      "children": []
                                    },
                                    {
                                      "value": "first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )\n                return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                                      "children": [
                                        {
                                          "value": "first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )",
                                          "children": [
                                            {
                                              "value": "first_transcript = transcript_list.find_transcript(\n                    [transcript.language_code]\n                )",
                                              "children": [
                                                {
                                                  "value": "first_transcript",
                                                  "children": []
                                                },
                                                {
                                                  "value": "transcript_list.find_transcript(\n                    [transcript.language_code]\n                )",
                                                  "children": [
                                                    {
                                                      "value": "transcript_list.find_transcript",
                                                      "children": [
                                                        {
                                                          "value": "transcript_list",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "find_transcript",
                                                          "children": []
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "(\n                    [transcript.language_code]\n                )",
                                                      "children": [
                                                        {
                                                          "value": "[transcript.language_code]",
                                                          "children": [
                                                            {
                                                              "value": "transcript.language_code",
                                                              "children": [
                                                                {
                                                                  "value": "transcript",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "language_code",
                                                                  "children": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "value": "return YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                                          "children": [
                                            {
                                              "value": "YouTubeTranscriptApi.get_transcript(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                                              "children": [
                                                {
                                                  "value": "YouTubeTranscriptApi.get_transcript",
                                                  "children": [
                                                    {
                                                      "value": "YouTubeTranscriptApi",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "get_transcript",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": "(\n                    video_id, languages=[first_transcript.language_code]\n                )",
                                                  "children": [
                                                    {
                                                      "value": "video_id",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "languages=[first_transcript.language_code]",
                                                      "children": [
                                                        {
                                                          "value": "languages",
                                                          "children": []
                                                        },
                                                        {
                                                          "value": "[first_transcript.language_code]",
                                                          "children": [
                                                            {
                                                              "value": "first_transcript.language_code",
                                                              "children": [
                                                                {
                                                                  "value": "first_transcript",
                                                                  "children": []
                                                                },
                                                                {
                                                                  "value": "language_code",
                                                                  "children": []
                                                                }
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": "except Exception:\n            raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                              "children": [
                                {
                                  "value": "Exception",
                                  "children": []
                                },
                                {
                                  "value": "raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                                  "children": [
                                    {
                                      "value": "raise ValueError(f\"No transcripts found for the video: {video_id}\")",
                                      "children": [
                                        {
                                          "value": "ValueError(f\"No transcripts found for the video: {video_id}\")",
                                          "children": [
                                            {
                                              "value": "ValueError",
                                              "children": []
                                            },
                                            {
                                              "value": "(f\"No transcripts found for the video: {video_id}\")",
                                              "children": [
                                                {
                                                  "value": "f\"No transcripts found for the video: {video_id}\"",
                                                  "children": [
                                                    {
                                                      "value": "f\"",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "No transcripts found for the video:",
                                                      "children": []
                                                    },
                                                    {
                                                      "value": "{video_id}",
                                                      "children": [
                                                        {
                                                          "value": "video_id",
                                                          "children": []
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": "\"",
                                                      "children": []
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "value": "def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        video_id = self.extract_video_id(input_data.youtube_url)\n        yield \"video_id\", video_id\n\n        transcript = self.get_transcript(video_id)\n        formatter = TextFormatter()\n        transcript_text = formatter.format_transcript(transcript)\n\n        yield \"transcript\", transcript_text",
              "children": [
                {
                  "value": "run",
                  "children": []
                },
                {
                  "value": "(self, input_data: Input, **kwargs)",
                  "children": [
                    {
                      "value": "self",
                      "children": []
                    },
                    {
                      "value": "input_data: Input",
                      "children": [
                        {
                          "value": "input_data",
                          "children": []
                        },
                        {
                          "value": "Input",
                          "children": [
                            {
                              "value": "Input",
                              "children": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "**kwargs",
                      "children": [
                        {
                          "value": "kwargs",
                          "children": []
                        }
                      ]
                    }
                  ]
                },
                {
                  "value": "BlockOutput",
                  "children": [
                    {
                      "value": "BlockOutput",
                      "children": []
                    }
                  ]
                },
                {
                  "value": "video_id = self.extract_video_id(input_data.youtube_url)\n        yield \"video_id\", video_id\n\n        transcript = self.get_transcript(video_id)\n        formatter = TextFormatter()\n        transcript_text = formatter.format_transcript(transcript)\n\n        yield \"transcript\", transcript_text",
                  "children": [
                    {
                      "value": "video_id = self.extract_video_id(input_data.youtube_url)",
                      "children": [
                        {
                          "value": "video_id = self.extract_video_id(input_data.youtube_url)",
                          "children": [
                            {
                              "value": "video_id",
                              "children": []
                            },
                            {
                              "value": "self.extract_video_id(input_data.youtube_url)",
                              "children": [
                                {
                                  "value": "self.extract_video_id",
                                  "children": [
                                    {
                                      "value": "self",
                                      "children": []
                                    },
                                    {
                                      "value": "extract_video_id",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "(input_data.youtube_url)",
                                  "children": [
                                    {
                                      "value": "input_data.youtube_url",
                                      "children": [
                                        {
                                          "value": "input_data",
                                          "children": []
                                        },
                                        {
                                          "value": "youtube_url",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "yield \"video_id\", video_id",
                      "children": [
                        {
                          "value": "yield \"video_id\", video_id",
                          "children": [
                            {
                              "value": "\"video_id\", video_id",
                              "children": [
                                {
                                  "value": "\"video_id\"",
                                  "children": [
                                    {
                                      "value": "\"",
                                      "children": []
                                    },
                                    {
                                      "value": "video_id",
                                      "children": []
                                    },
                                    {
                                      "value": "\"",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "video_id",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "transcript = self.get_transcript(video_id)",
                      "children": [
                        {
                          "value": "transcript = self.get_transcript(video_id)",
                          "children": [
                            {
                              "value": "transcript",
                              "children": []
                            },
                            {
                              "value": "self.get_transcript(video_id)",
                              "children": [
                                {
                                  "value": "self.get_transcript",
                                  "children": [
                                    {
                                      "value": "self",
                                      "children": []
                                    },
                                    {
                                      "value": "get_transcript",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "(video_id)",
                                  "children": [
                                    {
                                      "value": "video_id",
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "formatter = TextFormatter()",
                      "children": [
                        {
                          "value": "formatter = TextFormatter()",
                          "children": [
                            {
                              "value": "formatter",
                              "children": []
                            },
                            {
                              "value": "TextFormatter()",
                              "children": [
                                {
                                  "value": "TextFormatter",
                                  "children": []
                                },
                                {
                                  "value": "()",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "transcript_text = formatter.format_transcript(transcript)",
                      "children": [
                        {
                          "value": "transcript_text = formatter.format_transcript(transcript)",
                          "children": [
                            {
                              "value": "transcript_text",
                              "children": []
                            },
                            {
                              "value": "formatter.format_transcript(transcript)",
                              "children": [
                                {
                                  "value": "formatter.format_transcript",
                                  "children": [
                                    {
                                      "value": "formatter",
                                      "children": []
                                    },
                                    {
                                      "value": "format_transcript",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "(transcript)",
                                  "children": [
                                    {
                                      "value": "transcript",
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "value": "yield \"transcript\", transcript_text",
                      "children": [
                        {
                          "value": "yield \"transcript\", transcript_text",
                          "children": [
                            {
                              "value": "\"transcript\", transcript_text",
                              "children": [
                                {
                                  "value": "\"transcript\"",
                                  "children": [
                                    {
                                      "value": "\"",
                                      "children": []
                                    },
                                    {
                                      "value": "transcript",
                                      "children": []
                                    },
                                    {
                                      "value": "\"",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "value": "transcript_text",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}