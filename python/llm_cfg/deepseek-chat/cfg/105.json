{
    "nodes": [
        {
            "id": "chunk_0_Node_1",
            "code": "class Node(object):\n\n"
        },
        {
            "id": "chunk_0_Node_2",
            "code": "    def __init__(self, results):\n        self.results = results\n        self.next = next\n"
        },
        {
            "id": "chunk_0_Node_3",
            "code": "\n\n"
        },
        {
            "id": "chunk_1_LinkedList_1",
            "code": "class LinkedList(object):\n\n"
        },
        {
            "id": "chunk_1_LinkedList_2",
            "code": "    def __init__(self):\n        self.head = None\n        self.tail = None\n\n"
        },
        {
            "id": "chunk_1_LinkedList_3",
            "code": "    def move_to_front(self, node):\n        pass\n"
        },
        {
            "id": "chunk_1_LinkedList_4",
            "code": "    def append_to_front(self, node):\n        pass\n"
        },
        {
            "id": "chunk_1_LinkedList_5",
            "code": "    def remove_from_tail(self):\n        pass\n"
        },
        {
            "id": "chunk_2_Cache_1",
            "code": "class Cache(object):\n\n"
        },
        {
            "id": "chunk_2_Cache_2",
            "code": "    def __init__(self, MAX_SIZE):\n        self.MAX_SIZE = MAX_SIZE\n        self.size = 0\n        self.lookup = {}  # key: query, value: node\n        self.linked_list = LinkedList()\n\n"
        },
        {
            "id": "chunk_2_Cache_3",
            "code": "    def get(self, query):\n        \"\"\"Get the stored query result from the cache.\n\n        Accessing a node updates its position to the front of the LRU list.\n        \"\"\"\n"
        },
        {
            "id": "chunk_2_Cache_4",
            "code": "        node = self.lookup.get(query)\n        if node is None:\n"
        },
        {
            "id": "chunk_2_Cache_5",
            "code": "            return None\n"
        },
        {
            "id": "chunk_2_Cache_6",
            "code": "        self.linked_list.move_to_front(node)\n        return node.results\n"
        },
        {
            "id": "chunk_2_Cache_7",
            "code": "    def set(self, results, query):\n        \"\"\"Set the result for the given query key in the cache.\n\n        When updating an entry, updates its position to the front of the LRU list.\n        If the entry is new and the cache is at capacity, removes the oldest entry\n        before the new entry is added.\n        \"\"\"\n"
        },
        {
            "id": "chunk_2_Cache_8",
            "code": "        node = self.lookup.get(query)\n        if node is not None:\n"
        },
        {
            "id": "chunk_2_Cache_9",
            "code": "            # Key exists in cache, update the value\n            node.results = results\n            self.linked_list.move_to_front(node)\n"
        },
        {
            "id": "chunk_2_Cache_10",
            "code": "        else:\n            # Key does not exist in cache\n"
        },
        {
            "id": "chunk_2_Cache_11",
            "code": "            if self.size == self.MAX_SIZE:\n"
        },
        {
            "id": "chunk_2_Cache_12",
            "code": "                # Remove the oldest entry from the linked list and lookup\n                self.lookup.pop(self.linked_list.tail.query, None)\n                self.linked_list.remove_from_tail()\n"
        },
        {
            "id": "chunk_2_Cache_13",
            "code": "            else:\n                self.size += 1\n"
        },
        {
            "id": "chunk_2_Cache_14",
            "code": "            # Add the new key and value\n            new_node = Node(results)\n            self.linked_list.append_to_front(new_node)\n            self.lookup[query] = new_node\n"
        }
    ],
    "edges": [
        {
            "from": "chunk_0_Node_1",
            "to": "chunk_0_Node_2"
        },
        {
            "from": "chunk_2_Cache_1",
            "to": "chunk_2_Cache_2"
        },
        {
            "from": "chunk_2_Cache_3",
            "to": "chunk_2_Cache_4"
        },
        {
            "from": "chunk_2_Cache_4",
            "to": "chunk_2_Cache_5"
        },
        {
            "from": "chunk_2_Cache_4",
            "to": "chunk_2_Cache_6"
        },
        {
            "from": "chunk_2_Cache_7",
            "to": "chunk_2_Cache_8"
        },
        {
            "from": "chunk_2_Cache_8",
            "to": "chunk_2_Cache_9"
        },
        {
            "from": "chunk_2_Cache_8",
            "to": "chunk_2_Cache_10"
        },
        {
            "from": "chunk_2_Cache_10",
            "to": "chunk_2_Cache_11"
        },
        {
            "from": "chunk_2_Cache_11",
            "to": "chunk_2_Cache_12"
        },
        {
            "from": "chunk_2_Cache_11",
            "to": "chunk_2_Cache_13"
        },
        {
            "from": "chunk_2_Cache_12",
            "to": "chunk_2_Cache_14"
        },
        {
            "from": "chunk_2_Cache_13",
            "to": "chunk_2_Cache_14"
        }
    ]
}