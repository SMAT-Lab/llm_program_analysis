{
    "nodes": [
        {
            "id": "chunk_0_GlobalBlock_1",
            "code": "from typing import Any\n"
        },
        {
            "id": "chunk_0_GlobalBlock_2",
            "code": "from backend.data.block import Block, BlockCategory, BlockOutput, BlockSchema\n"
        },
        {
            "id": "chunk_0_GlobalBlock_3",
            "code": "from backend.data.model import SchemaField\n"
        },
        {
            "id": "chunk_0_GlobalBlock_4",
            "code": "from backend.util.json import json\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_1",
            "code": "class StepThroughItemsBlock(Block):\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_2",
            "code": "    class Input(BlockSchema):\n        items: list = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default=[],\n        )\n        items_object: dict = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default={},\n        )\n        items_str: str = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default=\"\",\n        )\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_3",
            "code": "    class Output(BlockSchema):\n        item: Any = SchemaField(description=\"The current item in the iteration\")\n        key: Any = SchemaField(\n            description=\"The key or index of the current item in the iteration\",\n        )\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_4",
            "code": "    def __init__(self):\n        super().__init__(\n            id=\"f66a3543-28d3-4ab5-8945-9b336371e2ce\",\n            input_schema=StepThroughItemsBlock.Input,\n            output_schema=StepThroughItemsBlock.Output,\n            categories={BlockCategory.LOGIC},\n            description=\"Iterates over a list or dictionary and outputs each item.\",\n            test_input={\"items\": [1, 2, 3, {\"key1\": \"value1\", \"key2\": \"value2\"}]},\n            test_output=[\n                (\"item\", 1),\n                (\"key\", 0),\n                (\"item\", 2),\n                (\"key\", 1),\n                (\"item\", 3),\n                (\"key\", 2),\n                (\"item\", {\"key1\": \"value1\", \"key2\": \"value2\"}),\n                (\"key\", 3),\n            ],\n            test_mock={},\n        )\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_5",
            "code": "    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n        for data in [input_data.items, input_data.items_object, input_data.items_str]:\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_6",
            "code": "            if not data:\n                continue\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_7",
            "code": "            if isinstance(data, str):\n                items = json.loads(data)\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_8",
            "code": "            else:\n                items = data\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_9",
            "code": "            if isinstance(items, dict):\n                # If items is a dictionary, iterate over its values\n                for item in items.values():\n                    yield \"item\", item\n                    yield \"key\", item\n"
        },
        {
            "id": "chunk_1_StepThroughItemsBlock_10",
            "code": "            else:\n                # If items is a list, iterate over the list\n                for index, item in enumerate(items):\n                    yield \"item\", item\n                    yield \"key\", index\n"
        },
        {
            "id": "chunk_2_StepThroughItemsBlock.Input_1",
            "code": "    class Input(BlockSchema):\n        items: list = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default=[],\n        )\n"
        },
        {
            "id": "chunk_2_StepThroughItemsBlock.Input_2",
            "code": "        items_object: dict = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default={},\n        )\n"
        },
        {
            "id": "chunk_2_StepThroughItemsBlock.Input_3",
            "code": "        items_str: str = SchemaField(\n            advanced=False,\n            description=\"The list or dictionary of items to iterate over\",\n            placeholder=\"[1, 2, 3, 4, 5] or {'key1': 'value1', 'key2': 'value2'}\",\n            default=\"\",\n        )\n"
        },
        {
            "id": "chunk_3_StepThroughItemsBlock.Output_1",
            "code": "    class Output(BlockSchema):\n        item: Any = SchemaField(description=\"The current item in the iteration\")\n        key: Any = SchemaField(\n            description=\"The key or index of the current item in the iteration\",\n        )\n"
        },
        {
            "id": "chunk_4_StepThroughItemsBlock.__init___1",
            "code": "    def __init__(self):\n        super().__init__(\n            id=\"f66a3543-28d3-4ab5-8945-9b336371e2ce\",\n            input_schema=StepThroughItemsBlock.Input,\n            output_schema=StepThroughItemsBlock.Output,\n            categories={BlockCategory.LOGIC},\n            description=\"Iterates over a list or dictionary and outputs each item.\",\n            test_input={\"items\": [1, 2, 3, {\"key1\": \"value1\", \"key2\": \"value2\"}]},\n            test_output=[\n                (\"item\", 1),\n                (\"key\", 0),\n                (\"item\", 2),\n                (\"key\", 1),\n                (\"item\", 3),\n                (\"key\", 2),\n                (\"item\", {\"key1\": \"value1\", \"key2\": \"value2\"}),\n                (\"key\", 3),\n            ],\n            test_mock={},\n        )\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_1",
            "code": "    def run(self, input_data: Input, **kwargs) -> BlockOutput:\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_2",
            "code": "        for data in [input_data.items, input_data.items_object, input_data.items_str]:\n            if not data:\n                continue\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_3",
            "code": "            if isinstance(data, str):\n                items = json.loads(data)\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_4",
            "code": "            else:\n                items = data\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_5",
            "code": "            if isinstance(items, dict):\n                # If items is a dictionary, iterate over its values\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_6",
            "code": "                for item in items.values():\n                    yield \"item\", item\n                    yield \"key\", item\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_7",
            "code": "            else:\n                # If items is a list, iterate over the list\n"
        },
        {
            "id": "chunk_5_StepThroughItemsBlock.run_8",
            "code": "                for index, item in enumerate(items):\n                    yield \"item\", item\n                    yield \"key\", index\n"
        }
    ],
    "edges": [
        {
            "from": "chunk_0_GlobalBlock_1",
            "to": "chunk_0_GlobalBlock_2"
        },
        {
            "from": "chunk_0_GlobalBlock_2",
            "to": "chunk_0_GlobalBlock_3"
        },
        {
            "from": "chunk_0_GlobalBlock_3",
            "to": "chunk_0_GlobalBlock_4"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_1",
            "to": "chunk_1_StepThroughItemsBlock_2"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_1",
            "to": "chunk_1_StepThroughItemsBlock_3"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_1",
            "to": "chunk_1_StepThroughItemsBlock_4"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_4",
            "to": "chunk_1_StepThroughItemsBlock_5"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_5",
            "to": "chunk_1_StepThroughItemsBlock_6"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_6",
            "to": "chunk_1_StepThroughItemsBlock_7"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_6",
            "to": "chunk_1_StepThroughItemsBlock_8"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_7",
            "to": "chunk_1_StepThroughItemsBlock_8"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_8",
            "to": "chunk_1_StepThroughItemsBlock_9"
        },
        {
            "from": "chunk_1_StepThroughItemsBlock_8",
            "to": "chunk_1_StepThroughItemsBlock_10"
        },
        {
            "from": "chunk_2_StepThroughItemsBlock.Input_1",
            "to": "chunk_2_StepThroughItemsBlock.Input_2"
        },
        {
            "from": "chunk_2_StepThroughItemsBlock.Input_2",
            "to": "chunk_2_StepThroughItemsBlock.Input_3"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_1",
            "to": "chunk_5_StepThroughItemsBlock.run_2"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_2",
            "to": "chunk_5_StepThroughItemsBlock.run_3"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_2",
            "to": "chunk_5_StepThroughItemsBlock.run_4"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_3",
            "to": "chunk_5_StepThroughItemsBlock.run_5"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_4",
            "to": "chunk_5_StepThroughItemsBlock.run_5"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_5",
            "to": "chunk_5_StepThroughItemsBlock.run_6"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_5",
            "to": "chunk_5_StepThroughItemsBlock.run_7"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_6",
            "to": "chunk_5_StepThroughItemsBlock.run_2"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_7",
            "to": "chunk_5_StepThroughItemsBlock.run_8"
        },
        {
            "from": "chunk_5_StepThroughItemsBlock.run_8",
            "to": "chunk_5_StepThroughItemsBlock.run_2"
        }
    ]
}