{
    "nodes": [
        {
            "id": "chunk_0_GlobalBlock_1",
            "code": "import threading\nfrom typing import Callable, ParamSpec, TypeVar\n"
        },
        {
            "id": "chunk_0_GlobalBlock_2",
            "code": "P = ParamSpec(\"P\")\nR = TypeVar(\"R\")\n"
        },
        {
            "id": "chunk_1_thread_cached_1",
            "code": "def thread_cached(func: Callable[P, R]) -> Callable[P, R]:\n    thread_local = threading.local()\n"
        },
        {
            "id": "chunk_1_thread_cached_2",
            "code": "    def wrapper(*args: P.args, **kwargs: P.kwargs) -> R:\n        cache = getattr(thread_local, \"cache\", None)\n"
        },
        {
            "id": "chunk_1_thread_cached_3",
            "code": "        if cache is None:\n            cache = thread_local.cache = {}\n"
        },
        {
            "id": "chunk_1_thread_cached_4",
            "code": "        key = (args, tuple(sorted(kwargs.items())))\n"
        },
        {
            "id": "chunk_1_thread_cached_5",
            "code": "        if key not in cache:\n            cache[key] = func(*args, **kwargs)\n"
        },
        {
            "id": "chunk_1_thread_cached_6",
            "code": "        return cache[key]\n"
        },
        {
            "id": "chunk_1_thread_cached_7",
            "code": "    return wrapper\n"
        },
        {
            "id": "chunk_2_wrapper_1",
            "code": "    def wrapper(*args: P.args, **kwargs: P.kwargs) -> R:\n        cache = getattr(thread_local, \"cache\", None)\n"
        },
        {
            "id": "chunk_2_wrapper_2",
            "code": "        if cache is None:\n            cache = thread_local.cache = {}\n"
        },
        {
            "id": "chunk_2_wrapper_3",
            "code": "        key = (args, tuple(sorted(kwargs.items())))\n"
        },
        {
            "id": "chunk_2_wrapper_4",
            "code": "        if key not in cache:\n            cache[key] = func(*args, **kwargs)\n"
        },
        {
            "id": "chunk_2_wrapper_5",
            "code": "        return cache[key]\n"
        }
    ],
    "edges": [
        {
            "from": "chunk_0_GlobalBlock_1",
            "to": "chunk_0_GlobalBlock_2"
        },
        {
            "from": "chunk_1_thread_cached_1",
            "to": "chunk_1_thread_cached_2"
        },
        {
            "from": "chunk_1_thread_cached_2",
            "to": "chunk_1_thread_cached_3"
        },
        {
            "from": "chunk_1_thread_cached_3",
            "to": "chunk_1_thread_cached_4"
        },
        {
            "from": "chunk_1_thread_cached_4",
            "to": "chunk_1_thread_cached_5"
        },
        {
            "from": "chunk_1_thread_cached_5",
            "to": "chunk_1_thread_cached_6"
        },
        {
            "from": "chunk_1_thread_cached_6",
            "to": "chunk_1_thread_cached_7"
        },
        {
            "from": "chunk_2_wrapper_1",
            "to": "chunk_2_wrapper_2"
        },
        {
            "from": "chunk_2_wrapper_2",
            "to": "chunk_2_wrapper_3"
        },
        {
            "from": "chunk_2_wrapper_3",
            "to": "chunk_2_wrapper_4"
        },
        {
            "from": "chunk_2_wrapper_4",
            "to": "chunk_2_wrapper_5"
        }
    ]
}