{
  "name": "example_script",
  "type": "CFG",
  "start_line": 1,
  "end_line": 66,
  "functions": [],
  "classes": [
    {
      "name": "Node",
      "type": "class",
      "start_line": 1,
      "end_line": 5,
      "functions": [
        {
          "name": "__init__",
          "type": "function",
          "start_line": 3,
          "end_line": 5,
          "functions": [],
          "classes": [],
          "simplified_code": "    def __init__(self, results):\n        self.results = results\n        self.next = next",
          "blocks": [
            {
              "id": 1,
              "label": "def __init__(self, results):\nself.results = results\nself.next = next",
              "successors": []
            }
          ]
        }
      ],
      "simplified_code": "class Node(object):\n\n        self.next = next",
      "blocks": [
        {
          "id": 1,
          "label": "class Node(object):\nself.next = next",
          "successors": []
        }
      ]
    },
    {
      "name": "LinkedList",
      "type": "class",
      "start_line": 8,
      "end_line": 21,
      "functions": [
        {
          "name": "__init__",
          "type": "function",
          "start_line": 10,
          "end_line": 12,
          "functions": [],
          "classes": [],
          "simplified_code": "    def __init__(self):\n        self.head = None\n        self.tail = None",
          "blocks": [
            {
              "id": 1,
              "label": "def __init__(self):\nself.head = None\nself.tail = None",
              "successors": []
            }
          ]
        },
        {
          "name": "move_to_front",
          "type": "function",
          "start_line": 14,
          "end_line": 15,
          "functions": [],
          "classes": [],
          "simplified_code": "    def move_to_front(self, node):\n        pass",
          "blocks": [
            {
              "id": 1,
              "label": "def move_to_front(self, node):\npass",
              "successors": []
            }
          ]
        },
        {
          "name": "append_to_front",
          "type": "function",
          "start_line": 17,
          "end_line": 18,
          "functions": [],
          "classes": [],
          "simplified_code": "    def append_to_front(self, node):\n        pass",
          "blocks": [
            {
              "id": 1,
              "label": "def append_to_front(self, node):\npass",
              "successors": []
            }
          ]
        },
        {
          "name": "remove_from_tail",
          "type": "function",
          "start_line": 20,
          "end_line": 21,
          "functions": [],
          "classes": [],
          "simplified_code": "    def remove_from_tail(self):\n        pass",
          "blocks": [
            {
              "id": 1,
              "label": "def remove_from_tail(self):\npass",
              "successors": []
            }
          ]
        }
      ],
      "simplified_code": "class LinkedList(object):\n\n        self.tail = None\n\n        pass\n\n        pass\n\n        pass",
      "blocks": [
        {
          "id": 1,
          "label": "class LinkedList(object):\nself.tail = None\npass\npass\npass",
          "successors": []
        }
      ]
    },
    {
      "name": "Cache",
      "type": "class",
      "start_line": 24,
      "end_line": 66,
      "functions": [
        {
          "name": "__init__",
          "type": "function",
          "start_line": 26,
          "end_line": 30,
          "functions": [],
          "classes": [],
          "simplified_code": "    def __init__(self, MAX_SIZE):\n        self.MAX_SIZE = MAX_SIZE\n        self.size = 0\n        self.lookup = {}  # key: query, value: node\n        self.linked_list = LinkedList()",
          "blocks": [
            {
              "id": 1,
              "label": "self.MAX_SIZE = MAX_SIZE\nself.size = 0\nself.lookup = {}\nself.linked_list = LinkedList()",
              "successors": []
            }
          ]
        },
        {
          "name": "get",
          "type": "function",
          "start_line": 32,
          "end_line": 41,
          "functions": [],
          "classes": [],
          "simplified_code": "    def get(self, query):\n        \"\"\"Get the stored query result from the cache.\n\n        Accessing a node updates its position to the front of the LRU list.\n        \"\"\"\n        node = self.lookup.get(query)\n        if node is None:\n            return None\n        self.linked_list.move_to_front(node)\n        return node.results",
          "blocks": [
            {
              "id": 1,
              "label": "node = self.lookup.get(query)\nif node is None:\nreturn None",
              "successors": []
            },
            {
              "id": 4,
              "label": "self.linked_list.move_to_front(node)\nreturn node.results",
              "successors": []
            }
          ]
        },
        {
          "name": "set",
          "type": "function",
          "start_line": 43,
          "end_line": 66,
          "functions": [],
          "classes": [],
          "simplified_code": "    def set(self, results, query):\n        \"\"\"Set the result for the given query key in the cache.\n\n        When updating an entry, updates its position to the front of the LRU list.\n        If the entry is new and the cache is at capacity, removes the oldest entry\n        before the new entry is added.\n        \"\"\"\n        node = self.lookup.get(query)\n        if node is not None:\n            # Key exists in cache, update the value\n            node.results = results\n            self.linked_list.move_to_front(node)\n        else:\n            # Key does not exist in cache\n            if self.size == self.MAX_SIZE:\n                # Remove the oldest entry from the linked list and lookup\n                self.lookup.pop(self.linked_list.tail.query, None)\n                self.linked_list.remove_from_tail()\n            else:\n                self.size += 1\n            # Add the new key and value\n            new_node = Node(results)\n            self.linked_list.append_to_front(new_node)\n            self.lookup[query] = new_node",
          "blocks": [
            {
              "id": 1,
              "label": "node = self.lookup.get(query)\nif node is not None:\nnode.results = results\nself.linked_list.move_to_front(node)",
              "successors": [
                12
              ]
            },
            {
              "id": 6,
              "label": "if self.size == self.MAX_SIZE:\nself.lookup.pop(self.linked_list.tail.query, None)\nself.linked_list.remove_from_tail()",
              "successors": [
                11
              ]
            },
            {
              "id": 10,
              "label": "self.size += 1",
              "successors": [
                11
              ]
            },
            {
              "id": 11,
              "label": "new_node = Node(results)",
              "successors": [
                12
              ]
            },
            {
              "id": 12,
              "label": "self.linked_list.append_to_front(new_node)\nself.lookup[query] = new_node",
              "successors": []
            }
          ]
        }
      ],
      "simplified_code": "class Cache(object):\n\n        self.linked_list = LinkedList()\n\n        return node.results\n\n            self.lookup[query] = new_node",
      "blocks": [
        {
          "id": 1,
          "label": "class Cache(object):\nself.linked_list = LinkedList()\nreturn node.results\nself.lookup[query] = new_node",
          "successors": []
        }
      ]
    }
  ],
  "simplified_code": "        self.next = next\n\n\n        pass\n\n\n            self.lookup[query] = new_node",
  "blocks": [
    {
      "id": 1,
      "label": "self.next = next\npass\nself.lookup[query] = new_node",
      "successors": []
    }
  ]
}