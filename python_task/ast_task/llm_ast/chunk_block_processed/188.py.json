{
    "type": "module",
    "start_token": 0,
    "end_token": 1338,
    "label": "from datetime import datetime\n\nimport prisma.errors\nimport prisma.models\nimport pytest\nfrom prisma import Prisma\n\nimport backend.server.v2.store.db as db\nfrom backend.server.v2.store.model import Profile\n\n\n@pytest.fixture(autouse=True)\nasync def setup_prisma():\n    # Don't register client if already registered\n    try:\n        Prisma()\n    except prisma.errors.ClientAlreadyRegisteredError:\n        pass\n    yield\n\n\n@pytest.mark.asyncio\nasync def test_get_store_agents(mocker):\n    # Mock data\n    mock_agents = [\n        prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )\n    ]\n\n    # Mock prisma calls\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_many = mocker.AsyncMock(return_value=mock_agents)\n    mock_store_agent.return_value.count = mocker.AsyncMock(return_value=1)\n\n    # Call function\n    result = await db.get_store_agents()\n\n    # Verify results\n    assert len(result.agents) == 1\n    assert result.agents[0].slug == \"test-agent\"\n    assert result.pagination.total_items == 1\n\n    # Verify mocks called correctly\n    mock_store_agent.return_value.find_many.assert_called_once()\n    mock_store_agent.return_value.count.assert_called_once()\n\n\n@pytest.mark.asyncio\nasync def test_get_store_agent_details(mocker):\n    # Mock data\n    mock_agent = prisma.models.StoreAgent(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )\n\n    # Mock prisma call\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    # Call function\n    result = await db.get_store_agent_details(\"creator\", \"test-agent\")\n\n    # Verify results\n    assert result.slug == \"test-agent\"\n    assert result.agent_name == \"Test Agent\"\n\n    # Verify mock called correctly\n    mock_store_agent.return_value.find_first.assert_called_once_with(\n        where={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}\n    )\n\n\n@pytest.mark.asyncio\nasync def test_get_store_creator_details(mocker):\n    # Mock data\n    mock_creator_data = prisma.models.Creator(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )\n\n    # Mock prisma call\n    mock_creator = mocker.patch(\"prisma.models.Creator.prisma\")\n    mock_creator.return_value.find_unique = mocker.AsyncMock()\n    # Configure the mock to return values that will pass validation\n    mock_creator.return_value.find_unique.return_value = mock_creator_data\n\n    # Call function\n    result = await db.get_store_creator_details(\"creator\")\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n    assert result.description == \"Test description\"\n    assert result.avatar_url == \"avatar.jpg\"\n\n    # Verify mock called correctly\n    mock_creator.return_value.find_unique.assert_called_once_with(\n        where={\"username\": \"creator\"}\n    )\n\n\n@pytest.mark.asyncio\nasync def test_create_store_submission(mocker):\n    # Mock data\n    mock_agent = prisma.models.AgentGraph(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )\n\n    mock_listing = prisma.models.StoreListing(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )\n\n    # Mock prisma calls\n    mock_agent_graph = mocker.patch(\"prisma.models.AgentGraph.prisma\")\n    mock_agent_graph.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    mock_store_listing = mocker.patch(\"prisma.models.StoreListing.prisma\")\n    mock_store_listing.return_value.find_first = mocker.AsyncMock(return_value=None)\n    mock_store_listing.return_value.create = mocker.AsyncMock(return_value=mock_listing)\n\n    # Call function\n    result = await db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )\n\n    # Verify results\n    assert result.name == \"Test Agent\"\n    assert result.description == \"Test description\"\n\n    # Verify mocks called correctly\n    mock_agent_graph.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.create.assert_called_once()\n\n\n@pytest.mark.asyncio\nasync def test_update_profile(mocker):\n    # Mock data\n    mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )\n\n    # Mock prisma calls\n    mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")\n    mock_profile_db.return_value.find_first = mocker.AsyncMock(\n        return_value=mock_profile\n    )\n    mock_profile_db.return_value.update = mocker.AsyncMock(return_value=mock_profile)\n\n    # Test data\n    profile = Profile(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )\n\n    # Call function\n    result = await db.update_or_create_profile(\"user-id\", profile)\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n\n    # Verify mocks called correctly\n    mock_profile_db.return_value.find_first.assert_called_once()\n    mock_profile_db.return_value.update.assert_called_once()\n\n\n@pytest.mark.asyncio\n",
    "children": [
        {
            "type": "import_from_statement",
            "start_token": 0,
            "end_token": 3,
            "label": "from datetime import datetime",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 1,
                    "end_token": 1,
                    "label": "datetime",
                    "children": []
                }
            ]
        },
        {
            "type": "import_statement",
            "start_token": 6,
            "end_token": 9,
            "label": "import prisma.errors",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 7,
                    "end_token": 9,
                    "label": "prisma.errors",
                    "children": []
                }
            ]
        },
        {
            "type": "import_statement",
            "start_token": 11,
            "end_token": 14,
            "label": "import prisma.models",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 12,
                    "end_token": 14,
                    "label": "prisma.models",
                    "children": []
                }
            ]
        },
        {
            "type": "import_statement",
            "start_token": 16,
            "end_token": 17,
            "label": "import pytest",
            "children": []
        },
        {
            "type": "import_from_statement",
            "start_token": 19,
            "end_token": 22,
            "label": "from prisma import Prisma",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 20,
                    "end_token": 20,
                    "label": "prisma",
                    "children": []
                }
            ]
        },
        {
            "type": "aliased_import",
            "start_token": 25,
            "end_token": 36,
            "label": "import backend.server.v2.store.db as db",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 26,
                    "end_token": 34,
                    "label": "backend.server.v2.store.db",
                    "children": []
                },
                {
                    "type": "as_pattern",
                    "start_token": 35,
                    "end_token": 36,
                    "label": "as db",
                    "children": []
                }
            ]
        },
        {
            "type": "import_from_statement",
            "start_token": 38,
            "end_token": 49,
            "label": "from backend.server.v2.store.model import Profile",
            "children": [
                {
                    "type": "dotted_name",
                    "start_token": 39,
                    "end_token": 47,
                    "label": "backend.server.v2.store.model",
                    "children": []
                }
            ]
        },
        {
            "type": "decorated_definition",
            "start_token": 53,
            "end_token": 61,
            "label": "@pytest.fixture(autouse=True)",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 53,
                    "end_token": 60,
                    "label": "@pytest.fixture(autouse=True",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 54,
                            "end_token": 56,
                            "label": "pytest.fixture",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 54,
                                    "end_token": 56,
                                    "label": "pytest.fixture",
                                    "children": []
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "argument_list",
                    "start_token": 57,
                    "end_token": 60,
                    "label": "(autouse=True",
                    "children": []
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 63,
            "end_token": 98,
            "label": "async def setup_prisma():\n    # Don't register client if already registered\n    try:\n        Prisma()\n    except prisma.errors.ClientAlreadyRegisteredError:\n        pass\n    yield\n",
            "children": [
                {
                    "type": "async",
                    "start_token": 63,
                    "end_token": 63,
                    "label": "async",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 64,
                    "end_token": 65,
                    "label": "def setup_prisma",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 66,
                    "end_token": 67,
                    "label": "()",
                    "children": []
                },
                {
                    "type": "block",
                    "start_token": 68,
                    "end_token": 98,
                    "label": ":\n    # Don't register client if already registered\n    try:\n        Prisma()\n    except prisma.errors.ClientAlreadyRegisteredError:\n        pass\n    yield\n",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 70,
                            "end_token": 78,
                            "label": "# Don't register client if already registered",
                            "children": []
                        },
                        {
                            "type": "try_statement",
                            "start_token": 80,
                            "end_token": 95,
                            "label": "try:\n        Prisma()\n    except prisma.errors.ClientAlreadyRegisteredError:\n        pass",
                            "children": [
                                {
                                    "type": "block",
                                    "start_token": 82,
                                    "end_token": 86,
                                    "label": "\n        Prisma()\n",
                                    "children": [
                                        {
                                            "type": "expression_statement",
                                            "start_token": 83,
                                            "end_token": 85,
                                            "label": "Prisma()",
                                            "children": [
                                                {
                                                    "type": "call",
                                                    "start_token": 83,
                                                    "end_token": 85,
                                                    "label": "Prisma()",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 83,
                                                            "end_token": 83,
                                                            "label": "Prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "argument_list",
                                                            "start_token": 84,
                                                            "end_token": 85,
                                                            "label": "()",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "except_clause",
                                    "start_token": 87,
                                    "end_token": 95,
                                    "label": "except prisma.errors.ClientAlreadyRegisteredError:\n        pass",
                                    "children": [
                                        {
                                            "type": "dotted_name",
                                            "start_token": 88,
                                            "end_token": 92,
                                            "label": "prisma.errors.ClientAlreadyRegisteredError",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 88,
                                                    "end_token": 88,
                                                    "label": "prisma",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 90,
                                                    "end_token": 90,
                                                    "label": "errors",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 92,
                                                    "end_token": 92,
                                                    "label": "ClientAlreadyRegisteredError",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "block",
                                            "start_token": 93,
                                            "end_token": 95,
                                            "label": ":\n        pass",
                                            "children": [
                                                {
                                                    "type": "pass_statement",
                                                    "start_token": 95,
                                                    "end_token": 95,
                                                    "label": "pass",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "yield",
                            "start_token": 97,
                            "end_token": 97,
                            "label": "yield",
                            "children": []
                        }
                    ]
                }
            ],
            "name": "setup_prisma",
            "start_line": 13,
            "end_line": 19
        },
        {
            "type": "decorated_definition",
            "start_token": 101,
            "end_token": 107,
            "label": "@pytest.mark.asyncio\n",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 101,
                    "end_token": 106,
                    "label": "@pytest.mark.asyncio",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 102,
                            "end_token": 106,
                            "label": "pytest.mark.asyncio",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 102,
                                    "end_token": 106,
                                    "label": "pytest.mark.asyncio",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 108,
            "end_token": 350,
            "label": "async def test_get_store_agents(mocker):\n    # Mock data\n    mock_agents = [\n        prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )\n    ]\n\n    # Mock prisma calls\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_many = mocker.AsyncMock(return_value=mock_agents)\n    mock_store_agent.return_value.count = mocker.AsyncMock(return_value=1)\n\n    # Call function\n    result = await db.get_store_agents()\n\n    # Verify results\n    assert len(result.agents) == 1\n    assert result.agents[0].slug == \"test-agent\"\n    assert result.pagination.total_items == 1\n\n    # Verify mocks called correctly\n    mock_store_agent.return_value.find_many.assert_called_once()\n    mock_store_agent.return_value.count.assert_called_once()\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 108,
                    "end_token": 108,
                    "label": "async",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 109,
                    "end_token": 109,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 111,
                    "end_token": 113,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 112,
                            "end_token": 112,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 115,
                    "end_token": 349,
                    "label": "\n    # Mock data\n    mock_agents = [\n        prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )\n    ]\n\n    # Mock prisma calls\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_many = mocker.AsyncMock(return_value=mock_agents)\n    mock_store_agent.return_value.count = mocker.AsyncMock(return_value=1)\n\n    # Call function\n    result = await db.get_store_agents()\n\n    # Verify results\n    assert len(result.agents) == 1\n    assert result.agents[0].slug == \"test-agent\"\n    assert result.pagination.total_items == 1\n\n    # Verify mocks called correctly\n    mock_store_agent.return_value.find_many.assert_called_once()\n    mock_store_agent.return_value.count.assert_called_once()",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 116,
                            "end_token": 119,
                            "label": "# Mock data\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 120,
                            "end_token": 224,
                            "label": "mock_agents = [\n        prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )\n    ]",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 120,
                                    "end_token": 120,
                                    "label": "mock_agents",
                                    "children": []
                                },
                                {
                                    "type": "list",
                                    "start_token": 122,
                                    "end_token": 224,
                                    "label": "[\n        prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )\n    ]",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 124,
                                            "end_token": 222,
                                            "label": "prisma.models.StoreAgent(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 124,
                                                    "end_token": 128,
                                                    "label": "prisma.models.StoreAgent",
                                                    "children": [
                                                        {
                                                            "type": "dotted_name",
                                                            "start_token": 124,
                                                            "end_token": 126,
                                                            "label": "prisma.models",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 128,
                                                            "end_token": 128,
                                                            "label": "StoreAgent",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 129,
                                                    "end_token": 222,
                                                    "label": "(\n            listing_id=\"test-id\",\n            storeListingVersionId=\"version123\",\n            slug=\"test-agent\",\n            agent_name=\"Test Agent\",\n            agent_video=None,\n            agent_image=[\"image.jpg\"],\n            featured=False,\n            creator_username=\"creator\",\n            creator_avatar=\"avatar.jpg\",\n            sub_heading=\"Test heading\",\n            description=\"Test description\",\n            categories=[],\n            runs=10,\n            rating=4.5,\n            versions=[\"1.0\"],\n            updated_at=datetime.now(),\n        )",
                                                    "children": [
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 131,
                                                            "end_token": 133,
                                                            "label": "listing_id=\"test-id\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 131,
                                                                    "end_token": 131,
                                                                    "label": "listing_id",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 133,
                                                                    "end_token": 133,
                                                                    "label": "\"test-id\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 136,
                                                            "end_token": 138,
                                                            "label": "storeListingVersionId=\"version123\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 136,
                                                                    "end_token": 136,
                                                                    "label": "storeListingVersionId",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 138,
                                                                    "end_token": 138,
                                                                    "label": "\"version123\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 141,
                                                            "end_token": 143,
                                                            "label": "slug=\"test-agent\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 141,
                                                                    "end_token": 141,
                                                                    "label": "slug",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 143,
                                                                    "end_token": 143,
                                                                    "label": "\"test-agent\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 146,
                                                            "end_token": 148,
                                                            "label": "agent_name=\"Test Agent\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 146,
                                                                    "end_token": 146,
                                                                    "label": "agent_name",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 148,
                                                                    "end_token": 148,
                                                                    "label": "\"Test Agent\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 151,
                                                            "end_token": 153,
                                                            "label": "agent_video=None",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 151,
                                                                    "end_token": 151,
                                                                    "label": "agent_video",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "none",
                                                                    "start_token": 153,
                                                                    "end_token": 153,
                                                                    "label": "None",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 156,
                                                            "end_token": 160,
                                                            "label": "agent_image=[\"image.jpg\"]",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 156,
                                                                    "end_token": 156,
                                                                    "label": "agent_image",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 158,
                                                                    "end_token": 160,
                                                                    "label": "[\"image.jpg\"]",
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 159,
                                                                            "end_token": 159,
                                                                            "label": "\"image.jpg\"",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 163,
                                                            "end_token": 165,
                                                            "label": "featured=False",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 163,
                                                                    "end_token": 163,
                                                                    "label": "featured",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "false",
                                                                    "start_token": 165,
                                                                    "end_token": 165,
                                                                    "label": "False",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 168,
                                                            "end_token": 170,
                                                            "label": "creator_username=\"creator\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 168,
                                                                    "end_token": 168,
                                                                    "label": "creator_username",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 170,
                                                                    "end_token": 170,
                                                                    "label": "\"creator\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 173,
                                                            "end_token": 175,
                                                            "label": "creator_avatar=\"avatar.jpg\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 173,
                                                                    "end_token": 173,
                                                                    "label": "creator_avatar",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 175,
                                                                    "end_token": 175,
                                                                    "label": "\"avatar.jpg\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 178,
                                                            "end_token": 180,
                                                            "label": "sub_heading=\"Test heading\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 178,
                                                                    "end_token": 178,
                                                                    "label": "sub_heading",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 180,
                                                                    "end_token": 180,
                                                                    "label": "\"Test heading\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 183,
                                                            "end_token": 185,
                                                            "label": "description=\"Test description\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 183,
                                                                    "end_token": 183,
                                                                    "label": "description",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 185,
                                                                    "end_token": 185,
                                                                    "label": "\"Test description\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 188,
                                                            "end_token": 191,
                                                            "label": "categories=[]",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 188,
                                                                    "end_token": 188,
                                                                    "label": "categories",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 190,
                                                                    "end_token": 191,
                                                                    "label": "[]",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 194,
                                                            "end_token": 196,
                                                            "label": "runs=10",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 194,
                                                                    "end_token": 194,
                                                                    "label": "runs",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "start_token": 196,
                                                                    "end_token": 196,
                                                                    "label": "10",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 199,
                                                            "end_token": 203,
                                                            "label": "rating=4.5",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 199,
                                                                    "end_token": 199,
                                                                    "label": "rating",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "float",
                                                                    "start_token": 201,
                                                                    "end_token": 203,
                                                                    "label": "4.5",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 206,
                                                            "end_token": 210,
                                                            "label": "versions=[\"1.0\"]",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 206,
                                                                    "end_token": 206,
                                                                    "label": "versions",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "list",
                                                                    "start_token": 208,
                                                                    "end_token": 210,
                                                                    "label": "[\"1.0\"]",
                                                                    "children": [
                                                                        {
                                                                            "type": "string",
                                                                            "start_token": 209,
                                                                            "end_token": 209,
                                                                            "label": "\"1.0\"",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "assignment",
                                                            "start_token": 213,
                                                            "end_token": 219,
                                                            "label": "updated_at=datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 213,
                                                                    "end_token": 213,
                                                                    "label": "updated_at",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "call",
                                                                    "start_token": 215,
                                                                    "end_token": 219,
                                                                    "label": "datetime.now()",
                                                                    "children": [
                                                                        {
                                                                            "type": "attribute",
                                                                            "start_token": 215,
                                                                            "end_token": 217,
                                                                            "label": "datetime.now",
                                                                            "children": [
                                                                                {
                                                                                    "type": "dotted_name",
                                                                                    "start_token": 215,
                                                                                    "end_token": 216,
                                                                                    "label": "datetime.",
                                                                                    "children": []
                                                                                },
                                                                                {
                                                                                    "type": "identifier",
                                                                                    "start_token": 217,
                                                                                    "end_token": 217,
                                                                                    "label": "now",
                                                                                    "children": []
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "argument_list",
                                                                            "start_token": 218,
                                                                            "end_token": 219,
                                                                            "label": "()",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 227,
                            "end_token": 231,
                            "label": "# Mock prisma calls\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 232,
                            "end_token": 239,
                            "label": "mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 232,
                                    "end_token": 232,
                                    "label": "mock_store_agent",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 234,
                                    "end_token": 239,
                                    "label": "mocker.patch(\"prisma.models.StoreAgent.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 234,
                                            "end_token": 236,
                                            "label": "mocker.patch",
                                            "children": []
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 237,
                                            "end_token": 239,
                                            "label": "(\"prisma.models.StoreAgent.prisma\")",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 238,
                                                    "end_token": 238,
                                                    "label": "\"prisma.models.StoreAgent.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 241,
                            "end_token": 254,
                            "label": "mock_store_agent.return_value.find_many = mocker.AsyncMock(return_value=mock_agents)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 241,
                                    "end_token": 245,
                                    "label": "mock_store_agent.return_value.find_many",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 241,
                                            "end_token": 244,
                                            "label": "mock_store_agent.return_value.",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 241,
                                                    "end_token": 241,
                                                    "label": "mock_store_agent",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 243,
                                                    "end_token": 243,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 245,
                                            "end_token": 245,
                                            "label": "find_many",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 247,
                                    "end_token": 254,
                                    "label": "mocker.AsyncMock(return_value=mock_agents)",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 247,
                                            "end_token": 247,
                                            "label": "mocker",
                                            "children": []
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 249,
                                            "end_token": 254,
                                            "label": "AsyncMock(return_value=mock_agents)",
                                            "children": [
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 251,
                                                    "end_token": 253,
                                                    "label": "return_value=mock_agents",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 251,
                                                            "end_token": 251,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 253,
                                                            "end_token": 253,
                                                            "label": "mock_agents",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 256,
                            "end_token": 269,
                            "label": "mock_store_agent.return_value.count = mocker.AsyncMock(return_value=1)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 256,
                                    "end_token": 260,
                                    "label": "mock_store_agent.return_value.count",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 256,
                                            "end_token": 259,
                                            "label": "mock_store_agent.return_value.",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 256,
                                                    "end_token": 256,
                                                    "label": "mock_store_agent",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 258,
                                                    "end_token": 258,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 260,
                                            "end_token": 260,
                                            "label": "count",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 262,
                                    "end_token": 269,
                                    "label": "mocker.AsyncMock(return_value=1)",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 262,
                                            "end_token": 262,
                                            "label": "mocker",
                                            "children": []
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 264,
                                            "end_token": 269,
                                            "label": "AsyncMock(return_value=1)",
                                            "children": [
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 266,
                                                    "end_token": 268,
                                                    "label": "return_value=1",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 266,
                                                            "end_token": 266,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 268,
                                                            "end_token": 268,
                                                            "label": "1",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 272,
                            "end_token": 275,
                            "label": "# Call function\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 276,
                            "end_token": 283,
                            "label": "result = await db.get_store_agents()",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 276,
                                    "end_token": 276,
                                    "label": "result",
                                    "children": []
                                },
                                {
                                    "type": "await",
                                    "start_token": 278,
                                    "end_token": 283,
                                    "label": "await db.get_store_agents()",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 279,
                                            "end_token": 283,
                                            "label": "db.get_store_agents()",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 279,
                                                    "end_token": 281,
                                                    "label": "db.get_store_agents",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 279,
                                                            "end_token": 279,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 281,
                                                            "end_token": 281,
                                                            "label": "get_store_agents",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 282,
                                                    "end_token": 283,
                                                    "label": "()",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 286,
                            "end_token": 289,
                            "label": "# Verify results\n",
                            "children": []
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 290,
                            "end_token": 299,
                            "label": "assert len(result.agents) == 1",
                            "children": [
                                {
                                    "type": "binary_operator",
                                    "start_token": 291,
                                    "end_token": 299,
                                    "label": "len(result.agents) == 1",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 291,
                                            "end_token": 296,
                                            "label": "len(result.agents)",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 291,
                                                    "end_token": 291,
                                                    "label": "len",
                                                    "children": []
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 292,
                                                    "end_token": 296,
                                                    "label": "(result.agents)",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 293,
                                                            "end_token": 295,
                                                            "label": "result.agents",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 293,
                                                                    "end_token": 293,
                                                                    "label": "result",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 295,
                                                                    "end_token": 295,
                                                                    "label": "agents",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "start_token": 299,
                                            "end_token": 299,
                                            "label": "1",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 301,
                            "end_token": 313,
                            "label": "assert result.agents[0].slug == \"test-agent\"\n",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 302,
                                    "end_token": 312,
                                    "label": "result.agents[0].slug == \"test-agent\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 302,
                                            "end_token": 309,
                                            "label": "result.agents[0].slug",
                                            "children": [
                                                {
                                                    "type": "subscript",
                                                    "start_token": 304,
                                                    "end_token": 307,
                                                    "label": "agents[0]",
                                                    "children": [
                                                        {
                                                            "type": "attribute",
                                                            "start_token": 302,
                                                            "end_token": 304,
                                                            "label": "result.agents",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 302,
                                                                    "end_token": 302,
                                                                    "label": "result",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 304,
                                                                    "end_token": 304,
                                                                    "label": "agents",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 306,
                                                            "end_token": 306,
                                                            "label": "0",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 309,
                                                    "end_token": 309,
                                                    "label": "slug",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 312,
                                            "end_token": 312,
                                            "label": "\"test-agent\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 314,
                            "end_token": 322,
                            "label": "assert result.pagination.total_items == 1",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 315,
                                    "end_token": 322,
                                    "label": "result.pagination.total_items == 1",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 315,
                                            "end_token": 319,
                                            "label": "result.pagination.total_items",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 317,
                                                    "end_token": 319,
                                                    "label": "pagination.total_items",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 315,
                                                            "end_token": 315,
                                                            "label": "result",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 317,
                                                            "end_token": 317,
                                                            "label": "pagination",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 319,
                                                    "end_token": 319,
                                                    "label": "total_items",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "integer",
                                            "start_token": 322,
                                            "end_token": 322,
                                            "label": "1",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 325,
                            "end_token": 330,
                            "label": "# Verify mocks called correctly\n",
                            "children": []
                        },
                        {
                            "type": "call",
                            "start_token": 331,
                            "end_token": 339,
                            "label": "mock_store_agent.return_value.find_many.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 331,
                                    "end_token": 337,
                                    "label": "mock_store_agent.return_value.find_many.assert_called_once",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 331,
                                            "end_token": 335,
                                            "label": "mock_store_agent.return_value.find_many",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 331,
                                                    "end_token": 331,
                                                    "label": "mock_store_agent",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 333,
                                                    "end_token": 333,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 335,
                                            "end_token": 335,
                                            "label": "find_many",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 338,
                                    "end_token": 339,
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        },
                        {
                            "type": "call",
                            "start_token": 341,
                            "end_token": 349,
                            "label": "mock_store_agent.return_value.count.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 341,
                                    "end_token": 347,
                                    "label": "mock_store_agent.return_value.count.assert_called_once",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 341,
                                            "end_token": 345,
                                            "label": "mock_store_agent.return_value.count",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 341,
                                                    "end_token": 341,
                                                    "label": "mock_store_agent",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 343,
                                                    "end_token": 343,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 345,
                                            "end_token": 345,
                                            "label": "count",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 348,
                                    "end_token": 349,
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_get_store_agents",
            "start_line": 23,
            "end_line": 61
        },
        {
            "type": "decorated_definition",
            "start_token": 353,
            "end_token": 359,
            "label": "@pytest.mark.asyncio\n",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 353,
                    "end_token": 358,
                    "label": "@pytest.mark.asyncio",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 354,
                            "end_token": 358,
                            "label": "pytest.mark.asyncio",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 354,
                                    "end_token": 358,
                                    "label": "pytest.mark.asyncio",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 360,
            "end_token": 572,
            "label": "async def test_get_store_agent_details(mocker):\n    # Mock data\n    mock_agent = prisma.models.StoreAgent(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )\n\n    # Mock prisma call\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    # Call function\n    result = await db.get_store_agent_details(\"creator\", \"test-agent\")\n\n    # Verify results\n    assert result.slug == \"test-agent\"\n    assert result.agent_name == \"Test Agent\"\n\n    # Verify mock called correctly\n    mock_store_agent.return_value.find_first.assert_called_once_with(\n        where={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}\n    )\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 361,
                    "end_token": 361,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 362,
                    "end_token": 362,
                    "label": "test_get_store_agent_details",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 363,
                    "end_token": 365,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 364,
                            "end_token": 364,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 367,
                    "end_token": 571,
                    "label": "\n    # Mock data\n    mock_agent = prisma.models.StoreAgent(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )\n\n    # Mock prisma call\n    mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")\n    mock_store_agent.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    # Call function\n    result = await db.get_store_agent_details(\"creator\", \"test-agent\")\n\n    # Verify results\n    assert result.slug == \"test-agent\"\n    assert result.agent_name == \"Test Agent\"\n\n    # Verify mock called correctly\n    mock_store_agent.return_value.find_first.assert_called_once_with(\n        where={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}\n    )",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 368,
                            "end_token": 370,
                            "label": "# Mock data",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 372,
                            "end_token": 473,
                            "label": "mock_agent = prisma.models.StoreAgent(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 372,
                                    "end_token": 372,
                                    "label": "mock_agent",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 373,
                                    "end_token": 473,
                                    "label": "= prisma.models.StoreAgent(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 374,
                                            "end_token": 378,
                                            "label": "prisma.models.StoreAgent",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 374,
                                                    "end_token": 376,
                                                    "label": "prisma.models",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 374,
                                                            "end_token": 374,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 376,
                                                            "end_token": 376,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 378,
                                                    "end_token": 378,
                                                    "label": "StoreAgent",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 379,
                                            "end_token": 473,
                                            "label": "(\n        listing_id=\"test-id\",\n        storeListingVersionId=\"version123\",\n        slug=\"test-agent\",\n        agent_name=\"Test Agent\",\n        agent_video=\"video.mp4\",\n        agent_image=[\"image.jpg\"],\n        featured=False,\n        creator_username=\"creator\",\n        creator_avatar=\"avatar.jpg\",\n        sub_heading=\"Test heading\",\n        description=\"Test description\",\n        categories=[\"test\"],\n        runs=10,\n        rating=4.5,\n        versions=[\"1.0\"],\n        updated_at=datetime.now(),\n    )",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 381,
                                                    "end_token": 384,
                                                    "label": "listing_id=\"test-id\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 381,
                                                            "end_token": 381,
                                                            "label": "listing_id",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 383,
                                                            "end_token": 383,
                                                            "label": "\"test-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 386,
                                                    "end_token": 389,
                                                    "label": "storeListingVersionId=\"version123\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 386,
                                                            "end_token": 386,
                                                            "label": "storeListingVersionId",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 388,
                                                            "end_token": 388,
                                                            "label": "\"version123\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 391,
                                                    "end_token": 394,
                                                    "label": "slug=\"test-agent\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 391,
                                                            "end_token": 391,
                                                            "label": "slug",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 393,
                                                            "end_token": 393,
                                                            "label": "\"test-agent\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 396,
                                                    "end_token": 399,
                                                    "label": "agent_name=\"Test Agent\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 396,
                                                            "end_token": 396,
                                                            "label": "agent_name",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 398,
                                                            "end_token": 398,
                                                            "label": "\"Test Agent\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 401,
                                                    "end_token": 404,
                                                    "label": "agent_video=\"video.mp4\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 401,
                                                            "end_token": 401,
                                                            "label": "agent_video",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 403,
                                                            "end_token": 403,
                                                            "label": "\"video.mp4\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 406,
                                                    "end_token": 410,
                                                    "label": "agent_image=[\"image.jpg\"]",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 406,
                                                            "end_token": 406,
                                                            "label": "agent_image",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 408,
                                                            "end_token": 410,
                                                            "label": "[\"image.jpg\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 409,
                                                                    "end_token": 409,
                                                                    "label": "\"image.jpg\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 413,
                                                    "end_token": 415,
                                                    "label": "featured=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 413,
                                                            "end_token": 413,
                                                            "label": "featured",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 415,
                                                            "end_token": 415,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 418,
                                                    "end_token": 421,
                                                    "label": "creator_username=\"creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 418,
                                                            "end_token": 418,
                                                            "label": "creator_username",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 420,
                                                            "end_token": 420,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 423,
                                                    "end_token": 426,
                                                    "label": "creator_avatar=\"avatar.jpg\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 423,
                                                            "end_token": 423,
                                                            "label": "creator_avatar",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 425,
                                                            "end_token": 425,
                                                            "label": "\"avatar.jpg\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 428,
                                                    "end_token": 431,
                                                    "label": "sub_heading=\"Test heading\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 428,
                                                            "end_token": 428,
                                                            "label": "sub_heading",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 430,
                                                            "end_token": 430,
                                                            "label": "\"Test heading\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 433,
                                                    "end_token": 436,
                                                    "label": "description=\"Test description\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 433,
                                                            "end_token": 433,
                                                            "label": "description",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 435,
                                                            "end_token": 435,
                                                            "label": "\"Test description\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 438,
                                                    "end_token": 442,
                                                    "label": "categories=[\"test\"]",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 438,
                                                            "end_token": 438,
                                                            "label": "categories",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 440,
                                                            "end_token": 442,
                                                            "label": "[\"test\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 441,
                                                                    "end_token": 441,
                                                                    "label": "\"test\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 445,
                                                    "end_token": 447,
                                                    "label": "runs=10",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 445,
                                                            "end_token": 445,
                                                            "label": "runs",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 447,
                                                            "end_token": 447,
                                                            "label": "10",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 450,
                                                    "end_token": 455,
                                                    "label": "rating=4.5,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 450,
                                                            "end_token": 450,
                                                            "label": "rating",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "float",
                                                            "start_token": 452,
                                                            "end_token": 454,
                                                            "label": "4.5",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 457,
                                                    "end_token": 461,
                                                    "label": "versions=[\"1.0\"]",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 457,
                                                            "end_token": 457,
                                                            "label": "versions",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 459,
                                                            "end_token": 461,
                                                            "label": "[\"1.0\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 460,
                                                                    "end_token": 460,
                                                                    "label": "\"1.0\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 464,
                                                    "end_token": 471,
                                                    "label": "updated_at=datetime.now(),",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 464,
                                                            "end_token": 464,
                                                            "label": "updated_at",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 466,
                                                            "end_token": 470,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 466,
                                                                    "end_token": 468,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 466,
                                                                            "end_token": 466,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 468,
                                                                            "end_token": 468,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 469,
                                                                    "end_token": 470,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 476,
                            "end_token": 478,
                            "label": "# Mock prisma",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 481,
                            "end_token": 488,
                            "label": "mock_store_agent = mocker.patch(\"prisma.models.StoreAgent.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 481,
                                    "end_token": 481,
                                    "label": "mock_store_agent",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 483,
                                    "end_token": 488,
                                    "label": "mocker.patch(\"prisma.models.StoreAgent.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 483,
                                            "end_token": 485,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 483,
                                                    "end_token": 483,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 485,
                                                    "end_token": 485,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 486,
                                            "end_token": 487,
                                            "label": "(\"prisma.models.StoreAgent.prisma\"",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 486,
                                                    "end_token": 486,
                                                    "label": "(",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "augmented_assignment",
                            "start_token": 490,
                            "end_token": 503,
                            "label": "mock_store_agent.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 490,
                                    "end_token": 495,
                                    "label": "mock_store_agent.return_value.find_first =",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 490,
                                            "end_token": 492,
                                            "label": "mock_store_agent.return_value",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 490,
                                                    "end_token": 490,
                                                    "label": "mock_store_agent",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 492,
                                                    "end_token": 492,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 494,
                                            "end_token": 494,
                                            "label": "find_first",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 495,
                                            "end_token": 495,
                                            "label": "=",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 497,
                                    "end_token": 503,
                                    "label": ".AsyncMock(return_value=mock_agent)",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 497,
                                            "end_token": 498,
                                            "label": ".AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 497,
                                                    "end_token": 497,
                                                    "label": ".",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 498,
                                                    "end_token": 498,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 499,
                                            "end_token": 502,
                                            "label": "(return_value=mock_agent",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 500,
                                                    "end_token": 502,
                                                    "label": "return_value=mock_agent",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 500,
                                                            "end_token": 500,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 502,
                                                            "end_token": 502,
                                                            "label": "mock_agent",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 506,
                            "end_token": 508,
                            "label": "# Call function",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 510,
                            "end_token": 520,
                            "label": "result = await db.get_store_agent_details(\"creator\", \"test-agent\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 510,
                                    "end_token": 510,
                                    "label": "result",
                                    "children": []
                                },
                                {
                                    "type": "await",
                                    "start_token": 512,
                                    "end_token": 520,
                                    "label": "await db.get_store_agent_details(\"creator\", \"test-agent\")",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 513,
                                            "end_token": 520,
                                            "label": "db.get_store_agent_details(\"creator\", \"test-agent\")",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 513,
                                                    "end_token": 515,
                                                    "label": "db.get_store_agent_details",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 513,
                                                            "end_token": 513,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 515,
                                                            "end_token": 515,
                                                            "label": "get_store_agent_details",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 516,
                                                    "end_token": 519,
                                                    "label": "(\"creator\", \"test-agent\"",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 517,
                                                            "end_token": 517,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 519,
                                                            "end_token": 519,
                                                            "label": "\"test-agent\"",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 523,
                            "end_token": 525,
                            "label": "# Verify results",
                            "children": []
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 527,
                            "end_token": 533,
                            "label": "assert result.slug == \"test-agent\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 528,
                                    "end_token": 532,
                                    "label": "result.slug ==",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 528,
                                            "end_token": 530,
                                            "label": "result.slug",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 528,
                                                    "end_token": 528,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 530,
                                                    "end_token": 530,
                                                    "label": "slug",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 532,
                                            "end_token": 532,
                                            "label": "=",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 535,
                            "end_token": 541,
                            "label": "assert result.agent_name == \"Test Agent\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 536,
                                    "end_token": 540,
                                    "label": "result.agent_name ==",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 536,
                                            "end_token": 538,
                                            "label": "result.agent_name",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 536,
                                                    "end_token": 536,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 538,
                                                    "end_token": 538,
                                                    "label": "agent_name",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 540,
                                            "end_token": 540,
                                            "label": "=",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 544,
                            "end_token": 549,
                            "label": "# Verify mock called correctly\n",
                            "children": []
                        },
                        {
                            "type": "call",
                            "start_token": 550,
                            "end_token": 571,
                            "label": "mock_store_agent.return_value.find_first.assert_called_once_with(\n        where={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}\n    )",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 550,
                                    "end_token": 556,
                                    "label": "mock_store_agent.return_value.find_first.assert_called_once_with",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 550,
                                            "end_token": 554,
                                            "label": "mock_store_agent.return_value.find_first",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 550,
                                                    "end_token": 552,
                                                    "label": "mock_store_agent.return_value",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 550,
                                                            "end_token": 550,
                                                            "label": "mock_store_agent",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 552,
                                                            "end_token": 552,
                                                            "label": "return_value",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 554,
                                                    "end_token": 554,
                                                    "label": "find_first",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 556,
                                            "end_token": 556,
                                            "label": "assert_called_once_with",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 557,
                                    "end_token": 570,
                                    "label": "(\n        where={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}\n",
                                    "children": [
                                        {
                                            "type": "dictionary",
                                            "start_token": 560,
                                            "end_token": 569,
                                            "label": "={\"creator_username\": \"creator\", \"slug\": \"test-agent\"}",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 562,
                                                    "end_token": 564,
                                                    "label": "\"creator_username\": \"creator\"",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 562,
                                                            "end_token": 562,
                                                            "label": "\"creator_username\"",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 564,
                                                            "end_token": 564,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 566,
                                                    "end_token": 568,
                                                    "label": "\"slug\": \"test-agent\"",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 566,
                                                            "end_token": 566,
                                                            "label": "\"slug\"",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 568,
                                                            "end_token": 568,
                                                            "label": "\"test-agent\"",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_get_store_agent_details",
            "start_line": 65,
            "end_line": 100
        },
        {
            "type": "decorated_definition",
            "start_token": 575,
            "end_token": 581,
            "label": "@pytest.mark.asyncio\n",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 575,
                    "end_token": 580,
                    "label": "@pytest.mark.asyncio",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 576,
                            "end_token": 580,
                            "label": "pytest.mark.asyncio",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 576,
                                    "end_token": 580,
                                    "label": "pytest.mark.asyncio",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 582,
            "end_token": 787,
            "label": "async def test_get_store_creator_details(mocker):\n    # Mock data\n    mock_creator_data = prisma.models.Creator(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )\n\n    # Mock prisma call\n    mock_creator = mocker.patch(\"prisma.models.Creator.prisma\")\n    mock_creator.return_value.find_unique = mocker.AsyncMock()\n    # Configure the mock to return values that will pass validation\n    mock_creator.return_value.find_unique.return_value = mock_creator_data\n\n    # Call function\n    result = await db.get_store_creator_details(\"creator\")\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n    assert result.description == \"Test description\"\n    assert result.avatar_url == \"avatar.jpg\"\n\n    # Verify mock called correctly\n    mock_creator.return_value.find_unique.assert_called_once_with(\n        where={\"username\": \"creator\"}\n    )\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 583,
                    "end_token": 583,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 584,
                    "end_token": 584,
                    "label": "test_get_store_creator_details",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 585,
                    "end_token": 587,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 586,
                            "end_token": 586,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 589,
                    "end_token": 787,
                    "label": "\n    # Mock data\n    mock_creator_data = prisma.models.Creator(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )\n\n    # Mock prisma call\n    mock_creator = mocker.patch(\"prisma.models.Creator.prisma\")\n    mock_creator.return_value.find_unique = mocker.AsyncMock()\n    # Configure the mock to return values that will pass validation\n    mock_creator.return_value.find_unique.return_value = mock_creator_data\n\n    # Call function\n    result = await db.get_store_creator_details(\"creator\")\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n    assert result.description == \"Test description\"\n    assert result.avatar_url == \"avatar.jpg\"\n\n    # Verify mock called correctly\n    mock_creator.return_value.find_unique.assert_called_once_with(\n        where={\"username\": \"creator\"}\n    )\n",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 590,
                            "end_token": 592,
                            "label": "# Mock data",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 594,
                            "end_token": 659,
                            "label": "mock_creator_data = prisma.models.Creator(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 594,
                                    "end_token": 594,
                                    "label": "mock_creator_data",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 596,
                                    "end_token": 659,
                                    "label": "prisma.models.Creator(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 596,
                                            "end_token": 600,
                                            "label": "prisma.models.Creator",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 596,
                                                    "end_token": 598,
                                                    "label": "prisma.models",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 596,
                                                            "end_token": 596,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 598,
                                                            "end_token": 598,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 600,
                                                    "end_token": 600,
                                                    "label": "Creator",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 601,
                                            "end_token": 659,
                                            "label": "(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        num_agents=1,\n        agent_rating=4.5,\n        agent_runs=10,\n        top_categories=[\"test\"],\n        is_featured=False,\n    )",
                                            "children": [
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 603,
                                                    "end_token": 606,
                                                    "label": "name=\"Test Creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 603,
                                                            "end_token": 603,
                                                            "label": "name",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 605,
                                                            "end_token": 605,
                                                            "label": "\"Test Creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 608,
                                                    "end_token": 611,
                                                    "label": "username=\"creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 608,
                                                            "end_token": 608,
                                                            "label": "username",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 610,
                                                            "end_token": 610,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 613,
                                                    "end_token": 616,
                                                    "label": "description=\"Test description\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 613,
                                                            "end_token": 613,
                                                            "label": "description",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 615,
                                                            "end_token": 615,
                                                            "label": "\"Test description\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 618,
                                                    "end_token": 623,
                                                    "label": "links=[\"link1\"],",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 618,
                                                            "end_token": 618,
                                                            "label": "links",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 620,
                                                            "end_token": 622,
                                                            "label": "[\"link1\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 621,
                                                                    "end_token": 621,
                                                                    "label": "\"link1\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 625,
                                                    "end_token": 628,
                                                    "label": "avatar_url=\"avatar.jpg\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 625,
                                                            "end_token": 625,
                                                            "label": "avatar_url",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 627,
                                                            "end_token": 627,
                                                            "label": "\"avatar.jpg\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 630,
                                                    "end_token": 633,
                                                    "label": "num_agents=1,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 630,
                                                            "end_token": 630,
                                                            "label": "num_agents",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 632,
                                                            "end_token": 632,
                                                            "label": "1",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 635,
                                                    "end_token": 640,
                                                    "label": "agent_rating=4.5,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 635,
                                                            "end_token": 635,
                                                            "label": "agent_rating",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "float",
                                                            "start_token": 637,
                                                            "end_token": 639,
                                                            "label": "4.5",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 642,
                                                    "end_token": 645,
                                                    "label": "agent_runs=10,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 642,
                                                            "end_token": 642,
                                                            "label": "agent_runs",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 644,
                                                            "end_token": 644,
                                                            "label": "10",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 647,
                                                    "end_token": 652,
                                                    "label": "top_categories=[\"test\"],",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 647,
                                                            "end_token": 647,
                                                            "label": "top_categories",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 649,
                                                            "end_token": 651,
                                                            "label": "[\"test\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 650,
                                                                    "end_token": 650,
                                                                    "label": "\"test\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "keyword_argument",
                                                    "start_token": 654,
                                                    "end_token": 657,
                                                    "label": "is_featured=False,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 654,
                                                            "end_token": 654,
                                                            "label": "is_featured",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 656,
                                                            "end_token": 656,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 662,
                            "end_token": 666,
                            "label": "# Mock prisma call\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 667,
                            "end_token": 674,
                            "label": "mock_creator = mocker.patch(\"prisma.models.Creator.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 667,
                                    "end_token": 667,
                                    "label": "mock_creator",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 669,
                                    "end_token": 674,
                                    "label": "mocker.patch(\"prisma.models.Creator.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 669,
                                            "end_token": 671,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 669,
                                                    "end_token": 669,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 671,
                                                    "end_token": 671,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 672,
                                            "end_token": 673,
                                            "label": "(\"prisma.models.Creator.prisma\"",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 673,
                                                    "end_token": 673,
                                                    "label": "\"prisma.models.Creator.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 676,
                            "end_token": 687,
                            "label": "mock_creator.return_value.find_unique = mocker.AsyncMock()\n",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 676,
                                    "end_token": 680,
                                    "label": "mock_creator.return_value.find_unique",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 676,
                                            "end_token": 678,
                                            "label": "mock_creator.return_value",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 676,
                                                    "end_token": 676,
                                                    "label": "mock_creator",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 678,
                                                    "end_token": 678,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 680,
                                            "end_token": 680,
                                            "label": "find_unique",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 682,
                                    "end_token": 686,
                                    "label": "mocker.AsyncMock()",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 682,
                                            "end_token": 684,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 682,
                                                    "end_token": 682,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 684,
                                                    "end_token": 684,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 685,
                                            "end_token": 686,
                                            "label": "()",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 700,
                            "end_token": 708,
                            "label": "mock_creator.return_value.find_unique.return_value = mock_creator_data",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 700,
                                    "end_token": 706,
                                    "label": "mock_creator.return_value.find_unique.return_value",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 700,
                                            "end_token": 704,
                                            "label": "mock_creator.return_value.find_unique",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 700,
                                                    "end_token": 702,
                                                    "label": "mock_creator.return_value",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 700,
                                                            "end_token": 700,
                                                            "label": "mock_creator",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 702,
                                                            "end_token": 702,
                                                            "label": "return_value",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 704,
                                                    "end_token": 704,
                                                    "label": "find_unique",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 706,
                                            "end_token": 706,
                                            "label": "return_value",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "identifier",
                                    "start_token": 708,
                                    "end_token": 708,
                                    "label": "mock_creator_data",
                                    "children": []
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 711,
                            "end_token": 714,
                            "label": "# Call function\n",
                            "children": []
                        },
                        {
                            "type": "await",
                            "start_token": 716,
                            "end_token": 723,
                            "label": "= await db.get_store_creator_details(\"creator\")",
                            "children": [
                                {
                                    "type": "assignment",
                                    "start_token": 716,
                                    "end_token": 723,
                                    "label": "= await db.get_store_creator_details(\"creator\")",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 716,
                                            "end_token": 716,
                                            "label": "=",
                                            "children": []
                                        },
                                        {
                                            "type": "call",
                                            "start_token": 718,
                                            "end_token": 723,
                                            "label": "db.get_store_creator_details(\"creator\")",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 718,
                                                    "end_token": 720,
                                                    "label": "db.get_store_creator_details",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 718,
                                                            "end_token": 718,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 720,
                                                            "end_token": 720,
                                                            "label": "get_store_creator_details",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 721,
                                                    "end_token": 722,
                                                    "label": "(\"creator\"",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 722,
                                                            "end_token": 722,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 726,
                            "end_token": 729,
                            "label": "# Verify results\n",
                            "children": []
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 730,
                            "end_token": 737,
                            "label": "assert result.username == \"creator\"\n",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 731,
                                    "end_token": 736,
                                    "label": "result.username == \"creator\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 731,
                                            "end_token": 733,
                                            "label": "result.username",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 731,
                                                    "end_token": 731,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 733,
                                                    "end_token": 733,
                                                    "label": "username",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 736,
                                            "end_token": 736,
                                            "label": "\"creator\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 738,
                            "end_token": 745,
                            "label": "assert result.name == \"Test Creator\"\n",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 739,
                                    "end_token": 744,
                                    "label": "result.name == \"Test Creator\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 739,
                                            "end_token": 741,
                                            "label": "result.name",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 739,
                                                    "end_token": 739,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 741,
                                                    "end_token": 741,
                                                    "label": "name",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 744,
                                            "end_token": 744,
                                            "label": "\"Test Creator\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 746,
                            "end_token": 753,
                            "label": "assert result.description == \"Test description\"\n",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 747,
                                    "end_token": 752,
                                    "label": "result.description == \"Test description\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 747,
                                            "end_token": 749,
                                            "label": "result.description",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 747,
                                                    "end_token": 747,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 749,
                                                    "end_token": 749,
                                                    "label": "description",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 752,
                                            "end_token": 752,
                                            "label": "\"Test description\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 754,
                            "end_token": 761,
                            "label": "assert result.avatar_url == \"avatar.jpg\"\n",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 755,
                                    "end_token": 760,
                                    "label": "result.avatar_url == \"avatar.jpg\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 755,
                                            "end_token": 757,
                                            "label": "result.avatar_url",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 755,
                                                    "end_token": 755,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 757,
                                                    "end_token": 757,
                                                    "label": "avatar_url",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 760,
                                            "end_token": 760,
                                            "label": "\"avatar.jpg\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 763,
                            "end_token": 768,
                            "label": "# Verify mock called correctly\n",
                            "children": []
                        },
                        {
                            "type": "call",
                            "start_token": 769,
                            "end_token": 786,
                            "label": "mock_creator.return_value.find_unique.assert_called_once_with(\n        where={\"username\": \"creator\"}\n    )",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 769,
                                    "end_token": 773,
                                    "label": "mock_creator.return_value.find_unique",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 769,
                                            "end_token": 771,
                                            "label": "mock_creator.return_value",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 769,
                                                    "end_token": 771,
                                                    "label": "mock_creator.return_value",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 769,
                                                            "end_token": 769,
                                                            "label": "mock_creator",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 771,
                                                            "end_token": 771,
                                                            "label": "return_value",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 773,
                                                    "end_token": 773,
                                                    "label": "find_unique",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 775,
                                            "end_token": 775,
                                            "label": "assert_called_once_with",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 776,
                                    "end_token": 786,
                                    "label": "(\n        where={\"username\": \"creator\"}\n    )",
                                    "children": [
                                        {
                                            "type": "pair",
                                            "start_token": 778,
                                            "end_token": 784,
                                            "label": "where={\"username\": \"creator\"}",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 781,
                                                    "end_token": 781,
                                                    "label": "\"username\"",
                                                    "children": []
                                                },
                                                {
                                                    "type": "string",
                                                    "start_token": 783,
                                                    "end_token": 783,
                                                    "label": "\"creator\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_get_store_creator_details",
            "start_line": 104,
            "end_line": 137
        },
        {
            "type": "decorated_definition",
            "start_token": 790,
            "end_token": 796,
            "label": "@pytest.mark.asyncio\n",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 790,
                    "end_token": 795,
                    "label": "@pytest.mark.asyncio",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 791,
                            "end_token": 795,
                            "label": "pytest.mark.asyncio",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 791,
                                    "end_token": 795,
                                    "label": "pytest.mark.asyncio",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 797,
            "end_token": 1086,
            "label": "async def test_create_store_submission(mocker):\n    # Mock data\n    mock_agent = prisma.models.AgentGraph(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )\n\n    mock_listing = prisma.models.StoreListing(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )\n\n    # Mock prisma calls\n    mock_agent_graph = mocker.patch(\"prisma.models.AgentGraph.prisma\")\n    mock_agent_graph.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    mock_store_listing = mocker.patch(\"prisma.models.StoreListing.prisma\")\n    mock_store_listing.return_value.find_first = mocker.AsyncMock(return_value=None)\n    mock_store_listing.return_value.create = mocker.AsyncMock(return_value=mock_listing)\n\n    # Call function\n    result = await db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )\n\n    # Verify results\n    assert result.name == \"Test Agent\"\n    assert result.description == \"Test description\"\n\n    # Verify mocks called correctly\n    mock_agent_graph.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.create.assert_called_once()\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 798,
                    "end_token": 798,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 799,
                    "end_token": 799,
                    "label": "test_create_store_submission",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 800,
                    "end_token": 802,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 801,
                            "end_token": 801,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 804,
                    "end_token": 1085,
                    "label": "\n    # Mock data\n    mock_agent = prisma.models.AgentGraph(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )\n\n    mock_listing = prisma.models.StoreListing(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )\n\n    # Mock prisma calls\n    mock_agent_graph = mocker.patch(\"prisma.models.AgentGraph.prisma\")\n    mock_agent_graph.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)\n\n    mock_store_listing = mocker.patch(\"prisma.models.StoreListing.prisma\")\n    mock_store_listing.return_value.find_first = mocker.AsyncMock(return_value=None)\n    mock_store_listing.return_value.create = mocker.AsyncMock(return_value=mock_listing)\n\n    # Call function\n    result = await db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )\n\n    # Verify results\n    assert result.name == \"Test Agent\"\n    assert result.description == \"Test description\"\n\n    # Verify mocks called correctly\n    mock_agent_graph.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.find_first.assert_called_once()\n    mock_store_listing.return_value.create.assert_called_once()",
                    "children": [
                        {
                            "type": "assignment",
                            "start_token": 809,
                            "end_token": 852,
                            "label": "mock_agent = prisma.models.AgentGraph(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 809,
                                    "end_token": 809,
                                    "label": "mock_agent",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 811,
                                    "end_token": 852,
                                    "label": "prisma.models.AgentGraph(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 811,
                                            "end_token": 815,
                                            "label": "prisma.models.AgentGraph",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 811,
                                                    "end_token": 813,
                                                    "label": "prisma.models",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 811,
                                                            "end_token": 811,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 813,
                                                            "end_token": 813,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 815,
                                                    "end_token": 815,
                                                    "label": "AgentGraph",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 816,
                                            "end_token": 852,
                                            "label": "(\n        id=\"agent-id\",\n        version=1,\n        userId=\"user-id\",\n        createdAt=datetime.now(),\n        isActive=True,\n        isTemplate=False,\n    )",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 818,
                                                    "end_token": 820,
                                                    "label": "id=\"agent-id\"",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 818,
                                                            "end_token": 818,
                                                            "label": "id",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 820,
                                                            "end_token": 820,
                                                            "label": "\"agent-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 823,
                                                    "end_token": 825,
                                                    "label": "version=1",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 823,
                                                            "end_token": 823,
                                                            "label": "version",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 825,
                                                            "end_token": 825,
                                                            "label": "1",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 828,
                                                    "end_token": 830,
                                                    "label": "userId=\"user-id\"",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 828,
                                                            "end_token": 828,
                                                            "label": "userId",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 830,
                                                            "end_token": 830,
                                                            "label": "\"user-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 833,
                                                    "end_token": 839,
                                                    "label": "createdAt=datetime.now()",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 833,
                                                            "end_token": 833,
                                                            "label": "createdAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 835,
                                                            "end_token": 839,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 835,
                                                                    "end_token": 837,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 835,
                                                                            "end_token": 835,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 837,
                                                                            "end_token": 837,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 838,
                                                                    "end_token": 839,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 842,
                                                    "end_token": 844,
                                                    "label": "isActive=True",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 842,
                                                            "end_token": 842,
                                                            "label": "isActive",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "true",
                                                            "start_token": 844,
                                                            "end_token": 844,
                                                            "label": "True",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 847,
                                                    "end_token": 849,
                                                    "label": "isTemplate=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 847,
                                                            "end_token": 847,
                                                            "label": "isTemplate",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 849,
                                                            "end_token": 849,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 855,
                            "end_token": 912,
                            "label": "mock_listing = prisma.models.StoreListing(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 855,
                                    "end_token": 855,
                                    "label": "mock_listing",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 857,
                                    "end_token": 912,
                                    "label": "prisma.models.StoreListing(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 857,
                                            "end_token": 861,
                                            "label": "prisma.models.StoreListing",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 857,
                                                    "end_token": 859,
                                                    "label": "prisma.models",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 857,
                                                            "end_token": 857,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 859,
                                                            "end_token": 859,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 861,
                                                    "end_token": 861,
                                                    "label": "StoreListing",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 862,
                                            "end_token": 912,
                                            "label": "(\n        id=\"listing-id\",\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n        isDeleted=False,\n        isApproved=False,\n        agentId=\"agent-id\",\n        agentVersion=1,\n        owningUserId=\"user-id\",\n    )",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 864,
                                                    "end_token": 866,
                                                    "label": "id=\"listing-id\"",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 864,
                                                            "end_token": 864,
                                                            "label": "id",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 866,
                                                            "end_token": 866,
                                                            "label": "\"listing-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 869,
                                                    "end_token": 875,
                                                    "label": "createdAt=datetime.now()",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 869,
                                                            "end_token": 869,
                                                            "label": "createdAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 871,
                                                            "end_token": 875,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 871,
                                                                    "end_token": 873,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 871,
                                                                            "end_token": 871,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 873,
                                                                            "end_token": 873,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 874,
                                                                    "end_token": 875,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 878,
                                                    "end_token": 884,
                                                    "label": "updatedAt=datetime.now()",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 878,
                                                            "end_token": 878,
                                                            "label": "updatedAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 880,
                                                            "end_token": 884,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 880,
                                                                    "end_token": 882,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 880,
                                                                            "end_token": 880,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 882,
                                                                            "end_token": 882,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 883,
                                                                    "end_token": 884,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 887,
                                                    "end_token": 889,
                                                    "label": "isDeleted=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 887,
                                                            "end_token": 887,
                                                            "label": "isDeleted",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 889,
                                                            "end_token": 889,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 892,
                                                    "end_token": 894,
                                                    "label": "isApproved=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 892,
                                                            "end_token": 892,
                                                            "label": "isApproved",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 894,
                                                            "end_token": 894,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 897,
                                                    "end_token": 899,
                                                    "label": "agentId=\"agent-id\"",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 897,
                                                            "end_token": 897,
                                                            "label": "agentId",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 899,
                                                            "end_token": 899,
                                                            "label": "\"agent-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 902,
                                                    "end_token": 904,
                                                    "label": "agentVersion=1",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 902,
                                                            "end_token": 902,
                                                            "label": "agentVersion",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "start_token": 904,
                                                            "end_token": 904,
                                                            "label": "1",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "pair",
                                                    "start_token": 907,
                                                    "end_token": 909,
                                                    "label": "owningUserId=\"user-id\"",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 907,
                                                            "end_token": 907,
                                                            "label": "owningUserId",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 909,
                                                            "end_token": 909,
                                                            "label": "\"user-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 920,
                            "end_token": 927,
                            "label": "mock_agent_graph = mocker.patch(\"prisma.models.AgentGraph.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 920,
                                    "end_token": 920,
                                    "label": "mock_agent_graph",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 922,
                                    "end_token": 927,
                                    "label": "mocker.patch(\"prisma.models.AgentGraph.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 922,
                                            "end_token": 924,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 922,
                                                    "end_token": 922,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 924,
                                                    "end_token": 924,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 925,
                                            "end_token": 927,
                                            "label": "(\"prisma.models.AgentGraph.prisma\")",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 926,
                                                    "end_token": 926,
                                                    "label": "\"prisma.models.AgentGraph.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 929,
                            "end_token": 942,
                            "label": "mock_agent_graph.return_value.find_first = mocker.AsyncMock(return_value=mock_agent)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 929,
                                    "end_token": 933,
                                    "label": "mock_agent_graph.return_value.find_first",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 929,
                                            "end_token": 931,
                                            "label": "mock_agent_graph.return_value",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 929,
                                                    "end_token": 929,
                                                    "label": "mock_agent_graph",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 931,
                                                    "end_token": 931,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 933,
                                            "end_token": 933,
                                            "label": "find_first",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 935,
                                    "end_token": 942,
                                    "label": "mocker.AsyncMock(return_value=mock_agent)",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 935,
                                            "end_token": 937,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 935,
                                                    "end_token": 935,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 937,
                                                    "end_token": 937,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 938,
                                            "end_token": 942,
                                            "label": "(return_value=mock_agent)",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 939,
                                                    "end_token": 941,
                                                    "label": "return_value=mock_agent",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 939,
                                                            "end_token": 939,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 941,
                                                            "end_token": 941,
                                                            "label": "mock_agent",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 945,
                            "end_token": 952,
                            "label": "mock_store_listing = mocker.patch(\"prisma.models.StoreListing.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 945,
                                    "end_token": 945,
                                    "label": "mock_store_listing",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 947,
                                    "end_token": 952,
                                    "label": "mocker.patch(\"prisma.models.StoreListing.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 947,
                                            "end_token": 949,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 947,
                                                    "end_token": 947,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 949,
                                                    "end_token": 949,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 950,
                                            "end_token": 952,
                                            "label": "(\"prisma.models.StoreListing.prisma\")",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 951,
                                                    "end_token": 951,
                                                    "label": "\"prisma.models.StoreListing.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 954,
                            "end_token": 966,
                            "label": "mock_store_listing.return_value.find_first = mocker.AsyncMock(return_value=None",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 954,
                                    "end_token": 958,
                                    "label": "mock_store_listing.return_value.find_first",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 954,
                                            "end_token": 956,
                                            "label": "mock_store_listing.return_value",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 954,
                                                    "end_token": 954,
                                                    "label": "mock_store_listing",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 956,
                                                    "end_token": 956,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 958,
                                            "end_token": 958,
                                            "label": "find_first",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 960,
                                    "end_token": 966,
                                    "label": "mocker.AsyncMock(return_value=None",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 960,
                                            "end_token": 962,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 960,
                                                    "end_token": 960,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 962,
                                                    "end_token": 962,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 963,
                                            "end_token": 966,
                                            "label": "(return_value=None",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 964,
                                                    "end_token": 966,
                                                    "label": "return_value=None",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 964,
                                                            "end_token": 964,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "none",
                                                            "start_token": 966,
                                                            "end_token": 966,
                                                            "label": "None",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 969,
                            "end_token": 981,
                            "label": "mock_store_listing.return_value.create = mocker.AsyncMock(return_value=mock_listing",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 969,
                                    "end_token": 973,
                                    "label": "mock_store_listing.return_value.create",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 969,
                                            "end_token": 971,
                                            "label": "mock_store_listing.return_value",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 969,
                                                    "end_token": 969,
                                                    "label": "mock_store_listing",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 971,
                                                    "end_token": 971,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 973,
                                            "end_token": 973,
                                            "label": "create",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 975,
                                    "end_token": 981,
                                    "label": "mocker.AsyncMock(return_value=mock_listing",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 975,
                                            "end_token": 977,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 975,
                                                    "end_token": 975,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 977,
                                                    "end_token": 977,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 978,
                                            "end_token": 981,
                                            "label": "(return_value=mock_listing",
                                            "children": [
                                                {
                                                    "type": "pair",
                                                    "start_token": 979,
                                                    "end_token": 981,
                                                    "label": "return_value=mock_listing",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 979,
                                                            "end_token": 979,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 981,
                                                            "end_token": 981,
                                                            "label": "mock_listing",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 989,
                            "end_token": 1027,
                            "label": "result = await db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 989,
                                    "end_token": 989,
                                    "label": "result",
                                    "children": []
                                },
                                {
                                    "type": "await",
                                    "start_token": 991,
                                    "end_token": 1027,
                                    "label": "await db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 992,
                                            "end_token": 1027,
                                            "label": "db.create_store_submission(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 992,
                                                    "end_token": 994,
                                                    "label": "db.create_store_submission",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 992,
                                                            "end_token": 992,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 994,
                                                            "end_token": 994,
                                                            "label": "create_store_submission",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 995,
                                                    "end_token": 1027,
                                                    "label": "(\n        user_id=\"user-id\",\n        agent_id=\"agent-id\",\n        agent_version=1,\n        slug=\"test-agent\",\n        name=\"Test Agent\",\n        description=\"Test description\",\n    )",
                                                    "children": [
                                                        {
                                                            "type": "pair",
                                                            "start_token": 997,
                                                            "end_token": 999,
                                                            "label": "user_id=\"user-id\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 997,
                                                                    "end_token": 997,
                                                                    "label": "user_id",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 999,
                                                                    "end_token": 999,
                                                                    "label": "\"user-id\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "pair",
                                                            "start_token": 1002,
                                                            "end_token": 1004,
                                                            "label": "agent_id=\"agent-id\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 1002,
                                                                    "end_token": 1002,
                                                                    "label": "agent_id",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1004,
                                                                    "end_token": 1004,
                                                                    "label": "\"agent-id\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "pair",
                                                            "start_token": 1007,
                                                            "end_token": 1009,
                                                            "label": "agent_version=1",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 1007,
                                                                    "end_token": 1007,
                                                                    "label": "agent_version",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "start_token": 1009,
                                                                    "end_token": 1009,
                                                                    "label": "1",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "pair",
                                                            "start_token": 1012,
                                                            "end_token": 1014,
                                                            "label": "slug=\"test-agent\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 1012,
                                                                    "end_token": 1012,
                                                                    "label": "slug",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1014,
                                                                    "end_token": 1014,
                                                                    "label": "\"test-agent\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "pair",
                                                            "start_token": 1017,
                                                            "end_token": 1019,
                                                            "label": "name=\"Test Agent\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 1017,
                                                                    "end_token": 1017,
                                                                    "label": "name",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1019,
                                                                    "end_token": 1019,
                                                                    "label": "\"Test Agent\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "pair",
                                                            "start_token": 1022,
                                                            "end_token": 1024,
                                                            "label": "description=\"Test description\"",
                                                            "children": [
                                                                {
                                                                    "type": "identifier",
                                                                    "start_token": 1022,
                                                                    "end_token": 1022,
                                                                    "label": "description",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1024,
                                                                    "end_token": 1024,
                                                                    "label": "\"Test description\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1034,
                            "end_token": 1040,
                            "label": "assert result.name == \"Test Agent\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1034,
                                    "end_token": 1040,
                                    "label": "assert result.name == \"Test Agent\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1035,
                                            "end_token": 1037,
                                            "label": "result.name",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1035,
                                                    "end_token": 1035,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1037,
                                                    "end_token": 1037,
                                                    "label": "name",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1040,
                                            "end_token": 1040,
                                            "label": "\"Test Agent\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1042,
                            "end_token": 1048,
                            "label": "assert result.description == \"Test description\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1042,
                                    "end_token": 1048,
                                    "label": "assert result.description == \"Test description\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1043,
                                            "end_token": 1045,
                                            "label": "result.description",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1043,
                                                    "end_token": 1043,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1045,
                                                    "end_token": 1045,
                                                    "label": "description",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1048,
                                            "end_token": 1048,
                                            "label": "\"Test description\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "call",
                            "start_token": 1057,
                            "end_token": 1065,
                            "label": "mock_agent_graph.return_value.find_first.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1057,
                                    "end_token": 1063,
                                    "label": "mock_agent_graph.return_value.find_first.assert_called_once",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1057,
                                            "end_token": 1061,
                                            "label": "mock_agent_graph.return_value.find_first",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1057,
                                                    "end_token": 1057,
                                                    "label": "mock_agent_graph",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1059,
                                                    "end_token": 1059,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1063,
                                            "end_token": 1063,
                                            "label": "assert_called_once",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 1064,
                                    "end_token": 1065,
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        },
                        {
                            "type": "call",
                            "start_token": 1067,
                            "end_token": 1075,
                            "label": "mock_store_listing.return_value.find_first.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1067,
                                    "end_token": 1073,
                                    "label": "mock_store_listing.return_value.find_first.assert_called_once",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1067,
                                            "end_token": 1071,
                                            "label": "mock_store_listing.return_value.find_first",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1067,
                                                    "end_token": 1067,
                                                    "label": "mock_store_listing",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1069,
                                                    "end_token": 1069,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1073,
                                            "end_token": 1073,
                                            "label": "assert_called_once",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 1074,
                                    "end_token": 1075,
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        },
                        {
                            "type": "call",
                            "start_token": 1077,
                            "end_token": 1085,
                            "label": "mock_store_listing.return_value.create.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1077,
                                    "end_token": 1083,
                                    "label": "mock_store_listing.return_value.create.assert_called_once",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1077,
                                            "end_token": 1081,
                                            "label": "mock_store_listing.return_value.create",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1077,
                                                    "end_token": 1077,
                                                    "label": "mock_store_listing",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1079,
                                                    "end_token": 1079,
                                                    "label": "return_value",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1083,
                                            "end_token": 1083,
                                            "label": "assert_called_once",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "argument_list",
                                    "start_token": 1084,
                                    "end_token": 1085,
                                    "label": "()",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_create_store_submission",
            "start_line": 141,
            "end_line": 188
        },
        {
            "type": "decorated_definition",
            "start_token": 1089,
            "end_token": 1095,
            "label": "@pytest.mark.asyncio\n",
            "children": [
                {
                    "type": "decorator",
                    "start_token": 1089,
                    "end_token": 1094,
                    "label": "@pytest.mark.asyncio",
                    "children": [
                        {
                            "type": "attribute",
                            "start_token": 1090,
                            "end_token": 1094,
                            "label": "pytest.mark.asyncio",
                            "children": [
                                {
                                    "type": "dotted_name",
                                    "start_token": 1090,
                                    "end_token": 1094,
                                    "label": "pytest.mark.asyncio",
                                    "children": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "function_definition",
            "start_token": 1096,
            "end_token": 1329,
            "label": "async def test_update_profile(mocker):\n    # Mock data\n    mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )\n\n    # Mock prisma calls\n    mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")\n    mock_profile_db.return_value.find_first = mocker.AsyncMock(\n        return_value=mock_profile\n    )\n    mock_profile_db.return_value.update = mocker.AsyncMock(return_value=mock_profile)\n\n    # Test data\n    profile = Profile(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )\n\n    # Call function\n    result = await db.update_or_create_profile(\"user-id\", profile)\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n\n    # Verify mocks called correctly\n    mock_profile_db.return_value.find_first.assert_called_once()\n    mock_profile_db.return_value.update.assert_called_once()\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 1097,
                    "end_token": 1097,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 1098,
                    "end_token": 1098,
                    "label": "test_update_profile",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 1099,
                    "end_token": 1101,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 1100,
                            "end_token": 1100,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 1103,
                    "end_token": 1328,
                    "label": "\n    # Mock data\n    mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )\n\n    # Mock prisma calls\n    mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")\n    mock_profile_db.return_value.find_first = mocker.AsyncMock(\n        return_value=mock_profile\n    )\n    mock_profile_db.return_value.update = mocker.AsyncMock(return_value=mock_profile)\n\n    # Test data\n    profile = Profile(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )\n\n    # Call function\n    result = await db.update_or_create_profile(\"user-id\", profile)\n\n    # Verify results\n    assert result.username == \"creator\"\n    assert result.name == \"Test Creator\"\n\n    # Verify mocks called correctly\n    mock_profile_db.return_value.find_first.assert_called_once()\n    mock_profile_db.return_value.update.assert_called_once()",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 1104,
                            "end_token": 1107,
                            "label": "# Mock data\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1108,
                            "end_token": 1172,
                            "label": "mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1108,
                                    "end_token": 1108,
                                    "label": "mock_profile",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 1110,
                                    "end_token": 1172,
                                    "label": "prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1110,
                                            "end_token": 1114,
                                            "label": "prisma.models.Profile",
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 1110,
                                                    "end_token": 1113,
                                                    "label": "prisma.models.",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1110,
                                                            "end_token": 1110,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1112,
                                                            "end_token": 1112,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1114,
                                                    "end_token": 1114,
                                                    "label": "Profile",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1115,
                                            "end_token": 1172,
                                            "label": "(\n        id=\"profile-id\",\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1117,
                                                    "end_token": 1120,
                                                    "label": "id=\"profile-id\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1117,
                                                            "end_token": 1117,
                                                            "label": "id",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1119,
                                                            "end_token": 1119,
                                                            "label": "\"profile-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1122,
                                                    "end_token": 1125,
                                                    "label": "name=\"Test Creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1122,
                                                            "end_token": 1122,
                                                            "label": "name",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1124,
                                                            "end_token": 1124,
                                                            "label": "\"Test Creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1127,
                                                    "end_token": 1130,
                                                    "label": "username=\"creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1127,
                                                            "end_token": 1127,
                                                            "label": "username",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1129,
                                                            "end_token": 1129,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1132,
                                                    "end_token": 1135,
                                                    "label": "description=\"Test description\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1132,
                                                            "end_token": 1132,
                                                            "label": "description",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1134,
                                                            "end_token": 1134,
                                                            "label": "\"Test description\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1137,
                                                    "end_token": 1142,
                                                    "label": "links=[\"link1\"],",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1137,
                                                            "end_token": 1137,
                                                            "label": "links",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 1139,
                                                            "end_token": 1141,
                                                            "label": "[\"link1\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1140,
                                                                    "end_token": 1140,
                                                                    "label": "\"link1\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1144,
                                                    "end_token": 1147,
                                                    "label": "avatarUrl=\"avatar.jpg\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1144,
                                                            "end_token": 1144,
                                                            "label": "avatarUrl",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1146,
                                                            "end_token": 1146,
                                                            "label": "\"avatar.jpg\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1149,
                                                    "end_token": 1151,
                                                    "label": "isFeatured=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1149,
                                                            "end_token": 1149,
                                                            "label": "isFeatured",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 1151,
                                                            "end_token": 1151,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1154,
                                                    "end_token": 1161,
                                                    "label": "createdAt=datetime.now(),",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1154,
                                                            "end_token": 1154,
                                                            "label": "createdAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 1156,
                                                            "end_token": 1160,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1156,
                                                                    "end_token": 1158,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1156,
                                                                            "end_token": 1156,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1158,
                                                                            "end_token": 1158,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1163,
                                                    "end_token": 1170,
                                                    "label": "updatedAt=datetime.now(),",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1163,
                                                            "end_token": 1163,
                                                            "label": "updatedAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 1165,
                                                            "end_token": 1169,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1165,
                                                                    "end_token": 1167,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1165,
                                                                            "end_token": 1165,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1167,
                                                                            "end_token": 1167,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1175,
                            "end_token": 1179,
                            "label": "# Mock prisma calls\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1180,
                            "end_token": 1187,
                            "label": "mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1180,
                                    "end_token": 1180,
                                    "label": "mock_profile_db",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 1182,
                                    "end_token": 1187,
                                    "label": "mocker.patch(\"prisma.models.Profile.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1182,
                                            "end_token": 1184,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1182,
                                                    "end_token": 1182,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1184,
                                                    "end_token": 1184,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1185,
                                            "end_token": 1187,
                                            "label": "(\"prisma.models.Profile.prisma\")",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 1186,
                                                    "end_token": 1186,
                                                    "label": "\"prisma.models.Profile.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 1189,
                            "end_token": 1204,
                            "label": "mock_profile_db.return_value.find_first = mocker.AsyncMock(\n        return_value=mock_profile\n    )",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1189,
                                    "end_token": 1193,
                                    "label": "mock_profile_db.return_value.find_first",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1189,
                                            "end_token": 1189,
                                            "label": "mock_profile_db",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1191,
                                            "end_token": 1191,
                                            "label": "return_value",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1193,
                                            "end_token": 1193,
                                            "label": "find_first",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 1195,
                                    "end_token": 1204,
                                    "label": "mocker.AsyncMock(\n        return_value=mock_profile\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1195,
                                            "end_token": 1197,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1195,
                                                    "end_token": 1195,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1197,
                                                    "end_token": 1197,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1198,
                                            "end_token": 1204,
                                            "label": "(\n        return_value=mock_profile\n    )",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1200,
                                                    "end_token": 1202,
                                                    "label": "return_value=mock_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1200,
                                                            "end_token": 1200,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1202,
                                                            "end_token": 1202,
                                                            "label": "mock_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 1206,
                            "end_token": 1219,
                            "label": "mock_profile_db.return_value.update = mocker.AsyncMock(return_value=mock_profile)",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1206,
                                    "end_token": 1210,
                                    "label": "mock_profile_db.return_value.update",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1206,
                                            "end_token": 1206,
                                            "label": "mock_profile_db",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1208,
                                            "end_token": 1208,
                                            "label": "return_value",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1210,
                                            "end_token": 1210,
                                            "label": "update",
                                            "children": []
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 1212,
                                    "end_token": 1219,
                                    "label": "mocker.AsyncMock(return_value=mock_profile)",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1212,
                                            "end_token": 1214,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1212,
                                                    "end_token": 1212,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1214,
                                                    "end_token": 1214,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1215,
                                            "end_token": 1219,
                                            "label": "(return_value=mock_profile)",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1216,
                                                    "end_token": 1218,
                                                    "label": "return_value=mock_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1216,
                                                            "end_token": 1216,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1218,
                                                            "end_token": 1218,
                                                            "label": "mock_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1222,
                            "end_token": 1225,
                            "label": "# Test data\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1226,
                            "end_token": 1263,
                            "label": "profile = Profile(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1226,
                                    "end_token": 1226,
                                    "label": "profile",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 1228,
                                    "end_token": 1263,
                                    "label": "Profile(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1228,
                                            "end_token": 1228,
                                            "label": "Profile",
                                            "children": []
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1229,
                                            "end_token": 1263,
                                            "label": "(\n        name=\"Test Creator\",\n        username=\"creator\",\n        description=\"Test description\",\n        links=[\"link1\"],\n        avatar_url=\"avatar.jpg\",\n        is_featured=False,\n    )",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1231,
                                                    "end_token": 1234,
                                                    "label": "name=\"Test Creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1231,
                                                            "end_token": 1231,
                                                            "label": "name",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1233,
                                                            "end_token": 1233,
                                                            "label": "\"Test Creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1236,
                                                    "end_token": 1239,
                                                    "label": "username=\"creator\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1236,
                                                            "end_token": 1236,
                                                            "label": "username",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1238,
                                                            "end_token": 1238,
                                                            "label": "\"creator\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1241,
                                                    "end_token": 1244,
                                                    "label": "description=\"Test description\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1241,
                                                            "end_token": 1241,
                                                            "label": "description",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1243,
                                                            "end_token": 1243,
                                                            "label": "\"Test description\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1246,
                                                    "end_token": 1251,
                                                    "label": "links=[\"link1\"],",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1246,
                                                            "end_token": 1246,
                                                            "label": "links",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 1248,
                                                            "end_token": 1250,
                                                            "label": "[\"link1\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1249,
                                                                    "end_token": 1249,
                                                                    "label": "\"link1\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1253,
                                                    "end_token": 1256,
                                                    "label": "avatar_url=\"avatar.jpg\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1253,
                                                            "end_token": 1253,
                                                            "label": "avatar_url",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1255,
                                                            "end_token": 1255,
                                                            "label": "\"avatar.jpg\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1258,
                                                    "end_token": 1260,
                                                    "label": "is_featured=False",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1258,
                                                            "end_token": 1258,
                                                            "label": "is_featured",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 1260,
                                                            "end_token": 1260,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1266,
                            "end_token": 1269,
                            "label": "# Call function\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1270,
                            "end_token": 1280,
                            "label": "result = await db.update_or_create_profile(\"user-id\", profile)",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1270,
                                    "end_token": 1270,
                                    "label": "result",
                                    "children": []
                                },
                                {
                                    "type": "await",
                                    "start_token": 1272,
                                    "end_token": 1280,
                                    "label": "await db.update_or_create_profile(\"user-id\", profile)",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 1273,
                                            "end_token": 1280,
                                            "label": "db.update_or_create_profile(\"user-id\", profile)",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 1273,
                                                    "end_token": 1275,
                                                    "label": "db.update_or_create_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1273,
                                                            "end_token": 1273,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1275,
                                                            "end_token": 1275,
                                                            "label": "update_or_create_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 1276,
                                                    "end_token": 1280,
                                                    "label": "(\"user-id\", profile)",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 1277,
                                                            "end_token": 1277,
                                                            "label": "\"user-id\"",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1279,
                                                            "end_token": 1279,
                                                            "label": "profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1283,
                            "end_token": 1286,
                            "label": "# Verify results\n",
                            "children": []
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1287,
                            "end_token": 1293,
                            "label": "assert result.username == \"creator\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1288,
                                    "end_token": 1292,
                                    "label": "result.username ==",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1288,
                                            "end_token": 1290,
                                            "label": "result.username",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1288,
                                                    "end_token": 1288,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1290,
                                                    "end_token": 1290,
                                                    "label": "username",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1293,
                                            "end_token": 1293,
                                            "label": "\"creator\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1295,
                            "end_token": 1301,
                            "label": "assert result.name == \"Test Creator\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1296,
                                    "end_token": 1300,
                                    "label": "result.name ==",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1296,
                                            "end_token": 1298,
                                            "label": "result.name",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1296,
                                                    "end_token": 1296,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1298,
                                                    "end_token": 1298,
                                                    "label": "name",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1301,
                                            "end_token": 1301,
                                            "label": "\"Test Creator\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1304,
                            "end_token": 1309,
                            "label": "# Verify mocks called correctly\n",
                            "children": []
                        },
                        {
                            "type": "call",
                            "start_token": 1310,
                            "end_token": 1318,
                            "label": "mock_profile_db.return_value.find_first.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1310,
                                    "end_token": 1316,
                                    "label": "mock_profile_db.return_value.find_first.assert_called_once",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1310,
                                            "end_token": 1310,
                                            "label": "mock_profile_db",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1312,
                                            "end_token": 1312,
                                            "label": "return_value",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1314,
                                            "end_token": 1314,
                                            "label": "find_first",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1316,
                                            "end_token": 1316,
                                            "label": "assert_called_once",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "call",
                            "start_token": 1320,
                            "end_token": 1328,
                            "label": "mock_profile_db.return_value.update.assert_called_once()",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1320,
                                    "end_token": 1326,
                                    "label": "mock_profile_db.return_value.update.assert_called_once",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1320,
                                            "end_token": 1320,
                                            "label": "mock_profile_db",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1322,
                                            "end_token": 1322,
                                            "label": "return_value",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1324,
                                            "end_token": 1324,
                                            "label": "update",
                                            "children": []
                                        },
                                        {
                                            "type": "identifier",
                                            "start_token": 1326,
                                            "end_token": 1326,
                                            "label": "assert_called_once",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_update_profile",
            "start_line": 192,
            "end_line": 232
        },
        {
            "type": "function_definition",
            "start_token": 1339,
            "end_token": 1511,
            "label": "async def test_get_user_profile(mocker):\n    # Mock data\n    mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"No Profile Data\",\n        username=\"testuser\",\n        description=\"Test description\",\n        links=[\"link1\", \"link2\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )\n\n    # Mock prisma calls\n    mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")\n    mock_profile_db.return_value.find_unique = mocker.AsyncMock(\n        return_value=mock_profile\n    )\n\n    # Call function\n    result = await db.get_user_profile(\"user-id\")\n\n    # Verify results\n    assert result.name == \"No Profile Data\"\n    assert result.username == \"No Profile Data\"\n    assert result.description == \"No Profile Data\"\n    assert result.links == []\n    assert result.avatar_url == \"\"\n",
            "children": [
                {
                    "type": "identifier",
                    "start_token": 1340,
                    "end_token": 1340,
                    "label": "def",
                    "children": []
                },
                {
                    "type": "identifier",
                    "start_token": 1341,
                    "end_token": 1341,
                    "label": "test_get_user_profile",
                    "children": []
                },
                {
                    "type": "parameters",
                    "start_token": 1342,
                    "end_token": 1344,
                    "label": "(mocker)",
                    "children": [
                        {
                            "type": "identifier",
                            "start_token": 1343,
                            "end_token": 1343,
                            "label": "mocker",
                            "children": []
                        }
                    ]
                },
                {
                    "type": "block",
                    "start_token": 1346,
                    "end_token": 1511,
                    "label": "\n    # Mock data\n    mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"No Profile Data\",\n        username=\"testuser\",\n        description=\"Test description\",\n        links=[\"link1\", \"link2\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )\n\n    # Mock prisma calls\n    mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")\n    mock_profile_db.return_value.find_unique = mocker.AsyncMock(\n        return_value=mock_profile\n    )\n\n    # Call function\n    result = await db.get_user_profile(\"user-id\")\n\n    # Verify results\n    assert result.name == \"No Profile Data\"\n    assert result.username == \"No Profile Data\"\n    assert result.description == \"No Profile Data\"\n    assert result.links == []\n    assert result.avatar_url == \"\"\n",
                    "children": [
                        {
                            "type": "comment",
                            "start_token": 1347,
                            "end_token": 1350,
                            "label": "# Mock data\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1351,
                            "end_token": 1417,
                            "label": "mock_profile = prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"No Profile Data\",\n        username=\"testuser\",\n        description=\"Test description\",\n        links=[\"link1\", \"link2\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1351,
                                    "end_token": 1351,
                                    "label": "mock_profile",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 1353,
                                    "end_token": 1417,
                                    "label": "prisma.models.Profile(\n        id=\"profile-id\",\n        name=\"No Profile Data\",\n        username=\"testuser\",\n        description=\"Test description\",\n        links=[\"link1\", \"link2\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1353,
                                            "end_token": 1357,
                                            "label": "prisma.models.Profile",
                                            "children": [
                                                {
                                                    "type": "dotted_name",
                                                    "start_token": 1353,
                                                    "end_token": 1355,
                                                    "label": "prisma.models",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1353,
                                                            "end_token": 1353,
                                                            "label": "prisma",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1355,
                                                            "end_token": 1355,
                                                            "label": "models",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1357,
                                                    "end_token": 1357,
                                                    "label": "Profile",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1358,
                                            "end_token": 1417,
                                            "label": "(\n        id=\"profile-id\",\n        name=\"No Profile Data\",\n        username=\"testuser\",\n        description=\"Test description\",\n        links=[\"link1\", \"link2\"],\n        avatarUrl=\"avatar.jpg\",\n        isFeatured=False,\n        createdAt=datetime.now(),\n        updatedAt=datetime.now(),\n    )",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1360,
                                                    "end_token": 1363,
                                                    "label": "id=\"profile-id\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1360,
                                                            "end_token": 1360,
                                                            "label": "id",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1362,
                                                            "end_token": 1362,
                                                            "label": "\"profile-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1365,
                                                    "end_token": 1368,
                                                    "label": "name=\"No Profile Data\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1365,
                                                            "end_token": 1365,
                                                            "label": "name",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1367,
                                                            "end_token": 1367,
                                                            "label": "\"No Profile Data\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1370,
                                                    "end_token": 1373,
                                                    "label": "username=\"testuser\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1370,
                                                            "end_token": 1370,
                                                            "label": "username",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1372,
                                                            "end_token": 1372,
                                                            "label": "\"testuser\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1375,
                                                    "end_token": 1378,
                                                    "label": "description=\"Test description\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1375,
                                                            "end_token": 1375,
                                                            "label": "description",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1377,
                                                            "end_token": 1377,
                                                            "label": "\"Test description\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1380,
                                                    "end_token": 1386,
                                                    "label": "links=[\"link1\", \"link2\"]",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1380,
                                                            "end_token": 1380,
                                                            "label": "links",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "list",
                                                            "start_token": 1382,
                                                            "end_token": 1386,
                                                            "label": "[\"link1\", \"link2\"]",
                                                            "children": [
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1383,
                                                                    "end_token": 1383,
                                                                    "label": "\"link1\"",
                                                                    "children": []
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "start_token": 1385,
                                                                    "end_token": 1385,
                                                                    "label": "\"link2\"",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1389,
                                                    "end_token": 1392,
                                                    "label": "avatarUrl=\"avatar.jpg\",",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1389,
                                                            "end_token": 1389,
                                                            "label": "avatarUrl",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "string",
                                                            "start_token": 1391,
                                                            "end_token": 1391,
                                                            "label": "\"avatar.jpg\"",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1394,
                                                    "end_token": 1397,
                                                    "label": "isFeatured=False,",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1394,
                                                            "end_token": 1394,
                                                            "label": "isFeatured",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "false",
                                                            "start_token": 1396,
                                                            "end_token": 1396,
                                                            "label": "False",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1399,
                                                    "end_token": 1406,
                                                    "label": "createdAt=datetime.now(),",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1399,
                                                            "end_token": 1399,
                                                            "label": "createdAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 1401,
                                                            "end_token": 1405,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1401,
                                                                    "end_token": 1403,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1401,
                                                                            "end_token": 1401,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1403,
                                                                            "end_token": 1403,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 1404,
                                                                    "end_token": 1405,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1408,
                                                    "end_token": 1415,
                                                    "label": "updatedAt=datetime.now(),",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1408,
                                                            "end_token": 1408,
                                                            "label": "updatedAt",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "call",
                                                            "start_token": 1410,
                                                            "end_token": 1414,
                                                            "label": "datetime.now()",
                                                            "children": [
                                                                {
                                                                    "type": "attribute",
                                                                    "start_token": 1410,
                                                                    "end_token": 1412,
                                                                    "label": "datetime.now",
                                                                    "children": [
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1410,
                                                                            "end_token": 1410,
                                                                            "label": "datetime",
                                                                            "children": []
                                                                        },
                                                                        {
                                                                            "type": "identifier",
                                                                            "start_token": 1412,
                                                                            "end_token": 1412,
                                                                            "label": "now",
                                                                            "children": []
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "argument_list",
                                                                    "start_token": 1413,
                                                                    "end_token": 1414,
                                                                    "label": "()",
                                                                    "children": []
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1420,
                            "end_token": 1424,
                            "label": "# Mock prisma calls\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1425,
                            "end_token": 1432,
                            "label": "mock_profile_db = mocker.patch(\"prisma.models.Profile.prisma\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1425,
                                    "end_token": 1425,
                                    "label": "mock_profile_db",
                                    "children": []
                                },
                                {
                                    "type": "call",
                                    "start_token": 1427,
                                    "end_token": 1432,
                                    "label": "mocker.patch(\"prisma.models.Profile.prisma\")",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1427,
                                            "end_token": 1429,
                                            "label": "mocker.patch",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1427,
                                                    "end_token": 1427,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1429,
                                                    "end_token": 1429,
                                                    "label": "patch",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1430,
                                            "end_token": 1431,
                                            "label": "(\"prisma.models.Profile.prisma\"",
                                            "children": [
                                                {
                                                    "type": "string",
                                                    "start_token": 1431,
                                                    "end_token": 1431,
                                                    "label": "\"prisma.models.Profile.prisma\"",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assignment",
                            "start_token": 1434,
                            "end_token": 1449,
                            "label": "mock_profile_db.return_value.find_unique = mocker.AsyncMock(\n        return_value=mock_profile\n    )",
                            "children": [
                                {
                                    "type": "attribute",
                                    "start_token": 1434,
                                    "end_token": 1438,
                                    "label": "mock_profile_db.return_value.find_unique",
                                    "children": [
                                        {
                                            "type": "identifier",
                                            "start_token": 1434,
                                            "end_token": 1434,
                                            "label": "mock_profile_db",
                                            "children": []
                                        },
                                        {
                                            "type": "attribute",
                                            "start_token": 1436,
                                            "end_token": 1438,
                                            "label": "return_value.find_unique",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1436,
                                                    "end_token": 1436,
                                                    "label": "return_value",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1438,
                                                    "end_token": 1438,
                                                    "label": "find_unique",
                                                    "children": []
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "call",
                                    "start_token": 1440,
                                    "end_token": 1449,
                                    "label": "mocker.AsyncMock(\n        return_value=mock_profile\n    )",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1440,
                                            "end_token": 1442,
                                            "label": "mocker.AsyncMock",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1440,
                                                    "end_token": 1440,
                                                    "label": "mocker",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1442,
                                                    "end_token": 1442,
                                                    "label": "AsyncMock",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "argument_list",
                                            "start_token": 1443,
                                            "end_token": 1448,
                                            "label": "(\n        return_value=mock_profile\n",
                                            "children": [
                                                {
                                                    "type": "assignment",
                                                    "start_token": 1445,
                                                    "end_token": 1447,
                                                    "label": "return_value=mock_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1445,
                                                            "end_token": 1445,
                                                            "label": "return_value",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1447,
                                                            "end_token": 1447,
                                                            "label": "mock_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1451,
                            "end_token": 1455,
                            "label": "\n    # Call function\n",
                            "children": []
                        },
                        {
                            "type": "assignment",
                            "start_token": 1456,
                            "end_token": 1464,
                            "label": "result = await db.get_user_profile(\"user-id\")",
                            "children": [
                                {
                                    "type": "identifier",
                                    "start_token": 1456,
                                    "end_token": 1456,
                                    "label": "result",
                                    "children": []
                                },
                                {
                                    "type": "await",
                                    "start_token": 1458,
                                    "end_token": 1464,
                                    "label": "await db.get_user_profile(\"user-id\")",
                                    "children": [
                                        {
                                            "type": "call",
                                            "start_token": 1459,
                                            "end_token": 1464,
                                            "label": "db.get_user_profile(\"user-id\")",
                                            "children": [
                                                {
                                                    "type": "attribute",
                                                    "start_token": 1459,
                                                    "end_token": 1461,
                                                    "label": "db.get_user_profile",
                                                    "children": [
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1459,
                                                            "end_token": 1459,
                                                            "label": "db",
                                                            "children": []
                                                        },
                                                        {
                                                            "type": "identifier",
                                                            "start_token": 1461,
                                                            "end_token": 1461,
                                                            "label": "get_user_profile",
                                                            "children": []
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "argument_list",
                                                    "start_token": 1462,
                                                    "end_token": 1463,
                                                    "label": "(\"user-id\"",
                                                    "children": [
                                                        {
                                                            "type": "string",
                                                            "start_token": 1463,
                                                            "end_token": 1463,
                                                            "label": "\"user-id\"",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "comment",
                            "start_token": 1467,
                            "end_token": 1470,
                            "label": "# Verify results\n",
                            "children": []
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1471,
                            "end_token": 1477,
                            "label": "assert result.name == \"No Profile Data\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1472,
                                    "end_token": 1477,
                                    "label": "result.name == \"No Profile Data\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1472,
                                            "end_token": 1474,
                                            "label": "result.name",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1472,
                                                    "end_token": 1472,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1474,
                                                    "end_token": 1474,
                                                    "label": "name",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1477,
                                            "end_token": 1477,
                                            "label": "\"No Profile Data\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1479,
                            "end_token": 1485,
                            "label": "assert result.username == \"No Profile Data\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1480,
                                    "end_token": 1485,
                                    "label": "result.username == \"No Profile Data\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1480,
                                            "end_token": 1482,
                                            "label": "result.username",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1480,
                                                    "end_token": 1480,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1482,
                                                    "end_token": 1482,
                                                    "label": "username",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1485,
                                            "end_token": 1485,
                                            "label": "\"No Profile Data\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1487,
                            "end_token": 1493,
                            "label": "assert result.description == \"No Profile Data\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1488,
                                    "end_token": 1493,
                                    "label": "result.description == \"No Profile Data\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1488,
                                            "end_token": 1490,
                                            "label": "result.description",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1488,
                                                    "end_token": 1488,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1490,
                                                    "end_token": 1490,
                                                    "label": "description",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1493,
                                            "end_token": 1493,
                                            "label": "\"No Profile Data\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1495,
                            "end_token": 1501,
                            "label": "assert result.links == [",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1496,
                                    "end_token": 1501,
                                    "label": "result.links == [",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1496,
                                            "end_token": 1498,
                                            "label": "result.links",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1496,
                                                    "end_token": 1496,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1498,
                                                    "end_token": 1498,
                                                    "label": "links",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "list",
                                            "start_token": 1502,
                                            "end_token": 1502,
                                            "label": "]",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "assert_statement",
                            "start_token": 1504,
                            "end_token": 1510,
                            "label": "assert result.avatar_url == \"\"",
                            "children": [
                                {
                                    "type": "comparison_operator",
                                    "start_token": 1505,
                                    "end_token": 1510,
                                    "label": "result.avatar_url == \"\"",
                                    "children": [
                                        {
                                            "type": "attribute",
                                            "start_token": 1505,
                                            "end_token": 1507,
                                            "label": "result.avatar_url",
                                            "children": [
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1505,
                                                    "end_token": 1505,
                                                    "label": "result",
                                                    "children": []
                                                },
                                                {
                                                    "type": "identifier",
                                                    "start_token": 1507,
                                                    "end_token": 1507,
                                                    "label": "avatar_url",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        {
                                            "type": "string",
                                            "start_token": 1510,
                                            "end_token": 1510,
                                            "label": "\"\"",
                                            "children": []
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "name": "test_get_user_profile",
            "start_line": 236,
            "end_line": 264
        }
    ]
}